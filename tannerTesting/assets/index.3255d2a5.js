const xne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}};xne();let hd;function Se(e){return typeof hd[e]=="function"?hd[e]=hd[e](globalThis):hd[e]}var CV,AV,$V,kV;hd=((CV=globalThis.dojoConfig)==null?void 0:CV.has)||((AV=globalThis.esriConfig)==null?void 0:AV.has)?{...($V=globalThis.dojoConfig)==null?void 0:$V.has,...(kV=globalThis.esriConfig)==null?void 0:kV.has}:{},Se.add=(e,t,i,r)=>((r||hd[e]===void 0)&&(hd[e]=t),i&&Se(e)),Se.cache=hd,Se.add("esri-deprecation-warnings",!0),(()=>{var t;Se.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document;if(Se.add("host-browser",e),Se.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),Se.add("dom",e),Se("host-browser")){const i=navigator,r=i.userAgent,s=i.appVersion,o=parseFloat(s);if(Se.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),Se.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),Se.add("khtml",s.includes("Konqueror")?o:void 0),Se.add("edge",parseFloat(r.split("Edge/")[1])||void 0),Se.add("opr",parseFloat(r.split("OPR/")[1])||void 0),Se.add("webkit",!Se("wp")&&!Se("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),Se.add("chrome",!Se("edge")&&!Se("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),Se.add("android",!Se("wp")&&parseFloat(r.split("Android ")[1])||void 0),Se.add("safari",!s.includes("Safari")||Se("wp")||Se("chrome")||Se("android")||Se("edge")||Se("opr")?void 0:parseFloat(s.split("Version/")[1])),Se.add("mac",s.includes("Macintosh")),!Se("wp")&&r.match(/(iPhone|iPod|iPad)/)){const c=RegExp.$1.replace(/P/,"p"),u=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",g=parseFloat(u.replace(/_/,".").replace(/_/g,""));Se.add(c,g),Se.add("ios",g)}Se("webkit")||(!r.includes("Gecko")||Se("wp")||Se("khtml")||Se("edge")||Se.add("mozilla",o),Se("mozilla")&&Se.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&Se.add("esri-mobile",t),i&&Se.add("esri-iPhone",i),Se.add("esri-geolocation",!!navigator.geolocation)}Se.add("esri-wasm","WebAssembly"in globalThis),Se.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),Se.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),Se.add("esri-atomics","Atomics"in globalThis),Se.add("esri-workers","Worker"in globalThis),Se.add("web-feat:cache","caches"in globalThis),Se.add("esri-workers-arraybuffer-transfer",!Se("safari")||Number(Se("safari"))>=12),Se.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Se.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Se.add("featurelayer-snapshot-enabled",!0),Se.add("featurelayer-snapshot-point-min-threshold",8e4),Se.add("featurelayer-snapshot-point-max-threshold",4e5),Se.add("featurelayer-snapshot-point-coverage",.1),Se.add("featurelayer-advanced-symbols",!1),Se.add("featurelayer-pbf",!0),Se.add("featurelayer-pbf-statistics",!1),Se.add("feature-layers-workers",!0),Se.add("feature-polyline-generalization-factor",1),Se.add("mapview-transitions-duration",200),Se.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Se.add("mapserver-pbf-version-support",10.81),Se.add("mapservice-popup-identify-max-tolerance",20),Se.add("heatmap-allow-raster-fallback",!0),Se.add("heatmap-force-raster",!1),Se("host-webworker")||Se("host-browser")&&(Se.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),Se.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{Se.add("esri-image-decode",!0,!0,!0)}).catch(()=>{Se.add("esri-image-decode",!1,!0,!0)})}return!1}),Se.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const Sne=null;function U(e){return e!=null}function ae(e){return e==null}function tl(e,t){return U(e)?t(e):Sne}function dRe(e){return e}function pRe(e){return e}function fs(e,t){return eu(e,t),e}function eu(e,t){if(ae(e))throw new Error(t!=null?t:"value is None")}function Qs(e,t){return U(e)?e:typeof t=="function"?t():t}function tP(e,t){return U(e)?e:t}function ti(e){return U(e)&&e.destroy(),null}function fRe(e){return U(e)&&e.dispose(),null}function Ti(e){return U(e)&&e.remove(),null}function fc(e){return U(e)&&e.abort(),null}function mRe(e){return U(e)&&e.release(),null}function Ine(e,t,i){return U(e)&&U(t)?U(i)?i(e,t):e.equals(t):e===t}function Ene(e){return null}function yRe(e,t){const i=new Array;for(const r of e)i.push(E1(r,null,t));return i}function gRe(e,t){for(const i of e)tl(i,t)}function E1(e,t,i){return U(e)?i(e):t}function vRe(e){return e.filter(t=>U(t))}function Cy(e,...t){let i=e;for(let r=0;r<t.length&&i;++r)i=i[t[r]];return i}function bRe(e){return e}class Xa{constructor(t=1){this._seed=t}set seed(t){this._seed=t!=null?t:Math.random()*Xa._m}getInt(){return this._seed=(Xa._a*this._seed+Xa._c)%Xa._m,this._seed}getFloat(){return this.getInt()/(Xa._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Xa._m*r}}Xa._m=2147483647,Xa._a=48271,Xa._c=0;function Mne(e,t){return t?e.filter((i,r,s)=>s.findIndex(t.bind(null,i))===r):e.filter((i,r,s)=>s.indexOf(i)===r)}function yw(e,t,i){if(ae(e)&&ae(t))return!0;if(ae(e)||ae(t)||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function wRe(e,t){let i=e.length!==t.length;i&&(e.length=t.length);for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],i=!0);return i}function _Re(e,t,i){let r,s;return i?(r=t.filter(o=>!e.some(c=>i(c,o))),s=e.filter(o=>!t.some(c=>i(c,o)))):(r=t.filter(o=>!e.includes(o)),s=e.filter(o=>!t.includes(o))),{added:r,removed:s}}function xRe(e){return e&&typeof e.length=="number"}const Tne=!!Array.prototype.fill;function SRe(e,t){if(Tne)return new Array(e).fill(t);const i=new Array(e);for(let r=0;r<e;r++)i[r]=t;return i}function IRe(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let r=e;r<t;r++)i[r-e]=r;return i}class NV{constructor(){this.last=0}}const DV=new NV;function D4(e,t,i,r){r=r||DV;const s=Math.max(0,r.last-10);for(let c=s;c<i;++c)if(e[c]===t)return r.last=c,c;const o=Math.min(s,i);for(let c=0;c<o;++c)if(e[c]===t)return r.last=c,c;return-1}function Cne(e,t,i,r){const s=i!=null?i:e.length,o=D4(e,t,s,r);if(o!==-1)return e[o]=e[s-1],i==null&&e.pop(),t}const Sa=new Set;function Ane(e,t,i=e.length,r=t.length,s,o){if(r===0||i===0)return i;Sa.clear();for(let u=0;u<r;++u)Sa.add(t[u]);s=s||DV;const c=Math.max(0,s.last-10);for(let u=c;u<i;++u)if(Sa.has(e[u])&&(o&&o.push(e[u]),Sa.delete(e[u]),e[u]=e[i-1],--i,--u,Sa.size===0||i===0))return Sa.clear(),i;for(let u=0;u<c;++u)if(Sa.has(e[u])&&(o&&o.push(e[u]),Sa.delete(e[u]),e[u]=e[i-1],--i,--u,Sa.size===0||i===0))return Sa.clear(),i;return Sa.clear(),i}function ERe(e,t){let i=0;for(let r=0;r<e.length;++r){const s=e[r];t(s,r)&&(e[i]=s,i++)}e.length=i}new Xa;function ny(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function MRe(e){return e instanceof ArrayBuffer}function $ne(e){return e&&e.constructor&&e.constructor.name==="Int8Array"}function kne(e){return e&&e.constructor&&e.constructor.name==="Uint8Array"}function One(e){return e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function Pne(e){return e&&e.constructor&&e.constructor.name==="Int16Array"}function Fne(e){return e&&e.constructor&&e.constructor.name==="Uint16Array"}function Lne(e){return e&&e.constructor&&e.constructor.name==="Int32Array"}function Rne(e){return e&&e.constructor&&e.constructor.name==="Uint32Array"}function Nne(e){return e&&e.constructor&&e.constructor.name==="Float32Array"}function Dne(e){return e&&e.constructor&&e.constructor.name==="Float64Array"}const TRe=1024;function jV(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&jV(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function ve(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=UV(e);if(U(t))return t;if(zV(e))return e.clone();if(VV(e))return e.map(ve);if(GV(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=ve(e[r]);return i}function j4(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=UV(e);if(U(t))return t;if(VV(e)){let i=!0;const r=e.map(s=>{const o=j4(s);return s!=null&&o==null&&(i=!1),o});return i?r:null}if(zV(e))return e.clone();if(!GV(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],o=j4(s);if(s!=null&&o==null)return null;i[r]=o}return i}return null}function zV(e){return typeof e.clone=="function"}function VV(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function GV(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function iP(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function UV(e){if($ne(e)||kne(e)||One(e)||Pne(e)||Fne(e)||Lne(e)||Rne(e)||Nne(e)||Dne(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,ve(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(ve(i));return t}return null}function m6(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function jne(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&yw(e,t):e instanceof Set?t instanceof Set&&Vne(e,t):e instanceof Map?t instanceof Map&&Gne(e,t):!!iP(e)&&iP(t)&&zne(e,t))}function zne(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function Vne(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Gne(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const s=t.get(i);if(s!==r||s===void 0&&!t.has(i))return!1}return!0}function qV(e,t,i=!1){return HV(e,t,i)}function gw(e,t){if(t!=null)return t[e]||BV(e.split("."),!1,t)}function tn(e,t,i){const r=e.split("."),s=r.pop(),o=BV(r,!0,i);o&&s&&(o[s]=t)}function BV(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function HV(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let o=r[s],c=t[s];return o===c?r:o===void 0?(r[s]=ve(c),r):(Array.isArray(c)||Array.isArray(r)?(o=o?Array.isArray(o)?r[s]=o.concat():r[s]=[o]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),i?c.forEach(u=>{o.includes(u)||o.push(u)}):r[s]=c.concat())):c&&typeof c=="object"?r[s]=HV(o,c,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=c),r)},e||{}):e}var OV;const jt={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:(OV=globalThis.location)==null?void 0:OV.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(qV(jt,globalThis.esriConfig,!0),delete jt.has),!jt.assetsPath){{const e="4.26.5";jt.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}jt.defaultAssetsPath=jt.assetsPath}function v(e,t,i,r){var s,o=arguments.length,c=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(e,t,i,r);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(c=(o<3?s(c):o>3?s(t,i,c):s(t,i))||c);return o>3&&c&&Object.defineProperty(t,i,c),c}const Une="modulepreload",rP={},qne="/",pe=function(t,i){return!i||i.length===0?t():Promise.all(i.map(r=>{if(r=`${qne}${r}`,r in rP)return;rP[r]=!0;const s=r.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":Une,s||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),s)return new Promise((u,g)=>{c.addEventListener("load",u),c.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};function Bne(e){return e&&e.release&&typeof e.release=="function"}function Hne(e){return e&&e.acquire&&typeof e.acquire=="function"}class Po{constructor(t,i,r,s=1,o=0){if(this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(o),this._initialSize=o,this._ctor)for(let c=0;c<o;c++)this._pool[c]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(Po.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):Hne(i)&&i.acquire(...t),i}release(t){t&&!Po.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Bne(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}Po.test={disabled:!1};function Wne(e){e.length=0}class En{constructor(t=50,i=50){this._pool=new Po(Array,void 0,Wne,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return iI.acquire()}static release(t){return iI.release(t)}static prune(){iI.prune()}}const iI=new En(100);function CRe(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function Jne(e,t){for(const i of e)if(i!=null&&t(i))return i}function ax(e){return e!=null&&typeof e[Symbol.iterator]=="function"}class Vr{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(ax(t)){const r=this._getOrCreateGroup(i);for(const s of t)this._isHandle(s)&&r.push(s)}else this._isHandle(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if(typeof t!="string"&&ax(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&!!t.remove}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(this._ensureGroupKey(t),i),i}_getGroup(t){return this._groups.get(this._ensureGroupKey(t))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){t.forEach(i=>i.remove())}}const WV=Symbol("Accessor-beforeDestroy");function lg(e){return Mo(()=>e.forEach(t=>U(t)&&t.remove()))}function Mo(e){return{remove:()=>{e&&(e(),e=void 0)}}}function ARe(e){return Mo(()=>{const t=e();U(t)&&t.remove()})}function $Re(e){return Mo(U(e)?()=>e.destroy():void 0)}function rn(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function Yne(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function U2(e,t,i){return i?lx(e,t,{policy:i,path:""}):lx(e,t,null)}function lx(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let o=null,c="merge";if(i&&(o=i.path?`${i.path}.${s}`:s,c=i.policy(o)),c==="replace"||c==="replace-arrays"&&Array.isArray(r[s]))return r[s]=t[s],r;if(r[s]===void 0)return r[s]=ve(t[s]),r;let u=r[s],g=t[s];if(u===g)return r;if(Array.isArray(g)||Array.isArray(r))u=u?Array.isArray(u)?r[s]=u.concat():r[s]=[u]:r[s]=[],g&&(Array.isArray(g)||(g=[g]),g.forEach(b=>{u.includes(b)||u.push(b)}));else if(g&&typeof g=="object")if(i){const b=i.path;i.path=o,r[s]=lx(u,g,i),i.path=b}else r[s]=lx(u,g,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=g);return r},e||{}):e}function JV(e){return Array.isArray(e)?e:e.split(".")}function sP(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Kne(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...sP(i));return t}return sP(e)}function YV(e,t,i,r){const s=Kne(t);if(s.length!==1){const o=s.map(c=>r(e,c,i));return lg(o)}return r(e,s[0],i)}function KV(e){let t=!1;return()=>{t||(t=!0,e())}}function ZV(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.getItemAt(s)}const r=rn(t);return Yne(r,i)?r.get(i):t[i]}function XV(e,t,i){if(e==null)return e;const r=ZV(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:XV(r,t,i+1)}function vw(e,t,i=0){return typeof t!="string"||t.includes(".")?XV(e,JV(t),i):ZV(t,e)}function ux(e,t){return vw(e,t)}function nP(e,t){return vw(t,e)!==void 0}function bw(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=ve(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function t5(e,t){const i=bw(e);let r=i[t];return r||(r=i[t]={}),r}function Zne(e,t){return U2(e,t,Qne)}const Xne=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Qne(e){return Xne.test(e)?"replace":"merge"}const eoe=/\{([^\}]+)\}/g;function oP(e){return e!=null?e:""}function pa(e,t){return e.replace(eoe,typeof t=="object"?(i,r)=>oP(gw(r,t)):(i,r)=>oP(t(r)))}function toe(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function y6(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function kRe(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}function z4(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const aP={info:0,warn:1,error:2,none:3};class Ie{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Ie._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Ie.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=Ie._loggers;return Ie._loggers=t,i},set throttlingDisabled(t){Ie._throttlingDisabled=t}}}static getLogger(t){let i=Ie._loggers[t];return i||(i=new Ie({module:t})),i}_log(t,i,...r){if(!!this._matchLevel(t)){if(i!=="always"&&!Ie._throttlingDisabled){const s=this._argsToKey(r),o=this._loggedMessages[t].get(s);if(i==="once"&&o!=null||i==="oncePerTick"&&o&&o>=Ie._tickCounter)return;this._loggedMessages[t].set(s,Ie._tickCounter),Ie._scheduleTickCounterIncrement()}for(const s of jt.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;U(r);){const s=r[t];if(U(s))return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...r){console[t](`[${i}]`,...r)}_matchLevel(t){const i=jt.log.level?jt.log.level:"warn";return aP[this._parentWithMember("level",i)]<=aP[t]}_argsToKey(...t){const i=(r,s)=>typeof s!="object"||Array.isArray(s)?s:"[Object]";return y6(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){Ie._tickCounterScheduled||(Ie._tickCounterScheduled=!0,Promise.resolve().then(()=>{Ie._tickCounter++,Ie._tickCounterScheduled=!1}))}}Ie._loggers={},Ie._tickCounter=0,Ie._tickCounterScheduled=!1,Ie._throttlingDisabled=!1;var uc;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(uc||(uc={}));class ioe{constructor(t,i){this._observers=t,this._observer=i}remove(){ny(this._observers,this._observer)}}class QV{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return roe;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const o=i.length;for(let c=0;c<o;++c){const u=i[c];if(u.destroyed)s=!0;else if(u===t){r=!0;break}}return r||(i.push(t),s&&this._removeDestroyedObservers()),new ioe(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&t[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;t[s]=t[s+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}}const roe={remove:()=>{}};var Ot;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(Ot||(Ot={}));const V4=Ot.USER+1;function dd(e){switch(e){case"defaults":return Ot.DEFAULTS;case"service":return Ot.SERVICE;case"portal-item":return Ot.PORTAL_ITEM;case"web-scene":return Ot.WEB_SCENE;case"web-map":return Ot.WEB_MAP;case"user":return Ot.USER;default:return null}}function cx(e){switch(e){case Ot.DEFAULTS:return"defaults";case Ot.SERVICE:return"service";case Ot.PORTAL_ITEM:return"portal-item";case Ot.WEB_SCENE:return"web-scene";case Ot.WEB_MAP:return"web-map";case Ot.USER:return"user"}return void 0}function soe(e){return cx(e)}var pi;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(pi||(pi={}));const hx={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},M1=[];let Nv=hx;function gt(e){Nv.onObservableAccessed(e)}let q2=!1,B2=!1;function Cc(e,t,i){if(q2)return g6(e,t,i);eG(e);const r=t.call(i);return tG(),r}function noe(e,t){return Cc(hx,e,t)}function g6(e,t,i){const r=q2;q2=!0,eG(e);let s=null;try{s=t.call(i)}catch(o){B2&&Ie.getLogger("esri.core.accessorSupport.tracking").error(o)}return tG(),q2=r,s}function eG(e){Nv=e,M1.push(e)}function tG(){const e=M1.length;if(e>1){const t=M1.pop();Nv=M1[e-2],t.onTrackingEnd()}else if(e===1){const t=M1.pop();Nv=hx,t.onTrackingEnd()}else Nv=hx}function iG(e,t){const i=t.observerObject;if(i.flags&pi.DepTrackingInitialized)return;const r=B2;B2=!1,i.flags&pi.AutoTracked?g6(t,t.metadata.get,e):rG(e,t),B2=r}const ooe=[];function rG(e,t){const i=t.observerObject;i.flags&pi.ExplicitlyTracking||(i.flags|=pi.ExplicitlyTracking,g6(t,()=>{const r=t.metadata.dependsOn||ooe;for(const s of r)if(typeof s!="string"||s.includes(".")){const o=JV(s);for(let c=0,u=e;c<o.length&&u!=null&&typeof u=="object";++c)u=lP(u,o[c],c!==o.length-1)}else lP(e,s,!1)}),i.flags&=~pi.ExplicitlyTracking)}function lP(e,t,i){var o;const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const c=parseInt(r,10);if(!isNaN(c))return Array.isArray(e)?e[c]:e.getItemAt(c)}const s=(o=rn(e))==null?void 0:o.properties.get(r);return s&&(gt(s.observerObject),iG(e,s)),i?e[r]:void 0}class uP{constructor(t,i,r){this.properties=t,this.propertyName=i,this.metadata=r,this.observerObject=new aoe,this._accessed=null,this._handles=null,this.observerObject.flags=pi.Dirty|(r.nonNullable?pi.NonNullable:0)|(r.hasOwnProperty("value")?pi.HasDefaultValue:0)|(r.get===void 0?pi.DepTrackingInitialized:0)|(r.dependsOn===void 0?pi.AutoTracked:0),cP.register(this,this.observerObject)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles(),cP.unregister(this)}getComputed(){const t=this.observerObject;gt(t);const i=this.properties.store,r=this.propertyName,s=t.flags,o=i.get(r);if(s&pi.Computing||~s&pi.Dirty&&i.has(r))return o;t.flags|=pi.Computing;const c=this.properties.host;let u;s&pi.AutoTracked?u=Cc(this,this.metadata.get,c):(rG(c,this),u=this.metadata.get.call(c)),i.set(r,u,Ot.COMPUTED);const g=i.get(r);return g===o?t.flags&=~pi.Dirty:noe(this.commit,this),t.flags&=~pi.Computing,g}onObservableAccessed(t){t!==this.observerObject&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles();const t=this.observerObject;t.flags|=pi.DepTrackingInitialized;const i=this._accessed;if(i===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let s=0;s<i.length;++s)r.push(i[s].observe(t));i.length=0}notifyChange(){const t=this.observerObject;t.onInvalidated(),t.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const t=this.observerObject;t.flags&=~pi.Dirty,t.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class aoe extends QV{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&pi.Overriden&&(this.flags|=pi.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}destroy(){this.flags&pi.Dirty&&this.onCommitted(),super.destroy()}}const cP=new FinalizationRegistry(e=>{e.destroy()});class v6{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new v6;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,ve(r))}),i}get(t){return this._values.get(t)}originOf(){return Ot.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function v_(e,t,i){return e!==void 0}function hP(e,t,i,r){return e!==void 0&&(!(i==null&&e.observerObject.flags&pi.NonNullable)||(r.lifecycle,uc.INITIALIZING,!1))}function loe(e){return e&&typeof e.destroy=="function"}Ie.getLogger("esri.core.accessorSupport.Properties");class uoe{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=uc.INITIALIZING,this.store=new v6,this._origin=Ot.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new uP(this,r,i[r]);this.properties.set(r,s)}this.metadatas=i}initialize(){this.lifecycle=uc.CONSTRUCTING}constructed(){this.lifecycle=uc.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[t,i]of this.properties){if(i.metadata.autoDestroy){const r=this.internalGet(t);r&&loe(r)&&(r.destroy(),~i.observerObject.flags&pi.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==uc.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();gt(i.observerObject);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.properties.get(t);if(r!==void 0&&r.observerObject.flags&pi.HasDefaultValue)return"defaults"}return cx(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(v_(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.properties.get(t);v_(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.properties.get(i);if(!v_(s))return"";const o=new Set,c=Cc({onObservableAccessed:g=>o.add(g),onTrackingEnd:()=>{}},()=>{var g;return(g=s.metadata.get)==null?void 0:g.call(t)});let u=`${r}${t.declaredClass.split(".").pop()}.${i}: ${c}
`;if(o.size===0)return u;r+="  ";for(const g of o){if(!(g instanceof uP))continue;const b=g.properties.host,S=g.propertyName,E=rn(b);u+=E?E.getDependsInfo(b,S,r):`${r}${S}: undefined
`}return u}setAtOrigin(t,i,r){const s=this.properties.get(t);if(v_(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.observerObject.flags&pi.Overriden)}clearOverride(t){const i=this.properties.get(t),r=i==null?void 0:i.observerObject;r&&r.flags&pi.Overriden&&(r.flags&=~pi.Overriden,i.notifyChange())}override(t,i){const r=this.properties.get(t);if(!hP(r,t,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:c,value:u}=o;if(rI.release(o),!c)return;i=u}r.observerObject.flags|=pi.Overriden,this._internalSet(r,i)}set(t,i){const r=this.properties.get(t);if(!hP(r,t,i,this))return;const s=r.metadata.cast;if(s){const c=this._cast(s,i),{valid:u,value:g}=c;if(rI.release(c),!u)return;i=g}const o=r.metadata.set;o?o.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=dd(t)}getDefaultOrigin(){return cx(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==uc.INITIALIZING?this._origin:Ot.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,o=t.propertyName;s.has(o,r)&&m6(i,s.get(o))&&~t.observerObject.flags&pi.Overriden&&r===s.originOf(o)||(t.invalidate(),s.set(o,i,r),t.commit(),iG(this.host,t))}_cast(t,i){const r=rI.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}}class coe{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const rI=new Po(coe);function hoe(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,r)=>{if(r==="")return"$";const s=gw(r,t),o=s!=null?s:"";if(o===void 0)throw new Error(`could not find key "${r}" in template`);return o.toString()})}class i5{constructor(t,i,r){var s;this.name=t,this.details=r,this instanceof i5&&(this.message=(s=i&&hoe(i,r))!=null?s:"")}toString(){return"["+this.name+"]: "+this.message}}class de extends i5{constructor(t,i,r){if(super(t,i,r),!(this instanceof de))return new de(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ve(i)}catch{return"[object]"}}))}}catch(t){throw Ie.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new de(t.name,t.message,t.details)}}de.prototype.type="error";function dx(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))dx(e,r,t[r]);else{if(t.includes(".")){const s=t.split("."),o=s.splice(s.length-1,1)[0];return void dx(ux(e,s),o,i)}const r=e.__accessor__;r!=null&&doe(t,r),e[t]=i}}function doe(e,t){if(Se("esri-unknown-property-errors")&&!poe(e,t))throw new de("set:unknown-property",foe(e,t))}function poe(e,t){return t.metadatas[e]!=null}function foe(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}class sG extends Po{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=Ene(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const b_=[];function px(e){b_.push(e),b_.length===1&&queueMicrotask(()=>{const t=b_.slice();b_.length=0;for(const i of t)i()})}class Dv{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}record(t){U(t)&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}var G4;(function(e){const t=(o,c,u,g)=>{let b=c,S=c;const E=u>>>1,A=o[b-1];for(;S<=E;){S=b<<1,S<u&&g(o[S-1],o[S])<0&&++S;const O=o[S-1];if(g(O,A)<=0)break;o[b-1]=O,b=S}o[b-1]=A},i=(o,c)=>o<c?-1:o>c?1:0;function r(o,c,u,g){c===void 0&&(c=0),u===void 0&&(u=o.length),g===void 0&&(g=i);for(let S=u>>>1;S>c;S--)t(o,S,u,g);const b=c+1;for(let S=u-1;S>c;S--){const E=o[c];o[c]=o[S],o[S]=E,t(o,b,S,g)}}function*s(o,c,u,g){c===void 0&&(c=0),u===void 0&&(u=o.length),g===void 0&&(g=i);for(let S=u>>>1;S>c;S--)t(o,S,u,g),yield;const b=c+1;for(let S=u-1;S>c;S--){const E=o[c];o[c]=o[S],o[S]=E,t(o,b,S,g),yield}}e.sort=r,e.iterableSort=s})(G4||(G4={}));const dP=G4,moe=1.5,yoe=1.1;class Uf{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new NV,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>pP(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,pP(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=D4(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(D4(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=Ane(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){dP.sort(this.data,0,this.length,t)}iterableSort(t){return dP.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){for(let r=0;r<this.length;++r){const s=this.data[r];if(t.call(i,s,r))return s}}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const o=this.data[s];t.call(i,o,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=o,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const r=this.length,s=this.data;for(let o=0;o<r;++o)t.call(i,s[o],o,s)}forEach(t,i){for(let r=0;r<this.length;++r)t.call(i,this.data[r],r,this.data)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}}function pP(e){e.data.length>moe*e.length&&(e.data.length=Math.floor(e.length*yoe))}function goe(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(r)}}}}const ww=goe(globalThis),fP=new Set;function voe(e,t,i=!1){i&&fP.has(t)||(i&&fP.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function mP(e,t,i={}){if(Se("esri-deprecation-warnings")){const{moduleName:r}=i;_w(e,`Function: ${(r?r+"::":"")+t+"()"}`,i)}}function U4(e,t,i={}){if(Se("esri-deprecation-warnings")){const{moduleName:r}=i;_w(e,`Property: ${(r?r+"::":"")+t}`,i)}}function _w(e,t,i={}){if(Se("esri-deprecation-warnings")){const{replacement:r,version:s,see:o,warnOnce:c}=i;let u=t;r&&(u+=`
	\u{1F6E0}\uFE0F Replacement: ${r}`),s&&(u+=`
	\u2699\uFE0F Version: ${s}`),o&&(u+=`
	\u{1F517} See ${o} for more details.`),voe(e,u,c)}}function r5(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function hc(e,t,i){if(!r5(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const r=t.slice();for(const s of r)e.addEventListener(s,i);return{remove(){for(const s of r)e.removeEventListener(s,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function nG(e,t,i){if(!r5(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=hc(e,t,s=>{r.remove(),i.call(e,s)});return{remove(){r.remove()}}}function boe(e,t,i){let r=!1;const s=hc(e,t,o=>{r||i.call(e,o)});return{resume(){r=!1},pause(){r=!0},remove(){s.remove()}}}const woe={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function el({key:e}){return woe[e]||e}function Ri(e="Aborted"){return new de("AbortError",e)}function or(e,t="Aborted"){if(Fo(e))throw Ri(t)}function s5(e){return U(e)?"aborted"in e?e:e.signal:e}function Fo(e){const t=s5(e);return U(t)&&t.aborted}function Jl(e){if(ro(e))throw e}function q4(e){if(!ro(e))throw e}function To(e,t){const i=s5(e);if(!ae(i)){if(!i.aborted)return nG(i,"abort",()=>t());t()}}function b6(e,t){const i=s5(e);if(!ae(i))return or(i),nG(i,"abort",()=>t(Ri()))}function i0(e,t){const i=s5(t);return ae(i)?e:new Promise((r,s)=>{let o=To(t,()=>s(Ri()));const c=()=>o=Ti(o);e.then(c,c),e.then(r,s)})}function ro(e){return(e==null?void 0:e.name)==="AbortError"}async function qf(e){try{return await e}catch(t){if(!ro(t))throw t;return}}function tu(){let e=null;const t=new Promise((i,r)=>{e={promise:void 0,resolve:i,reject:r}});return e.promise=t,e}async function Ms(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(c=>e[c]),s=await Ms(r),o={};return i.map((c,u)=>o[c]=s[u]),o}const t=e;return new Promise(i=>{const r=[];let s=t.length;s===0&&i(r),t.forEach(o=>{const c={promise:o||Promise.resolve(o)};r.push(c),c.promise.then(u=>{c.value=u}).catch(u=>{c.error=u}).then(()=>{--s,s===0&&i(r)})})})}async function oG(e){return(await Ms(e)).filter(t=>!!t.value).map(t=>t.value)}function n5(e,t,i){const r=new AbortController;return To(i,()=>r.abort()),new Promise((s,o)=>{let c=setTimeout(()=>{c=0,s(t)},e);To(r,()=>{c&&(clearTimeout(c),o(Ri()))})})}function Lc(e){return e&&typeof e.then=="function"}function B4(e){return Lc(e)?e:Promise.resolve(e)}function o5(e,t=-1){let i,r,s,o,c=null;const u=(...g)=>{if(i){r=g,o&&o.reject(Ri()),o=tu();const A=o.promise;if(c){const O=c;c=null,O.abort()}return A}if(s=o||tu(),o=null,t>0){const A=new AbortController;i=B4(e(...g,A.signal));const O=i;n5(t).then(()=>{i===O&&(o?A.abort():c=A)})}else i=1,i=B4(e(...g));const b=()=>{const A=r;r=s=i=c=null,A!=null&&u(...A)},S=i,E=s;return S.then(b,b),S.then(E.resolve,E.reject),E.promise};return u}function aG(){let e,t;const i=new Promise((s,o)=>{e=s,t=o}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,o)=>ww.setTimeout(()=>r.reject(o),s),r.promise=i,r}async function yP(e){await Promise.resolve(),or(e)}function ORe(e){return e}function PRe(e){return .001*e}class _oe{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class xoe{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let H4=0;const Gg={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},W4=["prepare","preRender","render","postRender","update","finish"],J4=[],r0=new Uf;class Soe{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const fx={frameTasks:r0,willDispatch:!1,clearFrameTasks:Ioe,dispatch:cG,executeFrameTasks:Eoe};function ug(e){const t=new xoe(e);return J4.push(t),fx.willDispatch||(fx.willDispatch=!0,px(cG)),t}function Ay(e){const t=new _oe(e);return r0.push(t),mx==null&&(H4=performance.now(),mx=requestAnimationFrame(lG)),new Soe(t)}let mx=null;function Ioe(e=!1){r0.forAll(t=>{t.removed=!0}),e&&uG()}function lG(){const e=performance.now();mx=null,mx=r0.length>0?requestAnimationFrame(lG):null,fx.executeFrameTasks(e)}function Eoe(e){const t=e-H4;H4=e;const i=1e3/60,r=Math.max(0,t-i);Gg.time=e,Gg.frameDuration=i-r;for(let s=0;s<W4.length;s++){const o=performance.now(),c=W4[s];r0.forAll(u=>{var g;u.paused||u.removed||(s===0&&u.ticks++,u.phases[c]&&(Gg.elapsedFrameTime=performance.now()-e,Gg.deltaTime=u.ticks===0?0:t,(g=u.phases[c])==null||g.call(u,Gg)))}),Moe[s].record(performance.now()-o)}uG(),Toe.record(performance.now()-e)}const w_=new Uf;function uG(){r0.forAll(e=>{e.removed&&w_.push(e)}),r0.removeUnorderedMany(w_.data,w_.length),w_.clear()}function cG(){for(;J4.length;){const e=J4.shift();e.isActive&&e.callback()}fx.willDispatch=!1}function FRe(e=1,t){const i=aG(),r=()=>{Fo(t)?i.reject(Ri()):e===0?i():(--e,px(()=>r()))};return r(),i.promise}const Moe=W4.map(e=>new Dv(e)),Toe=new Dv("total");function Coe(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let Aoe=0;function Bf(){return++Aoe}class a5{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._observerObject=new $oe(this._notify),gP.register(this,this._observerObject)}destroy(){var t;this._accessed.length=0,(t=this._observerObject)==null||t.destroy(),this.clear(),gP.unregister(this)}onObservableAccessed(t){const i=this._accessed;i.includes(t)||i.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed,r=this._observerObject;for(let s=0;s<i.length;++s)t.push(i[s].observe(r));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}class $oe{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=koe}}const gP=new FinalizationRegistry(e=>{e.destroy()});function koe(){}let oy=!1;const yx=[];function hG(e,t){let i=new a5(o),r=null,s=!1;function o(){if(!i||s)return;if(oy)return void fG(o);const u=r;i.clear(),oy=!0,s=!0,r=Cc(i,e),s=!1,oy=!1,t(r,u),mG()}function c(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=Cc(i,e),s=!1,{remove:c}}function dG(e,t){let i=new a5(s),r=null;function s(){t(r,c)}function o(){i&&(i.destroy(),i=null),r=null}function c(){return i?(i.clear(),r=Cc(i,e),r):null}return c(),{remove:o}}function pG(e){let t=new a5(r),i=!1;function r(){t&&!i&&(oy?fG(r):(t.clear(),oy=!0,i=!0,Cc(t,e),i=!1,oy=!1,mG()))}function s(){t&&(t.destroy(),t=null)}return i=!0,Cc(t,e),i=!1,{remove:s}}function fG(e){yx.includes(e)||yx.unshift(e)}function mG(){for(;yx.length;)yx.pop()()}var jv;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(jv||(jv={}));class gb{constructor(){this.uid=Bf(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,o){return this.pool.acquire(jv.Untracked,t,i,r,s,o,m6)}static acquireTracked(t,i,r,s){return this.pool.acquire(jv.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===jv.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,r,s,o,c,u){this.uid=Bf(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=o,this.path=c,this.equals=u}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Bf(),this.removed=!0}}gb.pool=new sG(gb);const H2=new En,mc=new Set;let gx;function vx(e){mc.delete(e),mc.add(e),gx||(gx=ug(Foe))}function Ooe(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function Poe(e){for(const t of mc.values())t.target===e&&(t.removed=!0)}function Foe(){let e=10;for(;gx&&e--;){gx=null;const t=Loe(),i=H2.acquire();for(const r of t){const s=r.uid;Ooe(r),s===r.uid&&r.removed&&i.push(r)}for(const r of mc)r.removed&&(i.push(r),mc.delete(r));for(const r of i)gb.pool.release(r);H2.release(i),H2.release(t),Y4.forEach(r=>r())}}function Loe(){const e=H2.acquire();e.length=mc.size;let t=0;for(const i of mc)e[t]=i,++t;return mc.clear(),e}const Y4=new Set;function Roe(e){return Y4.add(e),{remove(){Y4.delete(e)}}}function Noe(e,t,i){let r=YV(e,t,i,(s,o,c)=>{let u,g,b=dG(()=>vw(s,o),(S,E)=>{s.__accessor__.destroyed||u&&u.uid!==g?r.remove():(u||(u=gb.acquireUntracked(S,c,E,s,o),g=u.uid),vx(u))});return{remove:KV(()=>{b.remove(),u&&(u.uid!==g||u.removed||(u.removed=!0,vx(u)),u=null),r=b=null})}});return r}function Doe(e,t,i){const r=YV(e,t,i,(s,o,c)=>{let u=!1;return hG(()=>vw(s,o),(g,b)=>{s.__accessor__.destroyed?r.remove():u||(u=!0,m6(b,g)||c.call(s,g,b,o,s),u=!1)})});return r}function joe(e,t,i,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?Doe(e,t,i):Noe(e,t,i)}function zoe(e,t,i){let r,s,o=dG(e,(c,u)=>{r&&r.uid!==s?o.remove():(r||(r=gb.acquireTracked(c,t,u,i),s=r.uid),vx(r))});return{remove:KV(()=>{o.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,vx(r)),r=null),o=null})}}function Voe(e,t,i){let r=!1;return hG(e,(s,o)=>{r||(r=!0,i(o,s)||t(s,o),r=!1)})}function Goe(e,t,i=!1,r=jne){return i?Voe(e,t,r):zoe(e,t,r)}function vP(e){return Coe(mc,t=>t.oldValue===e)}function xw(e,t){for(const[i,r]of e)if(t(r,i))return!0;return!1}function LRe(e,t){for(const[i,r]of e)if(t(r,i))return r;return null}function qm(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}const ay=Ie.getLogger("esri.core.accessorSupport.ensureTypes");function Uoe(e){return e==null?e:new Date(e)}function qoe(e){return e==null?e:!!e}function Sw(e){return e==null?e:e.toString()}function ra(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function w6(e){return e==null?e:Math.round(parseFloat(e))}function yG(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function bx(e,t){return t!=null&&e&&!(t instanceof e)}function gG(e){return e&&"isCollection"in e}function bP(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Boe(e,t){if(!t||!t.constructor||!gG(t.constructor))return K4(e,t)?t:new e(t);const i=bP(e.prototype.itemType),r=bP(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(K4(e,t),t):new e(t):t}function K4(e,t){return!!yG(t)&&(ay.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+l5(e)+"'"),!0)}function _6(e,t){return t==null?t:gG(e)?Boe(e,t):bx(e,t)?K4(e,t)?t:new e(t):t}function l5(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const Hoe=new WeakMap;function Woe(e){switch(e){case Number:return ra;case gi:return w6;case Boolean:return qoe;case String:return Sw;case Date:return Uoe;default:return qm(Hoe,e,()=>_6.bind(null,e))}}function Er(e,t){const i=Woe(e);return arguments.length===1?i:i(t)}function vb(e,t,i){return arguments.length===1?vb.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function Joe(e,t){return arguments.length===1?vb(Er.bind(null,e)):vb(Er.bind(null,e),t)}function vG(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>vG(e,t-1,r)):e(i)}function wx(e,t,i){if(arguments.length===2)return wx.bind(null,e,t);if(!i)return i;let r=t,s=i=vG(e,t,i);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let o=0;o<r;o++)i=[i];return i}function Yoe(e,t,i){return arguments.length===2?wx(Er.bind(null,e),t):wx(Er.bind(null,e),t,i)}function bG(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function Z4(e,t){if(arguments.length===2)return Z4(e).call(null,t);const i=new Set,r=e.filter(u=>typeof u!="function"),s=e.filter(u=>typeof u=="function");for(const u of e)typeof u!="string"&&typeof u!="number"||i.add(u);let o=null,c=null;return(u,g)=>{if(u==null)return u;const b=typeof u,S=b==="string"||b==="number";return S&&(i.has(u)||s.some(E=>b==="string"&&E===String||b==="number"&&E===Number))||b==="object"&&s.some(E=>!bx(u,E))?u:(S&&r.length?(o||(o=r.map(E=>typeof E=="string"?`'${E}'`:`${E}`).join(", ")),ay.error("Accessor#set",`'${u}' is not a valid value for this property, only the following values are valid: ${o}`)):typeof u=="object"&&s.length?(c||(c=s.map(E=>l5(E)).join(", ")),ay.error("Accessor#set",`'${u}' is not a valid value for this property, value must be one of ${c}`)):ay.error("Accessor#set",`'${u}' is not a valid value for this property`),g&&(g.valid=!1),null)}}function iu(e,t){if(arguments.length===2)return iu(e).call(null,t);const i={},r=[],s=[];for(const g in e.typeMap){const b=e.typeMap[g];i[g]=Er(b),r.push(l5(b)),s.push(g)}const o=()=>`'${r.join("', '")}'`,c=()=>`'${s.join("', '")}'`,u=typeof e.key=="string"?g=>g[e.key]:e.key;return g=>{if(e.base&&!bx(e.base,g)||g==null)return g;const b=u(g)||e.defaultKeyValue,S=i[b];if(!S)return ay.error("Accessor#set",`Invalid property value, value needs to be one of ${o()}, or a plain object that can autocast (having .type = ${c()})`),null;if(!bx(e.typeMap[b],g))return g;if(typeof e.key=="string"&&!yG(g)){const E={};for(const A in g)A!==e.key&&(E[A]=g[A]);return S(E)}return S(g)}}class gi{}const RRe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Koe(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function wG(e){switch(e.type){case"native":return Er(e.value);case"array":return vb(wG(e.value));case"one-of":return Zoe(e);default:return null}}function Zoe(e){let t=null;return(i,r)=>Q4(i,e)?i:(t==null&&(t=X4(e)),ay.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function X4(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case gi:return"integer";case Date:return"date";default:return l5(e.value)}case"array":return`array of ${X4(e.value)}`;case"one-of":{const t=e.values.map(i=>X4(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function Q4(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case gi:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!Q4(i,t.value));case"one-of":return t.values.some(i=>Q4(e,i))}}function _(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=t5(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&Ie.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const o=e.aliasOf;if(o){const g=typeof o=="string"?o:o.source,b=typeof o=="string"?null:o.overridable===!0;let S;s.dependsOn=[g],s.get=function(){let E=ux(this,g);if(typeof E=="function"){S||(S=g.split(".").slice(0,-1).join("."));const A=ux(this,S);A&&(E=E.bind(A))}return E},s.readOnly||(s.set=b?function(E){this._override(i,E)}:function(E){dx(this,g,E)})}const c=e.type,u=e.types;s.cast||(c?s.cast=Xoe(c):u&&(Array.isArray(u)?s.cast=vb(iu(u[0])):s.cast=iu(u))),Zne(s,e),e.range&&(s.cast=Qoe(s.cast,e.range))}}function _G(e,t,i){const r=t5(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function Xoe(e){let t=0,i=e;if(Koe(e))return wG(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(bG(r))return t===0?Z4(r):wx(Z4(r),t);if(t===1)return Joe(r);if(t>1)return Yoe(r,t);const s=e;return s.from?s.from:Er(s)}function Qoe(e,t){return i=>{let r=+e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function eae(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(o=>{t[o]=s}),delete t[r]}}}class Cn extends i5{constructor(t,i,r){if(super(t,i,r),!(this instanceof Cn))return new Cn(t,i,r)}}Cn.prototype.type="warning";function xG(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const eM=Ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function wP(e,t,i){var r,s;e&&(!i&&!t.read||((r=t.read)==null?void 0:r.reader)||((s=t.read)==null?void 0:s.enabled)===!1||rae(e)&&tn("read.reader",zd(e),t))}function zd(e){var i,r,s;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return iae(e);if(t===1)return _P(e);if("type"in e&&IG(e.type)){const o=(s=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:s.Type,c=_P(typeof o=="function"?{type:o}:{types:o});return(u,g,b)=>{const S=c(u,g,b);return S&&new e.type(S)}}return x6(e)}function x6(e){return"type"in e?tae(e.type):sae(e.types)}function tae(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void eM.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const o=new e;return o.read(t,r),o}:e.fromJSON}function SG(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>SG(e,s,i,r-1)):e(t,void 0,i)}function iae(e){var s;const t=x6(e),i=SG.bind(null,t),r=(s=e.ndimArray)!=null?s:0;return(o,c,u)=>{if(o==null)return o;o=i(o,u,r);let g=r,b=o;for(;g>0&&Array.isArray(b);)g--,b=b[0];if(b!==void 0)for(let S=0;S<g;S++)o=[o];return o}}function _P(e){const t=x6(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const c=[];for(const u of i){const g=t(u,void 0,s);g!==void 0&&c.push(g)}return c}const o=t(i,void 0,s);return o!==void 0?[o]:void 0}}function IG(e){if(!xG(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?S6(t.Type):EG(t.Type))}function rae(e){return"types"in e?EG(e.types):S6(e.type)}function S6(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||IG(e))}function EG(e){for(const t in e.typeMap)if(!S6(e.typeMap[t]))return!1;return!0}function sae(e){var r;let t=null;const i=(r=e.errorContext)!=null?r:"type";return(s,o,c)=>{if(s==null)return s;const u=typeof s;if(u!=="object")return void eM.error(`Expected JSON value of type 'object' to deserialize, but got '${u}'`);t||(t=nae(e));const g=e.key;if(typeof g!="string")return;const b=s[g],S=b?t[b]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!S){const A=`Type '${b||"unknown"}' is not supported`;return c&&c.messages&&s&&c.messages.push(new Cn(`${i}:unsupported`,A,{definition:s,context:c})),void eM.error(A)}const E=new S;return E.read(s,c),E}}function nae(e){var i,r;const t={};for(const s in e.typeMap){const o=e.typeMap[s],c=bw(o.prototype);if(typeof e.key=="function")continue;const u=c[e.key];if(!u)continue;((i=u.json)==null?void 0:i.type)&&Array.isArray(u.json.type)&&u.json.type.length===1&&typeof u.json.type[0]=="string"&&(t[u.json.type[0]]=o);const g=(r=u.json)==null?void 0:r.write;if(!g||!g.writer){t[s]=o;continue}const b=g.target,S=typeof b=="string"?b:e.key,E={};g.writer(s,E,S),E[S]&&(t[E[S]]=o)}return t}function oae(e){if(e.json||(e.json={}),SP(e.json),IP(e.json),xP(e.json),e.json.origins)for(const t in e.json.origins)SP(e.json.origins[t]),IP(e.json.origins[t]),xP(e.json.origins[t]);return!0}function xP(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function SP(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function IP(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function EP(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e==null?void 0:e.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&xG(e.type))?t.write.writer=uae:i>1?t.write.writer=cae(i):t.types?Array.isArray(t.types)?t.write.writer=lae(t.types[0]):t.write.writer=aae(t.types):t.write.writer=bb}function aae(e){return(t,i,r,s)=>t?MG(t,e,s)?bb(t,i,r,s):void 0:bb(t,i,r,s)}function MG(e,t,i){var r,s;for(const o in t.typeMap)if(e instanceof t.typeMap[o])return!0;if(i!=null&&i.messages){const o=(r=t.errorContext)!=null?r:"type",c=`Values of type '${(s=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?s:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new de(`${o}:unsupported`,c,{definition:e,context:i})),Ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(c)}return!1}function lae(e){return(t,i,r,s)=>!t||!Array.isArray(t)?bb(t,i,r,s):bb(t.filter(o=>MG(o,e,s)),i,r,s)}function bb(e,t,i,r){tn(i,_x(e,r),t)}function _x(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?xx(e):e}function xx(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function uae(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(o=>_x(o,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[_x(e,r)],tn(i,s,t)}function TG(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>TG(r,t,i-1)):_x(e,t)}function cae(e){return(t,i,r,s)=>{let o;if(t===null)o=null;else{o=TG(t,s,e);let c=e,u=o;for(;c>0&&Array.isArray(u);)c--,u=u[0];if(u!==void 0)for(let g=0;g<c;g++)o=[o]}tn(r,o,i)}}function tM(e,t){return I6(e,"read",t)}function CG(e,t){return I6(e,"write",t)}function I6(e,t,i){let r=e&&e.json;if(e&&e.json&&e.json.origins&&i){const s=i.origin&&e.json.origins[i.origin];s&&(t==="any"||t in s)&&(r=s)}return r}function hae(e){const t=dae(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],s=r.types?pae(r):t;wP(s,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),EP(s,r)}wP(t,e.json,!0),EP(t,e.json)}function dae(e){return e.json.types?iM(e.json):e.type?AG(e):iM(e)}function pae(e){return e.type?AG(e):iM(e)}function AG(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!bG(i);)i=i[0],t++;return{type:i,ndimArray:t}}function iM(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function fae(e){oae(e)&&(eae(e),hae(e))}const sI=new Set,nI=new Set;function K(e){return t=>{t.prototype.declaredClass=e,yae(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!sI.has(s.initialize)&&(sI.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!nI.has(s.destroy)&&(nI.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);sI.clear(),nI.clear();class o extends t{constructor(...u){if(super(...u),this.constructor===o&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let g=i.length-1;g>=0;g--)i[g].call(this)}}),r.length){let g=!1;const b=this[WV];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!g){g=!0,b.call(this);for(let S=0;S<r.length;S++)r[S].call(this)}}})}this.postscript(...u)}}}return o.__accessorMetadata__=bw(t.prototype),o.prototype.declaredClass=e,o}}function mae(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;gt(i.observerObject);const r=this.__accessor__.store;return r.has(e)?r.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function yae(e){const t=e.prototype,i=bw(t),r={};for(const s of Object.getOwnPropertyNames(i)){const o=i[s];fae(o),r[s]={enumerable:!0,configurable:!0,get:mae(s,o),set(c){const u=this.__accessor__;if(u!==void 0){if(!Object.isFrozen(this)){if(u.initialized&&o.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${s}' of ${this.declaredClass}`);if(u.lifecycle===uc.CONSTRUCTED&&o.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${s}' of ${this.declaredClass}`);u.set(s,c)}}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:c})}}}Object.defineProperties(e.prototype,r)}var $G,kG;function gae(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const mp=Symbol("Accessor-Handles"),rM=Symbol("Accessor-Initialized");class Re{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const o=this;class c extends o{constructor(...g){super(...g),this.inherited=null,s&&s.apply(this,g)}}bw(c.prototype);for(const u in t){const g=t[u];c.prototype[u]=typeof g=="function"?function(...b){const S=this.inherited;let E;this.inherited=function(...A){if(o.prototype[u])return o.prototype[u].apply(this,A)};try{E=g.apply(this,b)}catch(A){throw this.inherited=S,A}return this.inherited=S,E}:t[u]}for(const u in i){const g=gae(i[u]);_(g)(c.prototype,u)}return K(r)(c)}constructor(...t){if(this[$G]=null,this[kG]=!1,this.constructor===Re)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new uoe(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}postscript(t){const i=this.__accessor__,r=i.ctorArgs||t;i.initialize(),r&&(this.set(r),i.ctorArgs=null),i.constructed(),this.initialize(),this[rM]=!0}initialize(){}[WV](){this[mp]=ti(this[mp])}destroy(){this.destroyed||(Poe(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[rM]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return ux(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return dx(this,t,i),this}watch(t,i,r){return joe(this,t,i,r)}own(t){this.addHandles(t)}addHandles(t,i){let r=this[mp];ae(r)&&(r=this[mp]=new Vr),r.add(t,i)}removeHandles(t){const i=this[mp];ae(i)||i.remove(t)}hasHandles(t){const i=this[mp];return!!U(i)&&i.has(t)}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}$G=mp,kG=rM;class ly{constructor(){this._emitter=new ly.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(s,o){const c=this._listenersMap&&this._listenersMap.get(s);if(!c)return!1;const u=this._target||this;return[...c].forEach(g=>{g.call(u,o)}),c.length>0}on(s,o){if(Array.isArray(s)){const u=s.map(g=>this.on(g,o));return lg(u)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const c=this._listenersMap.get(s)||[];return c.push(o),this._listenersMap.set(s,c),{remove:()=>{const u=this._listenersMap&&this._listenersMap.get(s)||[],g=u.indexOf(o);g>=0&&u.splice(g,1)}}}once(s,o){const c=this.on(s,u=>{c.remove(),o.call(null,u)});return c}hasEventListener(s){const o=this._listenersMap&&this._listenersMap.get(s);return o!=null&&o.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(o,c){return this._emitter.emit(o,c)}on(o,c){return this._emitter.on(o,c)}once(o,c){return this._emitter.once(o,c)}hasEventListener(o){return this._emitter.hasEventListener(o)}};return s=v([K("esri.core.Evented")],s),s};let i=class extends Re{constructor(){super(...arguments),this._emitter=new ly.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=v([K("esri.core.Evented")],i),e.EventedAccessor=i})(ly||(ly={}));const ss=ly;var ai;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(ai||(ai={}));function E6(e){return(t,i)=>{t[i]=e}}class M6 extends QV{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}}var rc;class vae{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Do=new Po(vae,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),bae=()=>{};function oI(e){return e?e instanceof df?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function aI(e){if(e&&e.length)return e[0]}function wae(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let o=0;for(;o<s&&e[i+o]===t[r+o];)o++;return o}function OG(e,t,i,r){t&&t.forEach((s,o,c)=>{e.push(s),OG(e,i.call(r,s,o,c),i,r)})}const qc=new Set,Bc=new Set,Hc=new Set,lI=new Map;let _ae=0,df=rc=class extends ss.EventedAccessor{static isCollection(e){return e!=null&&e instanceof rc}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new M6,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:_ae++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof rc?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return gt(this._observable),this._items}set items(e){this._emitBeforeChanges(ai.ADD)||(this._splice(0,this.length,oI(e)),this._emitAfterChanges(ai.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=bae,r.removed=!0,i.splice(i.indexOf(r),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(gt(this._observable),this._emitBeforeChanges(ai.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(ai.ADD),this}addMany(e,t=this._items.length){if(gt(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(ai.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,oI(e)),this._emitAfterChanges(ai.ADD),this}at(e){if(gt(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(gt(this._observable),!this.length||this._emitBeforeChanges(ai.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(ai.REMOVE),e}clone(){return gt(this._observable),this._createNewInstance({items:this._items.map(ve)})}concat(...e){gt(this._observable);const t=e.map(oI);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(gt(this._observable),!this.length||this._emitBeforeChanges(ai.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(ai.REMOVE)}every(e,t){return gt(this._observable),this._items.every(e,t)}filter(e,t){let i;return gt(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return gt(this._observable),this._items.find(e,t)}findIndex(e,t){return gt(this._observable),this._items.findIndex(e,t)}flatten(e,t){gt(this._observable);const i=[];return OG(i,this,e,t),new rc(i)}forEach(e,t){return gt(this._observable),this._items.forEach(e,t)}getItemAt(e){return gt(this._observable),this._items[e]}getNextIndex(e){gt(this._observable);const t=this.length;return(e=e!=null?e:t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return gt(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return gt(this._observable),this._items.indexOf(e,t)}join(e=","){return gt(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return gt(this._observable),this._items.lastIndexOf(e,t)}map(e,t){gt(this._observable);const i=this._items.map(e,t);return new rc({items:i})}reorder(e,t=this.length-1){gt(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(ai.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(ai.MOVE)}return e}}pop(){if(gt(this._observable),!this.length||this._emitBeforeChanges(ai.REMOVE))return;const e=aI(this._splice(this.length-1,1));return this._emitAfterChanges(ai.REMOVE),e}push(...e){return gt(this._observable),this._emitBeforeChanges(ai.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(ai.ADD)),this.length}reduce(e,t){gt(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){gt(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return gt(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(gt(this._observable),e<0||e>=this.length||this._emitBeforeChanges(ai.REMOVE))return;const t=aI(this._splice(e,1));return this._emitAfterChanges(ai.REMOVE),t}removeMany(e){if(gt(this._observable),!e||!e.length||this._emitBeforeChanges(ai.REMOVE))return[];const t=e instanceof rc?e.toArray():e,i=this._items,r=[],s=t.length;for(let o=0;o<s;o++){const c=t[o],u=i.indexOf(c);if(u>-1){const g=1+wae(t,i,o+1,u+1),b=this._splice(u,g);b&&b.length>0&&r.push.apply(r,b),o+=g-1}}return this._emitAfterChanges(ai.REMOVE),r}reverse(){if(gt(this._observable),this._emitBeforeChanges(ai.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(ai.MOVE),this}shift(){if(gt(this._observable),!this.length||this._emitBeforeChanges(ai.REMOVE))return;const e=aI(this._splice(0,1));return this._emitAfterChanges(ai.REMOVE),e}slice(e=0,t=this.length){return gt(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return gt(this._observable),this._items.some(e,t)}sort(e){if(gt(this._observable),!this.length||this._emitBeforeChanges(ai.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(ai.MOVE),this}splice(e,t,...i){gt(this._observable);const r=(t?ai.REMOVE:0)|(i.length?ai.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return gt(this._observable),this._items.slice()}toJSON(){return gt(this._observable),this.toArray()}toLocaleString(){return gt(this._observable),this._items.toLocaleString()}toString(){return gt(this._observable),this._items.toString()}unshift(...e){return gt(this._observable),!e.length||this._emitBeforeChanges(ai.ADD)||(this._splice(0,0,e),this._emitAfterChanges(ai.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let o,c;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=ug(()=>this._dispatchChange())),t){if(c=r.splice(e,t),this.hasEventListener("before-remove")){const u=Do.acquire();u.target=this,u.cancellable=!0;for(let g=0,b=c.length;g<b;g++)o=c[g],u.reset(o),this.emit("before-remove",u),u.defaultPrevented&&(c.splice(g,1),r.splice(e,0,o),e+=1,g-=1,b-=1);Do.release(u)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const u=Do.acquire();u.target=this,u.cancellable=!1;const g=c.length;for(let b=0;b<g;b++)u.reset(c[b]),this.emit("after-remove",u);Do.release(u)}}if(i&&i.length){if(s){const S=[];for(const E of i){const A=s.ensureType(E);A==null&&E!=null||S.push(A)}i=S}const u=this.hasEventListener("before-add"),g=this.hasEventListener("after-add"),b=e===this.length;if(u||g){const S=Do.acquire();S.target=this,S.cancellable=!0;const E=Do.acquire();E.target=this,E.cancellable=!1;for(const A of i)u?(S.reset(A),this.emit("before-add",S),S.defaultPrevented||(b?r.push(A):r.splice(e++,0,A),this._set("length",r.length),g&&(E.reset(A),this.emit("after-add",E)))):(b?r.push(A):r.splice(e++,0,A),this._set("length",r.length),E.reset(A),this.emit("after-add",E));Do.release(E),Do.release(S)}else{if(b)for(const S of i)r.push(S);else r.splice(e,0,...i);this._set("length",r.length)}}return(i&&i.length||c&&c.length)&&this._notifyChangeEvent(i,c),c}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Do.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Do.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Do.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Do.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;qc.clear(),Bc.clear(),Hc.clear();for(const{added:g,removed:b}of i){if(g)if(Hc.size===0&&Bc.size===0)for(const S of g)qc.add(S);else for(const S of g)Bc.has(S)?(Hc.add(S),Bc.delete(S)):Hc.has(S)||qc.add(S);if(b)if(Hc.size===0&&qc.size===0)for(const S of b)Bc.add(S);else for(const S of b)qc.has(S)?qc.delete(S):(Hc.delete(S),Bc.add(S))}const r=En.acquire();qc.forEach(g=>{r.push(g)});const s=En.acquire();Bc.forEach(g=>{s.push(g)});const o=this._items,c=t.items,u=En.acquire();if(Hc.forEach(g=>{c.indexOf(g)!==o.indexOf(g)&&u.push(g)}),t.listeners&&(r.length||s.length||u.length)){const g={target:this,added:r,removed:s,moved:u},b=t.listeners.length;for(let S=0;S<b;S++){const E=t.listeners[S];E.removed||E.callback.call(this,g)}}En.release(r),En.release(s),En.release(u)}qc.clear(),Bc.clear(),Hc.clear()}};df.ofType=e=>{if(!e)return rc;if(lI.has(e))return lI.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends rc{};return v([E6({Type:e,ensureType:typeof e=="function"?Er(e):iu(e)})],i.prototype,"itemType",void 0),i=v([K(`esri.core.Collection<${t}>`)],i),lI.set(e,i),i},v([_()],df.prototype,"length",void 0),v([_()],df.prototype,"items",null),df=rc=v([K("esri.core.Collection")],df);const Be=df;function s0(e,t,i=Be){return t||(t=new i),t===e||(t.removeAll(),xae(e)?t.addMany(e):e&&t.add(e)),t}function PG(e){return e}function xae(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class T6{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new T6;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,ve(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i,r;return(r=(i=this._values.get(t))==null?void 0:i.origin)!=null?r:Ot.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var s;return((s=this._values.get(r))==null?void 0:s.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===Ot.DEFAULTS){const s=this._values.get(t);if(s&&s.origin!=null&&s.origin>r)return}this._values.set(t,new Sae(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===Ot.DEFAULTS?t:Ot.USER}}class Sae{constructor(t,i){this.value=t,this.origin=i}}function FG(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),Ot.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),Ot.DEFAULTS)})}function Iae(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&nP(r,i))return!0}else for(const s of r)if(s===t||s.includes(".")&&s.indexOf(t)===0&&nP(s,i))return!0;return!1}function Eae(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Mae(e,t,i,r,s){let o=tM(t[i],s);Eae(o)&&(e[i]=!0);for(const c of Object.getOwnPropertyNames(t))o=tM(t[c],s),Iae(o,i,r)&&(e[c]=!0)}function Tae(e,t,i,r){const s=i.metadatas,o=I6(s[t],"any",r),c=o&&o.default;if(c===void 0)return;const u=typeof c=="function"?c.call(e,t,r):c;u!==void 0&&i.set(t,u)}const LG={origin:"service"};function RG(e,t,i=LG){if(!t||typeof t!="object")return;const r=rn(e),s=r.metadatas,o={};for(const c of Object.getOwnPropertyNames(t))Mae(o,s,c,t,i);r.setDefaultOrigin(i.origin);for(const c of Object.getOwnPropertyNames(o)){const u=tM(s[c],i).read,g=u&&u.source;let b;b=g&&typeof g=="string"?vw(t,g):t[c],u&&u.reader&&(b=u.reader.call(e,b,t,i)),b!==void 0&&r.set(c,b)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const c of Object.getOwnPropertyNames(s))o[c]||Tae(e,c,r,i)}r.setDefaultOrigin("user")}function Cae(e,t,i,r=LG){var o;const s={...r,messages:[]};i(s),(o=s.messages)==null||o.forEach(c=>{c.type!=="warning"||e.loaded?r&&r.messages&&r.messages.push(c):e.loadWarnings.push(c)})}function Aae(e,t,i,r,s){var c,u;const o={};return(u=(c=t.write)==null?void 0:c.writer)==null||u.call(e,r,o,i,s),o}function NG(e,t,i,r,s,o){if(!r||!r.write)return!1;const c=e.get(i);if(!s&&r.write.overridePolicy){const u=r.write.overridePolicy.call(e,c,i,o);u!==void 0&&(s=u)}if(s||(s=r.write),!s||s.enabled===!1)return!1;if((c===null&&!s.allowNull&&!s.writerEnsuresNonNull||c===void 0)&&s.isRequired){const u=new de("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return u&&o&&o.messages?o.messages.push(u):u&&!o&&Ie.getLogger("esri.core.accessorSupport.write").error(u.name,u.message),!1}return!(c===void 0||c===null&&!s.allowNull&&!s.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===Ot.DEFAULTS)&&$ae(e,i,o,r,c)||!s.ignoreOrigin&&o&&o.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<dd(o.origin))}function $ae(e,t,i,r,s){const o=r.default;if(o===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof o=="function"){if(Array.isArray(s)){const c=o.call(e,t,i);return yw(c,s)}return!1}return o===s}function kae(e,t,i,r){const s=rn(e),o=s.metadatas,c=CG(o[t],r);return!!c&&NG(e,s,t,c,i,r)}function DG(e,t,i){var o,c;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return U2(t,e.toJSON(i));const r=rn(e),s=r.metadatas;for(const u in s){const g=CG(s[u],i);if(!NG(e,r,u,g,void 0,i))continue;const b=e.get(u),S=Aae(e,g,g.write&&typeof g.write.target=="string"?g.write.target:u,b,i);Object.keys(S).length>0&&(t=U2(t,S),(c=(o=i==null?void 0:i.resources)==null?void 0:o.pendingOperations)!=null&&c.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>U2(t,S,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:u,oldOrigin:soe(r.store.originOf(u)),newOrigin:i.origin}))}return t}const cg=e=>{let t=class extends e{constructor(...i){super(...i);const r=rn(this),s=r.store,o=new T6;r.store=o,FG(r,s,o)}read(i,r){RG(this,i,r)}write(i={},r){return DG(this,i,r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Oae.call(this,i,r)}};return t=v([K("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Oae(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let $e=class extends cg(Re){};$e=v([K("esri.core.JSONSupport")],$e);var Yh;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Yh||(Yh={}));class Pae{constructor(t){this.instance=t,this._resolver=tu(),this._status=Yh.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Yh.RESOLVED,this._cleanUp()},()=>{this._status=Yh.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Yh.RESOLVED}isRejected(){return this._status===Yh.REJECTED}isFulfilled(){return this._status!==Yh.PENDING}abort(){this._resolver.reject(Ri())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=tu(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)},s=>{this.isFulfilled()||this._allPromise!==r||ro(s)||this._resolver.reject(s)}),t.resolve()}}const Iw=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new Pae(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return new Promise((s,o)=>{this._promiseProps.when(s,o)}).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=v([K("esri.core.Promise")],t),t};let Sx=class extends Iw(Re){};Sx=v([K("esri.core.Promise")],Sx);const Fae="not-loaded",Lae="loading",Rae="failed",MP="loaded",jG=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=o=>{const c=new Promise((u,g)=>{const b=b6(o,g);this.destroyed&&g(new de("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(u,g).finally(()=>{b&&b.remove()})});if(this.loadStatus===Fae){this._set("loadStatus",Lae);const u=this._loadController=new AbortController;s({signal:u.signal}),To(u.signal,()=>{this._promiseProps.abort()})}return r(),c}})),this.when(()=>{this._set("loadStatus",MP),this._loadController=null},r=>{this._set("loadStatus",Rae),this._set("loadError",r),this._loadController=null})}get loaded(){return this.loadStatus===MP}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new de("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return v([_({readOnly:!0})],t.prototype,"loaded",null),v([_({readOnly:!0})],t.prototype,"loadError",void 0),v([_({clonable:!1})],t.prototype,"loadStatus",void 0),v([_({type:[Cn],readOnly:!0})],t.prototype,"loadWarnings",null),t=v([K("esri.core.Loadable")],t),t};let T1=class extends jG(Sx){};T1=v([K("esri.core.Loadable")],T1),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=jG,e.isLoadable=t}(T1||(T1={}));const ru=T1;function Nae(e,t,i){return Ms(e.map((r,s)=>t.apply(i,[r,s])))}async function Dae(e,t,i){return(await Ms(e.map((r,s)=>t.apply(i,[r,s])))).map(r=>r.value)}function C6(e){return{ok:!0,value:e}}function A6(e){return{ok:!1,error:e}}function jae(e){return U(e)&&e.ok===!0?e.value:null}function zae(e){return U(e)&&e.ok===!1?e.error:null}async function u5(e){if(ae(e))return{ok:!1,error:new Error("no promise provided")};try{return C6(await e)}catch(t){return A6(t)}}async function NRe(e){try{return C6(await e)}catch(t){return Jl(t),A6(t)}}function $6(e,t){return new uh(e,t)}let uh=class extends Re{get value(){return jae(this._result)}get error(){return zae(this._result)}get finished(){return U(this._result)}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=fc(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=e(i),this.promise.then(r=>{this._result=C6(r),this._cleanup()},r=>{this._result=A6(r),this._cleanup()}),this._abortHandle=To(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Ti(this._abortHandle),this._abortController=null}};v([_()],uh.prototype,"value",null),v([_()],uh.prototype,"error",null),v([_()],uh.prototype,"finished",null),v([_()],uh.prototype,"promise",void 0),v([_()],uh.prototype,"_result",void 0),uh=v([K("esri.core.asyncUtils.ReactiveTask")],uh);async function zG(e,t){return await e.load(),Vae(e,t)}async function Vae(e,t){const i=[],r=(...o)=>{for(const c of o)ae(c)||(Array.isArray(c)?r(...c):Be.isCollection(c)?c.forEach(u=>r(u)):ru.isLoadable(c)&&i.push(c))};t(r);let s=null;if(await Dae(i,async o=>{const c=await u5(Gae(o)?o.loadAll():o.load());c.ok!==!1||s||(s=c)}),s)throw s.error;return e}function Gae(e){return"loadAll"in e&&typeof e.loadAll=="function"}const Uae=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,qae={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function sM(e){const t=e==null?void 0:e.match(Uae);if(!t)return null;const[,i,r,s]=t;if(!i)return null;let o=null,c=null,u=null;const{devext:g,qaext:b,www:S}=qae;if(r)if(o=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:c,portalHostname:u}=g);break;case"qa":({customBaseUrl:c,portalHostname:u}=b);break;default:return null}else({customBaseUrl:c,portalHostname:u}=S);else switch(i.toLowerCase()){case"devext":({customBaseUrl:c,portalHostname:u}=g);break;case"qaext":({customBaseUrl:c,portalHostname:u}=b);break;case"www":({customBaseUrl:c,portalHostname:u}=S);break;default:return null}return{customBaseUrl:c,isPortal:!1,portalHostname:u,urlKey:o}}function Bae(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}const Hae=Ie.getLogger("esri.core.urlUtils"),hg=jt.request,TP="esri/config: esriConfig.request.proxyUrl is not set.",VG=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,GG=/^\s*http:/i,Wae=/^\s*https:/i,Jae=/^\s*file:/i,Yae=/:\d+$/,Kae=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Zae=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Xae=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class uy{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Zae);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Xae),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const __={},Qae=new uy(jt.applicationUrl);let Ks=Qae;const ele=tle();let k6=ele;const O6=()=>Ks,DRe=()=>k6;function tle(){const e=Ks.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Ks.scheme}://${Ks.host}${Ks.port!=null?`:${Ks.port}`:""}`}${t}`}function is(e){if(!e)return null;const t={path:null,query:null},i=new uy(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,r),t.query=UG(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function UG(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let o,c;s<0?(o=decodeURIComponent(r),c=""):(o=decodeURIComponent(r.slice(0,s)),c=decodeURIComponent(r.slice(s+1)));let u=i[o];typeof u=="string"&&(u=i[o]=[u]),Array.isArray(u)?u.push(c):i[o]=c}return i}function CP(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function wb(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",o=t&&t[i];return o?s+encodeURIComponent(o(r)):Array.isArray(r)?r.map(c=>CP(c)?s+encodeURIComponent(JSON.stringify(c)):s+encodeURIComponent(c)).join("&"):CP(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function ile(e=!1){let t,i=hg.proxyUrl;if(typeof e=="string"){t=cle(e);const r=c5(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw Hae.warn(TP),new de("urlutils:proxy-not-set",TP);return t&&nM()&&(i=D6(i)),is(i)}function jRe(e){const t=c5(e);let i,r;if(t){const s=P6(t.proxyUrl);i=s.path,r=s.query?UG(s.query):null}if(i){const s=is(e);e=i+"?"+s.path;const o=wb({...r,...s.query});o&&(e=`${e}?${o}`)}return e}const Ug={path:"",query:""};function P6(e){const t=e.indexOf("?");return t!==-1?(Ug.path=e.slice(0,t),Ug.query=e.slice(t+1)):(Ug.path=e,Ug.query=null),Ug}function qG(e){return e=(e=Ex(e=mle(e=P6(e).path),!0)).toLowerCase()}function rle(e){const t={proxyUrl:e.proxyUrl,urlPrefix:qG(e.urlPrefix)},i=hg.proxyRules,r=t.urlPrefix;let s=i.length;for(let o=0;o<i.length;o++){const c=i[o].urlPrefix;if(r.indexOf(c)===0){if(r.length===c.length)return-1;s=o;break}c.indexOf(r)===0&&(s=o+1)}return i.splice(s,0,t),s}function c5(e){const t=hg.proxyRules,i=qG(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function sle(e,t){if(!e||!t)return!1;e=Ix(e),t=Ix(t);const i=sM(e),r=sM(t);return U(i)&&U(r)?i.portalHostname===r.portalHostname:!U(i)&&!U(r)&&$y(e,t,!0)}function BG(e,t){return e=Ix(e),t=Ix(t),Ex(e)===Ex(t)}function Ix(e){const t=(e=ll(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function HG(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),i=hg.interceptors;if(i){for(const r of i)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function $y(e,t,i=!1){if(!e||!t)return!1;const r=aM(e),s=aM(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function F6(e){if(typeof e=="string"){if(!Co(e))return!0;e=aM(e)}if($y(e,Ks))return!0;const t=hg.trustedServers||[];for(let i=0;i<t.length;i++){const r=nle(t[i]);for(let s=0;s<r.length;s++)if($y(e,r[s]))return!0}return!1}function nle(e){return __[e]||(N6(e)||su(e)?__[e]=[new uy(na(e))]:__[e]=[new uy(`http://${e}`),new uy(`https://${e}`)]),__[e]}function na(e,t=k6,i){return su(e)?i&&i.preserveProtocolRelative?e:Ks.scheme==="http"&&Ks.authority===ul(e).slice(2)?`http:${e}`:`https:${e}`:N6(e)?e:n0(e[0]==="/"?fle(t):t,e)}function L6(e,t=k6,i){if(e==null||!Co(e))return e;const r=ll(e),s=r.toLowerCase(),o=ll(t).toLowerCase().replace(/\/+$/,""),c=i?ll(i).toLowerCase().replace(/\/+$/,""):null;if(c&&o.indexOf(c)!==0)return e;const u=(E,A,O)=>(O=E.indexOf(A,O))===-1?E.length:O;let g=u(s,"/",s.indexOf("//")+2),b=-1;for(;s.slice(0,g+1)===o.slice(0,g)+"/"&&(b=g+1,g!==s.length);)g=u(s,"/",g+1);if(b===-1||c&&b<c.length)return e;e=r.slice(b);const S=o.slice(b-1).replace(/[^/]+/g,"").length;if(S>0)for(let E=0;E<S;E++)e=`../${e}`;else e=`./${e}`;return e}function ll(e){return e=vle(e=gle(e=yle(e=na(e=e.trim()))))}function n0(...e){const t=e.filter(U);if(!t||!t.length)return;const i=[];if(Co(t[0])){const s=t[0],o=s.indexOf("//");o!==-1&&(i.push(s.slice(0,o+1)),dle(t[0])&&(i[0]+="/"),t[0]=s.slice(o+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,o)=>o?s.concat(o.split("/")):s,[]);for(let s=0;s<r.length;s++){const o=r[s];o===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!o&&s===r.length-1||o&&(o!=="."||i.length===0))&&i.push(o)}return i.join("/")}function ul(e,t=!1){if(e==null||h5(e)||w0(e))return null;let i=e.indexOf("://");if(i===-1&&su(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=Ex(e,!0)),e}function Co(e){return su(e)||N6(e)}function h5(e){return e!=null&&e.slice(0,5)==="blob:"}function w0(e){return e!=null&&e.slice(0,5)==="data:"}function ole(e){const t=R6(e);if(!t||!t.isBase64)return null;const i=atob(t.data),r=new Uint8Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r.buffer}function zRe(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const ale=/^data:(.*?)(;base64)?,(.*)$/;function R6(e){const t=e.match(ale);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function WG(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function VRe(e){const t=ole(e);if(!t)return null;const i=R6(e);return new Blob([t],{type:i.mediaType})}function GRe(e,t){lle(e,t)||ule(e,t)}function lle(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const r=URL.createObjectURL(e);return i.download=t,i.href=r,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}function ule(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function su(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function N6(e){return e!=null&&VG.test(e)}function cle(e){return e!=null&&Wae.test(e)||Ks.scheme==="https"&&su(e)}function hle(e){return e!=null&&GG.test(e)||Ks.scheme==="http"&&su(e)}function dle(e){return e!=null&&Jae.test(e)}function D6(e){return su(e)?`https:${e}`:e.replace(GG,"https:")}function ple(){return Ks.scheme==="http"}function nM(){return Ks.scheme==="https"}function Ex(e,t=!1){return su(e)?e.slice(2):(e=e.replace(VG,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function fle(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function j6(e){let t=0;if(Co(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function URe(e,t){if(!e)return"";const i=is(e).path.replace(/\/+$/,""),r=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const s=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(s,"")}function mle(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function JG(e){return e.replace(/\/+$/,"")}function yle(e){if(/^https?:\/\//i.test(e)){const t=P6(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function gle(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function vle(e){const t=hg.httpsDomains;if(!hle(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),Yae.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return ple()&&r===Ks.authority&&!Kae.test(e)||(nM()&&r===Ks.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||nM()&&!c5(e))&&(e=D6(e)),e}function oM(e,t,i){if(!(t&&i&&e&&Co(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),o=e.indexOf(":",r+2),c=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(r+2,c).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(c)}`}function aM(e){return typeof e=="string"?new uy(na(e)):(e.scheme||(e.scheme=Ks.scheme),e)}function qRe(e){return ble.test(e)}function YG(e,t){const i=is(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function KG(e,t,i){const r=is(e),s=r.query||{};return s[t]=String(i),`${r.path}?${wb(s)}`}function uI(e,t){const i=is(e),r=i.query||{};for(const o in t)r[o]=t[o];const s=wb(r);return s?`${i.path}?${s}`:i.path}function BRe(e){if(ae(e))return null;const t=e.match(ZG);return t?t[2]:null}function AP(e){if(ae(e))return null;const t=e.match(ZG);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}const ZG=/([^.]*)\.([^\/]*)$/,ble=/(^data:image\/svg|\.svg$)/i;function qe(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(o,c)=>{const u=o.constructor.prototype;for(const g of r){const b=_G(o,g,s);b.write&&typeof b.write=="object"||(b.write={}),i&&(b.write.target=i),b.write.writer=u[c]}}}class It{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,o)=>{const c=this.toJSON(r);c!==void 0&&tn(o,c,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const r in t)i[t[r]]=r;return i}_getKeysSorted(t){const i=[];for(const r in t)i.push(r);return i.sort(),i}}function $s(){return function(e,t){return new It(e,{ignoreUnknown:!0,...t})}}class z6{constructor(t,i,r,s){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r;const o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Bi=new z6(6378137,1/298.257223563,3e5,.006694379990137799),yc=new z6(3396190,1/169.8944472236118,23e4),kd=new z6(1737400,0,0);var o0;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(o0||(o0={}));let C;const X={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(C=2e3;C<=2045;C++)X[C]=0;for(C=2056;C<=2065;C++)X[C]=0;for(C=2067;C<=2135;C++)X[C]=0;for(C=2137;C<=2154;C++)X[C]=0;for(C=2161;C<=2170;C++)X[C]=0;for(C=2172;C<=2193;C++)X[C]=0;for(C=2195;C<=2198;C++)X[C]=0;for(C=2200;C<=2203;C++)X[C]=0;for(C=2205;C<=2217;C++)X[C]=0;for(C=2222;C<=2224;C++)X[C]=1;for(C=2225;C<=2250;C++)X[C]=2;for(C=2251;C<=2253;C++)X[C]=1;for(C=2257;C<=2264;C++)X[C]=2;for(C=2274;C<=2279;C++)X[C]=2;for(C=2280;C<=2282;C++)X[C]=1;for(C=2283;C<=2289;C++)X[C]=2;for(C=2290;C<=2292;C++)X[C]=0;for(C=2308;C<=2313;C++)X[C]=0;for(C=2315;C<=2491;C++)X[C]=0;for(C=2494;C<=2866;C++)X[C]=0;for(C=2867;C<=2869;C++)X[C]=1;for(C=2870;C<=2888;C++)X[C]=2;for(C=2891;C<=2895;C++)X[C]=2;for(C=2896;C<=2898;C++)X[C]=1;for(C=2902;C<=2908;C++)X[C]=2;for(C=2915;C<=2920;C++)X[C]=2;for(C=2921;C<=2923;C++)X[C]=1;for(C=2924;C<=2930;C++)X[C]=2;for(C=2931;C<=2962;C++)X[C]=0;for(C=2964;C<=2968;C++)X[C]=2;for(C=2969;C<=2973;C++)X[C]=0;for(C=2975;C<=2991;C++)X[C]=0;for(C=2995;C<=3051;C++)X[C]=0;for(C=3054;C<=3079;C++)X[C]=0;for(C=3081;C<=3088;C++)X[C]=0;for(C=3092;C<=3101;C++)X[C]=0;for(C=3106;C<=3138;C++)X[C]=0;for(C=3146;C<=3151;C++)X[C]=0;for(C=3153;C<=3166;C++)X[C]=0;for(C=3168;C<=3172;C++)X[C]=0;for(C=3174;C<=3203;C++)X[C]=0;for(C=3294;C<=3358;C++)X[C]=0;for(C=3367;C<=3403;C++)X[C]=0;for(C=3408;C<=3416;C++)X[C]=0;for(C=3417;C<=3438;C++)X[C]=2;for(C=3441;C<=3446;C++)X[C]=2;for(C=3447;C<=3450;C++)X[C]=0;for(C=3451;C<=3459;C++)X[C]=2;for(C=3460;C<=3478;C++)X[C]=0;for(C=3554;C<=3559;C++)X[C]=0;for(C=3560;C<=3570;C++)X[C]=2;for(C=3571;C<=3581;C++)X[C]=0;for(C=3594;C<=3597;C++)X[C]=0;for(C=3601;C<=3604;C++)X[C]=0;for(C=3637;C<=3639;C++)X[C]=0;for(C=3665;C<=3667;C++)X[C]=0;for(C=3693;C<=3695;C++)X[C]=0;for(C=3701;C<=3727;C++)X[C]=0;for(C=3728;C<=3739;C++)X[C]=2;for(C=3740;C<=3751;C++)X[C]=0;for(C=3753;C<=3760;C++)X[C]=2;for(C=3761;C<=3773;C++)X[C]=0;for(C=3775;C<=3777;C++)X[C]=0;for(C=3779;C<=3781;C++)X[C]=0;for(C=3783;C<=3785;C++)X[C]=0;for(C=3788;C<=3791;C++)X[C]=0;for(C=3797;C<=3802;C++)X[C]=0;for(C=3814;C<=3816;C++)X[C]=0;for(C=3825;C<=3829;C++)X[C]=0;for(C=3832;C<=3841;C++)X[C]=0;for(C=3844;C<=3852;C++)X[C]=0;for(C=3873;C<=3885;C++)X[C]=0;for(C=3890;C<=3893;C++)X[C]=0;for(C=3907;C<=3912;C++)X[C]=0;for(C=3942;C<=3950;C++)X[C]=0;for(C=3968;C<=3970;C++)X[C]=0;for(C=3973;C<=3976;C++)X[C]=0;for(C=3986;C<=3989;C++)X[C]=0;for(C=3994;C<=3997;C++)X[C]=0;for(C=4048;C<=4051;C++)X[C]=0;for(C=4056;C<=4063;C++)X[C]=0;for(C=4093;C<=4096;C++)X[C]=0;for(C=4390;C<=4398;C++)X[C]=0;for(C=4399;C<=4413;C++)X[C]=2;for(C=4418;C<=4433;C++)X[C]=2;for(C=4455;C<=4457;C++)X[C]=2;for(C=4484;C<=4489;C++)X[C]=0;for(C=4491;C<=4554;C++)X[C]=0;for(C=4568;C<=4589;C++)X[C]=0;for(C=4652;C<=4656;C++)X[C]=0;for(C=4766;C<=4800;C++)X[C]=0;for(C=5014;C<=5016;C++)X[C]=0;for(C=5069;C<=5072;C++)X[C]=0;for(C=5105;C<=5130;C++)X[C]=0;for(C=5173;C<=5188;C++)X[C]=0;for(C=5253;C<=5259;C++)X[C]=0;for(C=5269;C<=5275;C++)X[C]=0;for(C=5292;C<=5311;C++)X[C]=0;for(C=5329;C<=5331;C++)X[C]=0;for(C=5343;C<=5349;C++)X[C]=0;for(C=5355;C<=5357;C++)X[C]=0;for(C=5387;C<=5389;C++)X[C]=0;for(C=5459;C<=5463;C++)X[C]=0;for(C=5479;C<=5482;C++)X[C]=0;for(C=5518;C<=5520;C++)X[C]=0;for(C=5530;C<=5539;C++)X[C]=0;for(C=5550;C<=5552;C++)X[C]=0;for(C=5562;C<=5583;C++)X[C]=0;for(C=5623;C<=5625;C++)X[C]=2;for(C=5631;C<=5639;C++)X[C]=0;for(C=5649;C<=5653;C++)X[C]=0;for(C=5663;C<=5680;C++)X[C]=0;for(C=5682;C<=5685;C++)X[C]=0;for(C=5875;C<=5877;C++)X[C]=0;for(C=5896;C<=5899;C++)X[C]=0;for(C=5921;C<=5940;C++)X[C]=0;for(C=6050;C<=6125;C++)X[C]=0;for(C=6244;C<=6275;C++)X[C]=0;for(C=6328;C<=6348;C++)X[C]=0;for(C=6350;C<=6356;C++)X[C]=0;for(C=6366;C<=6372;C++)X[C]=0;for(C=6381;C<=6387;C++)X[C]=0;for(C=6393;C<=6404;C++)X[C]=0;for(C=6480;C<=6483;C++)X[C]=0;for(C=6511;C<=6514;C++)X[C]=0;for(C=6579;C<=6581;C++)X[C]=0;for(C=6619;C<=6624;C++)X[C]=0;for(C=6625;C<=6627;C++)X[C]=2;for(C=6628;C<=6632;C++)X[C]=0;for(C=6634;C<=6637;C++)X[C]=0;for(C=6669;C<=6692;C++)X[C]=0;for(C=6707;C<=6709;C++)X[C]=0;for(C=6720;C<=6723;C++)X[C]=0;for(C=6732;C<=6738;C++)X[C]=0;for(C=6931;C<=6933;C++)X[C]=0;for(C=6956;C<=6959;C++)X[C]=0;for(C=7005;C<=7007;C++)X[C]=0;for(C=7057;C<=7070;C++)X[C]=2;for(C=7074;C<=7082;C++)X[C]=0;for(C=7109;C<=7118;C++)X[C]=0;for(C=7119;C<=7127;C++)X[C]=1;for(C=7374;C<=7376;C++)X[C]=0;for(C=7528;C<=7586;C++)X[C]=0;for(C=7587;C<=7645;C++)X[C]=2;for(C=7692;C<=7696;C++)X[C]=0;for(C=7755;C<=7787;C++)X[C]=0;for(C=7791;C<=7795;C++)X[C]=0;for(C=7799;C<=7801;C++)X[C]=0;for(C=7803;C<=7805;C++)X[C]=0;for(C=7825;C<=7831;C++)X[C]=0;for(C=7845;C<=7859;C++)X[C]=0;for(C=8013;C<=8032;C++)X[C]=0;for(C=8065;C<=8068;C++)X[C]=1;for(C=8518;C<=8529;C++)X[C]=2;for(C=8533;C<=8536;C++)X[C]=2;for(C=8538;C<=8540;C++)X[C]=2;for(C=8677;C<=8679;C++)X[C]=0;for(C=8836;C<=8840;C++)X[C]=0;for(C=8857;C<=8859;C++)X[C]=0;for(C=8908;C<=8910;C++)X[C]=0;for(C=9154;C<=9159;C++)X[C]=0;for(C=9205;C<=9218;C++)X[C]=0;for(C=9271;C<=9273;C++)X[C]=0;for(C=9295;C<=9297;C++)X[C]=0;for(C=9356;C<=9360;C++)X[C]=0;for(C=9404;C<=9407;C++)X[C]=0;for(C=9476;C<=9482;C++)X[C]=0;for(C=9487;C<=9494;C++)X[C]=0;for(C=9697;C<=9699;C++)X[C]=0;for(C=9821;C<=9865;C++)X[C]=0;for(C=20002;C<=20032;C++)X[C]=0;for(C=20047;C<=20049;C++)X[C]=0;for(C=20062;C<=20092;C++)X[C]=0;for(C=20135;C<=20138;C++)X[C]=0;for(C=20248;C<=20258;C++)X[C]=0;for(C=20348;C<=20358;C++)X[C]=0;for(C=20436;C<=20440;C++)X[C]=0;for(C=20822;C<=20824;C++)X[C]=0;for(C=20904;C<=20932;C++)X[C]=0;for(C=20934;C<=20936;C++)X[C]=0;for(C=21004;C<=21032;C++)X[C]=0;for(C=21035;C<=21037;C++)X[C]=0;for(C=21095;C<=21097;C++)X[C]=0;for(C=21148;C<=21150;C++)X[C]=0;for(C=21207;C<=21264;C++)X[C]=0;for(C=21307;C<=21364;C++)X[C]=0;for(C=21413;C<=21423;C++)X[C]=0;for(C=21453;C<=21463;C++)X[C]=0;for(C=21473;C<=21483;C++)X[C]=0;for(C=21780;C<=21782;C++)X[C]=0;for(C=21891;C<=21894;C++)X[C]=0;for(C=21896;C<=21899;C++)X[C]=0;for(C=22171;C<=22177;C++)X[C]=0;for(C=22181;C<=22187;C++)X[C]=0;for(C=22191;C<=22197;C++)X[C]=0;for(C=22207;C<=22222;C++)X[C]=0;for(C=22234;C<=22236;C++)X[C]=0;for(C=22243;C<=22250;C++)X[C]=0;for(C=22262;C<=22265;C++)X[C]=0;for(C=22307;C<=22322;C++)X[C]=0;for(C=22348;C<=22357;C++)X[C]=0;for(C=22407;C<=22422;C++)X[C]=0;for(C=22462;C<=22465;C++)X[C]=0;for(C=22521;C<=22525;C++)X[C]=0;for(C=22607;C<=22622;C++)X[C]=0;for(C=22641;C<=22646;C++)X[C]=0;for(C=22648;C<=22657;C++)X[C]=0;for(C=22707;C<=22722;C++)X[C]=0;for(C=22762;C<=22765;C++)X[C]=0;for(C=22991;C<=22994;C++)X[C]=0;for(C=23028;C<=23038;C++)X[C]=0;for(C=23830;C<=23853;C++)X[C]=0;for(C=23866;C<=23872;C++)X[C]=0;for(C=23877;C<=23884;C++)X[C]=0;for(C=23886;C<=23894;C++)X[C]=0;for(C=23946;C<=23948;C++)X[C]=0;for(C=24311;C<=24313;C++)X[C]=0;for(C=24342;C<=24347;C++)X[C]=0;for(C=24370;C<=24374;C++)X[C]=10;for(C=24375;C<=24381;C++)X[C]=0;for(C=24718;C<=24721;C++)X[C]=0;for(C=24817;C<=24821;C++)X[C]=0;for(C=24877;C<=24882;C++)X[C]=0;for(C=24891;C<=24893;C++)X[C]=0;for(C=25391;C<=25395;C++)X[C]=0;for(C=25828;C<=25838;C++)X[C]=0;for(C=26191;C<=26195;C++)X[C]=0;for(C=26391;C<=26393;C++)X[C]=0;for(C=26701;C<=26722;C++)X[C]=0;for(C=26729;C<=26799;C++)X[C]=2;for(C=26801;C<=26803;C++)X[C]=2;for(C=26811;C<=26813;C++)X[C]=2;for(C=26847;C<=26870;C++)X[C]=2;for(C=26891;C<=26899;C++)X[C]=0;for(C=26901;C<=26923;C++)X[C]=0;for(C=26929;C<=26946;C++)X[C]=0;for(C=26948;C<=26998;C++)X[C]=0;for(C=27037;C<=27040;C++)X[C]=0;for(C=27205;C<=27232;C++)X[C]=0;for(C=27258;C<=27260;C++)X[C]=0;for(C=27391;C<=27398;C++)X[C]=0;for(C=27561;C<=27564;C++)X[C]=0;for(C=27571;C<=27574;C++)X[C]=0;for(C=27581;C<=27584;C++)X[C]=0;for(C=27591;C<=27594;C++)X[C]=0;for(C=28191;C<=28193;C++)X[C]=0;for(C=28348;C<=28358;C++)X[C]=0;for(C=28402;C<=28432;C++)X[C]=0;for(C=28462;C<=28492;C++)X[C]=0;for(C=29118;C<=29122;C++)X[C]=0;for(C=29168;C<=29172;C++)X[C]=0;for(C=29177;C<=29185;C++)X[C]=0;for(C=29187;C<=29195;C++)X[C]=0;for(C=29900;C<=29903;C++)X[C]=0;for(C=30161;C<=30179;C++)X[C]=0;for(C=30491;C<=30494;C++)X[C]=0;for(C=30729;C<=30732;C++)X[C]=0;for(C=31251;C<=31259;C++)X[C]=0;for(C=31265;C<=31268;C++)X[C]=0;for(C=31275;C<=31279;C++)X[C]=0;for(C=31281;C<=31297;C++)X[C]=0;for(C=31461;C<=31469;C++)X[C]=0;for(C=31491;C<=31495;C++)X[C]=0;for(C=31917;C<=31922;C++)X[C]=0;for(C=31965;C<=32e3;C++)X[C]=0;for(C=32001;C<=32003;C++)X[C]=2;for(C=32005;C<=32031;C++)X[C]=2;for(C=32033;C<=32060;C++)X[C]=2;for(C=32064;C<=32067;C++)X[C]=2;for(C=32074;C<=32077;C++)X[C]=2;for(C=32081;C<=32086;C++)X[C]=0;for(C=32107;C<=32130;C++)X[C]=0;for(C=32133;C<=32159;C++)X[C]=0;for(C=32164;C<=32167;C++)X[C]=2;for(C=32180;C<=32199;C++)X[C]=0;for(C=32201;C<=32260;C++)X[C]=0;for(C=32301;C<=32360;C++)X[C]=0;for(C=32601;C<=32662;C++)X[C]=0;for(C=32664;C<=32667;C++)X[C]=2;for(C=32701;C<=32761;C++)X[C]=0;for(C=53001;C<=53004;C++)X[C]=0;for(C=53008;C<=53019;C++)X[C]=0;for(C=53021;C<=53032;C++)X[C]=0;for(C=53034;C<=53037;C++)X[C]=0;for(C=53042;C<=53046;C++)X[C]=0;for(C=53074;C<=53080;C++)X[C]=0;for(C=54001;C<=54004;C++)X[C]=0;for(C=54008;C<=54019;C++)X[C]=0;for(C=54021;C<=54032;C++)X[C]=0;for(C=54034;C<=54037;C++)X[C]=0;for(C=54042;C<=54046;C++)X[C]=0;for(C=54048;C<=54053;C++)X[C]=0;for(C=54074;C<=54080;C++)X[C]=0;for(C=54098;C<=54101;C++)X[C]=0;for(C=102001;C<=102040;C++)X[C]=0;for(C=102042;C<=102063;C++)X[C]=0;for(C=102065;C<=102067;C++)X[C]=0;for(C=102070;C<=102117;C++)X[C]=0;for(C=102122;C<=102216;C++)X[C]=0;for(C=102221;C<=102377;C++)X[C]=0;for(C=102382;C<=102388;C++)X[C]=0;for(C=102389;C<=102398;C++)X[C]=2;for(C=102399;C<=102444;C++)X[C]=0;for(C=102445;C<=102447;C++)X[C]=2;for(C=102448;C<=102458;C++)X[C]=0;for(C=102459;C<=102468;C++)X[C]=2;for(C=102469;C<=102499;C++)X[C]=0;for(C=102500;C<=102519;C++)X[C]=1;for(C=102520;C<=102524;C++)X[C]=0;for(C=102525;C<=102529;C++)X[C]=2;for(C=102530;C<=102588;C++)X[C]=0;for(C=102590;C<=102598;C++)X[C]=0;for(C=102601;C<=102603;C++)X[C]=0;for(C=102605;C<=102628;C++)X[C]=0;for(C=102629;C<=102646;C++)X[C]=2;for(C=102648;C<=102700;C++)X[C]=2;for(C=102701;C<=102703;C++)X[C]=0;for(C=102707;C<=102730;C++)X[C]=2;for(C=102733;C<=102758;C++)X[C]=2;for(C=102767;C<=102900;C++)X[C]=0;for(C=102901;C<=102933;C++)X[C]=2;for(C=102934;C<=102950;C++)X[C]=13;for(C=102951;C<=102955;C++)X[C]=0;for(C=102961;C<=102963;C++)X[C]=0;for(C=102965;C<=102969;C++)X[C]=0;for(C=102971;C<=102973;C++)X[C]=0;for(C=102975;C<=102989;C++)X[C]=0;for(C=102990;C<=102992;C++)X[C]=1;for(C=102997;C<=103002;C++)X[C]=0;for(C=103003;C<=103008;C++)X[C]=2;for(C=103009;C<=103011;C++)X[C]=0;for(C=103012;C<=103014;C++)X[C]=2;for(C=103019;C<=103021;C++)X[C]=0;for(C=103022;C<=103024;C++)X[C]=2;for(C=103029;C<=103031;C++)X[C]=0;for(C=103032;C<=103034;C++)X[C]=2;for(C=103065;C<=103068;C++)X[C]=0;for(C=103074;C<=103076;C++)X[C]=0;for(C=103077;C<=103079;C++)X[C]=1;for(C=103080;C<=103082;C++)X[C]=0;for(C=103083;C<=103085;C++)X[C]=2;for(C=103090;C<=103093;C++)X[C]=0;for(C=103097;C<=103099;C++)X[C]=0;for(C=103100;C<=103102;C++)X[C]=2;for(C=103107;C<=103109;C++)X[C]=0;for(C=103110;C<=103112;C++)X[C]=2;for(C=103113;C<=103116;C++)X[C]=0;for(C=103117;C<=103120;C++)X[C]=2;for(C=103153;C<=103157;C++)X[C]=0;for(C=103158;C<=103162;C++)X[C]=2;for(C=103163;C<=103165;C++)X[C]=0;for(C=103166;C<=103168;C++)X[C]=1;for(C=103169;C<=103171;C++)X[C]=2;for(C=103186;C<=103188;C++)X[C]=0;for(C=103189;C<=103191;C++)X[C]=2;for(C=103192;C<=103195;C++)X[C]=0;for(C=103196;C<=103199;C++)X[C]=2;for(C=103200;C<=103224;C++)X[C]=0;for(C=103225;C<=103227;C++)X[C]=1;for(C=103232;C<=103237;C++)X[C]=0;for(C=103238;C<=103243;C++)X[C]=2;for(C=103244;C<=103246;C++)X[C]=0;for(C=103247;C<=103249;C++)X[C]=2;for(C=103254;C<=103256;C++)X[C]=0;for(C=103257;C<=103259;C++)X[C]=2;for(C=103264;C<=103266;C++)X[C]=0;for(C=103267;C<=103269;C++)X[C]=2;for(C=103300;C<=103375;C++)X[C]=0;for(C=103381;C<=103383;C++)X[C]=0;for(C=103384;C<=103386;C++)X[C]=1;for(C=103387;C<=103389;C++)X[C]=0;for(C=103390;C<=103392;C++)X[C]=2;for(C=103397;C<=103399;C++)X[C]=0;for(C=103400;C<=103471;C++)X[C]=2;for(C=103476;C<=103478;C++)X[C]=0;for(C=103479;C<=103481;C++)X[C]=2;for(C=103486;C<=103488;C++)X[C]=0;for(C=103489;C<=103491;C++)X[C]=2;for(C=103492;C<=103495;C++)X[C]=0;for(C=103496;C<=103499;C++)X[C]=2;for(C=103528;C<=103543;C++)X[C]=0;for(C=103544;C<=103548;C++)X[C]=2;for(C=103549;C<=103551;C++)X[C]=0;for(C=103552;C<=103554;C++)X[C]=1;for(C=103555;C<=103557;C++)X[C]=2;for(C=103558;C<=103560;C++)X[C]=0;for(C=103571;C<=103573;C++)X[C]=0;for(C=103574;C<=103576;C++)X[C]=2;for(C=103577;C<=103580;C++)X[C]=0;for(C=103581;C<=103583;C++)X[C]=2;for(C=103595;C<=103694;C++)X[C]=0;for(C=103696;C<=103699;C++)X[C]=0;for(C=103700;C<=103793;C++)X[C]=2;for(C=103794;C<=103890;C++)X[C]=0;for(C=103891;C<=103896;C++)X[C]=2;for(C=103900;C<=103971;C++)X[C]=2;for(C=103972;C<=103977;C++)X[C]=0;for(C=112e3;C<=112101;C++)X[C]=0;const wle={102113:!0,102100:!0,3857:!0,3785:!0},_le={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},$P='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',x_=[-20037508342788905e-9,20037508342788905e-9],S_=[-20037508342787e-6,20037508342787e-6],XG={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:x_,origin:S_,dx:1e-5},102100:{wkTemplate:$P,valid:x_,origin:S_,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:x_,origin:S_,dx:1e-5},3857:{wkTemplate:$P,valid:x_,origin:S_,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Hi(e,t){return e===t||!ae(e)&&!ae(t)&&(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||nu(e)&&nu(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase())}function ua(e){return Sr(e)&&e.wkid&&XG[e.wkid]||null}function d5(e){return!!Sr(e)&&(e.wkid?X[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function xle(e){return!(G6(e)||q6(e))}function _b(e){return Sr(e)&&e.wkid===4326}function HRe(e){return Sr(e)&&e.wkid===o0.CGCS2000}function nu(e){return Sr(e)&&e.wkid!=null&&wle[e.wkid]===!0}function Sle(e){return Sr(e)&&e.wkid===32662}function V6(e){return e===o0.GCSMARS2000||e===o0.GCSMARS2000_SPHERE}function G6(e){return Sr(e)&&e.wkid!=null&&V6(e.wkid)}function U6(e){return e===o0.GCSMOON2000}function q6(e){return Sr(e)&&e.wkid!=null&&U6(e.wkid)}function Ile(e){return Sr(e)&&e.wkid!=null&&_le[e.wkid]===!0}function Sr(e){return U(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const lM={wkid:4326,wkt:pa(XG[4326].wkTemplate,{Central_Meridian:"0.0"})},Ele={wkid:102100,latestWkid:3857},Mle={wkid:32662};function B6(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Tle=B6(Bi),QG=B6(yc),eU=B6(kd),Cle={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Bi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function H6(e){return U(e)&&(G6(e)||Hi(e,QG))?yc:U(e)&&(q6(e)||Hi(e,eU))?kd:Bi}function WRe(e){return V6(e)?yc:U6(e)?kd:Bi}const JRe=39.37,Ale=Bi.radius*Math.PI/200,tU=/UNIT\[([^\]]+)\]\]$/i,Hf=X,iU=/UNIT\[([^\]]+)\]/i,$le=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),kle=$s()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),xl=e=>e*e,Wc=e=>e*e*e,xb={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:xl(.001)},"square-centimeters":{inBaseUnits:xl(.01)},"square-decimeters":{inBaseUnits:xl(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:xl(1e3)},"square-inches":{inBaseUnits:xl(.0254)},"square-feet":{inBaseUnits:xl(.3048)},"square-yards":{inBaseUnits:xl(.9144)},"square-miles":{inBaseUnits:xl(1609.344)},"square-us-feet":{inBaseUnits:xl(1200/3937)},acres:{inBaseUnits:.0015625*xl(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Wc(.001)},"cubic-centimeters":{inBaseUnits:1e3*Wc(.01)},"cubic-decimeters":{inBaseUnits:1e3*Wc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Wc(1e3)},"cubic-inches":{inBaseUnits:1e3*Wc(.0254)},"cubic-feet":{inBaseUnits:1e3*Wc(.3048)},"cubic-yards":{inBaseUnits:1e3*Wc(.9144)},"cubic-miles":{inBaseUnits:1e3*Wc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Ole=(()=>{const e={};for(const t in xb)for(const i in xb[t].units)e[i]=t;return e})();function Ple(e,t,i){return e*xb[i].units[t].inBaseUnits}function Fle(e,t,i){return e/xb[i].units[t].inBaseUnits}const rU=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],Lle=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function uM(e){const t=Ole[e];if(!t)throw new Error("unknown type");return t}function kP(e,t=null){return t=t||uM(e),xb[t].baseUnit===e}function ei(e,t,i){if(t===i)return e;const r=uM(t);if(r!==uM(i))throw new Error("incompatible units");const s=kP(t,r)?e:Ple(e,t,r);return kP(i,r)?s:Fle(s,i,r)}function sU(e,t){const i=ei(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function nU(e,t){const i=ei(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function oU(e,t){const i=ei(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function aU(e,t){const i=ei(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Rle(e,t){const i=ei(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Nle(e,t){const i=ei(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function lU(e,t,i){return ei(e,t,"meters")/(i*Math.PI/180)}function uU(e){return kle.fromJSON(e.toLowerCase())||null}function ky(e){if(U(e)&&!xle(e))return 1;const t=Od(e);return t>1e5?1:t}function cU(e){return Od(e)>=H6(e).metersPerDegree?"meters":dg(e)}function Od(e,t=Bi.metersPerDegree){return Qs(Dle(e,!0),t)}function Dle(e,t=!1){const i=U(e)?e.wkid:null,r=U(e)?e.wkt:null;let s=null;if(i){if(V6(i))return yc.metersPerDegree;if(U6(i))return kd.metersPerDegree;s=Hf.values[Hf[i]],!s&&t&&$le.has(i)&&(s=Ale)}else r&&(pU(r)?s=OP(tU.exec(r),s):dU(r)&&(s=OP(iU.exec(r),s)));return s}function OP(e,t){return e&&e[1]?hU(e[1]):t}function hU(e){return parseFloat(e.split(",")[1])}function dg(e){const t=U(e)?e.wkid:null,i=U(e)?e.wkt:null;let r=null;if(t)r=Hf.units[Hf[t]];else if(i){const s=pU(i)?tU:dU(i)?iU:null;if(s){const o=s.exec(i);o&&o[1]&&(r=zle(o[1]))}}return U(r)?uU(r):null}function YRe(e){const t=dg(e);return ae(t)||!rU.includes(t)?null:t}function KRe(e){const t=cU(e);return ae(t)||!rU.includes(t)?null:t}function ZRe(e){const t=dg(e);return ae(t)?null:Lle.get(t)}function dU(e){return/^GEOCCS/i.test(e)}function pU(e){return/^PROJCS/i.test(e)}const jle=1e-7;function zle(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!Hf.units.includes(i)){const r=hU(e);i=null;const s=Hf.values;for(let o=0;o<s.length;++o)if(Math.abs(r-s[o])<jle){i=Hf.units[o];break}}return i}function XRe(e){const t=dg(e);if(ae(t))return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const Vle={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Gle={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Ule={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},qle=$s()(Vle),Ble=$s()(Gle),QRe=$s()(Ule);var El;let ri=El=class extends $e{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return El.WebMercator;if(e.wkid===4326)return El.WGS84}const t=new El;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return _b(this)}get isWebMercator(){return nu(this)}get isGeographic(){return d5(this)}get isWrappable(){return Ile(this)}get metersPerUnit(){return Od(this)}get unit(){return dg(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===El.WGS84)return El.WGS84;if(this===El.WebMercator)return El.WebMercator;const e=new El;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=ve(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return Hi(this,e)}toJSON(e){return this.write(void 0,e)}};ri.GCS_NAD_1927=null,ri.WGS84=null,ri.WebMercator=null,ri.PlateCarree=null,v([_({readOnly:!0})],ri.prototype,"isWGS84",null),v([_({readOnly:!0})],ri.prototype,"isWebMercator",null),v([_({readOnly:!0})],ri.prototype,"isGeographic",null),v([_({readOnly:!0})],ri.prototype,"isWrappable",null),v([_({type:gi,json:{write:!0}})],ri.prototype,"latestWkid",void 0),v([_({readOnly:!0})],ri.prototype,"metersPerUnit",null),v([_({readOnly:!0})],ri.prototype,"unit",null),v([_({type:gi,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],ri.prototype,"wkid",void 0),v([_({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],ri.prototype,"wkt",void 0),v([qe("wkt"),qe("web-scene","wkt")],ri.prototype,"writeWkt",null),v([_({type:gi,json:{write:!0}})],ri.prototype,"vcsWkid",void 0),v([_({type:gi,json:{write:!0}})],ri.prototype,"latestVcsWkid",void 0),v([_()],ri.prototype,"imageCoordinateSystem",void 0),ri=El=v([K("esri.geometry.SpatialReference")],ri),ri.prototype.toJSON.isDefaultToJSON=!0,ri.GCS_NAD_1927=new ri({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),ri.WGS84=new ri(lM),ri.WebMercator=new ri(Ele),ri.PlateCarree=new ri(Mle),Object.freeze&&(Object.freeze(ri.GCS_NAD_1927),Object.freeze(ri.WGS84),Object.freeze(ri.WebMercator));const wt=ri,fU="20230301",mU="2657e728c1857e6d94c324181c0788310bb0958a",yU="4.26",Hle={async request(e,t){var u,g;const{default:i}=await pe(()=>Promise.resolve().then(function(){return uue}),void 0),r=e.options,s=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=s==="native"||s==="native-request-init"?"native-request-init":s&&["blob","json","text"].includes(s)&&((u=HG(e.url))==null?void 0:u.after)?s:"array-buffer";const o=await i(e.url,r),c={data:o.data,httpStatus:o.httpStatus,ssl:o.ssl};switch((g=o.requestOptions)==null?void 0:g.responseType){case"native-request-init":return delete c.data.signal,c;case"blob":c.data=await c.data.arrayBuffer();break;case"json":c.data=new TextEncoder().encode(JSON.stringify(c.data)).buffer;break;case"text":c.data=new TextEncoder().encode(c.data).buffer}return{result:c,transferList:[c.data]}}};let qt;function eNe(e){qt=e}function tNe(e){const t=qt&&qt.findCredential(e);return t&&t.token?KG(e,"token",t.token):e}Se("host-webworker");const Wle=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function gU(e){const t=ul(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Wle.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function Jle(e,t,i=!1,r){return new Promise((s,o)=>{if(Fo(r))return void o(PP());let c=()=>{b(),o(new Error(`Unable to load ${t}`))},u=()=>{const S=e;b(),s(S)},g=()=>{if(!e)return;const S=e;b(),S.src="",o(PP())};const b=()=>{Se("esri-image-decode")||(e.removeEventListener("error",c),e.removeEventListener("load",u)),c=null,u=null,e=null,U(r)&&r.removeEventListener("abort",g),g=null,i&&URL.revokeObjectURL(t)};U(r)&&r.addEventListener("abort",g),Se("esri-image-decode")?e.decode().then(u,c):(e.addEventListener("error",c),e.addEventListener("load",u))})}function PP(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function Yle(e){var i,r,s;jt.request.crossOriginNoCorsDomains||(jt.request.crossOriginNoCorsDomains={});const t=jt.request.crossOriginNoCorsDomains;for(let o of e)o=o.toLowerCase(),/^https?:\/\//.test(o)?t[(i=ul(o))!=null?i:""]=0:(t[(r=ul("http://"+o))!=null?r:""]=0,t[(s=ul("https://"+o))!=null?s:""]=0)}function Kle(e){const t=jt.request.crossOriginNoCorsDomains;if(t){let i=ul(e);if(i)return i=i.toLowerCase(),!$y(i,O6())&&t[i]<Date.now()-36e5}return!1}async function Zle(e){var s;const t=jt.request.crossOriginNoCorsDomains,i=ul(e);t&&i&&(t[i.toLowerCase()]=Date.now());const r=is(e);e=r.path,((s=r.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function mi(e,t){var b;const i=w0(e),r=h5(e);r||i||(e=ll(e));const s={url:e,requestOptions:{...t}};let o=HG(e);if(o){const S=await nue(o,s);if(S!=null)return{data:S,getHeader:W6,httpStatus:200,requestOptions:s.requestOptions,url:s.url};o.after||o.error||(o=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"){if(Se("host-webworker")||Se("host-node"))throw il("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(i)throw il("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),s);if(t.method==="head"){if(t.body)throw il("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw il("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await iue(),Mx)return Mx.execute(e,t);const c=new AbortController;To(t,()=>c.abort());const u={controller:c,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:o,params:s,redoRequest:!1,useIdentity:Ya.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},g=await aue(u);return(b=o==null?void 0:o.after)==null||b.call(o,g),g}let Mx;const Ya=jt.request,vU="FormData"in globalThis,Xle=[499,498,403,401],Qle=["COM_0056","COM_0057","SB_0008"],eue=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],W6=()=>null,Tx=Symbol();function tue(e){const t=ul(e);t&&!mi._corsServers.includes(t)&&mi._corsServers.push(t)}function FP(e){const t=ul(e);return!t||t.endsWith(".arcgis.com")||mi._corsServers.includes(t)||F6(t)}function il(e,t,i,r){let s="Error";const o={url:i.url,requestOptions:i.requestOptions,getHeader:W6,ssl:!1};if(t instanceof de)return t.details?(t.details=ve(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=o,t;if(t){const c=r&&(b=>r.headers.get(b)),u=r&&r.status,g=t.message;g&&(s=g),c&&(o.getHeader=c),o.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||u||0,o.subCode=t.subcode,o.messageCode=t.messageCode,typeof t.details=="string"?o.messages=[t.details]:o.messages=t.details,o.raw=Tx in t?t[Tx]:t}return ro(t)?Ri():new de(e,s,o)}async function iue(){Se("host-webworker")?Mx||(Mx=await pe(()=>import("./request.476e6031.js"),[])):mi._abortableFetch||(mi._abortableFetch=globalThis.fetch.bind(globalThis))}async function cM(){qt||await pe(()=>import("./IdentityManager.1b01d868.js"),[])}async function rue(e){var u;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let o=null,c=null;if(vU&&"HTMLFormElement"in globalThis&&(s instanceof FormData?o=s:s instanceof HTMLFormElement&&(o=new FormData(s))),typeof s=="string"&&(c=s),e.fetchOptions={cache:i.cacheBust&&!mi._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Ya.priority,redirect:"follow",signal:r},(o||c)&&(e.fetchOptions.body=o||c),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((u=i.query)==null?void 0:u.token)||(o==null?void 0:o.get("token"))),!e.hasToken&&jt.apiKey&&gU(t)&&(i.query||(i.query={}),i.query.token=jt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!bU(t)&&!Fo(r)){let g;i.authMode==="immediate"?(await cM(),g=await qt.getCredential(t,{signal:r}),e.credential=g):i.authMode==="no-prompt"?(await cM(),g=await qt.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=g):qt&&(g=qt.findCredential(t)),g&&(e.credentialToken=g.token,e.useSSL=!!g.ssl)}}function bU(e){return eue.some(t=>t.test(e))}async function sue(e){var A,O;let t=e.params.url;const i=e.params.requestOptions,r=(A=e.fetchOptions)!=null?A:{},s=h5(t)||w0(t),o=i.responseType||"json",c=s?0:i.timeout!=null?i.timeout:Ya.timeout;let u=!1;if(!s){e.useSSL&&(t=D6(t)),i.cacheBust&&r.cache==="default"&&(t=KG(t,"request.preventCache",Date.now()));let L={...i.query};e.credentialToken&&(L.token=e.credentialToken);let N=wb(L);Se("esri-url-encodes-apostrophe")&&(N=N.replace(/'/g,"%27"));const z=t.length+1+N.length;let q;u=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||z>Ya.maxUrlLength;const Z=i.useProxy||!!c5(t);if(Z){const ee=ile(t);q=ee.path,!u&&q.length+1+z>Ya.maxUrlLength&&(u=!0),ee.query&&(L={...ee.query,...L})}if(r.method==="HEAD"&&(u||Z)){if(u)throw z>Ya.maxUrlLength?il("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):il("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(Z)throw il("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(u?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=uI(t,L):(r.body=wb(L),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=uI(t,L),Z&&(e.useProxy=!0,t=`${q}?${t}`),L.token&&vU&&r.body instanceof FormData&&!Bae(t)&&r.body.set("token",L.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!$y(t,O6())){if(F6(t))e.withCredentials=!0;else if(qt){const ee=qt.findServerInfo(t);ee&&ee.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",Kle(t)&&await Zle(u?uI(t,L):t))}let g,b,S=0,E=!1;c>0&&(S=setTimeout(()=>{E=!0,e.controller.abort()},c));try{if(i.responseType==="native-request-init")b=r,b.url=t;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||u||oue(i.headers)||!s&&!e.useProxy&&Ya.proxyUrl&&!FP(t)){if(g=await mi._abortableFetch(t,r),e.useProxy||tue(t),i.responseType==="native")b=g;else if(r.method!=="HEAD")if(g.ok){switch(o){case"array-buffer":b=await g.arrayBuffer();break;case"blob":case"image":b=await g.blob();break;default:b=await g.text()}if(S&&(clearTimeout(S),S=0),o==="json"||o==="xml"||o==="document")if(b)switch(o){case"json":b=JSON.parse(b);break;case"xml":b=LP(b,"application/xml");break;case"document":b=LP(b,"text/html")}else b=null;if(b){if(o==="array-buffer"||o==="blob"){const L=g.headers.get("Content-Type");if(L&&/application\/json|text\/plain/i.test(L)&&b[o==="blob"?"size":"byteLength"]<=750)try{const N=await new Response(b).json();N.error&&(b=N)}catch{}}o==="image"&&b instanceof Blob&&(b=await RP(URL.createObjectURL(b),e,!0))}}else b=await g.text()}else b=await RP(t,e)}catch(L){if(L.name==="AbortError")throw E?new Error("Timeout exceeded"):Ri("Request canceled");if(!(!g&&L instanceof TypeError&&Ya.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||FP(t))throw L;e.redoRequest=!0,rle({proxyUrl:Ya.proxyUrl,urlPrefix:(O=ul(t))!=null?O:""})}finally{S&&clearTimeout(S)}return[g,b]}async function nue(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(s){i=il("request:interceptor",s,t)}if((r instanceof Error||r instanceof de)&&(i=il("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function oue(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function LP(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function aue(e){var o,c;let t,i;await rue(e);try{do[t,i]=await sue(e);while(!await lue(e,t,i))}catch(u){const g=il("request:server",u,e.params,t);throw g.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(g),g}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((o=i.user)==null?void 0:o.username)&&!F6(r)){const u=ul(r,!0);u&&Ya.trustedServers.push(u)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Yle(i.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&qt){const u=qt.findServerInfo(s.server);let g=u&&u.owningSystemUrl;if(g){g=g.replace(/\/?$/,"/sharing");const b=qt.findCredential(g,s.userId);b&&qt._getIdenticalSvcIdx(g,b)===-1&&b.resources.unshift(g)}}return{data:i,getHeader:t?u=>t==null?void 0:t.headers.get(u):W6,httpStatus:(c=t==null?void 0:t.status)!=null?c:200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function lue(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,o;if(!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[Tx]=i,s;i&&(i.error?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[Tx]=i,s.details=i.messages));let c,u=null;s&&(o=Number(s.code),u=s.hasOwnProperty("subcode")?Number(s.subcode):null,c=s.messageCode,c=c&&c.toUpperCase());const g=r.authMode;if(o===403&&(u===4||s.message&&s.message.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(g!=="no-prompt"||o===498)&&o!==void 0&&Xle.includes(o)&&!bU(e.params.url)&&(o!==403||c&&!Qle.includes(c)&&(u==null||u===2&&e.credentialToken))){await cM();try{const b=await qt.getCredential(e.params.url,{error:il("request:server",s,e.params),prompt:g!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=b,e.credentialToken=b.token,e.useSSL=e.useSSL||b.ssl,!1}catch(b){if(g==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=b}}if(s)throw s;return!0}function RP(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Ya.priority,s.src=e,Jle(s,e,i,r)}mi._abortableFetch=null,mi._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var uue=Object.freeze(Object.defineProperty({__proto__:null,default:mi},Symbol.toStringTag,{value:"Module"}));function Ne(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(o,c)=>{const u=o.constructor.prototype;r.forEach(g=>{const b=_G(o,g,s);b.read&&typeof b.read=="object"||(b.read={}),b.read.reader=u[c],i&&(b.read.source=(b.read.source||[]).concat(i))})}}let Ml=class extends $e{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=wt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof wt)return e;if(e!=null){const i=new wt;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};v([_()],Ml.prototype,"type",void 0),v([_({readOnly:!0})],Ml.prototype,"cache",null),v([_({readOnly:!0})],Ml.prototype,"extent",null),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ml.prototype,"hasM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ml.prototype,"hasZ",void 0),v([_({type:wt,json:{write:!0},value:wt.WGS84})],Ml.prototype,"spatialReference",void 0),v([Ne("spatialReference")],Ml.prototype,"readSpatialReference",null),Ml=v([K("esri.geometry.Geometry")],Ml);const Vd=Ml,cue=Object.prototype.toString;function hue(e){const t="__accessorMetadata__"in e?Er(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return due.apply(this,i)}}function due(e,t,i,r){t5(e,t).cast=r}function pue(e){return(t,i)=>{t5(t,e).cast=t[i]}}function _t(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&cue.call(e[0])==="[object Function]"?hue(e[0]):e.length===1&&typeof e[0]=="string"?pue(e[0]):void 0}function fue(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}const mue=57.29577951308232,yue=.017453292519943;function NP(e){return e*mue}function DP(e){return e*yue}function iNe(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Bi.radius))}function hM(e){return e.wkid!=null||e.wkt!=null}const cI=[0,0];function Cx(e,t,i,r,s){const o=e,c=s;if(c.spatialReference=i,"x"in o&&"x"in c)[c.x,c.y]=t(o.x,o.y,cI,r);else if("xmin"in o&&"xmin"in c)[c.xmin,c.ymin]=t(o.xmin,o.ymin,cI,r),[c.xmax,c.ymax]=t(o.xmax,o.ymax,cI,r);else if("paths"in o&&"paths"in c||"rings"in o&&"rings"in c){const u="paths"in o?o.paths:o.rings,g=[];let b;for(let S=0;S<u.length;S++){const E=u[S];b=[],g.push(b);for(let A=0;A<E.length;A++)b.push(t(E[A][0],E[A][1],[0,0],r)),E[A].length>2&&b[A].push(E[A][2]),E[A].length>3&&b[A].push(E[A][3])}"paths"in c?c.paths=g:c.rings=g}else if("points"in o&&"points"in c){const u=o.points,g=[];for(let b=0;b<u.length;b++)g[b]=t(u[b][0],u[b][1],[0,0],r),u[b].length>2&&g[b].push(u[b][2]),u[b].length>3&&g[b].push(u[b][3]);c.points=g}return s}function cy(e,t){const i=e&&(hM(e)?e:e.spatialReference),r=t&&(hM(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!Hi(r,i)||nu(r)&&_b(i)||nu(i)&&_b(r))}function p5(e,t){if(ae(e))return null;const i=e.spatialReference,r=t&&(hM(t)?t:t.spatialReference);return cy(i,r)?Hi(i,r)?ve(e):nu(r)?Cx(e,Mf,wt.WebMercator,!1,ve(e)):_b(r)?Cx(e,hy,wt.WGS84,!1,ve(e)):null:null}function Mf(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=DP(t);return i[0]=DP(e)*Bi.radius,i[1]=Bi.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function hy(e,t,i=[0,0],r=!1){const s=NP(e/Bi.radius);return i[0]=r?s:s-360*Math.floor((s+180)/360),i[1]=NP(Math.PI/2-2*Math.atan(Math.exp(-t/Bi.radius))),i}function gc(e,t=!1,i=ve(e)){return Cx(e,Mf,wt.WebMercator,t,i)}function Tf(e,t=!1,i=ve(e)){return Cx(e,hy,wt.WGS84,t,i)}var W2;const qg=[0,0];function jP(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let pn=W2=class extends Vd{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,s){let o;if(Array.isArray(e))o=e,s=t,e=o[0],t=o[1],i=o[2],r=o[3];else if(e&&typeof e=="object"){if(o=e,e=o.x!=null?o.x:o.longitude,t=o.y!=null?o.y:o.latitude,i=o.z,r=o.m,(s=o.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new wt(s)),o.longitude!=null||o.latitude!=null){if(o.longitude==null)Ie.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(o.latitude==null)Ie.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&s&&s.isWebMercator){const u=Mf(o.longitude,o.latitude,qg);e=u[0],t=u[1]}}}else jP(i)?(s=i,i=null):jP(r)&&(s=r,r=null);const c={x:e,y:t};return c.x==null&&c.y!=null?Ie.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):c.y==null&&c.x!=null&&Ie.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(c.spatialReference=s),i!=null&&(c.z=i),r!=null&&(c.m=r),c}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return hy(t,i,qg)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Mf(i,e,qg)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return hy(e,t,qg)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",Mf(e,t,qg)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new W2;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return W2.copy(e,this),this}equals(e){if(ae(e))return!1;const{x:t,y:i,z:r,m:s,spatialReference:o}=this,{z:c,m:u}=e;let{x:g,y:b,spatialReference:S}=e;if(!o.equals(S))if(o.isWebMercator&&S.isWGS84)[g,b]=Mf(g,b),S=o;else{if(!o.isWGS84||!S.isWebMercator)return!1;[g,b]=hy(g,b),S=o}return t===g&&i===b&&r===c&&s===u&&o.wkid===S.wkid}offset(e,t,i){var r;return this.x+=e,this.y+=t,i!=null&&(this.z=((r=this.z)!=null?r:0)+i),this}normalize(){if(!this.spatialReference)return this;const e=ua(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let o;return t>r?(o=Math.ceil(Math.abs(t-r)/s),t-=o*s):t<i&&(o=Math.ceil(Math.abs(t-i)/s),t+=o*s),this._set("x",t),this}distance(e){return fue(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};v([_({readOnly:!0})],pn.prototype,"cache",null),v([_({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],pn.prototype,"hasM",null),v([_({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],pn.prototype,"hasZ",null),v([_({type:Number})],pn.prototype,"latitude",null),v([_({type:Number})],pn.prototype,"longitude",null),v([_({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),_t(e=>isNaN(e)?e:ra(e))],pn.prototype,"x",void 0),v([qe("x")],pn.prototype,"writeX",null),v([Ne("x")],pn.prototype,"readX",null),v([_({type:Number,json:{write:!0}})],pn.prototype,"y",void 0),v([_({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],pn.prototype,"z",void 0),v([_({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],pn.prototype,"m",void 0),pn=W2=v([K("esri.geometry.Point")],pn),pn.prototype.toJSON.isDefaultToJSON=!0;const pt=pn,hI=[0,0];function f5(e,t){return!!U(t)&&xn(e,t.x,t.y,t.z)}function rNe(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!Oy(e,i))return!1;return!0}function gue(e,t){const{xmin:i,ymin:r,zmin:s,xmax:o,ymax:c,zmax:u}=t;return e.hasZ&&t.hasZ?xn(e,i,r,s)&&xn(e,i,c,s)&&xn(e,o,c,s)&&xn(e,o,r,s)&&xn(e,i,r,u)&&xn(e,i,c,u)&&xn(e,o,c,u)&&xn(e,o,r,u):xn(e,i,r)&&xn(e,i,c)&&xn(e,o,c)&&xn(e,o,r)}function Oy(e,t){return xn(e,t[0],t[1])}function vue(e,t){return xn(e,t[0],t[1],t[2])}function xn(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function wU(e,t){return hI[1]=t.y,hI[0]=t.x,bue(e,hI)}function bue(e,t){return _U(e.rings,t)}function _U(e,t){if(!e)return!1;if(wue(e))return zP(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=zP(i,e[r],t);return i}function wue(e){return!Array.isArray(e[0][0])}function zP(e,t,i){const[r,s]=i;let o=e,c=0;for(let u=0,g=t.length;u<g;u++){c++,c===g&&(c=0);const[b,S]=t[u],[E,A]=t[c];(S<s&&A>=s||A<s&&S>=s)&&b+(s-S)/(A-S)*(E-b)<r&&(o=!o)}return o}function _ue(e,t){return f5(e,t)}function xue(e,t){const i=e.hasZ&&t.hasZ;let r,s,o;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(o=t.zmin,e.zmax<o)return!1}else if(o=e.zmin,t.zmax<o)return!1}return!0}function Sue(e,t){const{points:i,hasZ:r}=t,s=r?vue:Oy;for(const o of i)if(s(e,o))return!0;return!1}const a0=[0,0],l0=[0,0],u0=[0,0],c0=[0,0],Iue=[a0,l0,u0,c0],xU=[[u0,a0],[a0,l0],[l0,c0],[c0,u0]];function Eue(e,t){return Mue(e,t.rings)}function Mue(e,t){a0[0]=e.xmin,a0[1]=e.ymax,l0[0]=e.xmax,l0[1]=e.ymax,u0[0]=e.xmin,u0[1]=e.ymin,c0[0]=e.xmax,c0[1]=e.ymin;for(const i of Iue)if(_U(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(Oy(e,r))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(Oy(e,o)||SU(r,o,xU))return!0;r=o}}return!1}function Tue(e,t){a0[0]=e.xmin,a0[1]=e.ymax,l0[0]=e.xmax,l0[1]=e.ymax,u0[0]=e.xmin,u0[1]=e.ymin,c0[0]=e.xmax,c0[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(Oy(e,s))return!0;for(let o=1;o<r.length;o++){const c=r[o];if(Oy(e,c)||SU(s,c,xU))return!0;s=c}}return!1}const as=[0,0];function Cue(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const o=i[s],c=i[s+1];for(let u=t+1;u<e.length;u++)for(let g=0;g<e[u].length-1;g++){const b=e[u][g],S=e[u][g+1];if(dM(o,c,b,S,as)&&!(as[0]===o[0]&&as[1]===o[1]||as[0]===b[0]&&as[1]===b[1]||as[0]===c[0]&&as[1]===c[1]||as[0]===S[0]&&as[1]===S[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let o=r-1;s===0&&(o=r-2);const c=i[s],u=i[s+1];for(let g=s+2;g<o;g++){const b=i[g],S=i[g+1];if(dM(c,u,b,S,as)&&!(as[0]===c[0]&&as[1]===c[1]||as[0]===b[0]&&as[1]===b[1]||as[0]===u[0]&&as[1]===u[1]||as[0]===S[0]&&as[1]===S[1]))return!0}}}return!1}function SU(e,t,i){for(let r=0;r<i.length;r++)if(dM(e,t,i[r][0],i[r][1]))return!0;return!1}function dM(e,t,i,r,s){const[o,c]=e,[u,g]=t,[b,S]=i,[E,A]=r,O=E-b,L=o-b,N=u-o,z=A-S,q=c-S,Z=g-c,ee=z*N-O*Z;if(ee===0)return!1;const ie=(O*q-z*L)/ee,ne=(N*q-Z*L)/ee;return ie>=0&&ie<=1&&ne>=0&&ne<=1&&(s&&(s[0]=o+ie*(u-o),s[1]=c+ie*(g-c)),!0)}function Aue(e){switch(e){case"esriGeometryEnvelope":case"extent":return xue;case"esriGeometryMultipoint":case"multipoint":return Sue;case"esriGeometryPoint":case"point":return _ue;case"esriGeometryPolygon":case"polygon":return Eue;case"esriGeometryPolyline":case"polyline":return Tue}}var qo;function $ue(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Jc(e,t,i){return t==null?i:i==null?t:e(t,i)}let Br=qo=class extends Vd{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return $ue(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?wt.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s!=null?s:wt.WGS84}}static fromBounds(e,t){return new qo({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new qo({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new pt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new qo;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&cy(t,i)&&(e=t.isWebMercator?gc(e):Tf(e,!0)),e.type==="point"?f5(this,e):e.type==="extent"&&gue(this,e)}equals(e){if(this===e)return!0;if(ae(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&cy(t,i)&&(e=t.isWebMercator?gc(e):Tf(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(ae(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!Hi(t,i)&&cy(t,i)&&(e=t.isWebMercator?gc(e):Tf(e,!0)),Aue(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Jc(Math.min,this.zmin,e.zmin),this.zmax=Jc(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Jc(Math.min,this.mmin,e.mmin),this.mmax=Jc(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:ae(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Jc(Math.max,this.zmin,e.zmin),this.zmax=Jc(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Jc(Math.max,this.mmin,e.mmin),this.mmax=Jc(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=ua(this.spatialReference)){var r;if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const s=t.isWebMercator?Tf(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(s.x=this._normalizeX(s.x,e).x),this.spatialReference=new wt(pa((r=t.isWGS84?e.altTemplate:null)!=null?r:e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,o=this.xmax;return s>=i&&s<=r&&o>=i&&o<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const s=i!=null?i:ua(r);if(s==null)return this;const o=this._getParts(s).map(g=>g.extent);if(o.length<2)return o[0]||this;if(o.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return o;let c=!0,u=!0;return o.forEach(g=>{g.hasZ||(c=!1),g.hasM||(u=!1)}),{rings:o.map(g=>{const b=[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]];if(c){const S=(g.zmax-g.zmin)/2;for(let E=0;E<b.length;E++)b[E].push(S)}if(u){const S=(g.mmax-g.mmin)/2;for(let E=0;E<b.length;E++)b[E].push(S)}return b}),hasZ:c,hasM:u,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:o,spatialReference:c}=this,u=this.width,g=this.xmin,b=this.xmax;let S;e=e||ua(c);const[E,A]=e.valid;S=this._normalizeX(this.xmin,e);const O=S.x,L=S.frameId;S=this._normalizeX(this.xmax,e);const N=S.x,z=S.frameId,q=O===N&&u>0;if(u>2*A){const Z=new qo(g<b?O:N,s,A,o,c),ee=new qo(E,s,g<b?N:O,o,c),ie=new qo(0,s,A,o,c),ne=new qo(E,s,0,o,c),oe=[],me=[];Z.contains(ie)&&oe.push(L),Z.contains(ne)&&me.push(L),ee.contains(ie)&&oe.push(z),ee.contains(ne)&&me.push(z);for(let fe=L+1;fe<z;fe++)oe.push(fe),me.push(fe);t.push({extent:Z,frameIds:[L]},{extent:ee,frameIds:[z]},{extent:ie,frameIds:oe},{extent:ne,frameIds:me})}else O>N||q?t.push({extent:new qo(O,s,A,o,c),frameIds:[L]},{extent:new qo(E,s,N,o,c),frameIds:[z]}):t.push({extent:new qo(O,s,N,o,c),frameIds:[L]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let o=0;o<t.length;o++)t[o].extent.set(s)}return t}_normalizeX(e,t){const[i,r]=t.valid,s=2*r;let o,c=0;return e>r?(o=Math.ceil(Math.abs(e-r)/s),e-=o*s,c=o):e<i&&(o=Math.ceil(Math.abs(e-i)/s),e+=o*s,c=-o),{x:e,frameId:c}}};v([_({readOnly:!0})],Br.prototype,"cache",null),v([_({readOnly:!0})],Br.prototype,"center",null),v([_({readOnly:!0})],Br.prototype,"extent",null),v([_({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Br.prototype,"hasM",null),v([_({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Br.prototype,"hasZ",null),v([_({readOnly:!0})],Br.prototype,"height",null),v([_({readOnly:!0})],Br.prototype,"width",null),v([_({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Br.prototype,"xmin",void 0),v([_({type:Number,json:{write:!0}})],Br.prototype,"ymin",void 0),v([_({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Br.prototype,"mmin",void 0),v([_({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Br.prototype,"zmin",void 0),v([_({type:Number,json:{write:!0}})],Br.prototype,"xmax",void 0),v([_({type:Number,json:{write:!0}})],Br.prototype,"ymax",void 0),v([_({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Br.prototype,"mmax",void 0),v([_({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Br.prototype,"zmax",void 0),Br=qo=v([K("esri.geometry.Extent")],Br),Br.prototype.toJSON.isDefaultToJSON=!0;const vi=Br;let zv;var PV,FV,LV;const dI=(LV=(PV=globalThis.esriConfig)==null?void 0:PV.locale)!=null?LV:(FV=globalThis.dojoConfig)==null?void 0:FV.locale;function IU(){var e,t;return(t=dI!=null?dI:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function Dr(){return zv===void 0&&(zv=IU()),zv}function kue(e=Dr()){var t;return(t=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(e))==null?void 0:t[1].toLowerCase()}const Vv=[];function m5(e){return Vv.push(e),{remove(){Vv.splice(Vv.indexOf(e),1)}}}const pM=[];function J6(e){return pM.push(e),{remove(){Vv.splice(pM.indexOf(e),1)}}}function Oue(){const e=IU();zv!==e&&(zv=e,[...pM].forEach(t=>{t.call(null,e)}),[...Vv].forEach(t=>{t.call(null,e)}))}var RV;(RV=globalThis.addEventListener)==null||RV.call(globalThis,"languagechange",Oue);var fM;const Pue=new It({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Bo=fM=class extends Re{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new fM({categories:this.categories?ve(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(c=>Array.isArray(c)?JSON.stringify(c):c));let r="";if(this.extent){const c=p5(this.extent,wt.WGS84);U(c)&&(r=`${c.xmin},${c.ymin},${c.xmax},${c.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const o={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(o.sortField=this.sortField.split(",").map(c=>Pue.toJSON(c.trim())).join(","),o.sortOrder=this.sortOrder),{query:{...t,...o}}}};v([_()],Bo.prototype,"categories",void 0),v([_()],Bo.prototype,"disableExtraQuery",void 0),v([_({type:vi})],Bo.prototype,"extent",void 0),v([_()],Bo.prototype,"filter",void 0),v([_()],Bo.prototype,"num",void 0),v([_()],Bo.prototype,"query",void 0),v([_()],Bo.prototype,"sortField",void 0),v([_()],Bo.prototype,"sortOrder",null),v([_()],Bo.prototype,"start",void 0),Bo=fM=v([K("esri.portal.PortalQueryParams")],Bo);const cc=Bo;let yp=class extends Re{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};v([_()],yp.prototype,"nextQueryParams",void 0),v([_()],yp.prototype,"queryParams",void 0),v([_()],yp.prototype,"results",void 0),v([_()],yp.prototype,"total",void 0),yp=v([K("esri.portal.PortalQueryResult")],yp);const Fue=yp;let ku=class extends $e{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new de("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};v([_({type:Date})],ku.prototype,"created",void 0),v([_()],ku.prototype,"id",void 0),v([_()],ku.prototype,"portal",void 0),v([_()],ku.prototype,"title",void 0),v([_({readOnly:!0})],ku.prototype,"url",null),v([_()],ku.prototype,"username",void 0),ku=v([K("esri.portal.PortalFolder")],ku);const Lue=ku;let Hr=class extends $e{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return fs(this.portal).request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return fs(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new de("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=Er(cc,e);const r=fs(this.portal);return parseFloat(r.currentVersion)>5?(i=i||new cc,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new cc,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=fs(this.portal);return i.fetchSelf(i.authMode,!0,t).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const o=new cc;return o.disableExtraQuery=!0,o.num=1,o.query=s,i.queryGroups(o,t)}throw new de("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],o=new cc;return o.num=1,o.query=`typekeywords:"${e}"`,s.queryItems(o,t)}throw new de("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(s=>{const o=s&&s.categorySchema;return o&&o.length?o:[]}):[])}};v([_()],Hr.prototype,"access",void 0),v([_({type:Date})],Hr.prototype,"created",void 0),v([_()],Hr.prototype,"description",void 0),v([_()],Hr.prototype,"id",void 0),v([_()],Hr.prototype,"isInvitationOnly",void 0),v([_({type:Date})],Hr.prototype,"modified",void 0),v([_()],Hr.prototype,"owner",void 0),v([_()],Hr.prototype,"portal",void 0),v([_()],Hr.prototype,"snippet",void 0),v([_()],Hr.prototype,"sortField",void 0),v([_()],Hr.prototype,"sortOrder",void 0),v([_()],Hr.prototype,"tags",void 0),v([_()],Hr.prototype,"thumbnail",void 0),v([_({readOnly:!0})],Hr.prototype,"thumbnailUrl",null),v([_()],Hr.prototype,"title",void 0),v([_({readOnly:!0})],Hr.prototype,"url",null),Hr=v([K("esri.portal.PortalGroup")],Hr);const mM=Hr;var Rue=Object.freeze(Object.defineProperty({__proto__:null,default:mM},Symbol.toStringTag,{value:"Module"})),yM;let Di=yM=class extends $e{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,r=e&&e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let o=this.userContentUrl;return r&&(o+="/"+(typeof r=="string"?r:r.id)),this.portal.request(o+"/addItem",s).then(c=>(t.id=c.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal.request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(r=>r.id);if(i.length){const r={method:"post",query:{items:i.join(",")}};return this.portal.request(t,r).then(()=>{e.forEach(s=>{s.id=null,s.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){var t;const e={query:{num:1}};return this.portal.request((t=this.userContentUrl)!=null?t:"",e).then(i=>{let r;return r=i&&i.folders?i.folders.map(s=>{const o=Lue.fromJSON(s);return o.portal=this.portal,o}):[],r})}fetchGroups(){var e;return this.portal.request((e=this.url)!=null?e:"").then(t=>{let i;return i=t&&t.groups?t.groups.map(r=>{const s=mM.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchItems(e){var s;const t=e!=null?e:{};let i,r=(s=this.userContentUrl)!=null?s:"";return t.folder&&(r+="/"+t.folder.id),pe(()=>Promise.resolve().then(function(){return EU}),void 0).then(({default:o})=>{i=o;const c={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal.request(r,{query:c})}).then(o=>{let c;return o&&o.items?(c=o.items.map(u=>{const g=i.fromJSON(u);return g.portal=this.portal,g}),Promise.all(c.map(u=>u.load())).catch(u=>u).then(()=>({items:c,nextStart:o.nextStart,total:o.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new mM({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new de("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new de("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new yM;return t.sourceJSON=e,t.read(e),t}};v([_()],Di.prototype,"access",void 0),v([_({type:Date})],Di.prototype,"created",void 0),v([_()],Di.prototype,"culture",void 0),v([_()],Di.prototype,"description",void 0),v([_()],Di.prototype,"email",void 0),v([_()],Di.prototype,"favGroupId",void 0),v([_()],Di.prototype,"fullName",void 0),v([_({type:Date})],Di.prototype,"modified",void 0),v([_()],Di.prototype,"orgId",void 0),v([_()],Di.prototype,"portal",void 0),v([_()],Di.prototype,"preferredView",void 0),v([_()],Di.prototype,"privileges",void 0),v([_()],Di.prototype,"region",void 0),v([_()],Di.prototype,"role",void 0),v([_()],Di.prototype,"roleId",void 0),v([_()],Di.prototype,"sourceJSON",void 0),v([_()],Di.prototype,"thumbnail",void 0),v([_({readOnly:!0})],Di.prototype,"thumbnailUrl",null),v([_()],Di.prototype,"units",void 0),v([_({readOnly:!0})],Di.prototype,"userContentUrl",null),v([_({readOnly:!0})],Di.prototype,"url",null),v([_()],Di.prototype,"username",void 0),v([_()],Di.prototype,"userType",void 0),Di=yM=v([K("esri.portal.PortalUser")],Di);const Y6=Di;var Nue=Object.freeze(Object.defineProperty({__proto__:null,default:Y6},Symbol.toStringTag,{value:"Module"})),fo;let pI;const VP={PortalGroup:()=>pe(()=>Promise.resolve().then(function(){return Rue}),void 0),PortalItem:()=>pe(()=>Promise.resolve().then(function(){return EU}),void 0),PortalUser:()=>pe(()=>Promise.resolve().then(function(){return Nue}),void 0)};let ze=fo=class extends cg(ru){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=jt.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriIdCredentialCreateHandle=Ti(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)jt.request.trustedServers.includes(t)||jt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=Y6.fromJSON(e),t.portal=this),t}load(e){const t=pe(()=>Promise.resolve().then(function(){return rce}),void 0).then(({default:i})=>{or(e),pI=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{if(qt){const r=qt;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==fo.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle=r.on("credential-create",()=>{r.findCredential(this.restUrl)&&this.signIn().catch(()=>{})}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await pe(()=>import("./ElevationLayer.a7b251bb.js"),["assets/ElevationLayer.a7b251bb.js","assets/ArcGISCachedService.2a3b6bf8.js","assets/TilemapCache.0d26638b.js","assets/WorkerHandle.bbb1002a.js"])).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new cc;return i.query=e||(jt.apiKey&&gU(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(r=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',r.total){const s=r.results[0];return i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc",s.queryItems(i,t)}return null}).then(r=>{let s;return s=r&&r.total?r.results.filter(o=>o.type==="Web Map").map(o=>new pI({portalItem:o})):[],s})}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Fo(e)?Promise.reject(Ri()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new cc;if(i.num=100,i.sortField="title",t&&t.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return Fo(e)?Promise.reject(Ri()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Dr();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Dr();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return fo._default&&!fo._default.destroyed||(fo._default=new fo),fo._default}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Dr().toLowerCase()},...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(r,s)}queryPortal(e,t,i,r){const s=Er(cc,t),o=c=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...r}).then(u=>{const g=s.clone();return g.start=u.nextStart,new Fue({nextQueryParams:g,queryParams:s,total:u.total,results:fo._resultsToTypedArray(c,{portal:this},u,r)})}).then(u=>Promise.all(u.results.map(g=>typeof g.when=="function"?g.when():u)).then(()=>u,g=>(Jl(g),u)));return i&&VP[i]?VP[i]().then(({default:c})=>(or(r),o(c))):o()}signIn(){if(this.authMode===fo.AUTH_MODE_ANONYMOUS)return Promise.reject(new de("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return qt?qt.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const s=fo._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():r)).then(()=>s,()=>s)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===fo.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:s=null,cacheBust:o=!1,method:c="auto",responseType:u="json",signal:g}=t,b={authMode:r,body:s,cacheBust:o,method:c,query:i,responseType:u,timeout:0,signal:g};return mi(this._normalizeSSL(e),b).then(S=>S.data)}toJSON(){throw new de("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new fo({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new de("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=pI.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let s=[];if(i){const o=U(r)?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(c=>{const u=Object.assign(e?e.fromJSON(c):c,t);return typeof u.load=="function"&&u.load(o),u}))}else s=[];return s}};ze.AUTH_MODE_ANONYMOUS="anonymous",ze.AUTH_MODE_AUTO="auto",ze.AUTH_MODE_IMMEDIATE="immediate",v([_()],ze.prototype,"access",void 0),v([_()],ze.prototype,"allSSL",void 0),v([_()],ze.prototype,"authMode",void 0),v([_()],ze.prototype,"authorizedCrossOriginDomains",void 0),v([Ne("authorizedCrossOriginDomains")],ze.prototype,"readAuthorizedCrossOriginDomains",null),v([_()],ze.prototype,"basemapGalleryGroupQuery",void 0),v([_()],ze.prototype,"bingKey",void 0),v([_()],ze.prototype,"canListApps",void 0),v([_()],ze.prototype,"canListData",void 0),v([_()],ze.prototype,"canListPreProvisionedItems",void 0),v([_()],ze.prototype,"canProvisionDirectPurchase",void 0),v([_()],ze.prototype,"canSearchPublic",void 0),v([_()],ze.prototype,"canShareBingPublic",void 0),v([_()],ze.prototype,"canSharePublic",void 0),v([_()],ze.prototype,"canSignInArcGIS",void 0),v([_()],ze.prototype,"canSignInIDP",void 0),v([_()],ze.prototype,"colorSetsGroupQuery",void 0),v([_()],ze.prototype,"commentsEnabled",void 0),v([_({type:Date})],ze.prototype,"created",void 0),v([_()],ze.prototype,"credential",void 0),v([_()],ze.prototype,"culture",void 0),v([_()],ze.prototype,"currentVersion",void 0),v([_()],ze.prototype,"customBaseUrl",void 0),v([_()],ze.prototype,"defaultBasemap",void 0),v([Ne("defaultBasemap")],ze.prototype,"readDefaultBasemap",null),v([_()],ze.prototype,"defaultDevBasemap",void 0),v([Ne("defaultDevBasemap")],ze.prototype,"readDefaultDevBasemap",null),v([_({type:vi})],ze.prototype,"defaultExtent",void 0),v([_()],ze.prototype,"defaultVectorBasemap",void 0),v([Ne("defaultVectorBasemap")],ze.prototype,"readDefaultVectorBasemap",null),v([_()],ze.prototype,"description",void 0),v([_()],ze.prototype,"devBasemapGalleryGroupQuery",void 0),v([_()],ze.prototype,"eueiEnabled",void 0),v([_({readOnly:!0})],ze.prototype,"extraQuery",null),v([_()],ze.prototype,"featuredGroups",void 0),v([_()],ze.prototype,"featuredItemsGroupQuery",void 0),v([_()],ze.prototype,"galleryTemplatesGroupQuery",void 0),v([_()],ze.prototype,"livingAtlasGroupQuery",void 0),v([_()],ze.prototype,"hasCategorySchema",void 0),v([_()],ze.prototype,"helpBase",void 0),v([_()],ze.prototype,"helperServices",void 0),v([_()],ze.prototype,"helpMap",void 0),v([_()],ze.prototype,"homePageFeaturedContent",void 0),v([_()],ze.prototype,"homePageFeaturedContentCount",void 0),v([_()],ze.prototype,"httpPort",void 0),v([_()],ze.prototype,"httpsPort",void 0),v([_()],ze.prototype,"id",void 0),v([_()],ze.prototype,"ipCntryCode",void 0),v([_({readOnly:!0})],ze.prototype,"isOrganization",null),v([_()],ze.prototype,"isPortal",void 0),v([_()],ze.prototype,"isReadOnly",void 0),v([_({readOnly:!0})],ze.prototype,"itemPageUrl",null),v([_()],ze.prototype,"layerTemplatesGroupQuery",void 0),v([_()],ze.prototype,"maxTokenExpirationMinutes",void 0),v([_({type:Date})],ze.prototype,"modified",void 0),v([_()],ze.prototype,"name",void 0),v([_()],ze.prototype,"portalHostname",void 0),v([_()],ze.prototype,"portalMode",void 0),v([_()],ze.prototype,"portalProperties",void 0),v([_()],ze.prototype,"region",void 0),v([_({readOnly:!0})],ze.prototype,"restUrl",null),v([_()],ze.prototype,"rotatorPanels",void 0),v([_()],ze.prototype,"showHomePageDescription",void 0),v([_()],ze.prototype,"sourceJSON",void 0),v([_()],ze.prototype,"staticImagesUrl",void 0),v([_({json:{name:"2DStylesGroupQuery"}})],ze.prototype,"stylesGroupQuery2d",void 0),v([_({json:{name:"stylesGroupQuery"}})],ze.prototype,"stylesGroupQuery3d",void 0),v([_()],ze.prototype,"supportsHostedServices",void 0),v([_()],ze.prototype,"symbolSetsGroupQuery",void 0),v([_()],ze.prototype,"templatesGroupQuery",void 0),v([_()],ze.prototype,"thumbnail",void 0),v([_({readOnly:!0})],ze.prototype,"thumbnailUrl",null),v([_()],ze.prototype,"units",void 0),v([_()],ze.prototype,"url",void 0),v([_()],ze.prototype,"urlKey",void 0),v([Ne("urlKey")],ze.prototype,"readUrlKey",null),v([_()],ze.prototype,"user",void 0),v([Ne("user")],ze.prototype,"readUser",null),v([_()],ze.prototype,"useStandardizedQuery",void 0),v([_()],ze.prototype,"useVectorBasemaps",void 0),v([_()],ze.prototype,"vectorBasemapGalleryGroupQuery",void 0),ze=fo=v([K("esri.portal.Portal")],ze);const Ts=ze,Due=Ie.getLogger("esri.assets");function Dt(e){if(!jt.assetsPath)throw Due.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new de("assets:path-not-set","config.assetsPath is not set");return n0(jt.assetsPath,e)}let ch=class extends Re{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){U(e)&&Co(e)?Ie.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(ae(i))throw new de("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:Cy(t,"signal")})}async update(e,t){return(await pe(()=>import("./resourceUtils.4b27d0b5.js"),[])).addOrUpdateResource(this,"update",e,t)}hasPath(){return U(this.path)}_normalizePath(e,t){return ae(e)?e:(e=e.replace(/^\/+/,""),U(t)&&Co(e)&&(e=L6(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};v([_()],ch.prototype,"portalItem",void 0),v([_({type:String,value:null})],ch.prototype,"path",null),v([_t("path")],ch.prototype,"_castPath",null),v([_({type:String,readOnly:!0})],ch.prototype,"url",null),v([_({type:String,readOnly:!0})],ch.prototype,"itemRelativeUrl",null),ch=v([K("esri.portal.PortalItemResource")],ch);const jue=ch;let C1=class extends Re{constructor(e){super(e),this.created=null,this.rating=null}};v([_()],C1.prototype,"created",void 0),v([_()],C1.prototype,"rating",void 0),C1=v([K("esri.portal.PortalRating")],C1);const fI=C1;var gp;const zue=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),Vue=new Set(["KML","GeoJson","CSV"]);let yt=gp=class extends cg(ru){static from(e){return _6(gp,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"&&(i="Insights Report"),i}readExtent(e){return e&&e.length?new vi(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,o=!1,c=!1,u=!1,g=!1,b=!1,S=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(o=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(c=t.includes("Table"),u=t.includes("Route Layer"),g=t.includes("Markup"),b=t.includes("Spatiotemporal"),S=t.includes("UtilityNetwork"),s=b&&c?"spatiotemporaltable":c?"table":u?"routelayer":g?"markup":b?"spatiotemporal":o?"featureshosted":S?"utilitynetwork":"features"):s=e==="map service"||e==="wms"||e==="wmts"?o||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):s=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="pro report template"?"proreporttemplate":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":e==="discussion"?"discussion":e==="allsource project"?"allsourceproject":e==="api key"?"apikey":"maps",s?Dt(i+s+r+".png"):null}get isLayer(){return this.type!=null&&zue.has(this.type)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i,r;const e=this.itemUrl,t=this.thumbnail;return e&&t&&(r=(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`))!=null?r:null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){var r;const t=(r=this.portal)!=null?r:this.portal=Ts.getDefault(),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:U(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(s=>{this.sourceJSON=s,this.read(s)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof fI&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new fI({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:ve(this.applicationProxies),avgRating:this.avgRating,categories:ve(this.categories),created:ve(this.created),culture:this.culture,description:this.description,extent:ve(this.extent),groupCategories:ve(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ve(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ve(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ve(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ve(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new gp({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await fs(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return fs(this.portal).request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await fs(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new fI(t)):null}fetchRelatedItems(e,t){return fs(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},gp)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){var e;return fs(this.portal).request((e=this.itemUrl)!=null?e:"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(e){return this.id?this.load().then(()=>fs(this.portal).signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new de("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new de("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await fs(t).signIn();const{copyResources:r,folder:s,tags:o,title:c}=e||{},u={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!r,tags:o==null?void 0:o.join(","),title:c}},{itemId:g}=await t.request(`${i}/copy`,u);return new gp({id:g,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")w0(t)?r.query={data:t}:r.query={url:na(t)},U(i)&&(r.query.filename=i);else{const s=new FormData;U(i)?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new de("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await pe(()=>import("./resourceUtils.4b27d0b5.js"),[])).fetchResources(this,e,t)}async addResource(e,t,i){const r=await pe(()=>import("./resourceUtils.4b27d0b5.js"),[]);return e.portalItem=this,r.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await pe(()=>import("./resourceUtils.4b27d0b5.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new de("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await pe(()=>import("./resourceUtils.4b27d0b5.js"),[])).removeAllResources(this,e)}resourceFromPath(e){return new jue({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:ve(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:ve(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ve(this.typeKeywords),url:this.url};return jV(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new gp({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};v([_({type:["private","shared","org","public"]})],yt.prototype,"access",void 0),v([_()],yt.prototype,"accessInformation",void 0),v([_({type:String})],yt.prototype,"apiKey",void 0),v([_({json:{read:{source:"appProxies"}}})],yt.prototype,"applicationProxies",void 0),v([_()],yt.prototype,"avgRating",void 0),v([_()],yt.prototype,"categories",void 0),v([_({type:Date})],yt.prototype,"created",void 0),v([_()],yt.prototype,"culture",void 0),v([_()],yt.prototype,"description",void 0),v([_({readOnly:!0})],yt.prototype,"displayName",null),v([_({type:vi})],yt.prototype,"extent",void 0),v([Ne("extent")],yt.prototype,"readExtent",null),v([_()],yt.prototype,"groupCategories",void 0),v([_({readOnly:!0})],yt.prototype,"iconUrl",null),v([_()],yt.prototype,"id",void 0),v([_({readOnly:!0})],yt.prototype,"isLayer",null),v([_({type:Boolean,readOnly:!0})],yt.prototype,"isOrgItem",void 0),v([_()],yt.prototype,"itemControl",void 0),v([_({readOnly:!0})],yt.prototype,"itemPageUrl",null),v([_({readOnly:!0})],yt.prototype,"itemUrl",null),v([_()],yt.prototype,"licenseInfo",void 0),v([_({type:Date})],yt.prototype,"modified",void 0),v([_()],yt.prototype,"name",void 0),v([_()],yt.prototype,"numComments",void 0),v([_()],yt.prototype,"numRatings",void 0),v([_()],yt.prototype,"numViews",void 0),v([_()],yt.prototype,"owner",void 0),v([_()],yt.prototype,"ownerFolder",void 0),v([_({type:Ts})],yt.prototype,"portal",void 0),v([_()],yt.prototype,"screenshots",void 0),v([_()],yt.prototype,"size",void 0),v([_()],yt.prototype,"snippet",void 0),v([_()],yt.prototype,"sourceJSON",void 0),v([_({type:String})],yt.prototype,"sourceUrl",void 0),v([_({type:String})],yt.prototype,"spatialReference",void 0),v([_()],yt.prototype,"tags",void 0),v([_()],yt.prototype,"thumbnail",void 0),v([_({readOnly:!0})],yt.prototype,"thumbnailUrl",null),v([_()],yt.prototype,"title",void 0),v([_()],yt.prototype,"type",void 0),v([_()],yt.prototype,"typeKeywords",void 0),v([_({type:String,json:{read(e,t){var i;if(Vue.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],yt.prototype,"url",void 0),v([_({readOnly:!0})],yt.prototype,"userItemUrl",null),yt=gp=v([K("esri.portal.PortalItem")],yt);const Gv=yt;var EU=Object.freeze(Object.defineProperty({__proto__:null,default:Gv},Symbol.toStringTag,{value:"Module"}));const GP=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Gue={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function UP(e){var t;return(t=Gue[e])!=null?t:!1}const A1=[],dy=new Map;function qP(e){for(const t of dy.keys())MU(e.pattern,t)&&dy.delete(t)}function Uue(e){return A1.includes(e)||(qP(e),A1.unshift(e)),{remove(){const t=A1.indexOf(e);t>-1&&(A1.splice(t,1),qP(e))}}}async function py(e){const t=Dr();dy.has(e)||dy.set(e,Bue(e,t));const i=dy.get(e);return i&&await Hue.add(i),i}function que(e){if(!GP.test(e))return null;const t=GP.exec(e);if(t===null)return null;const[,i,r]=t,s=i+(r?"-"+r.toUpperCase():"");return UP(s)?s:UP(i)?i:null}async function Bue(e,t){const i=[];for(const r of A1)if(MU(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new de("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new de("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function MU(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}J6(()=>{dy.clear()});const Hue=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=tu())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Wue(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await py("esri/t9n/basemaps");return i[e]||i[t]}const gM={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Dt("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Dt("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Dt("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Dt("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Dt("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Dt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Dt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Dt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Dt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Dt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Dt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Dt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Dt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Dt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Dt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Dt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},sNe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function TU(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function K6(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function nNe(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}async function Z6(e,t){const i=qt==null?void 0:qt.findServerInfo(e);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${e.substring(0,r)}/rest/info`,o=U(t)?t.signal:null,{data:c}=await mi(s,{query:{f:"json"},responseType:"json",signal:o});return(c==null?void 0:c.owningSystemUrl)||null}function Jue(e){if(!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Tn(e){return Jue(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Yue(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function y5(e){return!!Yue(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const Kue=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Zue=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Xue(e){return e.layerContainerType==="basemap"?Kue:e.layerContainerType==="operational-layers"?Zue:null}function Que(e,t){if(t.restrictedWebMapWriting){const i=Xue(t);return!U(i)||i.has(e.type)&&!K6(e)}return!0}function ece(e,t){if(t)if(K6(e)){const i=gw("featureCollection.layers",t),r=i&&i[0]&&i[0].layerDefinition;r&&mI(e,r)}else e.type==="stream"?mI(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&mI(e,t)}function mI(e,t){var i,r;"maxScale"in e&&(t.maxScale=(i=xx(e.maxScale))!=null?i:void 0),"minScale"in e&&(t.minScale=(r=xx(e.minScale))!=null?r:void 0)}function tce(e,t){var i;if(ece(e,t),t&&("blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=(i=xx(e.opacity))!=null?i:void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(K6(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function BP(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new de("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Que(e,i)){const r={};return e.write(r,i)?r:null}return U(t)&&tce(e,t=ve(t)),t}var J2;let ice=0;const CU="esri.Basemap";let Ho=J2=class extends cg(ru){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+ice++,this.baseLayers=new Be,this.referenceLayers=new Be;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&Ie.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Ie.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",s0(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const o=BP(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);U(o)&&r.push(o)}),this.referenceLayers.forEach(s=>{const o=BP(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);U(o)&&(s.type!=="scene"&&(o.isReference=!0),r.push(o))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",s0(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return zG(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new J2({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=ve(i);return r.url&&su(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&su(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;or(e);const r=[];if(t){const s=t.context?t.context.url:null;if(r.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const o=t.data.id;r.push(Wue(o).then(c=>{c&&this.read({title:c},t.context)}))}}else i&&r.push(this._loadFromItem(i,e));await Promise.all(r)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo&&this.resourceInfo.context,s=this.portalItem&&this.portalItem.portal||r&&r.portal||null,o=r&&r.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:c}=await pe(()=>import("./layersCreator.56ed7094.js"),["assets/layersCreator.56ed7094.js","assets/lazyLayerLoader.a3fec886.js","assets/portalLayers.c07b6118.js","assets/layersLoader.7d60eaab.js","assets/fetchService.1ee40f9a.js","assets/jsonContext.6c135492.js"]),u=[];if(or(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const g={context:{origin:o,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},b=A=>o==="web-scene"&&A.layerType==="ArcGISSceneServiceLayer"||A.isReference,S=c(this.baseLayers,e.baseMapLayers.filter(A=>!b(A)),g);u.push(S);const E=c(this.referenceLayers,e.baseMapLayers.filter(b),g);u.push(E)}await Ms(u)}async _loadFromItem(e,t){var o,c;const i=await e.load(t),r=await i.fetchData("json",t),s=is((o=e.itemUrl)!=null?o:"");return this._set("resourceInfo",{data:(c=r.baseMap)!=null?c:{},context:{origin:e.type==="Web Scene"?"web-scene":"web-map",portal:e.portal||Ts.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Ts.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=gM[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),_w(Ie.getLogger(CU),`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return J2.fromJSON(t)}return null}};v([_({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Be}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Ho.prototype,"baseLayers",null),v([_({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ho.prototype,"id",void 0),v([_({type:Gv})],Ho.prototype,"portalItem",void 0),v([_()],Ho.prototype,"referenceLayers",null),v([_({readOnly:!0})],Ho.prototype,"resourceInfo",void 0),v([_({type:wt})],Ho.prototype,"spatialReference",void 0),v([_()],Ho.prototype,"thumbnailUrl",void 0),v([_({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ho.prototype,"title",void 0),v([qe("title")],Ho.prototype,"writeTitle",null),Ho=J2=v([K(CU)],Ho);const Ax=Ho;var rce=Object.freeze(Object.defineProperty({__proto__:null,default:Ax},Symbol.toStringTag,{value:"Module"}));const $x={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function AU(e){return $x[e]||$x[e.toLowerCase()]}function X6(e){var t;return(t=$x[e])!=null?t:$x[e.toLowerCase()]}function sce(e){return[...X6(e)]}function yI(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function $U(e,t,i,r=1){const s=(e%360+360)%360/360,o=i<=.5?i*(t+1):i+t-i*t,c=2*i-o;return[Math.round(255*yI(c,o,s+1/3)),Math.round(255*yI(c,o,s)),Math.round(255*yI(c,o,s-1/3)),r]}function nce(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,o=t?e.length===9:e.length===5;let c=Number("0x"+e.substr(1));if(isNaN(c))return null;const u=[0,0,0,1];let g;return o&&(g=c&r,c>>=i,u[3]=s*g/255),g=c&r,c>>=i,u[2]=s*g,g=c&r,c>>=i,u[1]=s*g,g=c&r,c>>=i,u[0]=s*g,u}function Jt(){return[0,0,0]}function Ac(e){return[e[0],e[1],e[2]]}function Xn(e,t,i){return[e,t,i]}function oce(e){const t=Jt(),i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function ace(e,t){return new Float64Array(e,t,3)}function kU(){return Jt()}function OU(){return Xn(1,1,1)}function PU(){return Xn(1,0,0)}function FU(){return Xn(0,1,0)}function LU(){return Xn(0,0,1)}const lce=kU(),RU=OU(),uce=PU(),cce=FU(),hce=LU();Object.freeze(Object.defineProperty({__proto__:null,ONES:RU,UNIT_X:uce,UNIT_Y:cce,UNIT_Z:hce,ZEROS:lce,clone:Ac,create:Jt,createView:ace,fromArray:oce,fromValues:Xn,ones:OU,unitX:PU,unitY:FU,unitZ:LU,zeros:kU},Symbol.toStringTag,{value:"Module"}));let Q6=1e-6;function Ro(){return Q6}function dce(e){Q6=e}const g5=Math.random,pce=Math.PI/180,fce=180/Math.PI;function e7(e){return e*pce}function mce(e){return e*fce}function yce(e,t){return Math.abs(e-t)<=Q6*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:g5,equals:yce,getEpsilon:Ro,setEpsilon:dce,toDegree:mce,toRadian:e7},Symbol.toStringTag,{value:"Module"}));function t7(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function Sb(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function $c(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function NU(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function v5(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function DU(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function jU(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function gce(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function vce(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function bce(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function wce(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function _ce(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function xce(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function Sce(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function zU(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Id(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function i7(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function Ib(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function VU(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function Ice(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Ece(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function vM(e,t){const i=t[0],r=t[1],s=t[2];let o=i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function oa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function kx(e,t,i){const r=t[0],s=t[1],o=t[2],c=i[0],u=i[1],g=i[2];return e[0]=s*g-o*u,e[1]=o*c-r*g,e[2]=r*u-s*c,e}function GU(e,t,i,r){const s=t[0],o=t[1],c=t[2];return e[0]=s+r*(i[0]-s),e[1]=o+r*(i[1]-o),e[2]=c+r*(i[2]-c),e}function Mce(e,t,i,r,s,o){const c=o*o,u=c*(2*o-3)+1,g=c*(o-2)+o,b=c*(o-1),S=c*(3-2*o);return e[0]=t[0]*u+i[0]*g+r[0]*b+s[0]*S,e[1]=t[1]*u+i[1]*g+r[1]*b+s[1]*S,e[2]=t[2]*u+i[2]*g+r[2]*b+s[2]*S,e}function Tce(e,t,i,r,s,o){const c=1-o,u=c*c,g=o*o,b=u*c,S=3*o*u,E=3*g*c,A=g*o;return e[0]=t[0]*b+i[0]*S+r[0]*E+s[0]*A,e[1]=t[1]*b+i[1]*S+r[1]*E+s[1]*A,e[2]=t[2]*b+i[2]*S+r[2]*E+s[2]*A,e}function Cce(e,t){t=t||1;const i=g5,r=2*i()*Math.PI,s=2*i()-1,o=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=s*t,e}function Ace(e,t,i){const r=t[0],s=t[1],o=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*o+i[12],e[1]=i[1]*r+i[5]*s+i[9]*o+i[13],e[2]=i[2]*r+i[6]*s+i[10]*o+i[14],e}function $ce(e,t,i){const r=t[0],s=t[1],o=t[2];return e[0]=r*i[0]+s*i[3]+o*i[6],e[1]=r*i[1]+s*i[4]+o*i[7],e[2]=r*i[2]+s*i[5]+o*i[8],e}function kce(e,t,i){const r=i[0],s=i[1],o=i[2],c=i[3],u=t[0],g=t[1],b=t[2];let S=s*b-o*g,E=o*u-r*b,A=r*g-s*u,O=s*A-o*E,L=o*S-r*A,N=r*E-s*S;const z=2*c;return S*=z,E*=z,A*=z,O*=2,L*=2,N*=2,e[0]=u+S+O,e[1]=g+E+L,e[2]=b+A+N,e}function Oce(e,t,i,r){const s=[],o=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],o[0]=s[0],o[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),o[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function Pce(e,t,i,r){const s=[],o=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],o[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),o[1]=s[1],o[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function Fce(e,t,i,r){const s=[],o=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],o[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),o[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),o[2]=s[2],e[0]=o[0]+i[0],e[1]=o[1]+i[1],e[2]=o[2]+i[2],e}function Lce(e,t){Sb(I_,e),Sb(E_,t),vM(I_,I_),vM(E_,E_);const i=oa(I_,E_);return i>1?0:i<-1?Math.PI:Math.acos(i)}const I_=Jt(),E_=Jt();function Rce(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Nr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Nce(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],o=t[0],c=t[1],u=t[2],g=Ro();return Math.abs(i-o)<=g*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-c)<=g*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-u)<=g*Math.max(1,Math.abs(s),Math.abs(u))}function Dce(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],o=i[2]-t[2];let c=r*r+s*s+o*o;return c>0?(c=1/Math.sqrt(c),e[0]=r*c,e[1]=s*c,e[2]=o*c,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Io=v5,jce=DU,zce=jU,Vce=i7,Gce=Ib,Uce=t7,Ox=VU;Object.freeze(Object.defineProperty({__proto__:null,abs:bce,add:NU,angle:Lce,bezier:Tce,ceil:gce,copy:Sb,cross:kx,direction:Dce,dist:Vce,distance:i7,div:zce,divide:jU,dot:oa,equals:Nce,exactEquals:Nr,floor:vce,hermite:Mce,inverse:Ece,len:Uce,length:t7,lerp:GU,max:xce,min:_ce,mul:jce,multiply:DU,negate:Ice,normalize:vM,random:Cce,rotateX:Oce,rotateY:Pce,rotateZ:Fce,round:Sce,scale:zU,scaleAndAdd:Id,set:$c,sign:wce,sqrDist:Gce,sqrLen:Ox,squaredDistance:Ib,squaredLength:VU,str:Rce,sub:Io,subtract:v5,transformMat3:$ce,transformMat4:Ace,transformQuat:kce},Symbol.toStringTag,{value:"Module"}));function qce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Bce(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function Hce(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function UU(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function qU(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function BU(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function Wce(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Jce(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Yce(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function Kce(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Zce(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Xce(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Qce(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function HU(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+o*o)}function WU(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],o=t[3]-e[3];return i*i+r*r+s*s+o*o}function JU(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function YU(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function ehe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function the(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function ihe(e,t){const i=t[0],r=t[1],s=t[2],o=t[3];let c=i*i+r*r+s*s+o*o;return c>0&&(c=1/Math.sqrt(c),e[0]=i*c,e[1]=r*c,e[2]=s*c,e[3]=o*c),e}function rhe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function KU(e,t,i,r){const s=t[0],o=t[1],c=t[2],u=t[3];return e[0]=s+r*(i[0]-s),e[1]=o+r*(i[1]-o),e[2]=c+r*(i[2]-c),e[3]=u+r*(i[3]-u),e}function she(e,t){const i=g5;let r,s,o,c,u,g;t=t||1;do r=2*i()-1,s=2*i()-1,u=r*r+s*s;while(u>=1);do o=2*i()-1,c=2*i()-1,g=o*o+c*c;while(g>=1);const b=Math.sqrt((1-u)/g);return e[0]=t*r,e[1]=t*s,e[2]=t*o*b,e[3]=t*c*b,e}function nhe(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*o+i[12]*c,e[1]=i[1]*r+i[5]*s+i[9]*o+i[13]*c,e[2]=i[2]*r+i[6]*s+i[10]*o+i[14]*c,e[3]=i[3]*r+i[7]*s+i[11]*o+i[15]*c,e}function ohe(e,t,i){const r=t[0],s=t[1],o=t[2],c=i[0],u=i[1],g=i[2],b=i[3],S=b*r+u*o-g*s,E=b*s+g*r-c*o,A=b*o+c*s-u*r,O=-c*r-u*s-g*o;return e[0]=S*b+O*-c+E*-g-A*-u,e[1]=E*b+O*-u+A*-c-S*-g,e[2]=A*b+O*-g+S*-u-E*-c,e[3]=t[3],e}function ahe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function lhe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function uhe(e,t){const i=e[0],r=e[1],s=e[2],o=e[3],c=t[0],u=t[1],g=t[2],b=t[3],S=Ro();return Math.abs(i-c)<=S*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-u)<=S*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-g)<=S*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-b)<=S*Math.max(1,Math.abs(o),Math.abs(b))}const che=UU,hhe=qU,dhe=BU,phe=HU,fhe=WU,mhe=JU,yhe=YU;Object.freeze(Object.defineProperty({__proto__:null,add:Hce,ceil:Wce,copy:qce,dist:phe,distance:HU,div:dhe,divide:BU,dot:rhe,equals:uhe,exactEquals:lhe,floor:Jce,inverse:the,len:mhe,length:JU,lerp:KU,max:Kce,min:Yce,mul:hhe,multiply:qU,negate:ehe,normalize:ihe,random:she,round:Zce,scale:Xce,scaleAndAdd:Qce,set:Bce,sqrDist:fhe,sqrLen:yhe,squaredDistance:WU,squaredLength:YU,str:ahe,sub:che,subtract:UU,transformMat4:nhe,transformQuat:ohe},Symbol.toStringTag,{value:"Module"}));const HP=new Float32Array(1);function oNe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function so(e,t,i){return Math.min(Math.max(e,t),i)}function aNe(e){return(e&e-1)==0}function lNe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function uNe(e,t,i){return e+(t-e)*i}function ghe(e){return e*Math.PI/180}function ZU(e){return 180*e/Math.PI}function cNe(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function hNe(e){return Math.acos(so(e,-1,1))}function XU(e){return Math.asin(so(e,-1,1))}function fy(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const Px=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function vhe(e){return Px.setFloat64(0,e),Px.getBigInt64(0)}function bhe(e){return Px.setBigInt64(0,e),Px.getFloat64(0)}const gI=BigInt("1000000");whe(1);function whe(e){const t=vhe(e=Math.abs(e)),i=bhe(t<=gI?gI:t-gI);return Math.abs(e-i)}function dNe(e){return QU(Math.max(-WP,Math.min(e,WP)))}function QU(e){return HP[0]=e,HP[0]}function pNe(e,t){const i=t7(e),r=XU(e[2]/i),s=Math.atan2(e[1]/i,e[0]/i);return $c(t,i,r,s),t}function fNe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(fy(t,1)&&fy(i,1)&&fy(r,1))}const WP=QU(34028234663852886e22);function M_(e){return so(w6(e),0,255)}function T_(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class _r{static blendColors(t,i,r,s=new _r){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),o=r[1];if(o==="rgb"&&s.length===3||o==="rgba"&&s.length===4){const c=s[0];if(c.charAt(c.length-1)==="%"){const u=s.map(g=>2.56*parseFloat(g));return s.length===4&&(u[3]=parseFloat(s[3])),_r.fromArray(u,i)}return _r.fromArray(s.map(u=>parseFloat(u)),i)}if(o==="hsl"&&s.length===3||o==="hsla"&&s.length===4)return _r.fromArray($U(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new _r){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const r=t.length===4?4:8,s=(1<<r)-1;let o=Number("0x"+t.substr(1));return isNaN(o)?null:(["b","g","r"].forEach(c=>{const u=o&s;o>>=r,i[c]=r===4?17*u:u}),i.a=1,i)}static fromArray(t,i=new _r){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=AU(t)?X6(t):null;return r&&_r.fromArray(r,i)||_r.fromRgb(t,i)||_r.fromHex(t,i)}static fromJSON(t){return t&&new _r([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return U(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return U(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,r,s,o;return typeof t=="string"?_r.fromString(t,this):Array.isArray(t)?_r.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(r=t.g)!=null?r:0,(s=t.b)!=null?s:0,(o=t.a)!=null?o:1),t instanceof _r||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),r=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${r.length<2?"0"+r:r}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=_r.AlphaMode.ALWAYS){const i=M_(this.r),r=M_(this.g),s=M_(this.b);return t===_r.AlphaMode.ALWAYS||this.a!==1?[i,r,s,M_(255*this.a)]:[i,r,s]}clone(){return new _r(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return U(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(T_(this.r,0,255)),this.g=Math.round(T_(this.g,0,255)),this.b=Math.round(T_(this.b,0,255)),this.a=T_(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}}_r.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(_r||(_r={}));const Je=_r;function mNe(e){}function _he(e){return()=>e}function Qe(e,t={}){var s;const i=e instanceof It?e:new It(e,t),r={type:(s=t==null?void 0:t.ignoreUnknown)==null||s?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),(t==null?void 0:t.nonNullable)!==void 0&&(r.nonNullable=t.nonNullable),_(r)}var bM;let Y2=bM=class extends $e{constructor(e){super(e),this.type="none"}clone(){return new bM({type:this.type})}};v([Qe({none:"none",stayAbove:"stay-above"})],Y2.prototype,"type",void 0),Y2=bM=v([K("esri.ground.NavigationConstraint")],Y2);let ji=class extends Re{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};v([_()],ji.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),v([_()],ji.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),v([_()],ji.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),v([_()],ji.prototype,"DECONFLICTOR_SHOW_GRID",void 0),v([_()],ji.prototype,"LABELS_SHOW_BORDER",void 0),v([_()],ji.prototype,"TEXT_SHOW_BASELINE",void 0),v([_()],ji.prototype,"TEXT_SHOW_BORDER",void 0),v([_()],ji.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),v([_()],ji.prototype,"OVERLAY_SHOW_CENTER",void 0),v([_()],ji.prototype,"SHOW_POI",void 0),v([_()],ji.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),v([_()],ji.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),v([_()],ji.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),v([_()],ji.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),v([_()],ji.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),v([_()],ji.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),v([_()],ji.prototype,"I3S_TREE_SHOW_TILES",void 0),v([_()],ji.prototype,"I3S_SHOW_MODIFICATIONS",void 0),v([_()],ji.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),v([_()],ji.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),v([_()],ji.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),v([_()],ji.prototype,"LINE_WIREFRAMES",void 0),v([_()],ji.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),ji=v([K("esri.views.3d.support.DebugFlags")],ji);const xhe=new ji;function b5(e){const t=w6(100*(1-e));return Math.max(0,Math.min(t,100))}function Eb(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var wM;let Tl=wM=class extends cg(ru){constructor(e){super(e),this.opacity=1,this.shading=!xhe.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Be;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Ie.getLogger(this.declaredClass).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))}initialize(){this.when().catch(e=>{Ie.getLogger(this.declaredClass).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",s0(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(o=>{if("write"in o){const c={};_he(o)().write(c,r)&&s.push(c)}else r&&r.messages&&r.messages.push(new de("layer:unsupported",`Layers (${o.title}, ${o.id}) of type '${o.declaredClass}' cannot be persisted in the ground`,{layer:o}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return zG(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await pe(()=>import("./ElevationQuery.d868fce7.js"),[]);or(t);const r=new i,s=this.layers.filter(JP).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await pe(()=>import("./ElevationQuery.d868fce7.js"),[]);or(t);const r=new i,s=this.layers.filter(JP).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:ve(this.surfaceColor),navigationConstraint:ve(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new wM({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,i){const r=t&&t.origin||"web-scene",s=t&&t.portal||null,o=t&&t.url||null;return pe(()=>import("./layersCreator.56ed7094.js"),["assets/layersCreator.56ed7094.js","assets/lazyLayerLoader.a3fec886.js","assets/portalLayers.c07b6118.js","assets/layersLoader.7d60eaab.js","assets/fetchService.1ee40f9a.js","assets/jsonContext.6c135492.js"]).then(({populateOperationalLayers:c})=>{or(i);const u=[];if(e.layers&&Array.isArray(e.layers)){const g={context:{origin:r,url:o,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};u.push(c(this.layers,e.layers,g))}return Ms(u)}).then(()=>{})}};function She(e){return e&&"createElevationSampler"in e}function JP(e){return e.type==="elevation"||She(e)}v([_({json:{read:!1}})],Tl.prototype,"layers",null),v([qe("layers")],Tl.prototype,"writeLayers",null),v([_({readOnly:!0})],Tl.prototype,"resourceInfo",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:gi,read:{reader:Eb,source:"transparency"},write:{writer:(e,t)=>{t.transparency=b5(e)},target:"transparency"}}})],Tl.prototype,"opacity",void 0),v([_({type:Boolean,nonNullable:!0,json:{read:!1}})],Tl.prototype,"shading",void 0),v([_({type:Je,json:{type:[gi],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Tl.prototype,"surfaceColor",void 0),v([_({type:Y2,json:{write:!0}})],Tl.prototype,"navigationConstraint",void 0),Tl=wM=v([K("esri.Ground")],Tl);const Fx=Tl;let im=class extends Be{constructor(e){super(e),this.getCollections=null}initialize(){this.own(pG(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=U(this.getCollections)?this.getCollections():null;if(ae(e))return void this.removeAll();let t=0;for(const i of e)U(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new Be(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of t)if(r){if(i(r)){const s=this.indexOf(r,e);s>=0?s!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(r);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};v([_()],im.prototype,"getCollections",void 0),v([_()],im.prototype,"getChildrenFunction",void 0),v([_()],im.prototype,"itemFilterFunction",void 0),im=v([K("esri.core.CollectionFlattener")],im);const Mb=im;function r7(e){var t,i;return!(!(e!=null&&e.loaded)||!((i=(t=Tn(e))==null?void 0:t.operations)!=null&&i.supportsEditing)||"editingEnabled"in e&&!y5(e))}const YP=Ie.getLogger("esri.support.basemapUtils");function Ihe(){return{}}function Ehe(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function Mhe(e,t){let i;if(typeof e=="string"){if(!(e in gM)){const r=Object.entries(gM).filter(([s,o])=>jt.apiKey&&!o.classic||!jt.apiKey&&o.classic&&!o.deprecated).map(([s])=>`"${s}"`).join(", ");return YP.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}t&&(i=t[e]),i||(i=Ax.fromId(e),t&&(t[e]=i))}else i=Er(Ax,e);return i!=null&&i.destroyed&&(YP.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function The(e){return new Mb({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}const KP={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Che(e){let t=null;if(typeof e=="string")if(e in KP){const i=KP[e];t=new Fx({resourceInfo:{data:{layers:[i]}}})}else Ie.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Er(Fx,e);return t}function Py(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var _M;function ZP(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function Ahe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let hh=_M=class extends Vd{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):Ahe(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points&&i.points[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new vi,i=this.hasZ,r=this.hasM,s=i?3:2,o=e[0],c=ZP(Math.min),u=ZP(Math.max);let g,b,S,E,[A,O]=o,[L,N]=o;for(let z=0,q=e.length;z<q;z++){const Z=e[z],[ee,ie]=Z;if(A=c(A,ee),O=c(O,ie),L=u(L,ee),N=u(N,ie),i&&Z.length>2){const ne=Z[2];g=c(g,ne),S=u(S,ne)}if(r&&Z.length>s){const ne=Z[s];b=c(b,ne),E=u(E,ne)}}return t.xmin=A,t.ymin=O,t.xmax=L,t.ymax=N,t.spatialReference=this.spatialReference,i?(t.zmin=g,t.zmax=S):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=b,t.mmax=E):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=ve(this.points)}addPoint(e){return Py(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:ve(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new _M(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new pt(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new pt(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Py(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};v([_({readOnly:!0})],hh.prototype,"cache",null),v([_()],hh.prototype,"extent",null),v([_({type:[[Number]],json:{write:{isRequired:!0}}})],hh.prototype,"points",void 0),v([qe("points")],hh.prototype,"writePoints",null),hh=_M=v([K("esri.geometry.Multipoint")],hh),hh.prototype.toJSON.isDefaultToJSON=!0;const Ew=hh;function XP(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice(0);if(e.type==="polyline")return e.paths.slice(0);if(e.type==="multipoint")return e.points.slice(0);if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let s=!1,o=!1;return r.forEach(c=>{c.hasZ&&(s=!0),c.hasM&&(o=!0)}),r.map(c=>{const u=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(s&&c.hasZ){const g=.5*(c.zmax-c.zmin);for(let b=0;b<u.length;b++)u[b].push(g)}if(o&&c.hasM){const g=.5*(c.mmax-c.mmin);for(let b=0;b<u.length;b++)u[b].push(g)}return u})}return null}function s7(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function eq(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function $he(e,t,i,r){const[s,o]=t,[c,u]=i[r],[g,b]=i[r+1],S=g-c,E=b-u,A=S*S+E*E,O=(s-c)*S+(o-u)*E,L=Math.min(1,Math.max(0,O/A));return e[0]=c+S*L,e[1]=u+E*L,e}function yNe(e,t,i){const r=i.rings;let s,o,c=!1,u=1/0;for(let g=0;g<r.length;g++){const b=r[g];for(let S=0,E=b.length-1;S<b.length;E=S++)s=b[S],o=b[E],s[1]>t!=o[1]>t&&e<(o[0]-s[0])*(t-s[1])/(o[1]-s[1])+s[0]&&(c=!c),u=Math.min(u,khe(e,t,s,o))}return u===0?0:(c?1:-1)*Math.sqrt(u)}function khe(e,t,i,r){let s=i[0],o=i[1],c=r[0]-s,u=r[1]-o;if(c!==0||u!==0){const g=((e-s)*c+(t-o)*u)/(c*c+u*u);g>1?(s=r[0],o=r[1]):g>0&&(s+=c*g,o+=u*g)}return c=e-s,u=t-o,c*c+u*u}function Ohe(e,t){return eq(e,t,.5)}function gNe(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=s7(e[r],e[r+1]);return i}function vNe(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let s=0;s<i-1;++s){const o=s7(e[s],e[s+1]);if(t-r<o){const c=(t-r)/o;return eq(e[s],e[s+1],c)}r+=o}return e[i-1]}function tq(e,t,i){const r=e.length;let s=0,o=0,c=0;for(let u=0;u<r;u++){const g=e[u],b=e[(u+1)%r];let S=2;s+=g[0]*b[1]-b[0]*g[1],g.length>2&&b.length>2&&i&&(o+=g[0]*b[2]-b[0]*g[2],S=3),g.length>S&&b.length>S&&t&&(c+=g[0]*b[S]-b[0]*g[S])}return s<=0&&o<=0&&c<=0}function Phe(e){const t=e.length;return t>2&&yw(e[0],e[t-1])}function bNe(e){var t,i;if("rings"in e&&(Fhe(e),e.rings.length>0&&!tq(e.rings[0],(t=e.hasM)!=null?t:!1,(i=e.hasZ)!=null?i:!1)))for(const r of e.rings)r.reverse()}function Fhe(e){if("rings"in e)for(const t of e.rings)Phe(t)||t.push(t[0].slice())}function wNe(e){return e.type!=="polygon"&&e.type!=="polyline"||Lhe(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function Lhe(e,t){const i=ua(t);if(!i)return;const r=i.valid[0],s=i.valid[1],o=s-r;for(const c of e){let u=1/0,g=-1/0;for(const S of c){const E=Rhe(S[0],r,s);u=Math.min(u,E),g=Math.max(g,E),S[0]=E}const b=g-u;o-b<b&&c.forEach(S=>{S[0]<0&&(S[0]+=o)})}}function Rhe(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function iq(e){if(!e||e.length<3)return 0;let t=0;const i=e.length-1;for(let r=0;r<i;r++)t+=(e[r][0]-e[r+1][0])*(e[r][1]+e[r+1][1]);return t+=(e[i][0]-e[0][0])*(e[i][1]+e[0][1]),-.5*t}function _Ne(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[i,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return i.length===r.length&&i.every((s,o)=>s.length===r[o].length)}function Nhe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function rq(e){var t;return e?sq(e.rings,(t=e.hasZ)!=null?t:!1):null}function sq(e,t){if(!e||!e.length)return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let o=0,c=e.length;o<c;o++){const u=Dhe(e[o],t,s);u&&r.push(u)}if(r.sort((o,c)=>{let u=o[2]-c[2];return u===0&&t&&(u=o[4]-c[4]),u}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const o=e[0]&&e[0].length?jhe(e[0],t):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function Dhe(e,t,i){let r=0,s=0,o=0,c=0,u=0;const g=e.length?e[0][0]:0,b=e.length?e[0][1]:0,S=e.length&&t?e[0][2]:0;for(let A=0;A<e.length;A++){const O=e[A],L=e[(A+1)%e.length],[N,z,q]=O,Z=N-g,ee=z-b,[ie,ne,oe]=L,me=ie-g,fe=ne-b,Ce=Z*fe-me*ee;if(c+=Ce,r+=(Z+me)*Ce,s+=(ee+fe)*Ce,t&&O.length>2&&L.length>2){const _e=q-S,Ae=oe-S,Oe=Z*Ae-me*_e;o+=(_e+Ae)*Oe,u+=Oe}N<i[0]&&(i[0]=N),N>i[1]&&(i[1]=N),z<i[2]&&(i[2]=z),z>i[3]&&(i[3]=z),t&&(q<i[4]&&(i[4]=q),q>i[5]&&(i[5]=q))}if(c>0&&(c*=-1),u>0&&(u*=-1),!c)return null;c*=.5,u*=.5;const E=[r/(6*c)+g,s/(6*c)+b,c];return t&&(i[4]===i[5]||u===0?(E[3]=(i[4]+i[5])/2,E[4]=0):(E[3]=o/(6*u)+S,E[4]=u)),E}function jhe(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,o=0,c=0,u=0;for(let g=0,b=e.length;g<b-1;g++){const S=e[g],E=e[g+1];if(S&&E){i[0]=S[0],i[1]=S[1],r[0]=E[0],r[1]=E[1],t&&S.length>2&&E.length>2&&(i[2]=S[2],r[2]=E[2]);const A=s7(i,r);if(A){s+=A;const O=Ohe(S,E);o+=A*O[0],c+=A*O[1],t&&O.length>2&&(u+=A*O[2])}}}return s>0?t?[o/s,c/s,u/s]:[o/s,c/s]:e.length?e[0]:null}const zhe=1e-6;function xNe(e){if(!e||!e.rings)return null;const{rings:t}=e;let i=0;for(let o=0;o<t.length;o++)i+=iq(t[o]);if(i<zhe)return sq(t,!1);const r=[0,0],s=t[0][0];for(let o=0;o<t.length;o++)Ghe(r,s,t[o]);return r[0]*=1/i,r[1]*=1/i,r[0]+=s[0],r[1]+=s[1],r}const Vhe=1/3;function Ghe(e,t,i){if(!e||!i||i.length<3)return null;const r=i[0],s=[0,0],o=[i[1][0]-r[0],i[1][1]-r[1]];let c;for(let b=2;b<i.length;b++)s[0]=i[b][0]-r[0],s[1]=i[b][1]-r[1],c=.5*Vhe*(s[0]*o[1]-s[1]*o[0]),e[0]+=c*(o[0]+s[0]),e[1]+=c*(o[1]+s[1]),o[0]=s[0],o[1]=s[1];const u=iq(i),g=[r[0],r[1]];return g[0]-=t[0],g[1]-=t[1],g[0]*=u,g[1]*=u,e[0]+=g[0],e[1]+=g[1],e}function nq(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function oq(e){return e.points!==void 0}function aq(e){return e.x!==void 0&&e.y!==void 0}function lq(e){return e.paths!==void 0}function uq(e){return e.rings!==void 0}function cq(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const pd=cq(Math.min),fd=cq(Math.max);function SNe(e,t){return lq(t)?Fy(e,t.paths,!1,!1):uq(t)?Fy(e,t.rings,!1,!1):oq(t)?n7(e,t.points,!1,!1,!1,!1):nq(t)?hq(e,t):(aq(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function INe(e,t){return lq(t)?Fy(e,t.paths,!0,!1):uq(t)?Fy(e,t.rings,!0,!1):oq(t)?n7(e,t.points,!0,!1,!0,!1):nq(t)?hq(e,t,!0,!1,!0,!1):(aq(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Fy(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let o,c,u,g,[b,S]=t[0][0],[E,A]=t[0][0];for(let O=0;O<t.length;O++){const L=t[O];for(let N=0;N<L.length;N++){const z=L[N],[q,Z]=z;if(b=pd(b,q),S=pd(S,Z),E=fd(E,q),A=fd(A,Z),i&&z.length>2){const ee=z[2];o=pd(o,ee),c=fd(c,ee)}if(r&&z.length>s){const ee=z[s];u=pd(o,ee),g=fd(c,ee)}}}return i?r?(e[0]=b,e[1]=S,e[2]=o,e[3]=u,e[4]=E,e[5]=A,e[6]=c,e[7]=g,e.length=8,e):(e[0]=b,e[1]=S,e[2]=o,e[3]=E,e[4]=A,e[5]=c,e.length=6,e):r?(e[0]=b,e[1]=S,e[2]=u,e[3]=E,e[4]=A,e[5]=g,e.length=6,e):(e[0]=b,e[1]=S,e[2]=E,e[3]=A,e.length=4,e)}function hq(e,t,i,r,s,o){const c=t.xmin,u=t.xmax,g=t.ymin,b=t.ymax;let S=t.zmin,E=t.zmax,A=t.mmin,O=t.mmax;return s?(S=S||0,E=E||0,o?(A=A||0,O=O||0,e[0]=c,e[1]=g,e[2]=S,e[3]=A,e[4]=u,e[5]=b,e[6]=E,e[7]=O,e):(e[0]=c,e[1]=g,e[2]=S,e[3]=u,e[4]=b,e[5]=E,e)):o?(A=A||0,O=O||0,e[0]=c,e[1]=g,e[2]=A,e[3]=u,e[4]=b,e[5]=O,e):(e[0]=c,e[1]=g,e[2]=u,e[3]=b,e)}function n7(e,t,i,r,s,o){const c=i?3:2,u=r&&o,g=i&&s;if(!t.length||!t[0].length)return null;let b,S,E,A,[O,L]=t[0],[N,z]=t[0];for(let q=0;q<t.length;q++){const Z=t[q],[ee,ie]=Z;if(O=pd(O,ee),L=pd(L,ie),N=fd(N,ee),z=fd(z,ie),g&&Z.length>2){const ne=Z[2];b=pd(b,ne),S=fd(S,ne)}if(u&&Z.length>c){const ne=Z[c];E=pd(b,ne),A=fd(S,ne)}}return s?(b=b||0,S=S||0,o?(E=E||0,A=A||0,e[0]=O,e[1]=L,e[2]=b,e[3]=E,e[4]=N,e[5]=z,e[6]=S,e[7]=A,e):(e[0]=O,e[1]=L,e[2]=b,e[3]=N,e[4]=z,e[5]=S,e)):o?(E=E||0,A=A||0,e[0]=O,e[1]=L,e[2]=E,e[3]=N,e[4]=z,e[5]=A,e):(e[0]=O,e[1]=L,e[2]=N,e[3]=z,e)}function Uhe(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function qhe(e){return e.points!==void 0}function Bhe(e){return e.x!==void 0&&e.y!==void 0}function Hhe(e){return e.paths!==void 0}function Whe(e){return e.rings!==void 0}const o7=[];function dq(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function pq(e,t,i,r,s,o){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:o}}function fq(e,t,i,r,s,o){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:o}}function mq(e,t,i,r,s,o,c,u){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:o,zmax:c,mmax:u}}function a7(e,t=!1,i=!1){return t?i?mq(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):pq(e[0],e[1],e[2],e[3],e[4],e[5]):i?fq(e[0],e[1],e[2],e[3],e[4],e[5]):dq(e[0],e[1],e[2],e[3])}function xM(e){return e?Uhe(e)?e:Bhe(e)?Yhe(e):Whe(e)?l7(e):Hhe(e)?yq(e):qhe(e)?Jhe(e):null:null}function Jhe(e){const{hasZ:t,hasM:i,points:r}=e;return a7(n7(o7,r,t!=null?t:!1,i!=null?i:!1),t,i)}function Yhe(e){const{x:t,y:i,z:r,m:s}=e,o=s!=null;return r!=null?o?mq(t,i,r,s,t,i,r,s):pq(t,i,r,t,i,r):o?fq(t,i,s,t,i,s):dq(t,i,t,i)}function l7(e){const{hasZ:t,hasM:i,rings:r}=e,s=Fy(o7,r,t!=null?t:!1,i!=null?i:!1);return s?a7(s,t,i):null}function yq(e){const{hasZ:t,hasM:i,paths:r}=e,s=Fy(o7,r,t!=null?t:!1,i!=null?i:!1);return s?a7(s,t,i):null}var K2;function QP(e){return!Array.isArray(e[0])}let Cl=K2=class extends Vd{static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let r=!1,s=!1;for(const c of t)c.hasZ&&(r=!0),c.hasM&&(s=!0);const o={rings:t.map(c=>{const u=[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]];if(r&&c.hasZ){const g=c.zmin+.5*(c.zmax-c.zmin);for(let b=0;b<u.length;b++)u[b].push(g)}if(s&&c.hasM){const g=c.mmin+.5*(c.mmax-c.mmin);for(let b=0;b<u.length;b++)u[b].push(g)}return u}),spatialReference:i};return r&&(o.hasZ=!0),s&&(o.hasM=!0),new K2(o)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){let i,r,s=null,o=null;return e&&!Array.isArray(e)?(s=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||wt.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),o=s[0]&&s[0][0],o&&(i===void 0&&r===void 0?(i=o.length>2,r=o.length>3):i===void 0?i=r?o.length>3:o.length>2:r===void 0&&(r=i?o.length>3:o.length>2)),{rings:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=rq(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new pt;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=l7(this);if(!t)return null;const i=new vi(t);return i.spatialReference=e,i}get isSelfIntersecting(){return Cue(this.rings)}writeRings(e,t){t.rings=ve(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(QP(e)){const r=[];for(let s=0,o=e.length;s<o;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new K2;return e.spatialReference=this.spatialReference,e.rings=ve(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(ae(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(U(t)!==U(i)||U(t)&&U(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,o,c,u],[g,b,S,E])=>s===g&&o===b&&(c==null&&S==null||c===S)&&(u==null&&E==null||u===E);for(let s=0;s<this.rings.length;s++){const o=this.rings[s],c=e.rings[s];if(!yw(o,c,r))return!1}return!0}contains(e){if(!e)return!1;const t=p5(e,this.spatialReference);return wU(this,U(t)?t:e)}isClockwise(e){let t;return t=QP(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,tq(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new pt(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new pt(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new pt(i[0],i[1],i[2],i[3],this.spatialReference):new pt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Py(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new pt(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new pt(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Py(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};v([_({readOnly:!0})],Cl.prototype,"cache",null),v([_({readOnly:!0})],Cl.prototype,"centroid",null),v([_({readOnly:!0})],Cl.prototype,"extent",null),v([_({readOnly:!0})],Cl.prototype,"isSelfIntersecting",null),v([_({type:[[[Number]]],json:{write:{isRequired:!0}}})],Cl.prototype,"rings",void 0),v([qe("rings")],Cl.prototype,"writeRings",null),Cl=K2=v([K("esri.geometry.Polygon")],Cl),Cl.prototype.toJSON.isDefaultToJSON=!0;const Qn=Cl;var SM;function Khe(e){return!Array.isArray(e[0])}let dh=SM=class extends Vd{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,r,s=null,o=null;return e&&!Array.isArray(e)?(s=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,r=e.hasM):s=e,s=s||[],t=t||wt.WGS84,s.length&&s[0]&&s[0][0]!=null&&typeof s[0][0]=="number"&&(s=[s]),o=s[0]&&s[0][0],o&&(i===void 0&&r===void 0?(i=o.length>2,r=!1):i===void 0?i=!r&&o.length>3:r===void 0&&(r=!i&&o.length>3)),{paths:s,spatialReference:t,hasZ:i,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=yq(this);if(!t)return null;const i=new vi(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=ve(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(Khe(e)){const r=[];for(let s=0,o=e.length;s<o;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new SM;return e.spatialReference=this.spatialReference,e.paths=ve(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new pt(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new pt(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new pt(i[0],i[1],i[2],i[3],this.spatialReference):new pt(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Py(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new pt(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new pt(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Py(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};v([_({readOnly:!0})],dh.prototype,"cache",null),v([_({readOnly:!0})],dh.prototype,"extent",null),v([_({type:[[[Number]]],json:{write:{isRequired:!0}}})],dh.prototype,"paths",void 0),v([qe("paths")],dh.prototype,"writePaths",null),dh=SM=v([K("esri.geometry.Polyline")],dh),dh.prototype.toJSON.isDefaultToJSON=!0;const Eo=dh,Zhe=$s()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),eF=$s()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function Mw(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function w5(e){return e.points!==void 0}function _5(e){return e.x!==void 0&&e.y!==void 0}function Tw(e){return e.paths!==void 0}function vc(e){return e.rings!==void 0}function kc(e){return ae(e)?null:e instanceof Vd?e:_5(e)?pt.fromJSON(e):Tw(e)?Eo.fromJSON(e):vc(e)?Qn.fromJSON(e):w5(e)?Ew.fromJSON(e):Mw(e)?vi.fromJSON(e):null}function x5(e){return e?_5(e)?"esriGeometryPoint":Tw(e)?"esriGeometryPolyline":vc(e)?"esriGeometryPolygon":Mw(e)?"esriGeometryEnvelope":w5(e)?"esriGeometryMultipoint":null:null}const Xhe={esriGeometryPoint:pt,esriGeometryPolyline:Eo,esriGeometryPolygon:Qn,esriGeometryEnvelope:vi,esriGeometryMultipoint:Ew};function Qhe(e){return e&&Xhe[e]||null}const _0={base:Vd,key:"type",typeMap:{extent:vi,multipoint:Ew,point:pt,polyline:Eo,polygon:Qn}};iu(_0);let gq=0;const Gd=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+gq++})}};return t=v([K("esri.core.Identifiable")],t),t},u7=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:gq++})}};return t=v([K("esri.core.NumericIdentifiable")],t),t};let tF=class extends Gd(class{}){};tF=v([K("esri.core.Identifiable")],tF);async function ede(e){const t="portalItem"in e?e:{portalItem:e},i=await pe(()=>import("./portalLayers.c07b6118.js"),["assets/portalLayers.c07b6118.js","assets/lazyLayerLoader.a3fec886.js","assets/layersLoader.7d60eaab.js","assets/fetchService.1ee40f9a.js","assets/jsonContext.6c135492.js"]);try{return await i.fromItem(t)}catch(r){const s=t&&t.portalItem,o=s&&s.id||"unset",c=s&&s.portal&&s.portal.url||jt.portalUrl;throw Ie.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+c+"', id: '"+o+"')",r),r}}let tde=0,Wr=class extends ss.EventedMixin(Gd(ru)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new vi(-180,-90,180,90,wt.WGS84),this.id=Date.now().toString(16)+"-layer-"+tde++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=wt.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await pe(()=>import("./arcgisLayers.2572b2d1.js"),["assets/arcgisLayers.2572b2d1.js","assets/fetchService.1ee40f9a.js","assets/lazyLayerLoader.a3fec886.js"])).fromUrl(t)}static fromPortalItem(e){return ede(e)}initialize(){this.when().catch(e=>{var t,i;ro(e)||Ie.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return is(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await mi(e,{query:{f:"json"},responseType:"json"})).data;throw new de("layer:no-attribution-data","Layer does not have attribution data")}};v([_({type:String})],Wr.prototype,"attributionDataUrl",void 0),v([_({type:vi})],Wr.prototype,"fullExtent",void 0),v([_({readOnly:!0})],Wr.prototype,"hasAttributionData",null),v([_({type:String,clonable:!1})],Wr.prototype,"id",void 0),v([_({type:Boolean,nonNullable:!0})],Wr.prototype,"legendEnabled",void 0),v([_({type:["show","hide","hide-children"]})],Wr.prototype,"listMode",void 0),v([_({type:Number,range:{min:0,max:1},nonNullable:!0})],Wr.prototype,"opacity",void 0),v([_({clonable:!1})],Wr.prototype,"parent",void 0),v([_({readOnly:!0})],Wr.prototype,"parsedUrl",null),v([_({type:Boolean})],Wr.prototype,"popupEnabled",void 0),v([_({type:Boolean})],Wr.prototype,"attributionVisible",void 0),v([_({type:wt})],Wr.prototype,"spatialReference",void 0),v([_({type:String})],Wr.prototype,"title",void 0),v([_({readOnly:!0,json:{read:!1}})],Wr.prototype,"type",void 0),v([_()],Wr.prototype,"url",void 0),v([_({type:Boolean,nonNullable:!0})],Wr.prototype,"visible",void 0),Wr=v([K("esri.layers.Layer")],Wr);const Tb=Wr;function IM(e,t,i){let r,s;if(e)for(let o=0,c=e.length;o<c;o++){if(r=e.getItemAt(o),r[t]===i)return r;if((r==null?void 0:r.type)==="group"&&(s=IM(r.layers,t,i),s))return s}}const ide=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Be;const r=c=>{c.parent&&"remove"in c.parent&&c.parent.remove(c)},s=c=>{c.parent=this,this.layerAdded(c),c.type!=="elevation"&&c.type!=="base-elevation"||Ie.getLogger(this.declaredClass).error(`Layer 'title:${c.title}, id:${c.id}' of type '${c.type}' is not supported as an operational layer and will therefore be ignored.`)},o=c=>{c.parent=null,this.layerRemoved(c)};this.layers.on("before-add",c=>r(c.item)),this.layers.on("after-add",c=>s(c.item)),this.layers.on("after-remove",c=>o(c.item))}destroy(){const i=this.layers.removeAll();for(const r of i)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(i){this._set("layers",s0(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof Tb){const o=i;o.parent===this?this.reorder(o,r):s.add(o,r)}else Lc(i)?i.then(o=>{this.destroyed||this.add(o,r)}):Ie.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;let o=s.getNextIndex(r);i.slice().forEach(c=>{c.parent!==this?(s.add(c,o),o+=1):this.reorder(c,o)})}findLayerById(i){return IM(this.layers,"id",i)}findLayerByUid(i){return IM(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return v([_()],t.prototype,"layers",null),t=v([K("esri.support.LayersMixin")],t),t};function EM(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const o=e.getItemAt(r);if(o[t]===i)return o;if((o==null?void 0:o.type)==="group"){const c=EM(o.tables,t,i);if(c)return c}}}const rde=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Be,this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&Ie.getLogger(this.declaredClass).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",s0(i,this._get("tables")))}findTableById(i){return EM(this.tables,"id",i)}findTableByUid(i){return EM(this.tables,"uid",i)}};return v([_()],t.prototype,"tables",null),t=v([K("esri.support.TablesMixin")],t),t};let Al=class extends rde(ide(ss.EventedMixin(Re))){constructor(e){super(e),this.allLayers=new Mb({getCollections:()=>{var t,i,r;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=The(this),this.basemap=null,this.editableLayers=new Mb({getCollections:()=>[this.allLayers],itemFilterFunction:r7}),this.ground=new Fx,this._basemapCache=Ihe()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),Ehe(this._basemapCache),this._basemapCache=null}castBasemap(e){return Mhe(e,this._basemapCache)}castGround(e){const t=Che(e);return ae(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};v([_({readOnly:!0,dependsOn:[]})],Al.prototype,"allLayers",void 0),v([_({readOnly:!0})],Al.prototype,"allTables",void 0),v([_({type:Ax})],Al.prototype,"basemap",void 0),v([_t("basemap")],Al.prototype,"castBasemap",null),v([_({readOnly:!0})],Al.prototype,"editableLayers",void 0),v([_({type:Fx,nonNullable:!0})],Al.prototype,"ground",void 0),v([_t("ground")],Al.prototype,"castGround",null),Al=v([K("esri.Map")],Al);const vq=Al,Ni=e=>{let t=class extends e{clone(){var g;const i=fs(rn(this),"unable to clone instance of non-accessor class"),r=i.metadatas,s=i.store,o={},c=new Map;for(const b in r){const S=r[b],E=s==null?void 0:s.originOf(b),A=S.clonable;if(S.readOnly||A===!1||E!==Ot.USER&&E!==Ot.DEFAULTS&&E!==Ot.WEB_MAP&&E!==Ot.WEB_SCENE)continue;const O=this[b];let L=null;L=typeof A=="function"?A(O):A==="reference"?O:j4(O),O!=null&&L==null||(E===Ot.DEFAULTS?c.set(b,L):o[b]=L)}const u=new(Object.getPrototypeOf(this)).constructor(o);if(c.size){const b=(g=rn(u))==null?void 0:g.store;if(b)for(const[S,E]of c)b.set(S,E,Ot.DEFAULTS)}return u}};return t=v([K("esri.core.Clonable")],t),t};let iF=class extends Ni(Re){};iF=v([K("esri.core.Clonable")],iF);var Pd;function bq(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(i!=null&&+t<i||r!=null&&+t>r)return Pd.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return Pd.INVALID_CODED_VALUE}return null}function c7(e){if(!(!e||e.type!=="range"))return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Pd||(Pd={}));const sde=Ie.getLogger("esri.support.arcadeOnDemand");let vI;function pl(){return vI||(vI=(async()=>{const e=await pe(()=>import("./arcadeUtils.6bec0d6d.js").then(function(t){return t.aw}),["assets/arcadeUtils.6bec0d6d.js","assets/number.d4116036.js","assets/arcadeTimeUtils.7055c5d7.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),vI}const ENe=(e,t,i)=>Cw.create(e,t,i,null,["$feature"]),MNe=(e,t,i)=>Cw.create(e,t,i,null,["$feature","$view"]),nde=(e,t,i,r)=>Cw.create(e,t,i,r,["$feature","$view"]);class Cw{constructor(t,i,r,s,o,c,u){this.script=t,this.evaluate=s;const g=Array.isArray(c)?c:c.fields;this.fields=g,this._syntaxTree=r,this._arcade=i,this._arcadeFeature=o,this._spatialReference=u,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,s,o,c){const{arcade:u,Feature:g,Dictionary:b}=await pl(),S=wt.fromJSON(i);let E;try{E=u.parseScript(t,c)}catch(fe){return sde.error(new de("arcade-bad-expression","Failed to parse arcade script",{script:t,error:fe})),null}const A=o.reduce((fe,Ce)=>({...fe,[Ce]:null}),{});let O=null;U(s)&&(O=new b(s),O.immutable=!0,A.$config=null);const L=u.scriptUsesGeometryEngine(E),N=L&&u.enableGeometrySupport(),z=u.scriptUsesFeatureSet(E)&&u.enableFeatureSetSupport(),q=u.scriptIsAsync(E),Z=q&&u.enableAsyncSupport(),ee={vars:A,spatialReference:S,useAsync:!!Z};await Promise.all([N,z,Z]);const ie=new Set;await u.loadDependentModules(ie,E,null,q,L);const ne=new b;ne.immutable=!1,ne.setField("scale",0);const oe=u.compileScript(E,ee),me=fe=>("$view"in fe&&fe.$view&&(ne.setField("scale",typeof fe.$view=="object"?fe.$view.scale:void 0),fe.$view=ne),O&&(fe.$config=O),oe({vars:fe,spatialReference:S}));return new Cw(t,u,E,me,new g,r,S)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}}const ode=/^([0-9])/,ade=/[^a-z0-9_\u0080-\uffff]/gi,lde=/_{2,}/g,ude=/^_/,cde=/_$/;function hde(e){return e==null?null:e.trim().replace(ade,"_").replace(lde,"_").replace(ude,"").replace(cde,"").replace(ode,"F$1")||null}const dde=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],pde=["field","normalizationField"];function rF(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(sF(dde,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)sF(pde,r,t)}}function sF(e,t,i){if(e)for(const r of e){const s=gw(r,t),o=s&&typeof s!="function"&&i.get(s);o&&tn(r,o.name,t)}}function wq(e,t){var i,r,s,o,c;if(e!=null&&((i=t==null?void 0:t.fields)==null?void 0:i.length))if("startField"in e){const u=t.get(e.startField),g=t.get(e.endField);e.startField=(r=u==null?void 0:u.name)!=null?r:null,e.endField=(s=g==null?void 0:g.name)!=null?s:null}else{const u=t.get(e.startTimeField),g=t.get(e.endTimeField);e.startTimeField=(o=u==null?void 0:u.name)!=null?o:null,e.endTimeField=(c=g==null?void 0:g.name)!=null?c:null}}const bI=new Set;function S5(e,t){return e&&t?(bI.clear(),Cb(bI,e,t),Array.from(bI).sort()):[]}function Cb(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of i)Ao(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const s of i)s!=null&&e.add(s)}}function Ao(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function TNe(e,t){var i;return ae(t)||ae(e)?[]:t.includes("*")?((i=e.fields)!=null?i:[]).map(r=>r.name):t}async function An(e,t,i){var o;if(!i)return;const{arcadeUtils:r}=await pl(),s=r.extractFieldNames(i,(o=t==null?void 0:t.fields)==null?void 0:o.map(c=>c.name));for(const c of s)Ao(e,t,c)}async function _q(e,t,i){if(i&&i!=="1=1"){const r=(await pe(()=>Promise.resolve().then(function(){return Uee}),void 0)).WhereClause.create(i,t);if(!r.isStandardized)throw new de("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Cb(e,t,r.fieldNames)}}function xq({displayField:e,fields:t}){return e||(t&&t.length?wI(t,"name-or-title")||wI(t,"unique-identifier")||wI(t,"type-or-category")||fde(t):null)}function fde(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function wI(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function CNe(e,t){var r;if(!t)return;const i=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function mde(e,t,i){i.onStatisticExpression?An(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function ANe(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(yde(e,t,s)),i.fields&&r.push(...i.fields.map(async o=>mde(e,t.fieldsIndex,o))),await Promise.all(r)}async function yde(e,t,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(o=>An(e,t.fieldsIndex,o.expression)));const s=i==null?void 0:i.content;if(Array.isArray(s))for(const o of s)o.type==="expression"&&o.expressionInfo&&r.push(An(e,t.fieldsIndex,o.expressionInfo.expression));await Promise.all(r)}async function $Ne(e,t,i){t&&(t.timeInfo&&U(i)&&i.timeExtent&&Cb(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Cb(e,t.fieldsIndex,[t.floorInfo.floorField]),U(i)&&U(i.where)&&await _q(e,t.fieldsIndex,i.where))}async function kNe(e,t,i){t&&i&&await Promise.all(i.map(r=>gde(e,t,r)))}async function gde(e,t,i){t&&i&&(i.valueExpression?await An(e,t.fieldsIndex,i.valueExpression):i.field&&Ao(e,t.fieldsIndex,i.field))}function vde(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?S5(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}function bde(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?S5(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function ONe(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i&&i.length&&await Promise.all(i.map(s=>wde(e,r,s)))}async function wde(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await An(e,t,r.expression);else{const o=r.expression.match(/{[^}]*}/g);o&&o.forEach(c=>{Ao(e,t,c.slice(1,-1))})}await _q(e,t,s)}function _de(e){const t=e.defaultValue;return t!==void 0&&Eq(e,t)?t:e.nullable?null:void 0}function Sq(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function xde(e){return e===null||Sq(e)}const h7="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function Sde(e){return e===null||h7(e)}function Iq(e){return e!=null&&typeof e=="string"}function Ide(e){return e===null||Iq(e)}function Ede(){return!0}function Eq(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?Sde:h7;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?xde:Sq;break;case"string":case"esriFieldTypeString":i=e.nullable?Ide:Iq;break;default:i=Ede}return arguments.length===1?i:i(t)}const Mde=["integer","small-integer","single","double"],Tde=new Set([...Mde,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function rl(e){return e!=null&&Tde.has(e.type)}function Ab(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function nF(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}var $b,Ly;function PNe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Cde(e,t){return e==null||e.nullable&&t===null?null:rl(e)&&!Ade(e.type,Number(t))?$b.OUT_OF_RANGE:Eq(e,t)?e.domain?bq(e.domain,t):null:Ly.INVALID_TYPE}function Ade(e,t){const i=typeof e=="string"?d7(e):e;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?h7(t)&&t>=r&&t<=s:t>=r&&t<=s}function Mq(e){return c7(e.domain)||(rl(e)?d7(e.type):void 0)}function d7(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return $de;case"esriFieldTypeInteger":case"integer":return kde;case"esriFieldTypeSingle":case"single":return Ode;case"esriFieldTypeDouble":case"double":return Pde}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})($b||($b={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Ly||(Ly={}));const $de={min:-32768,max:32767,isInteger:!0},kde={min:-2147483648,max:2147483647,isInteger:!0},Ode={min:-34e37,max:12e37,isInteger:!1},Pde={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function FNe(e,t,i){switch(e){case Pd.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Pd.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Ly.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case $b.OUT_OF_RANGE:{const{min:r,max:s}=d7(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function Fde(e,t){return!Lde(e,t,null)}function Lde(e,t,i){if(!t||!t.attributes||!e){if(U(i))for(const o of e!=null?e:[])i.add(o);return!0}const r=t.attributes;let s=!1;for(const o of e)if(!(o in r)){if(s=!0,!U(i))break;i.add(o)}return s}function Tq(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let Z2=class extends $e{constructor(e){super(e),this.type=null}};v([_({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],Z2.prototype,"type",void 0),Z2=v([K("esri.popup.content.Content")],Z2);const Ud=Z2;var MM;let vp=MM=class extends Ud{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new MM({description:this.description,displayType:this.displayType,title:this.title})}};v([_({type:String,json:{write:!0}})],vp.prototype,"description",void 0),v([_({type:["auto","preview","list"],json:{write:!0}})],vp.prototype,"displayType",void 0),v([_({type:String,json:{write:!0}})],vp.prototype,"title",void 0),v([_({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],vp.prototype,"type",void 0),vp=MM=v([K("esri.popup.content.AttachmentsContent")],vp);const kb=vp;var TM;let bp=TM=class extends Ud{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new TM({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ve(this.outFields):null})}};v([_()],bp.prototype,"creator",void 0),v([_()],bp.prototype,"destroyer",void 0),v([_()],bp.prototype,"outFields",void 0),v([_({type:["custom"],readOnly:!0})],bp.prototype,"type",void 0),bp=TM=v([K("esri.popup.content.CustomContent")],bp);const Rde=bp;var CM;let rm=CM=class extends $e{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new CM({title:this.title,expression:this.expression})}};v([_({type:String,json:{write:!0}})],rm.prototype,"title",void 0),v([_({type:String,json:{write:!0}})],rm.prototype,"expression",void 0),v([_({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],rm.prototype,"returnType",void 0),rm=CM=v([K("esri.popup.ElementExpressionInfo")],rm);const Cq=rm;var AM;let $1=AM=class extends Ud{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new AM({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};v([_({type:Cq,json:{write:!0}})],$1.prototype,"expressionInfo",void 0),v([_({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],$1.prototype,"type",void 0),$1=AM=v([K("esri.popup.content.ExpressionContent")],$1);const p7=$1,Ob=$s()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Ob.toJSON.bind(Ob);Ob.fromJSON.bind(Ob);const Sl={year:"numeric",month:"numeric",day:"numeric"},Bg={year:"numeric",month:"long",day:"numeric"},Hg={year:"numeric",month:"short",day:"numeric"},Wg={year:"numeric",month:"long",weekday:"long",day:"numeric"},Wo={hour:"numeric",minute:"numeric"},Ia={...Wo,second:"numeric"},f7={"short-date":Sl,"short-date-short-time":{...Sl,...Wo},"short-date-short-time-24":{...Sl,...Wo,hour12:!1},"short-date-long-time":{...Sl,...Ia},"short-date-long-time-24":{...Sl,...Ia,hour12:!1},"short-date-le":Sl,"short-date-le-short-time":{...Sl,...Wo},"short-date-le-short-time-24":{...Sl,...Wo,hour12:!1},"short-date-le-long-time":{...Sl,...Ia},"short-date-le-long-time-24":{...Sl,...Ia,hour12:!1},"long-month-day-year":Bg,"long-month-day-year-short-time":{...Bg,...Wo},"long-month-day-year-short-time-24":{...Bg,...Wo,hour12:!1},"long-month-day-year-long-time":{...Bg,...Ia},"long-month-day-year-long-time-24":{...Bg,...Ia,hour12:!1},"day-short-month-year":Hg,"day-short-month-year-short-time":{...Hg,...Wo},"day-short-month-year-short-time-24":{...Hg,...Wo,hour12:!1},"day-short-month-year-long-time":{...Hg,...Ia},"day-short-month-year-long-time-24":{...Hg,...Ia,hour12:!1},"long-date":Wg,"long-date-short-time":{...Wg,...Wo},"long-date-short-time-24":{...Wg,...Wo,hour12:!1},"long-date-long-time":{...Wg,...Ia},"long-date-long-time-24":{...Wg,...Ia,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Wo,"long-time":Ia},Pb=$s()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Pb.apiValues;Pb.toJSON.bind(Pb);Pb.fromJSON.bind(Pb);const Nde={ar:"ar-u-nu-latn-ca-gregory"};let $M=new WeakMap,Aq=f7["short-date-short-time"];function $q(e){const t=e||Aq;let i=$M.get(t);if(!i){const r=Dr(),s=Nde[Dr()]||r;i=new Intl.DateTimeFormat(s,t),$M.set(t,i)}return i}function pg(e){return e?f7[e]:null}function nr(e,t){return $q(t).format(e)}J6(()=>{$M=new WeakMap,Aq=f7["short-date-short-time"]});const Dde={ar:"ar-u-nu-latn"};let X2=new WeakMap,kq={};function jde(e){const t=e||kq;if(!X2.has(t)){const i=Dr(),r=Dde[Dr()]||i;X2.set(t,new Intl.NumberFormat(r,e))}return X2.get(t)}function m7(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Lo(e,t){return e===-0&&(e=0),jde(t).format(e)}J6(()=>{X2=new WeakMap,kq={}});var kM;let wp=kM=class extends $e{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new kM({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?nr(e,{...pg(this.dateFormat),...this.dateTimeFormatOptions}):Lo(e,m7(this))}formatRasterPixelValue(e){if(e.includes("-"))return e;let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map(s=>this.format(Number(s))).join(i):e}};v([Qe(Ob)],wp.prototype,"dateFormat",void 0),v([_({type:Object,json:{read:!1}})],wp.prototype,"dateTimeFormatOptions",void 0),v([_({type:Boolean,json:{write:!0}})],wp.prototype,"digitSeparator",void 0),v([_({type:gi,json:{write:!0}})],wp.prototype,"places",void 0),wp=kM=v([K("esri.popup.support.FieldInfoFormat")],wp);const Bm=wp;var OM;let ka=OM=class extends $e{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new OM({fieldName:this.fieldName,format:this.format?ve(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};v([_({type:String,json:{write:!0}})],ka.prototype,"fieldName",void 0),v([_({type:Bm,json:{write:!0}})],ka.prototype,"format",void 0),v([_({type:Boolean,json:{write:!0,default:!1}})],ka.prototype,"isEditable",void 0),v([_({type:String,json:{write:!0}})],ka.prototype,"label",void 0),v([Qe(new It({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],ka.prototype,"stringFieldOption",void 0),v([_({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],ka.prototype,"statisticType",void 0),v([_({type:String,json:{write:!0}})],ka.prototype,"tooltip",void 0),v([_({type:Boolean,json:{write:!0}})],ka.prototype,"visible",void 0),ka=OM=v([K("esri.popup.FieldInfo")],ka);const Aw=ka;var PM;let Ou=PM=class extends Ud{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new PM(ve({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};v([_({type:Object,json:{write:!0}})],Ou.prototype,"attributes",void 0),v([_({type:String,json:{write:!0}})],Ou.prototype,"description",void 0),v([_({type:[Aw]})],Ou.prototype,"fieldInfos",void 0),v([qe("fieldInfos")],Ou.prototype,"writeFieldInfos",null),v([_({type:String,json:{write:!0}})],Ou.prototype,"title",void 0),v([_({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Ou.prototype,"type",void 0),Ou=PM=v([K("esri.popup.content.FieldsContent")],Ou);const Ry=Ou;let _p=class extends $e{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};v([_({type:String,json:{write:!0}})],_p.prototype,"altText",void 0),v([_({type:String,json:{write:!0}})],_p.prototype,"caption",void 0),v([_({type:String,json:{write:!0}})],_p.prototype,"title",void 0),v([_({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],_p.prototype,"type",void 0),_p=v([K("esri.popup.content.mixins.MediaInfo")],_p);const y7=_p;var FM;let sm=FM=class extends Re{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new FM({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};v([_()],sm.prototype,"fieldName",void 0),v([_()],sm.prototype,"tooltip",void 0),v([_()],sm.prototype,"value",void 0),sm=FM=v([K("esri.popup.content.support.ChartMediaInfoValueSeries")],sm);const Oq=sm;var LM;let xp=LM=class extends $e{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new LM({fields:ve(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};v([_({type:[String],json:{write:!0}})],xp.prototype,"fields",void 0),v([_({type:String,json:{write:!0}})],xp.prototype,"normalizeField",void 0),v([_({type:[Oq],json:{read:!1}})],xp.prototype,"series",void 0),v([_({type:String,json:{write:!0}})],xp.prototype,"tooltipField",void 0),xp=LM=v([K("esri.popup.content.support.ChartMediaInfoValue")],xp);const zde=xp;let k1=class extends y7{constructor(e){super(e),this.type=null,this.value=null}};v([_({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],k1.prototype,"type",void 0),v([_({type:zde,json:{write:!0}})],k1.prototype,"value",void 0),k1=v([K("esri.popup.content.mixins.ChartMediaInfo")],k1);const I5=k1,E5=$s()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var RM;let Q2=RM=class extends I5{constructor(e){super(e),this.type="bar-chart"}clone(){return new RM({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([_({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:E5.write}})],Q2.prototype,"type",void 0),Q2=RM=v([K("esri.popup.content.BarChartMediaInfo")],Q2);const Pq=Q2;var NM;let e3=NM=class extends I5{constructor(e){super(e),this.type="column-chart"}clone(){return new NM({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([_({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:E5.write}})],e3.prototype,"type",void 0),e3=NM=v([K("esri.popup.content.ColumnChartMediaInfo")],e3);const Fq=e3;var DM;let O1=DM=class extends $e{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new DM({linkURL:this.linkURL,sourceURL:this.sourceURL})}};v([_({type:String,json:{write:!0}})],O1.prototype,"linkURL",void 0),v([_({type:String,json:{write:!0}})],O1.prototype,"sourceURL",void 0),O1=DM=v([K("esri.popup.content.support.ImageMediaInfoValue")],O1);const Vde=O1;var jM;let nm=jM=class extends y7{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new jM({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};v([_({type:Number,json:{write:!0}})],nm.prototype,"refreshInterval",void 0),v([_({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],nm.prototype,"type",void 0),v([_({type:Vde,json:{write:!0}})],nm.prototype,"value",void 0),nm=jM=v([K("esri.popup.content.ImageMediaInfo")],nm);const Lq=nm;var zM;let t3=zM=class extends I5{constructor(e){super(e),this.type="line-chart"}clone(){return new zM({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([_({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:E5.write}})],t3.prototype,"type",void 0),t3=zM=v([K("esri.popup.content.LineChartMediaInfo")],t3);const Rq=t3;var VM;let i3=VM=class extends I5{constructor(e){super(e),this.type="pie-chart"}clone(){return new VM({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([_({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:E5.write}})],i3.prototype,"type",void 0),i3=VM=v([K("esri.popup.content.PieChartMediaInfo")],i3);const Nq=i3,Dq={base:y7,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Pq,"column-chart":Fq,"line-chart":Rq,"pie-chart":Nq,image:Lq}};var GM;let Oa=GM=class extends Ud{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?Lq.fromJSON(t):t.type==="barchart"?Pq.fromJSON(t):t.type==="columnchart"?Fq.fromJSON(t):t.type==="linechart"?Rq.fromJSON(t):t.type==="piechart"?Nq.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new GM(ve({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};v([_()],Oa.prototype,"activeMediaInfoIndex",void 0),v([_({type:Object,json:{write:!0}})],Oa.prototype,"attributes",void 0),v([_({type:String,json:{write:!0}})],Oa.prototype,"description",void 0),v([_({types:[Dq]})],Oa.prototype,"mediaInfos",void 0),v([Ne("mediaInfos")],Oa.prototype,"readMediaInfos",null),v([qe("mediaInfos")],Oa.prototype,"writeMediaInfos",null),v([_({type:String,json:{write:!0}})],Oa.prototype,"title",void 0),v([_({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Oa.prototype,"type",void 0),Oa=GM=v([K("esri.popup.content.MediaContent")],Oa);const Fb=Oa;var UM;let P1=UM=class extends $e{constructor(e){super(e),this.field=null,this.order=null}clone(){return new UM({field:this.field,order:this.order})}};v([_({type:String,json:{write:!0}})],P1.prototype,"field",void 0),v([_({type:["asc","desc"],json:{write:!0}})],P1.prototype,"order",void 0),P1=UM=v([K("esri.popup.support.RelatedRecordsInfoFieldOrder")],P1);const g7=P1;let $l=class extends Ni(Ud){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};v([_({type:String,json:{write:!0}})],$l.prototype,"description",void 0),v([_({type:Number,json:{type:gi,write:!0}})],$l.prototype,"displayCount",void 0),v([_({type:["list"],json:{write:!0}})],$l.prototype,"displayType",void 0),v([_({type:[g7],json:{write:!0}})],$l.prototype,"orderByFields",void 0),v([_({type:Number,json:{type:gi,write:!0}})],$l.prototype,"relationshipId",void 0),v([_({type:String,json:{write:!0}})],$l.prototype,"title",void 0),v([_({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],$l.prototype,"type",void 0),$l=v([K("esri.popup.content.RelationshipContent")],$l);const Lx=$l;var qM;let F1=qM=class extends Ud{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new qM({text:this.text})}};v([_({type:String,json:{write:!0}})],F1.prototype,"text",void 0),v([_({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],F1.prototype,"type",void 0),F1=qM=v([K("esri.popup.content.TextContent")],F1);const Ny=F1,Gde={base:null,key:"type",typeMap:{attachment:kb,media:Fb,text:Ny,expression:p7,field:Ry,relationship:Lx}};var BM;let Sp=BM=class extends $e{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new BM({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([_({type:String,json:{write:!0}})],Sp.prototype,"name",void 0),v([_({type:String,json:{write:!0}})],Sp.prototype,"title",void 0),v([_({type:String,json:{write:!0}})],Sp.prototype,"expression",void 0),v([_({type:["string","number"],json:{write:!0}})],Sp.prototype,"returnType",void 0),Sp=BM=v([K("esri.popup.ExpressionInfo")],Sp);const jq=Sp;var HM;let L1=HM=class extends $e{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new HM({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};v([_({type:Boolean,json:{write:!0}})],L1.prototype,"returnTopmostRaster",void 0),v([_({type:Boolean,json:{write:!0}})],L1.prototype,"showNoDataRecords",void 0),L1=HM=v([K("esri.popup.LayerOptions")],L1);const Ude=L1;var WM;let R1=WM=class extends $e{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new WM({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ve(this.orderByFields):null})}};v([_({type:Boolean,json:{write:!0}})],R1.prototype,"showRelatedRecords",void 0),v([_({type:[g7],json:{write:!0}})],R1.prototype,"orderByFields",void 0),R1=WM=v([K("esri.popup.RelatedRecordsInfo")],R1);const qde=R1;var JM;let Pa=JM=class extends Gd(Re){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new JM({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};v([_()],Pa.prototype,"active",void 0),v([_()],Pa.prototype,"className",void 0),v([_()],Pa.prototype,"disabled",void 0),v([_()],Pa.prototype,"id",void 0),v([_()],Pa.prototype,"indicator",void 0),v([_()],Pa.prototype,"title",void 0),v([_()],Pa.prototype,"type",void 0),v([_()],Pa.prototype,"visible",void 0),Pa=JM=v([K("esri.support.actions.ActionBase")],Pa);const fg=Pa;var YM;let r3=YM=class extends fg{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new YM({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};v([_()],r3.prototype,"image",void 0),r3=YM=v([K("esri.support.Action.ActionButton")],r3);const x0=r3;var KM;let N1=KM=class extends fg{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new KM({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};v([_()],N1.prototype,"image",void 0),v([_()],N1.prototype,"value",void 0),N1=KM=v([K("esri.support.Action.ActionToggle")],N1);const v7=N1,Bde="esri.PopupTemplate",Hde=Ie.getLogger(Bde),Jg="relationships/",oF="expression/",Wde=Be.ofType({key:"type",defaultKeyValue:"button",base:fg,typeMap:{button:x0,toggle:v7}}),Jde={base:Ud,key:"type",typeMap:{media:Fb,custom:Rde,text:Ny,attachments:kb,fields:Ry,expression:p7,relationship:Lx}},Yde=["attachments","fields","media","text","expression","relationship"];let Jr=class extends Ni($e){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(t=>iu(Jde,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||Lc(e)?e:(Hde.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,i):this._readPopupInfo(t)}writeContent(e,t,i,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(s=>Yde.includes(s.type)).map(s=>s&&s.toJSON(r)),t.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(t):s.type==="media"?this._writeMediaContent(s,t):s.type==="text"?this._writeTextContent(s,t):s.type==="relationship"&&this._writeRelationshipContent(s,t)})):t.description=e}writeFieldInfos(e,t,i,r){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const c=o?o.filter(g=>g.type==="fields"):[],u=c.length&&c.every(g=>{var b;return(b=g.fieldInfos)==null?void 0:b.length});t.fieldInfos=e.filter(Boolean).map(g=>{const b=g.toJSON(r);return u&&(b.visible=!1),b})}if(o)for(const c of o)c.type==="fields"&&this._writeFieldsContent(c,t)}writeLayerOptions(e,t,i,r){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),Cb(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=ve(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(r=>{const s=t.fieldInfos.find(o=>o.fieldName.toLowerCase()===r.fieldName.toLowerCase());s?s.visible=!0:t.fieldInfos.push(r)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){var s,o;const i=((s=e.orderByFields)==null?void 0:s.map(c=>this._toFieldOrderJSON(c,e.relationshipId)))||[],r=[...((o=t.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];t.relatedRecordsInfo={showRelatedRecords:!0,...(r==null?void 0:r.length)&&{orderByFields:r}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=ve(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements(e,t,i){const r={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!t||r.mediaInfos||(s.mediaInfos=t,r.mediaInfos=!0),Fb.fromJSON(s)):s.type==="text"?(s.text||!e||r.description||(s.text=e,r.description=!0),Ny.fromJSON(s)):s.type==="attachments"?kb.fromJSON(s):s.type==="fields"?Ry.fromJSON(s):s.type==="expression"?p7.fromJSON(s):s.type==="relationship"?Lx.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:i}=e;if(!(t!=null&&t.startsWith(Jg)))return null;const r=t.replace(Jg,"").split("/");if(r.length!==2)return null;const s=parseInt(r[0],10),o=r[1];return typeof s=="number"&&o?Lx.fromJSON({relationshipId:s,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(e,t){const{order:i,field:r}=e;return{field:`${Jg}${t}/${r}`,order:i}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i,relatedRecordsInfo:r={showRelatedRecords:!1}}){const s=[];e?s.push(new Ny({text:e})):s.push(new Ry),Array.isArray(t)&&t.length&&s.push(Fb.fromJSON({mediaInfos:t})),i&&s.push(kb.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:c}=r;return o&&(c==null?void 0:c.length)&&c.forEach(u=>{const g=this._toRelationshipContent(u);g&&s.push(g)}),s.length?s:e}_getContentElementFields(e){var i;const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields((i=e.fieldInfos)!=null?i:this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((s,o)=>[...s,...this._getMediaInfoFields(o)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:r}=e,s=r||{},{fields:o,normalizeField:c,tooltipField:u,sourceURL:g,linkURL:b}=s,S=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(g),...this._extractFieldNames(b),...o!=null?o:[]];return c&&S.push(c),u&&S.push(u),S}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,r)=>[...i,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(r=>An(e,t,r.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.startsWith(Jg)&&!t.startsWith(oF)):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:r}=e,s=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const r=/\{(\w+):.+\}/,s=i.filter(o=>!(o.indexOf(`{${Jg}`)===0||o.indexOf(`{${oF}`)===0)).map(o=>o.replace(r,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};v([_({type:Wde})],Jr.prototype,"actions",void 0),v([_()],Jr.prototype,"content",void 0),v([_t("content")],Jr.prototype,"castContent",null),v([Ne("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Jr.prototype,"readContent",null),v([qe("content",{popupElements:{type:Be.ofType(Gde)},showAttachments:{type:Boolean},mediaInfos:{type:Be.ofType(Dq)},description:{type:String},relatedRecordsInfo:{type:qde}})],Jr.prototype,"writeContent",null),v([_({type:[jq],json:{write:!0}})],Jr.prototype,"expressionInfos",void 0),v([_({type:[Aw]})],Jr.prototype,"fieldInfos",void 0),v([qe("fieldInfos")],Jr.prototype,"writeFieldInfos",null),v([_({type:Ude})],Jr.prototype,"layerOptions",void 0),v([qe("layerOptions")],Jr.prototype,"writeLayerOptions",null),v([_({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Jr.prototype,"lastEditInfoEnabled",void 0),v([_()],Jr.prototype,"outFields",void 0),v([_()],Jr.prototype,"overwriteActions",void 0),v([_()],Jr.prototype,"returnGeometry",void 0),v([_({json:{type:String}})],Jr.prototype,"title",void 0),v([qe("title")],Jr.prototype,"writeTitle",null),Jr=v([K("esri.PopupTemplate")],Jr);const $w=Jr,aF=new It({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Kde=0,om=class extends $e{constructor(e){super(e),this.id="sym"+Kde++,this.type=null,this.color=new Je([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};v([_({type:aF.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:aF.write}}})],om.prototype,"type",void 0),v([_({type:Je,json:{write:{allowNull:!0}}})],om.prototype,"color",void 0),v([Ne("color")],om.prototype,"readColor",null),om=v([K("esri.symbols.Symbol")],om);const no=om;var ZM;let ph=ZM=class extends no{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const s=r.map(o=>{const c=o.valueExpressionInfo;return An(e,t,c.expression)});await Promise.all(s)}}}clone(){return new ZM({data:ve(this.data)})}hash(){return y6(JSON.stringify(this.data)).toString()}};v([_({json:{write:!1}})],ph.prototype,"color",void 0),v([_({json:{write:!0}})],ph.prototype,"data",void 0),v([Ne("data",["symbol"])],ph.prototype,"readData",null),v([qe("data",{})],ph.prototype,"writeData",null),v([Qe({CIMSymbolReference:"cim"},{readOnly:!0})],ph.prototype,"type",void 0),ph=ZM=v([K("esri.symbols.CIMSymbol")],ph);const kw=ph;let am=class extends $e{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};v([_({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],am.prototype,"enabled",void 0),v([qe("enabled")],am.prototype,"writeEnabled",null),v([_({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],am.prototype,"type",void 0),am=v([K("esri.symbols.Symbol3DLayer")],am);const du=am,Zde=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Xde="screenUtils.toPt: input not recognized!",zq=96;function Is(e){return e?e/72*zq:0}function $o(e){return e?72*e/zq:0}function Bt(e){if(typeof e=="string"){const t=e.match(Zde);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",o=r==="px"?$o(i):i;return s?-o:o}return console.warn(Xde),null}return e}function Xs(e=0,t=0){return{x:e,y:t}}function Qde(e=0,t=0){return[e,t]}function LNe(e=0,t=0,i=0){return[e,t,i]}function RNe(e){return e}function NNe(e){return e}function DNe(e){return e}function jNe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function epe(e,t){const i=t.transparency!=null?Eb(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new Je([r[0]||0,r[1]||0,r[2]||0,i]):null}function tpe(e,t){t.color=e.toJSON().slice(0,3);const i=b5(e.a);i!==0&&(t.transparency=i)}const qd={type:Je,json:{type:[gi],default:null,read:{source:["color","transparency"],reader:epe},write:{target:{color:{type:[gi]},transparency:{type:gi}},writer:tpe}}},ou={type:Number,cast:Bt,json:{write:!0}};let Ip=class extends $e{constructor(e){super(e),this.color=new Je([0,0,0,1]),this.extensionLength=0,this.size=$o(1)}clone(){}cloneProperties(){return{color:ve(this.color),size:this.size,extensionLength:this.extensionLength}}};v([_({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Ip.prototype,"type",void 0),v([_(qd)],Ip.prototype,"color",void 0),v([_({...ou,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Ip.prototype,"extensionLength",void 0),v([_(ou)],Ip.prototype,"size",void 0),Ip=v([K("esri.symbols.edges.Edges3D")],Ip);const b7=Ip;var XM;let s3=XM=class extends b7{constructor(e){super(e),this.type="sketch"}clone(){return new XM(this.cloneProperties())}};v([Qe({sketch:"sketch"},{readOnly:!0})],s3.prototype,"type",void 0),s3=XM=v([K("esri.symbols.edges.SketchEdges3D")],s3);const ipe=s3;var QM;let n3=QM=class extends b7{constructor(e){super(e),this.type="solid"}clone(){return new QM(this.cloneProperties())}};v([Qe({solid:"solid"},{readOnly:!0})],n3.prototype,"type",void 0),n3=QM=v([K("esri.symbols.support.SolidEdges3D")],n3);const rpe=n3,Vq={types:{key:"type",base:b7,typeMap:{solid:rpe,sketch:ipe}},json:{write:!0}};var eT;let ko=eT=class extends $e{constructor(e){super(e),this.color=null}clone(){const e={color:U(this.color)?this.color.clone():null};return new eT(e)}};v([_(qd)],ko.prototype,"color",void 0),ko=eT=v([K("esri.symbols.support.Symbol3DMaterial")],ko);var tT;let fh=tT=class extends du{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new tT({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:U(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};v([Qe({Extrude:"extrude"},{readOnly:!0})],fh.prototype,"type",void 0),v([_({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],fh.prototype,"size",void 0),v([_({type:ko,json:{write:!0}})],fh.prototype,"material",void 0),v([_({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],fh.prototype,"castShadows",void 0),v([_(Vq)],fh.prototype,"edges",void 0),fh=tT=v([K("esri.symbols.ExtrudeSymbol3DLayer")],fh);const Gq=fh;let D1=class extends no{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};v([Qe({esriSLS:"simple-line"},{readOnly:!0})],D1.prototype,"type",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],D1.prototype,"width",void 0),D1=v([K("esri.symbols.LineSymbol")],D1);const spe=D1,npe=["begin","end","begin-end"],Uq=["arrow","circle","square","diamond","cross","x"];var iT;let kl=iT=class extends $e{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new iT({color:ve(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};v([_({type:["begin","end","begin-end"],json:{write:!0}})],kl.prototype,"placement",void 0),v([Qe({"line-marker":"line-marker"},{readOnly:!0}),_({json:{origins:{"web-map":{write:!1}}}})],kl.prototype,"type",void 0),v([_({type:Uq})],kl.prototype,"style",void 0),v([qe("style")],kl.prototype,"writeStyle",null),v([_({type:Je,value:null,json:{write:{allowNull:!0}}})],kl.prototype,"color",null),v([Ne("color")],kl.prototype,"readColor",null),v([qe("color")],kl.prototype,"writeColor",null),kl=iT=v([K("esri.symbols.LineSymbolMarker")],kl);const ope=kl;var rT;const _I=new It({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Pu=rT=class extends spe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,o){if(e&&typeof e!="string")return e;const c={};return e!=null&&(c.style=e),t!=null&&(c.color=t),i!=null&&(c.width=Bt(i)),r!=null&&(c.cap=r),s!=null&&(c.join=s),o!=null&&(c.miterLimit=Bt(o)),c}clone(){var e;return new rT({color:ve(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};v([Qe({esriSLS:"simple-line"},{readOnly:!0})],Pu.prototype,"type",void 0),v([_({type:_I.apiValues,json:{read:_I.read,write:_I.write}})],Pu.prototype,"style",void 0),v([_({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],Pu.prototype,"cap",void 0),v([_({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],Pu.prototype,"join",void 0),v([_({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":ope}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Pu.prototype,"marker",void 0),v([_({type:Number,json:{read:!1,write:!1}})],Pu.prototype,"miterLimit",void 0),Pu=rT=v([K("esri.symbols.SimpleLineSymbol")],Pu);const sn=Pu;var ape=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"}));let j1=class extends no{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};v([_({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":sn}},json:{default:null,write:!0}})],j1.prototype,"outline",void 0),v([_({type:["simple-fill","picture-fill"],readOnly:!0})],j1.prototype,"type",void 0),j1=v([K("esri.symbols.FillSymbol")],j1);const qq=j1;let o3=class extends $e{constructor(e){super(e)}clone(){}};v([_({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],o3.prototype,"type",void 0),o3=v([K("esri.symbols.patterns.LinePattern3D")],o3);const Bq=o3,lpe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var sT;const upe=$s()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let z1=sT=class extends Bq{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new sT(e)}};v([_({type:["style"]})],z1.prototype,"type",void 0),v([Qe(upe),_({type:lpe})],z1.prototype,"style",void 0),z1=sT=v([K("esri.symbols.patterns.LineStylePattern3D")],z1);const w7=z1;let a3=class extends $e{constructor(e){super(e)}clone(){}};v([_({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],a3.prototype,"type",void 0),a3=v([K("esri.symbols.patterns.Pattern3D")],a3);const Hq=a3,cpe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var nT;let V1=nT=class extends Hq{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new nT(e)}};v([_({type:["style"]})],V1.prototype,"type",void 0),v([_({type:cpe,json:{read:!0,write:!0}})],V1.prototype,"style",void 0),V1=nT=v([K("esri.symbols.patterns.StylePattern3D")],V1);const Wq=V1,hpe={types:{key:"type",base:Hq,typeMap:{style:Wq}},json:{write:!0}},Jq={types:{key:"type",base:Bq,typeMap:{style:w7}},json:{write:!0}},Uv=new Je("white");new Je("black");const dpe=new Je([255,255,255,0]);function ppe(e){return e.r===0&&e.g===0&&e.b===0}var oT;let qv=oT=class extends ko{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:U(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new oT(e)}};v([Qe({multiply:"multiply",replace:"replace",tint:"tint"})],qv.prototype,"colorMixMode",void 0),qv=oT=v([K("esri.symbols.support.Symbol3DFillMaterial")],qv);function Oc(e=bpe){return[e[0],e[1],e[2],e[3]]}function zNe(e){return[e[0],e[1],e[2],e[3]]}function _7(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function fpe(e,t,i,r,s=Oc()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function VNe(e,t=Oc()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function GNe(e,t){return new vi({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function UNe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function qNe(e,t,i){if(ae(t))_7(i,e);else if("length"in t)aT(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}}function xI(e,t,i=e){const r=t.length;let s=e[0],o=e[1],c=e[2],u=e[3];for(let g=0;g<r;g++){const b=t[g];s=Math.min(s,b[0]),o=Math.min(o,b[1]),c=Math.max(c,b[0]),u=Math.max(u,b[1])}return i[0]=s,i[1]=o,i[2]=c,i[3]=u,i}function BNe(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function mpe(e){return ae(e)||e[0]>=e[2]?0:e[2]-e[0]}function ype(e){return e[1]>=e[3]?0:e[3]-e[1]}function HNe(e){return mpe(e)*ype(e)}function WNe(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function JNe(e,t){return Yq(e,t[0],t[1])}function YNe(e,t){return Yq(e,t.x,t.y)}function Yq(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function KNe(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function ZNe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function gpe(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function XNe(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function vpe(e){return e?_7(e,lF):Oc(lF)}function aT(e){return e!=null&&e.length===4}function QNe(e,t){return aT(e)&&aT(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const lF=[1/0,1/0,-1/0,-1/0],bpe=[0,0,0,0];function x7(e=Ipe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function S7(e,t,i,r,s,o,c=x7()){return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=s,c[5]=o,c}function eDe(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new vi(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function tDe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function iDe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function rDe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function sDe(e,t,i=0,r=t.length/3){let s=e[0],o=e[1],c=e[2],u=e[3],g=e[4],b=e[5];for(let S=0;S<r;S++)s=Math.min(s,t[i+3*S]),o=Math.min(o,t[i+3*S+1]),c=Math.min(c,t[i+3*S+2]),u=Math.max(u,t[i+3*S]),g=Math.max(g,t[i+3*S+1]),b=Math.max(b,t[i+3*S+2]);e[0]=s,e[1]=o,e[2]=c,e[3]=u,e[4]=g,e[5]=b}function SI(e,t,i){const r=t.length;let s=e[0],o=e[1],c=e[2],u=e[3],g=e[4],b=e[5];if(i)for(let S=0;S<r;S++){const E=t[S];s=Math.min(s,E[0]),o=Math.min(o,E[1]),c=Math.min(c,E[2]),u=Math.max(u,E[0]),g=Math.max(g,E[1]),b=Math.max(b,E[2])}else for(let S=0;S<r;S++){const E=t[S];s=Math.min(s,E[0]),o=Math.min(o,E[1]),u=Math.max(u,E[0]),g=Math.max(g,E[1])}e[0]=s,e[1]=o,e[2]=c,e[3]=u,e[4]=g,e[5]=b}function nDe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function Ow(e){return e[0]>=e[3]?0:e[3]-e[0]}function Pw(e){return e[1]>=e[4]?0:e[4]-e[1]}function Fw(e){return e[2]>=e[5]?0:e[5]-e[2]}function oDe(e){const t=Ow(e),i=Fw(e),r=Pw(e);return Math.sqrt(t*t+i*i+r*r)}function aDe(e,t=[0,0,0]){return t[0]=e[0]+Ow(e)/2,t[1]=e[1]+Pw(e)/2,t[2]=e[2]+Fw(e)/2,t}function lDe(e,t=[0,0,0]){return t[0]=Ow(e),t[1]=Pw(e),t[2]=Fw(e),t}function uDe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function wpe(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function cDe(e,t){return!!ae(t)||wpe(e,t)}function hDe(e,t,i,r,s=e){return s[0]=e[0]+t,s[1]=e[1]+i,s[2]=e[2]+r,s[3]=e[3]+t,s[4]=e[4]+i,s[5]=e[5]+r,s}function dDe(e,t,i=e){const r=e[0]+Ow(e)/2,s=e[1]+Pw(e)/2,o=e[2]+Fw(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=s+(e[1]-s)*t,i[2]=o+(e[2]-o)*t,i[3]=r+(e[3]-r)*t,i[4]=s+(e[4]-s)*t,i[5]=o+(e[5]-o)*t,i}function pDe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function fDe(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function mDe(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function _pe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function xpe(e){return e?_pe(e,uF):x7(uF)}function yDe(e,t){return t||(t=Oc()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function gDe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Spe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function lT(e){return e.length===6}function vDe(e){return Ow(e)===0&&Pw(e)===0&&Fw(e)===0}function bDe(e,t,i){if(ae(e)||ae(t))return e===t;if(!lT(e)||!lT(t))return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const uF=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Ipe=[0,0,0,0,0,0];x7();function wDe(e,{isPrimitive:t,width:i,depth:r,height:s}){const o=t?10:1;if(i==null&&s==null&&r==null)return[o*e[0],o*e[1],o*e[2]];const c=Xn(i,r,s);let u;for(let g=0;g<3;g++){const b=c[g];if(b!=null){u=b/e[g];break}}for(let g=0;g<3;g++)c[g]==null&&(c[g]=e[g]*u);return c}const Epe=S7(-.5,-.5,-.5,.5,.5,.5),Mpe=S7(-.5,-.5,0,.5,.5,1),Tpe=S7(-.5,-.5,0,.5,.5,.5);function _De(e){switch(e){case"sphere":case"cube":case"diamond":return Epe;case"cylinder":case"cone":case"inverted-cone":return Mpe;case"tetrahedron":return Tpe;default:return}}const I7=["butt","square","round"],Cpe=[...I7,"none"],Kq=["miter","bevel","round"];var uT;let Ep=uT=class extends $e{constructor(e){super(e),this.color=new Je([0,0,0,1]),this.size=$o(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:U(this.color)?this.color.clone():null,size:this.size,pattern:U(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new uT(e)}};v([_(qd)],Ep.prototype,"color",void 0),v([_(ou)],Ep.prototype,"size",void 0),v([_(Jq)],Ep.prototype,"pattern",void 0),v([_({type:I7,json:{default:"butt",write:{overridePolicy(){return{enabled:U(this.pattern)}}}}})],Ep.prototype,"patternCap",void 0),Ep=uT=v([K("esri.symbols.support.Symbol3DOutline")],Ep);var l3;let Fu=l3=class extends du{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:U(this.edges)?this.edges.clone():null,enabled:this.enabled,material:U(this.material)?this.material.clone():null,pattern:U(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:U(this.outline)?this.outline.clone():null};return new l3(e)}static fromSimpleFillSymbol(e){var r,s,o,c,u,g;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new w7({style:e.outline.style}):null,i={size:(s=(r=e.outline)==null?void 0:r.width)!=null?s:0,color:((c=(o=e.outline)==null?void 0:o.color)!=null?c:Uv).clone(),pattern:t};return t&&((u=e.outline)==null?void 0:u.cap)&&(i.patternCap=e.outline.cap),new l3({material:new qv({color:((g=e.color)!=null?g:dpe).clone()}),pattern:e.style&&e.style!=="solid"?new Wq({style:e.style}):null,outline:i})}};v([Qe({Fill:"fill"},{readOnly:!0})],Fu.prototype,"type",void 0),v([_({type:qv,json:{write:!0}})],Fu.prototype,"material",void 0),v([_(hpe)],Fu.prototype,"pattern",void 0),v([_({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Fu.prototype,"castShadows",void 0),v([_({type:Ep,json:{write:!0}})],Fu.prototype,"outline",void 0),v([_(Vq)],Fu.prototype,"edges",void 0),Fu=l3=v([K("esri.symbols.FillSymbol3DLayer")],Fu);const Lw=Fu,Ape=["none","underline","line-through"],$pe=["normal","italic","oblique"],kpe=["normal","lighter","bold","bolder"],Zq={type:Number,cast:e=>{const t=ra(e);return t===0?1:so(t,.1,4)},nonNullable:!0},Ope=["left","right","center"],Ppe=["baseline","top","middle","bottom"],Xq={type:Ope,nonNullable:!0},Qq={type:Ppe,nonNullable:!0};var cT;let Lu=cT=class extends $e{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Bt(e)}clone(){return new cT({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};v([_({type:Ape,json:{default:"none",write:!0}})],Lu.prototype,"decoration",void 0),v([_({type:String,json:{write:!0}})],Lu.prototype,"family",void 0),v([_({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Lu.prototype,"size",void 0),v([_t("size")],Lu.prototype,"castSize",null),v([_({type:$pe,json:{default:"normal",write:!0}})],Lu.prototype,"style",void 0),v([_({type:kpe,json:{default:"normal",write:!0}})],Lu.prototype,"weight",void 0),Lu=cT=v([K("esri.symbols.Font")],Lu);const M5=Lu;function Fd(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=na(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=L6(e,t.portalItem.itemUrl);r!=null&&Fpe.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return hT(e,t&&t.portal)}function Rw(e,t,i=Lb.YES){if(e==null)return e;!Co(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=na(e);if(t){const s=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(s){const o=hT(s,t.portal),c=hT(r,t.portal);r=L6(c,o,o),r!=null&&r!==c&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=tB(r,t==null?void 0:t.portal),Co(r)&&(r=ll(r)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!Co(r)&&!w0(r)&&i===Lb.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function E7(e,t,i){return Fd(e,i)}function h0(e,t,i,r){const s=Rw(e,r);s!==void 0&&(t[i]=s)}const eB=/\/items\/([^\/]+)\/resources\/(.*)/,Fpe=/^\.\/resources\//;function Lpe(e){var t,i,r;return(r=(i=(t=e==null?void 0:e.match(eB))!=null?t:null)==null?void 0:i[1])!=null?r:null}function Rpe(e){var c;const t=(c=e==null?void 0:e.match(eB))!=null?c:null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:u,extension:g}=AP(i);return{prefix:null,filename:u,extension:g}}const{path:s,extension:o}=AP(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:o}}function tB(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?oM(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function hT(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=O6();return $y(r,`${r.scheme}://${i}`)?oM(e,t.portalHostname,i):oM(e,i,t.portalHostname)}var Lb;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Lb||(Lb={}));const xDe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Lb},ensureMainOnlineDomain:tB,fromJSON:Fd,itemIdFromResourceUrl:Lpe,prefixAndFilenameFromResourceUrl:Rpe,read:E7,toJSON:Rw,write:h0},Symbol.toStringTag,{value:"Module"}));var dT;const Npe=$s()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Mp=dT=class extends $e{constructor(e){super(e)}readHref(e,t,i){return e?Fd(e,i):t.dataURI}writeHref(e,t,i,r){e&&(w0(e)?t.dataURI=e:(t.href=Rw(e,r),Co(t.href)&&(t.href=ll(t.href))))}clone(){return new dT({href:this.href,primitive:this.primitive})}};v([_({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Mp.prototype,"href",void 0),v([Ne("href")],Mp.prototype,"readHref",null),v([qe("href",{href:{type:String},dataURI:{type:String}})],Mp.prototype,"writeHref",null),v([Qe(Npe)],Mp.prototype,"primitive",void 0),Mp=dT=v([K("esri.symbols.support.IconSymbol3DLayerResource")],Mp);const Dpe="circle";var pT;let Hm=pT=class extends Re{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new pT({x:this.x,y:this.y})}};v([_({type:Number})],Hm.prototype,"x",void 0),v([_({type:Number})],Hm.prototype,"y",void 0),Hm=pT=v([K("esri.symbols.support.Symbol3DAnchorPosition2D")],Hm);var fT;let G1=fT=class extends $e{constructor(e){super(e),this.color=new Je([0,0,0,1]),this.size=$o(1)}clone(){const e={color:U(this.color)?this.color.clone():null,size:this.size};return new fT(e)}};v([_(qd)],G1.prototype,"color",void 0),v([_(ou)],G1.prototype,"size",void 0),G1=fT=v([K("esri.symbols.support.Symbol3DIconOutline")],G1);var lm;const iB="esri.symbols.IconSymbol3DLayer";let Ol=lm=class extends du{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new lm({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:U(this.material)?this.material.clone():null,outline:U(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Uv,i=cF(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Uv).clone()}:null;return new lm({size:e.size,resource:{primitive:zpe(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||ppe(e.color)?Uv:e.color,i=cF(e);return new lm({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new lm({resource:{href:WG({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function cF(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=hF(e.xoffset),s=hF(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function hF(e){return isFinite(e)?e:0}v([_({type:ko,json:{write:!0}})],Ol.prototype,"material",void 0),v([_({type:Mp,json:{write:!0}})],Ol.prototype,"resource",void 0),v([Qe({Icon:"icon"},{readOnly:!0})],Ol.prototype,"type",void 0),v([_(ou)],Ol.prototype,"size",void 0),v([Qe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),_({json:{default:"center"}})],Ol.prototype,"anchor",void 0),v([_({type:Hm,json:{type:[Number],read:{reader:e=>new Hm({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ol.prototype,"anchorPosition",void 0),v([_({type:G1,json:{write:!0}})],Ol.prototype,"outline",void 0),Ol=lm=v([K(iB)],Ol);const jpe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function zpe(e){return jpe[e]||(Ie.getLogger(iB).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Cf=Ol;let Tp=class extends Ni($e){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return U(e)&&e.placement===this.placement&&e.style===this.style&&(ae(this.color)&&ae(e.color)||U(this.color)&&U(e.color)&&this.color.toJSON()===e.color.toJSON())}};v([_({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Tp.prototype,"type",void 0),v([_({type:npe,json:{default:"begin-end",write:!0}})],Tp.prototype,"placement",void 0),v([_({type:Uq,json:{default:"arrow",write:!0}})],Tp.prototype,"style",void 0),v([_({type:Je,json:{type:[gi],default:null,write:!0}})],Tp.prototype,"color",void 0),Tp=v([K("esri.symbols.LineStyleMarker3D")],Tp);const mT=Tp;var u3;let Pl=u3=class extends du{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=$o(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:U(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:U(this.pattern)?this.pattern.clone():null,marker:U(this.marker)?this.marker.clone():null};return new u3(e)}static fromSimpleLineSymbol(e){var i,r,s;const t={enabled:!0,size:(i=e.width)!=null?i:$o(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new w7({style:e.style}):null,material:new ko({color:(e.color||Uv).clone()}),marker:e.marker?new mT({placement:e.marker.placement,style:e.marker.style,color:(s=(r=e.marker.color)==null?void 0:r.clone())!=null?s:null}):null};return new u3(t)}};v([_({type:ko,json:{write:!0}})],Pl.prototype,"material",void 0),v([Qe({Line:"line"},{readOnly:!0})],Pl.prototype,"type",void 0),v([_({type:Kq,json:{write:!0,default:"miter"}})],Pl.prototype,"join",void 0),v([_({type:I7,json:{write:!0,default:"butt"}})],Pl.prototype,"cap",void 0),v([_(ou)],Pl.prototype,"size",void 0),v([_(Jq)],Pl.prototype,"pattern",void 0),v([_({types:{key:"type",base:mT,typeMap:{style:mT}},json:{write:!0}})],Pl.prototype,"marker",void 0),Pl=u3=v([K("esri.symbols.LineSymbol3DLayer")],Pl);const Nw=Pl;var yT;const Vpe=$s()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let U1=yT=class extends $e{clone(){return new yT({href:this.href,primitive:this.primitive})}};v([_({type:String,json:{read:E7,write:h0}})],U1.prototype,"href",void 0),v([Qe(Vpe)],U1.prototype,"primitive",void 0),U1=yT=v([K("esri.symbols.support.ObjectSymbol3DLayerResource")],U1);const Gpe="sphere";var gT;let pf=gT=class extends Re{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new gT({x:this.x,y:this.y,z:this.z})}};v([_({type:Number})],pf.prototype,"x",void 0),v([_({type:Number})],pf.prototype,"y",void 0),v([_({type:Number})],pf.prototype,"z",void 0),pf=gT=v([K("esri.symbols.support.Symbol3DAnchorPosition3D")],pf);var vT;let Gs=vT=class extends du{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new vT({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:U(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};v([_({type:ko,json:{write:!0}})],Gs.prototype,"material",void 0),v([_({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Gs.prototype,"castShadows",void 0),v([_({type:U1,json:{write:!0}})],Gs.prototype,"resource",void 0),v([Qe({Object:"object"},{readOnly:!0})],Gs.prototype,"type",void 0),v([_({type:Number,json:{write:!0}})],Gs.prototype,"width",void 0),v([_({type:Number,json:{write:!0}})],Gs.prototype,"height",void 0),v([_({type:Number,json:{write:!0}})],Gs.prototype,"depth",void 0),v([Qe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),_({json:{default:"origin"}})],Gs.prototype,"anchor",void 0),v([_({type:pf,json:{type:[Number],read:{reader:e=>new pf({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Gs.prototype,"anchorPosition",void 0),v([_({type:Number,json:{write:!0}})],Gs.prototype,"heading",void 0),v([_({type:Number,json:{write:!0}})],Gs.prototype,"tilt",void 0),v([_({type:Number,json:{write:!0}})],Gs.prototype,"roll",void 0),v([_({readOnly:!0})],Gs.prototype,"isPrimitive",null),Gs=vT=v([K("esri.symbols.ObjectSymbol3DLayer")],Gs);const M7=Gs;var bT;let fn=bT=class extends du{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new bT({enabled:this.enabled,material:U(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};v([_({type:ko,json:{write:!0}})],fn.prototype,"material",void 0),v([_({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],fn.prototype,"castShadows",void 0),v([Qe({Path:"path"},{readOnly:!0})],fn.prototype,"type",void 0),v([_({type:["circle","quad"],json:{write:!0,default:"circle"}})],fn.prototype,"profile",void 0),v([_({type:Kq,json:{write:!0,default:"miter"}})],fn.prototype,"join",void 0),v([_({type:Cpe,json:{write:!0,default:"butt"}})],fn.prototype,"cap",void 0),v([_({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],fn.prototype,"width",void 0),v([Ne("width",["width","size","height"])],fn.prototype,"readWidth",null),v([_({type:Number,json:{write:!0}})],fn.prototype,"height",void 0),v([Ne("height",["height","size","width"])],fn.prototype,"readHeight",null),v([_({type:["center","bottom","top"],json:{write:!0,default:"center"}})],fn.prototype,"anchor",void 0),v([_({type:["heading","all"],json:{write:!0,default:"all"}})],fn.prototype,"profileRotation",void 0),fn=bT=v([K("esri.symbols.PathSymbol3DLayer")],fn);const T7=fn;var wT;let Wm=wT=class extends $e{constructor(){super(...arguments),this.color=new Je([0,0,0,1]),this.size=0}clone(){const e={color:ve(this.color),size:this.size};return new wT(e)}};v([_(qd)],Wm.prototype,"color",void 0),v([_(ou)],Wm.prototype,"size",void 0),Wm=wT=v([K("esri.symbols.support.Symbol3DHalo")],Wm);let Bv=class extends Ni($e){constructor(e){super(e),this.color=null}};v([_(qd)],Bv.prototype,"color",void 0),Bv=v([K("esri.symbols.support.Symbol3DTextBackground")],Bv);var c3;let Fn=c3=class extends du{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){U(e)&&U(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s={...r,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){return U(this._userSize)?this._userSize:U(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,U(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new c3({enabled:this.enabled,font:this.font&&ve(this.font),halo:this.halo&&ve(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:U(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ve(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new c3({font:U(e.font)?e.font.clone():new M5,halo:Upe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new ko({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Bv({color:e.backgroundColor.clone()}):null})}};function Upe(e,t){return e&&t!=null&&t>0?new Wm({color:ve(e),size:t}):null}v([_({type:M5,json:{write:!0}})],Fn.prototype,"font",null),v([qe("font")],Fn.prototype,"writeFont",null),v([_({type:Wm,json:{write:!0}})],Fn.prototype,"halo",void 0),v([_({...Xq,json:{default:"center",write:!0}})],Fn.prototype,"horizontalAlignment",void 0),v([_({...Zq,json:{default:1,write:!0}})],Fn.prototype,"lineHeight",void 0),v([_({type:ko,json:{write:!0}})],Fn.prototype,"material",void 0),v([_({type:Bv,json:{write:!0}})],Fn.prototype,"background",void 0),v([_(ou)],Fn.prototype,"size",null),v([_({type:String,json:{write:!0}})],Fn.prototype,"text",void 0),v([Qe({Text:"text"},{readOnly:!0})],Fn.prototype,"type",void 0),v([_({...Qq,json:{default:"baseline",write:!0}})],Fn.prototype,"verticalAlignment",void 0),Fn=c3=v([K("esri.symbols.TextSymbol3DLayer")],Fn);const mg=Fn;var _T;let mh=_T=class extends du{constructor(e){super(e),this.color=xT.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new _T({color:ve(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};v([_({type:Je,nonNullable:!0,json:{type:[gi],write:(e,t,i)=>t[i]=e.toArray(Je.AlphaMode.UNLESS_OPAQUE),default:()=>xT.clone(),defaultEquals:e=>e.toCss(!0)===xT.toCss(!0)}})],mh.prototype,"color",void 0),v([Qe({Water:"water"},{readOnly:!0})],mh.prototype,"type",void 0),v([_({type:["small","medium","large"],json:{write:!0,default:"medium"}})],mh.prototype,"waterbodySize",void 0),v([_({type:Number,json:{write:!0,default:null}})],mh.prototype,"waveDirection",void 0),v([_({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],mh.prototype,"waveStrength",void 0),mh=_T=v([K("esri.symbols.WaterSymbol3DLayer")],mh);const xT=new Je([0,119,190]),rB=mh;var ST;let Cp=ST=class extends Re{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new ST({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};v([_({type:String})],Cp.prototype,"name",void 0),v([_({type:String})],Cp.prototype,"styleUrl",void 0),v([_({type:String})],Cp.prototype,"styleName",void 0),v([_({type:Ts})],Cp.prototype,"portal",void 0),Cp=ST=v([K("esri.symbols.support.StyleOrigin")],Cp);const Rb=Cp;var IT;let Wf=IT=class extends Re{constructor(){super(...arguments),this.url=""}clone(){return new IT({url:this.url})}};v([_({type:String})],Wf.prototype,"url",void 0),Wf=IT=v([K("esri.symbols.support.Thumbnail")],Wf);const sB={icon:Cf,object:M7,line:Nw,path:T7,fill:Lw,extrude:Gq,text:mg,water:rB},qpe=Be.ofType({base:du,key:"type",typeMap:sB,errorContext:"symbol-layer"});let Fl=class extends no{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||Be;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.constructed&&Ie.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){s0(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const r=Fd(e.styleUrl,i);return new Rb({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new Rb({portal:i&&i.portal||Ts.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new Cn("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,r){if(e.styleUrl&&e.name){let s=Rw(e.styleUrl,r);Co(s)&&(s=ll(s)),t.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!BG(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new Cn("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof du||e&&sB[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};v([_({json:{read:!1,write:!1}})],Fl.prototype,"color",null),v([_({type:qpe,nonNullable:!0,json:{write:!0}}),_t(PG)],Fl.prototype,"symbolLayers",null),v([_({type:Rb})],Fl.prototype,"styleOrigin",void 0),v([Ne("styleOrigin")],Fl.prototype,"readStyleOrigin",null),v([qe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Fl.prototype,"writeStyleOrigin",null),v([_({type:Wf,json:{read:!1}})],Fl.prototype,"thumbnail",void 0),v([_({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Fl.prototype,"type",void 0),Fl=v([K("esri.symbols.Symbol3D")],Fl);const yg=Fl;let q1=class extends $e{constructor(e){super(e),this.visible=!0}clone(){}};v([_({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],q1.prototype,"type",void 0),v([_({readOnly:!0})],q1.prototype,"visible",void 0),q1=v([K("esri.symbols.callouts.Callout3D")],q1);const nB=q1;var ET;let h3=ET=class extends $e{constructor(){super(...arguments),this.color=new Je("white")}clone(){return new ET({color:ve(this.color)})}};v([_(qd)],h3.prototype,"color",void 0),h3=ET=v([K("esri.symbols.callouts.LineCallout3DBorder")],h3);const oB=h3;Object.freeze(Object.defineProperty({__proto__:null,default:oB},Symbol.toStringTag,{value:"Module"}));var MT;let yh=MT=class extends nB{constructor(e){super(e),this.type="line",this.color=new Je([0,0,0,1]),this.size=$o(1),this.border=null}get visible(){return this.size>0&&U(this.color)&&this.color.a>0}clone(){return new MT({color:ve(this.color),size:this.size,border:ve(this.border)})}};v([Qe({line:"line"},{readOnly:!0})],yh.prototype,"type",void 0),v([_(qd)],yh.prototype,"color",void 0),v([_(ou)],yh.prototype,"size",void 0),v([_({type:oB,json:{write:!0}})],yh.prototype,"border",void 0),v([_({readOnly:!0})],yh.prototype,"visible",null),yh=MT=v([K("esri.symbols.callouts.LineCallout3D")],yh);const Bpe=yh;function C7(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||U(t.maxWorldLength)&&t.maxWorldLength<=0)}function aB(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!C7(e)}function SDe(e){return e.type==="point-3d"||e.type==="label-3d"}function IDe(e){return e.horizontalAlignment==="center"}const lB={types:{key:"type",base:nB,typeMap:{line:Bpe}},json:{write:!0}};var TT;let um=TT=class extends $e{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new TT({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};v([_(ou)],um.prototype,"screenLength",void 0),v([_({type:Number,nonNullable:!0,json:{write:!0,default:0}})],um.prototype,"minWorldLength",void 0),v([_({type:Number,json:{write:!0}})],um.prototype,"maxWorldLength",void 0),um=TT=v([K("esri.symbols.support.Symbol3DVerticalOffset")],um);const uB=um;var d3;const cB=Be.ofType({base:null,key:"type",typeMap:{text:mg}});let gh=d3=class extends yg{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new cB,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return aB(this)}hasVisibleVerticalOffset(){return C7(this)}clone(){return new d3({styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail),callout:ve(this.callout),verticalOffset:ve(this.verticalOffset)})}static fromTextSymbol(e){return new d3({symbolLayers:[mg.fromTextSymbol(e)]})}};v([_({type:uB,json:{write:!0}})],gh.prototype,"verticalOffset",void 0),v([_(lB)],gh.prototype,"callout",void 0),v([_({json:{read:!1,write:!1}})],gh.prototype,"styleOrigin",void 0),v([_({type:cB})],gh.prototype,"symbolLayers",void 0),v([Qe({LabelSymbol3D:"label-3d"},{readOnly:!0})],gh.prototype,"type",void 0),gh=d3=v([K("esri.symbols.LabelSymbol3D")],gh);const T5=gh;var p3;const hB=Be.ofType({base:null,key:"type",typeMap:{line:Nw,path:T7}}),Hpe=Be.ofType({base:null,key:"type",typeMap:{line:Nw,path:T7}});let B1=p3=class extends yg{constructor(e){super(e),this.symbolLayers=new hB,this.type="line-3d"}clone(){return new p3({styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail)})}static fromSimpleLineSymbol(e){return new p3({symbolLayers:[Nw.fromSimpleLineSymbol(e)]})}};v([_({type:hB,json:{type:Hpe}})],B1.prototype,"symbolLayers",void 0),v([Qe({LineSymbol3D:"line-3d"},{readOnly:!0})],B1.prototype,"type",void 0),B1=p3=v([K("esri.symbols.LineSymbol3D")],B1);const C5=B1;let vh=class extends no{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};v([_({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],vh.prototype,"angle",void 0),v([_({type:["simple-marker","picture-marker"],readOnly:!0})],vh.prototype,"type",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],vh.prototype,"xoffset",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],vh.prototype,"yoffset",void 0),v([_({type:Number,cast:e=>e==="auto"?e:Bt(e),json:{write:!0}})],vh.prototype,"size",void 0),vh=v([K("esri.symbols.MarkerSymbol")],vh);const dB=vh;var f3;const pB=Be.ofType({base:null,key:"type",typeMap:{fill:Lw}});let H1=f3=class extends yg{constructor(e){super(e),this.symbolLayers=new pB,this.type="mesh-3d"}clone(){return new f3({styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail)})}static fromSimpleFillSymbol(e){return new f3({symbolLayers:[Lw.fromSimpleFillSymbol(e)]})}};v([_({type:pB})],H1.prototype,"symbolLayers",void 0),v([Qe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],H1.prototype,"type",void 0),H1=f3=v([K("esri.symbols.MeshSymbol3D")],H1);const A5=H1;function Wpe(e,t,i){return t.imageData?WG({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):fB(t.url,i)}function fB(e,t){var i;return Ype(t)&&!Co(e)&&((i=t==null?void 0:t.layer)==null?void 0:i.parsedUrl)?n0(t.layer.parsedUrl.path,"images",e):Fd(e,t)}function Jpe(e,t,i,r){if(w0(e)){const s=R6(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&h0(i.url,t,"url",r)}else h0(e,t,"url",r)}const mB={json:{read:{source:["imageData","url"],reader:Wpe},write:{writer(e,t,i,r){Jpe(e,t,this.source,r)}}}},yB={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=fB(t.url,i)),r}}}};function Ype(e){var t,i;return!(e==null||e.origin!=="service"&&e.origin!=="portal-item"||((t=e.layer)==null?void 0:t.type)!=="feature"&&((i=e.layer)==null?void 0:i.type)!=="stream")}var CT;let Jo=CT=class extends qq{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=Bt(i)),r!=null&&(s.height=Bt(r)),s}clone(){const e=new CT({color:ve(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",ve(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};v([Qe({esriPFS:"picture-fill"},{readOnly:!0})],Jo.prototype,"type",void 0),v([_(mB)],Jo.prototype,"url",void 0),v([_({type:Number,json:{write:!0}})],Jo.prototype,"xscale",void 0),v([_({type:Number,json:{write:!0}})],Jo.prototype,"yscale",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Jo.prototype,"width",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Jo.prototype,"height",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Jo.prototype,"xoffset",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Jo.prototype,"yoffset",void 0),v([_(yB)],Jo.prototype,"source",void 0),Jo=CT=v([K("esri.symbols.PictureFillSymbol")],Jo);const gB=Jo;var AT;let Fa=AT=class extends dB{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=Bt(t)),i!=null&&(r.height=Bt(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new AT({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",ve(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};v([_({json:{write:!1}})],Fa.prototype,"color",void 0),v([Qe({esriPMS:"picture-marker"},{readOnly:!0})],Fa.prototype,"type",void 0),v([_(mB)],Fa.prototype,"url",void 0),v([_(yB)],Fa.prototype,"source",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Fa.prototype,"height",void 0),v([Ne("height",["height","size"])],Fa.prototype,"readHeight",null),v([_({type:Number,cast:Bt,json:{write:!0}})],Fa.prototype,"width",void 0),v([_({json:{write:!1}})],Fa.prototype,"size",void 0),Fa=AT=v([K("esri.symbols.PictureMarkerSymbol")],Fa);const $5=Fa;var Ap;const vB=Be.ofType({base:null,key:"type",typeMap:{icon:Cf,object:M7,text:mg}});let $p=Ap=class extends yg{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new vB,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return aB(this)}hasVisibleVerticalOffset(){return C7(this)}clone(){return new Ap({verticalOffset:ve(this.verticalOffset),callout:ve(this.callout),styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Ap({symbolLayers:[Cf.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Ap({symbolLayers:[Cf.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var r,s;if(((s=(r=e.data)==null?void 0:r.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new Ap(i!=null&&i.callout?{symbolLayers:[Cf.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Cf.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Ap({symbolLayers:[mg.fromTextSymbol(e)]})}};v([_({type:uB,json:{write:!0}})],$p.prototype,"verticalOffset",void 0),v([_(lB)],$p.prototype,"callout",void 0),v([_({type:vB,json:{origins:{"web-scene":{write:!0}}}})],$p.prototype,"symbolLayers",void 0),v([Qe({PointSymbol3D:"point-3d"},{readOnly:!0})],$p.prototype,"type",void 0),$p=Ap=v([K("esri.symbols.PointSymbol3D")],$p);const Af=$p;var W1;const bB=Be.ofType({base:null,key:"type",typeMap:{extrude:Gq,fill:Lw,icon:Cf,line:Nw,object:M7,text:mg,water:rB}});let J1=W1=class extends yg{constructor(e){super(e),this.symbolLayers=new bB,this.type="polygon-3d"}clone(){return new W1({styleOrigin:ve(this.styleOrigin),symbolLayers:ve(this.symbolLayers),thumbnail:ve(this.thumbnail)})}static fromJSON(e){const t=new W1;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),r=t.symbolLayers.getItemAt(1);!r.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:U(r.material)?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new W1({symbolLayers:[Lw.fromSimpleFillSymbol(e)]})}};v([_({type:bB,json:{write:!0}})],J1.prototype,"symbolLayers",void 0),v([Qe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],J1.prototype,"type",void 0),J1=W1=v([K("esri.symbols.PolygonSymbol3D")],J1);const Dw=J1;var $T;const II=new It({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let kp=$T=class extends qq{constructor(...e){super(...e),this.color=new Je([0,0,0,.25]),this.outline=new sn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new $T({color:ve(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};v([_()],kp.prototype,"color",void 0),v([_()],kp.prototype,"outline",void 0),v([Qe({esriSFS:"simple-fill"},{readOnly:!0})],kp.prototype,"type",void 0),v([_({type:II.apiValues,json:{read:II.read,write:II.write}})],kp.prototype,"style",void 0),kp=$T=v([K("esri.symbols.SimpleFillSymbol")],kp);const fl=kp;var Kpe=Object.freeze(Object.defineProperty({__proto__:null,default:fl},Symbol.toStringTag,{value:"Module"})),kT;const EI=new It({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ll=kT=class extends dB{constructor(...e){super(...e),this.color=new Je([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new sn}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Bt(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new kT({angle:this.angle,color:ve(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};v([_()],Ll.prototype,"color",void 0),v([qe("color")],Ll.prototype,"writeColor",null),v([Qe({esriSMS:"simple-marker"},{readOnly:!0})],Ll.prototype,"type",void 0),v([_()],Ll.prototype,"size",void 0),v([_({type:EI.apiValues,json:{read:EI.read,write:EI.write}})],Ll.prototype,"style",void 0),v([_({type:String,json:{write:!0}})],Ll.prototype,"path",null),v([_({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":sn}},json:{default:null,write:!0}})],Ll.prototype,"outline",void 0),Ll=kT=v([K("esri.symbols.SimpleMarkerSymbol")],Ll);const ca=Ll;var Zpe=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"})),OT;let Zi=OT=class extends no{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new M5,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return Bt(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new OT({angle:this.angle,backgroundColor:ve(this.backgroundColor),borderLineColor:ve(this.borderLineColor),borderLineSize:this.borderLineSize,color:ve(this.color),font:this.font&&this.font.clone(),haloColor:ve(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};v([_({type:Je,json:{write:!0}})],Zi.prototype,"backgroundColor",void 0),v([_({type:Je,json:{write:!0}})],Zi.prototype,"borderLineColor",void 0),v([_({type:Number,json:{write:!0},cast:Bt})],Zi.prototype,"borderLineSize",void 0),v([_({type:M5,json:{write:!0}})],Zi.prototype,"font",void 0),v([_({...Xq,json:{write:!0}})],Zi.prototype,"horizontalAlignment",void 0),v([_({type:Boolean,json:{write:!0}})],Zi.prototype,"kerning",void 0),v([_({type:Je,json:{write:!0}})],Zi.prototype,"haloColor",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Zi.prototype,"haloSize",void 0),v([_({type:Boolean,json:{write:!0}})],Zi.prototype,"rightToLeft",void 0),v([_({type:Boolean,json:{write:!0}})],Zi.prototype,"rotated",void 0),v([_({type:String,json:{write:!0}})],Zi.prototype,"text",void 0),v([Qe({esriTS:"text"},{readOnly:!0})],Zi.prototype,"type",void 0),v([_({...Qq,json:{write:!0}})],Zi.prototype,"verticalAlignment",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Zi.prototype,"xoffset",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Zi.prototype,"yoffset",void 0),v([_({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Zi.prototype,"angle",void 0),v([_({type:Number,json:{write:!0}})],Zi.prototype,"width",void 0),v([_({type:Number})],Zi.prototype,"lineWidth",void 0),v([qe("lineWidth")],Zi.prototype,"writeLineWidth",null),v([_t("lineWidth")],Zi.prototype,"castLineWidth",null),v([_(Zq)],Zi.prototype,"lineHeight",void 0),v([qe("lineHeight")],Zi.prototype,"writeLineHeight",null),Zi=OT=v([K("esri.symbols.TextSymbol")],Zi);const gg=Zi;var PT;let La=PT=class extends no{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=U(this.portal)?this.portal:Ts.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new PT({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=U(t)?t.cache:null,r=i?this._fetchCacheKey:null;if(U(i)){const u=r&&i.get(r);if(u)return u.clone()}const s=await Xpe();or(t);const o=s.resolveWebStyleSymbol(this,{portal:this.portal},e,t);o.catch(u=>{Ie.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",u)});const c=await o;return e==="webRef"&&c.type==="point-3d"||e==="cimRef"&&c.type==="cim"?(U(i)&&i.set(r,c.clone()),c):null}};function Xpe(){return pe(()=>Promise.resolve().then(function(){return rEe}),void 0)}v([_({json:{write:!1}})],La.prototype,"color",void 0),v([_({type:String,json:{write:!0}})],La.prototype,"styleName",void 0),v([_({type:Ts,json:{write:!1}})],La.prototype,"portal",void 0),v([_({type:String,json:{read:E7,write:h0}})],La.prototype,"styleUrl",void 0),v([_({type:Wf,json:{read:!1}})],La.prototype,"thumbnail",void 0),v([_({type:String,json:{write:!0}})],La.prototype,"name",void 0),v([Qe({styleSymbolReference:"web-style"},{readOnly:!0})],La.prototype,"type",void 0),v([_()],La.prototype,"_fetchCacheKey",null),La=PT=v([K("esri.symbols.WebStyleSymbol")],La);const S0=La;function k5(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Ld(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Hn={base:no,key:"type",typeMap:{"simple-fill":fl,"picture-fill":gB,"picture-marker":$5,"simple-line":sn,"simple-marker":ca,text:gg,"label-3d":T5,"line-3d":C5,"mesh-3d":A5,"point-3d":Af,"polygon-3d":Dw,"web-style":S0,cim:kw},errorContext:"symbol"},Qpe={base:no,key:"type",typeMap:{"picture-marker":$5,"simple-marker":ca,text:gg,"web-style":S0,cim:kw},errorContext:"symbol"},efe=zd({types:Hn}),O5={base:no,key:"type",typeMap:{"simple-fill":fl,"picture-fill":gB,"picture-marker":$5,"simple-line":sn,"simple-marker":ca,text:gg,"line-3d":C5,"mesh-3d":A5,"point-3d":Af,"polygon-3d":Dw,"web-style":S0,cim:kw},errorContext:"symbol"},tfe={base:no,key:"type",typeMap:{text:gg,"label-3d":T5},errorContext:"symbol"},dF={base:no,key:"type",typeMap:{"line-3d":C5,"mesh-3d":A5,"point-3d":Af,"polygon-3d":Dw,"web-style":S0,cim:kw},errorContext:"symbol"},ife={base:no,key:"type",typeMap:{"label-3d":T5},errorContext:"symbol"},wB=iu(Hn);function rfe(e){if(!e)return null;const t={};for(const i in e){const r=kc(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function sfe(e){if(!U(e))return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let Ln=class extends Ni($e){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Bf(),configurable:!0})}normalizeCtorArgs(e,t,i,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&U(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:sfe(this.aggregateGeometries),geometry:U(this.geometry)?this.geometry.toJSON():null,symbol:U(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){U(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,r){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}};v([_({value:null,json:{read:rfe}})],Ln.prototype,"aggregateGeometries",null),v([_({value:null})],Ln.prototype,"attributes",null),v([_({value:null,types:_0,json:{read:kc}})],Ln.prototype,"geometry",null),v([_({type:Boolean})],Ln.prototype,"isAggregate",void 0),v([_({clonable:"reference"})],Ln.prototype,"layer",void 0),v([_({type:$w})],Ln.prototype,"popupTemplate",void 0),v([_({clonable:"reference"})],Ln.prototype,"sourceLayer",void 0),v([_({value:null,types:Hn})],Ln.prototype,"symbol",null),v([_({type:Boolean,value:!0})],Ln.prototype,"visible",null),Ln=v([K("esri.Graphic")],Ln),function(e){e.generateUID=Bf}(Ln||(Ln={}));const wr=Ln;class A7{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,r,s=0,o=!1){return(r-=s)<t?r+=this.ndiff(t-r):r>i&&(r-=this.ndiff(r-i)),o&&r===i&&(r=t),r+s}normalize(t,i=0,r=!1){return this._normalize(this.min,this.max,t,i,r)}clamp(t,i=0){return so(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+this.ndiff(t-i,r)}minimalMonotonic(t,i,r){return this._normalize(t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}}function $7(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}$7(new A7(0,2*Math.PI));const EDe=$7(new A7(-Math.PI,Math.PI)),_B=$7(new A7(0,360));let Ru=class extends Ni($e){constructor(...e){super(...e),this.position=new pt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return t!=null&&(s.heading=t),i!=null&&(s.tilt=i),r!=null&&(s.fov=r),s}return e}writePosition(e,t,i,r){const s=e.clone();s.x=ra(e.x||0),s.y=ra(e.y||0),s.z=e.hasZ?ra(e.z||0):e.z,t[i]=s.write({},r)}readPosition(e,t){const i=new pt;return i.read(e,t),i.x=ra(i.x||0),i.y=ra(i.y||0),i.z=i.hasZ?ra(i.z||0):i.z,i}equals(e){return!ae(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};v([_({type:pt,json:{write:{isRequired:!0}}})],Ru.prototype,"position",void 0),v([qe("position")],Ru.prototype,"writePosition",null),v([Ne("position")],Ru.prototype,"readPosition",null),v([_({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),_t(e=>_B.normalize(ra(e)))],Ru.prototype,"heading",void 0),v([_({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),_t(e=>so(ra(e),-180,180))],Ru.prototype,"tilt",void 0),v([_({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ru.prototype,"fov",void 0),Ru=v([K("esri.Camera")],Ru);const nfe=Ru;var FT;let bh=FT=class extends $e{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new FT({rotation:this.rotation,scale:this.scale,targetGeometry:U(this.targetGeometry)?this.targetGeometry.clone():null,camera:U(this.camera)?this.camera.clone():null})}};function MI(){return{enabled:!this.camera}}v([_({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:MI}}}}})],bh.prototype,"rotation",void 0),v([_t("rotation")],bh.prototype,"castRotation",null),v([_({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:MI}}}}})],bh.prototype,"scale",void 0),v([_({types:_0,json:{read:kc,write:!0,origins:{"web-scene":{read:kc,write:{overridePolicy:MI}}}}})],bh.prototype,"targetGeometry",void 0),v([_({type:nfe,json:{write:!0}})],bh.prototype,"camera",void 0),bh=FT=v([K("esri.Viewpoint")],bh);const Zl=bh;function ge(e,t,i={}){return k7(e,t,i,xB)}function ts(e,t,i={}){return k7(e,t,i,SB)}function k7(e,t,i={},r){let s=null;const o=i.once?(c,u)=>{r(c)&&(Ti(s),t(c,u))}:(c,u)=>{r(c)&&t(c,u)};if(s=Goe(e,o,i.sync,i.equals),i.initial){const c=e();o(c,c)}return s}function $i(e,t,i,r={}){let s=null,o=null,c=null;function u(){var S;s&&o&&(o.remove(),(S=r.onListenerRemove)==null||S.call(r,s),s=null,o=null)}function g(S){r.once&&r.once&&Ti(c),i(S)}const b=ge(e,(S,E)=>{var A;u(),r5(S)&&(s=S,o=hc(S,t,g),(A=r.onListenerAdd)==null||A.call(r,S))},{sync:r.sync,initial:!0});return c=Mo(()=>{b.remove(),u()}),c}function In(e,t){return ofe(e,SB,t)}function ofe(e,t,i){if(Fo(i))return Promise.reject(Ri());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let s=null;function o(){s=Ti(s)}return new Promise((c,u)=>{s=lg([To(i,()=>{o(),u(Ri())}),k7(e,g=>{o(),c(g)},{sync:!1,once:!0},t!=null?t:xB)])})}function xB(e){return!0}function SB(e){return!!e}function MDe(e,t,i={}){let r=!1;const s=ge(e,(o,c)=>{r||t(o,c)},i);return{remove(){s.remove()},pause(){r=!0},resume(){r=!1}}}const au={sync:!0},rt={initial:!0},Mn={sync:!0,initial:!0};class Rx{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var ms;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(ms||(ms={}));let afe=0;function IB(){return afe++}function lfe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Nb(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function O7(e,t,i,r){if(t.type===ms.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==ms.INVOKE&&t.type!==ms.RESPONSE)return void e.postMessage(t);let s;if(lfe(i)?(s=pF(i.transferList),t.data=i.result):(s=pF(r),t.data=i),s){if(Se("ff")){for(const o of s)if("byteLength"in o&&o.byteLength>267386880){const c="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case ms.INVOKE:throw c;case ms.RESPONSE:return void O7(e,{type:ms.RESPONSE,jobId:t.jobId,error:Nb(c)})}}}e.postMessage(t,s)}else e.postMessage(t)}function Db(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function pF(e){if(!e||!e.length)return null;if(Se("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!ufe(i));return t.length?t:null}function ufe(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const cfe={statsWorker:()=>pe(()=>import("./statsWorker.62cf0cae.js"),[]),geometryEngineWorker:()=>pe(()=>import("./geometryEngineWorker.72331e8e.js"),["assets/geometryEngineWorker.72331e8e.js","assets/geometryEngineJSON.365eabb9.js"]),CSVSourceWorker:()=>pe(()=>import("./CSVSourceWorker.f0fc9bc7.js"),["assets/CSVSourceWorker.f0fc9bc7.js","assets/FeatureStore.aafd7daf.js","assets/BoundsStore.befb01b6.js","assets/PooledRBush.1ba01569.js","assets/optimizedFeatureQueryEngineAdapter.16a5f108.js","assets/centroid.193a93e9.js","assets/QueryEngine.f60a9c1b.js","assets/QueryEngineCapabilities.ea616409.js","assets/timeSupport.5c76f69a.js","assets/number.d4116036.js","assets/clientSideDefaults.58eeb936.js"]),EdgeProcessingWorker:()=>pe(()=>import("./EdgeProcessingWorker.e5d9df43.js"),["assets/EdgeProcessingWorker.e5d9df43.js","assets/workerHelper.aeb45d59.js","assets/BufferView.32a50625.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/edgeProcessing.44ee33a6.js","assets/deduplicate.97d7ef01.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/glUtil.9de5d1d0.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js"]),ElevationSamplerWorker:()=>pe(()=>import("./ElevationSamplerWorker.45e4b840.js"),["assets/ElevationSamplerWorker.45e4b840.js","assets/PooledRBush.1ba01569.js","assets/georeference.9a5b57a8.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/quat.eb7bbc3a.js","assets/quatf64.1dc83f1c.js","assets/axisAngleDegrees.fa497b47.js","assets/BufferView.32a50625.js","assets/vec33.e7ec8171.js","assets/projection.a57c6cde.js"]),FeatureServiceSnappingSourceWorker:()=>pe(()=>import("./FeatureServiceSnappingSourceWorker.6475794b.js"),["assets/FeatureServiceSnappingSourceWorker.6475794b.js","assets/FeatureStore.aafd7daf.js","assets/BoundsStore.befb01b6.js","assets/PooledRBush.1ba01569.js","assets/optimizedFeatureQueryEngineAdapter.16a5f108.js","assets/centroid.193a93e9.js","assets/QueryEngine.f60a9c1b.js","assets/QueryEngineCapabilities.ea616409.js","assets/timeSupport.5c76f69a.js","assets/symbologySnappingCandidates.07698129.js"]),GeoJSONSourceWorker:()=>pe(()=>import("./GeoJSONSourceWorker.56ad4eef.js"),["assets/GeoJSONSourceWorker.56ad4eef.js","assets/FeatureStore.aafd7daf.js","assets/BoundsStore.befb01b6.js","assets/PooledRBush.1ba01569.js","assets/optimizedFeatureQueryEngineAdapter.16a5f108.js","assets/centroid.193a93e9.js","assets/QueryEngine.f60a9c1b.js","assets/QueryEngineCapabilities.ea616409.js","assets/timeSupport.5c76f69a.js","assets/geojson.627250fc.js","assets/clientSideDefaults.58eeb936.js","assets/sourceUtils.85c8066a.js"]),LercWorker:()=>pe(()=>import("./LercWorker.5cea28b4.js"),[]),MemorySourceWorker:()=>pe(()=>import("./MemorySourceWorker.14a740fe.js"),["assets/MemorySourceWorker.14a740fe.js","assets/objectIdUtils.e2ddfb9a.js","assets/FeatureStore.aafd7daf.js","assets/BoundsStore.befb01b6.js","assets/PooledRBush.1ba01569.js","assets/optimizedFeatureQueryEngineAdapter.16a5f108.js","assets/centroid.193a93e9.js","assets/QueryEngine.f60a9c1b.js","assets/QueryEngineCapabilities.ea616409.js","assets/timeSupport.5c76f69a.js","assets/clientSideDefaults.58eeb936.js","assets/sourceUtils.85c8066a.js"]),PBFDecoderWorker:()=>pe(()=>import("./PBFDecoderWorker.9a048c07.js"),[]),Pipeline:()=>pe(()=>import("./Pipeline.8341b08b.js"),["assets/Pipeline.8341b08b.js","assets/QueryEngine.f60a9c1b.js","assets/QueryEngineCapabilities.ea616409.js","assets/timeSupport.5c76f69a.js","assets/FeatureStore2D.f3808720.js","assets/CircularArray.e19cffa8.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/definitions.1d569ae6.js","assets/visualVariablesUtils.313d5012.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/visualVariablesUtils.fc657d78.js","assets/ogcFeatureUtils.11f03540.js","assets/geojson.627250fc.js","assets/clientSideDefaults.58eeb936.js","assets/createConnection.15e93788.js"]),PointCloudWorker:()=>pe(()=>import("./PointCloudWorker.3dffdd0d.js"),["assets/PointCloudWorker.3dffdd0d.js","assets/quat.eb7bbc3a.js","assets/mat3f64.9180efcb.js","assets/quatf64.1dc83f1c.js","assets/I3SBinaryReader.e2ebd4a7.js","assets/VertexAttribute.34e3daf1.js","assets/vec3f32.4d8dc001.js","assets/PointCloudUniqueValueRenderer.7c23d873.js"]),RasterWorker:()=>pe(()=>import("./RasterWorker.8920eed8.js"),["assets/RasterWorker.8920eed8.js","assets/dataUtils.4f32230d.js","assets/pixelRangeUtils.eec66021.js","assets/RasterSymbolizer.eb202b7c.js","assets/utils.41f04e38.js","assets/rasterProjectionHelper.991a34b5.js"]),SceneLayerSnappingSourceWorker:()=>pe(()=>import("./SceneLayerSnappingSourceWorker.cdb5fc19.js"),["assets/SceneLayerSnappingSourceWorker.cdb5fc19.js","assets/lineSegment.1a0fd96e.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/Octree.449e609a.js","assets/plane.a0a08b54.js","assets/Util.3efb1a6b.js","assets/edgeProcessing.44ee33a6.js","assets/deduplicate.97d7ef01.js","assets/Indices.27b9c798.js","assets/InterleavedLayout.a42ad5fa.js","assets/BufferView.32a50625.js","assets/types.bf551170.js","assets/VertexAttribute.34e3daf1.js","assets/glUtil.9de5d1d0.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js"]),SceneLayerWorker:()=>pe(()=>import("./SceneLayerWorker.4b692423.js"),["assets/SceneLayerWorker.4b692423.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js"]),WFSSourceWorker:()=>pe(()=>import("./WFSSourceWorker.c04a5c68.js"),["assets/WFSSourceWorker.c04a5c68.js","assets/FeatureStore.aafd7daf.js","assets/BoundsStore.befb01b6.js","assets/PooledRBush.1ba01569.js","assets/optimizedFeatureQueryEngineAdapter.16a5f108.js","assets/centroid.193a93e9.js","assets/QueryEngine.f60a9c1b.js","assets/QueryEngineCapabilities.ea616409.js","assets/timeSupport.5c76f69a.js","assets/geojson.627250fc.js","assets/sourceUtils.85c8066a.js","assets/wfsUtils.3b8c502d.js","assets/xmlUtils.e4562140.js"]),WorkerTileHandler:()=>pe(()=>import("./WorkerTileHandler.1abd7399.js"),["assets/WorkerTileHandler.1abd7399.js","assets/enums.7f1ae3cd.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/config.86ceb802.js","assets/StyleDefinition.dc47b5d4.js","assets/enums.9a5c29c3.js","assets/TurboLine.cfd1c2a2.js","assets/definitions.1d569ae6.js","assets/StyleRepository.f88abb19.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/earcut.a219bf29.js","assets/BidiEngine.f5b8c89f.js"])},{CLOSE:fF,ABORT:mF,INVOKE:yF,RESPONSE:Yg,OPEN_PORT:gF,ON:hfe}=ms,dfe=2;class pfe{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===ms.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Kn{static connect(t){const i=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new Kn(i.port1,{channel:i,client:r},()=>null);return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=s),Kn.clients.set(s,r),i.port2}static loadWorker(t){const i=cfe[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new pfe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:fF}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){const s=r&&r.signal,o=r&&r.transferList;if(!this._port)return Promise.reject(new de("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const c=IB();return new Promise((u,g)=>{if(Fo(s))return this._processWork(),void g(Ri());const b=To(s,()=>{const E=this._outJobs.get(c);E&&(this._outJobs.delete(c),this._processWork(),Ti(E.abortHandle),this._post({type:mF,jobId:c}),g(Ri()))}),S={resolve:u,reject:g,abortHandle:b,debugInfo:t};this._outJobs.set(c,S),this._post({type:yF,jobId:c,methodName:t,abortable:s!=null},i,o)})}on(t,i){const r=new MessageChannel;function s(o){i(o.data)}return this._port.postMessage({type:ms.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),{remove(){r.port1.postMessage({type:ms.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:gF,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=dfe)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:r,invokeOptions:s,deferred:o}=t;this.invoke(i,r,s).then(c=>o.resolve(c)).catch(c=>o.reject(c))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Ti(t.abortHandle),t.reject(Ri(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){U(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=Db(t);if(i)switch(i.type){case Yg:this._onResponseMessage(i);break;case yF:this._invokeQueue.push(i);break;case mF:this._onAbortMessage(i);break;case fF:this._onCloseMessage();break;case gF:this._onOpenPortMessage(i);break;case hfe:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Kn.clients.get(this)===t&&t.destroy(),Kn.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:o}=t,c=o?new AbortController:null,u=this._inJobs;let g,b=this._client,S=b[i];try{if(!S&&i&&i.includes(".")){const E=i.split(".");for(let A=0;A<E.length-1;A++)b=b[E[A]],S=b[E[A+1]]}if(typeof S!="function")throw new TypeError(`${i} is not a function`);g=S.call(b,s,{client:this,signal:c?c.signal:null})}catch(E){return void this._post({type:Yg,jobId:r,error:Nb(E)})}Lc(g)?(u.set(r,{controller:c,promise:g}),g.then(E=>{u.has(r)&&(u.delete(r),this._post({type:Yg,jobId:r},E))},E=>{u.has(r)&&(u.delete(r),ro(E)||this._post({type:Yg,jobId:r,error:Nb(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:Yg,jobId:r},g)}_onOpenPortMessage(t){new Kn(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,o=>{i.postMessage(o)}),s=hc(t.port,"message",o=>{var c;((c=Db(o))==null?void 0:c.type)===ms.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,o=this._outJobs;if(!o.has(i))return;const c=o.get(i);o.delete(i),this._processWork(),Ti(c.abortHandle),r?c.reject(de.fromJSON(JSON.parse(r))):c.resolve(s)}_post(t,i,r){return O7(this._port,t,i,r)}}Kn.kernelInfo={revision:mU,version:yU,buildDate:fU},Kn.clients=new Map;class ffe{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Rx}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((r,s)=>{let o=!0;const c=u=>{or(i.signal),o&&(o=!1,u())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let u=0;u<t.length;++u){const g=t[u];Lc(g)?this._clientPromises[u]=g.then(b=>(this._clients[u]=new Kn(b,i,()=>{var S;return(S=this._ongoingJobsQueue.pop())!=null?S:null}),c(r),this._clients[u]),()=>(c(s),null)):(this._clients[u]=new Kn(g,i,()=>{var b;return(b=this._ongoingJobsQueue.pop())!=null?b:null}),this._clientPromises[u]=Promise.resolve(this._clients[u]),c(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let o=0;o<this._clientPromises.length;++o){const c=this._clientPromises[o];s[o]=c.then(u=>u==null?void 0:u.invoke(t,i,r))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(Ri(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,r){let s;Array.isArray(r)?(Ie.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),s={transferList:r}):s=r;const o=tu();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:s,deferred:o});for(let c=0;c<this._clientPromises.length;c++){const u=this._clients[c];u?u.jobAdded():this._clientPromises[c].then(g=>g==null?void 0:g.jobAdded())}return o.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>lg(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(o=>{o&&(i[s]=o.openPort()),--r==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const EB=Ie.getLogger("esri.intl.substitute");function es(e,t,i={}){const{format:r={}}=i;return pa(e,s=>mfe(s,t,r))}function mfe(e,t,i){var g;let r,s;const o=e.indexOf(":");if(o===-1?r=e.trim():(r=e.slice(0,o).trim(),s=e.slice(o+1).trim()),!r)return"";const c=gw(r,t);if(c==null)return"";const u=(g=s?i==null?void 0:i[s]:null)!=null?g:i==null?void 0:i[r];return u?yfe(c,u):s?gfe(c,s):P7(c)}function yfe(e,t){switch(t.type){case"date":return nr(e,t.intlOptions);case"number":return Lo(e,t.intlOptions);default:return EB.warn("missing format descriptor for key {key}"),P7(e)}}function gfe(e,t){switch(t.toLowerCase()){case"dateformat":return nr(e);case"numberformat":return Lo(e);default:return EB.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?nr(e):/^numberformat/i.test(t)?Lo(e):P7(e)}}function P7(e){switch(typeof e){case"string":return e;case"number":return Lo(e);case"boolean":return""+e;default:return e instanceof Date?nr(e):""}}async function vfe(e,t,i,r){const s=t.exec(i);if(!s)throw new de("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const o=s[1]?`${s[1]}/`:"",c=s[2],u=que(r),g=`${o}${c}.json`,b=u?`${o}${c}_${u}.json`:g;let S;try{S=await vF(e(b))}catch(E){if(b===g)throw new de("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:E});try{S=await vF(e(g))}catch(A){throw new de("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A})}}return S}async function vF(e){if(U(bF.fetchBundleAsset))return bF.fetchBundleAsset(e);const t=await mi(e,{responseType:"text"});return JSON.parse(t.data)}class bfe{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?o=>new URL(o,new URL(r,window.location.href)).href:r instanceof URL?o=>new URL(o,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return vfe(this.getAssetUrl,this.matcher,t,i)}}function wfe(e){return new bfe(e)}const bF={};Uue(wfe({pattern:"esri/",location:Dt}));const _fe={};function xfe(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=_fe.baseUrl),t}class Sfe{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}}class m3{constructor(){this._dispatcher=new Sfe,this._workerPostMessage({type:ms.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){px(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){px(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=Db(t);if(i&&i.type===ms.OPEN){const{modulePath:r,jobId:s}=i;let o=await Kn.loadWorker(r);o||(o=await pe(()=>import(r),[]));const c=Kn.connect(o);this._workerPostMessage({type:ms.OPENED,jobId:s,data:c})}}}const LT=Ie.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Ife}=ms,Efe='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let C_,A_;const wF="Failed to create Worker. Fallback to execute module in main thread";async function Mfe(){if(!Se("esri-workers")||(Se("mozilla"),0))return _F(new m3);if(!C_&&!A_)try{const t=Efe.split('"{CONFIGURATION}"').join(`'${Tfe()}'`);C_=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){A_=t||{}}let e;if(C_)try{e=new Worker(C_,{name:"esri-worker-"+Cfe++})}catch{LT.warn(wF,A_),e=new m3}else LT.warn(wF,A_),e=new m3;return _F(e)}async function _F(e){return new Promise(t=>{function i(s){const o=Db(s);o&&o.type===Ife&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),LT.warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new m3).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function Tfe(){let e;if(jt.default!=null){const s={...jt};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(jt));e.assetsPath=na(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?na(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Dr(),e.has={"esri-csp-restrictions":Se("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Se("esri-2d-update-debug"),"featurelayer-pbf":Se("featurelayer-pbf"),"featurelayer-simplify-thresholds":Se("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Se("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":Se("featurelayer-simplify-mobile-factor"),"esri-atomics":Se("esri-atomics"),"esri-shared-array-buffer":Se("esri-shared-array-buffer"),"esri-tiles-debug":Se("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Se("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":Se("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":Se("polylabel-placement-enabled")},e.workers.loaderUrl&&(e.workers.loaderUrl=na(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=na(e.workers.workerPath):e.workers.workerPath=na(Dt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=jt.workers.loaderConfig,i=xfe({baseUrl:t==null?void 0:t.baseUrl,locale:Dr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]}),r={version:yU,buildDate:fU,revision:mU};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:r})}let Cfe=0;const{ABORT:xF,INVOKE:Afe,OPEN:$fe,OPENED:kfe,RESPONSE:Kg}=ms;class F7{static async create(t){const i=await Mfe();return new F7(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),Ie.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=IB();return new Promise((o,c)=>{const u={resolve:o,reject:c,abortHandle:b6(r,()=>{this._outJobs.delete(s),this._post({type:xF,jobId:s})})};this._outJobs.set(s,u),this._post({type:$fe,jobId:s,modulePath:t})})}_onMessage(t){const i=Db(t);if(i)switch(i.type){case kfe:this._onOpenedMessage(i);break;case Kg:this._onResponseMessage(i);break;case xF:this._onAbortMessage(i);break;case Afe:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:o}=t,c=o?new AbortController:null,u=this._inJobs,g=Hle[i];let b;try{if(typeof g!="function")throw new TypeError(`${i} is not a function`);b=g.call(null,s,{signal:c?c.signal:null})}catch(S){return void this._post({type:Kg,jobId:r,error:Nb(S)})}Lc(b)?(u.set(r,{controller:c,promise:b}),b.then(S=>{u.has(r)&&(u.delete(r),this._post({type:Kg,jobId:r},S))},S=>{u.has(r)&&(u.delete(r),S||(S={message:"Error encountered at method"+i}),ro(S)||this._post({type:Kg,jobId:r,error:Nb(S||{message:`Error encountered at method ${i}`})}))})):this._post({type:Kg,jobId:r},b)}_onOpenedMessage(t){const{jobId:i,data:r}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Ti(s.abortHandle),s.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,o=this._outJobs.get(i);o&&(this._outJobs.delete(i),Ti(o.abortHandle),r?o.reject(de.fromJSON(JSON.parse(r))):o.resolve(s))}_post(t,i,r){return O7(this.worker,t,i,r)}}let $f=Se("esri-workers-debug")?1:Se("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):Se("host-browser")?navigator.hardwareConcurrency-1:0;$f||($f=Se("safari")&&Se("mac")?7:2);let SF=0;const y3=[];function Ofe(){MB()}async function $_(e,t){const i=new ffe;return await i.open(e,t),i}async function Pfe(e,t={}){if(typeof e!="string")throw new de("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(Se("host-webworker")&&!Se("esri-workers")&&(i="local"),i==="local"){let r=await Kn.loadWorker(e);r||(r=await pe(()=>import(e),[])),or(t.signal);const s=t.client||r;return $_([Kn.connect(r)],{...t,client:s})}if(await MB(),or(t.signal),i==="dedicated"){const r=SF++%$f;return $_([await y3[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,$f);if(r<$f){const s=new Array(r);for(let o=0;o<r;++o){const c=SF++%$f;s[o]=y3[c].open(e,t)}return $_(s,t)}}return $_(y3.map(r=>r.open(e,t)),t)}let k_=null;async function MB(){if(k_)return k_;new AbortController;const e=[];for(let t=0;t<$f;t++){const i=F7.create(t).then(r=>(y3[t]=r,r));e.push(i)}return k_=Promise.all(e),k_}function Ffe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Bd(e,t,i,r,s,o,c,u,g,b,S,E,A,O,L,N,z){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=o,e[5]=c,e[6]=u,e[7]=g,e[8]=b,e[9]=S,e[10]=E,e[11]=A,e[12]=O,e[13]=L,e[14]=N,e[15]=z,e}function jw(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Rc(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],o=t[6],c=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=s,e[13]=c,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Lfe(e,t){return TB(e,t)||jw(e),e}function TB(e,t){const i=t[0],r=t[1],s=t[2],o=t[3],c=t[4],u=t[5],g=t[6],b=t[7],S=t[8],E=t[9],A=t[10],O=t[11],L=t[12],N=t[13],z=t[14],q=t[15],Z=i*u-r*c,ee=i*g-s*c,ie=i*b-o*c,ne=r*g-s*u,oe=r*b-o*u,me=s*b-o*g,fe=S*N-E*L,Ce=S*z-A*L,_e=S*q-O*L,Ae=E*z-A*N,Oe=E*q-O*N,je=A*q-O*z;let De=Z*je-ee*Oe+ie*Ae+ne*_e-oe*Ce+me*fe;return De?(De=1/De,e[0]=(u*je-g*Oe+b*Ae)*De,e[1]=(s*Oe-r*je-o*Ae)*De,e[2]=(N*me-z*oe+q*ne)*De,e[3]=(A*oe-E*me-O*ne)*De,e[4]=(g*_e-c*je-b*Ce)*De,e[5]=(i*je-s*_e+o*Ce)*De,e[6]=(z*ie-L*me-q*ee)*De,e[7]=(S*me-A*ie+O*ee)*De,e[8]=(c*Oe-u*_e+b*fe)*De,e[9]=(r*_e-i*Oe-o*fe)*De,e[10]=(L*oe-N*ie+q*Z)*De,e[11]=(E*ie-S*oe-O*Z)*De,e[12]=(u*Ce-c*Ae-g*fe)*De,e[13]=(i*Ae-r*Ce+s*fe)*De,e[14]=(N*ee-L*ne-z*Z)*De,e[15]=(S*ne-E*ee+A*Z)*De,e):null}function Rfe(e,t){const i=t[0],r=t[1],s=t[2],o=t[3],c=t[4],u=t[5],g=t[6],b=t[7],S=t[8],E=t[9],A=t[10],O=t[11],L=t[12],N=t[13],z=t[14],q=t[15];return e[0]=u*(A*q-O*z)-E*(g*q-b*z)+N*(g*O-b*A),e[1]=-(r*(A*q-O*z)-E*(s*q-o*z)+N*(s*O-o*A)),e[2]=r*(g*q-b*z)-u*(s*q-o*z)+N*(s*b-o*g),e[3]=-(r*(g*O-b*A)-u*(s*O-o*A)+E*(s*b-o*g)),e[4]=-(c*(A*q-O*z)-S*(g*q-b*z)+L*(g*O-b*A)),e[5]=i*(A*q-O*z)-S*(s*q-o*z)+L*(s*O-o*A),e[6]=-(i*(g*q-b*z)-c*(s*q-o*z)+L*(s*b-o*g)),e[7]=i*(g*O-b*A)-c*(s*O-o*A)+S*(s*b-o*g),e[8]=c*(E*q-O*N)-S*(u*q-b*N)+L*(u*O-b*E),e[9]=-(i*(E*q-O*N)-S*(r*q-o*N)+L*(r*O-o*E)),e[10]=i*(u*q-b*N)-c*(r*q-o*N)+L*(r*b-o*u),e[11]=-(i*(u*O-b*E)-c*(r*O-o*E)+S*(r*b-o*u)),e[12]=-(c*(E*z-A*N)-S*(u*z-g*N)+L*(u*A-g*E)),e[13]=i*(E*z-A*N)-S*(r*z-s*N)+L*(r*A-s*E),e[14]=-(i*(u*z-g*N)-c*(r*z-s*N)+L*(r*g-s*u)),e[15]=i*(u*A-g*E)-c*(r*A-s*E)+S*(r*g-s*u),e}function Nfe(e){const t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],c=e[5],u=e[6],g=e[7],b=e[8],S=e[9],E=e[10],A=e[11],O=e[12],L=e[13],N=e[14],z=e[15];return(t*c-i*o)*(E*z-A*N)-(t*u-r*o)*(S*z-A*L)+(t*g-s*o)*(S*N-E*L)+(i*u-r*c)*(b*z-A*O)-(i*g-s*c)*(b*N-E*O)+(r*g-s*u)*(b*L-S*O)}function CB(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],g=t[5],b=t[6],S=t[7],E=t[8],A=t[9],O=t[10],L=t[11],N=t[12],z=t[13],q=t[14],Z=t[15];let ee=i[0],ie=i[1],ne=i[2],oe=i[3];return e[0]=ee*r+ie*u+ne*E+oe*N,e[1]=ee*s+ie*g+ne*A+oe*z,e[2]=ee*o+ie*b+ne*O+oe*q,e[3]=ee*c+ie*S+ne*L+oe*Z,ee=i[4],ie=i[5],ne=i[6],oe=i[7],e[4]=ee*r+ie*u+ne*E+oe*N,e[5]=ee*s+ie*g+ne*A+oe*z,e[6]=ee*o+ie*b+ne*O+oe*q,e[7]=ee*c+ie*S+ne*L+oe*Z,ee=i[8],ie=i[9],ne=i[10],oe=i[11],e[8]=ee*r+ie*u+ne*E+oe*N,e[9]=ee*s+ie*g+ne*A+oe*z,e[10]=ee*o+ie*b+ne*O+oe*q,e[11]=ee*c+ie*S+ne*L+oe*Z,ee=i[12],ie=i[13],ne=i[14],oe=i[15],e[12]=ee*r+ie*u+ne*E+oe*N,e[13]=ee*s+ie*g+ne*A+oe*z,e[14]=ee*o+ie*b+ne*O+oe*q,e[15]=ee*c+ie*S+ne*L+oe*Z,e}function Dfe(e,t,i){const r=i[0],s=i[1],o=i[2];if(t===e)e[12]=t[0]*r+t[4]*s+t[8]*o+t[12],e[13]=t[1]*r+t[5]*s+t[9]*o+t[13],e[14]=t[2]*r+t[6]*s+t[10]*o+t[14],e[15]=t[3]*r+t[7]*s+t[11]*o+t[15];else{const c=t[0],u=t[1],g=t[2],b=t[3],S=t[4],E=t[5],A=t[6],O=t[7],L=t[8],N=t[9],z=t[10],q=t[11];e[0]=c,e[1]=u,e[2]=g,e[3]=b,e[4]=S,e[5]=E,e[6]=A,e[7]=O,e[8]=L,e[9]=N,e[10]=z,e[11]=q,e[12]=c*r+S*s+L*o+t[12],e[13]=u*r+E*s+N*o+t[13],e[14]=g*r+A*s+z*o+t[14],e[15]=b*r+O*s+q*o+t[15]}return e}function jfe(e,t,i){const r=i[0],s=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function zfe(e,t,i,r){let s,o,c,u,g,b,S,E,A,O,L,N,z,q,Z,ee,ie,ne,oe,me,fe,Ce,_e,Ae,Oe=r[0],je=r[1],De=r[2],nt=Math.sqrt(Oe*Oe+je*je+De*De);return nt<Ro()?null:(nt=1/nt,Oe*=nt,je*=nt,De*=nt,s=Math.sin(i),o=Math.cos(i),c=1-o,u=t[0],g=t[1],b=t[2],S=t[3],E=t[4],A=t[5],O=t[6],L=t[7],N=t[8],z=t[9],q=t[10],Z=t[11],ee=Oe*Oe*c+o,ie=je*Oe*c+De*s,ne=De*Oe*c-je*s,oe=Oe*je*c-De*s,me=je*je*c+o,fe=De*je*c+Oe*s,Ce=Oe*De*c+je*s,_e=je*De*c-Oe*s,Ae=De*De*c+o,e[0]=u*ee+E*ie+N*ne,e[1]=g*ee+A*ie+z*ne,e[2]=b*ee+O*ie+q*ne,e[3]=S*ee+L*ie+Z*ne,e[4]=u*oe+E*me+N*fe,e[5]=g*oe+A*me+z*fe,e[6]=b*oe+O*me+q*fe,e[7]=S*oe+L*me+Z*fe,e[8]=u*Ce+E*_e+N*Ae,e[9]=g*Ce+A*_e+z*Ae,e[10]=b*Ce+O*_e+q*Ae,e[11]=S*Ce+L*_e+Z*Ae,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Vfe(e,t,i){const r=Math.sin(i),s=Math.cos(i),o=t[4],c=t[5],u=t[6],g=t[7],b=t[8],S=t[9],E=t[10],A=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+b*r,e[5]=c*s+S*r,e[6]=u*s+E*r,e[7]=g*s+A*r,e[8]=b*s-o*r,e[9]=S*s-c*r,e[10]=E*s-u*r,e[11]=A*s-g*r,e}function Gfe(e,t,i){const r=Math.sin(i),s=Math.cos(i),o=t[0],c=t[1],u=t[2],g=t[3],b=t[8],S=t[9],E=t[10],A=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-b*r,e[1]=c*s-S*r,e[2]=u*s-E*r,e[3]=g*s-A*r,e[8]=o*r+b*s,e[9]=c*r+S*s,e[10]=u*r+E*s,e[11]=g*r+A*s,e}function Ufe(e,t,i){const r=Math.sin(i),s=Math.cos(i),o=t[0],c=t[1],u=t[2],g=t[3],b=t[4],S=t[5],E=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+b*r,e[1]=c*s+S*r,e[2]=u*s+E*r,e[3]=g*s+A*r,e[4]=b*s-o*r,e[5]=S*s-c*r,e[6]=E*s-u*r,e[7]=A*s-g*r,e}function AB(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function qfe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bfe(e,t,i){if(t===0)return jw(e);let r,s,o,c=i[0],u=i[1],g=i[2],b=Math.sqrt(c*c+u*u+g*g);return b<Ro()?null:(b=1/b,c*=b,u*=b,g*=b,r=Math.sin(t),s=Math.cos(t),o=1-s,e[0]=c*c*o+s,e[1]=u*c*o+g*r,e[2]=g*c*o-u*r,e[3]=0,e[4]=c*u*o-g*r,e[5]=u*u*o+s,e[6]=g*u*o+c*r,e[7]=0,e[8]=c*g*o+u*r,e[9]=u*g*o-c*r,e[10]=g*g*o+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Hfe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Wfe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Jfe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $B(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=r+r,g=s+s,b=o+o,S=r*u,E=r*g,A=r*b,O=s*g,L=s*b,N=o*b,z=c*u,q=c*g,Z=c*b;return e[0]=1-(O+N),e[1]=E+Z,e[2]=A-q,e[3]=0,e[4]=E-Z,e[5]=1-(S+N),e[6]=L+z,e[7]=0,e[8]=A+q,e[9]=L-z,e[10]=1-(S+O),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function Yfe(e,t){const i=Kfe,r=-t[0],s=-t[1],o=-t[2],c=t[3],u=t[4],g=t[5],b=t[6],S=t[7],E=r*r+s*s+o*o+c*c;return E>0?(i[0]=2*(u*c+S*r+g*o-b*s)/E,i[1]=2*(g*c+S*s+b*r-u*o)/E,i[2]=2*(b*c+S*o+u*s-g*r)/E):(i[0]=2*(u*c+S*r+g*o-b*s),i[1]=2*(g*c+S*s+b*r-u*o),i[2]=2*(b*c+S*o+u*s-g*r)),$B(e,t,i),e}const Kfe=Jt();function Zfe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Xfe(e,t){const i=t[0],r=t[1],s=t[2],o=t[4],c=t[5],u=t[6],g=t[8],b=t[9],S=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(o*o+c*c+u*u),e[2]=Math.sqrt(g*g+b*b+S*S),e}function Qfe(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function e0e(e,t,i,r){const s=t[0],o=t[1],c=t[2],u=t[3],g=s+s,b=o+o,S=c+c,E=s*g,A=s*b,O=s*S,L=o*b,N=o*S,z=c*S,q=u*g,Z=u*b,ee=u*S,ie=r[0],ne=r[1],oe=r[2];return e[0]=(1-(L+z))*ie,e[1]=(A+ee)*ie,e[2]=(O-Z)*ie,e[3]=0,e[4]=(A-ee)*ne,e[5]=(1-(E+z))*ne,e[6]=(N+q)*ne,e[7]=0,e[8]=(O+Z)*oe,e[9]=(N-q)*oe,e[10]=(1-(E+L))*oe,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function t0e(e,t,i,r,s){const o=t[0],c=t[1],u=t[2],g=t[3],b=o+o,S=c+c,E=u+u,A=o*b,O=o*S,L=o*E,N=c*S,z=c*E,q=u*E,Z=g*b,ee=g*S,ie=g*E,ne=r[0],oe=r[1],me=r[2],fe=s[0],Ce=s[1],_e=s[2],Ae=(1-(N+q))*ne,Oe=(O+ie)*ne,je=(L-ee)*ne,De=(O-ie)*oe,nt=(1-(A+q))*oe,mt=(z+Z)*oe,ct=(L+ee)*me,dt=(z-Z)*me,Nt=(1-(A+N))*me;return e[0]=Ae,e[1]=Oe,e[2]=je,e[3]=0,e[4]=De,e[5]=nt,e[6]=mt,e[7]=0,e[8]=ct,e[9]=dt,e[10]=Nt,e[11]=0,e[12]=i[0]+fe-(Ae*fe+De*Ce+ct*_e),e[13]=i[1]+Ce-(Oe*fe+nt*Ce+dt*_e),e[14]=i[2]+_e-(je*fe+mt*Ce+Nt*_e),e[15]=1,e}function i0e(e,t){const i=t[0],r=t[1],s=t[2],o=t[3],c=i+i,u=r+r,g=s+s,b=i*c,S=r*c,E=r*u,A=s*c,O=s*u,L=s*g,N=o*c,z=o*u,q=o*g;return e[0]=1-E-L,e[1]=S+q,e[2]=A-z,e[3]=0,e[4]=S-q,e[5]=1-b-L,e[6]=O+N,e[7]=0,e[8]=A+z,e[9]=O-N,e[10]=1-b-E,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function r0e(e,t,i,r,s,o,c){const u=1/(i-t),g=1/(s-r),b=1/(o-c);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*g,e[6]=0,e[7]=0,e[8]=(i+t)*u,e[9]=(s+r)*g,e[10]=(c+o)*b,e[11]=-1,e[12]=0,e[13]=0,e[14]=c*o*2*b,e[15]=0,e}function s0e(e,t,i,r,s){const o=1/Math.tan(t/2);let c;return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(c=1/(r-s),e[10]=(s+r)*c,e[14]=2*s*r*c):(e[10]=-1,e[14]=-2*r),e}function n0e(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),c=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),g=2/(c+u),b=2/(s+o);return e[0]=g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=b,e[6]=0,e[7]=0,e[8]=-(c-u)*g*.5,e[9]=(s-o)*b*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function o0e(e,t,i,r,s,o,c){const u=1/(t-i),g=1/(r-s),b=1/(o-c);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*b,e[11]=0,e[12]=(t+i)*u,e[13]=(s+r)*g,e[14]=(c+o)*b,e[15]=1,e}function a0e(e,t,i,r){let s,o,c,u,g,b,S,E,A,O;const L=t[0],N=t[1],z=t[2],q=r[0],Z=r[1],ee=r[2],ie=i[0],ne=i[1],oe=i[2],me=Ro();return Math.abs(L-ie)<me&&Math.abs(N-ne)<me&&Math.abs(z-oe)<me?jw(e):(S=L-ie,E=N-ne,A=z-oe,O=1/Math.sqrt(S*S+E*E+A*A),S*=O,E*=O,A*=O,s=Z*A-ee*E,o=ee*S-q*A,c=q*E-Z*S,O=Math.sqrt(s*s+o*o+c*c),O?(O=1/O,s*=O,o*=O,c*=O):(s=0,o=0,c=0),u=E*c-A*o,g=A*s-S*c,b=S*o-E*s,O=Math.sqrt(u*u+g*g+b*b),O?(O=1/O,u*=O,g*=O,b*=O):(u=0,g=0,b=0),e[0]=s,e[1]=u,e[2]=S,e[3]=0,e[4]=o,e[5]=g,e[6]=E,e[7]=0,e[8]=c,e[9]=b,e[10]=A,e[11]=0,e[12]=-(s*L+o*N+c*z),e[13]=-(u*L+g*N+b*z),e[14]=-(S*L+E*N+A*z),e[15]=1,e)}function l0e(e,t,i,r){const s=t[0],o=t[1],c=t[2],u=r[0],g=r[1],b=r[2];let S=s-i[0],E=o-i[1],A=c-i[2],O=S*S+E*E+A*A;O>0&&(O=1/Math.sqrt(O),S*=O,E*=O,A*=O);let L=g*A-b*E,N=b*S-u*A,z=u*E-g*S;return O=L*L+N*N+z*z,O>0&&(O=1/Math.sqrt(O),L*=O,N*=O,z*=O),e[0]=L,e[1]=N,e[2]=z,e[3]=0,e[4]=E*z-A*N,e[5]=A*L-S*z,e[6]=S*N-E*L,e[7]=0,e[8]=S,e[9]=E,e[10]=A,e[11]=0,e[12]=s,e[13]=o,e[14]=c,e[15]=1,e}function u0e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function c0e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function h0e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function kB(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function d0e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function p0e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function f0e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function m0e(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],o=e[3],c=e[4],u=e[5],g=e[6],b=e[7],S=e[8],E=e[9],A=e[10],O=e[11],L=e[12],N=e[13],z=e[14],q=e[15],Z=t[0],ee=t[1],ie=t[2],ne=t[3],oe=t[4],me=t[5],fe=t[6],Ce=t[7],_e=t[8],Ae=t[9],Oe=t[10],je=t[11],De=t[12],nt=t[13],mt=t[14],ct=t[15],dt=Ro();return Math.abs(i-Z)<=dt*Math.max(1,Math.abs(i),Math.abs(Z))&&Math.abs(r-ee)<=dt*Math.max(1,Math.abs(r),Math.abs(ee))&&Math.abs(s-ie)<=dt*Math.max(1,Math.abs(s),Math.abs(ie))&&Math.abs(o-ne)<=dt*Math.max(1,Math.abs(o),Math.abs(ne))&&Math.abs(c-oe)<=dt*Math.max(1,Math.abs(c),Math.abs(oe))&&Math.abs(u-me)<=dt*Math.max(1,Math.abs(u),Math.abs(me))&&Math.abs(g-fe)<=dt*Math.max(1,Math.abs(g),Math.abs(fe))&&Math.abs(b-Ce)<=dt*Math.max(1,Math.abs(b),Math.abs(Ce))&&Math.abs(S-_e)<=dt*Math.max(1,Math.abs(S),Math.abs(_e))&&Math.abs(E-Ae)<=dt*Math.max(1,Math.abs(E),Math.abs(Ae))&&Math.abs(A-Oe)<=dt*Math.max(1,Math.abs(A),Math.abs(Oe))&&Math.abs(O-je)<=dt*Math.max(1,Math.abs(O),Math.abs(je))&&Math.abs(L-De)<=dt*Math.max(1,Math.abs(L),Math.abs(De))&&Math.abs(N-nt)<=dt*Math.max(1,Math.abs(N),Math.abs(nt))&&Math.abs(z-mt)<=dt*Math.max(1,Math.abs(z),Math.abs(mt))&&Math.abs(q-ct)<=dt*Math.max(1,Math.abs(q),Math.abs(ct))}function y0e(e){const t=Ro(),i=e[0],r=e[1],s=e[2],o=e[4],c=e[5],u=e[6],g=e[8],b=e[9],S=e[10];return Math.abs(1-(i*i+o*o+g*g))<=t&&Math.abs(1-(r*r+c*c+b*b))<=t&&Math.abs(1-(s*s+u*u+S*S))<=t}function g0e(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const v0e=CB,b0e=kB;Object.freeze(Object.defineProperty({__proto__:null,add:h0e,adjoint:Rfe,copy:Ffe,determinant:Nfe,equals:m0e,exactEquals:f0e,frob:c0e,fromQuat:i0e,fromQuat2:Yfe,fromRotation:Bfe,fromRotationTranslation:$B,fromRotationTranslationScale:e0e,fromRotationTranslationScaleOrigin:t0e,fromScaling:qfe,fromTranslation:AB,fromXRotation:Hfe,fromYRotation:Wfe,fromZRotation:Jfe,frustum:r0e,getRotation:Qfe,getScaling:Xfe,getTranslation:Zfe,hasIdentityRotation:g0e,identity:jw,invert:TB,invertOrIdentity:Lfe,isOrthoNormal:y0e,lookAt:a0e,mul:v0e,multiply:CB,multiplyScalar:d0e,multiplyScalarAndAdd:p0e,ortho:o0e,perspective:s0e,perspectiveFromFieldOfView:n0e,rotate:zfe,rotateX:Vfe,rotateY:Gfe,rotateZ:Ufe,scale:jfe,set:Bd,str:u0e,sub:b0e,subtract:kB,targetTo:l0e,translate:Dfe,transpose:Rc},Symbol.toStringTag,{value:"Module"}));let TI,ye=null;function OB(){return!!ye}function w0e(){return!!Se("esri-wasm")}function PB(){return TI||(TI=pe(()=>import("./pe-wasm.c681b595.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Dt(`esri/geometry/support/${t}`)})).then(e=>{LB(e)}),TI)}var RT,Qi,NT;(function(e){function t(o,c,u){ye.ensureCache.prepare();const g=ff(u),b=u===g,S=ye.ensureFloat64(g),E=ye._pe_geog_to_proj(ye.getPointer(o),c,S);return E&&od(u,c,S,b),E}function i(o,c,u,g){switch(g){case Qi.PE_TRANSFORM_P_TO_G:return r(o,c,u);case Qi.PE_TRANSFORM_G_TO_P:return t(o,c,u)}return 0}function r(o,c,u){return s(o,c,u,0)}function s(o,c,u,g){ye.ensureCache.prepare();const b=ff(u),S=u===b,E=ye.ensureFloat64(b),A=ye._pe_proj_to_geog_center(ye.getPointer(o),c,E,g);return A&&od(u,c,E,S),A}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(RT||(RT={})),function(e){function t(){e.PE_BUFFER_MAX=ye.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=ye.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=ye.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=ye.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=ye.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=ye.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=ye.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=ye.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=ye.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=ye.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=ye.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=ye.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=ye.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=ye.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=ye.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=ye.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=ye.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=ye.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=ye.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=ye.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=ye.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=ye.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=ye.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=ye.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=ye.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=ye.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=ye.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=ye.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=ye.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=ye.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Qi||(Qi={})),function(e){const t={},i={},r=O=>{if(O){const L=O.getType();switch(L){case Qi.PE_TYPE_GEOGCS:O=ye.castObject(O,ye.PeGeogcs);break;case Qi.PE_TYPE_PROJCS:O=ye.castObject(O,ye.PeProjcs);break;case Qi.PE_TYPE_GEOGTRAN:O=ye.castObject(O,ye.PeGeogtran);break;default:L&Qi.PE_TYPE_UNIT&&(O=ye.castObject(O,ye.PeUnit))}}return O};function s(){ye.PeFactory.prototype.initialize(null)}function o(O){return c(Qi.PE_TYPE_COORDSYS,O)}function c(O,L){let N=null,z=t[O];if(z||(z={},t[O]=z),z.hasOwnProperty(String(L)))N=z[L];else{const q=ye.PeFactory.prototype.factoryByType(O,L);ye.compare(q,ye.NULL)||(N=q,z[L]=N)}return N=r(N),N}function u(O,L){let N=null,z=i[O];if(z||(z={},i[O]=z),z.hasOwnProperty(L))N=z[L];else{const q=ye.PeFactory.prototype.fromString(O,L);ye.compare(q,ye.NULL)||(N=q,z[L]=N)}return N=r(N),N}function g(O){return c(Qi.PE_TYPE_GEOGCS,O)}function b(O){return c(Qi.PE_TYPE_GEOGTRAN,O)}function S(O){return ye.PeFactory.prototype.getCode(O)}function E(O){return c(Qi.PE_TYPE_PROJCS,O)}function A(O){return c(Qi.PE_TYPE_UNIT,O)}e.initialize=s,e.coordsys=o,e.factoryByType=c,e.fromString=u,e.geogcs=g,e.geogtran=b,e.getCode=S,e.projcs=E,e.unit=A}(NT||(NT={}));let FB=null;var Nx,DT,jT,zT,Dx,VT,jx,zx,GT;function LB(e){function t(o,c,u){o[c]=u(o[c])}ye=e,Qi.init(),Nx.init(),Dx.init(),jx.init(),zx.init(),FB=class extends ye.PeGCSExtent{destroy(){ye.destroy(this)}};const i=[ye.PeDatum,ye.PeGeogcs,ye.PeGeogtran,ye.PeObject,ye.PeParameter,ye.PePrimem,ye.PeProjcs,ye.PeSpheroid,ye.PeUnit];for(const o of i)t(o.prototype,"getName",c=>function(){return c.call(this,new Array(Qi.PE_NAME_MAX))});for(const o of[ye.PeGeogtran,ye.PeProjcs])t(o.prototype,"getParameters",c=>function(){const u=new Array(Qi.PE_PARM_MAX);let g=c.call(this);for(let b=0;b<u.length;b++){const S=ye.getValue(g,"*");u[b]=S?ye.wrapPointer(S,ye.PeParameter):null,g+=Int32Array.BYTES_PER_ELEMENT}return u});t(ye.PeHorizon.prototype,"getCoord",o=>function(){const c=this.getSize();if(!c)return null;const u=[];return od(u,c,o.call(this)),u}),t(ye.PeGTlistExtendedEntry.prototype,"getEntries",o=>{const c=ye._pe_getPeGTlistExtendedGTsSize();return function(){let u=null;const g=o.call(this);if(!ye.compare(g,ye.NULL)){u=[g];const b=this.getSteps();if(b>1){const S=ye.getPointer(g);for(let E=1;E<b;E++)u.push(ye.wrapPointer(S+c*E,ye.PeGTlistExtendedGTs))}}return u}});const r=ye._pe_getPeHorizonSize(),s=o=>function(){let c=this._cache;if(c||(c=new Map,this._cache=c),c.has(o))return c.get(o);let u=null;const g=o.call(this);if(!ye.compare(g,ye.NULL)){u=[g];const b=g.getNump();if(b>1){const S=ye.getPointer(g);for(let E=1;E<b;E++)u.push(ye.wrapPointer(S+r*E,ye.PeHorizon))}}return c.set(o,u),u};t(ye.PeProjcs.prototype,"horizonGcsGenerate",s),t(ye.PeProjcs.prototype,"horizonPcsGenerate",s),ye.PeObject.prototype.toString=function(o=Qi.PE_STR_OPTS_NONE){ye.ensureCache.prepare();const c=ye.getPointer(this),u=ye.ensureInt8(new Array(Qi.PE_BUFFER_MAX));return ye.UTF8ToString(ye._pe_object_to_string_ext(c,o,u))}}function wu(e){if(!e)return;const t=ye.getClass(e);if(!t)return;const i=ye.getCache(t);if(!i)return;const r=ye.getPointer(e);r&&delete i[r]}function O_(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push(ye.ensureInt8(r));return i}function ff(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function od(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=ye.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let o=0;o<t;o++)s&&(e[o]=new Array(2)),e[o][0]=ye.getValue(i,"double"),e[o][1]=ye.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=ye.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=ye._pe_getPeGTlistExtendedEntrySize()}function r(s,o,c,u,g,b){let S=null;const E=new ye.PeInteger(b);try{const A=ye.PeGTlistExtended.prototype.getGTlist(s,o,c,u,g,E);if((b=E.val)&&(S=[A],b>1)){const O=ye.getPointer(A);for(let L=1;L<b;L++)S.push(ye.wrapPointer(O+t*L,ye.PeGTlistExtendedEntry))}}finally{ye.destroy(E)}return S}e.init=i,e.getGTlist=r})(Nx||(Nx={})),function(e){function t(i){if(i&&i.length){for(const r of i)wu(r),r.getEntries().forEach(s=>{wu(s);const o=s.getGeogtran();wu(o),o.getParameters().forEach(wu),[o.getGeogcs1(),o.getGeogcs2()].forEach(c=>{wu(c);const u=c.getDatum();wu(u),wu(u.getSpheroid()),wu(c.getPrimem()),wu(c.getUnit())})});ye.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(DT||(DT={})),function(e){function t(i,r,s,o,c){ye.ensureCache.prepare();const u=ff(s),g=s===u,b=ye.ensureFloat64(u);let S=0;o&&(S=ye.ensureFloat64(o));const E=ye._pe_geog_to_geog(ye.getPointer(i),r,b,S,c);return E&&od(s,r,b,g),E}e.geogToGeog=t}(jT||(jT={})),function(e){const t=(b,S,E,A,O,L)=>{let N,z;switch(ye.ensureCache.prepare(),b){case"dd":N=ye._pe_geog_to_dd,z=Qi.PE_DD_MAX;break;case"ddm":N=ye._pe_geog_to_ddm,z=Qi.PE_DDM_MAX;break;case"dms":N=ye._pe_geog_to_dms,z=Qi.PE_DMS_MAX}let q=0;S&&(q=ye.getPointer(S));const Z=ff(A),ee=ye.ensureFloat64(Z),ie=O_(E,z),ne=N(q,E,ee,O,ye.ensureInt32(ie));if(ne)for(let oe=0;oe<E;oe++)L[oe]=ye.UTF8ToString(ie[oe]);return ne},i=(b,S,E,A,O)=>{let L;switch(ye.ensureCache.prepare(),b){case"dd":L=ye._pe_dd_to_geog;break;case"ddm":L=ye._pe_ddm_to_geog;break;case"dms":L=ye._pe_dms_to_geog}let N=0;S&&(N=ye.getPointer(S));const z=A.map(ie=>ye.ensureString(ie)),q=ye.ensureInt32(z),Z=ye.ensureFloat64(new Array(2*E)),ee=L(N,E,q,Z);return ee&&od(O,E,Z),ee};function r(b,S,E,A,O){return t("dms",b,S,E,A,O)}function s(b,S,E,A){return i("dms",b,S,E,A)}function o(b,S,E,A,O){return t("ddm",b,S,E,A,O)}function c(b,S,E,A){return i("ddm",b,S,E,A)}function u(b,S,E,A,O){return t("dd",b,S,E,A,O)}function g(b,S,E,A){return i("dd",b,S,E,A)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=o,e.ddmToGeog=c,e.geogToDd=u,e.ddToGeog=g}(zT||(zT={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=ye.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=ye.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=ye.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=ye.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=ye.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,o,c,u,g,b,S){ye.ensureCache.prepare();let E=0;s&&(E=ye.getPointer(s));const A=ff(c),O=ye.ensureFloat64(A),L=O_(o,Qi.PE_MGRS_MAX),N=ye.ensureInt32(L),z=ye._pe_geog_to_mgrs_extended(E,o,O,u,g,b,N);if(z)for(let q=0;q<o;q++)S[q]=ye.UTF8ToString(L[q]);return z}function r(s,o,c,u,g){ye.ensureCache.prepare();let b=0;s&&(b=ye.getPointer(s));const S=c.map(L=>ye.ensureString(L)),E=ye.ensureInt32(S),A=ye.ensureFloat64(new Array(2*o)),O=ye._pe_mgrs_to_geog_extended(b,o,E,u,A);return O&&od(g,o,A),O}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(Dx||(Dx={})),function(e){function t(r,s,o,c,u,g,b){ye.ensureCache.prepare();let S=0;r&&(S=ye.getPointer(r));const E=ff(o),A=ye.ensureFloat64(E),O=O_(s,Qi.PE_MGRS_MAX),L=ye.ensureInt32(O),N=ye._pe_geog_to_usng(S,s,A,c,u,g,L);if(N)for(let z=0;z<s;z++)b[z]=ye.UTF8ToString(O[z]);return N}function i(r,s,o,c){ye.ensureCache.prepare();let u=0;r&&(u=ye.getPointer(r));const g=o.map(A=>ye.ensureString(A)),b=ye.ensureInt32(g),S=ye.ensureFloat64(new Array(2*s)),E=ye._pe_usng_to_geog(u,s,b,S);return E&&od(c,s,S),E}e.geogToUsng=t,e.usngToGeog=i}(VT||(VT={})),function(e){function t(){e.PE_UTM_OPTS_NONE=ye.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=ye.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=ye.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,o,c,u,g){ye.ensureCache.prepare();let b=0;s&&(b=ye.getPointer(s));const S=ff(c),E=ye.ensureFloat64(S),A=O_(o,Qi.PE_UTM_MAX),O=ye.ensureInt32(A),L=ye._pe_geog_to_utm(b,o,E,u,O);if(L)for(let N=0;N<o;N++)g[N]=ye.UTF8ToString(A[N]);return L}function r(s,o,c,u,g){ye.ensureCache.prepare();let b=0;s&&(b=ye.getPointer(s));const S=c.map(L=>ye.ensureString(L)),E=ye.ensureInt32(S),A=ye.ensureFloat64(new Array(2*o)),O=ye._pe_utm_to_geog(b,o,E,u,A);return O&&od(g,o,A),O}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(jx||(jx={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=ye.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=ye.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=ye.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=ye.PePCSInfo.prototype.PE_POLE_POINT}function r(s,o=e.PE_PCSINFO_OPTION_DOMAIN){let c=null,u=null;return t.has(s)&&(u=t.get(s),u[o]&&(c=u[o])),c||(c=ye.PePCSInfo.prototype.generate(s,o),u||(u=[],t.set(s,u)),u[o]=c),c}e.init=i,e.generate=r}(zx||(zx={})),function(e){function t(){return ye.PeVersion.prototype.version_string()}e.versionString=t}(GT||(GT={}));const _0e=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return RT},get PeDefs(){return Qi},get PeFactory(){return NT},get PeGCSExtent(){return FB},get PeGTTransformations(){return jT},get PeGTlistExtended(){return Nx},get PeGTlistExtendedEntry(){return DT},get PeNotationDms(){return zT},get PeNotationMgrs(){return Dx},get PeNotationUsng(){return VT},get PeNotationUtm(){return jx},get PePCSInfo(){return zx},get PeVersion(){return GT},_init:LB,get _pe(){return ye},isLoaded:OB,isSupported:w0e,load:PB},Symbol.toStringTag,{value:"Module"})),Wn=Math.PI/180,x0e=/SPHEROID\[([^\]]+)]/i,Yc=Bi.radius,Ea=Bi.eccentricitySquared,S0e={a1:Yc*Ea,a2:Yc*Ea*Yc*Ea,a3:Yc*Ea*Ea/2,a4:Yc*Ea*Yc*Ea*2.5,a5:Yc*Ea+Yc*Ea*Ea/2,a6:1-Ea},I0e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Bi.radius,f:Bi.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:kd.radius,f:kd.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:yc.radius,f:yc.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:yc.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let P_=0;class my{static fromGE(t){const i=new my;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=P_++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=P_++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=P_++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=P_++}getInverse(){const t=new my;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class md{static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new md;let r="";for(const s of t.steps){const o=my.fromGE(s);i.steps.push(o),r+=o.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof my?this.steps.push(i):this.steps.push(new my({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new md;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[md.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const o of this.steps)r+=o.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[md.cacheKey(t,i)];return s===void 0?null:s}}function RB(e,t,i){if(ae(t)||ae(i)||i.vcsWkid||Hi(t,i))return null;const r=ky(t)/ky(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>E0e(s,r);case"polyline":case"esriGeometryPolyline":return s=>T0e(s,r);case"polygon":case"esriGeometryPolygon":return s=>M0e(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>C0e(s,r);case"extent":case"esriGeometryExtent":return s=>A0e(s,r);default:return null}}function E0e(e,t){e&&e.z!=null&&(e.z*=t)}function M0e(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function T0e(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function C0e(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function A0e(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Ed=null,jb=null,CI=null,AI={};const NB=new M6;function Rd(){return!!Ed&&OB()}function Nd(e){return ae(CI)&&(CI=Promise.all([PB(),pe(()=>Promise.resolve().then(function(){return LCe}),void 0).then(t=>t.g),pe(()=>Promise.resolve().then(function(){return GCe}),void 0)])),CI.then(([,t,{hydratedAdapter:i}])=>{or(e),jb=i,Ed=t.default,Ed._enableProjection(_0e),NB.notify()})}function lu(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:Vx(jb,e,e[0].spatialReference,t,i,r):Vx(jb,[e],e.spatialReference,t,i,r)[0]}function Vx(e,t,i,r,s=null,o=null){if(ae(i)||ae(r))return t;if(uu(i,r,s))return t.map(c=>P0e(c,i,r));if(ae(s)){const c=md.cacheKey(i,r);AI[c]!==void 0?s=AI[c]:(s=k0e(i,r,void 0),ae(s)&&(s=new md),AI[c]=s)}if(ae(Ed)||ae(e))throw new L7;return U(o)?Ed._project(e,t,i,r,s,o):Ed._project(e,t,i,r,s)}function TDe(e,t){const i=$0e([e],t);return U(i.pending)?{pending:i.pending,geometry:null}:U(i.geometries)?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function $0e(e,t){if(!Rd()){for(const i of e)if(U(i)&&!Hi(i.spatialReference,t)&&Sr(i.spatialReference)&&Sr(t)&&!uu(i.spatialReference,t))return gt(NB),{pending:Nd(),geometries:null}}return{pending:null,geometries:e.map(i=>ae(i)?null:Hi(i.spatialReference,t)?i:Sr(i.spatialReference)&&Sr(t)?O0e(i,t):null)}}function k0e(e,t,i=null){if(ae(e)||ae(t))return null;if(ae(Ed)||ae(jb))throw new L7;const r=Ed._getTransformation(jb,e,t,i,i==null?void 0:i.spatialReference);return r!==null?md.fromGE(r):null}class L7 extends de{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var ce;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(ce||(ce={}));function O0e(e,t){try{const i=lu(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=RB(i.type,e.spatialReference,t);return U(r)&&r(i),i}catch(i){if(!(i instanceof L7))throw i;return null}}function uu(e,t,i){return!i&&(!!Hi(e,t)||Sr(e)&&Sr(t)&&!!GB(e,t,UB))}async function R7(e,t,i,r){if(Rd())return yP(r);if(Array.isArray(e)){for(const{source:s,dest:o,geographicTransformation:c}of e)if(!uu(s,o,c))return Nd(r)}else if(!uu(e,t,i))return Nd(r);return yP(r)}function P0e(e,t,i){return e?"x"in e?DB(e,t,new pt,i,0):"xmin"in e?R0e(e,t,new vi,i,0):"rings"in e?jB(e,t,new Qn,i,0):"paths"in e?L0e(e,t,new Eo,i,0):"points"in e?F0e(e,t,new Ew,i,0):null:null}function CDe(e,t,i=t.spatialReference,r=0){return U(i)&&U(e.spatialReference)&&U(DB(e,e.spatialReference,t,i,r))}function DB(e,t,i,r,s){Ui[0]=e.x,Ui[1]=e.y;const o=e.z;return Ui[2]=o!==void 0?o:s,Pc(Ui,t,0,Ui,r,0,1)?(i.x=Ui[0],i.y=Ui[1],i.spatialReference=r,o===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Ui[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function F0e(e,t,i,r,s){const{points:o,hasZ:c,hasM:u}=e,g=[],b=o.length,S=[];for(const E of o)S.push(E[0],E[1],c?E[2]:s);if(!Pc(S,t,0,S,r,0,b))return null;for(let E=0;E<b;++E){const A=3*E,O=S[A],L=S[A+1];c&&u?g.push([O,L,S[A+2],o[E][3]]):c?g.push([O,L,S[A+2]]):u?g.push([O,L,o[E][2]]):g.push([O,L])}return i.points=g,i.spatialReference=r,i.hasZ=c,i.hasM=u,i}function L0e(e,t,i,r,s){const{paths:o,hasZ:c,hasM:u}=e,g=[];return zB(o,c!=null?c:!1,u!=null?u:!1,t,g,r,s)?(i.paths=g,i.spatialReference=r,i.hasZ=c,i.hasM=u,i):null}function ADe({hasZ:e,spatialReference:t,paths:i},r,s=0){const o=d0(t,P5),c=yd[o][ce.WGS84_COMPARABLE_LON_LAT];if(ae(c))return!1;const u=e?g=>g:g=>$c(Ui,g[0],g[1],s);for(const g of i){const b=[];for(const S of g){const E=[0,0,s];c(u(S),0,E,0),b.push(E)}r.push(b)}return!0}function $De({hasZ:e,spatialReference:t,rings:i},r,s=0){const o=d0(t,P5),c=yd[o][ce.WGS84_COMPARABLE_LON_LAT];if(ae(c))return!1;const u=e?g=>g:g=>$c(Ui,g[0],g[1],s);for(const g of i){const b=[];for(const S of g){const E=[0,0,s];c(u(S),0,E,0),b.push(E)}r.push(b)}return!0}function kDe(e,t,i=t.spatialReference,r=0){return U(e.spatialReference)&&U(i)&&U(jB(e,e.spatialReference,t,i,r))}function jB(e,t,i,r,s){const{rings:o,hasZ:c,hasM:u}=e,g=[];return zB(o,c!=null?c:!1,u!=null?u:!1,t,g,r,s)?(i.rings=g,i.spatialReference=r,i.hasZ=c,i.hasM=u,i):null}function R0e(e,t,i,r,s){const{xmin:o,ymin:c,xmax:u,ymax:g,hasZ:b,hasM:S}=e;return IF(o,c,b?e.zmin:s,t,Ui,r)?(i.xmin=Ui[0],i.ymin=Ui[1],b&&(i.zmin=Ui[2]),IF(u,g,b?e.zmax:s,t,Ui,r)?(i.xmax=Ui[0],i.ymax=Ui[1],b&&(i.zmax=Ui[2]),S&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null):null}function ODe(e,t,i){return Pc(e,t,0,Ui,i.spatialReference,0,1)?(i.x=Ui[0],i.y=Ui[1],i.z=Ui[2],i):null}function PDe(e,t,i,r=0){Ui[0]=e.x,Ui[1]=e.y;const s=e.z;return Ui[2]=s!==void 0?s:r,Pc(Ui,e.spatialReference,0,t,i,0,1)}function IF(e,t,i,r,s,o){return Li[0]=e,Li[1]=t,Li[2]=i,Pc(Li,r,0,s,o,0,1)}function FDe(e,t,i,r){return!(ae(t)||ae(r)||e.length<2)&&(e.length===2&&(Li[0]=e[0],Li[1]=e[1],Li[2]=0,e=Li),Pc(e,t,0,i,r,0,1))}function LDe(e,t,i){return N0e(e,t,i)}function N0e(e,t,i){if(ae(t))return!1;const r=d0(t,P5),s=yd[r][ce.WGS84_COMPARABLE_LON_LAT];return!ae(s)&&(s(e,0,Li,0),i!==Li&&(i[0]=Li[0],i[1]=Li[1],i.length>2&&(i[2]=Li[2])),!0)}function Pc(e,t,i,r,s,o,c=1){const u=GB(t,s,UB);if(ae(u))return!1;if(u===Ii){if(e===r&&i===o)return!0;const b=i+3*c;for(let S=i,E=o;S<b;S++,E++)r[E]=e[S];return!0}const g=i+3*c;for(let b=i,S=o;b<g;b+=3,S+=3)u(e,b,r,S);return!0}function zB(e,t,i,r,s,o,c=0){const u=new Array;for(const b of e)for(const S of b)u.push(S[0],S[1],t?S[2]:c);if(!Pc(u,r,0,u,o,0,u.length/3))return!1;let g=0;s.length=0;for(const b of e){const S=new Array;for(const E of b)t&&i?S.push([u[g++],u[g++],u[g++],E[3]]):t?S.push([u[g++],u[g++],u[g++]]):i?(S.push([u[g++],u[g++],E[2]]),g++):(S.push([u[g++],u[g++]]),g++);s.push(S)}return!0}function RDe(e,t,i,r){return e!=null&&(Hi(t,r)?(_7(i,e),!0):(Li[0]=e[0],Li[1]=e[1],Li[2]=0,!!Pc(Li,t,0,Li,r,0,1)&&(i[0]=Li[0],i[1]=Li[1],Li[0]=e[2],Li[1]=e[3],Li[2]=0,!!Pc(Li,t,0,Li,r,0,1)&&(i[2]=Li[0],i[3]=Li[1],!0))))}function NDe(e,t,i,r){if(ae(e)||ae(r))return!1;const s=d0(e,P5),o=d0(r,eme);if(s===o&&!EF(o)&&(s!==ce.UNKNOWN||Hi(e,r)))return AB(i,t),!0;if(EF(o)){const c=yd[s][ce.LON_LAT],u=yd[ce.LON_LAT][o];return!ae(c)&&!ae(u)&&(c(t,0,Kc,0),u(Kc,0,Zc,0),VB(Kl*Kc[0],Kl*Kc[1],i),i[12]=Zc[0],i[13]=Zc[1],i[14]=Zc[2],!0)}if((o===ce.WEB_MERCATOR||o===ce.PLATE_CARREE)&&(s===ce.WGS84||s===ce.CGCS2000&&o===ce.PLATE_CARREE||s===ce.SPHERICAL_ECEF||s===ce.WEB_MERCATOR)){const c=yd[s][ce.LON_LAT],u=yd[ce.LON_LAT][o];return!ae(c)&&!ae(u)&&(c(t,0,Kc,0),u(Kc,0,Zc,0),s===ce.SPHERICAL_ECEF?D0e(Kl*Kc[0],Kl*Kc[1],i):jw(i),i[12]=Zc[0],i[13]=Zc[1],i[14]=Zc[2],!0)}return!1}function EF(e){return e===ce.SPHERICAL_ECEF||e===ce.SPHERICAL_MARS_PCPF||e===ce.SPHERICAL_MOON_PCPF}function VB(e,t,i){const r=Math.sin(e),s=Math.cos(e),o=Math.sin(t),c=Math.cos(t),u=i;return u[0]=-r,u[4]=-o*s,u[8]=c*s,u[12]=0,u[1]=s,u[5]=-o*r,u[9]=c*r,u[13]=0,u[2]=0,u[6]=c,u[10]=o,u[14]=0,u[3]=0,u[7]=0,u[11]=0,u[15]=1,u}function D0e(e,t,i){return VB(e,t,i),Rc(i,i),i}function d0(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Od(e,1)),e.wkt===Tle.wkt?t.spatialReferenceId=ce.SPHERICAL_ECEF:_b(e)?t.spatialReferenceId=ce.WGS84:nu(e)?t.spatialReferenceId=ce.WEB_MERCATOR:Sle(e)?t.spatialReferenceId=ce.PLATE_CARREE:e.wkt===Cle.wkt?t.spatialReferenceId=ce.WGS84_ECEF:e.wkid===o0.CGCS2000?t.spatialReferenceId=ce.CGCS2000:e.wkt===QG.wkt?t.spatialReferenceId=ce.SPHERICAL_MARS_PCPF:e.wkt===eU.wkt?t.spatialReferenceId=ce.SPHERICAL_MOON_PCPF:G6(e)?t.spatialReferenceId=ce.GCSMARS2000:q6(e)?t.spatialReferenceId=ce.GCSMOON2000:t.spatialReferenceId=ce.UNKNOWN):ce.UNKNOWN}function Ii(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function yy(e,t,i,r){i[r++]=Dy*(e[t++]/Bi.radius),i[r++]=Dy*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/Bi.radius))),i[r]=e[t]}function j0e(e,t,i,r){yy(e,t,i,r),Pf(i,r,i,r)}function z0e(e,t,i,r){yy(e,t,i,r),Lf(i,r,i,r)}function V0e(e,t,i,r,s){const o=.4999999*Math.PI,c=so(Kl*e[t+1],-o,o),u=Math.sin(c);i[r++]=Kl*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+u)/(1-u)),i[r]=e[t+2]}function zb(e,t,i,r){V0e(e,t,i,r,Bi)}const MF=Bi.radius*Math.PI/180,TF=180/(Bi.radius*Math.PI);function kf(e,t,i,r){i[r]=e[t]*MF,i[r+1]=e[t+1]*MF,i[r+2]=e[t+2]}function Of(e,t,i,r){i[r]=e[t]*TF,i[r+1]=e[t+1]*TF,i[r+2]=e[t+2]}function G0e(e,t,i,r){yy(e,t,i,r),kf(i,r,i,r)}function U0e(e,t,i,r){Rf(e,t,i,r),kf(i,r,i,r)}function q0e(e,t,i,r){Ff(e,t,i,r),kf(i,r,i,r)}function B0e(e,t,i,r){Of(e,t,i,r),Pf(i,r,i,r)}function H0e(e,t,i,r){Of(e,t,i,r),zb(i,r,i,r)}function W0e(e,t,i,r){Of(e,t,i,r),Lf(i,r,i,r)}function N7(e,t,i,r,s){const o=s+e[t+2],c=Kl*e[t+1],u=Kl*e[t],g=Math.cos(c);i[r++]=Math.cos(u)*g*o,i[r++]=Math.sin(u)*g*o,i[r]=Math.sin(c)*o}function CF(e,t,i,r){N7(e,t,i,r,kd.radius)}function AF(e,t,i,r){N7(e,t,i,r,yc.radius)}function Pf(e,t,i,r){N7(e,t,i,r,Bi.radius)}function D7(e,t,i,r,s){const o=e[t],c=e[t+1],u=e[t+2],g=Math.sqrt(o*o+c*c+u*u),b=XU(u/(g===0?1:g)),S=Math.atan2(c,o);i[r++]=Dy*S,i[r++]=Dy*b,i[r]=g-s}function $F(e,t,i,r){D7(e,t,i,r,kd.radius)}function kF(e,t,i,r){D7(e,t,i,r,yc.radius)}function Ff(e,t,i,r){D7(e,t,i,r,Bi.radius)}function J0e(e,t,i,r){Ff(e,t,i,r),zb(i,r,i,r)}function Y0e(e,t,i,r){Ff(e,t,i,r),Lf(i,r,i,r)}function K0e(e,t,i,r,s){const o=Kl*e[t],c=Kl*e[t+1],u=e[t+2],g=Math.sin(c),b=Math.cos(c),S=s.radius/Math.sqrt(1-s.eccentricitySquared*g*g);i[r++]=(S+u)*b*Math.cos(o),i[r++]=(S+u)*b*Math.sin(o),i[r++]=(S*(1-s.eccentricitySquared)+u)*g}function Lf(e,t,i,r){K0e(e,t,i,r,Bi)}function Rf(e,t,i,r){const s=S0e,o=e[t],c=e[t+1],u=e[t+2];let g,b,S,E,A,O,L,N,z,q,Z,ee,ie,ne,oe,me,fe,Ce,_e,Ae,Oe;g=Math.abs(u),b=o*o+c*c,S=Math.sqrt(b),E=b+u*u,A=Math.sqrt(E),Ae=Math.atan2(c,o),O=u*u/E,L=b/E,ne=s.a2/A,oe=s.a3-s.a4/A,L>.3?(N=g/A*(1+L*(s.a1+ne+O*oe)/A),_e=Math.asin(N),q=N*N,z=Math.sqrt(1-q)):(z=S/A*(1-O*(s.a5-ne-L*oe)/A),_e=Math.acos(z),q=1-z*z,N=Math.sqrt(q)),Z=1-Bi.eccentricitySquared*q,ee=Bi.radius/Math.sqrt(Z),ie=s.a6*ee,ne=S-ee*z,oe=g-ie*N,fe=z*ne+N*oe,me=z*oe-N*ne,Ce=me/(ie/Z+fe),_e+=Ce,Oe=fe+me*Ce/2,u<0&&(_e=-_e),i[r++]=Dy*Ae,i[r++]=Dy*_e,i[r]=Oe}function Z0e(e,t,i,r){Rf(e,t,i,r),Pf(i,r,i,r)}function X0e(e,t,i,r){Rf(e,t,i,r),zb(i,r,i,r)}const yd={[ce.WGS84]:{[ce.CGCS2000]:null,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:null,[ce.LON_LAT]:Ii,[ce.WGS84_COMPARABLE_LON_LAT]:Ii,[ce.SPHERICAL_ECEF]:Pf,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:zb,[ce.PLATE_CARREE]:kf,[ce.WGS84]:Ii,[ce.WGS84_ECEF]:Lf},[ce.CGCS2000]:{[ce.CGCS2000]:Ii,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:null,[ce.LON_LAT]:Ii,[ce.WGS84_COMPARABLE_LON_LAT]:Ii,[ce.SPHERICAL_ECEF]:Pf,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:null,[ce.PLATE_CARREE]:kf,[ce.WGS84]:null,[ce.WGS84_ECEF]:Lf},[ce.GCSMARS2000]:{[ce.CGCS2000]:null,[ce.GCSMARS2000]:Ii,[ce.GCSMOON2000]:null,[ce.LON_LAT]:Ii,[ce.WGS84_COMPARABLE_LON_LAT]:null,[ce.SPHERICAL_ECEF]:null,[ce.SPHERICAL_MARS_PCPF]:AF,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:null,[ce.PLATE_CARREE]:null,[ce.WGS84]:null,[ce.WGS84_ECEF]:null},[ce.GCSMOON2000]:{[ce.CGCS2000]:null,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:Ii,[ce.LON_LAT]:Ii,[ce.WGS84_COMPARABLE_LON_LAT]:null,[ce.SPHERICAL_ECEF]:null,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:CF,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:null,[ce.PLATE_CARREE]:null,[ce.WGS84]:null,[ce.WGS84_ECEF]:null},[ce.WEB_MERCATOR]:{[ce.CGCS2000]:null,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:null,[ce.LON_LAT]:yy,[ce.WGS84_COMPARABLE_LON_LAT]:yy,[ce.SPHERICAL_ECEF]:j0e,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:Ii,[ce.PLATE_CARREE]:G0e,[ce.WGS84]:yy,[ce.WGS84_ECEF]:z0e},[ce.WGS84_ECEF]:{[ce.CGCS2000]:Rf,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:null,[ce.LON_LAT]:Rf,[ce.WGS84_COMPARABLE_LON_LAT]:Rf,[ce.SPHERICAL_ECEF]:Z0e,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:X0e,[ce.PLATE_CARREE]:U0e,[ce.WGS84]:Rf,[ce.WGS84_ECEF]:Ii},[ce.SPHERICAL_ECEF]:{[ce.CGCS2000]:Ff,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:null,[ce.LON_LAT]:Ff,[ce.WGS84_COMPARABLE_LON_LAT]:Ff,[ce.SPHERICAL_ECEF]:Ii,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:J0e,[ce.PLATE_CARREE]:q0e,[ce.WGS84]:Ff,[ce.WGS84_ECEF]:Y0e},[ce.SPHERICAL_MARS_PCPF]:{[ce.CGCS2000]:null,[ce.GCSMARS2000]:kF,[ce.GCSMOON2000]:null,[ce.LON_LAT]:kF,[ce.WGS84_COMPARABLE_LON_LAT]:null,[ce.SPHERICAL_ECEF]:null,[ce.SPHERICAL_MARS_PCPF]:Ii,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:null,[ce.PLATE_CARREE]:null,[ce.WGS84]:null,[ce.WGS84_ECEF]:null},[ce.SPHERICAL_MOON_PCPF]:{[ce.CGCS2000]:null,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:$F,[ce.LON_LAT]:$F,[ce.WGS84_COMPARABLE_LON_LAT]:null,[ce.SPHERICAL_ECEF]:null,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:Ii,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:null,[ce.PLATE_CARREE]:null,[ce.WGS84]:null,[ce.WGS84_ECEF]:null},[ce.UNKNOWN]:{[ce.CGCS2000]:null,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:null,[ce.LON_LAT]:null,[ce.WGS84_COMPARABLE_LON_LAT]:null,[ce.SPHERICAL_ECEF]:null,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:Ii,[ce.WEB_MERCATOR]:null,[ce.PLATE_CARREE]:null,[ce.WGS84]:null,[ce.WGS84_ECEF]:null},[ce.LON_LAT]:{[ce.CGCS2000]:Ii,[ce.GCSMARS2000]:Ii,[ce.GCSMOON2000]:Ii,[ce.LON_LAT]:Ii,[ce.WGS84_COMPARABLE_LON_LAT]:Ii,[ce.SPHERICAL_ECEF]:Pf,[ce.SPHERICAL_MARS_PCPF]:AF,[ce.SPHERICAL_MOON_PCPF]:CF,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:zb,[ce.PLATE_CARREE]:kf,[ce.WGS84]:Ii,[ce.WGS84_ECEF]:Lf},[ce.WGS84_COMPARABLE_LON_LAT]:{[ce.CGCS2000]:null,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:null,[ce.LON_LAT]:Ii,[ce.WGS84_COMPARABLE_LON_LAT]:Ii,[ce.SPHERICAL_ECEF]:Pf,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:null,[ce.PLATE_CARREE]:kf,[ce.WGS84]:Ii,[ce.WGS84_ECEF]:Lf},[ce.PLATE_CARREE]:{[ce.CGCS2000]:Of,[ce.GCSMARS2000]:null,[ce.GCSMOON2000]:null,[ce.LON_LAT]:Of,[ce.WGS84_COMPARABLE_LON_LAT]:Of,[ce.SPHERICAL_ECEF]:B0e,[ce.SPHERICAL_MARS_PCPF]:null,[ce.SPHERICAL_MOON_PCPF]:null,[ce.UNKNOWN]:null,[ce.WEB_MERCATOR]:H0e,[ce.PLATE_CARREE]:Ii,[ce.WGS84]:Of,[ce.WGS84_ECEF]:W0e}};function GB(e,t,i=j7()){return ae(e)||ae(t)?null:Q0e(e,t,i).projector}function Q0e(e,t,i){if(ae(e)||ae(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=d0(e,i.source),s=d0(t,i.dest);return r===ce.UNKNOWN&&s===ce.UNKNOWN?Hi(e,t)?i.projector=Ii:i.projector=null:i.projector=yd[r][s],i}function j7(){return{source:{spatialReference:null,spatialReferenceId:ce.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ce.UNKNOWN,metersPerUnit:1},projector:Ii}}const P5={spatialReference:null,spatialReferenceId:ce.UNKNOWN},eme={spatialReference:null,spatialReferenceId:ce.UNKNOWN},UB=j7();j7();const Kl=ghe(1),Dy=ZU(1),Li=Jt(),Kc=Jt(),Zc=Jt(),Ui=Jt();var UT;let Rl=UT=class extends $e{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new UT({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};v([_({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Rl.prototype,"cols",void 0),v([_({type:gi,json:{write:!0}})],Rl.prototype,"level",void 0),v([_({type:String,json:{write:!0}})],Rl.prototype,"levelValue",void 0),v([_({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Rl.prototype,"origin",void 0),v([_({type:Number,json:{write:!0}})],Rl.prototype,"resolution",void 0),v([_({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Rl.prototype,"rows",void 0),v([_({type:Number,json:{write:!0}})],Rl.prototype,"scale",void 0),Rl=UT=v([K("esri.layers.support.LOD")],Rl);const Kh=Rl;class tme{constructor(t,i,r,s,o){this.id=t,this.level=i,this.row=r,this.col=s,this.extent=o}}var wh;const OF=new It({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Yr=wh=class extends $e{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=wt.WebMercator,numLODs:o=24}=e;if(!Sr(s)){const E=[];if(i)for(let A=0;A<i.length;A++){const O=i[A];E.push(new Kh({level:A,scale:O,resolution:O}))}else{let A=5e-4;for(let O=o-1;O>=0;O--)E.unshift(new Kh({level:O,scale:A,resolution:A})),A*=2}return new wh({dpi:96,lods:E,origin:new pt(0,0,s),size:[r,r],spatialReference:s})}const c=ua(s),u=e.origin?new pt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new pt(c?{x:c.origin[0],y:c.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),g=96,b=1/(Od(s)*39.37*g),S=[];if(i)for(let E=0;E<i.length;E++){const A=i[E],O=A*b;S.push(new Kh({level:E,scale:A,resolution:O}))}else{let E=d5(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const A=Math.ceil(o/t);S.push(new Kh({level:0,scale:E,resolution:E*b}));for(let O=1;O<A;O++){const L=E/2**t,N=L*b;S.push(new Kh({level:O,scale:L,resolution:N})),E=L}}return new wh({dpi:g,lods:S,origin:u,size:[r,r],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=ua(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return pt.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],s=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(o=>{r.push(o.scale),t=o.scale>t?o.scale:t,i=o.scale<i?o.scale:i,s[o.level]=o})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],o=t[r+1];if(s<=e)return r;if(o===e)return r+1;if(s>e&&o<e)return r+Math.log(s/e)/Math.log(s/o)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let o,c;if(typeof t=="number")o=t,c=i;else if(Hi(t.spatialReference,this.spatialReference))o=t.x,c=t.y,r=i;else{const b=p5(t,this.spatialReference);if(ae(b))return null;o=b.x,c=b.y,r=i}const u=s.resolution*this.size[0],g=s.resolution*this.size[1];return r||(r=new tme(null,0,0,0,Oc())),r.level=e,r.row=Math.floor((this.origin.y-c)/g+.001),r.col=Math.floor((o-this.origin.x)/u+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=wh.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===wh.ExtrapolateOptions.POWER_OF_TWO){const c=this.lods[this.lods.length-1];c.level<e.level&&(i=c)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,o=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Oc()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,s=r*this.size[0],o=r*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){var t,i;return(i=(t=this._levelToLOD)==null?void 0:t[e])!=null?i:null}clone(){return wh.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],r=this.lods.length;for(let s=0;s<r;s++){const o=this.lods[s],c=o.resolution*t;i.push(new Kh({level:o.level,scale:o.scale,resolution:c}))}return new wh({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};v([_({type:Number,json:{write:!0}})],Yr.prototype,"compressionQuality",void 0),v([_({type:Number,json:{write:!0}})],Yr.prototype,"dpi",void 0),v([_({type:String,json:{read:OF.read,write:OF.write,origins:{"web-scene":{read:!1,write:!1}}}})],Yr.prototype,"format",void 0),v([_({readOnly:!0})],Yr.prototype,"isWrappable",null),v([_({type:pt,json:{write:!0}})],Yr.prototype,"origin",void 0),v([Ne("origin")],Yr.prototype,"readOrigin",null),v([_({type:[Kh],value:null,json:{write:!0}})],Yr.prototype,"lods",null),v([_({readOnly:!0})],Yr.prototype,"minScale",void 0),v([_({readOnly:!0})],Yr.prototype,"maxScale",void 0),v([_({readOnly:!0})],Yr.prototype,"scales",void 0),v([_({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Yr.prototype,"size",void 0),v([Ne("size",["rows","cols"])],Yr.prototype,"readSize",null),v([qe("size",{cols:{type:gi},rows:{type:gi}})],Yr.prototype,"writeSize",null),v([_({type:wt,json:{write:!0}})],Yr.prototype,"spatialReference",void 0),Yr=wh=v([K("esri.layers.support.TileInfo")],Yr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Yr||(Yr={}));const ime=Yr,g3={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},$I={xsmall:544,small:768,medium:992,large:1200};function rme(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function kI(e,t){return t?g3[e].valueToClassName[t].split(" "):[]}const sme=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new Vr,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=$I}initialize(){this._breakpointsHandles.add(ge(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),rt))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=ti(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const r=rme(i);if(!r){const s=JSON.stringify($I,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}i=r?i:$I,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=En.acquire(),r=En.acquire();let s,o=!1;for(s in g3){const c=this[s],u=g3[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});c!==u&&(o=!0,this[s]=u,kI(s,c).forEach(g=>r.push(g)),kI(s,u).forEach(g=>i.push(g)))}o&&(this._applyClassNameChanges(i,r),En.release(i),En.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(o=>s.classList.remove(o)),i.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in g3)kI(r,this[r]).forEach(s=>i.classList.remove(s))}};return v([_()],t.prototype,"breakpoints",null),v([_()],t.prototype,"orientation",void 0),v([_()],t.prototype,"widthBreakpoint",void 0),v([_()],t.prototype,"heightBreakpoint",void 0),t=v([K("esri.views.BreakpointsOwner")],t),t};function F5(e){return typeof e=="string"?document.getElementById(e):e!=null?e:null}function qB(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function PF(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function FF(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}function nme(e){e.parentNode&&e.parentNode.removeChild(e)}let Jf=class extends Re{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new Vr,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,ge)}addWhen(e,t,i={}){return this._installWatch(e,t,i,ts)}addOnCollectionChange(e,t,{initial:i=!1,final:r=!1}={}){const s=++this._handleId;return this._handles.add([$i(e,"after-changes",this._createSyncUpdatingCallback(),au),$i(e,"change",t,{onListenerAdd:i?o=>t({added:o.toArray(),removed:[]}):void 0,onListenerRemove:r?o=>t({added:[],removed:o.toArray()}):void 0})],s),{remove:()=>this._handles.remove(s)}}addPromise(e){if(ae(e))return e;const t=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(F_)||this._set("updating",!1))}},t),this._pendingPromises.add(e),this._set("updating",!0);const i=()=>this._handles.remove(t);return e.then(i,i),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},r){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,s);const o=r(e,t,i);return this._handles.add(o,s),{remove:()=>this._handles.remove(s)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),r=ge(e,i,{sync:!0,equals:()=>!1});return this._handles.add(r,t),r}_createSyncUpdatingCallback(){return()=>{this._handles.remove(F_),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(ug(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(F_))}),F_)}}};v([_({readOnly:!0})],Jf.prototype,"updating",void 0),Jf=v([K("esri.core.support.WatchUpdatingTracking")],Jf);const F_=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var ome=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},mf={exports:{}},hr={},Vb={exports:{}},I0={};function BB(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function ame(e,t,i){}function lme(e,t,i){}var ume=/javascript\s*\:/img;function cme(e,t){return ume.test(t)?"":t}I0.whiteList=BB();I0.getDefaultWhiteList=BB;I0.onAttr=ame;I0.onIgnoreAttr=lme;I0.safeAttrValue=cme;var hme={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Zg=hme;function dme(e,t){e=Zg.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,o=0,c="";function u(){if(!r){var S=Zg.trim(e.slice(s,o)),E=S.indexOf(":");if(E!==-1){var A=Zg.trim(S.slice(0,E)),O=Zg.trim(S.slice(E+1));if(A){var L=t(s,c.length,A,O,S);L&&(c+=L+"; ")}}}s=o+1}for(;o<i;o++){var g=e[o];if(g==="/"&&e[o+1]==="*"){var b=e.indexOf("*/",o+2);if(b===-1)break;o=b+1,s=o+1,r=!1}else g==="("?r=!0:g===")"?r=!1:g===";"?r||u():g===`
`&&u()}return Zg.trim(c)}var pme=dme,L_=I0,fme=pme;function LF(e){return e==null}function mme(e){var t={};for(var i in e)t[i]=e[i];return t}function HB(e){e=mme(e||{}),e.whiteList=e.whiteList||L_.whiteList,e.onAttr=e.onAttr||L_.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||L_.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||L_.safeAttrValue,this.options=e}HB.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,o=i.onIgnoreAttr,c=i.safeAttrValue,u=fme(e,function(g,b,S,E,A){var O=r[S],L=!1;if(O===!0?L=O:typeof O=="function"?L=O(E):O instanceof RegExp&&(L=O.test(E)),L!==!0&&(L=!1),E=c(S,E),!!E){var N={position:b,sourcePosition:g,source:A,isWhite:L};if(L){var z=s(S,E,N);return LF(z)?S+":"+E:z}else{var z=o(S,E,N);if(!LF(z))return z}}});return u};var yme=HB;(function(e,t){var i=I0,r=yme;function s(c,u){var g=new r(u);return g.process(c)}t=e.exports=s,t.FilterCSS=r;for(var o in i)t[o]=i[o]})(Vb,Vb.exports);var z7={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},gme=Vb.exports.FilterCSS,vme=Vb.exports.getDefaultWhiteList,Gx=z7;function WB(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var JB=new gme;function bme(e,t,i){}function wme(e,t,i){}function _me(e,t,i){}function xme(e,t,i){}function YB(e){return e.replace(Ime,"&lt;").replace(Eme,"&gt;")}function Sme(e,t,i,r){if(i=tH(i),t==="href"||t==="src"){if(i=Gx.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(R_.lastIndex=0,R_.test(i))return""}else if(t==="style"){if(RF.lastIndex=0,RF.test(i)||(NF.lastIndex=0,NF.test(i)&&(R_.lastIndex=0,R_.test(i))))return"";r!==!1&&(r=r||JB,i=r.process(i))}return i=iH(i),i}var Ime=/</g,Eme=/>/g,Mme=/"/g,Tme=/&quot;/g,Cme=/&#([a-zA-Z0-9]*);?/gim,Ame=/&colon;?/gim,$me=/&newline;?/gim,R_=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,RF=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,NF=/u\s*r\s*l\s*\(.*/gi;function KB(e){return e.replace(Mme,"&quot;")}function ZB(e){return e.replace(Tme,'"')}function XB(e){return e.replace(Cme,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function QB(e){return e.replace(Ame,":").replace($me," ")}function eH(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return Gx.trim(t)}function tH(e){return e=ZB(e),e=XB(e),e=QB(e),e=eH(e),e}function iH(e){return e=KB(e),e=YB(e),e}function kme(){return""}function Ome(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(c){return i?!0:Gx.indexOf(e,c)!==-1}var s=[],o=!1;return{onIgnoreTag:function(c,u,g){if(r(c))if(g.isClosing){var b="[/removed]",S=g.position+b.length;return s.push([o!==!1?o:g.position,S]),o=!1,b}else return o||(o=g.position),"[removed]";else return t(c,u,g)},remove:function(c){var u="",g=0;return Gx.forEach(s,function(b){u+=c.slice(g,b[0]),g=b[1]}),u+=c.slice(g),u}}}function Pme(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function Fme(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}hr.whiteList=WB();hr.getDefaultWhiteList=WB;hr.onTag=bme;hr.onIgnoreTag=wme;hr.onTagAttr=_me;hr.onIgnoreTagAttr=xme;hr.safeAttrValue=Sme;hr.escapeHtml=YB;hr.escapeQuote=KB;hr.unescapeQuote=ZB;hr.escapeHtmlEntities=XB;hr.escapeDangerHtml5Entities=QB;hr.clearNonPrintableCharacter=eH;hr.friendlyAttrValue=tH;hr.escapeAttrValue=iH;hr.onIgnoreTagStripAll=kme;hr.StripTagBody=Ome;hr.stripCommentTag=Pme;hr.stripBlankChar=Fme;hr.cssFilter=JB;hr.getDefaultCSSWhiteList=vme;var L5={},Zh=z7;function Lme(e){var t=Zh.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=Zh.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function Rme(e){return e.slice(0,2)==="</"}function Nme(e,t,i){var r="",s=0,o=!1,c=!1,u=0,g=e.length,b="",S="";e:for(u=0;u<g;u++){var E=e.charAt(u);if(o===!1){if(E==="<"){o=u;continue}}else if(c===!1){if(E==="<"){r+=i(e.slice(s,u)),o=u,s=u;continue}if(E===">"){r+=i(e.slice(s,o)),S=e.slice(o,u+1),b=Lme(S),r+=t(o,r.length,b,S,Rme(S)),s=u+1,o=!1;continue}if(E==='"'||E==="'")for(var A=1,O=e.charAt(u-A);O.trim()===""||O==="=";){if(O==="="){c=E;continue e}O=e.charAt(u-++A)}}else if(E===c){c=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var Dme=/[^a-zA-Z0-9\\_:.-]/gim;function jme(e,t){var i=0,r=0,s=[],o=!1,c=e.length;function u(A,O){if(A=Zh.trim(A),A=A.replace(Dme,"").toLowerCase(),!(A.length<1)){var L=t(A,O||"");L&&s.push(L)}}for(var g=0;g<c;g++){var b=e.charAt(g),S,E;if(o===!1&&b==="="){o=e.slice(i,g),i=g+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:Vme(e,g+1);continue}if(o!==!1&&g===r){if(E=e.indexOf(b,g+1),E===-1)break;S=Zh.trim(e.slice(r+1,E)),u(o,S),o=!1,g=E,i=g+1;continue}if(/\s|\n|\t/.test(b))if(e=e.replace(/\s|\n|\t/g," "),o===!1)if(E=zme(e,g),E===-1){S=Zh.trim(e.slice(i,g)),u(S),o=!1,i=g+1;continue}else{g=E-1;continue}else if(E=Gme(e,g-1),E===-1){S=Zh.trim(e.slice(i,g)),S=DF(S),u(o,S),o=!1,i=g+1;continue}else continue}return i<e.length&&(o===!1?u(e.slice(i)):u(o,DF(Zh.trim(e.slice(i))))),Zh.trim(s.join(" "))}function zme(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Vme(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function Gme(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Ume(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function DF(e){return Ume(e)?e.substr(1,e.length-2):e}L5.parseTag=Nme;L5.parseAttr=jme;var qme=Vb.exports.FilterCSS,Ja=hr,rH=L5,Bme=rH.parseTag,Hme=rH.parseAttr,v3=z7;function N_(e){return e==null}function Wme(e){var t=v3.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=v3.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=v3.trim(e.slice(0,-1))),{html:e,closing:i}}function Jme(e){var t={};for(var i in e)t[i]=e[i];return t}function Yme(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function sH(e){e=Jme(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ja.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Yme(e.whiteList||e.allowList):e.whiteList=Ja.whiteList,e.onTag=e.onTag||Ja.onTag,e.onTagAttr=e.onTagAttr||Ja.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ja.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ja.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ja.safeAttrValue,e.escapeHtml=e.escapeHtml||Ja.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new qme(e.css))}sH.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,o=i.onIgnoreTag,c=i.onTagAttr,u=i.onIgnoreTagAttr,g=i.safeAttrValue,b=i.escapeHtml,S=t.cssFilter;i.stripBlankChar&&(e=Ja.stripBlankChar(e)),i.allowCommentTag||(e=Ja.stripCommentTag(e));var E=!1;i.stripIgnoreTagBody&&(E=Ja.StripTagBody(i.stripIgnoreTagBody,o),o=E.onIgnoreTag);var A=Bme(e,function(O,L,N,z,q){var Z={sourcePosition:O,position:L,isClosing:q,isWhite:Object.prototype.hasOwnProperty.call(r,N)},ee=s(N,z,Z);if(!N_(ee))return ee;if(Z.isWhite){if(Z.isClosing)return"</"+N+">";var ie=Wme(z),ne=r[N],oe=Hme(ie.html,function(me,fe){var Ce=v3.indexOf(ne,me)!==-1,_e=c(N,me,fe,Ce);return N_(_e)?Ce?(fe=g(N,me,fe,S),fe?me+'="'+fe+'"':me):(_e=u(N,me,fe,Ce),N_(_e)?void 0:_e):_e});return z="<"+N,oe&&(z+=" "+oe),ie.closing&&(z+=" /"),z+=">",z}else return ee=o(N,z,Z),N_(ee)?b(z):ee},b);return E&&(A=E.remove(A)),A};var Kme=sH;(function(e,t){var i=hr,r=L5,s=Kme;function o(u,g){var b=new s(g);return b.process(u)}t=e.exports=o,t.filterXSS=o,t.FilterXSS=s,function(){for(var u in i)t[u]=i[u];for(var g in r)t[g]=r[g]}();function c(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}c()&&(self.filterXSS=e.exports)})(mf,mf.exports);var Zme=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(o,c,u,g){return o==="a"&&c==="href"||(o==="img"||o==="source")&&c==="src"?r.sanitizeUrl(u):mf.exports.safeAttrValue(o,c,u,g)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(o){o==="whiteList"?s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]):s[o]=t[o]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList),this.xssFilterOptions=s,this._xssFilter=new mf.exports.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t=="undefined"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i!=null?i:{}).isProtocolRequired,s=r===void 0?!0:r,o=this._trim(t.substring(0,t.indexOf(":"))),c=t==="/",u=/^#/.test(t),g=o&&this.allowedProtocols.indexOf(o.toLowerCase())>-1;return c||u||g?mf.exports.escapeAttrValue(t):!o&&!s?mf.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):mf.exports.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,o=void 0;if(Array.isArray(t))o=t.reduce(function(u,g){var b=r.validate(g,i);return b.isValid?u.concat([g]):(s=!0,u.concat([b.sanitized]))},[]);else if(ome(t)){var c=Object.keys(t);o=c.reduce(function(u,g){var b=t[g],S=r.validate(b,i);return S.isValid?u[g]=b:(s=!0,u[g]=S.sanitized),u},{})}else return i.allowUndefined&&typeof t=="undefined"?void 0:null;return s?o:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const R5=new Map;function nH(){R5.clear()}function Xme(e){return R5.get(e)}function Qme(e,t){R5.set(e,t)}function OI(e){R5.delete(e)}var p0,jy,eye=function(e){if("WebkitTransition"in e.style)p0="webkitTransitionEnd",jy="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");p0="transitionend",jy="animationend"}},oH=function(e){p0||eye(e)},tye=function(e,t){return t===void 0&&(t=e+"-active"),function(i){oH(i);var r=!1,s=function(o){r||(r=!0,i.removeEventListener(p0,s),i.removeEventListener(jy,s),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(p0,s),i.addEventListener(jy,s),requestAnimationFrame(function(){i.classList.add(t)})}},iye=function(e,t){return t===void 0&&(t=e+"-active"),function(i,r){oH(i);var s=!1,o=function(c){s||(s=!0,i.removeEventListener(p0,o),i.removeEventListener(jy,o),r())};i.classList.add(e),i.addEventListener(p0,o),i.addEventListener(jy,o),requestAnimationFrame(function(){i.classList.add(t)})}};const rye=Ie.getLogger("esri.widgets.support.widgetUtils");function V7(e){const t=En.acquire();for(let r=0;r<arguments.length;r++){const s=arguments[r],o=typeof s;if(o==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(o==="object")for(const c in s)s[c]&&t.push(c)}const i=t.join(" ");return En.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{var r;nH();for(const s of i)(r=e.get(s.target))==null||r(s)});return(i,r,s)=>(e.has(i)&&rye.error("Already observing element",i),e.set(i,r),t.observe(i,s),Mo(()=>{t.unobserve(i),e.delete(i)}))})();function Zn(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function sye(e){return Zn(e)?"rtl":"ltr"}function jF(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function gd(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function nye(e,t){return(e==="enter"?tye:iye)(t)}const oye=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],aye=oye.reduce((e,t)=>(e[t]=[],e),{}),lye=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],f0=new Zme({whiteList:aye,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(lye.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Nf(e){return e==="Enter"||e===" "}const aH="http://www.w3.org/",N5=`${aH}2000/svg`,lH=`${aH}1999/xlink`;let zF=[],G7=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},U7=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),uH=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},uye=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(U7(e[r],t))return r}return-1},PI=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let o=s.properties;if(!(o&&(o.key===void 0?o.bind:o.key))){for(let c=0;c<e.length;c++)if(c!==t){let u=e[c];if(U7(u,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},cye=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},qT=[],BT=!1,cH=e=>{(e.children||[]).forEach(cH),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},VF=()=>{BT=!1,qT.forEach(cH),qT.length=0},GF=e=>{qT.push(e),BT||(BT=!0,typeof window!="undefined"&&"requestIdleCallback"in window?window.requestIdleCallback(VF,{timeout:16}):setTimeout(VF,16))},UF=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),GF(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),GF(e))},hye=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),o=s.length;for(let c=0;c<o;c++){let u=s[c],g=t[u];if(u==="className")throw new Error('Property "className" is not supported, use "class".');if(u==="class")HT(e,g,!0);else if(u==="classes"){let b=Object.keys(g),S=b.length;for(let E=0;E<S;E++){let A=b[E];g[A]&&e.classList.add(A)}}else if(u==="styles"){let b=Object.keys(g),S=b.length;for(let E=0;E<S;E++){let A=b[E],O=g[A];O&&(uH(O),i.styleApplyer(e,A,O))}}else if(u!=="key"&&g!=null){let b=typeof g;b==="function"?(u.lastIndexOf("on",0)===0&&(r&&(g=r(u,g,e,t)),u==="oninput"&&function(){let S=g;g=function(E){S.apply(this,[E]),E.target["oninput-value"]=E.target.value}}()),e[u]=g):i.namespace===N5?u==="href"?e.setAttributeNS(lH,u,g):e.setAttribute(u,g):b==="string"&&u!=="value"?u==="innerHTML"?e[u]=f0.sanitize(g):hH(e)&&u in e?e[u]=g:e.setAttribute(u,g):e[u]=g}}};function hH(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let Ux,dye=(e,t,i)=>{if(t)for(let r of t)Jm(r,e,void 0,i)},dH=(e,t,i)=>{dye(e,t.children,i),t.text&&(e.textContent=t.text),hye(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},Jm=(e,t,i,r)=>{let s,o=0,c=e.vnodeSelector,u=t.ownerDocument;if(c==="")s=e.domNode=u.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let g=0;g<=c.length;++g){let b=c.charAt(g);if(g===c.length||b==="."||b==="#"){let S=c.charAt(o-1),E=c.slice(o,g);S==="."?s.classList.add(E):S==="#"?s.id=E:(E==="svg"&&(r=G7(r,{namespace:N5})),r.namespace!==void 0?s=e.domNode=u.createElementNS(r.namespace,E):(s=e.domNode=e.domNode||u.createElement(E),E==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),o=g+1}}dH(s,e,r)}},HT=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},pye=(e,t,i,r)=>{if(!i)return;let s=!1,o=Object.keys(i),c=o.length;for(let u=0;u<c;u++){let g=o[u],b=i[g],S=t[g];if(g==="class")S!==b&&(HT(e,S,!1),HT(e,b,!0));else if(g==="classes"){let E=e.classList,A=Object.keys(b),O=A.length;for(let L=0;L<O;L++){let N=A[L],z=!!b[N];z!==!!S[N]&&(s=!0,z?E.add(N):E.remove(N))}}else if(g==="styles"){let E=Object.keys(b),A=E.length;for(let O=0;O<A;O++){let L=E[O],N=b[L];N!==S[L]&&(s=!0,N?(uH(N),r.styleApplyer(e,L,N)):r.styleApplyer(e,L,""))}}else if(b||typeof S!="string"||(b=""),g==="value"){let E=e[g];E!==b&&(e["oninput-value"]?E===e["oninput-value"]:b!==S)&&(e[g]=b,e["oninput-value"]=void 0),b!==S&&(s=!0)}else if(b!==S){let E=typeof b;E==="function"&&r.eventHandlerInterceptor||(r.namespace===N5?g==="href"?e.setAttributeNS(lH,g,b):e.setAttribute(g,b):E==="string"?g==="innerHTML"?e[g]=f0.sanitize(b):g==="role"&&b===""?e.removeAttribute(g):hH(e)&&g in e?e[g]=b:e.setAttribute(g,b):e[g]!==b&&(e[g]=b),s=!0)}}return s},fye=(e,t,i,r,s)=>{if(i===r)return!1;r=r||zF;let o,c=(i=i||zF).length,u=r.length,g=0,b=0,S=!1;for(;b<u;){let E=g<c?i[g]:void 0,A=r[b];if(E!==void 0&&U7(E,A))S=Ux(E,A,s)||S,g++;else{let O=uye(i,A,g+1);if(O>=0){for(o=g;o<O;o++)UF(i[o]),PI(i,o,e,"removed");S=Ux(i[O],A,s)||S,g=O+1}else Jm(A,t,g<c?i[g].domNode:void 0,s),cye(A),PI(r,b,e,"added")}b++}if(c>g)for(o=g;o<c;o++)UF(i[o]),PI(i,o,e,"removed");return S};Ux=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let o=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let c=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(c,r),t.domNode=c,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=G7(i,{namespace:N5})),e.text!==t.text&&(o=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,o=fye(t,r,e.children,t.children,i)||o,o=pye(r,e.properties,t.properties,i)||o,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return o&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let Xg=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,Ux(r,i,t)},domNode:e.domNode});const mye={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let cm=e=>G7(mye,e),vd={create:(e,t)=>(t=cm(t),Jm(e,document.createElement("div"),void 0,t),Xg(e,t)),append:(e,t,i)=>(i=cm(i),Jm(t,e,void 0,i),Xg(t,i)),insertBefore:(e,t,i)=>(i=cm(i),Jm(t,e.parentNode,e,i),Xg(t,i)),merge:(e,t,i)=>(i=cm(i),t.domNode=e,dH(e,t,i),Xg(t,i)),replace:(e,t,i)=>(i=cm(i),Jm(t,e.parentNode,e,i),e.parentNode.removeChild(e),Xg(t,i))},pH,yye=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};pH=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let gye=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?pH(i.children,s=>s.domNode===r):void 0}),i},vye=(e,t,i)=>{let r=function(s){i("domEvent",s);let o=t(),c=yye(s.currentTarget,o.domNode);c.reverse();let u,g=gye(o.getLastRender(),c);return e.scheduleRender(),g&&(u=g.properties[`on${s.type}`].apply(g.properties.bind||this,arguments)),i("domEventProcessed",s),u};return(s,o,c,u)=>r},WT=e=>{let t,i,r=cm(e),s=r.performanceLogger,o=!0,c=!1,u=[],g=[],b=(E,A,O)=>{let L,N=()=>L;r.eventHandlerInterceptor=vye(t,N,s),L=E(A,O(),r),u.push(L),g.push(O)},S=()=>{if(i=void 0,o){o=!1,s("renderStart",void 0);for(let E=0;E<u.length;E++){let A=g[E]();s("rendered",void 0),u[E].update(A),s("patched",void 0)}s("renderDone",void 0),o=!0}};return t={renderNow:S,scheduleRender:()=>{i||c||(i=requestAnimationFrame(S))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),c=!0},resume:()=>{c=!1,o=!0,t.scheduleRender()},append:(E,A)=>{b(vd.append,E,A)},insertBefore:(E,A)=>{b(vd.insertBefore,E,A)},merge:(E,A)=>{b(vd.merge,E,A)},replace:(E,A)=>{b(vd.replace,E,A)},detach:E=>{for(let A=0;A<g.length;A++)if(g[A]===E)return g.splice(A,1),u.splice(A,1)[0];throw new Error("renderFunction was not found")}},t},_h=class extends Re{constructor(){super(...arguments),this.items=new Be,this._watchUpdatingTracking=new Jf,this._callbacks=new Map,this._projector=WT(),this._hiddenProjector=WT()}get needsRender(){return this.items.length>0}get updating(){var e,t;return(t=(e=this._watchUpdatingTracking)==null?void 0:e.updating)!=null?t:!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const r=()=>i.render();this._callbacks.set(i,r),this._projector.append(this.surface,r)}for(const i of t.removed){const r=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(r.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let r;const s=()=>(r=e.render(),r);i.append(t,s),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const c=r.domNode.getBoundingClientRect();o.left=c.left,o.top=c.top,o.right=c.right,o.bottom=c.bottom}for(i.detach(s);t.firstChild;)t.removeChild(t.firstChild);return o}overlaps(e,t){const i=this.computeBoundingRect(e),r=this.computeBoundingRect(t);return Math.max(i.left,r.left)<=Math.min(i.right,r.right)&&Math.max(i.top,r.top)<=Math.min(i.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=this._fontString(),this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};v([_({readOnly:!0})],_h.prototype,"surface",void 0),v([_({readOnly:!0})],_h.prototype,"items",void 0),v([_({readOnly:!0})],_h.prototype,"needsRender",null),v([_({readOnly:!0})],_h.prototype,"_watchUpdatingTracking",void 0),v([_({readOnly:!0})],_h.prototype,"updating",null),_h=v([K("esri.views.overlay.ViewOverlay")],_h);const qF=_h;function gy(e,t,i,r){let s=null,o=1e3;typeof t=="number"?(o=t,r=i):(s=t!=null?t:null,o=i);let c,u=0;const g=()=>{u=0,e.apply(r,c)},b=(...S)=>{s&&s.apply(r,S),c=S,o?u||(u=setTimeout(g,o)):g()};return b.remove=()=>{u&&(clearTimeout(u),u=0)},b.forceUpdate=()=>{u&&(clearTimeout(u),g())},b.hasPendingUpdates=()=>!!u,b}const bye="randomUUID"in crypto;function JT(){if(bye)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const wye={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},_ye={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},xye=e=>({..._ye,...e}),Sye=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},Iye=(e,t)=>e.find(t),BF=(e,t,i=!1)=>{let r=e;return t.forEach((s,o)=>{const c=r!=null&&r.children?Iye(r.children,u=>u.domNode===s):void 0;i&&!c&&o!==t.length-1||(r=c)}),r},Eye=e=>{let t;const i={...wye,...e},r=xye(i),s=r.performanceLogger;let o,c=!0,u=!1;const g=[],b=[],S=(A,O,L)=>{var q;let N;r.eventHandlerInterceptor=(Z,ee,ie,ne)=>function(oe){let me;s("domEvent",oe);const fe=Sye(oe.currentTarget,N.domNode),Ce=fe.some(Ae=>{var Oe;return customElements.get((Oe=Ae==null?void 0:Ae.tagName)==null?void 0:Oe.toLowerCase())});if(oe.eventPhase===Event.CAPTURING_PHASE||!Ce)fe.reverse(),me=BF(N.getLastRender(),fe);else{const Ae=oe.composedPath(),Oe=Ae.slice(Ae.indexOf(oe.currentTarget),Ae.indexOf(N.domNode)).filter(je=>je.getRootNode()===je.ownerDocument).reverse();me=BF(N.getLastRender(),Oe,!0)}let _e;return me&&(_e=i.handleInterceptedEvent(t,me,this,oe)),s("domEventProcessed",oe),_e},(q=i.postProcessProjectionOptions)==null||q.call(i,r);const z=L();N=A(O,z,r),g.push(N),b.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(N,z)};let E=()=>{if(o=void 0,c){c=!1,s("renderStart",void 0);for(let A=0;A<g.length;A++){const O=b[A]();s("rendered",void 0),g[A].update(O),s("patched",void 0)}s("renderDone",void 0),c=!0}};return i.modifyDoRenderImplementation&&(E=i.modifyDoRenderImplementation(E,g,b)),t={renderNow:E,scheduleRender:()=>{o||u||(o=requestAnimationFrame(E))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),u=!0},resume:()=>{u=!1,c=!0,t.scheduleRender()},append:(A,O)=>{S(vd.append,A,O)},insertBefore:(A,O)=>{S(vd.insertBefore,A,O)},merge:(A,O)=>{S(vd.merge,A,O)},replace:(A,O)=>{S(vd.replace,A,O)},detach:A=>{for(let O=0;O<b.length;O++)if(b[O]===A)return b.splice(O,1),g.splice(O,1)[0];throw new Error("renderFunction was not found")}},t},At={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let hm,fH,D5,mH=!1,qx=!1,q7=!1,So=!1,HF=null,YT=!1;const DDe={isDev:!!At.isDev,isBrowser:!0,isServer:!1,isTesting:!!At.isTesting},jDe=e=>{const t=new URL(e,Cs.$resourcesUrl$);return t.origin!==bg.location.origin?t.href:t.pathname},Mye=e=>Cs.$resourcesUrl$=e,m0=(e,t="")=>()=>{},WF="http://www.w3.org/1999/xlink",JF={},Tye="http://www.w3.org/2000/svg",Cye="http://www.w3.org/1999/xhtml",Aye=e=>e!=null,B7=e=>(e=typeof e,e==="object"||e==="function"),yH=(e,t,...i)=>{let r=null,s=null,o=null,c=!1,u=!1;const g=[],b=E=>{for(let A=0;A<E.length;A++)r=E[A],Array.isArray(r)?b(r):r!=null&&typeof r!="boolean"&&((c=typeof e!="function"&&!B7(r))&&(r=String(r)),c&&u?g[g.length-1].$text$+=r:g.push(c?Bx(null,r):r),u=c)};if(b(i),t&&(At.isDev&&e==="input"&&Pye(t),At.vdomKey&&t.key&&(s=t.key),At.slotRelocation&&t.name&&(o=t.name),At.vdomClass)){const E=t.className||t.class;E&&(t.class=typeof E!="object"?E:Object.keys(E).filter(A=>E[A]).join(" "))}if(At.isDev&&g.some(gH)&&age(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),At.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,g,kye);const S=Bx(e,null);return S.$attrs$=t,g.length>0&&(S.$children$=g),At.vdomKey&&(S.$key$=s),At.slotRelocation&&(S.$name$=o),S},Bx=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return At.vdomAttribute&&(i.$attrs$=null),At.vdomKey&&(i.$key$=null),At.slotRelocation&&(i.$name$=null),i},$ye={},gH=e=>e&&e.$tag$===$ye,kye={forEach:(e,t)=>e.map(YF).forEach(t),map:(e,t)=>e.map(YF).map(t).map(Oye)},YF=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Oye=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),yH(e.vtag,i,...e.vchildren||[])}const t=Bx(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Pye=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const r=t.indexOf("type"),s=t.indexOf("min"),o=t.indexOf("max"),c=t.indexOf("step");(i<r||i<s||i<o||i<c)&&AH('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},Fye=e=>lge.map(t=>t(e)).find(t=>!!t),Lye=(e,t)=>e!=null&&!B7(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Rye=e=>At.lazyLoad?vg(e).$hostElement$:e,zDe=(e,t,i)=>{const r=Rye(e);return{emit:s=>(At.isDev&&!r.isConnected&&AH(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),Nye(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s}))}},Nye=(e,t,i)=>{const r=Cs.ce(t,i);return e.dispatchEvent(r),r},KF=new WeakMap,Dye=(e,t,i)=>{let r=Wx.get(e);hge&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,Wx.set(e,r)},jye=(e,t,i,r)=>{let s=vH(t,i);const o=Wx.get(s);if(e=e.nodeType===11?e:cl,o)if(typeof o=="string"){e=e.head||e;let c=KF.get(e),u;c||KF.set(e,c=new Set),c.has(s)||(u=cl.createElement("style"),u.innerHTML=o,e.insertBefore(u,e.querySelector("link")),c&&c.add(s))}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return s},zye=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,s=m0("attachStyles",t.$tagName$),o=jye(Jx&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&(i["s-sc"]=o,i.classList.add(o+"-h"),r&2&&i.classList.add(o+"-s")),s()},vH=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),ZF=(e,t,i,r,s,o)=>{if(i!==r){let c=tL(e,t),u=t.toLowerCase();if(t==="class"){const g=e.classList,b=XF(i),S=XF(r);g.remove(...b.filter(E=>E&&!S.includes(E))),g.add(...S.filter(E=>E&&!b.includes(E)))}else if(t==="style"){for(const g in i)(!r||r[g]==null)&&(g.includes("-")?e.style.removeProperty(g):e.style[g]="");for(const g in r)(!i||r[g]!==i[g])&&(g.includes("-")?e.style.setProperty(g,r[g]):e.style[g]=r[g])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):tL(bg,u)?t=u.slice(2):t=u[2]+t.slice(3),i&&Cs.rel(e,t,i,!1),r&&Cs.ael(e,t,r,!1);else{const g=B7(r);if((c||g&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{const S=r==null?"":r;t==="list"?c=!1:(i==null||e[t]!=S)&&(e[t]=S)}}catch{}let b=!1;u!==(u=u.replace(/^xlink\:?/,""))&&(t=u,b=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(b?e.removeAttributeNS(WF,t):e.removeAttribute(t)):(!c||o&4||s)&&!g&&(r=r===!0?"":r,b?e.setAttributeNS(WF,t,r):e.setAttribute(t,r))}}},Vye=/\s/,XF=e=>e?e.split(Vye):[],bH=(e,t,i,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||JF,c=t.$attrs$||JF;for(r in o)r in c||ZF(s,r,o[r],void 0,i,t.$flags$);for(r in c)ZF(s,r,o[r],c[r],i,t.$flags$)},Hx=(e,t,i,r)=>{const s=t.$children$[i];let o=0,c,u,g;if(mH||(q7=!0,s.$tag$==="slot"&&(hm&&r.classList.add(hm+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)c=s.$elm$=cl.createTextNode(s.$text$);else if(s.$flags$&1)c=s.$elm$=cl.createTextNode("");else{if(So||(So=s.$tag$==="svg"),c=s.$elm$=cl.createElementNS(So?Tye:Cye,s.$flags$&2?"slot-fb":s.$tag$),So&&s.$tag$==="foreignObject"&&(So=!1),bH(null,s,So),Aye(hm)&&c["s-si"]!==hm&&c.classList.add(c["s-si"]=hm),s.$children$)for(o=0;o<s.$children$.length;++o)u=Hx(e,s,o,c),u&&c.appendChild(u);s.$tag$==="svg"?So=!1:c.tagName==="foreignObject"&&(So=!0)}return c["s-hn"]=D5,s.$flags$&3&&(c["s-sr"]=!0,c["s-cr"]=fH,c["s-sn"]=s.$name$||"",g=e&&e.$children$&&e.$children$[i],g&&g.$tag$===s.$tag$&&e.$elm$&&Gb(e.$elm$,!1)),c},Gb=(e,t)=>{Cs.$flags$|=1;const i=e.childNodes;for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==D5&&s["s-ol"]&&(xH(s).insertBefore(s,H7(s)),s["s-ol"].remove(),s["s-ol"]=void 0,q7=!0),t&&Gb(s,t)}Cs.$flags$&=-2},wH=(e,t,i,r,s,o)=>{let c=e["s-cr"]&&e["s-cr"].parentNode||e,u;for(c.shadowRoot&&c.tagName===D5&&(c=c.shadowRoot);s<=o;++s)r[s]&&(u=Hx(null,i,s,e),u&&(r[s].$elm$=u,c.insertBefore(u,H7(t))))},_H=(e,t,i,r,s)=>{for(;t<=i;++t)(r=e[t])&&(s=r.$elm$,EH(r),qx=!0,s["s-ol"]?s["s-ol"].remove():Gb(s,!0),s.remove())},Gye=(e,t,i,r)=>{let s=0,o=0,c=0,u=0,g=t.length-1,b=t[0],S=t[g],E=r.length-1,A=r[0],O=r[E],L,N;for(;s<=g&&o<=E;)if(b==null)b=t[++s];else if(S==null)S=t[--g];else if(A==null)A=r[++o];else if(O==null)O=r[--E];else if(D_(b,A))dm(b,A),b=t[++s],A=r[++o];else if(D_(S,O))dm(S,O),S=t[--g],O=r[--E];else if(D_(b,O))(b.$tag$==="slot"||O.$tag$==="slot")&&Gb(b.$elm$.parentNode,!1),dm(b,O),e.insertBefore(b.$elm$,S.$elm$.nextSibling),b=t[++s],O=r[--E];else if(D_(S,A))(b.$tag$==="slot"||O.$tag$==="slot")&&Gb(S.$elm$.parentNode,!1),dm(S,A),e.insertBefore(S.$elm$,b.$elm$),S=t[--g],A=r[++o];else{for(c=-1,u=s;u<=g;++u)if(t[u]&&t[u].$key$!==null&&t[u].$key$===A.$key$){c=u;break}c>=0?(N=t[c],N.$tag$!==A.$tag$?L=Hx(t&&t[o],i,c,e):(dm(N,A),t[c]=void 0,L=N.$elm$),A=r[++o]):(L=Hx(t&&t[o],i,o,e),A=r[++o]),L&&xH(b.$elm$).insertBefore(L,H7(b.$elm$))}s>g?wH(e,r[E+1]==null?null:r[E+1].$elm$,i,r,o,E):o>E&&_H(t,s,g)},D_=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,H7=e=>e&&e["s-ol"]||e,xH=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,dm=(e,t)=>{const i=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,o=t.$tag$,c=t.$text$;let u;c===null?(So=o==="svg"?!0:o==="foreignObject"?!1:So,o==="slot"||bH(e,t,So),r!==null&&s!==null?Gye(i,r,t,s):s!==null?(e.$text$!==null&&(i.textContent=""),wH(i,null,t,s,0,s.length-1)):r!==null&&_H(r,0,r.length-1),So&&o==="svg"&&(So=!1)):(u=i["s-cr"])?u.parentNode.textContent=c:e.$text$!==c&&(i.data=c)},SH=e=>{const t=e.childNodes;let i,r,s,o,c,u;for(r=0,s=t.length;r<s;r++)if(i=t[r],i.nodeType===1){if(i["s-sr"]){for(c=i["s-sn"],i.hidden=!1,o=0;o<s;o++)if(u=t[o].nodeType,t[o]["s-hn"]!==i["s-hn"]||c!==""){if(u===1&&c===t[o].getAttribute("slot")){i.hidden=!0;break}}else if(u===1||u===3&&t[o].textContent.trim()!==""){i.hidden=!0;break}}SH(i)}},Qa=[],IH=e=>{let t,i,r,s,o,c,u=0;const g=e.childNodes,b=g.length;for(;u<b;u++){if(t=g[u],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(r=i.parentNode.childNodes,s=t["s-sn"],c=r.length-1;c>=0;c--)i=r[c],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(QF(i,s)?(o=Qa.find(S=>S.$nodeToRelocate$===i),qx=!0,i["s-sn"]=i["s-sn"]||s,o?o.$slotRefNode$=t:Qa.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&Qa.map(S=>{QF(S.$nodeToRelocate$,i["s-sn"])&&(o=Qa.find(E=>E.$nodeToRelocate$===i),o&&!S.$slotRefNode$&&(S.$slotRefNode$=o.$slotRefNode$))})):Qa.some(S=>S.$nodeToRelocate$===i)||Qa.push({$nodeToRelocate$:i}));t.nodeType===1&&IH(t)}},QF=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",EH=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(EH)},Uye=(e,t)=>{const i=e.$hostElement$,r=e.$cmpMeta$,s=e.$vnode$||Bx(null,null),o=gH(t)?t:yH(null,null,t);D5=i.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map(([c,u])=>o.$attrs$[u]=i[c])),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=s.$elm$=i.shadowRoot||i,hm=i["s-sc"],fH=i["s-cr"],mH=Jx&&(r.$flags$&1)!==0,qx=!1,dm(s,o);{if(Cs.$flags$|=1,q7){IH(o.$elm$);let c,u,g,b,S,E,A=0;for(;A<Qa.length;A++)c=Qa[A],u=c.$nodeToRelocate$,u["s-ol"]||(g=cl.createTextNode(""),g["s-nr"]=u,u.parentNode.insertBefore(u["s-ol"]=g,u));for(A=0;A<Qa.length;A++)if(c=Qa[A],u=c.$nodeToRelocate$,c.$slotRefNode$){for(b=c.$slotRefNode$.parentNode,S=c.$slotRefNode$.nextSibling,g=u["s-ol"];g=g.previousSibling;)if(E=g["s-nr"],E&&E["s-sn"]===u["s-sn"]&&b===E.parentNode&&(E=E.nextSibling,!E||!E["s-nr"])){S=E;break}(!S&&b!==u.parentNode||u.nextSibling!==S)&&u!==S&&(!u["s-hn"]&&u["s-ol"]&&(u["s-hn"]=u["s-ol"].parentNode.nodeName),b.insertBefore(u,S))}else u.nodeType===1&&(u.hidden=!0)}qx&&SH(o.$elm$),Cs.$flags$&=-2,Qa.length=0}},qye=(e,t)=>{},W7=(e,t)=>(At.taskQueue&&At.updatable&&(e.$flags$|=16),qye(e,e.$ancestorComponent$),fge(()=>Bye(e,t))),Bye=(e,t)=>{const i=e.$hostElement$,r=m0("scheduleUpdate",e.$cmpMeta$.$tagName$),s=i;let o;return t?o=vy(s,"componentWillLoad"):o=vy(s,"componentWillUpdate"),o=eL(o,()=>vy(s,"componentWillRender")),r(),eL(o,()=>Hye(e,s,t))},Hye=async(e,t,i)=>{const r=e.$hostElement$,s=m0("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&zye(e);const o=m0("render",e.$cmpMeta$.$tagName$);Wye(e,t,r),o(),s(),Jye(e)},Wye=(e,t,i)=>{try{HF=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(At.hasRenderFn||At.reflect)&&(At.vdomRender||At.reflect)&&(At.hydrateServerSide||Uye(e,t))}catch(u){zw(u,e.$hostElement$)}return HF=null,null},Jye=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=m0("postUpdate",t),s=i;e.$ancestorComponent$,vy(s,"componentDidRender"),e.$flags$&64?(vy(s,"componentDidUpdate"),r()):(e.$flags$|=64,vy(s,"componentDidLoad"),r())},VDe=e=>{if(At.updatable){const t=vg(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&W7(t,!1),i}return!1},vy=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){zw(r)}},eL=(e,t)=>e&&e.then?e.then(t):t(),Yye=(e,t)=>vg(e).$instanceValues$.get(t),Kye=(e,t,i,r)=>{const s=vg(e),o=e,c=s.$instanceValues$.get(t),u=s.$flags$,g=o;i=Lye(i,r.$members$[t][0]);const b=Number.isNaN(c)&&Number.isNaN(i);if(i!==c&&!b){s.$instanceValues$.set(t,i);{if(r.$watchers$&&u&128){const E=r.$watchers$[t];E&&E.map(A=>{try{g[A](i,c,t)}catch(O){zw(O,o)}})}if((u&18)===2){if(g.componentShouldUpdate&&g.componentShouldUpdate(i,c,t)===!1)return;W7(s,!1)}}}},Zye=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),s=e.prototype;r.map(([o,[c]])=>{(c&31||c&32)&&Object.defineProperty(s,o,{get(){return Yye(this,o)},set(u){Kye(this,o,u,t)},configurable:!0,enumerable:!0})});{const o=new Map;s.attributeChangedCallback=function(c,u,g){Cs.jmp(()=>{const b=o.get(c);if(this.hasOwnProperty(b))g=this[b],delete this[b];else if(s.hasOwnProperty(b)&&typeof this[b]=="number"&&this[b]==g)return;this[b]=g===null&&typeof this[b]=="boolean"?!1:g})},e.observedAttributes=r.filter(([c,u])=>u[0]&15).map(([c,u])=>{const g=u[1]||c;return o.set(g,c),u[0]&512&&t.$attrsToReflect$.push([c,g]),g})}}return e},Xye=async(e,t,i,r,s)=>{if((t.$flags$&32)===0&&(s=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),s.style)){let c=s.style;typeof c!="string"&&(c=c[t.$modeName$=Fye(e)]);const u=vH(i,t.$modeName$);if(!Wx.has(u)){const g=m0("registerStyles",i.$tagName$);Dye(u,c,!!(i.$flags$&1)),g()}}t.$ancestorComponent$,(()=>W7(t,!0))()},Qye=e=>{},ege=e=>{if((Cs.$flags$&1)===0){const t=vg(e),i=t.$cmpMeta$,r=m0("connectedCallback",i.$tagName$);t.$flags$&1?(MH(e,t,i.$listeners$),Qye(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&tge(e),i.$members$&&Object.entries(i.$members$).map(([s,[o]])=>{if(o&31&&e.hasOwnProperty(s)){const c=e[s];delete e[s],e[s]=c}}),Xye(e,t,i)),r()}},tge=e=>{const t=e["s-cr"]=cl.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},ige=e=>{if((Cs.$flags$&1)===0){const t=vg(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},GDe=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};At.member&&(i.$members$=t[2]),At.hostListener&&(i.$listeners$=t[3]),At.watchCallback&&(i.$watchers$=e.$watchers$),At.reflect&&(i.$attrsToReflect$=[]),At.shadowDom&&!Jx&&i.$flags$&1&&(i.$flags$|=8);const r=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){oge(this,i)},connectedCallback(){ege(this),At.connectedCallback&&r&&r.call(this)},disconnectedCallback(){ige(this),At.disconnectedCallback&&s&&s.call(this)},__attachShadow(){Jx?At.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,Zye(e,i)},UDe=(e,t)=>t,MH=(e,t,i,r)=>{i&&i.map(([s,o,c])=>{const u=sge(e,s),g=rge(t,c),b=nge(s);Cs.ael(u,o,g,b),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Cs.rel(u,o,g,b))})},rge=(e,t)=>i=>{try{At.lazyLoad||e.$hostElement$[t](i)}catch(r){zw(r)}},sge=(e,t)=>t&4?cl:t&8?bg:t&16?cl.body:e,nge=e=>uge?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,TH=new WeakMap,vg=e=>TH.get(e),oge=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return At.isDev&&(i.$renderCount$=0),At.method&&At.lazyLoad&&(i.$onInstancePromise$=new Promise(r=>i.$onInstanceResolve$=r)),At.asyncLoading&&(i.$onReadyPromise$=new Promise(r=>i.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[]),MH(e,i,t.$listeners$),TH.set(e,i)},tL=(e,t)=>t in e,zw=(e,t)=>(0,console.error)(e,t),CH=At.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],age=(...e)=>console.error(...CH,...e),AH=(...e)=>console.warn(...CH,...e),Wx=new Map,lge=[],bg=typeof window!="undefined"?window:{};At.cssVarShim&&bg.CSS;const cl=bg.document||{head:{}},qDe=bg.HTMLElement||class{},Cs={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},Jx=At.shadowDomShim&&At.shadowDom?(()=>(cl.head.attachShadow+"").indexOf("[native")>-1)():!0,uge=(()=>{let e=!1;try{cl.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),cge=e=>Promise.resolve(e),hge=At.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})():!1,iL=[],$H=[],dge=(e,t)=>i=>{e.push(i),YT||(YT=!0,t&&Cs.$flags$&4?pge(KT):Cs.raf(KT))},rL=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){zw(i)}e.length=0},KT=()=>{rL(iL),rL($H),(YT=iL.length>0)&&Cs.raf(KT)},pge=e=>cge().then(e),fge=dge($H,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.7
 */const kH="calcite-mode-auto",OH="calcite-mode-dark",mge="calcite-mode-light",BDe={autoMode:kH,darkMode:OH,lightMode:mge,rtl:"calcite--rtl"};/*!
* tabbable 6.0.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var PH=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Yx=PH.join(","),FH=typeof Element=="undefined",y0=FH?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Kx=!FH&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},LH=function(t,i,r){var s=Array.prototype.slice.apply(t.querySelectorAll(Yx));return i&&y0.call(t,Yx)&&s.unshift(t),s=s.filter(r),s},RH=function e(t,i,r){for(var s=[],o=Array.from(t);o.length;){var c=o.shift();if(c.tagName==="SLOT"){var u=c.assignedElements(),g=u.length?u:c.children,b=e(g,!0,r);r.flatten?s.push.apply(s,b):s.push({scopeParent:c,candidates:b})}else{var S=y0.call(c,Yx);S&&r.filter(c)&&(i||!t.includes(c))&&s.push(c);var E=c.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(c),A=!r.shadowRootFilter||r.shadowRootFilter(c);if(E&&A){var O=e(E===!0?c.children:E.children,!0,r);r.flatten?s.push.apply(s,O):s.push({scopeParent:c,candidates:O})}else o.unshift.apply(o,c.children)}}return s},NH=function(t,i){return t.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},yge=function(t,i){return t.tabIndex===i.tabIndex?t.documentOrder-i.documentOrder:t.tabIndex-i.tabIndex},DH=function(t){return t.tagName==="INPUT"},gge=function(t){return DH(t)&&t.type==="hidden"},vge=function(t){var i=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return i},bge=function(t,i){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===i)return t[r]},wge=function(t){if(!t.name)return!0;var i=t.form||Kx(t),r=function(u){return i.querySelectorAll('input[type="radio"][name="'+u+'"]')},s;if(typeof window!="undefined"&&typeof window.CSS!="undefined"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(c){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",c.message),!1}var o=bge(s,t.form);return!o||o===t},_ge=function(t){return DH(t)&&t.type==="radio"},xge=function(t){return _ge(t)&&!wge(t)},Sge=function(t){for(var i,r=Kx(t).host,s=!!((i=r)!==null&&i!==void 0&&i.ownerDocument.contains(r)||t.ownerDocument.contains(t));!s&&r;){var o;r=Kx(r).host,s=!!((o=r)!==null&&o!==void 0&&o.ownerDocument.contains(r))}return s},sL=function(t){var i=t.getBoundingClientRect(),r=i.width,s=i.height;return r===0&&s===0},Ige=function(t,i){var r=i.displayCheck,s=i.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=y0.call(t,"details>summary:first-of-type"),c=o?t.parentElement:t;if(y0.call(c,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var u=t;t;){var g=t.parentElement,b=Kx(t);if(g&&!g.shadowRoot&&s(g)===!0)return sL(t);t.assignedSlot?t=t.assignedSlot:!g&&b!==t.ownerDocument?t=b.host:t=g}t=u}if(Sge(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return sL(t);return!1},Ege=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var i=t.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var s=i.children.item(r);if(s.tagName==="LEGEND")return y0.call(i,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}i=i.parentElement}return!1},Zx=function(t,i){return!(i.disabled||gge(i)||Ige(i,t)||vge(i)||Ege(i))},ZT=function(t,i){return!(xge(i)||NH(i)<0||!Zx(t,i))},Mge=function(t){var i=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},Tge=function e(t){var i=[],r=[];return t.forEach(function(s,o){var c=!!s.scopeParent,u=c?s.scopeParent:s,g=NH(u,c),b=c?e(s.candidates):u;g===0?c?i.push.apply(i,b):i.push(u):r.push({documentOrder:o,tabIndex:g,item:s,isScope:c,content:b})}),r.sort(yge).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(i)},Cge=function(t,i){i=i||{};var r;return i.getShadowRoot?r=RH([t],i.includeContainer,{filter:ZT.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:Mge}):r=LH(t,i.includeContainer,ZT.bind(null,i)),Tge(r)},HDe=function(t,i){i=i||{};var r;return i.getShadowRoot?r=RH([t],i.includeContainer,{filter:Zx.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):r=LH(t,i.includeContainer,Zx.bind(null,i)),r},WDe=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return y0.call(t,Yx)===!1?!1:ZT(i,t)},Age=PH.concat("iframe").join(","),JDe=function(t,i){if(i=i||{},!t)throw new Error("No node provided");return y0.call(t,Age)===!1?!1:Zx(i,t)};const $ge={getShadowRoot:!0};function YDe(e){return Array.isArray(e)?e:Array.from(e)}function KDe(e){const t="dir",i=`[${t}]`,r=kge(e,i);return r?r.getAttribute(t):"ltr"}function ZDe(e,t,i){const r=`[${t}]`,s=e.closest(r);return s?s.getAttribute(t):i}function jH(e){return e.getRootNode()}function zH(e){return e.host||null}function XDe(e,{selector:t,id:i}){function r(s){if(!s)return null;s.assignedSlot&&(s=s.assignedSlot);const o=jH(s),c=i?"getElementById"in o?o.getElementById(i):null:t?o.querySelector(t):null,u=zH(o);return c||(u?r(u):null)}return r(e)}function kge(e,t){function i(r){return r?r.closest(t)||i(zH(jH(r))):null}return i(e)}function Oge(e,t){return VH(e,t)}function VH(e,t){if(!e)return;const i=t(e);if(i!==void 0)return i;const{parentNode:r}=e;return VH(r instanceof ShadowRoot?r.host:r,t)}function QDe(e,t){return!!Oge(t,i=>i===e?!0:void 0)}function Pge(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function eje(e){if(!!e)return Pge(e)?e.setFocus():e.focus()}function tje(e){(Cge(e,$ge)[0]||e).focus()}const Ub=":not([slot])";function ije(e,t,i){t&&!Array.isArray(t)&&typeof t!="string"&&(i=t,t=null);const r=t?Array.isArray(t)?t.map(s=>`[slot="${s}"]`).join(","):`[slot="${t}"]`:Ub;return i!=null&&i.all?Fge(e,r,i):Lge(e,r,i)}function GH(e,t){return e?Array.from(e.children||[]).filter(i=>i==null?void 0:i.matches(t)):[]}function Fge(e,t,i){let r=t===Ub?GH(e,Ub):Array.from(e.querySelectorAll(t));r=i&&i.direct===!1?r:r.filter(o=>o.parentElement===e),r=i!=null&&i.matches?r.filter(o=>o==null?void 0:o.matches(i.matches)):r;const s=i==null?void 0:i.selector;return s?r.map(o=>Array.from(o.querySelectorAll(s))).reduce((o,c)=>[...o,...c],[]).filter(o=>!!o):r}function Lge(e,t,i){let r=t===Ub?GH(e,Ub)[0]||null:e.querySelector(t);r=i&&i.direct===!1||(r==null?void 0:r.parentElement)===e?r:null,r=i!=null&&i.matches?r!=null&&r.matches(i.matches)?r:null:r;const s=i==null?void 0:i.selector;return s?r==null?void 0:r.querySelector(s):r}function rje(e,t,i){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[i]}function sje(e){return Boolean(e).toString()}function nje(e){return!!Rge(e).length}function Rge(e){return e.target.assignedElements({flatten:!0})}function oje(e){return!!(e.isPrimary&&e.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.7
 */function nL(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(OH)||e.contains(kH)&&t?"dark":"light",r=c=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:c}})),s=c=>{o!==c&&r(c),o=c};let o=i();r(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",c=>s(c.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Nge(){typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?nL():document.addEventListener("DOMContentLoaded",()=>nL(),{once:!0}))}const Dge=Nge;Dge();let UH;function jge(){Mye(na(Dt(UH)))}UH="components/assets";const qH=Symbol("widget"),zge=Symbol("widget-test-data"),Vge=[],Gge={},Xx=new WeakMap;function BH(e,t){let i=t.children;if(i&&i.length)for(let s=0;s<i.length;++s)i[s]=BH(e,i[s]);else i=Vge;const r=t.vnodeSelector;if(J7(r)){const s=t.properties||Gge,o=s.key||r;return{vnodeSelector:"div",properties:{key:o,afterCreate:Uge,afterUpdate:qge,afterRemoved:HH,parentWidget:e,widgetConstructor:r,widgetProperties:{...s,key:o,children:i}},children:void 0,text:void 0,domNode:null}}return t}function Uge(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:o}){var u;const c=new s(o);c.container=e,Xx.set(e,c),(u=c.afterCreate)==null||u.call(c,c,e),r._internalHandles.add(Mo(()=>HH(e)))}function qge(e,t,i,{widgetProperties:r}){var o;const s=Xx.get(e);s&&(s.set(r),(o=s.afterUpdate)==null||o.call(s,s,e))}function HH(e){var i;const t=Xx.get(e);t&&((i=t.afterRemoved)==null||i.call(t,t,e),t.destroy(),Xx.delete(e))}function J7(e){return typeof e=="function"&&e[qH]}const oL=new Set;function Bge(e){oL.add(e),e.finally(()=>oL.delete(e))}var WH;const Hge="esri.widgets.Widget";let Wge=0;const Jge={widgetIcon:"esri-icon-checkbox-unchecked"};function JH(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?JH(e[i],t==null?void 0:t[i]):e[i]=t[i]);return e}const Yge=Eye({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,o,c)=>{const u=t==null?void 0:t(r,s,o,c),g=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in o)||g){const b=r[2].toLowerCase()+r.slice(3),S=O=>u==null?void 0:u.call(o,O);o.addEventListener(b,S,g);const E=()=>o.removeEventListener(b,S,g),A=c.afterRemoved;c.afterRemoved=O=>{A==null||A(O),E()}}return u}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:o}=r,c=s===Event.CAPTURING_PHASE;let u=`on${o}${c?"capture":""}`;const g=t.properties;(g&&u in g||(u=`on${o[0].toUpperCase()}${o.slice(1)}${c?"Capture":""}`,g&&u in g))&&(nH(),e.scheduleRender(),g[u].call(g.bind||i,r))}});let FI=!1,Kr=class extends Iw(ss.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new Vr,this._projector=Yge,this._readyForTrueRender=!1,this.iconClass=Jge.widgetIcon,this.key=this,this._loadLocale=o5(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await Ms(this._messageBundleProps.map(async({bundlePath:c,propertyName:u})=>{let g=await py(c);this.uiStrings&&Object.keys(this.uiStrings)&&(g=JH(ve(g),this.uiStrings)),this[u]=g}));for(const c of o)c.error&&Ie.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,c.error)}await this.loadLocale()}),jge();const i="esri-widget-uid-"+JT(),r=this.render.bind(this);this._trackingTarget=new a5(()=>this.scheduleRender());const s=()=>{var S;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const o=r();let{properties:c}=o;c||(o.properties=c={});let{key:u,styles:g}=c;u||(c.key=i),g||(c.styles=g={}),g.display||(g.display="");let b=0;return(S=o.children)==null||S.forEach(E=>{if(J7(E.vnodeSelector))return;let{properties:A}=E;A||(E.properties=A={}),A.key||(A.key=`${this.id}--${b++}`)}),BH(this,o)};this.render=()=>{var c;if(FI)return s();let o=(c=Xme(this))!=null?c:null;if(o)return o;this._trackingTarget.clear(),FI=!0;try{o=Cc(this._trackingTarget,s)}catch(u){throw console.error(u),u}finally{FI=!1}return o&&Qme(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),Bge(this._resourcesFetch)}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(q4)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(ti(this._trackingTarget),ti(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,OI(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return F5(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Wge++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(WH=qH,zge)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(OI(this),this._projector.scheduleRender())}classes(...e){return V7.apply(this,e)}renderNow(){OI(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this._internalHandles.add(ge(()=>this.viewModel,(i,r)=>{r&&this._internalHandles.remove("delegated-events"),i&&r5(i)&&this._internalHandles.add(this._delegatedEventNames.map(s=>hc(i,s,o=>{this.emit(s,o)})),"delegated-events")},rt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(q4),this.scheduleRender()};this._internalHandles.add([m5(e),ge(()=>this.uiStrings,e),ts(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var t;this._attached&&(this._projector.detach(this.render),this._attached=!1),(t=e==null?void 0:e.parentNode)==null||t.removeChild(e)}};Kr[WH]=!0,v([_()],Kr.prototype,"_readyForTrueRender",void 0),v([_({value:null})],Kr.prototype,"container",null),v([_t("container")],Kr.prototype,"castContainer",null),v([_()],Kr.prototype,"iconClass",void 0),v([_()],Kr.prototype,"id",null),v([_()],Kr.prototype,"label",null),v([_()],Kr.prototype,"renderable",null),v([_()],Kr.prototype,"uiStrings",void 0),v([_()],Kr.prototype,"viewModel",void 0),v([_({value:!0})],Kr.prototype,"visible",null),v([_()],Kr.prototype,"key",void 0),v([_()],Kr.prototype,"children",void 0),v([_()],Kr.prototype,"afterCreate",void 0),v([_()],Kr.prototype,"afterUpdate",void 0),v([_()],Kr.prototype,"afterRemoved",void 0),Kr=v([K(Hge)],Kr);const ki=Kr;function YH(e){return 32+e.length}function KH(e){return 16}function aje(e){if(!e)return 0;let t=XH;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=YH(r);break;case"number":t+=KH();break;case"boolean":t+=4}}return t}function Kge(e){if(!e)return 0;if(Array.isArray(e))return Zge(e);let t=XH;for(const i in e)e.hasOwnProperty(i)&&(t+=ZH(e[i]));return t}function Zge(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=QH;for(let r=0;r<t;r++)i+=ZH(e[r]);return i}function ZH(e){switch(typeof e){case"object":return Kge(e);case"string":return YH(e);case"number":return KH();case"boolean":return 4;default:return 8}}function lje(e,t){return QH+e.length*t}const XH=32,QH=32;var Qx;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(Qx||(Qx={}));function eW(e,t,i){return e.units[t][i]}function wg(e,t,i,r=2,s="abbr"){return`${Lo(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:t>0?"never":"exceptZero"})} ${eW(e,i,s)}`}function j5(e,t,i,r=2,s="abbr"){return`${Lo(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${eW(e,i,s)}`}function uje(e,t,i,r=2,s="abbr"){const o=sU(t,i);return wg(e,ei(t,i,o),o,r,s)}function cje(e,t,i,r=2,s="abbr"){const o=sU(t,i);return j5(e,ei(t,i,o),o,r,s)}function hje(e,t,i,r=2,s="abbr"){const o=nU(t,i);return wg(e,ei(t,i,o),o,r,s)}function dje(e,t,i,r=2,s="abbr"){const o=nU(t,i);return j5(e,ei(t,i,o),o,r,s)}function pje(e,t,i,r=2,s="abbr"){const o=oU(t,i);return wg(e,ei(t,i,o),o,r,s)}function fje(e,t,i,r=2,s="abbr"){const o=oU(t,i);return j5(e,ei(t,i,o),o,r,s)}function mje(e,t,i,r=2,s="abbr"){const o=aU(t,i);return wg(e,ei(t,i,o),o,r,s)}function yje(e,t,i,r=2,s="abbr"){const o=aU(t,i);return j5(e,ei(t,i,o),o,r,s)}function gje(e,t,i,r=2,s="abbr"){const o=Rle(t,i);return wg(e,ei(t,i,o),o,r,s)}function vje(e,t,i,r=2,s="abbr"){const o=Nle(t,i);return wg(e,ei(t,i,o),o,r,s)}function bje(e,t,i,r,s){s=Qs(s,2);let o=_B.normalize(Xge(ei(e,t,"degrees"),i,r),0,!0);const c={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s,minimumFractionDigits:s,signDisplay:o>0?"never":"exceptZero"};return o=tW(o,c),Lo(o,c)}function wje(e,t,i,r,s){i!==r&&(e=-e);const o={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:s=Qs(s,2),minimumFractionDigits:s,signDisplay:"exceptZero"};let c=ei(e,t,"degrees")%360;return c=tW(c,o),Lo(c,o)}const aL=new Map;function tW(e,t){const i=JSON.stringify(t);let r=aL.get(i);return r||(r=new Intl.NumberFormat("en-US",t),aL.set(i,r)),/\-?\+?360/.test(r.format(e))?0:e}function Xge(e,t,i){if(t===i)return e;switch(i){case"arithmetic":return Qge(e);case"geographic":return e1e(e)}}function Qge(e){return 90-e}function e1e(e){return-e-90}const lL=["B","kB","MB","GB","TB"];function t1e(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(Qx.KILOBYTES));i=so(i,0,lL.length-1);const r=Lo(t/Qx.KILOBYTES**i,{maximumFractionDigits:2});return pa(e.units.bytes[lL[i]],{fileSize:r})}function i1e(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const s=t.find(o=>o.name===i);return s?r1e({tagName:r,tags:s.tags}):null}function r1e(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const r=i.find(s=>s.name===t);return r&&r.value||null}var XT;const s1e={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Rn=XT=class extends $e{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=i1e({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return s1e[t]||null}clone(){return new XT({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};v([_({type:String})],Rn.prototype,"contentType",void 0),v([_()],Rn.prototype,"exifInfo",void 0),v([_({readOnly:!0})],Rn.prototype,"orientationInfo",null),v([_({type:gi})],Rn.prototype,"id",void 0),v([_({type:String})],Rn.prototype,"globalId",void 0),v([_({type:String})],Rn.prototype,"keywords",void 0),v([_({type:String})],Rn.prototype,"name",void 0),v([_({json:{read:!1}})],Rn.prototype,"parentGlobalId",void 0),v([_({json:{read:!1}})],Rn.prototype,"parentObjectId",void 0),v([_({type:gi})],Rn.prototype,"size",void 0),v([_({json:{read:!1}})],Rn.prototype,"url",void 0),Rn=XT=v([K("esri.layers.support.AttachmentInfo")],Rn);const n1e=Rn;var QT;let ls=QT=class extends $e{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new QT(ve({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};v([_({type:[String],json:{write:!0}})],ls.prototype,"attachmentTypes",void 0),v([_({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],ls.prototype,"attachmentsWhere",void 0),v([_({type:Boolean,json:{write:!0}})],ls.prototype,"cacheHint",void 0),v([_({type:[String],json:{write:!0}})],ls.prototype,"keywords",void 0),v([_({type:[Number],json:{write:!0}})],ls.prototype,"globalIds",void 0),v([_({json:{write:!0}})],ls.prototype,"name",void 0),v([_({type:Number,json:{read:{source:"resultRecordCount"}}})],ls.prototype,"num",void 0),v([_({type:[Number],json:{write:!0}})],ls.prototype,"objectIds",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],ls.prototype,"returnMetadata",void 0),v([_({type:[Number],json:{write:!0}})],ls.prototype,"size",void 0),v([_({type:Number,json:{read:{source:"resultOffset"}}})],ls.prototype,"start",void 0),v([qe("start"),qe("num")],ls.prototype,"writeStart",null),v([_({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ls.prototype,"where",void 0),ls=QT=v([K("esri.rest.support.AttachmentQuery")],ls),ls.from=Er(ls);const eS=ls,o1e="esri.widgets.Feature.support.featureUtils",uL=Ie.getLogger(o1e),a1e=/href=(""|'')/gi,l1e=/(\{([^\{\r\n]+)\})/g,u1e=/\'/g,iW=/^\s*expression\//i,c1e=/(\n)/gi,h1e=/[\u00A0-\u9999<>\&]/gim,d1e=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,p1e=/^(?:mailto:|tel:)/,rW="relationships/",eC=pg("short-date-short-time");function sW(e){if(!ae(e))return e.get("sourceLayer")||e.get("layer")}async function tS(e,t){return typeof e=="function"?e.call(null,t):e}function nW(e=""){if(e)return!p1e.test(e.trim().toLowerCase())}function Y7(e){return!!e&&iW.test(e)}function f1e(e,t){if(!Y7(t)||!e)return null;const i=t.replace(iW,"").toLowerCase();let r=null;return e.some(s=>s.name.toLowerCase()===i&&(r=s,!0)),r}function oW(e,t){const i=f1e(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function m1e(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function y1e(e){return e.replace(a1e,"")}function qb(e,t){const i=K7(t,e);return i?i.name:e}function g1e(e,t){return e&&e.map(i=>qb(i,t))}function K7(e,t){var i;return e&&typeof e.getField=="function"&&t&&(i=e.getField(t))!=null?i:null}function aW(e){return`${e}`.trim()}function Df({attributes:e,globalAttributes:t,layer:i,text:r,expressionAttributes:s,fieldInfoMap:o}){return r?tC({formattedAttributes:t,template:_1e(r,{...t,...s,...e},i),fieldInfoMap:o}):""}function tC({formattedAttributes:e,template:t,fieldInfoMap:i}){return aW(y1e(pa(pa(t,r=>m1e(r,i)),e)))}function v1e(e,t,i=!1){const r=t[e];if(typeof r=="string"){const s="%27",o=(i?encodeURIComponent(r):r).replace(u1e,s);t[e]=o}}function b1e(e,t=!1){const i={...e};return Object.keys(i).forEach(r=>v1e(r,i,t)),i}function w1e(e,t,i){const r=(t=aW(t))&&t[0]!=="{";return pa(e,b1e(i,r||!1))}function iC(e,t){return e.replace(l1e,(i,r,s)=>{const o=K7(t,s);return o?`{${o.name}}`:r})}function _1e(e,t,i){const r=iC(e,i);return r&&r.replace(d1e,(s,o,c)=>w1e(s,o||c,t))}function x1e(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function S1e(e){return(e==null?void 0:e.type)==="feature"}function cL(e){return!!(e!=null&&e.layer)}function I1e(e){return(e==null?void 0:e.type)==="map-image"}function E1e(e,t){var b;const i=t.fieldInfos,r=t.fieldName,s=(b=lW(i,r))==null?void 0:b.clone(),o=t.preventPlacesFormatting,c=t.layer,u=K7(c,r);if(s&&(u==null?void 0:u.type)==="date"){const S=s.format||new Bm;S.dateFormat=S.dateFormat||"short-date-short-time",S.dateTimeFormatOptions=!cL(c)&&S1e(c)&&c.datesInUnknownTimezone||cL(c)&&I1e(c.layer)&&c.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=S}const g=s&&s.format;return typeof e=="string"&&Tq(r)&&g?g.formatRasterPixelValue(e):typeof(e=x1e(e,g))=="string"||e==null||g==null?Vw(e):o?Lo(e,{...m7(g),minimumFractionDigits:0,maximumFractionDigits:20}):g.format(e)}function lW(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==i)&&(r=s,!0)),r}function M1e({fieldName:e,graphic:t,layer:i}){if(dc(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:r}=i;if(!r||e!==r)return null;const s=i.getFeatureType(t);return s?s.name:null}function T1e({fieldName:e,value:t,graphic:i,layer:r}){if(dc(e)||!r||typeof r.getFieldDomain!="function")return null;const s=i&&r.getFieldDomain(e,{feature:i});return s&&s.type==="coded-value"?s.getName(t):null}function C1e(e,t){const{creatorField:i,creationDateField:r,editorField:s,editDateField:o}=e;if(!t)return;const c=t[o];if(typeof c=="number"){const g=t[s];return{type:"edit",date:nr(c,eC),user:g}}const u=t[r];if(typeof u=="number"){const g=t[i];return{type:"create",date:nr(u,eC),user:g}}return null}function A1e(e,t){const i=new Map;return e&&e.forEach(r=>{const s=qb(r.fieldName,t);r.fieldName=s,i.set(s.toLowerCase(),r)}),i}function hL(e){const t=[];if(!e)return t;const{fieldInfos:i,content:r}=e;return i&&t.push(...i),r&&Array.isArray(r)&&r.forEach(s=>{if(s.type==="fields"){const o=s&&s.fieldInfos;o&&t.push(...o)}}),t}function Z7(e){return e.replace(h1e,t=>`&#${t.charCodeAt(0)};`)}function Vw(e){return typeof e=="string"?e.replace(c1e,'<br class="esri-text-new-line" />'):e}function uW(e){const{value:t,fieldName:i,fieldInfos:r,fieldInfoMap:s,layer:o,graphic:c}=e;if(t==null)return"";const u=T1e({fieldName:i,value:t,graphic:c,layer:o});if(u)return u;const g=M1e({fieldName:i,graphic:c,layer:o});if(g)return g;if(s.get(i.toLowerCase()))return E1e(t,{fieldInfos:r||Array.from(s.values()),fieldName:i,layer:o});const b=o&&o.fieldsIndex;return b&&b.isDateField(i)?nr(t,eC):Vw(t)}function LI({fieldInfos:e,attributes:t,layer:i,graphic:r,fieldInfoMap:s,relatedInfos:o}){const c={};return o==null||o.forEach(u=>P1e({attributes:c,relatedInfo:u,fieldInfoMap:s,fieldInfos:e,layer:i})),t&&Object.keys(t).forEach(u=>{const g=t[u];c[u]=uW({fieldName:u,fieldInfos:e,fieldInfoMap:s,layer:i,value:g,graphic:r})}),c}async function cW(e,t){var S,E;const{layer:i,graphic:r,outFields:s,objectIds:o,returnGeometry:c,spatialReference:u}=e,g=o[0];if(typeof g!="number"&&typeof g!="string"){const A="Could not query required fields for the specified feature. The feature's ID is invalid.",O={layer:i,graphic:r,objectId:g,requiredFields:s};return uL.warn(A,O),null}if(!((E=(S=Tn(i))==null?void 0:S.operations)!=null&&E.supportsQuery)){const A="The specified layer cannot be queried. The following fields will not be available.",O={layer:i,graphic:r,requiredFields:s,returnGeometry:c};return uL.warn(A,O),null}const b=i.createQuery();return b.objectIds=o,b.outFields=s!=null&&s.length?s:[i.objectIdField],b.returnGeometry=!!c,b.returnZ=!!c,b.returnM=!!c,b.outSpatialReference=u,(await i.queryFeatures(b,t)).features[0]}async function $1e(e){var r;if(!((r=e.expressionInfos)!=null&&r.length))return!1;const t=await pl(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function k1e({graphic:e,popupTemplate:t,layer:i,spatialReference:r},s){if(!i||!t||(typeof i.load=="function"&&await i.load(s),!e.attributes))return;const o=e.attributes[i.objectIdField];if(o==null)return;const c=[o],u=await t.getRequiredFields(i.fieldsIndex),g=Fde(u,e),b=g?[]:u,S=t.returnGeometry||await $1e(t);if(g&&!S)return;const E=await cW({layer:i,graphic:e,outFields:b,objectIds:c,returnGeometry:S,spatialReference:r},s);E&&(E.geometry&&(e.geometry=E.geometry),E.attributes&&(e.attributes={...e.attributes,...E.attributes}))}function dc(e=""){return!!e&&e.includes(rW)}function O1e(e){return e?`${rW}${e.layerId}/${e.fieldName}`:""}function dL({attributes:e,graphic:t,relatedInfo:i,fieldInfos:r,fieldInfoMap:s,layer:o}){e&&t&&i&&Object.keys(t.attributes).forEach(c=>{const u=O1e({layerId:i.relation.id.toString(),fieldName:c}),g=t.attributes[c];e[u]=uW({fieldName:u,fieldInfos:r,fieldInfoMap:s,layer:o,value:g,graphic:t})})}function P1e({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(o=>dL({attributes:e,graphic:o,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(o=>dL({attributes:e,graphic:o,relatedInfo:t,fieldInfoMap:i,fieldInfos:r,layer:s})))}const pL=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},hW=({layer:e,method:t,query:i,definitionExpression:r})=>{var c,u;if(!((u=(c=e.capabilities)==null?void 0:c.query)!=null&&u.supportsCacheHint)||t==="attachments")return;const s=U(i.where)?i.where:null,o=U(i.geometry)?i.geometry:null;pL(r)||pL(s)||(o==null?void 0:o.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},F1e=({query:e,layer:t,method:i})=>{hW({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},L1e=({queryPayload:e,layer:t,method:i})=>{hW({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})};function R1e(e,t,i){return e&&t&&i?fL(e.allLayers,t,i)||fL(e.allTables,t,i):null}function fL(e,t,i){return e.find(r=>r!==t&&r.type==="feature"&&r.url===t.url&&r.layerId===i.relatedTableId)}const mL={editing:!1,operations:{add:!0,update:!0,delete:!0}},dW=Be.ofType(n1e);let Nn=class extends Re{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...mL},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new dW,this.fileInfos=new Be,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(ge(()=>this.graphic,()=>this._graphicChanged(),rt))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...mL,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const t=e.layer||e.sourceLayer;return(t==null?void 0:t.loaded)&&"capabilities"in t&&t.capabilities&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new de("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getObjectId(),r=new eS({objectIds:[i],returnMetadata:!0}),s=[],o=e.queryAttachments(r).then(u=>u[i]||s).catch(()=>s);this._getAttachmentsPromise=o,this.notifyChange("state");const c=await o;return t.removeAll(),c.length&&t.addMany(c),this._getAttachmentsPromise=null,this.notifyChange("state"),c}async addAttachment(e,t=this.graphic){var u;const{_attachmentLayer:i,attachmentInfos:r,abilities:s}=this;if(!t)throw new de("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:t});if(!e)throw new de("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((u=s.operations)!=null&&u.add))throw new de("invalid-abilities","addAttachment(): add abilities are required.");if(!i||typeof i.addAttachment!="function")throw new de("invalid-layer","addAttachment(): A valid layer is required.");const o=i.addAttachment(t,e).then(g=>this._queryAttachment(g.objectId,t)),c=await o;return r.add(c),c}async deleteAttachment(e){var u;const{_attachmentLayer:t,attachmentInfos:i,graphic:r,abilities:s}=this;if(!e)throw new de("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((u=s.operations)!=null&&u.delete))throw new de("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new de("invalid-layer","deleteAttachment(): A valid layer is required.");if(!r)throw new de("invalid-graphic","deleteAttachment(): A graphic is required.");const o=t.deleteAttachments(r,[e.id]).then(()=>e),c=await o;return i.remove(c),c}async updateAttachment(e,t=this.activeAttachmentInfo){var b;const{_attachmentLayer:i,attachmentInfos:r,graphic:s,abilities:o}=this;if(!e)throw new de("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new de("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!((b=o.operations)!=null&&b.update))throw new de("invalid-abilities","updateAttachment(): Update abilities are required.");const c=r.findIndex(S=>S===t);if(!i||typeof i.updateAttachment!="function")throw new de("invalid-layer","updateAttachment(): A valid layer is required.");if(!s)throw new de("invalid-graphic","updateAttachment(): A graphic is required.");const u=i.updateAttachment(s,t.id,e).then(S=>this._queryAttachment(S.objectId)),g=await u;return r.splice(c,1,g),g}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,t){if(!e||!t)return null;const i={file:e,form:t};return this.fileInfos.add(i),i}updateFile(e,t,i=this.activeFileInfo){if(!e||!t||!i)return null;const r=this.fileInfos.findIndex(s=>i===s);return r>-1&&this.fileInfos.splice(r,1,{file:e,form:t}),this.fileInfos.items[r]}deleteFile(e){const t=this.fileInfos.find(i=>i.file===e);return t?(this.fileInfos.remove(t),t):null}async _queryAttachment(e,t){const{_attachmentLayer:i}=this;if(!e||!(i!=null&&i.queryAttachments))throw new de("invalid-attachment-id","Could not query attachment.");const r=this._getObjectId(t),s=new eS({objectIds:[r],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return i.queryAttachments(s).then(o=>o[r][0])}_getObjectId(e=this.graphic){var t;return(t=e==null?void 0:e.getObjectId())!=null?t:null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=sW(e);this._attachmentLayer=t?t.type==="scene"&&U(t.associatedLayer)?t.associatedLayer:t:null}};v([_()],Nn.prototype,"abilities",void 0),v([_t("abilities")],Nn.prototype,"castAbilities",null),v([_()],Nn.prototype,"activeAttachmentInfo",void 0),v([_()],Nn.prototype,"activeFileInfo",void 0),v([_({readOnly:!0,type:dW})],Nn.prototype,"attachmentInfos",void 0),v([_()],Nn.prototype,"fileInfos",void 0),v([_({type:wr})],Nn.prototype,"graphic",void 0),v([_()],Nn.prototype,"mode",void 0),v([_({readOnly:!0})],Nn.prototype,"state",null),v([_()],Nn.prototype,"filesEnabled",void 0),v([_({readOnly:!0})],Nn.prototype,"supportsResizeAttachments",null),Nn=v([K("esri.widgets.Attachments.AttachmentsViewModel")],Nn);const z5=Nn;function yL(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function N1e(e){const t=Dt("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function ui(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var D1e=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},pW=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?pW(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=D1e(s)),t.push(s))}},j1e=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return pW(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function J(e,t,...i){return typeof e!="function"||J7(e)?j1e(e,t,...i):e(t,...i)}const gL={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Gt="esri-attachments",tp="esri-button",Ue={base:Gt,loaderContainer:`${Gt}__loader-container`,loader:`${Gt}__loader`,fadeIn:`${Gt}--fade-in`,container:`${Gt}__container`,containerList:`${Gt}__container--list`,containerPreview:`${Gt}__container--preview`,actions:`${Gt}__actions`,deleteButton:`${Gt}__delete-button`,addAttachmentButton:`${Gt}__add-attachment-button`,errorMessage:`${Gt}__error-message`,items:`${Gt}__items`,item:`${Gt}__item`,itemButton:`${Gt}__item-button`,itemMask:`${Gt}__item-mask`,itemMaskIcon:`${Gt}__item-mask--icon`,itemImage:`${Gt}__image`,itemImageResizable:`${Gt}__image--resizable`,itemLabel:`${Gt}__label`,itemFilename:`${Gt}__filename`,itemChevronIcon:`${Gt}__item-chevron-icon`,itemLink:`${Gt}__item-link`,itemLinkOverlay:`${Gt}__item-link-overlay`,itemLinkOverlayIcon:`${Gt}__item-link-overlay-icon`,itemEditIcon:`${Gt}__item-edit-icon`,itemAddIcon:`${Gt}__item-add-icon`,itemAddButton:`${Gt}__item-add-button`,formNode:`${Gt}__form-node`,fileFieldset:`${Gt}__file-fieldset`,fileLabel:`${Gt}__file-label`,fileName:`${Gt}__file-name`,fileInput:`${Gt}__file-input`,metadata:`${Gt}__metadata`,metadataFieldset:`${Gt}__metadata-fieldset`,progressBar:`${Gt}__progress-bar`,esriWidget:"esri-widget",esriButton:tp,buttonDisabled:`${tp}--disabled`,esriButtonSecondary:`${tp}--secondary`,esriButtonTertiary:`${tp}--tertiary`,esriButtonThird:`${tp}--third`,esriButtonSmall:`${tp}--small`,esriButtonHalf:`${tp}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},RI=window.CSS;let Us=class extends ki{constructor(e,t){super(e,t),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...gL},this._supportsImageOrientation=RI&&RI.supports&&RI.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new z5),this.addHandles([$i(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),$i(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),ge(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),rt)])}loadDependencies(){return Promise.all([pe(()=>import("./calcite-icon.5b76e0a1.js"),["assets/calcite-icon.5b76e0a1.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"])])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...gL,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new de("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new de("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new de("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}deleteFile(e){var i;const t=this.viewModel.deleteFile(e||((i=this.viewModel.activeFileInfo)==null?void 0:i.file));return this.viewModel.mode="view",t}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return J("div",{class:this.classes(Ue.base,Ue.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?J("div",{key:"error-message",class:Ue.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:t,activeAttachmentInfo:i}=this.viewModel;return t==="add"?this.renderAddForm():t==="edit"?this.renderDetailsForm(i||e):this.renderAttachmentContainer()}renderLoading(){return J("div",{class:Ue.loaderContainer,key:"loader"},J("div",{class:Ue.loader}))}renderProgressBar(){return this.visibleElements.progressBar?J("div",{class:Ue.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,r=this.visibleElements.cancelAddButton?J("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Ue.esriButton,Ue.esriButtonTertiary,Ue.esriButtonSmall,Ue.esriButtonHalf,e&&Ue.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?J("button",{type:"submit",disabled:i,class:this.classes(Ue.esriButton,Ue.esriButtonSecondary,Ue.esriButtonSmall,Ue.esriButtonHalf,{[Ue.buttonDisabled]:i})},this.messages.add):null,o=t?J("span",{key:"file-name",class:Ue.fileName},t.name):null,c=J("form",{bind:this,afterCreate:gd,afterRemoved:jF,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},J("fieldset",{class:Ue.fileFieldset},o,J("label",{class:this.classes(Ue.fileLabel,Ue.esriButton,Ue.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,J("input",{class:Ue.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,r);return J("div",{key:"add-form-container",class:Ue.formNode},c)}renderDetailsForm(e){var ee,ie,ne;const{visibleElements:t,viewModel:i,selectedFile:r,submitting:s}=this,{abilities:o}=i,c=s||!r;let u,g,b,S;r?(u=r.type,g=r.name,b=r.size):e&&"file"in e?(u=e.file.type,g=e.file.name,b=e.file.size):e&&"contentType"in e&&(u=e.contentType,g=e.name,b=e.size,S=e.url);const E=o.editing&&((ee=o.operations)==null?void 0:ee.delete)&&t.deleteButton?J("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:oe=>this._submitDeleteAttachment(oe,e),class:this.classes(Ue.esriButton,Ue.esriButtonSmall,Ue.esriButtonTertiary,Ue.deleteButton,{[Ue.buttonDisabled]:s})},this.messages.delete):void 0,A=o.editing&&((ie=o.operations)==null?void 0:ie.update)&&t.updateButton?J("button",{disabled:c,key:"update-button",type:"submit",class:this.classes(Ue.esriButton,Ue.esriButtonSmall,Ue.esriButtonThird,{[Ue.buttonDisabled]:c})},this.messages.update):void 0,O=this.visibleElements.cancelUpdateButton?J("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Ue.esriButton,Ue.esriButtonSmall,Ue.esriButtonTertiary,Ue.esriButtonThird,{[Ue.buttonDisabled]:s})},this.messages.cancel):void 0,L=o.editing&&((ne=o.operations)==null?void 0:ne.update)?J("fieldset",{key:"file",class:Ue.fileFieldset},J("span",{key:"file-name",class:Ue.fileName},g),J("label",{class:this.classes(Ue.fileLabel,Ue.esriButton,Ue.esriButtonSecondary)},this.messages.changeFile,J("input",{class:Ue.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,N=J("fieldset",{key:"size",class:Ue.metadataFieldset},J("label",null,t1e(this.messagesUnits,b!=null?b:0))),z=J("fieldset",{key:"content-type",class:Ue.metadataFieldset},J("label",null,u)),q=U(S)?J("a",{class:Ue.itemLink,href:S,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),J("div",{class:Ue.itemLinkOverlay},J("span",{class:Ue.itemLinkOverlayIcon},J("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),Z=J("form",{bind:this,afterCreate:gd,afterRemoved:jF,"data-node-ref":"_updateAttachmentForm",onsubmit:oe=>this._submitUpdateAttachment(oe,e)},J("div",{class:Ue.metadata},N,z),L,J("div",{class:Ue.actions},E,O,A));return J("div",{key:"edit-form-container",class:Ue.formNode},q,Z)}renderImageMask(e,t){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,t):null}renderGenericImageMask(e,t){const{supportsResizeAttachments:i}=this.viewModel,r=N1e(t),s={[Ue.itemImageResizable]:i};return J("div",{class:this.classes(Ue.itemMaskIcon,Ue.itemMask)},J("img",{title:e,alt:e,src:r,class:this.classes(s,Ue.itemImage)}))}renderImageMaskForAttachment(e,t){const{supportsResizeAttachments:i}=this.viewModel;if(!e)return null;const{contentType:r,name:s,url:o}=e;if(!i||!yL(r))return this.renderGenericImageMask(s,r);const c=this._getCSSTransform(e),u=c?{transform:c,"image-orientation":"none"}:{},g=`${o}${o!=null&&o.includes("?")?"&":"?"}w=${t}`,b={[Ue.itemImageResizable]:i};return J("div",{class:this.classes(Ue.itemMask)},J("img",{styles:u,alt:s,title:s,src:g,class:this.classes(b,Ue.itemImage)}))}renderFile(e){const{file:t}=e;return J("li",{class:Ue.item,key:t},J("button",{key:"details-button",bind:this,class:Ue.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),J("label",{class:Ue.itemLabel},J("span",{class:Ue.itemFilename},t.name||this.messages.noTitle),J("span",{"aria-hidden":"true",class:this.classes(Ue.itemChevronIcon,Zn(this.container)?Ue.iconLeft:Ue.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i,effectiveDisplayType:r}=this,{abilities:s,supportsResizeAttachments:o}=i,{contentType:c,name:u,url:g}=e,b=this.renderImageMask(e,t==="list"?48:400),S=s.editing?J("span",{"aria-hidden":"true",class:this.classes(Ue.itemChevronIcon,Zn(this.container)?Ue.iconLeft:Ue.iconRight)}):null,E=[b,r==="preview"&&o&&yL(c)?null:J("label",{class:Ue.itemLabel},J("span",{class:Ue.itemFilename},u||this.messages.noTitle),S)],A=s.editing?J("button",{key:"details-button",bind:this,class:Ue.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},E):J("a",{key:"details-link",class:Ue.itemButton,href:g!=null?g:void 0,target:"_blank"},E);return J("li",{class:Ue.item,key:e},A)}renderAttachmentContainer(){var O;const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:r,abilities:s,fileInfos:o}=t,c=!!(r!=null&&r.length),u=!!(o!=null&&o.length),g={[Ue.containerList]:e!=="preview",[Ue.containerPreview]:e==="preview"},b=s.editing&&((O=s.operations)==null?void 0:O.add)&&i.addButton?J("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Ue.esriButton,Ue.esriButtonTertiary,Ue.addAttachmentButton),type:"button"},J("span",{"aria-hidden":"true",class:this.classes(Ue.itemAddIcon,Ue.iconPlus)}),this.messages.add):void 0,S=c?J("ul",{key:"attachments-list",class:Ue.items},r.toArray().map(L=>this.renderAttachmentInfo({attachmentInfo:L,displayType:e}))):void 0,E=u?J("ul",{key:"file-list",class:Ue.items},o.toArray().map(L=>this.renderFile(L))):void 0,A=u||c?void 0:J("div",{class:Ue.empty},this.messages.noAttachments);return J("div",{key:"attachments-container",class:this.classes(Ue.container,g)},S,E,A,b)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),t&&("file"in t?this.deleteFile(t.file):t&&this.deleteAttachment(t))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,t){e.preventDefault(),t&&"file"in t?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}_startEditFile(e){const{viewModel:t}=this;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:t}=e;return!this._supportsImageOrientation&&t?[t.rotation?`rotate(${t.rotation}deg)`:"",t.mirrored?"scaleX(-1)":""].join(" "):""}};v([_()],Us.prototype,"abilities",null),v([_()],Us.prototype,"displayType",void 0),v([_({readOnly:!0})],Us.prototype,"effectiveDisplayType",null),v([_()],Us.prototype,"graphic",null),v([_()],Us.prototype,"label",null),v([_(),ui("esri/widgets/Attachments/t9n/Attachments")],Us.prototype,"messages",void 0),v([_(),ui("esri/core/t9n/Units")],Us.prototype,"messagesUnits",void 0),v([_({readOnly:!0})],Us.prototype,"selectedFile",void 0),v([_({readOnly:!0})],Us.prototype,"submitting",void 0),v([_({readOnly:!0})],Us.prototype,"error",void 0),v([_({type:z5})],Us.prototype,"viewModel",void 0),v([_()],Us.prototype,"visibleElements",void 0),v([_t("visibleElements")],Us.prototype,"castVisibleElements",null),Us=v([K("esri.widgets.Attachments")],Us);const fW=Us;let Y1=class extends z5{constructor(e){super(e),this.description=null,this.title=null}};v([_()],Y1.prototype,"description",void 0),v([_()],Y1.prototype,"title",void 0),Y1=v([K("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Y1);const X7=Y1,z1e={heading:"esri-widget__heading"};function sl({level:e,class:t,...i},r){const s=mW(e);return J(`h${s}`,{...i,class:V7(z1e.heading,t),role:"heading","aria-level":String(s)},r)}function mW(e){return so(Math.ceil(e),1,6)}function K1(e,t=1){return mW(e+t)}const NI="esri-feature-element-info",DI={base:NI,title:`${NI}__title`,description:`${NI}__description`};let pm=class extends ki{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return J("div",{class:DI.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?J(sl,{level:this.headingLevel,class:DI.title},e):null}renderDescription(){const{description:e}=this;return e?J("div",{key:"description",class:DI.description},e):null}};v([_()],pm.prototype,"description",void 0),v([_()],pm.prototype,"headingLevel",void 0),v([_()],pm.prototype,"title",void 0),pm=v([K("esri.widgets.Feature.support.FeatureElementInfo")],pm);const V5=pm,V1e={base:"esri-feature-attachments"};let Nl=class extends ki{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new fW,this.headingLevel=2,this.viewModel=new X7}initialize(){this._featureElementInfo=new V5,this.addHandles([ge(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),rt),ge(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,rt)])}destroy(){var e;this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var t;const{attachmentsWidget:e}=this;return J("div",{class:V1e.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var r;const{description:e,title:t,headingLevel:i}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:t,headingLevel:i})}};v([_({readOnly:!0})],Nl.prototype,"attachmentsWidget",void 0),v([_()],Nl.prototype,"description",null),v([_()],Nl.prototype,"displayType",null),v([_()],Nl.prototype,"graphic",null),v([_()],Nl.prototype,"headingLevel",void 0),v([_()],Nl.prototype,"title",null),v([_({type:X7})],Nl.prototype,"viewModel",void 0),Nl=v([K("esri.widgets.Feature.FeatureAttachments")],Nl);const G1e=Nl,ar=e=>{let t=class extends e{destroy(){var i,r;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(r=this._get("updatingHandles"))==null||r.destroy())}get handles(){return this._get("handles")||new Vr}get updatingHandles(){return this._get("updatingHandles")||new Jf}};return v([_({readOnly:!0})],t.prototype,"handles",null),v([_({readOnly:!0})],t.prototype,"updatingHandles",null),t=v([K("esri.core.HandleOwner")],t),t};let zy=class extends ar(Re){};zy=v([K("esri.core.HandleOwner")],zy);let xh=class extends ar(Re){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(ge(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},rt))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&t&&(tS(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const t=this.graphic;if(!t||!e)return;const i=tS(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const r=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};v([_({readOnly:!0})],xh.prototype,"created",void 0),v([_()],xh.prototype,"creator",void 0),v([_()],xh.prototype,"destroyer",void 0),v([_({type:wr})],xh.prototype,"graphic",void 0),v([_({readOnly:!0})],xh.prototype,"state",null),xh=v([K("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],xh);const iS=xh;function vr(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:q1e(e[t])}}}function U1e(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function q1e(e){return function(t,...i){U1e(t)?Nf(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function G5(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:B1e(e);i.push(...r)}}function B1e(e){return e.split(",").map(t=>t.trim())}const yW="calcite-mode-";function H1e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}function rS(){return H1e().startsWith("dark")}function W1e(){return`${yW}${rS()?"dark":"light"}`}function J1e(e){Y1e(e),e.classList.add(W1e())}function Y1e(e){Array.from(e.classList).forEach(t=>{t.startsWith(yW)&&e.classList.remove(t)})}function sS(e){return e&&typeof e.render=="function"}function K1e(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const jI="esri-feature-content",zI={base:jI,loaderContainer:`${jI}__loader-container`,loader:`${jI}__loader`};let fm=class extends ki{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(r=>{nW(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return J("div",{class:zI.loaderContainer,key:"loader"},J("div",{class:zI.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?J("div",{key:e,bind:e,afterCreate:this._attachToNode}):sS(e)?J("div",{key:e},!e.destroyed&&e.render()):J("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return J("div",{class:zI.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};v([_()],fm.prototype,"creator",null),v([_()],fm.prototype,"graphic",null),v([_({type:iS})],fm.prototype,"viewModel",void 0),fm=v([K("esri.widgets.Feature.FeatureContent")],fm);const b3=fm;let Nu=class extends Re{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const s=r.clone();s.label=oW(s,e),i.push(s)}),i}};v([_()],Nu.prototype,"attributes",void 0),v([_({type:[jq]})],Nu.prototype,"expressionInfos",void 0),v([_()],Nu.prototype,"description",void 0),v([_({type:[Aw]})],Nu.prototype,"fieldInfos",void 0),v([_({readOnly:!0})],Nu.prototype,"formattedFieldInfos",null),v([_()],Nu.prototype,"title",void 0),Nu=v([K("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Nu);const U5=Nu,Z1e=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function X1e(e){let t=null;return Z1e.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function w3(e,t){if(typeof t!="string"||!t)return t;const i=X1e(t);if(!i)return t;const r=t.match(i.pattern),s=r&&r[2],o=pa(pa(i.label,{messages:e,hierPart:s}),{appName:i.appName}),c=i.target?` target="${i.target}"`:"",u=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${c} href="$1"${u}>${o}</a>`)}const j_="esri-feature-fields",Qg={base:j_,fieldHeader:`${j_}__field-header`,fieldData:`${j_}__field-data`,fieldDataDate:`${j_}__field-data--date`,esriTable:"esri-widget__table"};let Ra=class extends ki{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new U5,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new V5,this.addHandles(ge(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),rt))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,r=e.fieldName,s=e.label||r,o=i?i[r]==null?"":i[r]:"",c=!(!e.format||!e.format.dateFormat),u=typeof o=="number"&&!c?this._forceLTR(o):w3(this.messagesURIUtils,o),g={[Qg.fieldDataDate]:c};return J("tr",{key:`fields-element-info-row-${r}-${t}`},J("th",{key:`fields-element-info-row-header-${r}-${t}`,class:Qg.fieldHeader,innerHTML:s}),J("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(Qg.fieldData,g),innerHTML:u}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?J("table",{class:Qg.esriTable,summary:this.messages.fieldsSummary},J("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return J("div",{class:Qg.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var i;const{description:e,title:t}=this;(i=this._featureElementInfo)==null||i.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};v([_()],Ra.prototype,"attributes",null),v([_()],Ra.prototype,"description",null),v([_()],Ra.prototype,"expressionInfos",null),v([_()],Ra.prototype,"fieldInfos",null),v([_()],Ra.prototype,"title",null),v([_({type:U5,nonNullable:!0})],Ra.prototype,"viewModel",void 0),v([_(),ui("esri/widgets/Feature/t9n/Feature")],Ra.prototype,"messages",void 0),v([_(),ui("esri/widgets/support/t9n/uriUtils")],Ra.prototype,"messagesURIUtils",void 0),Ra=v([K("esri.widgets.Feature.FeatureFields")],Ra);const gW=Ra,Q1e=/^-?(\d+)(\.(\d+))?$/i;function eve(e,t){return e-t}function tve(e,t){let i,r;return i=Number(e.toFixed(t)),i<e?r=i+1/10**t:(r=i,i-=1/10**t),i=Number(i.toFixed(t)),r=Number(r.toFixed(t)),[i,r]}function ive(e,t,i,r,s){const o=rve(e,t,i,r),c=o.previous==null||o.previous<=s,u=o.next==null||o.next<=s;return c&&u||o.previous+o.next<=2*s}function vW(e){const t=String(e),i=t.match(Q1e);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(t.toLowerCase().includes("e")){const r=t.split("e"),s=r[0],o=r[1];if(s&&o){const c=Number(s);let u=Number(o);const g=u>0;g||(u=Math.abs(u));const b=vW(c);return g?(b.integer+=u,u>b.fractional?b.fractional=0:b.fractional-=u):(b.fractional+=u,u>b.integer?b.integer=1:b.integer-=u),b}}return{integer:0,fractional:0}}function rve(e,t,i,r){const s={previous:null,next:null};if(i!=null){const o=e-i,c=t-i-o;s.previous=Math.floor(Math.abs(100*c/o))}if(r!=null){const o=r-e,c=r-t-o;s.next=Math.floor(Math.abs(100*c/o))}return s}function _je(e,t={}){const i=e.slice(0),{tolerance:r=2,strictBounds:s=!1,indexes:o=i.map((c,u)=>u)}=t;o.sort(eve);for(let c=0;c<o.length;c++){const u=o[c],g=i[u],b=u===0?null:i[u-1],S=u===i.length-1?null:i[u+1],E=vW(g).fractional;if(E){let A,O=0,L=!1;for(;O<=E&&!L;){const N=tve(g,O);A=s&&c===0?N[1]:N[0],L=ive(g,A,b,S,r),O++}L&&(i[u]=A)}}return i}const sve={maximumFractionDigits:20};function nve(e){return Lo(e,sve)}var rC;let Op=rC=class extends $e{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e!=null?e:0}clone(){return new rC({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};v([_({type:Je,json:{type:[gi],write:!0}})],Op.prototype,"color",void 0),v([_({type:String,json:{write:!0}})],Op.prototype,"label",void 0),v([_({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Op.prototype,"value",void 0),v([qe("value")],Op.prototype,"writeValue",null),Op=rC=v([K("esri.renderers.visualVariables.support.ColorStop")],Op);const ove=Op;function q5(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ave(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function lve(e,t,i,r,s,o,c,u,g,b,S,E,A,O,L,N){const z=new Float32Array(16);return z[0]=e,z[1]=t,z[2]=i,z[3]=r,z[4]=s,z[5]=o,z[6]=c,z[7]=u,z[8]=g,z[9]=b,z[10]=S,z[11]=E,z[12]=A,z[13]=O,z[14]=L,z[15]=N,z}function uve(e,t){return new Float32Array(e,t,16)}const cve=q5();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:cve,clone:ave,create:q5,createView:uve,fromValues:lve},Symbol.toStringTag,{value:"Module"}));const hve=(e,t)=>{const i=Bd(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Rc(i,i)},dve=(e,t)=>{const i=Bd(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Rc(i,i)},pve=(e,t)=>{const i=1-t,r=Bd(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Rc(r,r)},fve=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=Bd(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return Rc(s,s)},mve=(e,t)=>{const i=1-2*t,r=Bd(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return Rc(r,r)},yve=(e,t)=>{const i=Bd(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Rc(i,i)},gve=(e,t)=>{const i=1-t,r=Bd(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Rc(r,r)};class B5{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Jn(t.strength,i.strength,r),this.radius=Jn(t.radius,i.radius,r),this.threshold=Jn(t.threshold,i.threshold,r)}clone(){return new B5(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Hv(this.radius),strength:this.strength,threshold:this.threshold}}}class H5{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Jn(t.radius,i.radius,r))}clone(){return new H5(this.radius)}toJSON(){return{type:"blur",radius:Hv(this.radius)}}}class Bb{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Jn(t.amount,i.amount,r),this._updateMatrix()}clone(){return new Bb(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||q5();switch(this.type){case"brightness":this._colorMatrix=hve(t,this.amount);break;case"contrast":this._colorMatrix=dve(t,this.amount);break;case"grayscale":this._colorMatrix=pve(t,this.amount);break;case"invert":this._colorMatrix=mve(t,this.amount);break;case"saturate":this._colorMatrix=yve(t,this.amount);break;case"sepia":this._colorMatrix=gve(t,this.amount)}}}class W5{constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Jn(t.offsetX,i.offsetX,r),this.offsetY=Jn(t.offsetY,i.offsetY,r),this.blurRadius=Jn(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Jn(t.color[0],i.color[0],r)),this.color[1]=Math.round(Jn(t.color[1],i.color[1],r)),this.color[2]=Math.round(Jn(t.color[2],i.color[2],r)),this.color[3]=Jn(t.color[3],i.color[3],r)}clone(){return new W5(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Hv(this.offsetX),yoffset:Hv(this.offsetY),blurRadius:Hv(this.blurRadius),color:t}}}class J5{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Jn(t.angle,i.angle,r),this._updateMatrix()}clone(){return new J5(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||q5();this._colorMatrix=fve(t,this.angle)}}class Y5{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Jn(t.amount,i.amount,r)}clone(){return new Y5(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Jn(e,t,i){return e+(t-e)*i}function Hv(e){return Math.round(1e3*$o(e))/1e3}function vve(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Bb(e.type,0);case"saturate":case"brightness":case"contrast":return new Bb(e.type,1);case"opacity":return new Y5(1);case"hue-rotate":return new J5(0);case"blur":return new H5(0);case"drop-shadow":return new W5(0,0,0,[...X6("transparent")]);case"bloom":return new B5(0,0,1)}}function bve(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function wve(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(vve(i[s]))}function _ve(e){const t=e[0];return!!t&&"type"in t}var vL,bL,sC={};function bW(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=wL(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new de("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:wL(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!bve(t[i].effects,t[i+1].effects))throw new de("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});wve(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function wL(e){let t;if(!e)return[];try{t=sC.parse(e)}catch(i){throw new de("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>xve(i))}function xve(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Sve(e);case"opacity":return Ive(e);case"hue-rotate":return Eve(e);case"blur":return Mve(e);case"drop-shadow":return Tve(e);case"bloom":return Cve(e)}}catch(t){throw t.details.filter=e,t}throw new de("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Sve(e){let t=1;return _g(e.parameters,1),e.parameters.length===1&&(t=Ka(e.parameters[0])),new Bb(e.name,t)}function Ive(e){let t=1;return _g(e.parameters,1),e.parameters.length===1&&(t=Ka(e.parameters[0])),new Y5(t)}function Eve(e){let t=0;return _g(e.parameters,1),e.parameters.length===1&&(t=Fve(e.parameters[0])),new J5(t)}function Mve(e){let t=0;return _g(e.parameters,1),e.parameters.length===1&&(t=tk(e.parameters[0]),Gw(t,e.parameters[0])),new H5(t)}function Tve(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new de("effect:type-error","Accepts only one color",{});i=Lve(r)}else{const s=tk(r);if(Object.isFrozen(t))throw new de("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&Gw(s,r)}if(t.length<2||t.length>3)throw new de("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new W5(t[0],t[1],t[2]||0,i||wW("black"))}function Cve(e){let t=1,i=0,r=0;return _g(e.parameters,3),e.parameters[0]&&(t=Ka(e.parameters[0])),e.parameters[1]&&(i=tk(e.parameters[1]),Gw(i,e.parameters[1])),e.parameters[2]&&(r=Ka(e.parameters[2])),new B5(t,i,r)}function _g(e,t){if(e.length>t)throw new de("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function K5(e){if(e.type==="color")return"<color>";if(e.unit){if(ek[e.unit])return"<length>";if(Q7[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Gw(e,t){if(e<0)throw new de("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function Ave(e){if(e.type!=="quantity"||e.unit!==null)throw new de("effect:type-error",`Expected <double>, Actual: ${K5(e)}`,{term:e})}function $ve(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new de("effect:type-error",`Expected <double> or <percentage>, Actual: ${K5(e)}`,{term:e})}bL=function(){function e(s,o){function c(){this.constructor=s}c.prototype=o.prototype,s.prototype=new c}function t(s,o,c,u){var g=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(g,t.prototype),g.expected=o,g.found=c,g.location=u,g.name="SyntaxError",g}function i(s,o,c){return c=c||" ",s.length>o?s:(o-=s.length,s+(c+=c.repeat(o)).slice(0,o))}function r(s,o){var c,u={},g=(o=o!==void 0?o:{}).grammarSource,b={start:Ji},S=Ji,E="none",A=")",O=",",L="(",N="%",z="px",q="cm",Z="mm",ee="in",ie="pt",ne="pc",oe="deg",me="rad",fe="grad",Ce="turn",_e="#",Ae=".",Oe="e",je=/^[ \t\n\r]/,De=/^[a-z\-]/,nt=/^[0-9a-fA-F]/,mt=/^[+\-]/,ct=/^[0-9]/,dt=Pe("none"),Nt=Te("none",!1),Mr=Te(")",!1),nn=Te(",",!1),ks=Pe("whitespace"),oo=Ee([" ","	",`
`,"\r"],!1,!1),$n=Pe("function"),Os=Te("(",!1),wa=Pe("identifier"),_a=Ee([["a","z"],"-"],!1,!1),ao=Pe("percentage"),fu=Te("%",!1),Yd=Pe("length"),mu=Te("px",!1),Kd=Te("cm",!1),yu=Te("mm",!1),Zd=Te("in",!1),Xd=Te("pt",!1),zc=Te("pc",!1),Wi=Pe("angle"),Q=Te("deg",!1),Tr=Te("rad",!1),kn=Te("grad",!1),Et=Te("turn",!1),Ci=Pe("number"),Ps=Pe("color"),Fs=Te("#",!1),Ls=Ee([["0","9"],["a","f"],["A","F"]],!1,!1),on=Ee(["+","-"],!1,!1),Rs=Ee([["0","9"]],!1,!1),gu=Te(".",!1),xa=Te("e",!1),Le=function(){return[]},wl=function(le,Me){return{type:"function",name:le,parameters:Me||[]}},p=function(le,Me){return Me.length>0?B9(le,Me,3):[le]},P=function(le){return{type:"quantity",value:le.value,unit:le.unit}},x=function(le){return{type:"color",colorType:le.type,value:le.value}},d=function(le){return le},l=function(){return we()},n=function(le){return{value:le,unit:"%"}},a=function(le){return{value:le,unit:"px"}},h=function(le){return{value:le,unit:"cm"}},f=function(le){return{value:le,unit:"mm"}},m=function(le){return{value:le,unit:"in"}},y=function(le){return{value:le,unit:"pt"}},w=function(le){return{value:le,unit:"pc"}},I=function(le){return{value:le,unit:"deg"}},M=function(le){return{value:le,unit:"rad"}},T=function(le){return{value:le,unit:"grad"}},$=function(le){return{value:le,unit:"turn"}},F=function(le){return{value:le,unit:null}},R=function(){return{type:"hex",value:we()}},j=function(le){return{type:"function",value:le}},H=function(){return{type:"named",value:we()}},W=function(){return parseFloat(we())},V=0,Y=0,se=[{line:1,column:1}],re=0,he=[],ue=0;if("startRule"in o){if(!(o.startRule in b))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');S=b[o.startRule]}function we(){return s.substring(Y,V)}function Te(le,Me){return{type:"literal",text:le,ignoreCase:Me}}function Ee(le,Me,Fe){return{type:"class",parts:le,inverted:Me,ignoreCase:Fe}}function He(){return{type:"end"}}function Pe(le){return{type:"other",description:le}}function lt(le){var Me,Fe=se[le];if(Fe)return Fe;for(Me=le-1;!se[Me];)Me--;for(Fe={line:(Fe=se[Me]).line,column:Fe.column};Me<le;)s.charCodeAt(Me)===10?(Fe.line++,Fe.column=1):Fe.column++,Me++;return se[le]=Fe,Fe}function et(le,Me){var Fe=lt(le),xt=lt(Me);return{source:g,start:{offset:le,line:Fe.line,column:Fe.column},end:{offset:Me,line:xt.line,column:xt.column}}}function Ve(le){V<re||(V>re&&(re=V,he=[]),he.push(le))}function Zt(le,Me,Fe){return new t(t.buildMessage(le,Me),le,Me,Fe)}function Ji(){var le;return(le=ci())===u&&(le=Pt()),le}function ci(){var le,Me;return ue++,le=V,ft(),s.substr(V,4)===E?(Me=E,V+=4):(Me=u,ue===0&&Ve(Nt)),Me!==u?(ft(),Y=le,le=Le()):(V=le,le=u),ue--,le===u&&ue===0&&Ve(dt),le}function Pt(){var le,Me;if(le=[],(Me=Ft())!==u)for(;Me!==u;)le.push(Me),Me=Ft();else le=u;return le}function Ft(){var le,Me,Fe,xt;return le=V,ft(),(Me=an())!==u?(ft(),(Fe=vt())===u&&(Fe=null),ft(),s.charCodeAt(V)===41?(xt=A,V++):(xt=u,ue===0&&Ve(Mr)),xt!==u?(ft(),Y=le,le=wl(Me,Fe)):(V=le,le=u)):(V=le,le=u),le}function vt(){var le,Me,Fe,xt,Ur,Yi,On,$0;if(le=V,(Me=bi())!==u){for(Fe=[],xt=V,Ur=ft(),s.charCodeAt(V)===44?(Yi=O,V++):(Yi=u,ue===0&&Ve(nn)),Yi===u&&(Yi=null),On=ft(),($0=bi())!==u?xt=Ur=[Ur,Yi,On,$0]:(V=xt,xt=u);xt!==u;)Fe.push(xt),xt=V,Ur=ft(),s.charCodeAt(V)===44?(Yi=O,V++):(Yi=u,ue===0&&Ve(nn)),Yi===u&&(Yi=null),On=ft(),($0=bi())!==u?xt=Ur=[Ur,Yi,On,$0]:(V=xt,xt=u);Y=le,le=p(Me,Fe)}else V=le,le=u;return le}function bi(){var le,Me;return le=V,(Me=Gr())===u&&(Me=zt())===u&&(Me=Vc())===u&&(Me=Gc()),Me!==u&&(Y=le,Me=P(Me)),(le=Me)===u&&(le=V,(Me=Uc())!==u&&(Y=le,Me=x(Me)),le=Me),le}function ft(){var le,Me;for(ue++,le=[],je.test(s.charAt(V))?(Me=s.charAt(V),V++):(Me=u,ue===0&&Ve(oo));Me!==u;)le.push(Me),je.test(s.charAt(V))?(Me=s.charAt(V),V++):(Me=u,ue===0&&Ve(oo));return ue--,Me=u,ue===0&&Ve(ks),le}function an(){var le,Me,Fe;return ue++,le=V,(Me=Mt())!==u?(s.charCodeAt(V)===40?(Fe=L,V++):(Fe=u,ue===0&&Ve(Os)),Fe!==u?(Y=le,le=d(Me)):(V=le,le=u)):(V=le,le=u),ue--,le===u&&(Me=u,ue===0&&Ve($n)),le}function Mt(){var le,Me,Fe;if(ue++,le=V,Me=[],De.test(s.charAt(V))?(Fe=s.charAt(V),V++):(Fe=u,ue===0&&Ve(_a)),Fe!==u)for(;Fe!==u;)Me.push(Fe),De.test(s.charAt(V))?(Fe=s.charAt(V),V++):(Fe=u,ue===0&&Ve(_a));else Me=u;return Me!==u&&(Y=le,Me=l()),ue--,(le=Me)===u&&(Me=u,ue===0&&Ve(wa)),le}function Gr(){var le,Me,Fe;return ue++,le=V,ft(),(Me=os())!==u?(s.charCodeAt(V)===37?(Fe=N,V++):(Fe=u,ue===0&&Ve(fu)),Fe!==u?(Y=le,le=n(Me)):(V=le,le=u)):(V=le,le=u),ue--,le===u&&ue===0&&Ve(ao),le}function zt(){var le,Me,Fe;return ue++,le=V,ft(),(Me=os())!==u?(s.substr(V,2)===z?(Fe=z,V+=2):(Fe=u,ue===0&&Ve(mu)),Fe!==u?(Y=le,le=a(Me)):(V=le,le=u)):(V=le,le=u),le===u&&(le=V,ft(),(Me=os())!==u?(s.substr(V,2)===q?(Fe=q,V+=2):(Fe=u,ue===0&&Ve(Kd)),Fe!==u?(Y=le,le=h(Me)):(V=le,le=u)):(V=le,le=u),le===u&&(le=V,ft(),(Me=os())!==u?(s.substr(V,2)===Z?(Fe=Z,V+=2):(Fe=u,ue===0&&Ve(yu)),Fe!==u?(Y=le,le=f(Me)):(V=le,le=u)):(V=le,le=u),le===u&&(le=V,ft(),(Me=os())!==u?(s.substr(V,2)===ee?(Fe=ee,V+=2):(Fe=u,ue===0&&Ve(Zd)),Fe!==u?(Y=le,le=m(Me)):(V=le,le=u)):(V=le,le=u),le===u&&(le=V,ft(),(Me=os())!==u?(s.substr(V,2)===ie?(Fe=ie,V+=2):(Fe=u,ue===0&&Ve(Xd)),Fe!==u?(Y=le,le=y(Me)):(V=le,le=u)):(V=le,le=u),le===u&&(le=V,ft(),(Me=os())!==u?(s.substr(V,2)===ne?(Fe=ne,V+=2):(Fe=u,ue===0&&Ve(zc)),Fe!==u?(Y=le,le=w(Me)):(V=le,le=u)):(V=le,le=u)))))),ue--,le===u&&ue===0&&Ve(Yd),le}function Vc(){var le,Me,Fe;return ue++,le=V,(Me=os())!==u?(s.substr(V,3)===oe?(Fe=oe,V+=3):(Fe=u,ue===0&&Ve(Q)),Fe!==u?(Y=le,le=I(Me)):(V=le,le=u)):(V=le,le=u),le===u&&(le=V,(Me=os())!==u?(s.substr(V,3)===me?(Fe=me,V+=3):(Fe=u,ue===0&&Ve(Tr)),Fe!==u?(Y=le,le=M(Me)):(V=le,le=u)):(V=le,le=u),le===u&&(le=V,(Me=os())!==u?(s.substr(V,4)===fe?(Fe=fe,V+=4):(Fe=u,ue===0&&Ve(kn)),Fe!==u?(Y=le,le=T(Me)):(V=le,le=u)):(V=le,le=u),le===u&&(le=V,(Me=os())!==u?(s.substr(V,4)===Ce?(Fe=Ce,V+=4):(Fe=u,ue===0&&Ve(Et)),Fe!==u?(Y=le,le=$(Me)):(V=le,le=u)):(V=le,le=u)))),ue--,le===u&&(Me=u,ue===0&&Ve(Wi)),le}function Gc(){var le,Me;return ue++,le=V,ft(),(Me=os())!==u?(Y=le,le=F(Me)):(V=le,le=u),ue--,le===u&&ue===0&&Ve(Ci),le}function Uc(){var le,Me,Fe,xt;if(ue++,le=V,s.charCodeAt(V)===35?(Me=_e,V++):(Me=u,ue===0&&Ve(Fs)),Me!==u){if(Fe=[],nt.test(s.charAt(V))?(xt=s.charAt(V),V++):(xt=u,ue===0&&Ve(Ls)),xt!==u)for(;xt!==u;)Fe.push(xt),nt.test(s.charAt(V))?(xt=s.charAt(V),V++):(xt=u,ue===0&&Ve(Ls));else Fe=u;Fe!==u?(Y=le,le=R()):(V=le,le=u)}else V=le,le=u;return le===u&&(le=V,(Me=Ft())!==u&&(Y=le,Me=j(Me)),(le=Me)===u&&(le=V,(Me=Mt())!==u&&(Y=le,Me=H()),le=Me)),ue--,le===u&&(Me=u,ue===0&&Ve(Ps)),le}function os(){var le,Me,Fe,xt,Ur,Yi,On;for(le=V,mt.test(s.charAt(V))?(s.charAt(V),V++):ue===0&&Ve(on),Me=V,Fe=[],ct.test(s.charAt(V))?(xt=s.charAt(V),V++):(xt=u,ue===0&&Ve(Rs));xt!==u;)Fe.push(xt),ct.test(s.charAt(V))?(xt=s.charAt(V),V++):(xt=u,ue===0&&Ve(Rs));if(s.charCodeAt(V)===46?(xt=Ae,V++):(xt=u,ue===0&&Ve(gu)),xt!==u){if(Ur=[],ct.test(s.charAt(V))?(Yi=s.charAt(V),V++):(Yi=u,ue===0&&Ve(Rs)),Yi!==u)for(;Yi!==u;)Ur.push(Yi),ct.test(s.charAt(V))?(Yi=s.charAt(V),V++):(Yi=u,ue===0&&Ve(Rs));else Ur=u;Ur!==u?Me=Fe=[Fe,xt,Ur]:(V=Me,Me=u)}else V=Me,Me=u;if(Me===u)if(Me=[],ct.test(s.charAt(V))?(Fe=s.charAt(V),V++):(Fe=u,ue===0&&Ve(Rs)),Fe!==u)for(;Fe!==u;)Me.push(Fe),ct.test(s.charAt(V))?(Fe=s.charAt(V),V++):(Fe=u,ue===0&&Ve(Rs));else Me=u;if(Me!==u){if(Fe=V,s.charCodeAt(V)===101?(xt=Oe,V++):(xt=u,ue===0&&Ve(xa)),xt!==u){if(mt.test(s.charAt(V))?(Ur=s.charAt(V),V++):(Ur=u,ue===0&&Ve(on)),Ur===u&&(Ur=null),Yi=[],ct.test(s.charAt(V))?(On=s.charAt(V),V++):(On=u,ue===0&&Ve(Rs)),On!==u)for(;On!==u;)Yi.push(On),ct.test(s.charAt(V))?(On=s.charAt(V),V++):(On=u,ue===0&&Ve(Rs));else Yi=u;Yi!==u?Fe=xt=[xt,Ur,Yi]:(V=Fe,Fe=u)}else V=Fe,Fe=u;Fe===u&&(Fe=null),Y=le,le=W()}else V=le,le=u;return le}function q9(le,Me){return le.map(function(Fe){return Fe[Me]})}function B9(le,Me,Fe){return[le].concat(q9(Me,Fe))}if((c=S())!==u&&V===s.length)return c;throw c!==u&&V<s.length&&Ve(He()),Zt(he,re<s.length?s.charAt(re):null,re<s.length?et(re,re+1):et(re,re))}return e(t,Error),t.prototype.format=function(s){var o="Error: "+this.message;if(this.location){var c,u=null;for(c=0;c<s.length;c++)if(s[c].source===this.location.source){u=s[c].text.split(/\r\n|\n|\r/g);break}var g=this.location.start,b=this.location.source+":"+g.line+":"+g.column;if(u){var S=this.location.end,E=i("",g.line.toString().length," "),A=u[g.line-1],O=(g.line===S.line?S.column:A.length+1)-g.column||1;o+=`
 --> `+b+`
`+E+` |
`+g.line+" | "+A+`
`+E+" | "+i("",g.column-1," ")+i("",O,"^")}else o+=`
 at `+b}return o},t.buildMessage=function(s,o){var c={literal:function(O){return'"'+g(O.text)+'"'},class:function(O){var L=O.parts.map(function(N){return Array.isArray(N)?b(N[0])+"-"+b(N[1]):b(N)});return"["+(O.inverted?"^":"")+L.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(O){return O.description}};function u(O){return O.charCodeAt(0).toString(16).toUpperCase()}function g(O){return O.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+u(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+u(L)})}function b(O){return O.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+u(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+u(L)})}function S(O){return c[O.type](O)}function E(O){var L,N,z=O.map(S);if(z.sort(),z.length>0){for(L=1,N=1;L<z.length;L++)z[L-1]!==z[L]&&(z[N]=z[L],N++);z.length=N}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}function A(O){return O?'"'+g(O)+'"':"end of input"}return"Expected "+E(s)+" but "+A(o)+" found."},{SyntaxError:t,parse:r}},(vL={get exports(){return sC},set exports(e){sC=e}}).exports&&(vL.exports=bL());const Q7={deg:1,grad:.9,rad:180/Math.PI,turn:360};function kve(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Q7[e.unit]!=null))throw new de("effect:type-error",`Expected <angle>, Actual: ${K5(e)}`,{term:e})}const ek={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Ove(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&ek[e.unit]!=null))throw new de("effect:type-error",`Expected <length>, Actual: ${K5(e)}`,{term:e})}function Ka(e){$ve(e);const t=e.value;return Gw(t,e),e.unit==="%"?.01*t:t}function Pve(e){return Ave(e),Gw(e.value,e),e.value}function Fve(e){return kve(e),e.value*Q7[e.unit]||0}function tk(e){return Ove(e),e.value*ek[e.unit]||0}function Lve(e){switch(e.colorType){case"hex":return nce(e.value);case"named":return wW(e.value);case"function":return Dve(e.value)}}function wW(e){if(!AU(e))throw new de("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return sce(e)}const Rve=/^rgba?/i,Nve=/^hsla?/i;function Dve(e){if(_g(e.parameters,4),Rve.test(e.name))return[Ka(e.parameters[0]),Ka(e.parameters[1]),Ka(e.parameters[2]),e.parameters[3]?Ka(e.parameters[3]):1];if(Nve.test(e.name))return $U(Pve(e.parameters[0]),Ka(e.parameters[1]),Ka(e.parameters[2]),e.parameters[3]?Ka(e.parameters[3]):1);throw new de("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function ik(e,t,i){var r;try{return zve(e)}catch(s){(r=i==null?void 0:i.messages)==null||r.push(s)}return null}function rk(e,t,i,r){try{const s=jve(e);tn(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function jve(e){const t=bW(e);return t?_ve(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function zve(e){if(!e||e.length===0)return null;if(Vve(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:nC(i.value)});return t}return nC(e)}function Vve(e){const t=e[0];return!!t&&"scale"in t}function nC(e){if(!e||!e.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[_u(i,"amount")];break;case"blur":r=[_u(i,"radius","pt")];break;case"hue-rotate":r=[_u(i,"angle","deg")];break;case"drop-shadow":r=[_u(i,"xoffset","pt"),_u(i,"yoffset","pt"),_u(i,"blurRadius","pt"),Gve(i,"color")];break;case"bloom":r=[_u(i,"strength"),_u(i,"radius","pt"),_u(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;bW(s),t.push(s)}return t.join(" ")}function _u(e,t,i){if(e[t]==null)throw new de("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function Gve(e,t){if(e[t]==null)throw new de("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const VI=-3;var Xh;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Xh||(Xh={}));class xje{constructor(t,i,r){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,r,s=0){this._storage.put(this._namespace+t,i,r,s)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,r){this._storage.updateSize(this._namespace+t,i,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class _W{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Uf,this._users=new Uf}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,r,s){const o=this._db.get(t);if(o&&(this._size-=o.size,this._db.delete(t),o.entry!==i&&this._notifyRemove(t,o.entry,Xh.ALL)),r>this._maxSize)return void this._notifyRemove(t,i,Xh.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const c=1+Math.max(s,VI)-VI;this._db.set(t,{entry:i,size:r,lifetime:c,lives:c}),this._size+=r,this._checkSizeLimit()}updateSize(t,i,r){const s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size;r>this._maxSize;){const o=this._notifyRemove(t,i,Xh.SOME);if(!(U(o)&&o>0))return void this._db.delete(t);r=o}s.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((c,u)=>{const g=c.lifetime;r[g]=(r[g]||0)+c.size,this._users.forAll(b=>{const S=b.namespace;if(u.startsWith(S)){const E=i[S]||0;i[S]=E+c.size}})});const s={};this._users.forAll(c=>{const u=c.namespace;if(!isNaN(c.hitRate)&&c.hitRate>0){const g=i[u]||0;i[u]=g,s[u]=Math.round(100*c.hitRate)+"%"}else s[u]="0%"});const o=Object.keys(i);o.sort((c,u)=>i[u]-i[c]),o.forEach(c=>t[c]=Math.round(i[c]/2**20)+"MB / "+s[c]);for(let c=r.length-1;c>=0;--c){const u=r[c];u&&(t["Priority "+(c+VI-1)]=Math.round(u/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,r)=>{r.startsWith(t)&&(this._size-=i.size,this._db.delete(r),this._notifyRemove(r,i.entry,Xh.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,Xh.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r){let s;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const c=o[1](i,r);return typeof c=="number"&&(s=c),!0}return!1}),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const r=this._notifyRemove(t,i.entry,Xh.SOME);U(r)&&r>0&&(this._size+=r,i.lives=i.lifetime,i.size=r,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class oC{constructor(t,i){this._storage=new _W,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}function Uve(e){return typeof e=="function"}function Sje(e,t,i,r){return Uve(e)?e(t,i,r):e}function Ije(e){return[e.r,e.g,e.b,e.a]}const qve=` /-,
`;function _L(e){let t=e.length;for(;t--;)if(!qve.includes(e.charAt(t)))return!1;return!0}function Bve(e,t){const i=[];let r=0,s=-1;do if(s=e.indexOf("[",r),s>=r){if(s>r){const o=e.substr(r,s-r);i.push([o,null,_L(o)])}if(r=s+1,s=e.indexOf("]",r),s>=r){if(s>r){const o=t[e.substr(r,s-r)];o&&i.push([null,o,!1])}r=s+1}}while(s!==-1);if(r<e.length-1){const o=e.substr(r);i.push([o,null,_L(o)])}return i}function Hve(e,t,i){let r="",s=null;for(const o of t){const[c,u,g]=o;if(c)g?s=c:(s&&(r+=s,s=null),r+=c);else{const b=e.attributes[u];b&&(s&&(r+=s,s=null),r+=b)}}return Wve(r,i)}function Eje(e,t,i){const r=Bve(t,e);return s=>Hve(s,r,i)}function Wve(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function Mje(e,t,i,r,s,o,c=!0){const u=t/s,g=i/o,b=Math.ceil(u/2),S=Math.ceil(g/2);for(let E=0;E<o;E++)for(let A=0;A<s;A++){const O=4*(A+(c?o-E-1:E)*s);let L=0,N=0,z=0,q=0,Z=0,ee=0,ie=0;const ne=(E+.5)*g;for(let oe=Math.floor(E*g);oe<(E+1)*g;oe++){const me=Math.abs(ne-(oe+.5))/S,fe=(A+.5)*u,Ce=me*me;for(let _e=Math.floor(A*u);_e<(A+1)*u;_e++){let Ae=Math.abs(fe-(_e+.5))/b;const Oe=Math.sqrt(Ce+Ae*Ae);Oe>=-1&&Oe<=1&&(L=2*Oe*Oe*Oe-3*Oe*Oe+1,L>0&&(Ae=4*(_e+oe*t),ie+=L*e[Ae+3],z+=L,e[Ae+3]<255&&(L=L*e[Ae+3]/250),q+=L*e[Ae],Z+=L*e[Ae+1],ee+=L*e[Ae+2],N+=L))}}r[O]=q/N,r[O+1]=Z/N,r[O+2]=ee/N,r[O+3]=ie/z}}function xW(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function SW(e){var t,i;return(i=(t=e.data)==null?void 0:t.symbol)!=null?i:null}function aC(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function lC(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function Jve(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function nS(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const Tje=(e,t=0)=>e==null||isNaN(e)?t:e,Cje=e=>e.tintColor?xW(e.tintColor):{r:255,g:255,b:255,a:1},Aje=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function $je(){return pe(()=>import("./geometryEngineJSON.ba8b71fe.js"),["assets/geometryEngineJSON.ba8b71fe.js","assets/geometryEngineJSON.365eabb9.js"])}function kje(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Oje(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Pje(e){let t="",i="";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function Fje(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function xL(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=xL(t);if(i!=null)return i}break;case"CIMTextSymbol":return xL(e.symbol);case"CIMSolidFill":return e.color}}function SL(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const i of t){const r=SL(i);if(r!=null)return r}break}case"CIMTextSymbol":return SL(e.symbol);case"CIMSolidStroke":case"CIMSolidFill":return e.color}}function IL(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=IL(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return IL(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function Lje(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Rje(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Nje(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Dje=e=>e.includes("data:image/svg+xml");function jje(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function IW(e,t,i,r){if(e)if(e.type!=="CIMTextSymbol"){if(i&&e.effects)for(const s of e.effects)Zve(s,t);if(e.symbolLayers)for(const s of e.symbolLayers)switch(s.type){case"CIMPictureMarker":case"CIMVectorMarker":Yve(s,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r!=null&&r.preserveOutlineWidth)&&s.width&&(s.width*=t);break;case"CIMPictureFill":s.height&&(s.height*=t),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t);break;case"CIMHatchFill":IW(s.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),s.offsetX&&(s.offsetX*=t),s.offsetY&&(s.offsetY*=t),s.separation&&(s.separation*=t)}}else e.height!=null&&(e.height*=t)}function Yve(e,t,i){if(e&&(e.markerPlacement&&Kve(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||IW(r.symbol,t,!0,i)}function Kve(e,t){switch(nS(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const i=e.placementTemplate.map(r=>r*t);e.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function Zve(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const i=e.dashTemplate.map(r=>r*t);e.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function Xve(e){const t=[];return uC(SW(e),t),t.length?new Je(xW(t[0])):null}function uC(e,t){var s;if(!e)return;let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const o of i.symbolLayers)if(!(o.colorLocked||r&&(lC(o)||aC(o)&&o.markerPlacement&&nS(o.markerPlacement))))switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor&&EL(t,o.tintColor);break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach(c=>{uC(c.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":EL(t,o.color);break;case"CIMHatchFill":uC(o.lineSymbol,t)}}}function EL(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function zje(e,t,i){t instanceof Je||(t=new Je(t));const r=SW(e);r&&cC(r,t,i)}function cC(e,t,i){var o;if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const s=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const c of r.symbolLayers){if(c.colorLocked)continue;if(s){if(i){const{layersToColor:g}=i;if((lC(c)||aC(c)&&c.markerPlacement&&nS(c.markerPlacement))&&g==="fill"||Jve(c)&&g==="outline")continue}else if(lC(c)||aC(c)&&c.markerPlacement&&nS(c.markerPlacement))continue}const u=t.toArray();switch(c.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":c.tintColor=u;break;case"CIMVectorMarker":(o=c.markerGraphics)==null||o.forEach(g=>{cC(g.symbol,t,i)});break;case"CIMSolidStroke":case"CIMSolidFill":c.color=u;break;case"CIMHatchFill":cC(c.lineSymbol,t,i)}}}const EW="picture-fill",MW="simple-fill",Qve="simple-line",TW="simple-marker",ebe="text",tbe="cim",GI=new oC(1e3);function Vje(e){const t=e.style;let i=null;if(e)switch(e.type){case TW:t!=="cross"&&t!=="x"&&(i=e.color);break;case MW:t==="solid"?i=e.color:t!=="none"&&(i={type:"pattern",x:0,y:0,src:Dt(`esri/symbols/patterns/${t}.png`),width:5,height:5});break;case EW:i={type:"pattern",src:e.url,width:Is(e.width)*e.xscale,height:Is(e.height)*e.yscale,x:Is(e.xoffset),y:Is(e.yoffset)};break;case ebe:i=e.color;break;case tbe:i=Xve(e)}return i}function ibe(e,t){const i=e+"-"+t;return GI.get(i)!==void 0?Promise.resolve(GI.get(i)):mi(e,{responseType:"image"}).then(r=>{const s=r.data,o=s.naturalWidth,c=s.naturalHeight,u=document.createElement("canvas");u.width=o,u.height=c;const g=u.getContext("2d");g.fillStyle=t,g.fillRect(0,0,o,c),g.globalCompositeOperation="destination-in",g.drawImage(s,0,0);const b=u.toDataURL();return GI.put(i,b),b})}function sk(e){if(!e)return null;let t=null;switch(e.type){case MW:case EW:case TW:t=sk(e.outline);break;case Qve:{const i=Is(e.width);e.style!=null&&e.style!=="none"&&i!==0&&(t={color:e.color,style:nk(e.style),width:i,cap:e.cap,join:e.join==="miter"?Is(e.miterLimit):e.join});break}default:t=null}return t}const nk=(()=>{const e={};return t=>{if(e[t])return e[t];const i=t.replace(/-/g,"");return e[t]=i,i}})(),rbe=new Je([128,128,128]),sbe=new Je("white");function nbe(e){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const i=e.symbolLayers.getItemAt(t-1);return"outline"in i?Cy(i,"outline","size"):void 0}function Gje(e){var t;if(!e)return 0;if(Ld(e)){const i=nbe(e);return U(i)?i:0}return $o((t=sk(e))==null?void 0:t.width)}function obe(e){if(ae(e)||!("symbolLayers"in e)||ae(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function abe(e){return fs(e.resource).href}function O0(e,t){if(!e)return null;let i=null;return Ld(e)?i=lbe(e):k5(e)&&(i=e.color?new Je(e.color):null),i?Hb(i,t):null}function lbe(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{var s;r.type==="object"&&((s=r.resource)==null?void 0:s.href)!=null||(i=r.type==="water"?r.color:U(r.material)?r.material.color:null)}),i?new Je(i):null}function Hb(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new Je(i)}function ube(e,t,i){const r=e.symbolLayers;if(!r)return;const s=o=>{var u;const c=U(o)?o:null;return Hb(t=(u=t!=null?t:c)!=null?u:i!=null?sbe:null,i)};r.forEach(o=>{var c;if(o.type!=="object"||((c=o.resource)==null?void 0:c.href)==null||t)if(o.type==="water")o.color=s(o.color);else{const u=U(o.material)?o.material.color:null,g=s(u);ae(o.material)?o.material=new ko({color:g}):o.material.color=g,i!=null&&"outline"in o&&U(o.outline)&&U(o.outline.color)&&(o.outline.color=Hb(o.outline.color,i))}})}function cbe(e,t,i){(t=t!=null?t:e.color)&&(e.color=Hb(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=Hb(e.outline.color,i))}function UI(e,t,i){e&&(t||i!=null)&&(t&&(t=new Je(t)),Ld(e)?ube(e,t,i):k5(e)&&cbe(e,t,i))}async function hbe(e,t){const i=e.symbolLayers;i&&await Nae(i,async r=>dbe(r,t))}async function dbe(e,t){switch(e.type){case"extrude":fbe(e,t);break;case"icon":case"line":case"text":pbe(e,t);break;case"path":ybe(e,t);break;case"object":await mbe(e,t)}}function pbe(e,t){const i=CW(t);U(i)&&(e.size=i)}function CW(e){for(const t of e)if(typeof t=="number")return t;return null}function fbe(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function mbe(e,t){const{resourceSize:i,symbolSize:r}=await gbe(e),s=AW(t,i,r);e.width=Wv(t[0],r[0],i[0],s),e.depth=Wv(t[1],r[1],i[1],s),e.height=Wv(t[2],r[2],i[2],s)}function ybe(e,t){const i=AW(t,RU,[e.width,void 0,e.height]);e.width=Wv(t[0],e.width,1,i),e.height=Wv(t[2],e.height,1,i)}function AW(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":{const o=i[r];return o!=null?o/t[r]:1}case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function gbe(e){const t=await pe(()=>import("./symbolLayerUtils.88ffaa5f.js"),[]),i=await t.computeObjectLayerResourceSize(e,10),{width:r,height:s,depth:o}=e,c=[r,o,s];let u=1;for(let g=0;g<3;g++){const b=c[g];if(b!=null){u=b/i[g];break}}for(let g=0;g<3;g++)c[g]==null&&(c[g]=i[g]*u);return{resourceSize:i,symbolSize:c}}function Wv(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t!=null?t:i;default:return e}}function vbe(e,t){const i=CW(t);if(!ae(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function bbe(e,t){if(e&&t)return Ld(e)?hbe(e,t):void(k5(e)&&vbe(e,t))}function wbe(e,t,i){if(e&&t!=null)if(Ld(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s&&s.type==="object")switch(i){case"tilt":s.tilt=t;break;case"roll":s.roll=t;break;default:s.heading=t}})}else k5(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}function $W(e){if(!e)return null;const t=e.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return nC(t)}function Uje(e){return U(e)&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}async function _be(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}const xbe="<",Sbe=">",Ibe=pg("short-date");function Ebe(e,t,i,r){let s="";t===0?s=`${xbe} `:t===i&&(s=`${Sbe} `);let o=null;return o=r?nr(e,Ibe):nve(e),s+o}const qje=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function Mbe(e){var c;if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(u=>u.type==="color");if(!t)return null;let i=null,r=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;i=t.stops[0].value,r=t.stops[t.stops.length-1].value}const s=i!=null&&r!=null?i+(r-i)/2:0,{getColor:o}=await pe(()=>Promise.resolve().then(function(){return r9}),void 0);return(c=o(t,s))!=null?c:null}async function Bje(e,t){const i=e.trailCap,r=e.trailWidth||1,s=t||await Mbe(e)||e.color;return new sn({cap:i,color:s,width:r})}const Tbe=new Je([64,64,64]);function kW(e,t){const i=[],r=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,r),e.map((s,o)=>i.includes(o)?Ebe(s,o,r,t):null)}async function Cbe(e,t,i){let r=!1,s=[],o=[];if(e.stops){const b=e.stops;s=b.map(S=>S.value),r=b.some(S=>!!S.label),r&&(o=b.map(S=>S.label))}const c=s[0],u=s[s.length-1];if(c==null&&u==null)return null;const g=r?null:kW(s,i!=null?i:!1);return(await Promise.all(s.map(async(b,S)=>{var E;return{value:b,color:e.type==="opacity"?await Abe(b,e,t):(await pe(()=>Promise.resolve().then(function(){return r9}),void 0)).getColor(e,b),label:r?o[S]:(E=g==null?void 0:g[S])!=null?E:""}}))).reverse()}async function Abe(e,t,i=Tbe){const r=new Je(i),s=(await pe(()=>Promise.resolve().then(function(){return r9}),void 0)).getOpacity(t,e);return s!=null&&(r.a=s),r}function Hje(e){let t=!1,i=[],r=[];i=e.map(u=>u.value),t=e.some(u=>!!u.label),t&&(r=e.map(u=>{var g;return(g=u.label)!=null?g:""}));const s=i[0],o=i[i.length-1];if(s==null&&o==null)return null;const c=t?null:kW(i,!1);return i.map((u,g)=>{var b;return{value:u,color:$be(u,e),label:t?r[g]:(b=c==null?void 0:c[g])!=null?b:""}}).reverse()}function $be(e,t){const{startIndex:i,endIndex:r,weight:s}=kbe(e,t);if(i===r)return t[i].color;const o=Je.blendColors(t[i].color,t[r].color,s);return new Je(o)}function kbe(e,t){let i=0,r=t.length-1;return t.some((s,o)=>e<s.value?(r=o,!0):(i=o,!1)),{startIndex:i,endIndex:r,weight:(e-t[i].value)/(t[r].value-t[i].value)}}function Wje(e,t){let i=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((r,s)=>{s===0?i.push({value:t.max,color:new Je(r.toColor),label:"high"}):i.push({value:null,color:new Je(r.toColor),label:""}),s===e.colorRamps.length-1?i.push({value:t.min,color:new Je(r.fromColor),label:"low"}):i.push({value:null,color:new Je(r.fromColor),label:""})});else{let r,s;e&&e.type==="algorithmic"?(r=e.fromColor,s=e.toColor):(r=[0,0,0,1],s=[255,255,255,1]),i=[{value:t.max,color:new Je(s),label:"high"},{value:t.min,color:new Je(r),label:"low"}]}return i}var hC;let Z1=hC=class extends $e{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new hC({color:this.color,ratio:this.ratio})}};v([_({type:Je,json:{type:[gi],default:null,write:!0}})],Z1.prototype,"color",void 0),v([_({type:Number,json:{write:!0}})],Z1.prototype,"ratio",void 0),Z1=hC=v([K("esri.renderers.support.HeatmapColorStop")],Z1);const Jv=Z1;function Obe(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(r=>{var s;return((s=r.color)==null?void 0:s.a)>0});let i=t.length-1;if(t&&t[0]){const r=t[i];r&&r.ratio!==1&&(t.push(new Jv({ratio:1,color:r.color})),i++)}return t.map((r,s)=>{var c,u;let o="";return s===0?o=((c=e.legendOptions)==null?void 0:c.minLabel)||"low":s===i&&(o=((u=e.legendOptions)==null?void 0:u.maxLabel)||"high"),{color:r.color,label:o,ratio:r.ratio}}).reverse()}Ie.getLogger("esri.renderers.support.utils");async function lo(e,t,i){qm(e,t,()=>[]).push(...i)}async function Pbe(e){var i,r,s,o,c;const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){const u=e.visualVariables.filter(g=>g.type==="color");for(const g of u){const b=((i=await Cbe(g))!=null?i:[]).map(S=>S.color);await lo(t,g.field||g.valueExpression,b)}}if(e.type==="heatmap"){const u=Obe(e).map(g=>g.color);await lo(t,e.field||e.valueExpression,u)}else if(e.type==="pie-chart"){for(const u of e.attributes)await lo(t,u.field||u.valueExpression,[u.color]);await lo(t,"default",[(r=e==null?void 0:e.othersCategory)==null?void 0:r.color,O0(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const u of e.attributes)await lo(t,u.field||u.valueExpression,[u.color]);await lo(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(((s=e.authoringInfo)==null?void 0:s.type)==="predominance")for(const u of(o=e.uniqueValueInfos)!=null?o:[])await lo(t,u.value.toString(),[O0(u.symbol,null)]);else{const u=((c=e.uniqueValueInfos)!=null?c:[]).map(A=>O0(A.symbol,null)),{field:g,field2:b,field3:S,valueExpression:E}=e;(g||E)&&await lo(t,g||E,u),b&&await lo(t,b,u),S&&await lo(t,S,u)}else if(e.type==="class-breaks"){const u=e.classBreakInfos.map(S=>O0(S.symbol,null)),{field:g,valueExpression:b}=e;await lo(t,g!=null?g:b,u)}else e.type==="simple"&&await lo(t,"default",[O0(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await lo(t,"default",[O0(e.defaultSymbol,null)]),t.forEach((u,g)=>{const b=Mne(u.filter(Boolean),(S,E)=>JSON.stringify(S)===JSON.stringify(E));t.set(g,b)}),t}var dC;let Ym=dC=class extends $e{constructor(e){super(e),this.name=null,this.code=null}clone(){return new dC({name:this.name,code:this.code})}};v([_({type:String,json:{write:!0}})],Ym.prototype,"name",void 0),v([_({type:[String,Number],json:{write:!0}})],Ym.prototype,"code",void 0),Ym=dC=v([K("esri.layers.support.CodedValue")],Ym);const Fbe=new It({inherited:"inherited",codedValue:"coded-value",range:"range"});let X1=class extends $e{constructor(e){super(e),this.name=null,this.type=null}};v([_({type:String,json:{write:!0}})],X1.prototype,"name",void 0),v([Qe(Fbe)],X1.prototype,"type",void 0),X1=v([K("esri.layers.support.Domain")],X1);const Z5=X1;var pC;let Q1=pC=class extends Z5{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new pC({codedValues:ve(this.codedValues),name:this.name})}};v([_({type:[Ym],json:{write:!0}})],Q1.prototype,"codedValues",void 0),v([Qe({codedValue:"coded-value"})],Q1.prototype,"type",void 0),Q1=pC=v([K("esri.layers.support.CodedValueDomain")],Q1);const X5=Q1;var fC;let _3=fC=class extends Z5{constructor(e){super(e),this.type="inherited"}clone(){return new fC}};v([Qe({inherited:"inherited"})],_3.prototype,"type",void 0),_3=fC=v([K("esri.layers.support.InheritedDomain")],_3);const OW=_3;var mC;let mm=mC=class extends Z5{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new mC({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};v([_({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],mm.prototype,"maxValue",void 0),v([_({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],mm.prototype,"minValue",void 0),v([Qe({range:"range"})],mm.prototype,"type",void 0),mm=mC=v([K("esri.layers.support.RangeDomain")],mm);const PW=mm,FW={key:"type",base:Z5,typeMap:{range:PW,"coded-value":X5,inherited:OW}};function Q5(e){if(!e||!e.type)return null;switch(e.type){case"range":return PW.fromJSON(e);case"codedValue":return X5.fromJSON(e);case"inherited":return OW.fromJSON(e)}return null}const Lbe=new It({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var yC;const Rbe=new It({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let qs=yC=class extends $e{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){var r;let i=null;try{i=t?JSON.parse(t):null}catch{}return(r=i==null?void 0:i.value)!=null?r:null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?Rbe.fromJSON(i.fieldValueType):null}clone(){return new yC({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};v([_({type:String,json:{write:!0}})],qs.prototype,"alias",void 0),v([_({type:[String,Number],json:{write:{allowNull:!0}}})],qs.prototype,"defaultValue",void 0),v([_()],qs.prototype,"description",void 0),v([Ne("description")],qs.prototype,"readDescription",null),v([_({types:FW,json:{read:{reader:Q5},write:!0}})],qs.prototype,"domain",void 0),v([_({type:Boolean,json:{write:!0}})],qs.prototype,"editable",void 0),v([_({type:gi,json:{write:!0}})],qs.prototype,"length",void 0),v([_({type:String,json:{write:!0}})],qs.prototype,"name",void 0),v([_({type:Boolean,json:{write:!0}})],qs.prototype,"nullable",void 0),v([Qe(Lbe)],qs.prototype,"type",void 0),v([_()],qs.prototype,"valueType",void 0),v([Ne("valueType",["description"])],qs.prototype,"readValueType",null),v([_({type:Boolean,json:{read:!1}})],qs.prototype,"visible",void 0),qs=yC=v([K("esri.layers.support.Field")],qs);const ok=qs;var gC;let ym=gC=class extends $e{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new gC({mapLayerId:e,gdbVersion:t})}};v([Qe({mapLayer:"map-layer"})],ym.prototype,"type",void 0),v([_({type:gi,json:{write:!0}})],ym.prototype,"mapLayerId",void 0),v([_({type:String,json:{write:!0}})],ym.prototype,"gdbVersion",void 0),ym=gC=v([K("esri.layers.support.source.MapLayerSource")],ym);var vC;let Du=vC=class extends $e{constructor(e){super(e),this.type="query-table"}clone(){var c;const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:s}=this,o={workspaceId:e,query:t,oidFields:i,spatialReference:(c=r==null?void 0:r.clone())!=null?c:void 0,geometryType:s};return new vC(o)}};v([Qe({queryTable:"query-table"})],Du.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Du.prototype,"workspaceId",void 0),v([_({type:String,json:{write:!0}})],Du.prototype,"query",void 0),v([_({type:String,json:{write:!0}})],Du.prototype,"oidFields",void 0),v([_({type:wt,json:{write:!0}})],Du.prototype,"spatialReference",void 0),v([Qe(Zhe)],Du.prototype,"geometryType",void 0),Du=vC=v([K("esri.layers.support.source.QueryTableDataSource")],Du);var bC;let gm=bC=class extends $e{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new bC({workspaceId:e,dataSourceName:t})}};v([Qe({raster:"raster"})],gm.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],gm.prototype,"dataSourceName",void 0),v([_({type:String,json:{write:!0}})],gm.prototype,"workspaceId",void 0),gm=bC=v([K("esri.layers.support.source.RasterDataSource")],gm);var wC;let Pp=wC=class extends $e{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new wC({workspaceId:e,gdbVersion:t,dataSourceName:i})}};v([Qe({table:"table"})],Pp.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Pp.prototype,"workspaceId",void 0),v([_({type:String,json:{write:!0}})],Pp.prototype,"gdbVersion",void 0),v([_({type:String,json:{write:!0}})],Pp.prototype,"dataSourceName",void 0),Pp=wC=v([K("esri.layers.support.source.TableDataSource")],Pp);var _C,xC;const Nbe=$s()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let mo=_C=class extends $e{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return ML()(e,t,i)}castLeftTableSource(e){return iu(SC(),e)}readRightTableSource(e,t,i){return ML()(e,t,i)}castRightTableSource(e){return iu(SC(),e)}clone(){var c,u;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:s}=this,o={leftTableKey:e,rightTableKey:t,leftTableSource:(c=i==null?void 0:i.clone())!=null?c:void 0,rightTableSource:(u=r==null?void 0:r.clone())!=null?u:void 0,joinType:s};return new _C(o)}};v([Qe({joinTable:"join-table"})],mo.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],mo.prototype,"leftTableKey",void 0),v([_({type:String,json:{write:!0}})],mo.prototype,"rightTableKey",void 0),v([_({json:{write:!0}})],mo.prototype,"leftTableSource",void 0),v([Ne("leftTableSource")],mo.prototype,"readLeftTableSource",null),v([_t("leftTableSource")],mo.prototype,"castLeftTableSource",null),v([_({json:{write:!0}})],mo.prototype,"rightTableSource",void 0),v([Ne("rightTableSource")],mo.prototype,"readRightTableSource",null),v([_t("rightTableSource")],mo.prototype,"castRightTableSource",null),v([Qe(Nbe)],mo.prototype,"joinType",void 0),mo=_C=v([K("esri.layers.support.source.JoinTableDataSource")],mo);let qI=null;function ML(){return qI||(qI=zd({types:SC()})),qI}let BI=null;function SC(){return BI||(BI={key:"type",base:null,typeMap:{"data-layer":Za,"map-layer":ym}}),BI}const Dbe={key:"type",base:null,typeMap:{"join-table":mo,"query-table":Du,raster:gm,table:Pp}};let Za=xC=class extends $e{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new xC({fields:e,dataSource:t})}};v([Qe({dataLayer:"data-layer"})],Za.prototype,"type",void 0),v([_({type:[ok],json:{write:!0}})],Za.prototype,"fields",void 0),v([_({types:Dbe,json:{write:!0}})],Za.prototype,"dataSource",void 0),Za=xC=v([K("esri.layers.support.source.DataLayerSource")],Za),Za.from=Er(Za);function Jje(e,t){return t?{...t,query:{...e!=null?e:{},...t.query}}:{query:e}}function LW(e){return typeof e=="string"?is(e):ve(e)}function jbe(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const o=e[s];if(o!=null&&typeof o!="function")if(Array.isArray(o)){r[s]=[];for(let c=0;c<o.length;c++)r[s][c]=jbe(o[c])}else if(typeof o=="object")if(o.toJSON){const c=o.toJSON(i&&i[s]);r[s]=t?c:JSON.stringify(c)}else r[s]=t?o:JSON.stringify(o);else r[s]=o}return r}const z_={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Eo({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:wt.WebMercator}),minus180Line:new Eo({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:wt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Eo({paths:[[[180,-180],[180,180]]],spatialReference:wt.WGS84}),minus180Line:new Eo({paths:[[[-180,-180],[-180,180]]],spatialReference:wt.WGS84})}};function jf(e,t){return Math.ceil((e-t)/(2*t))}function RW(e,t){const i=Yv(e);for(const r of i)for(const s of r)s[0]+=t;return e}function Yv(e){return vc(e)?e.rings:e.paths}async function zbe(e,t,i,r){const s=LW(e),o=t[0].spatialReference,c={...r,query:{...s.query,f:"json",sr:JSON.stringify(o),target:JSON.stringify({geometryType:x5(t[0]),geometries:t}),cutter:JSON.stringify(i)}},u=await mi(s.path+"/cut",c),{cutIndexes:g,geometries:b=[]}=u.data;return{cutIndexes:g,geometries:b.map(S=>{const E=kc(S);return E.spatialReference=o,E})}}function Vbe(e){return{geometryType:x5(e[0]),geometries:e.map(t=>t.toJSON())}}function Gbe(e,t,i){const r=Qhe(t);return e.map(s=>{const o=r.fromJSON(s);return o.spatialReference=i,o})}async function Ube(e,t,i){const r=typeof e=="string"?is(e):e,s=t[0].spatialReference,o=x5(t[0]),c={...i,query:{...r.query,f:"json",sr:s.wkid?s.wkid:JSON.stringify(s),geometries:JSON.stringify(Vbe(t))}},{data:u}=await mi(r.path+"/simplify",c);return Gbe(u.geometries,o,s)}const NW=Ie.getLogger("esri.geometry.support.normalizeUtils");function qbe(e){return e.type==="polygon"}function Bbe(e){return e[0].type==="polygon"}function Hbe(e){return e[0].type==="polyline"}function Wbe(e,t){if(!(e instanceof Eo||e instanceof Qn)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw NW.error(s),new de(s)}const i=Yv(e),r=[];for(const s of i){const o=[];r.push(o),o.push([s[0][0],s[0][1]]);for(let c=0;c<s.length-1;c++){const u=s[c][0],g=s[c][1],b=s[c+1][0],S=s[c+1][1],E=Math.sqrt((b-u)*(b-u)+(S-g)*(S-g)),A=(S-g)/E,O=(b-u)/E,L=E/t;if(L>1){for(let Z=1;Z<=L-1;Z++){const ee=Z*t,ie=O*ee+u,ne=A*ee+g;o.push([ie,ne])}const N=(E+Math.floor(L-1)*t)/2,z=O*N+u,q=A*N+g;o.push([z,q])}o.push([b,S])}}return qbe(e)?new Qn({rings:r,spatialReference:e.spatialReference}):new Eo({paths:r,spatialReference:e.spatialReference})}function TL(e,t,i){if(t){const r=Wbe(e,1e6);e=Tf(r,!0)}return i&&(e=RW(e,i)),e}function CL(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=jf(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=jf(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=jf(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=jf(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function Jbe(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],o=t.geometries[r],c=Yv(o);for(let u=0;u<c.length;u++){const g=c[u];g.some(b=>{if(b[0]<180)return!0;{let S=0;for(let A=0;A<g.length;A++){const O=g[A][0];S=O>S?O:S}S=Number(S.toFixed(9));const E=-360*jf(S,180);for(let A=0;A<g.length;A++){const O=o.getPoint(u,A);o.setPoint(u,A,O.clone().offset(E,0))}return!0}})}if(s===i){if(Bbe(e))for(const u of Yv(o))e[s]=e[s].addRing(u);else if(Hbe(e))for(const u of Yv(o))e[s]=e[s].addPath(u)}else i=s,e[s]=o}return e}async function ak(e,t,i){var ie;if(!Array.isArray(e))return ak([e],t);t&&typeof t!="string"&&NW.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(ie=t==null?void 0:t.url)!=null?ie:jt.geometryServiceUrl;let s,o,c,u,g,b,S,E,A=0;const O=[],L=[];for(const ne of e)if(ae(ne))L.push(ne);else if(s||(s=ne.spatialReference,o=ua(s),c=s.isWebMercator,b=c?102100:4326,u=z_[b].maxX,g=z_[b].minX,S=z_[b].plus180Line,E=z_[b].minus180Line),o)if(ne.type==="mesh")L.push(ne);else if(ne.type==="point")L.push(CL(ne.clone(),u,g));else if(ne.type==="multipoint"){const oe=ne.clone();oe.points=oe.points.map(me=>CL(me,u,g)),L.push(oe)}else if(ne.type==="extent"){const oe=ne.clone()._normalize(!1,!1,o);L.push(oe.rings?new Qn(oe):oe)}else if(ne.extent){const oe=ne.extent,me=jf(oe.xmin,g)*(2*u);let fe=me===0?ne.clone():RW(ne.clone(),me);oe.offset(me,0),oe.intersects(S)&&oe.xmax!==u?(A=oe.xmax>A?oe.xmax:A,fe=TL(fe,c),O.push(fe),L.push("cut")):oe.intersects(E)&&oe.xmin!==g?(A=oe.xmax*(2*u)>A?oe.xmax*(2*u):A,fe=TL(fe,c,360),O.push(fe),L.push("cut")):L.push(fe)}else L.push(ne.clone());else L.push(ne);let N=jf(A,u),z=-90;const q=N,Z=new Eo;for(;N>0;){const ne=360*N-180;Z.addPath([[ne,z],[ne,-1*z]]),z*=-1,N--}if(O.length>0&&q>0){const ne=Jbe(O,await zbe(r,O,Z,i)),oe=[],me=[];for(let _e=0;_e<L.length;_e++){const Ae=L[_e];if(Ae!=="cut")me.push(Ae);else{const Oe=ne.shift(),je=e[_e];U(je)&&je.type==="polygon"&&je.rings&&je.rings.length>1&&Oe.rings.length>=je.rings.length?(oe.push(Oe),me.push("simplify")):me.push(c?gc(Oe):Oe)}}if(!oe.length)return me;const fe=await Ube(r,oe,i),Ce=[];for(let _e=0;_e<me.length;_e++){const Ae=me[_e];Ae!=="simplify"?Ce.push(Ae):Ce.push(c?gc(fe.shift()):fe.shift())}return Ce}const ee=[];for(let ne=0;ne<L.length;ne++){const oe=L[ne];if(oe!=="cut")ee.push(oe);else{const me=O.shift();ee.push(c===!0?gc(me):me)}}return ee}function Yje(e,t){const i=ua(t);if(i){const[r,s]=i.valid,o=s-r;if(e<r)for(;e<r;)e+=o;if(e>s)for(;e>s;)e-=o}return e}function DW(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let s=0;s<r.length;s++)t[i][s]=DW(r[s])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var Qh;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Qh||(Qh={}));const AL=4294967296,Ybe=new TextDecoder("utf-8"),Kbe=Se("safari")||Se("ios")?6:Se("ff")?12:32;class Yf{constructor(t,i,r=0,s=t?t.byteLength:0){this._tag=0,this._dataType=Qh.unknown,this._init(t,i,r,s)}_init(t,i,r,s){this._data=t,this._dataView=i,this._pos=r,this._end=s}asUnsafe(){return this}clone(){return new Yf(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();if(t!==void 0)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*AL;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*AL;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,s){const o=this.getMessage(),c=t(o,i,r,s);return o.release(),c}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=Yf.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){Yf.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Qh.varint:this._decodeVarint();break;case Qh.fixed64:this._skip(8);break;case Qh.delimited:this._skip(this._getLength());break;case Qh.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,s=0;if(this._end-i>=10)do{if(s=t[i++],r|=127&s,(128&s)==0||(s=t[i++],r|=(127&s)<<7,(128&s)==0)||(s=t[i++],r|=(127&s)<<14,(128&s)==0)||(s=t[i++],r|=(127&s)<<21,(128&s)==0)||(s=t[i++],r+=268435456*(127&s),(128&s)==0)||(s=t[i++],r+=34359738368*(127&s),(128&s)==0)||(s=t[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=t[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=t[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=t[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let o=1;for(;i!==this._end&&(s=t[i],(128&s)!=0);)++i,r+=(127&s)*o,o*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*o}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i=this._pos,r=0,s=0;const o=1&t[i];if(this._end-i>=10)do{if(s=t[i++],r|=127&s,(128&s)==0||(s=t[i++],r|=(127&s)<<7,(128&s)==0)||(s=t[i++],r|=(127&s)<<14,(128&s)==0)||(s=t[i++],r|=(127&s)<<21,(128&s)==0)||(s=t[i++],r+=268435456*(127&s),(128&s)==0)||(s=t[i++],r+=34359738368*(127&s),(128&s)==0)||(s=t[i++],r+=4398046511104*(127&s),(128&s)==0)||(s=t[i++],r+=562949953421312*(127&s),(128&s)==0)||(s=t[i++],r+=72057594037927940*(127&s),(128&s)==0)||(s=t[i++],r+=9223372036854776e3*(127&s),(128&s)==0))break;throw new Error("Varint too long!")}while(0);else{let c=1;for(;i!==this._end&&(s=t[i],(128&s)!=0);)++i,r+=(127&s)*c,c*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*c}return this._pos=i,o?-(r+1)/2:r/2}_getLength(){if(this._dataType!==Qh.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>Kbe){const c=t.subarray(i,r);return Ybe.decode(c)}let s="",o="";for(let c=i;c<r;++c){const u=t[c];128&u?o+="%"+u.toString(16):(s+=decodeURIComponent(o)+String.fromCharCode(u),o="")}return o.length&&(s+=decodeURIComponent(o)),s}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}}Yf.pool=new Po(Yf,void 0,e=>{e._data=null,e._dataView=null});class gs{constructor(t=[],i=[],r=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=r}static fromRect(t){const[i,r,s,o]=t,c=s-i,u=o-r;return new gs([5],[i,r,c,0,0,u,-c,0,0,-u])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let o=0;o<s;o++)t(this.coords[2*(o+i)],this.coords[2*(o+i)+1]);i+=s}}clone(t){return t?(t.set(this.coords),new gs(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new gs(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class cu{constructor(t=null,i={},r,s){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new cu(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function Zbe(e){return!(ae(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class Kje extends cu{}class e9{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new e9;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const jW=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Zje{constructor(t){this._options=t,this.geometryTypes=jW,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new e9}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||Hi(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=ky(this._options.sourceSpatialReference)/ky(t.spatialReference);if(i!==1)for(const r of t.features){if(!Zbe(r))continue;const s=r.geometry.coords;for(let o=2;o<s.length;o+=3)s[o]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new cu}createSpatialReference(){return{wkid:0}}createGeometry(){return new gs}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new gs}}const $L=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],kL=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],OL=["upperLeft","lowerLeft"];function PL(e){return e>=$L.length?null:$L[e]}function Xbe(e){return e>=kL.length?null:kL[e]}function FL(e){return e>=OL.length?null:OL[e]}function LL(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function Qbe(e,t,i){const s=e.asUnsafe(),o=t.createPointGeometry(i);for(;s.next();)switch(s.tag()){case 3:{const c=s.getUInt32(),u=s.pos()+c;let g=0;for(;s.pos()<u;)t.addCoordinatePoint(o,s.getSInt64(),g++);break}default:s.skip()}return o}function ewe(e,t,i){const o=e.asUnsafe(),c=t.createGeometry(i),u=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;o.next();)switch(o.tag()){case 2:{const g=o.getUInt32(),b=o.pos()+g;let S=0;for(;o.pos()<b;)t.addLength(c,o.getUInt32(),S++);break}case 3:{const g=o.getUInt32(),b=o.pos()+g;let S=0;for(t.allocateCoordinates(c);o.pos()<b;)t.addCoordinate(c,o.getSInt64(),S),S++,S===u&&(S=0);break}default:o.skip()}return c}function twe(e){const s=e.asUnsafe(),o=new gs;let c="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const u=s.getUInt32(),g=s.pos()+u;for(;s.pos()<g;)o.lengths.push(s.getUInt32());break}case 3:{const u=s.getUInt32(),g=s.pos()+u;for(;s.pos()<g;)o.coords.push(s.getSInt64());break}case 1:c=jW[s.getEnum()];break;default:s.skip()}return{queryGeometry:o,queryGeometryType:c}}function iwe(e){const S=e.asUnsafe();for(;S.next();)switch(S.tag()){case 1:return S.getString();case 2:return S.getFloat();case 3:return S.getDouble();case 4:return S.getSInt32();case 5:return S.getUInt32();case 6:return S.getInt64();case 7:return S.getUInt64();case 8:return S.getSInt64();case 9:return S.getBool();default:return S.skip(),null}return null}function rwe(e){const u=e.asUnsafe(),g={type:PL(0)};for(;u.next();)switch(u.tag()){case 1:g.name=u.getString();break;case 2:g.type=PL(u.getEnum());break;case 3:g.alias=u.getString();break;case 4:g.sqlType=Xbe(u.getEnum());break;case 5:u.skip();break;case 6:g.defaultValue=u.getString();break;default:u.skip()}return g}function swe(e){const r={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:r.name=s.getString();break;case 2:r.isSystemMaintained=s.getBool();break;default:s.skip()}return r}function nwe(e,t,i,r){const u=t.createFeature(i);let g=0;for(;e.next();)switch(e.tag()){case 1:{const b=r[g++].name;u.attributes[b]=e.processMessage(iwe);break}case 2:u.geometry=e.processMessageWithArgs(ewe,t,i);break;case 4:u.centroid=e.processMessageWithArgs(Qbe,t,i);break;default:e.skip()}return u}function owe(e){const o=[1,1,1,1],c=e.asUnsafe();for(;c.next();)switch(c.tag()){case 1:o[0]=c.getDouble();break;case 2:o[1]=c.getDouble();break;case 4:o[2]=c.getDouble();break;case 3:o[3]=c.getDouble();break;default:c.skip()}return o}function awe(e){const o=[0,0,0,0],c=e.asUnsafe();for(;c.next();)switch(c.tag()){case 1:o[0]=c.getDouble();break;case 2:o[1]=c.getDouble();break;case 4:o[2]=c.getDouble();break;case 3:o[3]=c.getDouble();break;default:c.skip()}return o}function lwe(e){const s={originPosition:FL(0)},o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s.originPosition=FL(o.getEnum());break;case 2:s.scale=o.processMessage(owe);break;case 3:s.translate=o.processMessage(awe);break;default:o.skip()}return s}function uwe(e){const s={},o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s.shapeAreaFieldName=o.getString();break;case 2:s.shapeLengthFieldName=o.getString();break;case 3:s.units=o.getString();break;default:o.skip()}return s}function cwe(e,t){const u=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:u.wkid=e.getUInt32();break;case 5:u.wkt=e.getString();break;case 2:u.latestWkid=e.getUInt32();break;case 3:u.vcsWkid=e.getUInt32();break;case 4:u.latestVcsWkid=e.getUInt32();break;default:e.skip()}return u}function hwe(e,t){const N=t.createFeatureResult(),z=e.asUnsafe();N.geometryType=LL(t,0);let q=!1;for(;z.next();)switch(z.tag()){case 1:N.objectIdFieldName=z.getString();break;case 3:N.globalIdFieldName=z.getString();break;case 4:N.geohashFieldName=z.getString();break;case 5:N.geometryProperties=z.processMessage(uwe);break;case 7:N.geometryType=LL(t,z.getEnum());break;case 8:N.spatialReference=z.processMessageWithArgs(cwe,t);break;case 10:N.hasZ=z.getBool();break;case 11:N.hasM=z.getBool();break;case 12:N.transform=z.processMessage(lwe);break;case 9:{const Z=z.getBool();N.exceededTransferLimit=Z;break}case 13:t.addField(N,z.processMessage(rwe));break;case 15:q||(t.prepareFeatures(N),q=!0),t.addFeature(N,z.processMessageWithArgs(nwe,t,N,N.fields));break;case 2:N.uniqueIdField=z.processMessage(swe);break;default:z.skip()}return t.finishFeatureResult(N),N}function dwe(e,t){const s={};let o=null;for(;e.next();)switch(e.tag()){case 4:o=e.processMessageWithArgs(twe);break;case 1:s.featureResult=e.processMessageWithArgs(hwe,t);break;default:e.skip()}return U(o)&&s.featureResult&&t.addQueryGeometry(s,o),s}function pwe(e,t){try{const r=new Yf(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(dwe,t):r.skip();return s}catch(i){throw new de("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function fwe(e,t){const i=pwe(e,t),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,o=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const c=r.objectIdFieldName;for(const u of r.features)u.attributes&&(u.objectId=u.attributes[c])}return r&&(r.queryGeometry=s,r.queryGeometryType=o),r}function IC(e,t,i){if(!i||!i.features||!i.hasZ)return;const r=RB(i.geometryType,t,e.outSpatialReference);if(!ae(r))for(const s of i.features)r(s.geometry)}const RL="Layer does not support extent calculation.";function mwe(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function ywe(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let o,c,u;if(U(i)&&(c=i.spatialReference,u=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=x5(i),s.geometry=mwe(i,e.compactGeometryEnabled),s.inSR=u),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=r.outSR.wkid||JSON.stringify(r.outSR),o=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,o=c),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(s.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&U(c)&&U(e.quantizationParameters)&&U(e.quantizationParameters.extent)&&c.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const g=r.timeExtent,{start:b,end:S}=g;b==null&&S==null||(s.time=b===S?b:`${b!=null?b:"null"},${S!=null?S:"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&U(c)&&U(o)&&c.equals(o)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function gwe(e,t,i,r){const s=U(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await Uw(e,t,"json",r);return IC(t,i,s.data),s}async function Xje(e,t,i,r){if(U(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await vwe(e,t,r),o=s;return o.data=fwe(s.data,i),o}function vwe(e,t,i){return Uw(e,t,"pbf",i)}function Qje(e,t,i){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Uw(e,t,"json",i,{returnIdsOnly:!0})}function eze(e,t,i){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Uw(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function tze(e,t,i){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Uw(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(r=>{const s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(RL);if(s.hasOwnProperty("count"))throw new Error(RL);return r})}function Uw(e,t,i,r={},s={}){const o=typeof e=="string"?is(e):e,c=t.geometry?[t.geometry]:[];return r.responseType=i==="pbf"?"array-buffer":"json",ak(c,null,r).then(u=>{const g=u&&u[0];U(g)&&((t=t.clone()).geometry=g);const b=DW({...o.query,f:i,...s,...ywe(t,s)});return mi(n0(o.path,"query"),{...r,query:{...b,...r.query}})})}var EC;const MC=new It({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let us=EC=class extends $e{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var s;const i=wt.fromJSON(t.spatialReference),r=[];for(let o=0;o<e.length;o++){const c=e[o],u=wr.fromJSON(c),g=c.geometry&&c.geometry.spatialReference;U(u.geometry)&&!g&&(u.geometry.spatialReference=i);const b=c.aggregateGeometries,S=u.aggregateGeometries;if(b&&U(S))for(const E in S){const A=S[E],O=(s=b[E])==null?void 0:s.spatialReference;U(A)&&!O&&(A.spatialReference=i)}r.push(u)}return r}writeGeometryType(e,t,i,r){if(e)return void MC.write(e,t,i,r);const{features:s}=this;if(s){for(const o of s)if(o&&U(o.geometry))return void MC.write(o.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=kc(e);return r&&!i&&t.spatialReference&&(r.spatialReference=wt.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&U(r.geometry)&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new EC(this.cloneProperties())}cloneProperties(){return ve({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e&&e[i];r.geometry=s&&s.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,o=b=>Math.round((b-r)/t),c=b=>Math.round((s-b)/i),u=this.features,g=this._getQuantizationFunction(this.geometryType,o,c);for(let b=0,S=u.length;b<S;b++)g!=null&&g(u[b].geometry)||(u.splice(b,1),b--,S--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[o,c]}=i,u=S=>S*o+r,g=S=>s-S*c,b=this._getHydrationFunction(e,u,g);for(const{geometry:S}of t)U(S)&&b&&b(S);return this.transform=null,this}_quantizePoints(e,t,i){let r,s;const o=[];for(let c=0,u=e.length;c<u;c++){const g=e[c];if(c>0){const b=t(g[0]),S=i(g[1]);b===r&&S===s||(o.push([b-r,S-s]),r=b,s=S)}else r=t(g[0]),s=i(g[1]),o.push([r,s])}return o.length>0?o:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=vc(r)?r.rings:r.paths,o=[];for(let c=0,u=s.length;c<u;c++){const g=s[c],b=this._quantizePoints(g,t,i);b&&o.push(b)}return o.length>0?(vc(r)?r.rings=o:r.paths=o,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s&&s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i){return e==="point"?r=>{r.x=t(r.x),r.y=i(r.y)}:e==="polyline"||e==="polygon"?r=>{const s=vc(r)?r.rings:r.paths;let o,c;for(let u=0,g=s.length;u<g;u++){const b=s[u];for(let S=0,E=b.length;S<E;S++){const A=b[S];S>0?(o+=A[0],c+=A[1]):(o=A[0],c=A[1]),A[0]=t(o),A[1]=i(c)}}}:e==="extent"?r=>{r.xmin=t(r.xmin),r.ymin=i(r.ymin),r.xmax=t(r.xmax),r.ymax=i(r.ymax)}:e==="multipoint"?r=>{const s=r.points;let o,c;for(let u=0,g=s.length;u<g;u++){const b=s[u];u>0?(o+=b[0],c+=b[1]):(o=b[0],c=b[1]),b[0]=t(o),b[1]=i(c)}}:null}};v([_({type:String,json:{write:!0}})],us.prototype,"displayFieldName",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],us.prototype,"exceededTransferLimit",void 0),v([_({type:[wr],json:{write:!0}})],us.prototype,"features",void 0),v([Ne("features")],us.prototype,"readFeatures",null),v([_({type:[ok],json:{write:!0}})],us.prototype,"fields",void 0),v([_({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:MC.read}}})],us.prototype,"geometryType",void 0),v([qe("geometryType")],us.prototype,"writeGeometryType",null),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],us.prototype,"hasM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],us.prototype,"hasZ",void 0),v([_({types:_0,json:{write:!0}})],us.prototype,"queryGeometry",void 0),v([Ne("queryGeometry")],us.prototype,"readQueryGeometry",null),v([_({type:wt,json:{write:!0}})],us.prototype,"spatialReference",void 0),v([qe("spatialReference")],us.prototype,"writeSpatialReference",null),v([_({json:{write:!0}})],us.prototype,"transform",void 0),us=EC=v([K("esri.rest.support.FeatureSet")],us),us.prototype.toJSON.isDefaultToJSON=!0;const t9=us,NL={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},bwe={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function wwe(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function Kf(e,t,i){const r=new Date(e.getTime());if(t&&i){const s=bwe[i],{getter:o,setter:c,multiplier:u}=s;if(i==="months"){const g=wwe(r.getFullYear(),r.getMonth()+t);r.getDate()>g&&r.setDate(g)}r[c](r[o]()+t*u)}return r}function DL(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function _we(e,t,i){return e===0?0:e*NL[t]/NL[i]}var Na;let xo=Na=class extends $e{static get allTime(){return jL}static get empty(){return xwe}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(Na.allTime)}get isEmpty(){return this.equals(Na.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new Na({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=U(this.start)?this.start.getTime():this.start,i=U(this.end)?this.end.getTime():this.end,r=U(e.start)?e.start.getTime():e.start,s=U(e.end)?e.end.getTime():e.end;return t===r&&i===s}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=tl(this.start,r=>DL(r,e)),i=tl(this.end,r=>{const s=DL(r,e);return r.getTime()===s.getTime()?s:Kf(s,1,e)});return new Na({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Na.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=E1(this.start,-1/0,u=>u.getTime()),i=E1(this.end,1/0,u=>u.getTime()),r=E1(e.start,-1/0,u=>u.getTime()),s=E1(e.end,1/0,u=>u.getTime());let o,c;if(r>=t&&r<=i?o=r:t>=r&&t<=s&&(o=t),i>=r&&i<=s?c=i:s>=t&&s<=i&&(c=s),o!=null&&c!=null&&!isNaN(o)&&!isNaN(c)){const u=new Na;return u.start=o===-1/0?null:new Date(o),u.end=c===1/0?null:new Date(c),u}return Na.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Na,{start:r,end:s}=this;return U(r)&&(i.start=Kf(r,e,t)),U(s)&&(i.end=Kf(s,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return jL.clone();const t=U(this.start)&&U(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=U(this.end)&&U(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Na({start:t,end:i})}};v([_({type:Date,json:{write:{allowNull:!0}}})],xo.prototype,"end",void 0),v([Ne("end")],xo.prototype,"readEnd",null),v([qe("end")],xo.prototype,"writeEnd",null),v([_({readOnly:!0,json:{read:!1}})],xo.prototype,"isAllTime",null),v([_({readOnly:!0,json:{read:!1}})],xo.prototype,"isEmpty",null),v([_({type:Date,json:{write:{allowNull:!0}}})],xo.prototype,"start",void 0),v([Ne("start")],xo.prototype,"readStart",null),v([qe("start")],xo.prototype,"writeStart",null),xo=Na=v([K("esri.TimeExtent")],xo);const jL=new xo,xwe=new xo({start:void 0,end:void 0}),pu=xo;let Fp=class extends Ni($e){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};v([_({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:U(this.onFields)&&this.onFields.length>0}}}}})],Fp.prototype,"onFields",void 0),v([_({type:String,json:{write:!0}})],Fp.prototype,"operator",void 0),v([_({type:String,json:{write:!0}})],Fp.prototype,"searchTerm",void 0),v([_({type:String,json:{write:!0}})],Fp.prototype,"searchType",void 0),Fp=v([K("esri.rest.support.FullTextSearch")],Fp);const Swe=Fp;var TC;const zL=new It({upperLeft:"upper-left",lowerLeft:"lower-left"});let Lp=TC=class extends $e{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new TC(ve({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};v([_({type:vi,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Lp.prototype,"extent",void 0),v([_({type:["view","edit"],json:{write:!0}})],Lp.prototype,"mode",void 0),v([_({type:String,json:{read:zL.read,write:zL.write}})],Lp.prototype,"originPosition",void 0),v([_({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Lp.prototype,"tolerance",void 0),Lp=TC=v([K("esri.rest.support.QuantizationParameters")],Lp);const zW=Lp;var CC;const VL=new It({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Da=CC=class extends $e{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=ve(e))}clone(){return new CC({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ve(this.statisticParameters)})}};v([_({type:Number,json:{write:!0}})],Da.prototype,"maxPointCount",void 0),v([_({type:Number,json:{write:!0}})],Da.prototype,"maxRecordCount",void 0),v([_({type:Number,json:{write:!0}})],Da.prototype,"maxVertexCount",void 0),v([_({type:String,json:{write:!0}})],Da.prototype,"onStatisticField",void 0),v([_({type:String,json:{write:!0}})],Da.prototype,"outStatisticFieldName",void 0),v([_({type:String,json:{read:{source:"statisticType",reader:VL.read},write:{target:"statisticType",writer:VL.write}}})],Da.prototype,"statisticType",void 0),v([_({type:Object})],Da.prototype,"statisticParameters",void 0),v([qe("statisticParameters")],Da.prototype,"writeStatisticParameters",null),Da=CC=v([K("esri.rest.support.StatisticDefinition")],Da);const VW=Da;var by;const Iwe=new It({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Ewe=new It({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let at=by=class extends $e{static from(e){return _6(by,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(o=>o instanceof Date?o.getTime():o):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new by(ve({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:U(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};at.MAX_MAX_RECORD_COUNT_FACTOR=5,v([_({json:{write:!0}})],at.prototype,"aggregateIds",void 0),v([_({type:Boolean,json:{write:!0}})],at.prototype,"cacheHint",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"compactGeometryEnabled",void 0),v([_({json:{write:!0}})],at.prototype,"datumTransformation",void 0),v([_t("datumTransformation")],at.prototype,"castDatumTransformation",null),v([_({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"defaultSpatialReferenceEnabled",void 0),v([_({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],at.prototype,"distance",void 0),v([_({type:Za,json:{write:!0}})],at.prototype,"dynamicDataSource",void 0),v([_({type:String,json:{write:!0}})],at.prototype,"formatOf3DObjects",void 0),v([_({type:[Swe],json:{write:{enabled:!0,overridePolicy(){return{enabled:U(this.fullText)&&this.fullText.length>0}}}}})],at.prototype,"fullText",void 0),v([_({type:String,json:{write:!0}})],at.prototype,"gdbVersion",void 0),v([_({types:_0,json:{read:kc,write:!0}})],at.prototype,"geometry",void 0),v([_({type:Number,json:{write:!0}})],at.prototype,"geometryPrecision",void 0),v([_({type:[String],json:{write:!0}})],at.prototype,"groupByFieldsForStatistics",void 0),v([_({type:String,json:{write:!0}})],at.prototype,"having",void 0),v([_({type:Date})],at.prototype,"historicMoment",void 0),v([qe("historicMoment")],at.prototype,"writeHistoricMoment",null),v([_({type:Number,json:{write:!0}})],at.prototype,"maxAllowableOffset",void 0),v([_({type:Number,cast:e=>e<1?1:e>by.MAX_MAX_RECORD_COUNT_FACTOR?by.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],at.prototype,"maxRecordCountFactor",void 0),v([_({type:["xyFootprint"],json:{write:!0}})],at.prototype,"multipatchOption",void 0),v([_({type:Number,json:{read:{source:"resultRecordCount"}}})],at.prototype,"num",void 0),v([_({json:{write:!0}})],at.prototype,"objectIds",void 0),v([_({type:[String],json:{write:!0}})],at.prototype,"orderByFields",void 0),v([_({type:[String],json:{write:!0}})],at.prototype,"outFields",void 0),v([_({type:wt,json:{name:"outSR",write:!0}})],at.prototype,"outSpatialReference",void 0),v([_({type:[VW],json:{write:{enabled:!0,overridePolicy(){return{enabled:U(this.outStatistics)&&this.outStatistics.length>0}}}}})],at.prototype,"outStatistics",void 0),v([_({json:{write:!0}})],at.prototype,"parameterValues",void 0),v([qe("parameterValues")],at.prototype,"writeParameterValues",null),v([_({type:pt,json:{write:!0}})],at.prototype,"pixelSize",void 0),v([_({type:zW,json:{write:!0}})],at.prototype,"quantizationParameters",void 0),v([_({type:[Object],json:{write:!0}})],at.prototype,"rangeValues",void 0),v([_({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],at.prototype,"relationParameter",void 0),v([_({type:String,json:{write:!0}})],at.prototype,"resultType",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"returnCentroid",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"returnDistinctValues",void 0),v([_({type:Boolean,json:{default:!0,write:!0}})],at.prototype,"returnExceededLimitFeatures",void 0),v([_({type:Boolean,json:{write:!0}})],at.prototype,"returnGeometry",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"returnQueryGeometry",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"returnM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],at.prototype,"returnZ",void 0),v([_({type:wt,json:{write:!0}})],at.prototype,"sourceSpatialReference",void 0),v([Qe(Iwe,{ignoreUnknown:!1,name:"spatialRel"})],at.prototype,"spatialRelationship",void 0),v([_({type:Number,json:{read:{source:"resultOffset"}}})],at.prototype,"start",void 0),v([qe("start"),qe("num")],at.prototype,"writeStart",null),v([_({type:String,json:{write:!0}})],at.prototype,"sqlFormat",void 0),v([_({type:String,json:{write:!0}})],at.prototype,"text",void 0),v([_({type:pu,json:{write:!0}})],at.prototype,"timeExtent",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],at.prototype,"timeReferenceUnknownClient",void 0),v([Qe(Ewe,{ignoreUnknown:!1}),_({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],at.prototype,"units",void 0),v([_({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],at.prototype,"where",void 0),v([qe("where")],at.prototype,"writeWhere",null),at=by=v([K("esri.rest.support.Query")],at);const Xl=at;async function HI(e,t,i){const r=await Mwe(e,t,i);return t9.fromJSON(r)}async function Mwe(e,t,i){const r=LW(e),s={...i},o=Xl.from(t),{data:c}=await gwe(r,o,o.sourceSpatialReference,s);return c}function As(e,t){return e?t?4:3:t?3:2}const xg=Ie.getLogger("esri.layers.graphics.featureConversionUtils"),GW={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Twe=(e,t,i,r,s,o)=>{e[i]=s,e[i+1]=o},GL=(e,t,i,r,s,o)=>{e[i]=s,e[i+1]=o,e[i+2]=t[r+2]},Cwe=(e,t,i,r,s,o)=>{e[i]=s,e[i+1]=o,e[i+2]=t[r+3]},Awe=(e,t,i,r,s,o)=>{e[i]=s,e[i+1]=o,e[i+2]=t[r+2],e[i+3]=t[r+3]};function lk(e,t,i,r){if(e){if(i)return t&&r?Awe:GL;if(t&&r)return Cwe}else if(t&&r)return GL;return Twe}function WI({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function JI({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function YI({scale:e,translate:t},i,r){return i*e[r]+t[r]}function AC(e,t,i){return e?t?i?hk(e):uk(e):i?ck(e):i9(e):null}function i9(e){const t=e.coords;return{x:t[0],y:t[1]}}function UW(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function uk(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function $we(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function ck(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function kwe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function hk(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Owe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Pwe(e,t,i,r){let s=i9;i&&r?s=hk:i?s=uk:r&&(s=ck);for(const o of t){const{geometry:c,attributes:u}=o,g=U(c)?s(c):null;e.push({attributes:u,geometry:g})}return e}function dk(e,t){return e&&t?Owe:e?$we:t?kwe:UW}function qW(e,t,i,r,s){const o=dk(i,r);for(const{geometry:c,attributes:u}of t){const g=U(c)?o(new gs,c):null;e.push(new cu(g,u,null,s?u[s]:void 0))}return e}function ize(e,t,i=dk(t.z!=null,t.m!=null)){return i(e,t)}function Fwe(e,t,i,r){for(const{geometry:s,attributes:o}of t)e.push({attributes:o,geometry:U(s)?pk(s,i,r):null});return e}function pk(e,t,i){if(ae(e))return null;const r=As(t,i),s=[];for(let o=0;o<e.coords.length;o+=r){const c=[];for(let u=0;u<r;u++)c.push(e.coords[o+u]);s.push(c)}return t?i?{points:s,hasZ:t,hasM:i}:{points:s,hasZ:t}:i?{points:s,hasM:i}:{points:s}}function BW(e,t,i,r,s){const o=As(i,r);for(const{geometry:c,attributes:u}of t){const g=U(c)?HW(new gs,c,o):null;e.push(new cu(g,u,null,s?u[s]:void 0))}return e}function HW(e,t,i=As(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let s=0;for(const o of t.points)for(let c=0;c<i;c++)r[s++]=o[c];return e}function Lwe(e,t,i,r){for(const{geometry:s,attributes:o}of t)e.push({attributes:o,geometry:U(s)?fk(s,i,r):null});return e}function fk(e,t,i){if(!e)return null;const r=As(t,i),{coords:s,lengths:o}=e,c=[];let u=0;for(const g of o){const b=[];for(let S=0;S<g;S++){const E=[];for(let A=0;A<r;A++)E.push(s[u++]);b.push(E)}c.push(b)}return t?i?{paths:c,hasZ:t,hasM:i}:{paths:c,hasZ:t}:i?{paths:c,hasM:i}:{paths:c}}function WW(e,t,i,r,s){const o=As(i,r);for(const{geometry:c,attributes:u}of t){const g=U(c)?JW(new gs,c,o):null;e.push(new cu(g,u,null,s?u[s]:void 0))}return e}function JW(e,t,i=As(t.hasZ,t.hasM)){const{lengths:r,coords:s}=e;let o=0;for(const c of t.paths){for(const u of c)for(let g=0;g<i;g++)s[o++]=u[g];r.push(c.length)}return e}function Rwe(e,t,i,r){for(const{geometry:s,attributes:o,centroid:c}of t){const u=U(s)?mk(s,i,r):null;if(U(c)){const g=i9(c);e.push({attributes:o,centroid:g,geometry:u})}else e.push({attributes:o,geometry:u})}return e}function mk(e,t,i){if(!e)return null;const r=As(t,i),{coords:s,lengths:o}=e,c=[];let u=0;for(const g of o){const b=[];for(let S=0;S<g;S++){const E=[];for(let A=0;A<r;A++)E.push(s[u++]);b.push(E)}c.push(b)}return t?i?{rings:c,hasZ:t,hasM:i}:{rings:c,hasZ:t}:i?{rings:c,hasM:i}:{rings:c}}function YW(e,t,i,r,s){for(const{geometry:o,centroid:c,attributes:u}of t){const g=U(o)?KW(new gs,o,i,r):null,b=s?u[s]:void 0;U(c)?e.push(new cu(g,u,UW(new gs,c),b)):e.push(new cu(g,u,null,b))}return e}function KW(e,t,i=t.hasZ,r=t.hasM){return Nwe(e,t.rings,i,r),e}function Nwe(e,t,i,r){const s=As(i,r),{lengths:o,coords:c}=e;let u=0;bc(e);for(const g of t){for(const b of g)for(let S=0;S<s;S++)c[u++]=b[S];o.push(g.length)}return e}const wy=[],Kv=[];function rze(e,t,i,r,s){wy[0]=e;const[o]=ZW(Kv,wy,t,i,r,s);return ml(wy),ml(Kv),o}function ZW(e,t,i,r,s,o){if(ml(e),!i){for(const c of t){const u=o?c.attributes[o]:void 0;e.push(new cu(null,c.attributes,null,u))}return e}switch(i){case"esriGeometryPoint":return qW(e,t,r,s,o);case"esriGeometryMultipoint":return BW(e,t,r,s,o);case"esriGeometryPolyline":return WW(e,t,r,s,o);case"esriGeometryPolygon":return YW(e,t,r,s,o);default:xg.error("convertToFeatureSet:unknown-geometry",new de(`Unable to parse unknown geometry type '${i}'`)),ml(e)}return e}function sze(e,t,i,r,s,o){const c=e.length;switch(i){case"esriGeometryPoint":qW(e,t,r,s,o);break;case"esriGeometryMultipoint":BW(e,t,r,s,o);break;case"esriGeometryPolyline":WW(e,t,r,s,o);break;case"esriGeometryPolygon":YW(e,t,r,s,o);break;default:xg.error("convertToFeatureSet:unknown-geometry",new de(`Unable to parse unknown geometry type '${i}'`))}for(let u=0;u<t.length;u++)e[u+c].geometryType=i,e[u+c].insertAfter=t[u].insertAfter,e[u+c].groupId=t[u].groupId;return e}function nze(e,t,i,r){Kv[0]=e,XW(wy,Kv,t,i,r);const s=wy[0];return ml(wy),ml(Kv),s}function oze(e,t,i){if(ae(e))return null;const r=new gs;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),_5(e)?dk(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(r,e):vc(e)?KW(r,e,t,i):Tw(e)?JW(r,e,As(t,i)):w5(e)?HW(r,e,As(t,i)):void xg.error("convertFromGeometry:unknown-geometry",new de(`Unable to parse unknown geometry type '${e}'`))}function Dwe(e,t,i,r){const s=e&&("coords"in e?e:e.geometry);if(ae(s))return null;switch(t){case"esriGeometryPoint":{let o=i9;return i&&r?o=hk:i?o=uk:r&&(o=ck),o(s)}case"esriGeometryMultipoint":return pk(s,i,r);case"esriGeometryPolyline":return fk(s,i,r);case"esriGeometryPolygon":return mk(s,i,r);default:return xg.error("convertToGeometry:unknown-geometry",new de(`Unable to parse unknown geometry type '${t}'`)),null}}function jwe(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function XW(e,t,i,r,s){if(ml(e),ae(i))return jwe(e,t);switch(i){case"esriGeometryPoint":return Pwe(e,t,r,s);case"esriGeometryMultipoint":return Fwe(e,t,r,s);case"esriGeometryPolyline":return Lwe(e,t,r,s);case"esriGeometryPolygon":return Rwe(e,t,r,s);default:xg.error("convertToFeatureSet:unknown-geometry",new de(`Unable to parse unknown geometry type '${i}'`))}return e}function aze(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:s,hasM:o,hasZ:c,features:u,geometryType:g,exceededTransferLimit:b,uniqueIdField:S,queryGeometry:E,queryGeometryType:A}=e,O={features:XW([],u,g,c,o),fields:s,geometryType:g,objectIdFieldName:t,spatialReference:i,uniqueIdField:S,queryGeometry:Dwe(E,A,!1,!1)};return r&&(O.transform=r),b&&(O.exceededTransferLimit=b),o&&(O.hasM=o),c&&(O.hasZ=c),O}function lze(e,t){var A;const i=new e9,{hasM:r,hasZ:s,features:o,objectIdFieldName:c,spatialReference:u,geometryType:g,exceededTransferLimit:b,transform:S,fields:E}=e;return E&&(i.fields=E),i.geometryType=g!=null?g:null,i.objectIdFieldName=(A=c!=null?c:t)!=null?A:null,i.spatialReference=u!=null?u:null,i.objectIdFieldName?(o&&ZW(i.features,o,g,s,r,i.objectIdFieldName),b&&(i.exceededTransferLimit=b),r&&(i.hasM=r),s&&(i.hasZ=s),S&&(i.transform=S),i):(xg.error(new de("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function uze(e){const{transform:t,features:i,hasM:r,hasZ:s}=e;if(!t)return e;for(const o of i)U(o.geometry)&&UL(o.geometry,o.geometry,r,s,t),U(o.centroid)&&UL(o.centroid,o.centroid,r,s,t);return e.transform=null,e}function cze(e,t){const{geometryType:i,features:r,hasM:s,hasZ:o}=t;if(!e)return t;for(let c=0;c<r.length;c++){const u=r[c],g=u.weakClone();g.geometry=new gs,Wb(g.geometry,u.geometry,s,o,i,e),u.centroid&&(g.centroid=new gs,Wb(g.centroid,u.centroid,s,o,"esriGeometryPoint",e)),r[c]=g}return t.transform=e,t}function Wb(e,t,i,r,s,o,c=i,u=r){if(bc(e),ae(t)||!t.coords.length)return null;const g=GW[s],{coords:b,lengths:S}=t,E=As(i,r),A=As(i&&c,r&&u),O=lk(i,r,c,u);if(!S.length)return O(e.coords,b,0,0,WI(o,b[0]),JI(o,b[1])),bc(e,E,0),e;let L,N,z,q,Z=0,ee=0,ie=ee;for(const ne of S){if(ne<g)continue;let oe=0;ee=ie,z=L=WI(o,b[Z]),q=N=JI(o,b[Z+1]),O(e.coords,b,ee,Z,z,q),oe++,Z+=E,ee+=A;for(let me=1;me<ne;me++,Z+=E)z=WI(o,b[Z]),q=JI(o,b[Z+1]),z===L&&q===N||(O(e.coords,b,ee,Z,z-L,q-N),ee+=A,oe++,L=z,N=q);oe>=g&&(e.lengths.push(oe),ie=ee)}return ml(e.coords,ie),e.coords.length?e:null}function zwe(e,t,i,r,s,o,c=i,u=r){if(bc(e),!t||!t.coords.length)return null;const g=GW[s],{coords:b,lengths:S}=t,E=As(i,r),A=As(i&&c,r&&u),O=lk(i,r,c,u);if(!S.length)return O(e.coords,b,0,0,b[0],b[1]),bc(e,E,0),e;let L=0;const N=o*o;for(const z of S){if(z<g){L+=z*E;continue}const q=e.coords.length/A,Z=L,ee=L+(z-1)*E;O(e.coords,b,e.coords.length,Z,b[Z],b[Z+1]),$C(e.coords,b,E,N,O,Z,ee),O(e.coords,b,e.coords.length,ee,b[ee],b[ee+1]);const ie=e.coords.length/A-q;ie>=g?e.lengths.push(ie):ml(e.coords,q*A),L+=z*E}return e.coords.length?e:null}function Vwe(e,t,i,r){const s=e[t],o=e[t+1],c=e[i],u=e[i+1],g=e[r],b=e[r+1];let S=c,E=u,A=g-S,O=b-E;if(A!==0||O!==0){const L=((s-S)*A+(o-E)*O)/(A*A+O*O);L>1?(S=g,E=b):L>0&&(S+=A*L,E+=O*L)}return A=s-S,O=o-E,A*A+O*O}function $C(e,t,i,r,s,o,c){let u,g=r,b=0;for(let S=o+i;S<c;S+=i)u=Vwe(t,S,o,c),u>g&&(b=S,g=u);g>r&&(b-o>i&&$C(e,t,i,r,s,o,b),s(e,t,e.length,b,t[b],t[b+1]),c-b>i&&$C(e,t,i,r,s,b,c))}function hze(e,t,i,r){if(ae(t)||!t.coords||!t.coords.length)return null;const s=As(i,r);let o=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(t&&t.coords){const b=t.coords;for(let S=0;S<b.length;S+=s){const E=b[S],A=b[S+1];o=Math.min(o,E),u=Math.max(u,E),c=Math.min(c,A),g=Math.max(g,A)}}return lT(e)?Spe(e,o,c,u,g):fpe(o,c,u,g,e),e}function UL(e,t,i,r,s){var N,z,q,Z,ee,ie,ne,oe;const{coords:o,lengths:c}=t,u=As(i,r);if(!o.length)return e!==t&&bc(e),e;eu(s);const{originPosition:g,scale:b,translate:S}=s,E=qwe;E.originPosition=g;const A=E.scale;A[0]=(N=b[0])!=null?N:1,A[1]=-((z=b[1])!=null?z:1),A[2]=(q=b[2])!=null?q:1,A[3]=(Z=b[3])!=null?Z:1;const O=E.translate;if(O[0]=(ee=S[0])!=null?ee:0,O[1]=(ie=S[1])!=null?ie:0,O[2]=(ne=S[2])!=null?ne:0,O[3]=(oe=S[3])!=null?oe:0,!c.length){for(let me=0;me<u;++me)e.coords[me]=YI(E,o[me],me);return e!==t&&bc(e,u,0),e}let L=0;for(let me=0;me<c.length;me++){const fe=c[me];e.lengths[me]=fe;for(let Ae=0;Ae<u;++Ae)e.coords[L+Ae]=YI(E,o[L+Ae],Ae);let Ce=e.coords[L],_e=e.coords[L+1];L+=u;for(let Ae=1;Ae<fe;Ae++,L+=u){Ce+=o[L]*A[0],_e+=o[L+1]*A[1],e.coords[L]=Ce,e.coords[L+1]=_e;for(let Oe=2;Oe<u;++Oe)e.coords[L+Oe]=YI(E,o[L+Oe],Oe)}}return e!==t&&bc(e,o.length,c.length),e}function Gwe(e,t,i,r,s,o){if(bc(e),e.lengths.push(...t.lengths),i===s&&r===o)for(let c=0;c<t.coords.length;c++)e.coords.push(t.coords[c]);else{const c=As(i,r),u=lk(i,r,s,o),g=t.coords;for(let b=0;b<g.length;b+=c)u(e.coords,g,e.coords.length,b,g[b],g[b+1])}return e}function Uwe(e,t,i,r){let s=0,o=e[r*t],c=e[r*(t+1)];for(let u=1;u<i;u++){const g=o+e[r*(t+u)],b=c+e[r*(t+u)+1],S=(g-o)*(b+c);o=g,c=b,s+=S}return .5*s}function dze(e,t){const{coords:i,lengths:r}=e;let s=0,o=0;for(let c=0;c<r.length;c++){const u=r[c];o+=Uwe(i,s,u,t),s+=u}return Math.abs(o)}function pze(e,t){if(ae(e))return null;const i=e.clone(),r=e.coords,s=e.lengths;let o=0;for(let c=0;c<s.length;c++){const u=s[c];let g=r[t*o],b=r[t*o+1];for(let S=1;S<u;S++){const E=g+r[t*(o+S)],A=b+r[t*(o+S)+1];i.coords[t*(o+S)]=E,i.coords[t*(o+S)+1]=A,g=E,b=A}o+=u}return i}function bc(e,t=0,i=0){ml(e.lengths,i),ml(e.coords,t)}function ml(e,t=0){e.length!==t&&(e.length=t)}const qwe={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};var kC;let ir=kC=class extends $e{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new kC(ve({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};v([_({type:Boolean,json:{write:!0}})],ir.prototype,"cacheHint",void 0),v([_({type:Za,json:{write:!0}})],ir.prototype,"dynamicDataSource",void 0),v([_({type:String,json:{write:!0}})],ir.prototype,"gdbVersion",void 0),v([_({type:Number,json:{write:!0}})],ir.prototype,"geometryPrecision",void 0),v([_({type:Date})],ir.prototype,"historicMoment",void 0),v([qe("historicMoment")],ir.prototype,"_writeHistoricMoment",null),v([_({type:Number,json:{write:!0}})],ir.prototype,"maxAllowableOffset",void 0),v([_({type:[Number],json:{write:!0}})],ir.prototype,"objectIds",void 0),v([_({type:[String],json:{write:!0}})],ir.prototype,"orderByFields",void 0),v([_({type:[String],json:{write:!0}})],ir.prototype,"outFields",void 0),v([_({type:wt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ir.prototype,"outSpatialReference",void 0),v([_({json:{write:!0}})],ir.prototype,"relationshipId",void 0),v([_({type:Number,json:{read:{source:"resultOffset"}}})],ir.prototype,"start",void 0),v([qe("start"),qe("num")],ir.prototype,"writeStart",null),v([_({type:Number,json:{read:{source:"resultRecordCount"}}})],ir.prototype,"num",void 0),v([_({json:{write:!0}})],ir.prototype,"returnGeometry",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ir.prototype,"returnM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ir.prototype,"returnZ",void 0),v([_({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ir.prototype,"where",void 0),ir=kC=v([K("esri.rest.support.RelationshipQuery")],ir),ir.from=Er(ir);const Vy=ir;var fze=Object.freeze(Object.defineProperty({__proto__:null,default:Vy},Symbol.toStringTag,{value:"Module"})),OC;let vm=OC=class extends $e{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new OC({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};v([_({type:[String],json:{write:!0}})],vm.prototype,"groupByFields",void 0),v([_({type:Number,json:{write:!0}})],vm.prototype,"topCount",void 0),v([_({type:[String],json:{write:!0}})],vm.prototype,"orderByFields",void 0),vm=OC=v([K("esri.rest.support.TopFilter")],vm);const Bwe=vm;var PC;const qL=new It({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),BL=new It({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let zi=PC=class extends $e{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new PC(ve({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};v([_({type:Boolean,json:{write:!0}})],zi.prototype,"cacheHint",void 0),v([_({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],zi.prototype,"distance",void 0),v([_({types:_0,json:{read:kc,write:!0}})],zi.prototype,"geometry",void 0),v([_({type:Number,json:{write:!0}})],zi.prototype,"geometryPrecision",void 0),v([_({type:Number,json:{write:!0}})],zi.prototype,"maxAllowableOffset",void 0),v([_({type:Number,json:{read:{source:"resultRecordCount"}}})],zi.prototype,"num",void 0),v([_({json:{write:!0}})],zi.prototype,"objectIds",void 0),v([_({type:[String],json:{write:!0}})],zi.prototype,"orderByFields",void 0),v([_({type:[String],json:{write:!0}})],zi.prototype,"outFields",void 0),v([_({type:wt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],zi.prototype,"outSpatialReference",void 0),v([_({type:String,json:{write:!0}})],zi.prototype,"resultType",void 0),v([_({json:{write:!0}})],zi.prototype,"returnGeometry",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],zi.prototype,"returnM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],zi.prototype,"returnZ",void 0),v([_({type:Number,json:{read:{source:"resultOffset"}}})],zi.prototype,"start",void 0),v([qe("start"),qe("num")],zi.prototype,"writeStart",null),v([_({type:String,json:{read:{source:"spatialRel",reader:qL.read},write:{target:"spatialRel",writer:qL.write}}})],zi.prototype,"spatialRelationship",void 0),v([_({type:pu,json:{write:!0}})],zi.prototype,"timeExtent",void 0),v([_({type:Bwe,json:{write:!0}})],zi.prototype,"topFilter",void 0),v([_({type:String,json:{read:BL.read,write:{writer:BL.write,overridePolicy(e){return{enabled:U(e)&&U(this.distance)&&this.distance>0}}}}})],zi.prototype,"units",void 0),v([_({type:String,json:{write:!0}})],zi.prototype,"where",void 0),zi=PC=v([K("esri.rest.support.TopFeaturesQuery")],zi),zi.from=Er(zi);const V_=zi,Hwe="esri.widgets.Feature.support.relatedFeatureUtils",HL=Ie.getLogger(Hwe),WL=new Map;function x3(e){if(!dc(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function Wwe(e,t){if(!t.relationships)return null;let i=null;const{relationships:r}=t;return r.some(s=>s.id===parseInt(e,10)&&(i=s,!0)),i}function Jwe({originRelationship:e,relationships:t,layerId:i}){let r=null;return t&&t.some(s=>(`${s.relatedTableId}`===i&&s.id===(e==null?void 0:e.id)&&(r=s),!!r)),r}function Ywe(e,t){const i=t.toLowerCase();for(const r in e)if(r.toLowerCase()===i)return e[r];return null}function Kwe(e,t){const i=Wwe(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function Zwe(e,t){if(!t||!e)return;const{features:i,statsFeatures:r}=e,s=i&&i.value;t.relatedFeatures=s?s.features:[];const o=r&&r.value;t.relatedStatsFeatures=o?o.features:[]}function Xwe(e,t,i,r){var o,c;const s=new Vy;return s.outFields=["*"],s.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),s.objectIds=[e.attributes[i.objectIdField]],(c=(o=i.queryRelatedFeatures)==null?void 0:o.call(i,s,r))!=null?c:Promise.resolve({})}function Qwe(e,t,i){let r=0;const s=[];for(;r<t.length;)s.push(`${e} IN (${t.slice(r,i+r)})`),r+=i;return s.join(" OR ")}async function e_e(e,t,i,r){const s=i.layerId.toString(),{layerInfo:o,relation:c,relatedFields:u,outStatistics:g,url:b,sourceSpatialReference:S}=t;if(!o||!c)return null;const E=Jwe({originRelationship:c,relationships:o.relationships,layerId:s});if((E==null?void 0:E.relationshipTableId)&&E.keyFieldInRelationshipTable){const O=(await Xwe(e,E,i,r))[e.attributes[i.objectIdField]];if(!O)return null;const L=O.features.map(N=>N.attributes[o.objectIdField]);if((g==null?void 0:g.length)&&o.supportsStatistics){const N=new Xl;N.where=Qwe(o.objectIdField,L,1e3),N.outFields=u,N.outStatistics=g,N.sourceSpatialReference=S;const z={features:Promise.resolve(O),statsFeatures:HI(b,N)};return Ms(z)}}const A=E==null?void 0:E.keyField;if(A){const O=rl(n_e(o.fields,A)),L=Ywe(e.attributes,c.keyField),N=O?`${A}=${L}`:`${A}='${L}'`,z=HI(b,new Xl({where:N,outFields:t.relatedFields,sourceSpatialReference:S}),r),q=t.outStatistics&&t.outStatistics.length>0&&o.supportsStatistics?HI(b,new Xl({where:N,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:S}),r):null,Z={features:z};return q&&(Z.statsFeatures=q),Ms(Z)}return null}function t_e(e,t){return mi(e,{query:{f:"json"},signal:t&&t.signal})}function i_e({relatedInfos:e,layer:t},i){const r={};return e.forEach((s,o)=>{const{relation:c}=s;if(!c){const E=new de("relation-required","A relation is required on a layer to retrieve related records.");throw HL.error(E),E}const{relatedTableId:u}=c;if(typeof u!="number"){const E=new de("A related table ID is required on a layer to retrieve related records.");throw HL.error(E),E}const g=`${t.url}/${u}`,b=WL.get(g),S=b||t_e(g);b||WL.set(g,S),r[o]=S}),i0(Ms(r),i)}function r_e({graphic:e,relatedInfos:t,layer:i},r){const s={};return t.forEach((o,c)=>{o.layerInfo&&(s[c]=e_e(e,o,i,r))}),Ms(s)}function s_e({relatedInfo:e,fieldName:t,fieldInfo:i}){var r,s;if((r=e.relatedFields)==null||r.push(t),i.statisticType){const o=new VW({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});(s=e.outStatistics)==null||s.push(o)}}function n_e(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const JL={chartAnimation:!0};let kr=class extends Re{constructor(e){super(e),this.abilities={...JL},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...JL,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){var c,u,g,b,S;const{mediaInfos:e,layer:t}=this,i=(c=this.attributes)!=null?c:{},r=(u=this.formattedAttributes)!=null?u:{},s=(g=this.expressionAttributes)!=null?g:{},o=(b=this.fieldInfoMap)!=null?b:new Map;return(S=e==null?void 0:e.map(E=>{const A=E==null?void 0:E.clone();if(!A)return null;if(A.title=Df({attributes:i,fieldInfoMap:o,globalAttributes:r,expressionAttributes:s,layer:t,text:A.title}),A.caption=Df({attributes:i,fieldInfoMap:o,globalAttributes:r,expressionAttributes:s,layer:t,text:A.caption}),A.altText=Df({attributes:i,fieldInfoMap:o,globalAttributes:r,expressionAttributes:s,layer:t,text:A.altText}),A.type==="image"){const{value:O}=A;return this._setImageValue({value:O,formattedAttributes:r,layer:t}),A.value.sourceURL?A:void 0}if(A.type==="pie-chart"||A.type==="line-chart"||A.type==="column-chart"||A.type==="bar-chart"){const{value:O}=A;return this._setChartValue({value:O,chartType:A.type,attributes:i,formattedAttributes:r,layer:t,expressionAttributes:s}),A}return null}).filter(U))!=null?S:[]}_setImageValue(e){var u;const t=(u=this.fieldInfoMap)!=null?u:new Map,{value:i,formattedAttributes:r,layer:s}=e,{linkURL:o,sourceURL:c}=i;if(c){const g=iC(c,s);i.sourceURL=tC({formattedAttributes:r,template:g,fieldInfoMap:t})}if(o){const g=iC(o,s);i.linkURL=tC({formattedAttributes:r,template:g,fieldInfoMap:t})}}_setChartValue(e){var O;const{value:t,attributes:i,formattedAttributes:r,chartType:s,layer:o,expressionAttributes:c}=e,{popupTemplate:u,relatedInfos:g}=this,{fields:b,normalizeField:S}=t,E=o;if(t.fields=g1e(b,E),S&&(t.normalizeField=qb(S,E)),!b.some(L=>!!(r[L]!=null||dc(L)&&(g==null?void 0:g.size))))return;const A=(O=u==null?void 0:u.fieldInfos)!=null?O:[];b.forEach(L=>{if(dc(L))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:A,fieldName:L,formattedAttributes:r,chartType:s,value:t})]);const N=this._getChartOption({value:t,attributes:i,chartType:s,formattedAttributes:r,expressionAttributes:c,fieldName:L,fieldInfos:A});t.series.push(N)})}_getRelatedChartInfos(e){var A;const{fieldInfos:t,fieldName:i,formattedAttributes:r,chartType:s,value:o}=e,c=[],u=x3(i),g=u&&((A=this.relatedInfos)==null?void 0:A.get(u.layerId.toString()));if(!g)return c;const{relatedFeatures:b,relation:S}=g;if(!S||!b)return c;const{cardinality:E}=S;return b.forEach(O=>{const{attributes:L}=O;L&&Object.keys(L).forEach(N=>{N===u.fieldName&&c.push(this._getChartOption({value:o,attributes:L,formattedAttributes:r,fieldName:i,chartType:s,relatedFieldName:N,hasMultipleRelatedFeatures:(b==null?void 0:b.length)>1,fieldInfos:t}))})}),E==="one-to-many"||E==="many-to-many"?c:[c[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var ne,oe,me,fe,Ce,_e,Ae;const{value:t,attributes:i,formattedAttributes:r,expressionAttributes:s,fieldName:o,relatedFieldName:c,fieldInfos:u,chartType:g,hasMultipleRelatedFeatures:b}=e,S=this.layer,E=(ne=this.fieldInfoMap)!=null?ne:new Map,{normalizeField:A,tooltipField:O}=t,L=A?dc(A)?i[x3(A).fieldName]:i[A]:null,N=Y7(o)&&s&&s[o]!==void 0?s[o]:c&&i[c]!==void 0?i[c]:i[o]!==void 0?i[o]:r[o],z=new Oq({fieldName:o,value:N===void 0?null:N&&L?N/L:N});if(dc(o)){const Oe=E.get(o.toLowerCase()),je=O&&E.get(O.toLowerCase()),De=(oe=Oe==null?void 0:Oe.fieldName)!=null?oe:o,nt=b&&O?x3(O).fieldName:(me=je==null?void 0:je.fieldName)!=null?me:O,mt=b&&nt?i[nt]:(_e=(Ce=(fe=r[nt])!=null?fe:Oe==null?void 0:Oe.label)!=null?Ce:Oe==null?void 0:Oe.fieldName)!=null?_e:c,ct=b&&c?i[c]:r[De];return z.tooltip=this._getTooltip({label:mt,value:ct,chartType:g}),z}const q=lW(u,o),Z=qb(o,S),ee=O&&r[O]!==void 0?r[O]:oW(q||new Aw({fieldName:Z}),(Ae=this.popupTemplate)==null?void 0:Ae.expressionInfos),ie=r[Z];return z.tooltip=this._getTooltip({label:ee,value:ie,chartType:g}),z}};v([_()],kr.prototype,"abilities",void 0),v([_t("abilities")],kr.prototype,"castAbilities",null),v([_()],kr.prototype,"activeMediaInfoIndex",void 0),v([_({readOnly:!0})],kr.prototype,"activeMediaInfo",null),v([_()],kr.prototype,"attributes",void 0),v([_()],kr.prototype,"description",void 0),v([_()],kr.prototype,"fieldInfoMap",void 0),v([_()],kr.prototype,"formattedAttributes",void 0),v([_()],kr.prototype,"expressionAttributes",void 0),v([_({readOnly:!0})],kr.prototype,"formattedMediaInfos",null),v([_()],kr.prototype,"isAggregate",void 0),v([_()],kr.prototype,"layer",void 0),v([_({readOnly:!0})],kr.prototype,"formattedMediaInfoCount",null),v([_()],kr.prototype,"mediaInfos",void 0),v([_()],kr.prototype,"popupTemplate",void 0),v([_()],kr.prototype,"relatedInfos",void 0),v([_()],kr.prototype,"title",void 0),kr=v([K("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],kr);const zf=kr;var YL=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],o_e=[].concat(YL.slice(30,39),YL.slice(28,30).reverse()),a_e=[{name:"default",colors:o_e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const KL="en-us",yk=new Map([["ar",()=>pe(()=>import("./ar.64bdae33.js"),["assets/ar.64bdae33.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.a)],["bg-bg",()=>pe(()=>import("./bg_BG.8070db04.js"),["assets/bg_BG.8070db04.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.b)],["bs-ba",()=>pe(()=>import("./bs_BA.e94fced0.js"),["assets/bs_BA.e94fced0.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.b)],["ca-es",()=>pe(()=>import("./ca_ES.fa1fb6d4.js"),["assets/ca_ES.fa1fb6d4.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.c)],["cs-cz",()=>pe(()=>import("./cs_CZ.26d7de29.js"),["assets/cs_CZ.26d7de29.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.c)],["da-dk",()=>pe(()=>import("./da_DK.120f7f3f.js"),["assets/da_DK.120f7f3f.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.d)],["de-de",()=>pe(()=>import("./de_DE.05454bea.js"),["assets/de_DE.05454bea.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.d)],["de-ch",()=>pe(()=>import("./de_CH.354b0f69.js"),["assets/de_CH.354b0f69.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.d)],["el-gr",()=>pe(()=>import("./el_GR.6e9d996c.js"),["assets/el_GR.6e9d996c.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.e)],["en-us",()=>pe(()=>import("./en_US.aa05200a.js"),["assets/en_US.aa05200a.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.e)],["en-ca",()=>pe(()=>import("./en_CA.ff5961af.js"),["assets/en_CA.ff5961af.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.e)],["es-es",()=>pe(()=>import("./es_ES.b6c9470c.js"),["assets/es_ES.b6c9470c.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.e)],["et-ee",()=>pe(()=>import("./et_EE.43d8819e.js"),["assets/et_EE.43d8819e.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.e)],["fi-fi",()=>pe(()=>import("./fi_FI.3aabcb85.js"),["assets/fi_FI.3aabcb85.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.f)],["fr-fr",()=>pe(()=>import("./fr_FR.8416be11.js"),["assets/fr_FR.8416be11.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.f)],["he-il",()=>pe(()=>import("./he_IL.e0d274e8.js"),["assets/he_IL.e0d274e8.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.h)],["hr-hr",()=>pe(()=>import("./hr_HR.d7fe48fb.js"),["assets/hr_HR.d7fe48fb.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.h)],["hu-hu",()=>pe(()=>import("./hu_HU.806bf1a2.js"),["assets/hu_HU.806bf1a2.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.h)],["id-id",()=>pe(()=>import("./id_ID.85c2ee17.js"),["assets/id_ID.85c2ee17.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.i)],["it-it",()=>pe(()=>import("./it_IT.b038d1ce.js"),["assets/it_IT.b038d1ce.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.i)],["ja-jp",()=>pe(()=>import("./ja_JP.f97218a7.js"),["assets/ja_JP.f97218a7.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.j)],["ko-kr",()=>pe(()=>import("./ko_KR.bf13fd77.js"),["assets/ko_KR.bf13fd77.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.k)],["lt-lt",()=>pe(()=>import("./lt_LT.6a79f2eb.js"),["assets/lt_LT.6a79f2eb.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.l)],["lv-lv",()=>pe(()=>import("./lv_LV.79bc32a5.js"),["assets/lv_LV.79bc32a5.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.l)],["nb-no",()=>pe(()=>import("./nb_NO.4305bd9b.js"),["assets/nb_NO.4305bd9b.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.n)],["nl-nl",()=>pe(()=>import("./nl_NL.f0879c32.js"),["assets/nl_NL.f0879c32.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.n)],["pl-pl",()=>pe(()=>import("./pl_PL.b8fb6a8c.js"),["assets/pl_PL.b8fb6a8c.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.p)],["pt-br",()=>pe(()=>import("./pt_BR.08b07c11.js"),["assets/pt_BR.08b07c11.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.p)],["pt-pt",()=>pe(()=>import("./pt_PT.d28f3862.js"),["assets/pt_PT.d28f3862.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.p)],["ro-ro",()=>pe(()=>import("./ro_RO.39f3d641.js"),["assets/ro_RO.39f3d641.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.r)],["ru-ru",()=>pe(()=>import("./ru_RU.d88da93b.js"),["assets/ru_RU.d88da93b.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.r)],["sk-sk",()=>pe(()=>import("./sk_SK.9da3725b.js"),["assets/sk_SK.9da3725b.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.s)],["sl-sl",()=>pe(()=>import("./sl_SL.f070a09a.js"),["assets/sl_SL.f070a09a.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.s)],["sr-rs",()=>pe(()=>import("./sr_RS.819b319a.js"),["assets/sr_RS.819b319a.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.s)],["sv-se",()=>pe(()=>import("./sv_SE.21930b6e.js"),["assets/sv_SE.21930b6e.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.s)],["th-th",()=>pe(()=>import("./th_TH.e79ffca7.js"),["assets/th_TH.e79ffca7.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.t)],["tr-tr",()=>pe(()=>import("./tr_TR.83778020.js"),["assets/tr_TR.83778020.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.t)],["uk-ua",()=>pe(()=>import("./uk_UA.349126cc.js"),["assets/uk_UA.349126cc.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.u)],["vi-vn",()=>pe(()=>import("./vi_VN.dfae26af.js"),["assets/vi_VN.dfae26af.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.v)],["zh-cn",()=>pe(()=>import("./zh_Hans.b2367cdd.js"),["assets/zh_Hans.b2367cdd.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.z)],["zh-hk",()=>pe(()=>import("./zh_Hant.8c4a1b8d.js"),["assets/zh_Hant.8c4a1b8d.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.z)],["zh-tw",()=>pe(()=>import("./zh_Hant.8c4a1b8d.js"),["assets/zh_Hant.8c4a1b8d.js","assets/_commonjsHelpers.4421ccc9.js","assets/_commonjs-dynamic-modules.0552a654.js"]).then(e=>e.z)]]);function l_e(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const r of yk.keys())if(r.startsWith(t)){i=r;break}return i}function u_e(e){return e?yk.has(e.toLowerCase())?e.toLowerCase():l_e(e)||KL:KL}let P0=null,e1=null;async function c_e(e=Dr()){if(e=u_e(e),P0&&e===e1)return P0;P0=pe(()=>import("./index.9fddb7c2.js"),["assets/index.9fddb7c2.js","assets/_commonjsHelpers.4421ccc9.js"]).then(t=>t.i),e1=e;try{const[t,i]=await Promise.all([P0,yk.get(e1)()]);e1===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return P0=null,e1=null,null}return P0}function h_e(e,t="default"){const i=a_e.find(r=>r.name===t);return i?i.colors.map(r=>e.color(r)):null}const ln="esri-feature-media",lr={base:ln,mediaContainer:`${ln}__container`,mediaItemContainer:`${ln}__item-container`,mediaItem:`${ln}__item`,mediaItemTitle:`${ln}__item-title`,mediaItemCaption:`${ln}__item-caption`,mediaPrevious:`${ln}__previous`,mediaPreviousIconLTR:`${ln}__previous-icon`,mediaPreviousIconRTL:`${ln}__previous-icon--rtl`,mediaNext:`${ln}__next`,mediaNextIconLTR:`${ln}__next-icon`,mediaNextIconRTL:`${ln}__next-icon--rtl`,mediaChart:`${ln}__chart`,mediaButton:`${ln}__button`,mediaIcon:`${ln}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},KI=.05,ZI=.95,XI=15,xu="color",Xc="tooltip",t1="value",ZL="default-line-value";let Dn=class extends ki{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new zf,this.messages=null,this._getChartDependencies=async i=>{const r=await c_e(),{destroyed:s,viewModel:o}=this;if(s||!o||!i)return;const{activeMediaInfo:c}=o,u=await this._getRendererColors(r);this._renderChart({chartDiv:i,mediaInfo:c,chartsModule:r,colorMap:u})}}initialize(){this._featureElementInfo=new V5,this.addHandles([ge(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),rt),ge(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),rt)])}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return J("div",{bind:this,class:lr.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?J("div",{key:"media-element-container",class:lr.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:o,altText:c,title:u,type:g}=e,{sourceURL:b,linkURL:S}=s,E=nW(S!=null?S:void 0)?"_blank":"_self",A=E==="_blank"?"noreferrer":"",O=o?t:null,L=O?O.timestamp:0,N=O?O.sourceURL:b,z=J("img",{alt:c||u,key:`media-${g}-${i}-${r}-${L}`,src:N!=null?N:void 0});return(S?J("a",{title:u,href:S,rel:A,target:E},z):null)||z}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return J("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:lr.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?J("div",{key:"media-title",class:lr.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?J("div",{key:"media-caption",class:lr.mediaItemCaption,innerHTML:e.caption}):null;return J("div",{key:"media-container",class:lr.mediaItemContainer},J("div",{key:"media-item-container",class:lr.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,r=t?this.classes(lr.mediaButton,lr.mediaPrevious):this.classes(lr.mediaButton,lr.mediaNext),s=t?this.classes(lr.mediaIcon,lr.mediaPreviousIconLTR,lr.iconLeftTriangleArrow):this.classes(lr.mediaIcon,lr.mediaNextIconLTR,lr.iconRightTriangleArrow),o=t?this.classes(lr.mediaIcon,lr.mediaPreviousIconRTL,lr.iconRightTriangleArrow):this.classes(lr.mediaIcon,lr.mediaNextIconRTL,lr.iconLeftTriangleArrow),c=t?"media-previous":"media-next",u=t?this._previous:this._next;return J("button",{type:"button",key:c,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onclick:u},J("span",{"aria-hidden":"true",class:s}),J("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){var i;const{description:e,title:t}=this;(i=this._featureElementInfo)==null||i.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:e,layer:t}=this.viewModel;return e&&(t==null?void 0:t.featureReduction)&&"renderer"in t.featureReduction?t.featureReduction.renderer:t==null?void 0:t.renderer}async _getRendererColors(e){const{am4core:t}=e,i=new Map,r=this._getRenderer(),s="default";if(!r)return i;const o=await Pbe(r);return o.delete(s),Array.from(o.values()).every(c=>(c==null?void 0:c.length)===1)&&(i.set(ZL,t.color({r:50,g:50,b:50,a:1})),Array.from(o.keys()).forEach(c=>{var u;c&&i.set(c,t.color((u=o.get(c))==null?void 0:u[0].toCss(!0)))})),i}_handleMediaKeyup(e){const t=el(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:s,colorMap:o}=e,{value:c,type:u}=s,{am4core:g}=i,b=h_e(g);function S(O){O instanceof g.ColorSet&&b&&(O.list=b)}rS()&&g.useTheme(i.am4themes_dark);const E=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!E.matches?g.useTheme(i.am4themes_animated):g.unuseTheme(i.am4themes_animated),g.useTheme(S);const A=u==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",s.altText||s.title),A.data=c.series.map(O=>({[Xc]:O.tooltip,[t1]:O.value,[xu]:o.get(O.fieldName)})).filter(O=>u!=="pie-chart"||O.value!=null&&O.value>0)}_customizeChartTooltip(e,t){e&&(e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7}))}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,o=r.create(t,s.PieChart);o.rtl=Zn(this.container);const c=o.series.push(new s.PieSeries);return c.labels.template.disabled=!0,c.ticks.template.disabled=!0,c.dataFields.value=t1,c.dataFields.category=Xc,this._customizeChartTooltip(c.tooltip,r),c.slices.template.propertyFields.fill=xu,c.slices.template.propertyFields.stroke=xu,o}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:o,am4charts:c}=i,u=e.xAxes.push(new c.CategoryAxis);u.dataFields.category=Xc,u.renderer.labels.template.disabled=!0;const g=u.tooltip;this._customizeChartTooltip(g,o),g.events.on("sizechanged",()=>{g.dy=-g.contentHeight});const b=e.yAxes.push(new c.ValueAxis),S=b.renderer.labels.template;b.renderer.minLabelPosition=KI,b.renderer.maxLabelPosition=ZI,b.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(b.tooltip,o),S.wrap=!0;const E=e.series.push(new c.ColumnSeries);E.dataFields.valueY=t1,E.dataFields.categoryX=Xc,E.columns.template.propertyFields.fill=xu,E.columns.template.propertyFields.stroke=xu,e.cursor=new c.XYCursor,s.series.length>XI&&(e.scrollbarX=new o.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:o,am4charts:c}=i,u=e.yAxes.push(new c.CategoryAxis);u.dataFields.category=Xc,u.renderer.inversed=!0,u.renderer.labels.template.disabled=!0;const g=u.tooltip;this._customizeChartTooltip(g,o),g.events.on("sizechanged",()=>{g.dx=g.contentWidth});const b=e.xAxes.push(new c.ValueAxis),S=b.renderer.labels.template;b.renderer.minLabelPosition=KI,b.renderer.maxLabelPosition=ZI,b.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(b.tooltip,o),S.wrap=!0;const E=e.series.push(new c.ColumnSeries);E.dataFields.valueX=t1,E.dataFields.categoryY=Xc,E.columns.template.propertyFields.fill=xu,E.columns.template.propertyFields.stroke=xu,e.cursor=new c.XYCursor,s.series.length>XI&&(e.scrollbarY=new o.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:s}=t,{value:o}=r,{am4core:c,am4charts:u}=i,g=e.xAxes.push(new u.CategoryAxis);g.dataFields.category=Xc,g.renderer.labels.template.disabled=!0;const b=g.tooltip;this._customizeChartTooltip(b,c),b.events.on("sizechanged",()=>{b.dy=-b.contentHeight});const S=e.yAxes.push(new u.ValueAxis),E=S.renderer.labels.template;S.renderer.minLabelPosition=KI,S.renderer.maxLabelPosition=ZI,S.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(S.tooltip,c),E.wrap=!0;const A=e.series.push(new u.LineSeries);A.dataFields.categoryX=Xc,A.dataFields.valueY=t1,A.strokeWidth=1;const O=s.get(ZL);O&&(A.stroke=O);const L=A.bullets.push(new u.CircleBullet);L.propertyFields.fill=xu,L.propertyFields.stroke=xu,e.cursor=new u.XYCursor,o.series.length>XI&&(e.scrollbarX=new c.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:o,am4charts:c}=i,u=o.create(t,c.XYChart);return u.rtl=Zn(this.container),s==="column-chart"&&this._createColumnChart(u,e),s==="bar-chart"&&this._createBarChart(u,e),s==="line-chart"&&this._createLineChart(u,e),u}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:e&&this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},r);this._refreshTimer=s}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[r,s=""]=e.split("#");return`${r}${i}timestamp=${t}${s?"#":""}${s}`}};v([_()],Dn.prototype,"attributes",null),v([_()],Dn.prototype,"activeMediaInfoIndex",null),v([_()],Dn.prototype,"description",null),v([_()],Dn.prototype,"fieldInfoMap",null),v([_()],Dn.prototype,"layer",null),v([_()],Dn.prototype,"mediaInfos",null),v([_()],Dn.prototype,"popupTemplate",null),v([_()],Dn.prototype,"relatedInfos",null),v([_()],Dn.prototype,"title",null),v([_({type:zf})],Dn.prototype,"viewModel",void 0),v([_(),ui("esri/widgets/Feature/t9n/Feature")],Dn.prototype,"messages",void 0),Dn=v([K("esri.widgets.Feature.FeatureMedia")],Dn);const QW=Dn;var FC;let ev=FC=class extends $e{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new FC({minValue:this.minValue,maxValue:this.maxValue})}};v([_({type:Number,json:{write:!0}})],ev.prototype,"minValue",void 0),v([_({type:Number,json:{write:!0}})],ev.prototype,"maxValue",void 0),ev=FC=v([K("esri.renderer.support.AuthoringInfoClassBreakInfo")],ev);var LC;let ed=LC=class extends $e{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new LC({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ve(this.classBreakInfos)})}};v([_({type:String,json:{write:!0}})],ed.prototype,"field",void 0),v([_({type:String,json:{write:!0}})],ed.prototype,"normalizationField",void 0),v([_({type:String,json:{write:!0}})],ed.prototype,"label",void 0),v([_({type:[ev],json:{write:!0}})],ed.prototype,"classBreakInfos",void 0),ed=LC=v([K("esri.renderers.support.AuthoringInfoFieldInfo")],ed);var RC;const G_=new It({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),U_=new It({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),XL={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},QL=["high-to-low","above-and-below","centered-on","extremes"],eR=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],tR=["seconds","minutes","hours","days","months","years"];let jn=RC=class extends $e{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new RC({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};v([_({types:XL,json:{write:!0}})],jn.prototype,"endTime",void 0),v([_t("endTime")],jn.prototype,"castEndTime",null),v([_({type:String,json:{write:!0}})],jn.prototype,"field",void 0),v([_({type:Number,json:{write:!0}})],jn.prototype,"maxSliderValue",void 0),v([_({type:Number,json:{write:!0}})],jn.prototype,"minSliderValue",void 0),v([_({types:XL,json:{write:!0}})],jn.prototype,"startTime",void 0),v([_t("startTime")],jn.prototype,"castStartTime",null),v([_({type:G_.apiValues,value:null,json:{type:G_.jsonValues,read:G_.read,write:G_.write}})],jn.prototype,"style",null),v([_({type:eR,value:null,json:{type:eR,origins:{"web-scene":{type:QL,write:{writer:(e,t)=>{QL.includes(e)&&(t.theme=e)}}}},write:!0}})],jn.prototype,"theme",null),v([_({type:U_.apiValues,json:{type:U_.jsonValues,read:U_.read,write:U_.write}})],jn.prototype,"type",void 0),v([_({type:tR,json:{type:tR,write:!0}})],jn.prototype,"units",void 0),jn=RC=v([K("esri.renderers.support.AuthoringInfoVisualVariable")],jn);const d_e=jn;let S3=class extends $e{constructor(e){super(e),this.type=null}};v([_({readOnly:!0,json:{read:!1,write:!0}})],S3.prototype,"type",void 0),S3=v([K("esri.rest.support.ColorRamp")],S3);const gk=S3;var NC;let Rp=NC=class extends gk{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new NC({fromColor:ve(this.fromColor),toColor:ve(this.toColor),algorithm:this.algorithm})}};v([Qe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Rp.prototype,"algorithm",void 0),v([_({type:Je,json:{type:[gi],write:!0}})],Rp.prototype,"fromColor",void 0),v([_({type:Je,json:{type:[gi],write:!0}})],Rp.prototype,"toColor",void 0),v([_({type:["algorithmic"]})],Rp.prototype,"type",void 0),Rp=NC=v([K("esri.rest.support.AlgorithmicColorRamp")],Rp);const vk=Rp;var DC;let tv=DC=class extends gk{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new DC({colorRamps:ve(this.colorRamps)})}};v([_({type:[vk],json:{write:!0}})],tv.prototype,"colorRamps",void 0),v([_({type:["multipart"]})],tv.prototype,"type",void 0),tv=DC=v([K("esri.rest.support.MultipartColorRamp")],tv);const eJ=tv,p_e={key:"type",base:gk,typeMap:{algorithmic:vk,multipart:eJ}};function f_e(e){return e&&e.type?e.type==="algorithmic"?vk.fromJSON(e):e.type==="multipart"?eJ.fromJSON(e):null:null}var jC;const ip=new It({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),q_=new It({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),iR=new It({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),rR=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],m_e=["high-to-low","above-and-below","above","below","90-10"],y_e=["flow-line","wave-front"],g_e=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ur=jC=class extends $e{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?f_e(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new jC({classificationMethod:this.classificationMethod,colorRamp:ve(this.colorRamp),fadeRatio:ve(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:ve(this.field1),field2:ve(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};v([_({type:ip.apiValues,value:null,json:{type:ip.jsonValues,read:ip.read,write:ip.write,origins:{"web-document":{default:"manual",type:ip.jsonValues,read:ip.read,write:ip.write}}}})],ur.prototype,"classificationMethod",null),v([_({types:p_e,json:{write:!0}})],ur.prototype,"colorRamp",void 0),v([Ne("colorRamp")],ur.prototype,"readColorRamp",null),v([_({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"fadeRatio",void 0),v([_({type:[String],value:null,json:{write:!0}})],ur.prototype,"fields",null),v([_({type:ed,value:null,json:{write:!0}})],ur.prototype,"field1",null),v([_({type:ed,value:null,json:{write:!0}})],ur.prototype,"field2",null),v([_({type:y_e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ur.prototype,"flowTheme",null),v([_({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ur.prototype,"focus",null),v([_({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ur.prototype,"isAutoGenerated",void 0),v([_({type:Number,value:null,json:{type:gi,write:!0}})],ur.prototype,"numClasses",null),v([_({type:rR,json:{type:rR,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ur.prototype,"lengthUnit",void 0),v([_({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"maxSliderValue",void 0),v([_({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"minSliderValue",void 0),v([_({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"statistics",null),v([_({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ur.prototype,"standardDeviationInterval",null),v([_({type:q_.apiValues,value:null,json:{type:q_.jsonValues,read:q_.read,write:q_.write,origins:{"web-scene":{type:iR.jsonValues,write:{writer:iR.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],ur.prototype,"type",null),v([_({type:[d_e],json:{write:!0}})],ur.prototype,"visualVariables",void 0),v([_({type:g_e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ur.prototype,"univariateSymbolStyle",null),v([_({type:m_e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ur.prototype,"univariateTheme",null),ur=jC=v([K("esri.renderers.support.AuthoringInfo")],ur);const bk=ur,QI=new It({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let iv=class extends $e{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};v([_({type:bk,json:{write:!0}})],iv.prototype,"authoringInfo",void 0),v([_({type:QI.apiValues,readOnly:!0,json:{type:QI.jsonValues,read:!1,write:{writer:QI.write,ignoreOrigin:!0}}})],iv.prototype,"type",void 0),iv=v([K("esri.renderers.Renderer")],iv);const Nc=iv;function v_e(e){var t,i,r;return(r=(i=(t=e.match(b_e))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))!=null?r:null}const b_e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var zC;let _y=zC=class extends $e{constructor(){super(...arguments),this.title=null}clone(){return new zC({title:this.title})}};v([_({type:String,json:{write:!0}})],_y.prototype,"title",void 0),_y=zC=v([K("esri.renderers.support.LegendOptions")],_y);var VC;let I3=VC=class extends _y{constructor(){super(...arguments),this.showLegend=null}clone(){return new VC({title:this.title,showLegend:this.showLegend})}};v([_({type:Boolean,json:{write:!0}})],I3.prototype,"showLegend",void 0),I3=VC=v([K("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],I3);const tJ=I3,eE=new It({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ja=class extends $e{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Ie.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Sw(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};v([_()],ja.prototype,"index",void 0),v([_({type:eE.apiValues,readOnly:!0,json:{read:eE.read,write:eE.write}})],ja.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],ja.prototype,"field",void 0),v([_t("field")],ja.prototype,"castField",null),v([_({type:String,json:{write:!0}})],ja.prototype,"valueExpression",void 0),v([_({type:String,json:{write:!0}})],ja.prototype,"valueExpressionTitle",void 0),v([_({readOnly:!0})],ja.prototype,"arcadeRequired",null),v([_({type:tJ,json:{write:!0}})],ja.prototype,"legendOptions",void 0),ja=v([K("esri.renderers.visualVariables.VisualVariable")],ja);const qw=ja;var GC;let Np=GC=class extends qw{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new GC({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};v([_({readOnly:!0})],Np.prototype,"cache",null),v([_({type:["color"],json:{type:["colorInfo"]}})],Np.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Np.prototype,"normalizationField",void 0),v([_({type:[ove],json:{write:!0}})],Np.prototype,"stops",null),Np=GC=v([K("esri.renderers.visualVariables.ColorVariable")],Np);const iJ=Np;var UC;let Sh=UC=class extends $e{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Eb(t.transparency)}writeOpacity(e,t,i){t[i]=b5(e)}clone(){return new UC({label:this.label,opacity:this.opacity,value:this.value})}};v([_({type:String,json:{write:!0}})],Sh.prototype,"label",void 0),v([_({type:Number,json:{type:gi,write:{target:"transparency"}}})],Sh.prototype,"opacity",void 0),v([Ne("opacity",["transparency"])],Sh.prototype,"readOpacity",null),v([qe("opacity")],Sh.prototype,"writeOpacity",null),v([_({type:Number,json:{write:!0}})],Sh.prototype,"value",void 0),Sh=UC=v([K("esri.renderers.visualVariables.support.OpacityStop")],Sh);const w_e=Sh;var qC;let Dp=qC=class extends qw{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new qC({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};v([_({readOnly:!0})],Dp.prototype,"cache",null),v([_({type:["opacity"],json:{type:["transparencyInfo"]}})],Dp.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Dp.prototype,"normalizationField",void 0),v([_({type:[w_e],json:{write:!0}})],Dp.prototype,"stops",null),Dp=qC=v([K("esri.renderers.visualVariables.OpacityVariable")],Dp);const rJ=Dp;var BC;let ju=BC=class extends qw{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,r){if(r&&r.messages){const s=`visualVariables[${this.index}]`;r.messages.push(new de("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:r}))}}clone(){return new BC({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};v([_({readOnly:!0})],ju.prototype,"cache",null),v([_({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ju.prototype,"axis",void 0),v([_({type:["rotation"],json:{type:["rotationInfo"]}})],ju.prototype,"type",void 0),v([_({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ju.prototype,"rotationType",void 0),v([_({type:String,json:{write:!0}})],ju.prototype,"valueExpressionTitle",void 0),v([qe("web-scene","valueExpressionTitle")],ju.prototype,"writeValueExpressionTitleWebScene",null),ju=BC=v([K("esri.renderers.visualVariables.RotationVariable")],ju);const sJ=ju;var HC;let bm=HC=class extends $e{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new HC({label:this.label,size:this.size,value:this.value})}};v([_({type:String,json:{write:!0}})],bm.prototype,"label",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],bm.prototype,"size",void 0),v([_({type:Number,json:{write:!0}})],bm.prototype,"value",void 0),bm=HC=v([K("esri.renderers.visualVariables.support.SizeStop")],bm);const wm=bm;var WC;let E3=WC=class extends tJ{constructor(){super(...arguments),this.customValues=null}clone(){return new WC({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};v([_({type:[Number],json:{write:!0}})],E3.prototype,"customValues",void 0),E3=WC=v([K("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],E3);const __e=E3;var wc,Rr;function bd(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Jb(e){return e!=null&&!isNaN(e)&&isFinite(e)}function nJ(e){return e.valueExpression?wc.Expression:e.field&&typeof e.field=="string"?wc.Field:wc.Unknown}function oJ(e,t){const i=t||nJ(e),r=e.valueUnit||"unknown";return i===wc.Unknown?Rr.Constant:e.stops?Rr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Rr.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Rr.Proportional:Rr.Additive:Rr.Identity:Rr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(wc||(wc={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Rr||(Rr={}));const Bw={inches:ei(1,"meters","inches"),feet:ei(1,"meters","feet"),"us-feet":ei(1,"meters","us-feet"),yards:ei(1,"meters","yards"),miles:ei(1,"meters","miles"),"nautical-miles":ei(1,"meters","nautical-miles"),millimeters:ei(1,"meters","millimeters"),centimeters:ei(1,"meters","centimeters"),decimeters:ei(1,"meters","decimeters"),meters:ei(1,"meters","meters"),kilometers:ei(1,"meters","kilometers"),"decimal-degrees":1/lU(1,"meters",Bi.radius)},Dd=Ie.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),sR=new wr,M3=Math.PI,aJ=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function lJ(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Dd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s=typeof t=="number",o=s?null:t,c=o&&o.attributes;let u=s?t:null;const g=r.field,{ipData:b,hasExpression:S}=r.cache;let E=r.cache.compiledFunc;if(!g&&!S){const L=r.stops;return L&&L[0]&&L[0].color}if(typeof u!="number")if(S){if(ae(i)||ae(i.arcade))return void Dd.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},N=i.arcade.arcadeUtils,z=N.getViewInfo(L),q=N.createExecContext(o,z);if(!E){const Z=N.createSyntaxTree(r.valueExpression);E=N.createFunction(Z),r.cache.compiledFunc=E}u=N.executeFunction(E,q)}else c&&(u=c[g]);const A=r.normalizationField,O=c!=null&&A!=null?parseFloat(c[A]):void 0;if(u!=null&&(!A||s||!isNaN(O)&&O!==0)){isNaN(O)||s||(u/=O);const L=_k(u,b);if(L){const N=L[0],z=L[1],q=N===z?r.stops[N].color:Je.blendColors(r.stops[N].color,r.stops[z].color,L[2],U(i)?i.color:void 0);return new Je(q)}}}function uJ(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Dd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s=typeof t=="number",o=s?null:t,c=o&&o.attributes;let u=s?t:null;const g=r.field,{ipData:b,hasExpression:S}=r.cache;let E=r.cache.compiledFunc;if(!g&&!S){const L=r.stops;return L&&L[0]&&L[0].opacity}if(typeof u!="number")if(S){if(ae(i)||ae(i.arcade))return void Dd.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},N=i.arcade.arcadeUtils,z=N.getViewInfo(L),q=N.createExecContext(o,z);if(!E){const Z=N.createSyntaxTree(r.valueExpression);E=N.createFunction(Z),r.cache.compiledFunc=E}u=N.executeFunction(E,q)}else c&&(u=c[g]);const A=r.normalizationField,O=c!=null&&A!=null?parseFloat(c[A]):void 0;if(u!=null&&(!A||s||!isNaN(O)&&O!==0)){isNaN(O)||s||(u/=O);const L=_k(u,b);if(L){const N=L[0],z=L[1];if(N===z)return r.stops[N].opacity;{const q=r.stops[N].opacity;return q+(r.stops[z].opacity-q)*L[2]}}}}function wk(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(O=>O.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Dd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",o=s==="heading"&&r.rotationType==="arithmetic"?90:0,c=s==="heading"&&r.rotationType==="arithmetic"?-1:1,u=typeof t=="number"?null:t,g=u&&u.attributes,b=r.field,{hasExpression:S}=r.cache;let E=r.cache.compiledFunc,A=0;if(!b&&!S)return A;if(S){if(ae(i)||ae(i.arcade))return void Dd.error("Use of arcade expressions requires an arcade context");const O={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,N=L.getViewInfo(O),z=L.createExecContext(u,N);if(!E){const q=L.createSyntaxTree(r.valueExpression);E=L.createFunction(q),r.cache.compiledFunc=E}A=L.executeFunction(E,z)}else g&&(A=g[b]||0);return A=typeof A!="number"||isNaN(A)?null:o+c*A,A}function x_e(e,t,i){const r=typeof t=="number",s=r?null:t,o=s&&s.attributes;let c=r?t:null;const{isScaleDriven:u}=e.cache;let g=e.cache.compiledFunc;if(u){const S=U(i)?i.scale:void 0,E=U(i)?i.view:void 0;c=S==null||E==="3d"?S_e(e):S}else if(!r)switch(e.inputValueType){case wc.Expression:{if(ae(i)||ae(i.arcade))return void Dd.error("Use of arcade expressions requires an arcade context");const S={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},E=i.arcade.arcadeUtils,A=E.getViewInfo(S),O=E.createExecContext(s,A);if(!g){const L=E.createSyntaxTree(e.valueExpression);g=E.createFunction(L),e.cache.compiledFunc=g}c=E.executeFunction(g,O);break}case wc.Field:o&&(c=o[e.field]);break;case wc.Unknown:c=null}if(!Jb(c))return null;if(r||!e.normalizationField)return c;const b=o?parseFloat(o[e.normalizationField]):null;return Jb(b)&&b!==0?c/b:null}function S_e(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function Hw(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(o=>o.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Dd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=hJ(x_e(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function eo(e,t,i){return e==null?null:bd(e)?Hw(e,t,i):Jb(e)?e:null}function cJ(e,t,i){return Jb(i)&&e>i?i:Jb(t)&&e<t?t:e}function I_e(e,t,i,r){var s;return e+((s=eo(t.minSize,i,r)||t.minDataValue)!=null?s:0)}function E_e(e,t,i){const r=e.stops;let s=r&&r.length&&r[0].size;return s==null&&(s=e.minSize),eo(s,t,i)}function M_e(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=eo(t.minSize,i,r),c=eo(t.maxSize,i,r),u=U(r)?r.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return c;if(o==null||c==null)return null;if(t.scaleBy==="area"&&u){const g=u==="circle",b=g?M3*(o/2)**2:o*o,S=b+s*((g?M3*(c/2)**2:c*c)-b);return g?2*Math.sqrt(S/M3):Math.sqrt(S)}return o+s*(c-o)}function T_e(e,t,i,r){const s=U(r)?r.shape:void 0,o=e/t.minDataValue,c=eo(t.minSize,i,r),u=eo(t.maxSize,i,r);let g=null;return g=s==="circle"?2*Math.sqrt(o*(c/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(o*c**2):o*c,cJ(g,c,u)}function C_e(e,t,i,r,s){var g,b,S;const[o,c,u]=_k(e,s);if(o===c)return eo((g=t.stops)==null?void 0:g[o].size,i,r);{const E=eo((b=t.stops)==null?void 0:b[o].size,i,r);return E+(eo((S=t.stops)==null?void 0:S[c].size,i,r)-E)*u}}function A_e(e,t,i,r){const s=(U(r)&&r.resolution?r.resolution:1)*Bw[t.valueUnit],o=eo(t.minSize,i,r),c=eo(t.maxSize,i,r),{valueRepresentation:u}=t;let g=null;return g=u==="area"?2*Math.sqrt(e/M3)/s:u==="radius"||u==="distance"?2*e/s:e/s,cJ(g,o,c)}function hJ(e,t,i,r,s){switch(t.transformationType){case Rr.Additive:return I_e(e,t,i,r);case Rr.Constant:return E_e(t,i,r);case Rr.ClampedLinear:return M_e(e,t,i,r);case Rr.Proportional:return T_e(e,t,i,r);case Rr.Stops:return C_e(e,t,i,r,s);case Rr.RealWorldSize:return A_e(e,t,i,r);case Rr.Identity:return e;case Rr.Unknown:return null}}function $_e(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let o=eo(e.minSize,sR,s),c=eo(e.maxSize,sR,s);if(o!=null||c!=null){if(o>c){const u=c;c=o,o=u}return{minSize:o,maxSize:c}}}function k_e(e,t,i){if(!e.visualVariables)return;const r=[],s=[],o=[],c=[],u=[];for(const g of e.visualVariables)switch(g.type){case"color":s.push(g);break;case"opacity":o.push(g);break;case"rotation":u.push(g);break;case"size":c.push(g)}return s.forEach(g=>{const b=lJ(g,t,i);r.push({variable:g,value:b})}),o.forEach(g=>{const b=uJ(g,t,i);r.push({variable:g,value:b})}),u.forEach(g=>{const b=wk(g,t,i);r.push({variable:g,value:b})}),c.forEach(g=>{const b=Hw(g,t,i);r.push({variable:g,value:b})}),r.filter(g=>g.value!=null)}function _k(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,o)=>e<s?(r=o,!0):(i=o,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function O_e(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const o=s.useSymbolValue?"symbol-value":Hw(s,t,i);switch(s.axis){case"width":r[0]=o;break;case"depth":r[1]=o;break;case"height":r[2]=o;break;case"width-and-depth":r[0]=o,r[1]=o;break;case"all":case void 0:case null:r[0]=o,r[1]=o,r[2]=o;break;default:s.axis}}return r}var r9=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:O_e,getColor:lJ,getOpacity:uJ,getRotationAngle:wk,getSize:Hw,getSizeForValue:hJ,getSizeFromNumberOrVariable:eo,getSizeRangeAtScale:$_e,getVisualVariableValues:k_e,viewScaleRE:aJ},Symbol.toStringTag,{value:"Module"})),JC;const B_=new It({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),YC=new It({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function nR(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Bt(e):e.type==="size"?bd(e)?e:(delete(e={...e}).type,new Xt(e)):void 0}function oR(e,t,i){if(typeof e!="object")return e;const r=new Xt;return r.read(e,i),r}let Xt=JC=class extends qw{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&aJ.test(this.valueExpression)}}set expression(e){Ie.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){bd(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),bd(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return nJ(this)}set maxDataValue(e){e&&this.stops&&(Ie.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Ie.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return nR(e)}readMaxSize(e,t,i){return oR(e,t,i)}set minDataValue(e){e&&this.stops&&(Ie.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Ie.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return nR(e)}readMinSize(e,t,i){return oR(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(Ie.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return oJ(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r&&r.messages){const s=this.index,o=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new de("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:o+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?YC.read(e):null}clone(){return new JC({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:bd(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:bd(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Rr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Rr.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};v([_({readOnly:!0})],Xt.prototype,"cache",null),v([_({type:B_.apiValues,json:{type:B_.jsonValues,origins:{"web-map":{read:!1}},read:B_.read,write:B_.write}})],Xt.prototype,"axis",void 0),v([_({type:String,value:null,json:{read:!1}})],Xt.prototype,"expression",null),v([_()],Xt.prototype,"index",null),v([_({type:String,readOnly:!0})],Xt.prototype,"inputValueType",null),v([_({type:__e,json:{write:!0}})],Xt.prototype,"legendOptions",void 0),v([_({type:Number,value:null,json:{write:!0}})],Xt.prototype,"maxDataValue",null),v([_({type:Number,value:null,json:{write:!0}})],Xt.prototype,"maxSize",null),v([_t("maxSize")],Xt.prototype,"castMaxSize",null),v([Ne("maxSize")],Xt.prototype,"readMaxSize",null),v([_({type:Number,value:null,json:{write:!0}})],Xt.prototype,"minDataValue",null),v([_({type:Number,value:null,json:{write:!0}})],Xt.prototype,"minSize",null),v([_t("minSize")],Xt.prototype,"castMinSize",null),v([Ne("minSize")],Xt.prototype,"readMinSize",null),v([_({type:String,json:{write:!0}})],Xt.prototype,"normalizationField",void 0),v([_({readOnly:!0})],Xt.prototype,"arcadeRequired",null),v([_({type:String})],Xt.prototype,"scaleBy",void 0),v([_({type:[wm],value:null,json:{write:!0}})],Xt.prototype,"stops",null),v([_({type:["outline"],json:{write:!0}})],Xt.prototype,"target",void 0),v([_({type:String,readOnly:!0})],Xt.prototype,"transformationType",null),v([_({type:["size"],json:{type:["sizeInfo"]}})],Xt.prototype,"type",void 0),v([_({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Xt.prototype,"useSymbolValue",void 0),v([_({type:String,json:{write:!0}})],Xt.prototype,"valueExpression",void 0),v([Ne("valueExpression",["valueExpression","expression"])],Xt.prototype,"readValueExpression",null),v([qe("web-scene","valueExpression")],Xt.prototype,"writeValueExpressionWebScene",null),v([_({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Xt.prototype,"valueRepresentation",void 0),v([_({type:YC.apiValues,json:{write:YC.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Xt.prototype,"valueUnit",void 0),v([Ne("valueUnit")],Xt.prototype,"readValueUnit",null),Xt=JC=v([K("esri.renderers.visualVariables.SizeVariable")],Xt);const s9=Xt,P_e={color:iJ,size:s9,opacity:rJ,rotation:sJ},F_e=new It({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),L_e=/^\[([^\]]+)\]$/i;let T3=class extends Re{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let r=null;return r=t.target===i.target?0:t.target?1:-1,r});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:r,rotationType:s}=t,o=r&&r.match(L_e),c=o&&o[1];if(c&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:c})),e)return e.map(u=>{const g=F_e.read(u.type),b=P_e[g];b||(Ie.getLogger(this.declaredClass).warn(`Unknown variable type: ${g}`),i&&i.messages&&i.messages.push(new Cn("visual-variable:unsupported",`visualVariable of type '${g}' is not supported`,{definition:u,context:i})));const S=new b;return S.read(u,i),S})}writeVariables(e,t){const i=[];for(const r of e){const s=r.toJSON(t);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};v([_()],T3.prototype,"visualVariables",null),T3=v([K("esri.renderers.visualVariables.VisualVariableFactory")],T3);const R_e=T3,N_e={base:qw,key:"type",typeMap:{opacity:rJ,color:iJ,rotation:sJ,size:s9}},Sg=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new R_e}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,o){r[s]=this._vvFactory.writeVariables(i,o)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(o=>o.type===i&&(typeof r=="string"?o.target===r:r!==!1||!o.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const o of s)o&&(o.field&&Ao(i,r,o.field),o.normalizationField&&Ao(i,r,o.normalizationField),o.valueExpression&&(D_e(o.valueExpression,i,r)||await An(i,r,o.valueExpression)))}};return v([_({types:[N_e],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),v([Ne("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),v([qe("visualVariables")],t.prototype,"writeVisualVariables",null),t=v([K("esri.renderers.mixins.VisualVariablesMixin")],t),t};function D_e(e,t,i){const r=v_e(e);return!!U(r)&&(Ao(t,i,r),!0)}const i1={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function dJ(e,t=i1){var u,g;if(!e)return{symbol:null};const{retainId:i=i1.retainId,ignoreDrivers:r=i1.ignoreDrivers,hasLabelingContext:s=i1.hasLabelingContext,retainCIM:o=i1.retainCIM}=t;let c=null;if(Ld(e)||e instanceof S0)c=e.clone();else if(e.type==="cim"){const b=(g=(u=e.data)==null?void 0:u.symbol)==null?void 0:g.type;if(b!=="CIMPointSymbol")return{error:new de("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${b||"unknown"}' is unsupported in 3D`,{symbol:e})};c=o?e.clone():Af.fromCIMSymbol(e)}else if(e instanceof sn)c=C5.fromSimpleLineSymbol(e);else if(e instanceof ca)c=Af.fromSimpleMarkerSymbol(e);else if(e instanceof $5)c=Af.fromPictureMarkerSymbol(e);else if(e instanceof fl)c=t.geometryType&&t.geometryType==="mesh"?A5.fromSimpleFillSymbol(e):Dw.fromSimpleFillSymbol(e);else{if(!(e instanceof gg))return{error:new de("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};c=s?T5.fromTextSymbol(e):Af.fromTextSymbol(e)}if(i&&c&&c.type!=="cim"&&(c.id=e.id),r&&Ld(c))for(let b=0;b<c.symbolLayers.length;++b)c.symbolLayers.getItemAt(b)._ignoreDrivers=!0;return{symbol:c}}function oS(e,t,i,r){const s=pJ(e,{},{context:r,isLabelSymbol:!1});U(s)&&(t[i]=s)}function aR(e,t,i,r){const s=pJ(e,{},{context:r,isLabelSymbol:!0});U(s)&&(t[i]=s)}function lR(e){return e instanceof yg||e instanceof S0}function pJ(e,t,i){if(ae(e))return null;const{context:r,isLabelSymbol:s}=i,o=r==null?void 0:r.origin,c=r==null?void 0:r.messages;if(o==="web-scene"&&!lR(e)){const u=dJ(e,{retainCIM:!0,hasLabelingContext:s});return U(u.symbol)?u.symbol.write(t,r):(c==null||c.push(new de("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:u.error})),null)}return(o==="web-map"||o==="portal-item"&&!TU(r==null?void 0:r.layer))&&lR(e)?(c==null||c.push(new de("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function fJ(e,t){return efe(e,null,t)}const Ig={types:O5,json:{write:{writer:oS},origins:{"web-scene":{types:dF,write:{writer:oS},read:{reader:zd({types:dF})}}}}},mJ={types:{base:no,key:"type",typeMap:{"simple-fill":Hn.typeMap["simple-fill"],"picture-fill":Hn.typeMap["picture-fill"],"polygon-3d":Hn.typeMap["polygon-3d"]}},json:{write:{writer:oS},origins:{"web-scene":{type:Dw,write:{writer:oS}}}}},C3={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var KC;let Ih=KC=class extends $e{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new KC({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};v([_({type:String,json:{write:!0}})],Ih.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],Ih.prototype,"label",void 0),v([_({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Ih.prototype,"minValue",void 0),v([_({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Ih.prototype,"maxValue",void 0),v([_(Ig)],Ih.prototype,"symbol",void 0),Ih=KC=v([K("esri.renderers.support.ClassBreakInfo")],Ih);const aS=Ih;var ZC;const yJ="log",A3="percent-of-total",$3="field",H_=new It({esriNormalizeByLog:yJ,esriNormalizeByPercentOfTotal:A3,esriNormalizeByField:$3}),j_e=Er(aS);let Or=ZC=class extends Sg(Nc){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const o=new aS;return o.read(s,i),o.minValue==null&&(o.minValue=r),o.maxValue==null&&(o.maxValue=o.minValue),r=o.maxValue,o})}writeClassBreakInfos(e,t,i,r){const s=e.map(o=>o.write({},r));this._areClassBreaksConsecutive()&&s.forEach(o=>delete o.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(Ie.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Sw(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&$3||i&&A3||null,t&&i&&Ie.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):e!==$3&&e!==A3||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new aS({minValue:e,maxValue:t,symbol:wB(i)}):j_e(ve(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(ae(t)||ae(t.arcade))&&Ie.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(ae(t)||ae(t.arcade))&&(i={...i,arcade:await pl()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(ae(t)||ae(t.arcade)))return void Ie.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ae(t)||ae(t.arcade))){const s=await pl(),{arcadeUtils:o}=s;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new ZC({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ve(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ve(this.visualVariables),legendOptions:ve(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),An(e,t,this.valueExpression)];Ao(e,t,this.field),Ao(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:o}=Qs(t,{}),{valueExpression:c}=this;let u=this._compiledValueExpression.valueExpression===c?this._compiledValueExpression.compiledFunction:null;const g=o.arcadeUtils;if(!u){const S=g.createSyntaxTree(c);u=g.createFunction(S),this._compiledValueExpression.compiledFunction=u}this._compiledValueExpression.valueExpression=c;const b=g.executeFunction(u,g.createExecContext(e,g.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._getBreakIndexfromInfos(b)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const o=this.normalizationTotal,c=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===yJ)s=Math.log(s)*Math.LOG10E;else if(r!==A3||o==null||isNaN(o)){if(r===$3&&!isNaN(c)){if(isNaN(s)||isNaN(c))return-1;s/=c}}else s=s/o*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};v([_(mJ)],Or.prototype,"backgroundFillSymbol",void 0),v([_({type:[aS]})],Or.prototype,"classBreakInfos",void 0),v([Ne("classBreakInfos")],Or.prototype,"readClassBreakInfos",null),v([qe("classBreakInfos")],Or.prototype,"writeClassBreakInfos",null),v([_({type:String,json:{write:!0}})],Or.prototype,"defaultLabel",void 0),v([_(Ig)],Or.prototype,"defaultSymbol",void 0),v([_({type:String,json:{write:!0}})],Or.prototype,"field",void 0),v([_t("field")],Or.prototype,"castField",null),v([_({type:Boolean})],Or.prototype,"isMaxInclusive",void 0),v([_({type:_y,json:{write:!0}})],Or.prototype,"legendOptions",void 0),v([_({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Or.prototype,"minValue",null),v([_({type:String,json:{write:!0}})],Or.prototype,"normalizationField",void 0),v([_({type:Number,cast:e=>ra(e),json:{write:!0}})],Or.prototype,"normalizationTotal",void 0),v([_({type:H_.apiValues,value:null,json:{type:H_.jsonValues,read:H_.read,write:H_.write}})],Or.prototype,"normalizationType",null),v([Qe({classBreaks:"class-breaks"})],Or.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Or.prototype,"valueExpression",void 0),v([_({type:String,json:{write:!0}})],Or.prototype,"valueExpressionTitle",void 0),Or=ZC=v([K("esri.renderers.ClassBreaksRenderer")],Or);const gJ=Or;class z_e{constructor(t,i){this._storage=new _W,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,r){this._storage.put(t,i,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const uR="esri.renderers.support.DictionaryLoader",V_e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class xk{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new z_e(100),this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(O){if(ro(O))return this._dictionaryPromise=null,null}const s={};if(this.fieldMap)for(const O of this._symbolFields){const L=this.fieldMap[O];if(L&&t.attributes[L]!=null){const N=""+t.attributes[L];s[O]=N}else s[O]=""}const o=r==null?void 0:r(s,i);if(!o||typeof o!="string")return null;const c=y6(o).toString(),u=this._symbolCache.get(c);if(u)return u.catch(()=>{this._symbolCache.pop(c)}),u;const g=o.split(";"),b=[],S=[];for(const O of g)if(O)if(O.includes("po:")){const L=O.substr(3).split("|");if(L.length===3){const N=L[0],z=L[1];let q=L[2];if(z==="DashTemplate")q=q.split(" ").map(Z=>Number(Z));else if(z==="Color"){const Z=new Je(q).toRgba();q=[Z[0],Z[1],Z[2],255*Z[3]]}else q=Number(q);S.push({primitiveName:N,propertyName:z,value:q})}}else if(O.includes("|")){for(const L of O.split("|"))if(this._itemNames.has(L)){b.push(L);break}}else this._itemNames.has(O)&&b.push(O);const E=!U(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",A=this._cimPartsToCIMSymbol(b,S,E,i);return this._symbolCache.put(c,A,1),A}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Ie.getLogger(uR).error("no valid URL!");const i=mi(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:U(t)?t.signal:null}),[{data:r}]=await Promise.all([i,pl()]);if(!r)throw this._dictionaryPromise=null,new de("esri.renderers.DictionaryRenderer","Bad dictionary data!");const s=r.expression,o=r.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(r.itemsNames),this._symbolFields=o.symbol;const c={};if(this.config){const b=this.config;for(const S in b)c[S]=b[S]}if(o.configuration)for(const b of o.configuration)c.hasOwnProperty(b.name)||(c[b.name]=b.value);const u=[];if(U(t)&&t.fields&&this.fieldMap)for(const b of this._symbolFields){const S=this.fieldMap[b],E=t.fields.filter(A=>A.name===S);E.length>0&&u.push({...E[0],name:b})}const g=nde(s,U(t)?t.spatialReference:null,u,c).then(b=>{const S={scale:0};return(E,A)=>{var L;if(ae(b))return null;const O=b.repurposeFeature({geometry:null,attributes:E});return S.scale=U(A)&&(L=A.scale)!=null?L:void 0,b.evaluate({$feature:O,$view:S})}}).catch(b=>(Ie.getLogger(uR).error("Creating dictinoary expression failed:",b),null));return this._dictionaryPromise=g,g}async _cimPartsToCIMSymbol(t,i,r,s){const o=new Array(t.length);for(let g=0;g<t.length;g++)o[g]=this._getSymbolPart(t[g],s);const c=await Promise.all(o),u=this.fieldMap;if(u)for(const g of c)vJ(g,u);return new kw({data:this._combineSymbolParts(c,i,r)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),s=mi(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,s);try{return(await s).data}catch(o){throw this._ongoingRequests.delete(t),o}}_combineSymbolParts(t,i,r){if(!t||t.length===0)return null;const s={...t[0]};if(t.length>1){s.symbolLayers=[];for(const o of t){const c=o;s.symbolLayers.unshift(...c.symbolLayers)}}return r&&(s.callout=V_e),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:i}}}function vJ(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let r=i.length;for(;r--;){const s=i[r];s&&s.enable!==!1&&s.type==="CIMVectorMarker"&&G_e(s,t)}}function G_e(e,t){const i=e.markerGraphics;if(i)for(const r of i){if(!r)continue;const s=r.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":vJ(s,t);break;case"CIMTextSymbol":s.fieldMap=t}}}var mze=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:xk},Symbol.toStringTag,{value:"Module"})),XC;let za=XC=class extends Sg(Nc){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new xk(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new XC({config:ve(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ve(this.fieldMap),url:ve(this.url),visualVariables:ve(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await An(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};v([_({type:xk})],za.prototype,"_loader",null),v([_({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],za.prototype,"config",void 0),v([_({type:Object,json:{write:!0}})],za.prototype,"fieldMap",void 0),v([_({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],za.prototype,"scaleExpression",void 0),v([qe("scaleExpression")],za.prototype,"writeData",null),v([_({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],za.prototype,"scaleExpressionTitle",void 0),v([_({type:String,json:{write:!0}})],za.prototype,"url",void 0),v([qe("visualVariables")],za.prototype,"writeVisualVariables",null),za=XC=v([K("esri.renderers.DictionaryRenderer")],za);const U_e=za;var QC;let zu=QC=class extends $e{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Ie.getLogger(this.declaredClass).error(".field: field must be a string value"),null):Sw(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new QC({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([_({type:Je,json:{type:[Number],write:!0}})],zu.prototype,"color",void 0),v([_({type:String,json:{write:!0}})],zu.prototype,"field",void 0),v([_t("field")],zu.prototype,"castField",null),v([_({type:String,json:{write:!0}})],zu.prototype,"label",void 0),v([_({type:String,json:{write:!0}})],zu.prototype,"valueExpression",void 0),v([_({type:String,json:{write:!0}})],zu.prototype,"valueExpressionTitle",void 0),zu=QC=v([K("esri.renderers.support.AttributeColorInfo")],zu);const bJ=zu;var eA;let k3=eA=class extends $e{constructor(){super(...arguments),this.unit=null}clone(){return new eA({unit:this.unit})}};v([_({type:String,json:{write:!0}})],k3.prototype,"unit",void 0),k3=eA=v([K("esri.renderers.support.DotDensityLegendOptions")],k3);const q_e=k3;var tA;let zn=tA=class extends Sg(Nc){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Je([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new sn,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new fl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e,t;return(t=(e=this.attributes)==null?void 0:e.reduce((i,r)=>i+r.getAttributeHash(),""))!=null?t:""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new tA({attributes:ve(this.attributes),backgroundColor:ve(this.backgroundColor),dotBlendingEnabled:ve(this.dotBlendingEnabled),dotShape:ve(this.dotShape),dotSize:ve(this.dotSize),dotValue:ve(this.dotValue),legendOptions:ve(this.legendOptions),outline:ve(this.outline),referenceScale:ve(this.referenceScale),visualVariables:ve(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){var i;await this.collectVVRequiredFields(e,t);for(const r of(i=this.attributes)!=null?i:[])r.valueExpression&&await An(e,t,r.valueExpression),r.field&&e.add(r.field)}};v([_({type:[bJ],json:{write:!0}})],zn.prototype,"attributes",void 0),v([_({type:Je,json:{write:!0}})],zn.prototype,"backgroundColor",void 0),v([_({type:Boolean,json:{write:!0}})],zn.prototype,"dotBlendingEnabled",void 0),v([_({type:String,json:{write:!1}})],zn.prototype,"dotShape",void 0),v([_({type:Number,json:{write:!0}})],zn.prototype,"dotSize",void 0),v([_({type:q_e,json:{write:!0}})],zn.prototype,"legendOptions",void 0),v([_({type:sn,json:{default:null,write:!0}})],zn.prototype,"outline",void 0),v([_({type:Number,json:{write:!0}})],zn.prototype,"dotValue",void 0),v([_({type:Number,json:{write:!0}})],zn.prototype,"referenceScale",void 0),v([_({type:Number,json:{write:!0}})],zn.prototype,"seed",void 0),v([Qe({dotDensity:"dot-density"})],zn.prototype,"type",void 0),zn=tA=v([K("esri.renderers.DotDensityRenderer")],zn);const B_e=zn;let _m=class extends Ni($e){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};v([_({type:String,json:{write:!0}})],_m.prototype,"minLabel",void 0),v([_({type:String,json:{write:!0}})],_m.prototype,"maxLabel",void 0),v([_({type:String,json:{write:!0}})],_m.prototype,"title",void 0),_m=v([K("esri.renderers.support.HeatmapLegendOptions")],_m);function n9(){return[0,0,0,0]}function H_e(e){return[e[0],e[1],e[2],e[3]]}function Eg(e,t,i,r){return[e,t,i,r]}function W_e(e){const t=n9(),i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function J_e(e,t){return new Float64Array(e,t,4)}function wJ(){return n9()}function _J(){return Eg(1,1,1,1)}function xJ(){return Eg(1,0,0,0)}function SJ(){return Eg(0,1,0,0)}function IJ(){return Eg(0,0,1,0)}function EJ(){return Eg(0,0,0,1)}const Y_e=wJ(),K_e=_J(),Z_e=xJ(),X_e=SJ(),Q_e=IJ(),e2e=EJ();Object.freeze(Object.defineProperty({__proto__:null,ONES:K_e,UNIT_W:e2e,UNIT_X:Z_e,UNIT_Y:X_e,UNIT_Z:Q_e,ZEROS:Y_e,clone:H_e,create:n9,createView:J_e,fromArray:W_e,fromValues:Eg,ones:_J,unitW:EJ,unitX:xJ,unitY:SJ,unitZ:IJ,zeros:wJ},Symbol.toStringTag,{value:"Module"}));const Sk=2.4;function t2e(e){return $o(e*Sk)}function i2e(e){return Is(e)/Sk}function r2e(e,t,i,r){let{color:s,ratio:o}=t,{color:c,ratio:u}=i;u===o&&(u===1?o-=1e-6:u+=1e-6);const g=so((r-o)/(u-o),0,1);KU(e,s.toArray(),c.toArray(),g)}function yze(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:u})=>u>=0&&u<=1).sort((u,g)=>u.ratio-g.ratio).map(({color:u,ratio:g})=>({color:u,ratio:Math.max(g,.001)})),e.length<1)return i;let r=e[0],s=e[0],o=1;const c=n9();for(let u=0;u<512;u++){const g=(u+.5)/512;for(;g>s.ratio&&o<e.length;)r=s,s=e[o++];r2e(c,r,s,g),i.set(c,4*u)}return i}function gze(e,t,i,r){const{radius:s,fieldOffset:o,field:c}=t,u=Math.round(Is(s)),g=new Float64Array(i*r);let b,S=Number.NEGATIVE_INFINITY;const E=o2e(c,o),A=new Set;for(const O of e){const L=O.getCursor();for(;L.next();){const N=L.getObjectId();if(A.has(N))continue;A.add(N);const z=L.readLegacyPointGeometry(),q=128;if(z.x<-q||z.x>=i+q||z.y<-q||z.y>r+q)continue;const Z=+E(L),ee=Math.max(0,Math.round(z.x)-u),ie=Math.max(0,Math.round(z.y)-u),ne=Math.min(r,Math.round(z.y)+u),oe=Math.min(i,Math.round(z.x)+u);for(let me=ie;me<ne;me++)for(let fe=ee;fe<oe;fe++){const Ce=me*i+fe,_e=n2e(z.x-fe,z.y-me,u);b=g[Ce]+=_e*Z,b>S&&(S=b)}}}return{matrix:g.buffer,max:S}}function vze(e,t,i,r,s,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const c=e.getImageData(0,0,t,t);i&&r&&c.data.set(new Uint8ClampedArray(s2e(t,i,r,s,o))),e.putImageData(c,0,0)}function s2e(e,t,i,r,s){const o=new Uint32Array(e*e),c="buffer"in t?t:new Float64Array(t),u="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),g=u.length/(s-r);for(let b=0;b<c.length;b++){const S=c[b],E=Math.floor((S-r)*g);o[b]=u[so(E,0,u.length-1)]}return o.buffer}function n2e(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function bze(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function o2e(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var iA;const MJ="esri.renderers.HeatmapRenderer",a2e=Ie.getLogger(MJ);function cR(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:o,minPixelIntensity:c,...u}=e;return u}}return e}let Zr=iA=class extends Nc{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new Jv({ratio:0,color:new Je("rgba(255, 140, 0, 0)")}),new Jv({ratio:.75,color:new Je("rgba(255, 140, 0, 1)")}),new Jv({ratio:.9,color:new Je("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return cR(e)}get blurRadius(){return i2e(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",t2e(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(Sk**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||rn(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,ug(()=>{U4(a2e,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=cR(e),super.read(e,t)}getSymbol(){return new ca}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&await Ao(e,t,i),r&&typeof r=="string"&&await An(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new iA({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:ve(this.colorStops),field:this.field,legendOptions:ve(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([_({type:bk,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Zr.prototype,"authoringInfo",void 0),v([_({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Zr.prototype,"blurRadius",null),v([_({type:[Jv],json:{write:!0}})],Zr.prototype,"colorStops",void 0),v([_({type:String,json:{write:!0}})],Zr.prototype,"field",void 0),v([_({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Zr.prototype,"fieldOffset",void 0),v([_({type:_m,json:{write:!0}})],Zr.prototype,"legendOptions",void 0),v([_({type:Number,json:{write:!0}})],Zr.prototype,"maxDensity",void 0),v([_({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Zr.prototype,"maxPixelIntensity",null),v([_({type:Number,json:{write:!0}})],Zr.prototype,"minDensity",void 0),v([_({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Zr.prototype,"minPixelIntensity",null),v([_({type:Number,cast:Bt,json:{write:!0}})],Zr.prototype,"radius",void 0),v([_({type:Number,range:{min:0},json:{default:0,write:!0}})],Zr.prototype,"referenceScale",void 0),v([Qe({heatmap:"heatmap"})],Zr.prototype,"type",void 0),v([_({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Zr.prototype,"valueExpression",void 0),v([_({type:String})],Zr.prototype,"valueExpressionTitle",void 0),v([_({readOnly:!0})],Zr.prototype,"_pixelIntensityToDensity",null),Zr=iA=v([K(MJ)],Zr);const TJ=Zr;let yf=class extends Ni($e){constructor(){super(...arguments),this.color=new Je([0,0,0,0]),this.label=null,this.threshold=0}};v([_({type:Je,json:{write:!0}})],yf.prototype,"color",void 0),v([_({type:String,json:{write:!0}})],yf.prototype,"label",void 0),v([_({type:Number,range:{min:0,max:1},json:{write:!0}})],yf.prototype,"threshold",void 0),yf=v([K("esri.renderers.support.OthersCategory")],yf);let O3=class extends Ni($e){constructor(){super(...arguments),this.title=null}};v([_({type:String,json:{write:!0}})],O3.prototype,"title",void 0),O3=v([K("esri.renderers.support.PieChartLegendOptions")],O3);let yo=class extends Sg(Ni(Nc)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Je([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new yf,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new ca({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(U)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await An(e,t,i.valueExpression),i.field&&e.add(i.field)}};v([_({type:[bJ],json:{write:!0}})],yo.prototype,"attributes",void 0),v([_({type:fl,json:{default:null,write:!0}})],yo.prototype,"backgroundFillSymbol",void 0),v([_({type:Je,json:{write:!0}})],yo.prototype,"defaultColor",void 0),v([_({type:String,json:{write:!0}})],yo.prototype,"defaultLabel",void 0),v([_({type:Number,range:{min:0,max:1},json:{write:!0}})],yo.prototype,"holePercentage",void 0),v([_({type:yf,json:{write:!0}})],yo.prototype,"othersCategory",void 0),v([_({type:O3,json:{write:!0}})],yo.prototype,"legendOptions",void 0),v([_({type:sn,json:{default:null,write:!0}})],yo.prototype,"outline",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],yo.prototype,"size",void 0),v([Qe({pieChart:"pie-chart"})],yo.prototype,"type",void 0),yo=v([K("esri.renderers.PieChartRenderer")],yo);const l2e=yo;var rA;let jp=rA=class extends Sg(Nc){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new rA({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ve(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};v([_({type:String,json:{write:!0}})],jp.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],jp.prototype,"label",void 0),v([_(Ig)],jp.prototype,"symbol",void 0),v([Qe({simple:"simple"})],jp.prototype,"type",void 0),jp=rA=v([K("esri.renderers.SimpleRenderer")],jp);const Gy=jp,u2e=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function sA(e){return e instanceof Re}function hR(e){return e instanceof Be?Object.keys(e.items):sA(e)?rn(e).keys():e?Object.keys(e):[]}function W_(e,t){return e instanceof Be?e.items[t]:e[t]}function c2e(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Zv(e){return e?e.declaredClass:null}function CJ(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=hR(e),s=hR(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||c2e(e,t))return{type:"complete",oldValue:e,newValue:t};const o=s.filter(E=>!r.includes(E)),c=r.filter(E=>!s.includes(E)),u=r.filter(E=>s.includes(E)&&W_(e,E)!==W_(t,E)).concat(o,c).sort(),g=Zv(e);if(g&&u2e.includes(g)&&u.length)return{type:"complete",oldValue:e,newValue:t};let b;const S=sA(e)&&sA(t);for(const E of u){const A=W_(e,E),O=W_(t,E);let L;if((S||typeof A!="function"&&typeof O!="function")&&A!==O&&(A!=null||O!=null)){if(i&&i[E]&&typeof i[E]=="function")L=i[E](A,O);else if(A instanceof Date&&O instanceof Date){if(A.getTime()===O.getTime())continue;L={type:"complete",oldValue:A,newValue:O}}else L=typeof A=="object"&&typeof O=="object"&&Zv(A)===Zv(O)?CJ(A,O):{type:"complete",oldValue:A,newValue:O};U(L)&&(U(b)?b.diff[E]=L:b={type:"partial",diff:{[E]:L}})}}return b}function h2e(e,t){if(ae(e))return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const o=r.diff[s];if(!o)return!1;r=o}}return!0}function wze(e,t){for(const i of t)if(h2e(e,i))return!0;return!1}function AJ(e,t){if(!(typeof e=="function"||typeof t=="function"||ae(e)&&ae(t)))return ae(e)||ae(t)||typeof e=="object"&&typeof t=="object"&&Zv(e)!==Zv(t)?{type:"complete",oldValue:e,newValue:t}:CJ(e,t)}function J_(e){if(ae(e))return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const i of t.added)if(!J_(i))return!1;for(const i of t.removed)if(!J_(i))return!1;for(const i of t.changed)if(!J_(i))return!1;return!0}case"partial":for(const t in e.diff)if(!J_(e.diff[t]))return!1;return!0}}let xm=class extends Ni($e){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};v([_(C3)],xm.prototype,"value",void 0),v([_(C3)],xm.prototype,"value2",void 0),v([_(C3)],xm.prototype,"value3",void 0),xm=v([K("esri.renderers.support.UniqueValue")],xm);const xy=xm;let Eh=class extends Ni($e){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return t==="string"||t==="number"?e.map(i=>new xy({value:i})):t==="object"?e[0]instanceof xy?e:e.map(i=>new xy(i)):null}};v([_({type:String,json:{write:!0}})],Eh.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],Eh.prototype,"label",void 0),v([_(Ig)],Eh.prototype,"symbol",void 0),v([_({type:[xy],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new xy({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const s=[r.value,r.value2,r.value3].filter(U).map(o=>o.toString());i.push(s)}t.values=i}}}})],Eh.prototype,"values",void 0),v([_t("values")],Eh.prototype,"castValues",null),Eh=v([K("esri.renderers.support.UniqueValueClass")],Eh);const $J=Eh;let rv=class extends Ni($e){constructor(e){super(e),this.heading=null,this.classes=null}};v([_({type:String,json:{write:!0}})],rv.prototype,"heading",void 0),v([_({type:[$J],json:{write:!0}})],rv.prototype,"classes",void 0),rv=v([K("esri.renderers.support.UniqueValueGroup")],rv);const nA=rv;var oA;let zp=oA=class extends $e{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new oA({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};v([_({type:String,json:{write:!0}})],zp.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],zp.prototype,"label",void 0),v([_(Ig)],zp.prototype,"symbol",void 0),v([_(C3)],zp.prototype,"value",void 0),zp=oA=v([K("esri.renderers.support.UniqueValueInfo")],zp);const Xv=zp,d2e=()=>!!Se("enable-feature:force-wosr"),_ze=()=>!!Se("enable-feature:SceneLayer-editing");let tE={};async function p2e(e,t){try{return{data:(await Ik(e,t)).data,baseUrl:j6(e),styleUrl:e}}catch(i){return Jl(i),null}}function f2e(e,t,i){const r=U(t.portal)?t.portal:Ts.getDefault();let s;const o=`${r.url} - ${r.user&&r.user.username} - ${e}`;return tE[o]||(tE[o]=m2e(e,r,i).then(c=>(s=c,c.fetchData())).then(c=>{var u;return{data:c,baseUrl:(u=s.itemUrl)!=null?u:"",styleName:e}})),tE[o]}function m2e(e,t,i){return t.load(i).then(()=>{const r=new cc({disableExtraQuery:!0,query:`owner:${dR} AND type:${pR} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var c;let s=null;const o=e.toLowerCase();if(r&&Array.isArray(r)){for(const u of r)if(((c=u.typeKeywords)==null?void 0:c.some(b=>b.toLowerCase()===o))&&u.type===pR&&u.owner===dR){s=u;break}}if(!s)throw new de("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function kJ(e,t,i){return e&&U(e.styleUrl)?p2e(e.styleUrl,i):e&&U(e.styleName)?f2e(e.styleName,t,i):Promise.reject(new de("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function OJ(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function y2e(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!d2e()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function Ik(e,t){const i={responseType:"json",query:{f:"json"},...t};return mi(ll(e),i)}const dR="esri_en",pR="Style",g2e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var sv;const PJ="esri.renderers.UniqueValueRenderer",Qc=Ie.getLogger(PJ),fR="uvInfos-watcher",mR="uvGroups-watcher",v2e=",",b2e=Er(Xv);function w2e(e){const{field1:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:o,valueExpression:c}=e,u=!(!t||!i);return[{classes:(o!=null?o:[]).map(g=>{var q;const{symbol:b,label:S,value:E,description:A}=g,[O,L,N]=u?((q=E==null?void 0:E.toString())==null?void 0:q.split(s||""))||[]:[E],z=[];return(t||c)&&z.push(O),i&&z.push(L),r&&z.push(N),{symbol:b,label:S,values:[z],description:A}})}]}let Xi=sv=class extends Sg(Nc){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let o=0;o<i.length;o++){const c=t.find(u=>u.value===i[o].value);c?AJ(c,i[o])?(s.changed.push({type:"complete",oldValue:c,newValue:i[o]}),r=!0):s.unchanged.push({oldValue:c,newValue:i[o]}):(s.added.push(i[o]),r=!0)}for(let o=0;o<t.length;o++)i.find(c=>c.value===t[o].value)||(s.removed.push(t[o]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:Sw(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r&&r.messages?r.messages.push(new de("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Qc.error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||Ts.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=Fd(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Rw(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Qc.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Qc.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void Qc.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?b2e(e):new Xv({value:e,symbol:wB(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Qc.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t){for(let i=0;i<t.length;i++)if(t[i].value===e+""){delete this._valueInfoMap[e],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(ae(t)||ae(t.arcade))&&(i={...i,arcade:await pl()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(ae(t)||ae(t.arcade)))return void Qc.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(ae(i)||ae(i.arcade))){const s=await pl(),{arcadeUtils:o}=s;o.hasGeometryOperations(this.valueExpression)&&await o.enableGeometryOperations(),i={...i,arcade:s}}const r=this._getUniqueValueInfo(e,i);return r&&r.symbol||this.defaultSymbol}getSymbols(){var t;const e=[];for(const i of(t=this.uniqueValueInfos)!=null?t:[])i.symbol&&e.push(i.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((s,o)=>s+o.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new sv({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ve(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ve(this.visualVariables),legendOptions:ve(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ve(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=ve(this.uniqueValueInfos),i=ve(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(ve(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),An(e,t,this.valueExpression)];Ao(e,t,this.field),Ao(e,t,this.field2),Ao(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return kJ(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const s=new S0({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const o=new Xv({value:r.name,symbol:s});t.push(o),this._valueInfoMap[r.name]=o}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)==null?void 0:i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",v2e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(fR);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(ge(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,fR)}}_watchUniqueValueGroups(){var t;this.removeHandles(mR);const{uniqueValueGroups:e}=this;if(e){const i=[];for(const r of e){i.push(ge(()=>({classes:r.classes}),(s,o)=>{s!==o&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const s of(t=r.classes)!=null?t:[])i.push(ge(()=>({symbol:s.symbol,values:s.values,label:s.label,description:s.description}),(o,c)=>{o!==c&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(i,mR)}}_updateInfosFromGroups(){var g;if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:o,valueExpression:c}=this;if(!t&&!c)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const u=!(!t||!i);for(const b of o)for(const S of(g=b.classes)!=null?g:[]){const{symbol:E,label:A,values:O,description:L}=S;for(const N of O!=null?O:[]){const{value:z,value2:q,value3:Z}=N,ee=[z];i&&ee.push(q),r&&ee.push(Z);const ie=u?ee.join(s||""):ee[0];e.push(new Xv({symbol:E,label:A,value:ie,description:L}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:o}=this;if(!t&&!r||!o.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const c=!(!t||!i),u=o.map(b=>{var q;const{symbol:S,label:E,value:A,description:O}=b,[L,N,z]=c?((q=A==null?void 0:A.toString())==null?void 0:q.split(s||""))||[]:[A];return new $J({symbol:S,label:E,description:O,values:[new xy({value:L,value2:N,value3:z})]})}),g=[new nA({classes:u})];e&&Object.freeze(g),this._set("uniqueValueGroups",g),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:o}=Qs(t,{});let c=this._cache.compiledFunc;const u=o.arcadeUtils;if(!c){const b=u.createSyntaxTree(this.valueExpression);c=u.createFunction(b),this._cache.compiledFunc=c}const g=u.executeFunction(c,u.createExecContext(e,u.getViewInfo({viewingMode:i,scale:r,spatialReference:s})));return this._valueInfoMap[g+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(typeof t!="function"&&this.field2){const s=this.field2,o=this.field3,c=[];t&&c.push(i[t]),s&&c.push(i[s]),o&&c.push(i[o]),r=c.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=i[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const i=new sv(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Ts.getDefault());const r=i.populateFromStyle();return r.catch(s=>{Qc.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new sv(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{Qc.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};v([_({readOnly:!0})],Xi.prototype,"_cache",null),v([Qe({uniqueValue:"unique-value"})],Xi.prototype,"type",void 0),v([_(mJ)],Xi.prototype,"backgroundFillSymbol",void 0),v([_({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Xi.prototype,"field",null),v([_t("field")],Xi.prototype,"castField",null),v([qe("field")],Xi.prototype,"writeField",null),v([_({type:String,value:null,json:{write:!0}})],Xi.prototype,"field2",null),v([_({type:String,value:null,json:{write:!0}})],Xi.prototype,"field3",null),v([_({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Xi.prototype,"orderByClassesEnabled",void 0),v([_({type:String,value:null,json:{write:!0}})],Xi.prototype,"valueExpression",null),v([_({type:String,json:{write:!0}})],Xi.prototype,"valueExpressionTitle",void 0),v([_({type:_y,json:{write:!0}})],Xi.prototype,"legendOptions",void 0),v([_({type:String,json:{write:!0}})],Xi.prototype,"defaultLabel",void 0),v([_(qV({...Ig},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Xi.prototype,"defaultSymbol",null),v([_({type:String,value:null,json:{write:!0}})],Xi.prototype,"fieldDelimiter",null),v([_({type:Ts,readOnly:!0})],Xi.prototype,"portal",void 0),v([Ne("portal",["styleName"])],Xi.prototype,"readPortal",null),v([_({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Xi.prototype,"styleOrigin",void 0),v([Ne("styleOrigin",["styleName","styleUrl"])],Xi.prototype,"readStyleOrigin",null),v([qe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Xi.prototype,"writeStyleOrigin",null),v([_({type:[nA],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||w2e(t)).map(r=>nA.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Xi.prototype,"uniqueValueGroups",null),v([_({type:[Xv],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Xi.prototype,"uniqueValueInfos",null),Xi=sv=v([K(PJ)],Xi);const Ww=Xi,o9={key:"type",base:Nc,typeMap:{heatmap:TJ,simple:Gy,"unique-value":Ww,"class-breaks":gJ,"dot-density":B_e,dictionary:U_e,"pie-chart":l2e},errorContext:"renderer"},_2e={key:"type",base:Nc,typeMap:{simple:Gy,"unique-value":Ww,"class-breaks":gJ,heatmap:TJ},errorContext:"renderer"};function xze(e,t){return Yb(e,null,t)}const x2e=zd({types:o9});function Yb(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Cn("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):x2e(e,t,i):null}class Ek{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(V4),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new Ek,r=this._originStores[Ot.DEFAULTS];r&&r.forEach((s,o)=>{i.set(o,ve(s),Ot.DEFAULTS)});for(let s=Ot.SERVICE;s<V4;s++){const o=this._originStores[s];o&&o.forEach((c,u)=>{t&&t.has(u)||i.set(u,ve(c),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=Ot.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const o=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),o!==i}return!1}delete(t,i=Ot.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let o=i-1;o>=0;o--){const c=this._originStores[o];if(c&&c.has(t)){this._values.set(t,c.get(t)),this._propertyOriginMap.set(t,o);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r&&r.get(t),o=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),o!==s}originOf(t){return this._propertyOriginMap.get(t)||Ot.DEFAULTS}forEach(t){this._values.forEach(t)}}const FJ=e=>{let t=class extends e{constructor(...i){super(...i);const r=rn(this),s=r.store,o=new Ek;r.store=o,FG(r,s,o)}read(i,r){RG(this,i,r)}getAtOrigin(i,r){const s=iE(this),o=dd(r);if(typeof i=="string")return s.get(i,o);const c={};return i.forEach(u=>{c[u]=s.get(u,o)}),c}originOf(i){return cx(this.originIdOf(i))}originIdOf(i){return iE(this).originOf(i)}revert(i,r){const s=iE(this),o=dd(r),c=rn(this);let u;u=typeof i=="string"?i==="*"?s.keys(o):[i]:i,u.forEach(g=>{c.invalidate(g),s.revert(g,o),c.commit(g)})}};return t=v([K("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function iE(e){return rn(e).store}let yR=class extends FJ(Re){};yR=v([K("esri.core.ReadOnlyMultiOriginJSONSupport")],yR);const S2e=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return rE(this).delete(i,dd(r))}write(i={},r){return DG(this,i=i||{},r),i}setAtOrigin(i,r,s){rn(this).setAtOrigin(i,r,dd(s))}removeOrigin(i){const r=rE(this),s=dd(i),o=r.keys(s);for(const c of o)r.originOf(c)===s&&r.set(c,r.get(c,s),Ot.USER)}updateOrigin(i,r){const s=rE(this),o=dd(r),c=this.get(i);for(let u=o+1;u<V4;++u)s.delete(i,u);s.set(i,c,o)}toJSON(i){return this.write({},i)}};return t=v([K("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function rE(e){return rn(e).store}const LJ=e=>{let t=class extends S2e(FJ(e)){constructor(...i){super(...i)}};return t=v([K("esri.core.MultiOriginJSONSupport")],t),t};let gR=class extends LJ(Re){};gR=v([K("esri.core.MultiOriginJSONSupport")],gR);async function I2e(e,t){const{WhereClause:i}=await pe(()=>Promise.resolve().then(function(){return Uee}),void 0);return i.create(e,t)}function E2e(e,t){return U(e)?U(t)?`(${e}) AND (${t})`:e:t}var aA;let Vp=aA=class extends $e{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new aA({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([_({type:String,json:{write:!0}})],Vp.prototype,"expression",void 0),v([_({type:String,json:{write:!0}})],Vp.prototype,"name",void 0),v([_({type:["boolean","date","number","string"],json:{write:!0}})],Vp.prototype,"returnType",void 0),v([_({type:String,json:{write:!0}})],Vp.prototype,"title",void 0),Vp=aA=v([K("esri.form.ExpressionInfo")],Vp);const M2e=Vp;let Gp=class extends $e{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};v([_({type:String,json:{write:!0}})],Gp.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],Gp.prototype,"label",void 0),v([_()],Gp.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Gp.prototype,"visibilityExpression",void 0),Gp=v([K("esri.form.elements.Element")],Gp);const Uy=Gp;var lA;let P3=lA=class extends $e{constructor(e){super(e),this.type=null}clone(){return new lA({type:this.type})}};v([_({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],P3.prototype,"type",void 0),P3=lA=v([K("esri.form.elements.inputs.AttachmentInput")],P3);const T2e=P3;var uA;let Up=uA=class extends Uy{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new uA({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};v([_({type:String,json:{write:!0}})],Up.prototype,"attachmentKeyword",void 0),v([_({type:Boolean,json:{write:!0}})],Up.prototype,"editable",void 0),v([_({type:T2e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Up.prototype,"input",void 0),v([_({type:["attachment"],json:{read:!1,write:!0}})],Up.prototype,"type",void 0),Up=uA=v([K("esri.form.elements.AttachmentElement")],Up);const vR=Up;let F3=class extends $e{constructor(e){super(e),this.type=null}};v([_()],F3.prototype,"type",void 0),F3=v([K("esri.form.elements.inputs.Input")],F3);const Mg=F3;let nv=class extends Mg{constructor(e){super(e),this.maxLength=null,this.minLength=0}};v([_({type:Number,json:{write:!0}})],nv.prototype,"maxLength",void 0),v([_({type:Number,json:{write:!0}})],nv.prototype,"minLength",void 0),nv=v([K("esri.form.elements.inputs.TextInput")],nv);const Mk=nv;var cA;let L3=cA=class extends Mk{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new cA({maxLength:this.maxLength,minLength:this.minLength})}};v([_({type:["barcode-scanner"],json:{read:!1,write:!0}})],L3.prototype,"type",void 0),L3=cA=v([K("esri.form.elements.inputs.BarcodeScannerInput")],L3);const C2e=L3;var hA;let Sm=hA=class extends Mg{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new hA({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};v([_({type:String,json:{write:!0}})],Sm.prototype,"noValueOptionLabel",void 0),v([_({type:Boolean,json:{write:!0}})],Sm.prototype,"showNoValueOption",void 0),v([_({type:["combo-box"],json:{read:!1,write:!0}})],Sm.prototype,"type",void 0),Sm=hA=v([K("esri.form.elements.inputs.ComboBoxInput")],Sm);const A2e=Sm;var dA;function bR(e){return e!=null?new Date(e):null}function wR(e){return e?e.getTime():null}let Va=dA=class extends Mg{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return bR(t.max)}writeMax(e,t){t.max=wR(e)}readMin(e,t){return bR(t.min)}writeMin(e,t){t.min=wR(e)}clone(){return new dA({includeTime:this.includeTime,max:this.max,min:this.min})}};v([_({type:Boolean,json:{write:!0}})],Va.prototype,"includeTime",void 0),v([_({type:Date,json:{type:Number,write:!0}})],Va.prototype,"max",void 0),v([Ne("max")],Va.prototype,"readMax",null),v([qe("max")],Va.prototype,"writeMax",null),v([_({type:Date,json:{type:Number,write:!0}})],Va.prototype,"min",void 0),v([Ne("min")],Va.prototype,"readMin",null),v([qe("min")],Va.prototype,"writeMin",null),v([_({type:["datetime-picker"],json:{read:!1,write:!0}})],Va.prototype,"type",void 0),Va=dA=v([K("esri.form.elements.inputs.DateTimePickerInput")],Va);const $2e=Va;var pA;let Im=pA=class extends Mg{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new pA({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};v([_({type:String,json:{write:!0}})],Im.prototype,"noValueOptionLabel",void 0),v([_({type:Boolean,json:{write:!0}})],Im.prototype,"showNoValueOption",void 0),v([_({type:["radio-buttons"],json:{read:!1,write:!0}})],Im.prototype,"type",void 0),Im=pA=v([K("esri.form.elements.inputs.RadioButtonsInput")],Im);const k2e=Im;var fA;let Em=fA=class extends Mg{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new fA({offValue:this.offValue,onValue:this.onValue})}};v([_({type:[String,Number],json:{write:!0}})],Em.prototype,"offValue",void 0),v([_({type:[String,Number],json:{write:!0}})],Em.prototype,"onValue",void 0),v([_({type:["switch"],json:{read:!1,write:!0}})],Em.prototype,"type",void 0),Em=fA=v([K("esri.form.elements.inputs.SwitchInput")],Em);const O2e=Em;var mA;let R3=mA=class extends Mk{constructor(e){super(e),this.type="text-area"}clone(){return new mA({maxLength:this.maxLength,minLength:this.minLength})}};v([_({type:["text-area"],json:{read:!1,write:!0}})],R3.prototype,"type",void 0),R3=mA=v([K("esri.form.elements.inputs.TextAreaInput")],R3);const P2e=R3;var yA;let N3=yA=class extends Mk{constructor(e){super(e),this.type="text-box"}clone(){return new yA({maxLength:this.maxLength,minLength:this.minLength})}};v([_({type:["text-box"],json:{read:!1,write:!0}})],N3.prototype,"type",void 0),N3=yA=v([K("esri.form.elements.inputs.TextBoxInput")],N3);const F2e=N3,L2e={base:Mg,key:"type",typeMap:{"barcode-scanner":C2e,"combo-box":A2e,"datetime-picker":$2e,"radio-buttons":k2e,switch:O2e,"text-area":P2e,"text-box":F2e}};var gA;const RJ="esri.form.elements.FieldElement",_R=Ie.getLogger(RJ);let Yo=gA=class extends Uy{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){var e;return U4(_R,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),(e=this._get("editable"))!=null?e:!0}set editable(e){U4(_R,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",e)}clone(){return new gA({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};v([_({types:FW,json:{read:{reader:Q5},write:!0}})],Yo.prototype,"domain",void 0),v([_({type:Boolean,json:{write:!0}})],Yo.prototype,"editable",null),v([_({type:String,json:{write:!0}})],Yo.prototype,"editableExpression",void 0),v([_({type:String,json:{write:!0}})],Yo.prototype,"fieldName",void 0),v([_({type:String,json:{write:!0}})],Yo.prototype,"hint",void 0),v([_({types:L2e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Yo.prototype,"input",void 0),v([_({type:String,json:{write:!0}})],Yo.prototype,"requiredExpression",void 0),v([_({type:String,json:{read:!1,write:!0}})],Yo.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Yo.prototype,"valueExpression",void 0),Yo=gA=v([K(RJ)],Yo);const xR=Yo;var vA;let Vu=vA=class extends Uy{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new vA({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:ve(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};v([_({type:Number,json:{write:!0}})],Vu.prototype,"displayCount",void 0),v([_({type:["list"],json:{write:!0}})],Vu.prototype,"displayType",void 0),v([_({type:Boolean,json:{write:!0}})],Vu.prototype,"editable",void 0),v([_({type:[g7],json:{write:!0}})],Vu.prototype,"orderByFields",void 0),v([_({type:Number,json:{write:!0}})],Vu.prototype,"relationshipId",void 0),v([_({type:["relationship"],json:{read:!1,write:!0}})],Vu.prototype,"type",void 0),Vu=vA=v([K("esri.form.elements.RelationshipElement")],Vu);const SR=Vu;function NJ(e){return{typesWithGroup:{base:Uy,key:"type",typeMap:{attachment:vR,field:xR,group:e,relationship:SR}},typesWithoutGroup:{base:Uy,key:"type",typeMap:{attachment:vR,field:xR,relationship:SR}}}}function DJ(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function jJ(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function zJ(e,t,i=!0){return e?e.map(r=>iu(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var bA;let ql=bA=class extends Uy{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return zJ(e,sE,!1)}readElements(e,t){return DJ(t.formElements,sE,!1)}writeElements(e,t){t.formElements=jJ(e,sE,!1)}clone(){return new bA({description:this.description,elements:ve(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};v([_({json:{write:!0}})],ql.prototype,"elements",void 0),v([_t("elements")],ql.prototype,"castElements",null),v([Ne("elements",["formElements"])],ql.prototype,"readElements",null),v([qe("elements")],ql.prototype,"writeElements",null),v([_({type:["collapsed","expanded"],json:{write:!0}})],ql.prototype,"initialState",void 0),v([_({type:String,json:{read:!1,write:!0}})],ql.prototype,"type",void 0),ql=bA=v([K("esri.form.elements.GroupElement")],ql);const sE=NJ(ql),R2e=ql;var wA;const nE=NJ(R2e);let Ga=wA=class extends $e{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return zJ(e,nE)}readElements(e,t){return DJ(t.formElements,nE)}writeElements(e,t){t.formElements=jJ(e,nE)}clone(){return new wA({description:this.description,expressionInfos:ve(this.expressionInfos),elements:ve(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};v([_({type:String,json:{write:!0}})],Ga.prototype,"description",void 0),v([_({json:{write:!0}})],Ga.prototype,"elements",void 0),v([_t("elements")],Ga.prototype,"castElements",null),v([Ne("elements",["formElements"])],Ga.prototype,"readElements",null),v([qe("elements")],Ga.prototype,"writeElements",null),v([_({type:[M2e],json:{write:!0}})],Ga.prototype,"expressionInfos",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],Ga.prototype,"preserveFieldValuesWhenHidden",void 0),v([_({type:String,json:{write:!0}})],Ga.prototype,"title",void 0),Ga=wA=v([K("esri.form.FormTemplate")],Ga);const VJ=Ga;function IR(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function N2e(e,t,i){if(!e&&!t||!i)return;const r=ky(i);ER(e,i,r),ER(t,i,r)}function ER(e,t,i){if(e)for(const r of e)D2e(r.geometry,t,i)}function D2e(e,t,i){if(ae(e)||!e.spatialReference||Hi(e.spatialReference,t))return;const r=ky(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)IR(e,e.rings,r);else if("paths"in e)IR(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}let j2e=0;const GJ="esri.layers.graphics.sources.MemorySource",oE=Ie.getLogger(GJ);let Qu=class extends ru.LoadableMixin(Iw(ar(Be))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=U(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);IC(e,this.layer.spatialReference,i);const r=t9.fromJSON(i);if(!this._requiresClientGraphicMapping())return r;const s=this.layer.objectIdField;for(const o of r.features){const c=o.attributes[s],u=this._idToClientGraphic.get(c);u&&(o.geometry=u.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new de("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return IC(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:vi.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new de("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const r=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=b=>"objectId"in b&&b.objectId!=null?b.objectId:"attributes"in b&&b.attributes[t]!=null?b.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const b of e.deleteFeatures){const S=o(b);S!=null&&r.push(S)}const c=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const b of e.updateFeatures)if(s.push(this._serializeFeature(b)),c){const S=o(b);S!=null&&c.set(S,b)}}N2e(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:u,featureEditResults:g}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:r});return this.fullExtent=u,i&&i.finish(g.uidToObjectId),this._updateClientGraphicIds(c,g),this._createEditsResult(g)}async _prepareClientMapping(e,t){if(this._layerOrSourceGeometryType!=="mesh"||ae(e))return;const i=[];for(const{geometry:r}of e)!U(r)||r.type!=="mesh"||r.hasExtent||r.loaded||i.push(r.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const r=e.get(i.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new de("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let r=null;for(let o=0;o<e.length;o++){const c=e[o],u=this._serializeFeature(c);!r&&U(c.geometry)&&(r=c.geometry.type),i[o]=u,t.set(`${u.uid}`,c)}const s=this;return{features:i,inferredGeometryType:r,finish(o){const c=s.sourceJSON.objectIdField;for(const u in o){const g=o[u],b=t.get(u);b&&(b.attributes||(b.attributes={}),g===-1?delete b.attributes[c]:b.attributes[c]=g,s._addIdToClientGraphic(b))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get _layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),r=(j2e++).toString();return i?{uid:r,geometry:i.toJSON(),attributes:t}:{uid:r,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return ae(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Qn.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await Pfe("MemorySourceWorker",{strategy:Se("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:r,hasM:s,hasZ:o,timeInfo:c}=this.layer,u=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const g=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",A=>{oE.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),A.preventDefault()}));const b={features:g.features,fields:t&&t.map(A=>A.toJSON()),geometryType:eF.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:r,spatialReference:u?null:i&&i.toJSON(),timeInfo:c?c.toJSON():null},S=await this._connection.invoke("load",b,{signal:e});for(const A of S.warnings)oE.warn(A.message,{layer:this.layer,warning:A});S.featureErrors.length&&oE.warn(`Encountered ${S.featureErrors.length} validation errors while loading features`,S.featureErrors);const E=S.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(g.inferredGeometryType)&&(E.geometryType=eF.toJSON(g.inferredGeometryType)),this.sourceJSON=E,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),g.finish(S.assignedObjectIds)}};v([E6({Type:wr,ensureType:Er(wr)})],Qu.prototype,"itemType",void 0),v([_()],Qu.prototype,"type",void 0),v([_({constructOnly:!0})],Qu.prototype,"layer",void 0),v([_({readOnly:!0})],Qu.prototype,"_workerGeometryType",null),v([_()],Qu.prototype,"sourceJSON",void 0),Qu=v([K(GJ)],Qu);function z2e(e){return"portalItem"in e}const V2e=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):z2e(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return v([_({type:String})],t.prototype,"apiKey",null),t=v([K("esri.layers.mixins.APIKeyMixin")],t),t},UJ={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},qJ=Object.values(UJ),BJ=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${qJ.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),G2e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${qJ.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),U2e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Sze(e){return!!BJ.test(e)}function _c(e){if(ae(e))return null;const t=is(e),i=t.path.match(BJ)||t.path.match(G2e);if(!i)return null;const[,r,s,o,c]=i,u=s.indexOf("/");return{title:Tk(u!==-1?s.slice(u+1):s),serverType:UJ[o.toLowerCase()],sublayer:c!=null&&c!==""?parseInt(c,10):null,url:{path:r}}}function q2e(e){const t=is(e).path.match(U2e);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function Tk(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function B2e(e,t){const i=[];if(e){const r=_c(e);U(r)&&r.title&&i.push(r.title)}if(t){const r=Tk(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function HJ(e){if(!e)return!1;const t=".arcgis.com/",i="//services",r="//tiles",s="//features",o=(e=e.toLowerCase()).includes(t),c=e.includes(i)||e.includes(r)||e.includes(s);return o&&c}function H2e(e,t){return e&&JG(YG(e,t))}function W2e(e){let{url:t}=e;if(!t)return{url:t};t=YG(t,e.logger);const i=is(t),r=_c(i.path);let s;if(U(r))r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const o=q2e(i.path);U(o)&&(t=o.serviceUrl,s=o.sublayerId)}return{url:JG(t),layerId:s}}function J2e(e,t,i,r,s){h0(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=n0(r.url,i,e.layerId.toString()))}function Ize(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),o=t.includes("/wmsserver");return i&&(r||s||o)}const Y2e=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=_c(this.url);if(U(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",H2e(i,Ie.getLogger(this.declaredClass)))}};return v([_()],t.prototype,"title",null),v([_({type:String})],t.prototype,"url",null),t=v([K("esri.layers.mixins.ArcGISService")],t),t},MR={read:{reader:ik},write:{allowNull:!0,writer:rk}},WJ=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return v([_({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),v([_({json:{read:!1,write:!1,origins:{"web-map":MR,"portal-item":MR}}})],t.prototype,"effect",void 0),t=v([K("esri.layers.mixins.BlendLayer")],t),t},K2e=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return v([_({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=v([K("esri.layers.mixins.CustomParametersMixin")],t),t},Z2e=new ss.EventEmitter,JJ="esri.layers.mixins.EditBusLayer",YJ=Symbol(JJ);function Eze(e){return e!=null&&typeof e=="object"&&YJ in e}const X2e=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this.when().then(()=>{this.own([Z2e.on("edits",s=>{var S,E,A;const o="layer"in s?s.layer:null,c="layer"in s?(S=s.layer)==null?void 0:S.url:s.serviceUrl,u="layer"in s?(E=s.layer)==null?void 0:E.layerId:s.layerId,g=s.event;if(o===this||c!==this.url)return;if(u!=null&&this.layerId!=null&&u===this.layerId)return void this.emit("edits",ve(g));const b=(A=g.editedFeatures)==null?void 0:A.find(({layerId:O})=>O===this.layerId);if(b){const{adds:O,updates:L,deletes:N}=b.editedFeatures,z={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:O?O.map(({attributes:q})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],deletedFeatures:N?N.map(({attributes:q})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],updatedFeatures:L?L.map(({current:{attributes:q}})=>({objectId:this.objectIdField&&q[this.objectIdField],globalId:this.globalIdField&&q[this.globalIdField]})):[],editedFeatures:ve(g.editedFeatures),exceededTransferLimit:!1};this.emit("edits",z)}})])},()=>{})}};return t=YJ,i=v([K(JJ)],i),i};var _A;const aE=new It({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),lE=new It({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Dl=_A=class extends $e{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:o,units:c,distance:u}=this;return new Xl({geometry:ve(i),objectIds:ve(o),spatialRelationship:r,timeExtent:ve(s),where:t,units:c,distance:u,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:o,distance:c}=this;return new _A({geometry:ve(t),objectIds:ve(s),spatialRelationship:i,timeExtent:ve(r),where:e,units:o,distance:c})}};v([_({type:String,json:{write:!0}})],Dl.prototype,"where",void 0),v([_({types:_0,json:{write:!0}})],Dl.prototype,"geometry",void 0),v([_({type:aE.apiValues,json:{name:"spatialRel",read:{reader:aE.read},write:{allowNull:!1,writer:aE.write,overridePolicy(){return{enabled:U(this.geometry)}}}}})],Dl.prototype,"spatialRelationship",void 0),v([_({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Dl.prototype,"distance",void 0),v([_({type:[Number],json:{write:!0}})],Dl.prototype,"objectIds",void 0),v([_({type:lE.apiValues,json:{read:lE.read,write:{writer:lE.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Dl.prototype,"units",void 0),v([_({type:pu,json:{write:!0}})],Dl.prototype,"timeExtent",void 0),Dl=_A=v([K("esri.layers.support.FeatureFilter")],Dl);const Q2e=Dl;var xA;const TR={read:{reader:ik},write:{writer:rk,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},CR={read:{reader:ik},write:{writer:rk,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},AR={name:"showExcludedLabels",default:!0};let qp=xA=class extends $e{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,s;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const o=Object.keys(i.filter);if(o.length>1||o[0]!=="where")return(r=t.messages)==null||r.push(new de("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(s=t.messages)==null||s.push(new de("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new xA({filter:U(this.filter)?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};v([_({type:Q2e,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e==null?void 0:e.write({},r);s&&Object.keys(s).length!==0?tn(i,s,t):tn(i,null,t)}}}})],qp.prototype,"filter",void 0),v([_({json:{write:!0,origins:{"web-map":TR,"portal-item":TR}}})],qp.prototype,"includedEffect",void 0),v([_({json:{write:!0,origins:{"web-map":CR,"portal-item":CR}}})],qp.prototype,"excludedEffect",void 0),v([_({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":AR,"portal-item":AR}}})],qp.prototype,"excludedLabelsVisible",void 0),qp=xA=v([K("esri.layers.support.FeatureEffect")],qp);const e3e=qp,$R={write:{allowNull:!0}},t3e=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return v([_({type:e3e,json:{origins:{"web-map":$R,"portal-item":$R}}})],t.prototype,"featureEffect",void 0),t=v([K("esri.layers.mixins.FeatureEffectLayer")],t),t};var ov;const lS=$s()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),KJ=lS.jsonValues.slice();Cne(KJ,"orthometric");const Qv=$s()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Ua=ov=class extends $e{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return lS.write(e,t,i)}readHeightModel(e,t,i){return lS.read(e)||(i&&i.messages&&i.messages.push(i3e(e,{context:i})),null)}readHeightUnit(e,t,i){return Qv.read(e)||(i&&i.messages&&i.messages.push(kR(e,{context:i})),null)}readHeightUnitService(e,t,i){return uU(e)||Qv.read(e)||(i&&i.messages&&i.messages.push(kR(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new ov({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=cU(t);return new ov({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new ov;return t.read(e,{origin:"web-scene"}),t}};function kR(e,t){return new Cn("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function i3e(e,t){return new Cn("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}v([_({type:lS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:KJ,default:"ellipsoidal"}}}})],Ua.prototype,"heightModel",void 0),v([qe("web-scene","heightModel")],Ua.prototype,"writeHeightModel",null),v([Ne(["web-scene","service"],"heightModel")],Ua.prototype,"readHeightModel",null),v([_({type:Qv.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Qv.jsonValues,write:Qv.write}}}})],Ua.prototype,"heightUnit",void 0),v([Ne("web-scene","heightUnit")],Ua.prototype,"readHeightUnit",null),v([Ne("service","heightUnit")],Ua.prototype,"readHeightUnitService",null),v([_({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Ua.prototype,"vertCRS",void 0),v([Ne("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Ua.prototype,"readVertCRS",null),Ua=ov=v([K("esri.geometry.HeightModelInfo")],Ua);const Jw=Ua;function r3e(e){if(!e)return e;const{start:t,end:i}=e;return new pu({start:U(t)?Kf(t,-t.getTimezoneOffset(),"minutes"):t,end:U(i)?Kf(i,-i.getTimezoneOffset(),"minutes"):i})}function s3e(e){if(!e)return e;const{start:t,end:i}=e;return new pu({start:U(t)?Kf(t,t.getTimezoneOffset(),"minutes"):t,end:U(i)?Kf(i,i.getTimezoneOffset(),"minutes"):i})}var SA;let av=SA=class extends $e{constructor(e){super(e)}async collectRequiredFields(e,t){return An(e,t,this.expression)}clone(){return new SA({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};v([_({type:String,json:{write:!0}})],av.prototype,"expression",void 0),v([_({type:String,json:{write:!0}})],av.prototype,"title",void 0),av=SA=v([K("esri.layers.support.FeatureExpressionInfo")],av);const OR=av;function Mze(e){return!!e&&Bw[e]!=null}function n3e(e){return 1/(Bw[e]||1)}function o3e(){const e=Object.keys(Bw);return e.sort(),e}const a3e=o3e();var IA;const Y_=$s()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),PR=new It({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Gu=IA=class extends $e{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):U(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new IA({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Ine(this.featureExpressionInfo,e.featureExpressionInfo)}};v([_({type:OR,json:{write:!0}})],Gu.prototype,"featureExpressionInfo",void 0),v([Ne("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Gu.prototype,"readFeatureExpressionInfo",null),v([qe("featureExpressionInfo",{featureExpressionInfo:{type:OR},"featureExpression.value":{type:[0]}})],Gu.prototype,"writeFeatureExpressionInfo",null),v([_({type:Y_.apiValues,nonNullable:!0,json:{type:Y_.jsonValues,read:Y_.read,write:{writer:Y_.write,isRequired:!0}}})],Gu.prototype,"mode",null),v([_({type:Number,json:{write:!0}})],Gu.prototype,"offset",void 0),v([_({type:a3e,json:{type:String,read:PR.read,write:PR.write}})],Gu.prototype,"unit",null),Gu=IA=v([K("esri.layers.support.ElevationInfo")],Gu);const ZJ=Gu,l3e={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},Ck={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},Ak={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},u3e={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:h0}}},c3e={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},h3e={value:null,type:ZJ,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function Tze(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const XJ={write:!0,read:!0},EA={type:Number,json:{origins:{"web-document":XJ,"portal-item":{write:!0}}}},d3e={...EA,json:{...EA.json,origins:{"web-document":{...XJ,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Eb(t.layerDefinition.drawingInfo.transparency):void 0:Eb(t.drawingInfo.transparency)}}},Cze={type:pu,readOnly:!0,get(){var u,g;if(!((u=this.layer)!=null&&u.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,r=(g=this.view)==null?void 0:g.timeExtent;let s=this.layer.timeExtent;e&&(s=s3e(s));let o=i?r&&s?r.intersection(s):r||s:s;if(!o||o.isEmpty||o.isAllTime)return o;t&&(o=o.offset(-t.value,t.unit)),e&&(o=r3e(o));const c=this._get("timeExtent");return o.equals(c)?c:o}},Aze={type:vi,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=vi.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=wt.fromJSON(t.spatialReference)),i}}}},read:!1}},p3e={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},f3e={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},m3e={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},QJ={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},FR=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Chihuahua"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class E0 extends Error{}class y3e extends E0{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class g3e extends E0{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class v3e extends E0{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class lv extends E0{}class eY extends E0{constructor(t){super(`Invalid unit ${t}`)}}class sa extends E0{}class eh extends E0{constructor(){super("Zone is an abstract class")}}const Ye="numeric",yl="short",Oo="long",uS={year:Ye,month:Ye,day:Ye},tY={year:Ye,month:yl,day:Ye},b3e={year:Ye,month:yl,day:Ye,weekday:yl},iY={year:Ye,month:Oo,day:Ye},rY={year:Ye,month:Oo,day:Ye,weekday:Oo},sY={hour:Ye,minute:Ye},nY={hour:Ye,minute:Ye,second:Ye},oY={hour:Ye,minute:Ye,second:Ye,timeZoneName:yl},aY={hour:Ye,minute:Ye,second:Ye,timeZoneName:Oo},lY={hour:Ye,minute:Ye,hourCycle:"h23"},uY={hour:Ye,minute:Ye,second:Ye,hourCycle:"h23"},cY={hour:Ye,minute:Ye,second:Ye,hourCycle:"h23",timeZoneName:yl},hY={hour:Ye,minute:Ye,second:Ye,hourCycle:"h23",timeZoneName:Oo},dY={year:Ye,month:Ye,day:Ye,hour:Ye,minute:Ye},pY={year:Ye,month:Ye,day:Ye,hour:Ye,minute:Ye,second:Ye},fY={year:Ye,month:yl,day:Ye,hour:Ye,minute:Ye},mY={year:Ye,month:yl,day:Ye,hour:Ye,minute:Ye,second:Ye},w3e={year:Ye,month:yl,day:Ye,weekday:yl,hour:Ye,minute:Ye},yY={year:Ye,month:Oo,day:Ye,hour:Ye,minute:Ye,timeZoneName:yl},gY={year:Ye,month:Oo,day:Ye,hour:Ye,minute:Ye,second:Ye,timeZoneName:yl},vY={year:Ye,month:Oo,day:Ye,weekday:Oo,hour:Ye,minute:Ye,timeZoneName:Oo},bY={year:Ye,month:Oo,day:Ye,weekday:Oo,hour:Ye,minute:Ye,second:Ye,timeZoneName:Oo};class Tg{get type(){throw new eh}get name(){throw new eh}get ianaName(){return this.name}get isUniversal(){throw new eh}offsetName(t,i){throw new eh}formatOffset(t,i){throw new eh}offset(t){throw new eh}equals(t){throw new eh}get isValid(){throw new eh}}let uE=null;class a9 extends Tg{static get instance(){return uE===null&&(uE=new a9),uE}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return _Y(t,i,r)}formatOffset(t,i){return tb(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let D3={};function _3e(e){return D3[e]||(D3[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),D3[e]}const x3e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function S3e(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,o,c,u,g,b,S]=r;return[c,s,o,u,g,b,S]}function I3e(e,t){const i=e.formatToParts(t),r=[];for(let s=0;s<i.length;s++){const{type:o,value:c}=i[s],u=x3e[o];o==="era"?r[u]=c:Wt(u)||(r[u]=parseInt(c,10))}return r}let K_={};class gl extends Tg{static create(t){return K_[t]||(K_[t]=new gl(t)),K_[t]}static resetCache(){K_={},D3={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=gl.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return _Y(t,i,r,this.name)}formatOffset(t,i){return tb(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=_3e(this.name);let[s,o,c,u,g,b,S]=r.formatToParts?I3e(r,i):S3e(r,i);u==="BC"&&(s=-Math.abs(s)+1);const A=Ok({year:s,month:o,day:c,hour:g===24?0:g,minute:b,second:S,millisecond:0});let O=+i;const L=O%1e3;return O-=L>=0?L:1e3+L,(A-O)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let LR={};function E3e(e,t={}){const i=JSON.stringify([e,t]);let r=LR[i];return r||(r=new Intl.ListFormat(e,t),LR[i]=r),r}let MA={};function TA(e,t={}){const i=JSON.stringify([e,t]);let r=MA[i];return r||(r=new Intl.DateTimeFormat(e,t),MA[i]=r),r}let CA={};function M3e(e,t={}){const i=JSON.stringify([e,t]);let r=CA[i];return r||(r=new Intl.NumberFormat(e,t),CA[i]=r),r}let AA={};function T3e(e,t={}){const{base:i,...r}=t,s=JSON.stringify([e,r]);let o=AA[s];return o||(o=new Intl.RelativeTimeFormat(e,t),AA[s]=o),o}let uv=null;function C3e(){return uv||(uv=new Intl.DateTimeFormat().resolvedOptions().locale,uv)}function A3e(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,s;try{r=TA(e).resolvedOptions(),s=e}catch{const g=e.substring(0,i);r=TA(g).resolvedOptions(),s=g}const{numberingSystem:o,calendar:c}=r;return[s,o,c]}}function $3e(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function k3e(e){const t=[];for(let i=1;i<=12;i++){const r=Ke.utc(2016,i,1);t.push(e(r))}return t}function O3e(e){const t=[];for(let i=1;i<=7;i++){const r=Ke.utc(2016,11,13+i);t.push(e(r))}return t}function Z_(e,t,i,r,s){const o=e.listingMode(i);return o==="error"?null:o==="en"?r(t):s(t)}function P3e(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class F3e{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:o,...c}=r;if(!i||Object.keys(c).length>0){const u={useGrouping:!1,...r};r.padTo>0&&(u.minimumIntegerDigits=r.padTo),this.inf=M3e(t,u)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):kk(t,3);return Lr(i,this.padTo)}}}class L3e{constructor(t,i,r){this.opts=r;let s;if(t.zone.isUniversal){const c=-1*(t.offset/60),u=c>=0?`Etc/GMT+${c}`:`Etc/GMT${c}`;t.offset!==0&&gl.create(u).valid?(s=u,this.dt=t):(s="UTC",r.timeZoneName?this.dt=t:this.dt=t.offset===0?t:Ke.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,s=t.zone.name);const o={...this.opts};o.timeZone=o.timeZone||s,this.dtf=TA(i,o)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class R3e{constructor(t,i,r){this.opts={style:"long",...r},!i&&wY()&&(this.rtf=T3e(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):Q3e(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}class er{static fromOpts(t){return er.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,r,s=!1){const o=t||Fr.defaultLocale,c=o||(s?"en-US":C3e()),u=i||Fr.defaultNumberingSystem,g=r||Fr.defaultOutputCalendar;return new er(c,u,g,o)}static resetCache(){uv=null,MA={},CA={},AA={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r}={}){return er.create(t,i,r)}constructor(t,i,r,s){const[o,c,u]=A3e(t);this.locale=o,this.numberingSystem=i||c||null,this.outputCalendar=r||u||null,this.intl=$3e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=P3e(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:er.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1,r=!0){return Z_(this,t,r,IY,()=>{const s=i?{month:t,day:"numeric"}:{month:t},o=i?"format":"standalone";return this.monthsCache[o][t]||(this.monthsCache[o][t]=k3e(c=>this.extract(c,s,"month"))),this.monthsCache[o][t]})}weekdays(t,i=!1,r=!0){return Z_(this,t,r,TY,()=>{const s=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},o=i?"format":"standalone";return this.weekdaysCache[o][t]||(this.weekdaysCache[o][t]=O3e(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[o][t]})}meridiems(t=!0){return Z_(this,void 0,t,()=>CY,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ke.utc(2016,11,13,9),Ke.utc(2016,11,13,19)].map(r=>this.extract(r,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return Z_(this,t,i,AY,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ke.utc(-40,1,1),Ke.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[t]})}extract(t,i,r){const s=this.dtFormatter(t,i),o=s.formatToParts(),c=o.find(u=>u.type.toLowerCase()===r);return c?c.value:null}numberFormatter(t={}){return new F3e(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new L3e(t,this.intl,i)}relFormatter(t={}){return new R3e(this.intl,this.isEnglish(),t)}listFormatter(t={}){return E3e(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let cE=null;class Es extends Tg{static get utcInstance(){return cE===null&&(cE=new Es(0)),cE}static instance(t){return t===0?Es.utcInstance:new Es(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Es(u9(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${tb(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${tb(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return tb(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class N3e extends Tg{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ad(e,t){if(Wt(e)||e===null)return t;if(e instanceof Tg)return e;if(D3e(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?a9.instance:i==="utc"||i==="gmt"?Es.utcInstance:Es.parseSpecifier(i)||gl.create(e)}else return Zf(e)?Es.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new N3e(e)}let RR=()=>Date.now(),NR="system",DR=null,jR=null,zR=null,VR=60,GR;class Fr{static get now(){return RR}static set now(t){RR=t}static set defaultZone(t){NR=t}static get defaultZone(){return ad(NR,a9.instance)}static get defaultLocale(){return DR}static set defaultLocale(t){DR=t}static get defaultNumberingSystem(){return jR}static set defaultNumberingSystem(t){jR=t}static get defaultOutputCalendar(){return zR}static set defaultOutputCalendar(t){zR=t}static get twoDigitCutoffYear(){return VR}static set twoDigitCutoffYear(t){VR=t%100}static get throwOnInvalid(){return GR}static set throwOnInvalid(t){GR=t}static resetCaches(){er.resetCache(),gl.resetCache()}}function Wt(e){return typeof e=="undefined"}function Zf(e){return typeof e=="number"}function l9(e){return typeof e=="number"&&e%1===0}function D3e(e){return typeof e=="string"}function j3e(e){return Object.prototype.toString.call(e)==="[object Date]"}function wY(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch{return!1}}function z3e(e){return Array.isArray(e)?e:[e]}function UR(e,t,i){if(e.length!==0)return e.reduce((r,s)=>{const o=[t(s),s];return r&&i(r[0],o[0])===r[0]?r:o},null)[1]}function V3e(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function qy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pc(e,t,i){return l9(e)&&e>=t&&e<=i}function G3e(e,t){return e-t*Math.floor(e/t)}function Lr(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function td(e){if(!(Wt(e)||e===null||e===""))return parseInt(e,10)}function rp(e){if(!(Wt(e)||e===null||e===""))return parseFloat(e)}function $k(e){if(!(Wt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function kk(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function Yw(e){return e%4===0&&(e%100!==0||e%400===0)}function eb(e){return Yw(e)?366:365}function cS(e,t){const i=G3e(t-1,12)+1,r=e+(t-i)/12;return i===2?Yw(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Ok(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function hS(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,r=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||r===3?53:52}function $A(e){return e>99?e:e>Fr.twoDigitCutoffYear?1900+e:2e3+e}function _Y(e,t,i,r=null){const s=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);const c={timeZoneName:t,...o},u=new Intl.DateTimeFormat(i,c).formatToParts(s).find(g=>g.type.toLowerCase()==="timezonename");return u?u.value:null}function u9(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function xY(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new sa(`Invalid unit value ${e}`);return t}function dS(e,t){const i={};for(const r in e)if(qy(e,r)){const s=e[r];if(s==null)continue;i[t(r)]=xY(s)}return i}function tb(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Lr(i,2)}:${Lr(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${Lr(i,2)}${Lr(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function c9(e){return V3e(e,["hour","minute","second","millisecond"])}const U3e=["January","February","March","April","May","June","July","August","September","October","November","December"],SY=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],q3e=["J","F","M","A","M","J","J","A","S","O","N","D"];function IY(e){switch(e){case"narrow":return[...q3e];case"short":return[...SY];case"long":return[...U3e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const EY=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],MY=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],B3e=["M","T","W","T","F","S","S"];function TY(e){switch(e){case"narrow":return[...B3e];case"short":return[...MY];case"long":return[...EY];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const CY=["AM","PM"],H3e=["Before Christ","Anno Domini"],W3e=["BC","AD"],J3e=["B","A"];function AY(e){switch(e){case"narrow":return[...J3e];case"short":return[...W3e];case"long":return[...H3e];default:return null}}function Y3e(e){return CY[e.hour<12?0:1]}function K3e(e,t){return TY(t)[e.weekday-1]}function Z3e(e,t){return IY(t)[e.month-1]}function X3e(e,t){return AY(t)[e.year<0?0:1]}function Q3e(e,t,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&o){const E=e==="days";switch(t){case 1:return E?"tomorrow":`next ${s[e][0]}`;case-1:return E?"yesterday":`last ${s[e][0]}`;case 0:return E?"today":`this ${s[e][0]}`}}const c=Object.is(t,-0)||t<0,u=Math.abs(t),g=u===1,b=s[e],S=r?g?b[1]:b[2]||b[1]:g?s[e][0]:e;return c?`${u} ${S} ago`:`in ${u} ${S}`}function qR(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const exe={D:uS,DD:tY,DDD:iY,DDDD:rY,t:sY,tt:nY,ttt:oY,tttt:aY,T:lY,TT:uY,TTT:cY,TTTT:hY,f:dY,ff:fY,fff:yY,ffff:vY,F:pY,FF:mY,FFF:gY,FFFF:bY};class Zs{static create(t,i={}){return new Zs(t,i)}static parseFormat(t){let i=null,r="",s=!1;const o=[];for(let c=0;c<t.length;c++){const u=t.charAt(c);u==="'"?(r.length>0&&o.push({literal:s,val:r}),i=null,r="",s=!s):s||u===i?r+=u:(r.length>0&&o.push({literal:!1,val:r}),r=u,i=u)}return r.length>0&&o.push({literal:s,val:r}),o}static macroTokenToFormatOpts(t){return exe[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).formatToParts()}formatInterval(t,i={}){return this.loc.dtFormatter(t.start,{...this.opts,...i}).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return Lr(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(O,L)=>this.loc.extract(t,O,L),c=O=>t.isOffsetFixed&&t.offset===0&&O.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,O.format):"",u=()=>r?Y3e(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),g=(O,L)=>r?Z3e(t,O):o(L?{month:O}:{month:O,day:"numeric"},"month"),b=(O,L)=>r?K3e(t,O):o(L?{weekday:O}:{weekday:O,month:"long",day:"numeric"},"weekday"),S=O=>{const L=Zs.macroTokenToFormatOpts(O);return L?this.formatWithSystemDefault(t,L):O},E=O=>r?X3e(t,O):o({era:O},"era"),A=O=>{switch(O){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return c({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return c({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return c({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return u();case"d":return s?o({day:"numeric"},"day"):this.num(t.day);case"dd":return s?o({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return b("short",!0);case"cccc":return b("long",!0);case"ccccc":return b("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return b("short",!1);case"EEEE":return b("long",!1);case"EEEEE":return b("narrow",!1);case"L":return s?o({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?o({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return g("short",!0);case"LLLL":return g("long",!0);case"LLLLL":return g("narrow",!0);case"M":return s?o({month:"numeric"},"month"):this.num(t.month);case"MM":return s?o({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return g("short",!1);case"MMMM":return g("long",!1);case"MMMMM":return g("narrow",!1);case"y":return s?o({year:"numeric"},"year"):this.num(t.year);case"yy":return s?o({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?o({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?o({year:"numeric"},"year"):this.num(t.year,6);case"G":return E("short");case"GG":return E("long");case"GGGGG":return E("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return S(O)}};return qR(Zs.parseFormat(i),A)}formatDurationFromString(t,i){const r=g=>{switch(g[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=g=>b=>{const S=r(b);return S?this.num(g.get(S),b.length):b},o=Zs.parseFormat(i),c=o.reduce((g,{literal:b,val:S})=>b?g:g.concat(S),[]),u=t.shiftTo(...c.map(r).filter(g=>g));return qR(o,s(u))}}class nl{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const $Y=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Cg(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function Ag(...e){return t=>e.reduce(([i,r,s],o)=>{const[c,u,g]=o(t,s);return[{...i,...c},u||r,g]},[{},null,1]).slice(0,2)}function $g(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const s=i.exec(e);if(s)return r(s)}return[null,null]}function kY(...e){return(t,i)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=td(t[i+s]);return[r,null,i+s]}}const OY=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,txe=`(?:${OY.source}?(?:\\[(${$Y.source})\\])?)?`,Pk=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,PY=RegExp(`${Pk.source}${txe}`),Fk=RegExp(`(?:T${PY.source})?`),ixe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,rxe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,sxe=/(\d{4})-?(\d{3})/,nxe=kY("weekYear","weekNumber","weekDay"),oxe=kY("year","ordinal"),axe=/(\d{4})-(\d\d)-(\d\d)/,FY=RegExp(`${Pk.source} ?(?:${OY.source}|(${$Y.source}))?`),lxe=RegExp(`(?: ${FY.source})?`);function Sy(e,t,i){const r=e[t];return Wt(r)?i:td(r)}function uxe(e,t){return[{year:Sy(e,t),month:Sy(e,t+1,1),day:Sy(e,t+2,1)},null,t+3]}function kg(e,t){return[{hours:Sy(e,t,0),minutes:Sy(e,t+1,0),seconds:Sy(e,t+2,0),milliseconds:$k(e[t+3])},null,t+4]}function Kw(e,t){const i=!e[t]&&!e[t+1],r=u9(e[t+1],e[t+2]),s=i?null:Es.instance(r);return[{},s,t+3]}function Zw(e,t){const i=e[t]?gl.create(e[t]):null;return[{},i,t+1]}const cxe=RegExp(`^T?${Pk.source}$`),hxe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function dxe(e){const[t,i,r,s,o,c,u,g,b]=e,S=t[0]==="-",E=g&&g[0]==="-",A=(O,L=!1)=>O!==void 0&&(L||O&&S)?-O:O;return[{years:A(rp(i)),months:A(rp(r)),weeks:A(rp(s)),days:A(rp(o)),hours:A(rp(c)),minutes:A(rp(u)),seconds:A(rp(g),g==="-0"),milliseconds:A($k(b),E)}]}const pxe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Lk(e,t,i,r,s,o,c){const u={year:t.length===2?$A(td(t)):td(t),month:SY.indexOf(i)+1,day:td(r),hour:td(s),minute:td(o)};return c&&(u.second=td(c)),e&&(u.weekday=e.length>3?EY.indexOf(e)+1:MY.indexOf(e)+1),u}const fxe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function mxe(e){const[,t,i,r,s,o,c,u,g,b,S,E]=e,A=Lk(t,s,r,i,o,c,u);let O;return g?O=pxe[g]:b?O=0:O=u9(S,E),[A,new Es(O)]}function yxe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const gxe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vxe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,bxe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function BR(e){const[,t,i,r,s,o,c,u]=e;return[Lk(t,s,r,i,o,c,u),Es.utcInstance]}function wxe(e){const[,t,i,r,s,o,c,u]=e;return[Lk(t,u,i,r,s,o,c),Es.utcInstance]}const _xe=Cg(ixe,Fk),xxe=Cg(rxe,Fk),Sxe=Cg(sxe,Fk),Ixe=Cg(PY),LY=Ag(uxe,kg,Kw,Zw),Exe=Ag(nxe,kg,Kw,Zw),Mxe=Ag(oxe,kg,Kw,Zw),Txe=Ag(kg,Kw,Zw);function Cxe(e){return $g(e,[_xe,LY],[xxe,Exe],[Sxe,Mxe],[Ixe,Txe])}function Axe(e){return $g(yxe(e),[fxe,mxe])}function $xe(e){return $g(e,[gxe,BR],[vxe,BR],[bxe,wxe])}function kxe(e){return $g(e,[hxe,dxe])}const Oxe=Ag(kg);function Pxe(e){return $g(e,[cxe,Oxe])}const Fxe=Cg(axe,lxe),Lxe=Cg(FY),Rxe=Ag(kg,Kw,Zw);function Nxe(e){return $g(e,[Fxe,LY],[Lxe,Rxe])}const Dxe="Invalid Duration",RY={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},jxe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...RY},jo=146097/400,F0=146097/4800,zxe={years:{quarters:4,months:12,weeks:jo/7,days:jo,hours:jo*24,minutes:jo*24*60,seconds:jo*24*60*60,milliseconds:jo*24*60*60*1e3},quarters:{months:3,weeks:jo/28,days:jo/4,hours:jo*24/4,minutes:jo*24*60/4,seconds:jo*24*60*60/4,milliseconds:jo*24*60*60*1e3/4},months:{weeks:F0/7,days:F0,hours:F0*24,minutes:F0*24*60,seconds:F0*24*60*60,milliseconds:F0*24*60*60*1e3},...RY},Bp=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Vxe=Bp.slice(0).reverse();function th(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Qt(r)}function Gxe(e){return e<0?Math.floor(e):Math.ceil(e)}function NY(e,t,i,r,s){const o=e[s][i],c=t[i]/o,u=Math.sign(c)===Math.sign(r[s]),g=!u&&r[s]!==0&&Math.abs(c)<=1?Gxe(c):Math.trunc(c);r[s]+=g,t[i]-=g*o}function Uxe(e,t){Vxe.reduce((i,r)=>Wt(t[r])?i:(i&&NY(e,t,i,t,r),r),null)}function qxe(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class Qt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?zxe:jxe;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||er.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return Qt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new sa(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Qt({values:dS(t,Qt.normalizeUnit),loc:er.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(Zf(t))return Qt.fromMillis(t);if(Qt.isDuration(t))return t;if(typeof t=="object")return Qt.fromObject(t);throw new sa(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=kxe(t);return r?Qt.fromObject(r,i):Qt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=Pxe(t);return r?Qt.fromObject(r,i):Qt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new sa("need to specify a reason the Duration is invalid");const r=t instanceof nl?t:new nl(t,i);if(Fr.throwOnInvalid)throw new v3e(r);return new Qt({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new eY(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Zs.create(this.loc,r).formatDurationFromString(this,t):Dxe}toHuman(t={}){const i=Bp.map(r=>{const s=this.values[r];return Wt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=kk(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const r=this.shiftTo("hours","minutes","seconds","milliseconds");let s=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(s+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||r.milliseconds!==0)&&(s+=".SSS"));let o=r.toFormat(s);return t.includePrefix&&(o="T"+o),o}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=Qt.fromDurationLike(t),r={};for(const s of Bp)(qy(i.values,s)||qy(this.values,s))&&(r[s]=i.get(s)+this.get(s));return th(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=Qt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=xY(t(this.values[r],r));return th(this,{values:i},!0)}get(t){return this[Qt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...dS(t,Qt.normalizeUnit)};return th(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const c={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:s,conversionAccuracy:r};return th(this,c)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Uxe(this.matrix,t),th(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=qxe(this.normalize().shiftToAll().toObject());return th(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(c=>Qt.normalizeUnit(c));const i={},r={},s=this.toObject();let o;for(const c of Bp)if(t.indexOf(c)>=0){o=c;let u=0;for(const b in r)u+=this.matrix[b][c]*r[b],r[b]=0;Zf(s[c])&&(u+=s[c]);const g=Math.trunc(u);i[c]=g,r[c]=(u*1e3-g*1e3)/1e3;for(const b in s)Bp.indexOf(b)>Bp.indexOf(c)&&NY(this.matrix,s,b,i,c)}else Zf(s[c])&&(r[c]=s[c]);for(const c in r)r[c]!==0&&(i[o]+=c===o?r[c]:r[c]/this.matrix[o][c]);return th(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return th(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of Bp)if(!i(this.values[r],t.values[r]))return!1;return!0}}const L0="Invalid Interval";function Bxe(e,t){return!e||!e.isValid?cr.invalid("missing or invalid start"):!t||!t.isValid?cr.invalid("missing or invalid end"):t<e?cr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class cr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new sa("need to specify a reason the Interval is invalid");const r=t instanceof nl?t:new nl(t,i);if(Fr.throwOnInvalid)throw new g3e(r);return new cr({invalid:r})}static fromDateTimes(t,i){const r=n1(t),s=n1(i),o=Bxe(r,s);return o==null?new cr({start:r,end:s}):o}static after(t,i){const r=Qt.fromDurationLike(i),s=n1(t);return cr.fromDateTimes(s,s.plus(r))}static before(t,i){const r=Qt.fromDurationLike(i),s=n1(t);return cr.fromDateTimes(s.minus(r),s)}static fromISO(t,i){const[r,s]=(t||"").split("/",2);if(r&&s){let o,c;try{o=Ke.fromISO(r,i),c=o.isValid}catch{c=!1}let u,g;try{u=Ke.fromISO(s,i),g=u.isValid}catch{g=!1}if(c&&g)return cr.fromDateTimes(o,u);if(c){const b=Qt.fromISO(s,i);if(b.isValid)return cr.after(o,b)}else if(g){const b=Qt.fromISO(r,i);if(b.isValid)return cr.before(u,b)}}return cr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(t),r=this.end.startOf(t);return Math.floor(r.diff(i,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?cr.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(n1).filter(c=>this.contains(c)).sort(),r=[];let{s}=this,o=0;for(;s<this.e;){const c=i[o]||this.e,u=+c>+this.e?this.e:c;r.push(cr.fromDateTimes(s,u)),s=u,o+=1}return r}splitBy(t){const i=Qt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,o;const c=[];for(;r<this.e;){const u=this.start.plus(i.mapUnits(g=>g*s));o=+u>+this.e?this.e:u,c.push(cr.fromDateTimes(r,o)),r=o,s+=1}return c}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:cr.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return cr.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((s,o)=>s.s-o.s).reduce(([s,o],c)=>o?o.overlaps(c)||o.abutsStart(c)?[s,o.union(c)]:[s.concat([o]),c]:[s,c],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const s=[],o=t.map(g=>[{time:g.s,type:"s"},{time:g.e,type:"e"}]),c=Array.prototype.concat(...o),u=c.sort((g,b)=>g.time-b.time);for(const g of u)r+=g.type==="s"?1:-1,r===1?i=g.time:(i&&+i!=+g.time&&s.push(cr.fromDateTimes(i,g.time)),i=null);return cr.merge(s)}difference(...t){return cr.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:L0}toLocaleString(t=uS,i={}){return this.isValid?Zs.create(this.s.loc.clone(i),t).formatInterval(this):L0}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:L0}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:L0}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:L0}toFormat(t,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:L0}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):Qt.invalid(this.invalidReason)}mapEndpoints(t){return cr.fromDateTimes(t(this.s),t(this.e))}}class cv{static hasDST(t=Fr.defaultZone){const i=Ke.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return gl.isValidZone(t)}static normalizeZone(t){return ad(t,Fr.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:o="gregory"}={}){return(s||er.create(i,r,o)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:o="gregory"}={}){return(s||er.create(i,r,o)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||er.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||er.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return er.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return er.create(i,null,"gregory").eras(t)}static features(){return{relative:wY()}}}function HR(e,t){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(Qt.fromMillis(r).as("days"))}function Hxe(e,t,i){const r=[["years",(g,b)=>b.year-g.year],["quarters",(g,b)=>b.quarter-g.quarter+(b.year-g.year)*4],["months",(g,b)=>b.month-g.month+(b.year-g.year)*12],["weeks",(g,b)=>{const S=HR(g,b);return(S-S%7)/7}],["days",HR]],s={},o=e;let c,u;for(const[g,b]of r)i.indexOf(g)>=0&&(c=g,s[g]=b(e,t),u=o.plus(s),u>t?(s[g]--,e=o.plus(s)):e=u);return[e,s,u,c]}function Wxe(e,t,i,r){let[s,o,c,u]=Hxe(e,t,i);const g=t-s,b=i.filter(E=>["hours","minutes","seconds","milliseconds"].indexOf(E)>=0);b.length===0&&(c<t&&(c=s.plus({[u]:1})),c!==s&&(o[u]=(o[u]||0)+g/(c-s)));const S=Qt.fromObject(o,r);return b.length>0?Qt.fromMillis(g,r).shiftTo(...b).plus(S):S}const Rk={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},WR={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Jxe=Rk.hanidec.replace(/[\[|\]]/g,"").split("");function Yxe(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(Rk.hanidec)!==-1)t+=Jxe.indexOf(e[i]);else for(const s in WR){const[o,c]=WR[s];r>=o&&r<=c&&(t+=r-o)}}return parseInt(t,10)}else return t}function Ma({numberingSystem:e},t=""){return new RegExp(`${Rk[e||"latn"]}${t}`)}const Kxe="missing Intl.DateTimeFormat.formatToParts support";function hi(e,t=i=>i){return{regex:e,deser:([i])=>t(Yxe(i))}}const Zxe=String.fromCharCode(160),DY=`[ ${Zxe}]`,jY=new RegExp(DY,"g");function Xxe(e){return e.replace(/\./g,"\\.?").replace(jY,DY)}function JR(e){return e.replace(/\./g,"").replace(jY," ").toLowerCase()}function Ta(e,t){return e===null?null:{regex:RegExp(e.map(Xxe).join("|")),deser:([i])=>e.findIndex(r=>JR(i)===JR(r))+t}}function YR(e,t){return{regex:e,deser:([,i,r])=>u9(i,r),groups:t}}function hE(e){return{regex:e,deser:([t])=>t}}function Qxe(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function eSe(e,t){const i=Ma(t),r=Ma(t,"{2}"),s=Ma(t,"{3}"),o=Ma(t,"{4}"),c=Ma(t,"{6}"),u=Ma(t,"{1,2}"),g=Ma(t,"{1,3}"),b=Ma(t,"{1,6}"),S=Ma(t,"{1,9}"),E=Ma(t,"{2,4}"),A=Ma(t,"{4,6}"),O=z=>({regex:RegExp(Qxe(z.val)),deser:([q])=>q,literal:!0}),N=(z=>{if(e.literal)return O(z);switch(z.val){case"G":return Ta(t.eras("short",!1),0);case"GG":return Ta(t.eras("long",!1),0);case"y":return hi(b);case"yy":return hi(E,$A);case"yyyy":return hi(o);case"yyyyy":return hi(A);case"yyyyyy":return hi(c);case"M":return hi(u);case"MM":return hi(r);case"MMM":return Ta(t.months("short",!0,!1),1);case"MMMM":return Ta(t.months("long",!0,!1),1);case"L":return hi(u);case"LL":return hi(r);case"LLL":return Ta(t.months("short",!1,!1),1);case"LLLL":return Ta(t.months("long",!1,!1),1);case"d":return hi(u);case"dd":return hi(r);case"o":return hi(g);case"ooo":return hi(s);case"HH":return hi(r);case"H":return hi(u);case"hh":return hi(r);case"h":return hi(u);case"mm":return hi(r);case"m":return hi(u);case"q":return hi(u);case"qq":return hi(r);case"s":return hi(u);case"ss":return hi(r);case"S":return hi(g);case"SSS":return hi(s);case"u":return hE(S);case"uu":return hE(u);case"uuu":return hi(i);case"a":return Ta(t.meridiems(),0);case"kkkk":return hi(o);case"kk":return hi(E,$A);case"W":return hi(u);case"WW":return hi(r);case"E":case"c":return hi(i);case"EEE":return Ta(t.weekdays("short",!1,!1),1);case"EEEE":return Ta(t.weekdays("long",!1,!1),1);case"ccc":return Ta(t.weekdays("short",!0,!1),1);case"cccc":return Ta(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return YR(new RegExp(`([+-]${u.source})(?::(${r.source}))?`),2);case"ZZZ":return YR(new RegExp(`([+-]${u.source})(${r.source})?`),2);case"z":return hE(/[a-z_+-/]{1,256}?/i);default:return O(z)}})(e)||{invalidReason:Kxe};return N.token=e,N}const tSe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function iSe(e,t){const{type:i,value:r}=e;if(i==="literal")return{literal:!0,val:r};const s=t[i];let o=tSe[i];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function rSe(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function sSe(e,t,i){const r=e.match(t);if(r){const s={};let o=1;for(const c in i)if(qy(i,c)){const u=i[c],g=u.groups?u.groups+1:1;!u.literal&&u.token&&(s[u.token.val[0]]=u.deser(r.slice(o,o+g))),o+=g}return[r,s]}else return[r,{}]}function nSe(e){const t=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Wt(e.z)||(i=gl.create(e.z)),Wt(e.Z)||(i||(i=new Es(e.Z)),r=e.Z),Wt(e.q)||(e.M=(e.q-1)*3+1),Wt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Wt(e.u)||(e.S=$k(e.u)),[Object.keys(e).reduce((o,c)=>{const u=t(c);return u&&(o[u]=e[c]),o},{}),i,r]}let dE=null;function oSe(){return dE||(dE=Ke.fromMillis(1555555555555)),dE}function aSe(e,t){if(e.literal)return e;const i=Zs.macroTokenToFormatOpts(e.val),r=GY(i,t);return r==null||r.includes(void 0)?e:r}function zY(e,t){return Array.prototype.concat(...e.map(i=>aSe(i,t)))}function VY(e,t,i){const r=zY(Zs.parseFormat(i),e),s=r.map(c=>eSe(c,e)),o=s.find(c=>c.invalidReason);if(o)return{input:t,tokens:r,invalidReason:o.invalidReason};{const[c,u]=rSe(s),g=RegExp(c,"i"),[b,S]=sSe(t,g,u),[E,A,O]=S?nSe(S):[null,null,void 0];if(qy(S,"a")&&qy(S,"H"))throw new lv("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:g,rawMatches:b,matches:S,result:E,zone:A,specificOffset:O}}}function lSe(e,t,i){const{result:r,zone:s,specificOffset:o,invalidReason:c}=VY(e,t,i);return[r,s,o,c]}function GY(e,t){return e?Zs.create(t,e).formatDateTimeParts(oSe()).map(s=>iSe(s,e)):null}const UY=[0,31,59,90,120,151,181,212,243,273,304,334],qY=[0,31,60,91,121,152,182,213,244,274,305,335];function aa(e,t){return new nl("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function BY(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function HY(e,t,i){return i+(Yw(e)?qY:UY)[t-1]}function WY(e,t){const i=Yw(e)?qY:UY,r=i.findIndex(o=>o<t),s=t-i[r];return{month:r+1,day:s}}function kA(e){const{year:t,month:i,day:r}=e,s=HY(t,i,r),o=BY(t,i,r);let c=Math.floor((s-o+10)/7),u;return c<1?(u=t-1,c=hS(u)):c>hS(t)?(u=t+1,c=1):u=t,{weekYear:u,weekNumber:c,weekday:o,...c9(e)}}function KR(e){const{weekYear:t,weekNumber:i,weekday:r}=e,s=BY(t,1,4),o=eb(t);let c=i*7+r-s-3,u;c<1?(u=t-1,c+=eb(u)):c>o?(u=t+1,c-=eb(t)):u=t;const{month:g,day:b}=WY(u,c);return{year:u,month:g,day:b,...c9(e)}}function pE(e){const{year:t,month:i,day:r}=e,s=HY(t,i,r);return{year:t,ordinal:s,...c9(e)}}function ZR(e){const{year:t,ordinal:i}=e,{month:r,day:s}=WY(t,i);return{year:t,month:r,day:s,...c9(e)}}function uSe(e){const t=l9(e.weekYear),i=pc(e.weekNumber,1,hS(e.weekYear)),r=pc(e.weekday,1,7);return t?i?r?!1:aa("weekday",e.weekday):aa("week",e.week):aa("weekYear",e.weekYear)}function cSe(e){const t=l9(e.year),i=pc(e.ordinal,1,eb(e.year));return t?i?!1:aa("ordinal",e.ordinal):aa("year",e.year)}function JY(e){const t=l9(e.year),i=pc(e.month,1,12),r=pc(e.day,1,cS(e.year,e.month));return t?i?r?!1:aa("day",e.day):aa("month",e.month):aa("year",e.year)}function YY(e){const{hour:t,minute:i,second:r,millisecond:s}=e,o=pc(t,0,23)||t===24&&i===0&&r===0&&s===0,c=pc(i,0,59),u=pc(r,0,59),g=pc(s,0,999);return o?c?u?g?!1:aa("millisecond",s):aa("second",r):aa("minute",i):aa("hour",t)}const fE="Invalid DateTime",XR=864e13;function X_(e){return new nl("unsupported zone",`the zone "${e.name}" is not supported`)}function mE(e){return e.weekData===null&&(e.weekData=kA(e.c)),e.weekData}function r1(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ke({...i,...t,old:i})}function KY(e,t,i){let r=e-t*60*1e3;const s=i.offset(r);if(t===s)return[r,t];r-=(s-t)*60*1e3;const o=i.offset(r);return s===o?[r,s]:[e-Math.min(s,o)*60*1e3,Math.max(s,o)]}function QR(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function j3(e,t,i){return KY(Ok(e),t,i)}function eN(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o={...e.c,year:r,month:s,day:Math.min(e.c.day,cS(r,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},c=Qt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),u=Ok(o);let[g,b]=KY(u,i,e.zone);return c!==0&&(g+=c,b=e.zone.offset(g)),{ts:g,o:b}}function s1(e,t,i,r,s,o){const{setZone:c,zone:u}=i;if(e&&Object.keys(e).length!==0){const g=t||u,b=Ke.fromObject(e,{...i,zone:g,specificOffset:o});return c?b:b.setZone(u)}else return Ke.invalid(new nl("unparsable",`the input "${s}" can't be parsed as ${r}`))}function Q_(e,t,i=!0){return e.isValid?Zs.create(er.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function yE(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=Lr(e.c.year,i?6:4),t?(r+="-",r+=Lr(e.c.month),r+="-",r+=Lr(e.c.day)):(r+=Lr(e.c.month),r+=Lr(e.c.day)),r}function tN(e,t,i,r,s,o){let c=Lr(e.c.hour);return t?(c+=":",c+=Lr(e.c.minute),(e.c.second!==0||!i)&&(c+=":")):c+=Lr(e.c.minute),(e.c.second!==0||!i)&&(c+=Lr(e.c.second),(e.c.millisecond!==0||!r)&&(c+=".",c+=Lr(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!o?c+="Z":e.o<0?(c+="-",c+=Lr(Math.trunc(-e.o/60)),c+=":",c+=Lr(Math.trunc(-e.o%60))):(c+="+",c+=Lr(Math.trunc(e.o/60)),c+=":",c+=Lr(Math.trunc(e.o%60)))),o&&(c+="["+e.zone.ianaName+"]"),c}const ZY={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},hSe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},dSe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},XY=["year","month","day","hour","minute","second","millisecond"],pSe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],fSe=["year","ordinal","hour","minute","second","millisecond"];function iN(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new eY(e);return t}function rN(e,t){const i=ad(t.zone,Fr.defaultZone),r=er.fromObject(t),s=Fr.now();let o,c;if(Wt(e.year))o=s;else{for(const b of XY)Wt(e[b])&&(e[b]=ZY[b]);const u=JY(e)||YY(e);if(u)return Ke.invalid(u);const g=i.offset(s);[o,c]=j3(e,g,i)}return new Ke({ts:o,zone:i,loc:r,o:c})}function sN(e,t,i){const r=Wt(i.round)?!0:i.round,s=(c,u)=>(c=kk(c,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(c,u)),o=c=>i.calendary?t.hasSame(e,c)?0:t.startOf(c).diff(e.startOf(c),c).get(c):t.diff(e,c).get(c);if(i.unit)return s(o(i.unit),i.unit);for(const c of i.units){const u=o(c);if(Math.abs(u)>=1)return s(u,c)}return s(e>t?-0:0,i.units[i.units.length-1])}function nN(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class Ke{constructor(t){const i=t.zone||Fr.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new nl("invalid input"):null)||(i.isValid?null:X_(i));this.ts=Wt(t.ts)?Fr.now():t.ts;let s=null,o=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[s,o]=[t.old.c,t.old.o];else{const u=i.offset(this.ts);s=QR(this.ts,u),r=Number.isNaN(s.year)?new nl("invalid input"):null,s=r?null:s,o=r?null:u}this._zone=i,this.loc=t.loc||er.create(),this.invalid=r,this.weekData=null,this.c=s,this.o=o,this.isLuxonDateTime=!0}static now(){return new Ke({})}static local(){const[t,i]=nN(arguments),[r,s,o,c,u,g,b]=i;return rN({year:r,month:s,day:o,hour:c,minute:u,second:g,millisecond:b},t)}static utc(){const[t,i]=nN(arguments),[r,s,o,c,u,g,b]=i;return t.zone=Es.utcInstance,rN({year:r,month:s,day:o,hour:c,minute:u,second:g,millisecond:b},t)}static fromJSDate(t,i={}){const r=j3e(t)?t.valueOf():NaN;if(Number.isNaN(r))return Ke.invalid("invalid input");const s=ad(i.zone,Fr.defaultZone);return s.isValid?new Ke({ts:r,zone:s,loc:er.fromObject(i)}):Ke.invalid(X_(s))}static fromMillis(t,i={}){if(Zf(t))return t<-XR||t>XR?Ke.invalid("Timestamp out of range"):new Ke({ts:t,zone:ad(i.zone,Fr.defaultZone),loc:er.fromObject(i)});throw new sa(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(Zf(t))return new Ke({ts:t*1e3,zone:ad(i.zone,Fr.defaultZone),loc:er.fromObject(i)});throw new sa("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=ad(i.zone,Fr.defaultZone);if(!r.isValid)return Ke.invalid(X_(r));const s=Fr.now(),o=Wt(i.specificOffset)?r.offset(s):i.specificOffset,c=dS(t,iN),u=!Wt(c.ordinal),g=!Wt(c.year),b=!Wt(c.month)||!Wt(c.day),S=g||b,E=c.weekYear||c.weekNumber,A=er.fromObject(i);if((S||u)&&E)throw new lv("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&u)throw new lv("Can't mix ordinal dates with month/day");const O=E||c.weekday&&!S;let L,N,z=QR(s,o);O?(L=pSe,N=hSe,z=kA(z)):u?(L=fSe,N=dSe,z=pE(z)):(L=XY,N=ZY);let q=!1;for(const fe of L){const Ce=c[fe];Wt(Ce)?q?c[fe]=N[fe]:c[fe]=z[fe]:q=!0}const Z=O?uSe(c):u?cSe(c):JY(c),ee=Z||YY(c);if(ee)return Ke.invalid(ee);const ie=O?KR(c):u?ZR(c):c,[ne,oe]=j3(ie,o,r),me=new Ke({ts:ne,zone:r,o:oe,loc:A});return c.weekday&&S&&t.weekday!==me.weekday?Ke.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${me.toISO()}`):me}static fromISO(t,i={}){const[r,s]=Cxe(t);return s1(r,s,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,s]=Axe(t);return s1(r,s,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,s]=$xe(t);return s1(r,s,i,"HTTP",i)}static fromFormat(t,i,r={}){if(Wt(t)||Wt(i))throw new sa("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:o=null}=r,c=er.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0}),[u,g,b,S]=lSe(c,t,i);return S?Ke.invalid(S):s1(u,g,r,`format ${i}`,t,b)}static fromString(t,i,r={}){return Ke.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,s]=Nxe(t);return s1(r,s,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new sa("need to specify a reason the DateTime is invalid");const r=t instanceof nl?t:new nl(t,i);if(Fr.throwOnInvalid)throw new y3e(r);return new Ke({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=GY(t,er.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(t,i={}){return zY(Zs.parseFormat(t),er.fromObject(i)).map(s=>s.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?mE(this).weekYear:NaN}get weekNumber(){return this.isValid?mE(this).weekNumber:NaN}get weekday(){return this.isValid?mE(this).weekday:NaN}get ordinal(){return this.isValid?pE(this.c).ordinal:NaN}get monthShort(){return this.isValid?cv.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?cv.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?cv.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?cv.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Yw(this.year)}get daysInMonth(){return cS(this.year,this.month)}get daysInYear(){return this.isValid?eb(this.year):NaN}get weeksInWeekYear(){return this.isValid?hS(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:s}=Zs.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(t=0,i={}){return this.setZone(Es.instance(t),i)}toLocal(){return this.setZone(Fr.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=ad(t,Fr.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(i||r){const o=t.offset(this.ts),c=this.toObject();[s]=j3(c,o,t)}return r1(this,{ts:s,zone:t})}else return Ke.invalid(X_(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return r1(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=dS(t,iN),r=!Wt(i.weekYear)||!Wt(i.weekNumber)||!Wt(i.weekday),s=!Wt(i.ordinal),o=!Wt(i.year),c=!Wt(i.month)||!Wt(i.day),u=o||c,g=i.weekYear||i.weekNumber;if((u||s)&&g)throw new lv("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&s)throw new lv("Can't mix ordinal dates with month/day");let b;r?b=KR({...kA(this.c),...i}):Wt(i.ordinal)?(b={...this.toObject(),...i},Wt(i.day)&&(b.day=Math.min(cS(b.year,b.month),b.day))):b=ZR({...pE(this.c),...i});const[S,E]=j3(b,this.o,this.zone);return r1(this,{ts:S,o:E})}plus(t){if(!this.isValid)return this;const i=Qt.fromDurationLike(t);return r1(this,eN(this,i))}minus(t){if(!this.isValid)return this;const i=Qt.fromDurationLike(t).negate();return r1(this,eN(this,i))}startOf(t){if(!this.isValid)return this;const i={},r=Qt.normalizeUnit(t);switch(r){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(r==="weeks"&&(i.weekday=1),r==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?Zs.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):fE}toLocaleString(t=uS,i={}){return this.isValid?Zs.create(this.loc.clone(i),t).formatDateTime(this):fE}toLocaleParts(t={}){return this.isValid?Zs.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const c=t==="extended";let u=yE(this,c);return u+="T",u+=tN(this,c,i,r,s,o),u}toISODate({format:t="extended"}={}){return this.isValid?yE(this,t==="extended"):null}toISOWeekDate(){return Q_(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:o=!1,format:c="extended"}={}){return this.isValid?(s?"T":"")+tN(this,c==="extended",i,t,r,o):null}toRFC2822(){return Q_(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Q_(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?yE(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||t)&&(r&&(s+=" "),i?s+="z":t&&(s+="ZZ")),Q_(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():fE}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return Qt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},o=z3e(i).map(Qt.normalizeUnit),c=t.valueOf()>this.valueOf(),u=c?this:t,g=c?t:this,b=Wxe(u,g,o,s);return c?b.negate():b}diffNow(t="milliseconds",i={}){return this.diff(Ke.now(),t,i)}until(t){return this.isValid?cr.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;const r=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(i)<=r&&r<=s.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||Ke.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(s=t.unit,o=void 0),sN(i,this.plus(r),{...t,numeric:"always",units:s,unit:o})}toRelativeCalendar(t={}){return this.isValid?sN(t.base||Ke.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ke.isDateTime))throw new sa("min requires all arguments be DateTimes");return UR(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(Ke.isDateTime))throw new sa("max requires all arguments be DateTimes");return UR(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:s=null,numberingSystem:o=null}=r,c=er.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0});return VY(c,t,i)}static fromStringExplain(t,i,r={}){return Ke.fromFormatExplain(t,i,r)}static get DATE_SHORT(){return uS}static get DATE_MED(){return tY}static get DATE_MED_WITH_WEEKDAY(){return b3e}static get DATE_FULL(){return iY}static get DATE_HUGE(){return rY}static get TIME_SIMPLE(){return sY}static get TIME_WITH_SECONDS(){return nY}static get TIME_WITH_SHORT_OFFSET(){return oY}static get TIME_WITH_LONG_OFFSET(){return aY}static get TIME_24_SIMPLE(){return lY}static get TIME_24_WITH_SECONDS(){return uY}static get TIME_24_WITH_SHORT_OFFSET(){return cY}static get TIME_24_WITH_LONG_OFFSET(){return hY}static get DATETIME_SHORT(){return dY}static get DATETIME_SHORT_WITH_SECONDS(){return pY}static get DATETIME_MED(){return fY}static get DATETIME_MED_WITH_SECONDS(){return mY}static get DATETIME_MED_WITH_WEEKDAY(){return w3e}static get DATETIME_FULL(){return yY}static get DATETIME_FULL_WITH_SECONDS(){return gY}static get DATETIME_HUGE(){return vY}static get DATETIME_HUGE_WITH_SECONDS(){return bY}}function n1(e){if(Ke.isDateTime(e))return e;if(e&&e.valueOf&&Zf(e.valueOf()))return Ke.fromJSDate(e);if(e&&typeof e=="object")return Ke.fromObject(e);throw new sa(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function mSe(e,t="system"){if(!e||!FR.has(e.timeZone))return t;const i=FR.get(e.timeZone);return gSe(e.timeZone)||e.respectsDaylightSaving?i:ySe(i)}function ySe(e){const t=Ke.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Es.instance(-i).formatOffset(0,"narrow")}`}function gSe(e){return e.startsWith("UTC")}let Mh=class extends Ni($e){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,t){const{timeZone:i,respectsDaylightSaving:r}=t;return{timeZone:i,respectsDaylightSaving:r}}readTimeZone(e,t){return"timeZoneIANA"in t?t.timeZoneIANA:mSe(t)}writeTimeZone(e,t){t.timeZoneIANA=e}equals(e){return!(ae(e)||ae(this.timeZone)||ae(e.timeZone))&&this.timeZone===e.timeZone}};v([_()],Mh.prototype,"legacy",void 0),v([Ne("legacy",["timeZone"])],Mh.prototype,"readLegacy",null),v([_({type:String,nonNullable:!0})],Mh.prototype,"timeZone",void 0),v([Ne("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],Mh.prototype,"readTimeZone",null),v([qe("timeZone")],Mh.prototype,"writeTimeZone",null),Mh=v([K("esri.time.TimeReference")],Mh);const By=Mh;let Uu=class extends Ni($e){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};v([_()],Uu.prototype,"creatorField",void 0),v([_()],Uu.prototype,"creationDateField",void 0),v([_()],Uu.prototype,"editorField",void 0),v([_()],Uu.prototype,"editDateField",void 0),v([_()],Uu.prototype,"realm",void 0),v([_({type:By})],Uu.prototype,"dateFieldsTimeReference",void 0),Uu=v([K("esri.layers.support.EditFieldsInfo")],Uu);const vSe=Uu;let Bl=class extends Ni($e){constructor(e){super(e)}};v([_({constructOnly:!0,json:{write:!0}})],Bl.prototype,"name",void 0),v([_({constructOnly:!0,json:{write:!0}})],Bl.prototype,"fields",void 0),v([_({constructOnly:!0,json:{write:!0}})],Bl.prototype,"isAscending",void 0),v([_({constructOnly:!0,json:{write:!0}})],Bl.prototype,"indexType",void 0),v([_({constructOnly:!0,json:{write:!0}})],Bl.prototype,"isUnique",void 0),v([_({constructOnly:!0,json:{write:!0}})],Bl.prototype,"description",void 0),Bl=v([K("esri.layers.support.FeatureIndex")],Bl);const OA=new It({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function bSe(e,t,i,r){const s=await Hd(e);if(await Nk(e,t,r),!s.addAttachment)throw new de(r,"Layer source does not support addAttachment capability");return s.addAttachment(t,i)}function Nk(e,t,i){const{attributes:r}=t,{objectIdField:s}=e;return e.get("capabilities.data.supportsAttachment")?t?r?s&&r[s]?Promise.resolve():Promise.reject(new de(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new de(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new de(i,"A feature is required to add/delete/update attachments")):Promise.reject(new de(i,"this layer doesn't support attachments"))}async function wSe(e,t,i,r,s){const o=await Hd(e);if(await Nk(e,t,s),!o.updateAttachment)throw new de(s,"Layer source does not support updateAttachment capability");return o.updateAttachment(t,i,r)}async function _Se(e,t,i){const r=await pe(()=>import("./editingSupport.f82ee33f.js"),["assets/editingSupport.f82ee33f.js","assets/assetEditingSupport.240adbda.js"]),s=await e.load();return r.applyEdits(s,s.source,t,i)}async function xSe(e,t,i,r){const s=await Hd(e);if(await Nk(e,t,r),!s.deleteAttachments)throw new de(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,i)}async function SSe(e,t,i){const r=(await e.load({signal:t==null?void 0:t.signal})).source;if(!r.fetchRecomputedExtents)throw new de(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function ISe(e,t,i,r){var O,L;t=eS.from(t),await e.load();const s=e.source,o=e.capabilities;if(!((O=o==null?void 0:o.data)!=null&&O.supportsAttachment))throw new de(r,"this layer doesn't support attachments");const{attachmentTypes:c,objectIds:u,globalIds:g,num:b,size:S,start:E,where:A}=t;if(!((L=o==null?void 0:o.operations)!=null&&L.supportsQueryAttachments)&&((c==null?void 0:c.length)>0||(g==null?void 0:g.length)>0||(S==null?void 0:S.length)>0||b||E||A))throw new de(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!((u==null?void 0:u.length)||(g==null?void 0:g.length)||A))throw new de(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new de(r,"Layer source does not support queryAttachments capability",t);return s.queryAttachments(t)}async function ESe(e,t,i,r){var o;const s=await Hd(e);if(!s.queryObjectIds)throw new de(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds((o=Xl.from(t))!=null?o:e.createQuery(),i)}async function MSe(e,t,i,r){var o;const s=await Hd(e);if(!s.queryFeatureCount)throw new de(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount((o=Xl.from(t))!=null?o:e.createQuery(),i)}async function TSe(e,t,i,r){var o;const s=await Hd(e);if(!s.queryExtent)throw new de(r,"Layer source does not support queryExtent capability");return s.queryExtent((o=Xl.from(t))!=null?o:e.createQuery(),i)}async function CSe(e,t,i,r){const s=await Hd(e);if(!s.queryRelatedFeatures)throw new de(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(Vy.from(t),i)}async function ASe(e,t,i,r){const s=await Hd(e);if(!s.queryRelatedFeaturesCount)throw new de(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(Vy.from(t),i)}async function $Se(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(U(r)&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await I2e(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function kSe(e){const t=new Xl,i=e.get("capabilities.data"),r=e.get("capabilities.query");t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:s,timeExtent:o}=e;return t.timeExtent=s!=null&&o!=null?o.offset(-s.value,s.unit):o||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function QY(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function eK(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function OSe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function Hd(e){return(await e.load()).source}async function PSe(e,t){if(!qt||qt.findCredential(e))return;let i;try{const r=await Z6(e,t);r&&(i=await qt.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=U(t)?t.signal:null;await qt.getCredential(e,{signal:r})}catch{}}async function FSe(e,t){var s;const i=(s=e.parsedUrl)==null?void 0:s.path;if(!i)return;const r=e.editFieldsInfo;(e.userHasUpdateItemPrivileges||e.userHasFullEditingPrivileges&&e.capabilities.operations.supportsEditing||(r==null?void 0:r.creatorField)||(r==null?void 0:r.editorField))&&await PSe(i,t)}function LSe(e){var t;return!((t=e.sourceJSON)!=null&&t.isMultiServicesView)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}let Mm=class extends Ni($e){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};v([_({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Mm.prototype,"shapeAreaField",void 0),v([_({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Mm.prototype,"shapeLengthField",void 0),v([_({type:String,json:{read:e=>qle.read(e)||Ble.read(e)}})],Mm.prototype,"units",void 0),Mm=v([K("esri.layers.support.GeometryFieldsInfo")],Mm);const RSe=Mm;var PA;let Tm=PA=class extends $e{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Be}clone(){return new PA({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};v([_({type:String,json:{write:!0}})],Tm.prototype,"floorField",void 0),v([_({json:{read:!1,write:!1}})],Tm.prototype,"viewAllMode",void 0),v([_({json:{read:!1,write:!1}})],Tm.prototype,"viewAllLevelIds",void 0),Tm=PA=v([K("esri.layers.support.LayerFloorInfo")],Tm);const NSe=Tm,oN=new It({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),aN=new It({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Ko=class extends Ni($e){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};v([_({json:{read:oN.read,write:oN.write}})],Ko.prototype,"cardinality",void 0),v([_({json:{read:!0,write:!0}})],Ko.prototype,"composite",void 0),v([_({json:{read:!0,write:!0}})],Ko.prototype,"id",void 0),v([_({json:{read:!0,write:!0}})],Ko.prototype,"keyField",void 0),v([_({json:{read:!0,write:!0}})],Ko.prototype,"keyFieldInRelationshipTable",void 0),v([_({json:{read:!0,write:!0}})],Ko.prototype,"name",void 0),v([_({json:{read:!0,write:!0}})],Ko.prototype,"relatedTableId",void 0),v([_({json:{read:!0,write:!0}})],Ko.prototype,"relationshipTableId",void 0),v([_({json:{read:aN.read,write:aN.write}})],Ko.prototype,"role",void 0),Ko=v([K("esri.layers.support.Relationship")],Ko);const DSe=Ko,jSe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function ut(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function e2(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function zSe(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Xw(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(s=>s.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}function tK(e,t){return{analytics:VSe(e),attachment:GSe(e),data:USe(e),metadata:qSe(e),operations:BSe(e.capabilities,e,t),query:HSe(e,t),queryRelated:WSe(e),queryTopFeatures:JSe(e),editing:YSe(e)}}function VSe(e){return{supportsCacheHint:Xw(e.advancedQueryCapabilities,"queryAnalytics")}}function GSe(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Xw(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:ut(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const s=jSe[r.name];s&&(i[s]=!!r.isEnabled)}),i}function USe(e){return{isVersioned:ut(e,"isDataVersioned",!1),supportsAttachment:ut(e,"hasAttachments",!1),supportsM:ut(e,"hasM",!1),supportsZ:ut(e,"hasZ",!1)}}function qSe(e){return{supportsAdvancedFieldProperties:ut(e,"supportsFieldDescriptionProperty",!1)}}function BSe(e,t,i){const r=e?e.toLowerCase().split(",").map(A=>A.trim()):[],s=i?_c(i):null,o=r.includes(U(s)&&s.serverType==="MapServer"?"data":"query"),c=r.includes("editing")&&!t.datesInUnknownTimezone;let u=c&&r.includes("create"),g=c&&r.includes("delete"),b=c&&r.includes("update");const S=r.includes("changetracking"),E=t.advancedQueryCapabilities;return c&&!(u||g||b)&&(u=g=b=!0),{supportsCalculate:ut(t,"supportsCalculate",!1),supportsTruncate:ut(t,"supportsTruncate",!1),supportsValidateSql:ut(t,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:g,supportsEditing:c,supportsChangeTracking:S,supportsQuery:o,supportsQueryAnalytics:ut(E,"supportsQueryAnalytic",!1),supportsQueryAttachments:ut(E,"supportsQueryAttachments",!1),supportsQueryTopFeatures:ut(E,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:ut(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:b,supportsExceedsLimitStatistics:ut(t,"supportsExceedsLimitStatistics",!1)}}function HSe(e,t){var S;const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,o=e.currentVersion,c=t==null?void 0:t.includes("MapServer"),u=!c||o>=Se("mapserver-pbf-version-support"),g=HJ(t),b=new Set(((S=e.supportedQueryFormats)!=null?S:"").split(",").map(E=>E.toLowerCase().trim()));return{supportsStatistics:ut(i,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:ut(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:ut(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:zSe(i),supportsCentroid:ut(i,"supportsReturningGeometryCentroid",!1),supportsDistance:ut(i,"supportsQueryWithDistance",!1),supportsDistinct:ut(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ut(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ut(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:ut(i,"supportsHavingClause",!1),supportsOrderBy:ut(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ut(i,"supportsPagination",!1),supportsQuantization:ut(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ut(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ut(e,"supportsReturningQueryGeometry",!1),supportsResultType:ut(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ut(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ut(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ut(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:ut(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:ut(r,"allowOthersToQuery",!0),supportsHistoricMoment:ut(s,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:u&&b.has("pbf"),supportsDisjointSpatialRelationship:ut(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:ut(i,"supportsQueryWithCacheHint",!1)||Xw(i,"query"),supportsDefaultSpatialReference:ut(i,"supportsDefaultSR",!1),supportsCompactGeometry:g,supportsFullTextSearch:ut(i,"supportsFullTextSearch",!1),maxRecordCountFactor:e2(e,"maxRecordCountFactor",void 0),maxRecordCount:e2(e,"maxRecordCount",void 0),standardMaxRecordCount:e2(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:e2(e,"tileMaxRecordCount",void 0)}}function WSe(e){const t=e.advancedQueryCapabilities,i=ut(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ut(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Xw(t,"queryRelated")}}function JSe(e){return{supportsCacheHint:Xw(e.advancedQueryCapabilities,"queryTopFilter")}}function YSe(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ut(e,"allowGeometryUpdates",!0),supportsGlobalId:ut(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:ut(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:ut(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ut(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ut(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ut(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ut(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ut(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ut(t,"allowOthersToUpdate",!0)}}const KSe=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=wt.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(Be.ofType(Bl)),this.version=void 0}readCapabilitiesFromService(i,r){return tK(r,this.url)}get effectiveCapabilities(){var c;const i=this.capabilities;if(!i)return null;const r=ve(i),{operations:s,editing:o}=r;return(c=this.sourceJSON)!=null&&c.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=o.supportsDeleteByOthers=o.supportsGeometryUpdate=o.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=o.supportsGeometryUpdate=!0),r)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}readIsTableFromService(i,r){return r.type==="Table"}readMinScale(i,r){return r.effectiveMinScale||i||0}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,r){return QY(r)}readObjectIdFieldFromService(i,r){return eK(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){const r=W2e({layer:this,url:i,nonStandardUrlAllowed:!0,logger:Ie.getLogger(this.declaredClass)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,o){J2e(this,i,null,r,o)}readVersion(i,r){return OSe(r)}};return v([_({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),v([Ne("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),v([_({readOnly:!0})],t.prototype,"effectiveCapabilities",null),v([_({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),v([_({type:By})],t.prototype,"dateFieldsTimeReference",void 0),v([_({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),v([_({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),v([_({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),v([_({readOnly:!0,type:vSe})],t.prototype,"editFieldsInfo",void 0),v([_({readOnly:!0})],t.prototype,"editingInfo",void 0),v([Ne("editingInfo")],t.prototype,"readEditingInfo",null),v([_((()=>{const i=ve(h3e),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),v([_({type:NSe,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],t.prototype,"floorInfo",void 0),v([_({type:vi,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),v([_()],t.prototype,"gdbVersion",void 0),v([_({readOnly:!0,type:RSe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),v([_({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:OA.read}}}})],t.prototype,"geometryType",void 0),v([_({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),v([_({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),v([_({readOnly:!0,type:Jw})],t.prototype,"heightModelInfo",void 0),v([_({type:Date})],t.prototype,"historicMoment",void 0),v([_({readOnly:!0})],t.prototype,"isTable",void 0),v([Ne("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),v([_({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),v([_(f3e)],t.prototype,"minScale",void 0),v([Ne("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),v([_(m3e)],t.prototype,"maxScale",void 0),v([Ne("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),v([_({type:String})],t.prototype,"globalIdField",void 0),v([Ne("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),v([_({type:String})],t.prototype,"objectIdField",void 0),v([Ne("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),v([_({type:By})],t.prototype,"preferredTimeReference",void 0),v([_({type:[DSe],readOnly:!0})],t.prototype,"relationships",void 0),v([_()],t.prototype,"sourceJSON",void 0),v([_({type:Boolean})],t.prototype,"returnM",void 0),v([_({type:Boolean})],t.prototype,"returnZ",void 0),v([_({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),v([Ne("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),v([_({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),v([_({type:wt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),v([_({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),v([_({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),v([_({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),v([_({type:Be.ofType(Bl),readOnly:!0})],t.prototype,"indexes",void 0),v([_(u3e)],t.prototype,"url",null),v([qe("url")],t.prototype,"writeUrl",null),v([_({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),v([Ne("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=v([K("esri.layers.mixins.FeatureLayerBase")],t),t};let Cm=class extends Ni($e){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};v([_({type:String,json:{write:!0}})],Cm.prototype,"expression",void 0),v([_({type:String,json:{write:!0}})],Cm.prototype,"title",void 0),v([_({type:String,json:{write:!0}})],Cm.prototype,"returnType",void 0),Cm=v([K("esri.layers.support.ExpressionInfo")],Cm);const Dk=Cm;var FA;let qu=FA=class extends $e{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new FA({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:ve(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};v([_({type:Boolean,json:{write:!0}})],qu.prototype,"isAutoGenerated",void 0),v([_({type:String,json:{write:!0}})],qu.prototype,"name",void 0),v([_({type:String,json:{write:!0}})],qu.prototype,"alias",void 0),v([_({type:String,json:{write:!0}})],qu.prototype,"onStatisticField",void 0),v([_({type:Dk,json:{write:!0}})],qu.prototype,"onStatisticExpression",void 0),v([_({type:String,json:{write:!0}})],qu.prototype,"statisticType",void 0),qu=FA=v([K("esri.layers.support.AggregateField")],qu);const g0=qu;let Md=class extends $e{constructor(){super(...arguments),this.type=null}};v([_({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Md.prototype,"type",void 0),Md=v([K("esri.layers.support.FeatureReduction")],Md);const jk="__begin__",zk="__end__",ZSe=new RegExp(jk,"ig"),XSe=new RegExp(zk,"ig"),lN=new RegExp("^"+jk,"i"),uN=new RegExp(zk+"$","i"),pS='"',QSe=pS+" + ",e5e=" + "+pS;function t5e(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function i5e(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function Vk(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=t5e(e.labelExpression),t.type="conventional"),t}function r5e(e){const t=Vk(e);if(!t)return null;switch(t.type){case"conventional":return LA(t.expression);case"arcade":return t.expression}return null}function s5e(e){const t=Vk(e);if(!t)return null;switch(t.type){case"conventional":return o5e(t.expression);case"arcade":return iK(t.expression)}return null}function LA(e){let t;return e?(t=pa(e,i=>jk+'$feature["'+i+'"]'+zk),t=lN.test(t)?t.replace(lN,""):pS+t,t=uN.test(t)?t.replace(uN,""):t+pS,t=t.replace(ZSe,QSe).replace(XSe,e5e)):t='""',t}const n5e=/^\s*\{([^}]+)\}\s*$/i;function o5e(e){const t=e==null?void 0:e.match(n5e);return t&&t[1].trim()||null}const a5e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,l5e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,u5e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function iK(e){if(!e)return null;let t=a5e.exec(e)||l5e.exec(e);return t?t[1]||t[3]:(t=u5e.exec(e),t?t[2]:null)}var RA;let Th=RA=class extends $e{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?LA(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=LA(this.value)),e!=null&&(t[i]=e)}clone(){return new RA({expression:this.expression,title:this.title,value:this.value})}};v([_({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Th.prototype,"expression",void 0),v([Ne("expression",["expression","value"])],Th.prototype,"readExpression",null),v([qe("expression")],Th.prototype,"writeExpression",null),v([_({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Th.prototype,"title",void 0),v([_({json:{read:!1,write:!1}})],Th.prototype,"value",void 0),Th=RA=v([K("esri.layers.support.LabelExpressionInfo")],Th);const rK=Th,sK=[252,146,31,255],$ze=[153,153,153,255],c5e={type:"esriSMS",style:"esriSMSCircle",size:6,color:sK,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},h5e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:sK},d5e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},p5e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},f5e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},m5e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},y5e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},g5e=ca.fromJSON(c5e),v5e=sn.fromJSON(h5e),b5e=fl.fromJSON(d5e),w5e=gg.fromJSON(p5e);function kze(e){if(ae(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return g5e;case"polyline":return v5e;case"polygon":case"extent":return b5e}return null}const Oze=ca.fromJSON(f5e),Pze=sn.fromJSON(m5e),Fze=fl.fromJSON(y5e);var NA;const t2=new It({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function i2(e,t,i){return{enabled:!TU(i==null?void 0:i.layer)}}function nK(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function _5e(e){return(e==null?void 0:e.type)==="map-image"}function oK(e){var t,i;return!!_5e(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function x5e(e){return nK(e)||oK(e==null?void 0:e.layer)}let pr=NA=class extends $e{static evaluateWhere(e,t){const i=(r,s,o)=>{switch(s){case"=":return r==o;case"<>":return r!=o;case">":return r>o;case">=":return r>=o;case"<":return r<o;case"<=":return r<=o}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),o=r[3],c=i(t[r[4]],r[5],r[6]);switch(o){case"AND":return s&&c;case"OR":return s||c}}return!1}catch{console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=w5e,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=i5e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=iK(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&nK(r))e=new rK({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return Vk(this)}getLabelExpressionArcade(){return r5e(this)}getLabelExpressionSingleField(){return s5e(this)}hash(){return JSON.stringify(this)}clone(){return new NA({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ve(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ve(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};v([_({type:String,json:{write:!0}})],pr.prototype,"name",void 0),v([_({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:i2}}}}})],pr.prototype,"allowOverrun",void 0),v([_({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:i2}}}}})],pr.prototype,"deconflictionStrategy",void 0),v([_({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&oK(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],pr.prototype,"labelExpression",void 0),v([Ne("labelExpression")],pr.prototype,"readLabelExpression",null),v([qe("labelExpression")],pr.prototype,"writeLabelExpression",null),v([_({type:rK,json:{write:{overridePolicy:(e,t,i)=>x5e(i)?{allowNull:!0}:{enabled:!1}}}})],pr.prototype,"labelExpressionInfo",void 0),v([qe("labelExpressionInfo")],pr.prototype,"writeLabelExpressionInfo",null),v([_({type:t2.apiValues,json:{type:t2.jsonValues,read:t2.read,write:t2.write}})],pr.prototype,"labelPlacement",void 0),v([_({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],pr.prototype,"labelPosition",void 0),v([_({type:Number})],pr.prototype,"maxScale",void 0),v([qe("maxScale")],pr.prototype,"writeMaxScale",null),v([_({type:Number})],pr.prototype,"minScale",void 0),v([qe("minScale")],pr.prototype,"writeMinScale",null),v([_({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:i2}}}}})],pr.prototype,"repeatLabel",void 0),v([_({type:Number,cast:Bt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:i2}}}}})],pr.prototype,"repeatLabelDistance",void 0),v([_({types:tfe,json:{origins:{"web-scene":{types:ife,write:aR,default:null}},write:aR,default:null}})],pr.prototype,"symbol",void 0),v([_({type:Boolean,json:{write:!0}})],pr.prototype,"useCodedValues",void 0),v([_({type:String,json:{write:!0}})],pr.prototype,"where",void 0),pr=NA=v([K("esri.layers.support.LabelClass")],pr);const h9=pr;var DA;const gE=zd({types:O5}),S5e="esri.layers.support.FeatureReductionBinning";let mn=DA=class extends Md{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());tn(i,r,t)}readRenderer(e,t,i){var s,o;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return r?(o=Yb(r,t,i))!=null?o:void 0:t.defaultSymbol?t.types&&t.types.length?new Ww({defaultSymbol:gE(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(c=>({id:c.id,symbol:gE(c.symbol,c,i)}))}):new Gy({symbol:gE(t.defaultSymbol,t,i)}):null}clone(){return new DA({fields:ve(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:ve(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:ve(this.popupTemplate),renderer:ve(this.renderer)})}};v([Qe({binning:"binning"})],mn.prototype,"type",void 0),v([Qe({geohash:"geohash"})],mn.prototype,"binType",void 0),v([_({type:Number,range:{min:1,max:9},json:{write:!0}})],mn.prototype,"fixedBinLevel",void 0),v([_({type:[h9],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],mn.prototype,"labelingInfo",void 0),v([_(Ak)],mn.prototype,"labelsVisible",void 0),v([_({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],mn.prototype,"maxScale",void 0),v([_(Ck)],mn.prototype,"popupEnabled",void 0),v([_({type:$w,json:{name:"popupInfo",write:!0}})],mn.prototype,"popupTemplate",void 0),v([_({type:[g0],json:{write:!0}})],mn.prototype,"fields",void 0),v([qe("fields")],mn.prototype,"writeFields",null),v([_({types:o9,json:{write:{target:"drawingInfo.renderer"}}})],mn.prototype,"renderer",void 0),v([Ne("renderer",["drawingInfo.renderer"])],mn.prototype,"readRenderer",null),mn=DA=v([K(S5e)],mn);const aK=mn;var jA;const vE=zd({types:O5}),I5e="esri.layers.support.FeatureReductionCluster";function cN(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Pr=jA=class extends $e{constructor(e){super(e),this.type="cluster",this.clusterRadius=Bt("80px"),this.clusterMinSize=Bt("12px"),this.clusterMaxSize=Bt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(e,t,i){var s,o,c;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return(o=r==null?void 0:r.authoringInfo)!=null&&o.isAutoGenerated?null:r?cN(r)?null:(c=Yb(r,t,i))!=null?c:void 0:t.defaultSymbol?t.types&&t.types.length?new Ww({defaultSymbol:vE(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(u=>({id:u.id,symbol:vE(u.symbol,u,i)}))}):new Gy({symbol:vE(t.defaultSymbol,t,i)}):null}readSymbol(e,t,i){var s,o,c;const r=(s=t.drawingInfo)==null?void 0:s.renderer;return(o=r==null?void 0:r.authoringInfo)!=null&&o.isAutoGenerated?null:r&&cN(r)?(c=Yb(r,t,i))==null?void 0:c.symbol:null}writeSymbol(e,t,i,r){var o,c;const s=(c=(o=this.renderer)==null?void 0:o.authoringInfo)==null?void 0:c.isAutoGenerated;if(!this.renderer||s){const u=new Gy({symbol:e});t.drawingInfo={renderer:u.write({},r)}}}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());tn(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>g0.fromJSON(r))}clone(){return new jA({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ve(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ve(this.fields),maxScale:this.maxScale,renderer:ve(this.renderer),symbol:ve(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:ve(this.popupTemplate)})}};v([_({type:["cluster"],readOnly:!0,json:{write:!0}})],Pr.prototype,"type",void 0),v([_({type:Number,cast:e=>e==="auto"?e:Bt(e),json:{write:!0}})],Pr.prototype,"clusterRadius",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Pr.prototype,"clusterMinSize",void 0),v([_({type:Number,cast:Bt,json:{write:!0}})],Pr.prototype,"clusterMaxSize",void 0),v([_({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Pr.prototype,"maxScale",void 0),v([_(Ck)],Pr.prototype,"popupEnabled",void 0),v([_({type:$w,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Pr.prototype,"popupTemplate",void 0),v([_({types:o9,json:{write:{target:"drawingInfo.renderer"}}})],Pr.prototype,"renderer",void 0),v([Ne("renderer",["drawingInfo.renderer"])],Pr.prototype,"readRenderer",null),v([_({types:Qpe})],Pr.prototype,"symbol",void 0),v([Ne("symbol",["drawingInfo.renderer"])],Pr.prototype,"readSymbol",null),v([qe("symbol")],Pr.prototype,"writeSymbol",null),v([_({type:[h9],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Pr.prototype,"labelingInfo",void 0),v([_(Ak)],Pr.prototype,"labelsVisible",void 0),v([_({type:[g0],json:{write:!0}})],Pr.prototype,"fields",void 0),v([qe("fields")],Pr.prototype,"writeFields",null),v([Ne("fields")],Pr.prototype,"readFields",null),Pr=jA=v([K(I5e)],Pr);const lK=Pr;var zA;let z3=zA=class extends Md{constructor(e){super(e),this.type="selection"}clone(){return new zA}};v([_({type:["selection"]})],z3.prototype,"type",void 0),z3=zA=v([K("esri.layers.support.FeatureReductionSelection")],z3);const hN=z3,dN={key:"type",base:Md,typeMap:{cluster:lK,binning:aK}},E5e={types:{key:"type",base:Md,typeMap:{selection:hN,cluster:lK,binning:aK}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:dN},"portal-item":{types:dN},"web-scene":{types:{key:"type",base:Md,typeMap:{selection:hN}}}}}},R0={Base64:0,Hex:1,String:2,Raw:3},Iy=8,uK=(1<<Iy)-1;function wd(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function M5e(e){const t=[];for(let i=0,r=e.length*Iy;i<r;i+=Iy)t[i>>5]|=(e.charCodeAt(i/Iy)&uK)<<i%32;return t}function T5e(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=Iy)t.push(String.fromCharCode(e[i>>5]>>>i%32&uK));return t.join("")}function C5e(e){const t="0123456789abcdef",i=[];for(let r=0,s=4*e.length;r<s;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function A5e(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,o=4*e.length;s<o;s+=3){const c=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let u=0;u<4;u++)8*s+6*u>32*e.length?r.push(t):r.push(i.charAt(c>>6*(3-u)&63))}return r.join("")}function $5e(e,t){return e<<t|e>>>32-t}function d9(e,t,i,r,s,o){return wd($5e(wd(wd(t,e),wd(r,o)),s),i)}function Ns(e,t,i,r,s,o,c){return d9(t&i|~t&r,e,t,s,o,c)}function Ds(e,t,i,r,s,o,c){return d9(t&r|i&~r,e,t,s,o,c)}function js(e,t,i,r,s,o,c){return d9(t^i^r,e,t,s,o,c)}function zs(e,t,i,r,s,o,c){return d9(i^(t|~r),e,t,s,o,c)}function k5e(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,s=-1732584194,o=271733878;for(let c=0;c<e.length;c+=16){const u=i,g=r,b=s,S=o;i=Ns(i,r,s,o,e[c+0],7,-680876936),o=Ns(o,i,r,s,e[c+1],12,-389564586),s=Ns(s,o,i,r,e[c+2],17,606105819),r=Ns(r,s,o,i,e[c+3],22,-1044525330),i=Ns(i,r,s,o,e[c+4],7,-176418897),o=Ns(o,i,r,s,e[c+5],12,1200080426),s=Ns(s,o,i,r,e[c+6],17,-1473231341),r=Ns(r,s,o,i,e[c+7],22,-45705983),i=Ns(i,r,s,o,e[c+8],7,1770035416),o=Ns(o,i,r,s,e[c+9],12,-1958414417),s=Ns(s,o,i,r,e[c+10],17,-42063),r=Ns(r,s,o,i,e[c+11],22,-1990404162),i=Ns(i,r,s,o,e[c+12],7,1804603682),o=Ns(o,i,r,s,e[c+13],12,-40341101),s=Ns(s,o,i,r,e[c+14],17,-1502002290),r=Ns(r,s,o,i,e[c+15],22,1236535329),i=Ds(i,r,s,o,e[c+1],5,-165796510),o=Ds(o,i,r,s,e[c+6],9,-1069501632),s=Ds(s,o,i,r,e[c+11],14,643717713),r=Ds(r,s,o,i,e[c+0],20,-373897302),i=Ds(i,r,s,o,e[c+5],5,-701558691),o=Ds(o,i,r,s,e[c+10],9,38016083),s=Ds(s,o,i,r,e[c+15],14,-660478335),r=Ds(r,s,o,i,e[c+4],20,-405537848),i=Ds(i,r,s,o,e[c+9],5,568446438),o=Ds(o,i,r,s,e[c+14],9,-1019803690),s=Ds(s,o,i,r,e[c+3],14,-187363961),r=Ds(r,s,o,i,e[c+8],20,1163531501),i=Ds(i,r,s,o,e[c+13],5,-1444681467),o=Ds(o,i,r,s,e[c+2],9,-51403784),s=Ds(s,o,i,r,e[c+7],14,1735328473),r=Ds(r,s,o,i,e[c+12],20,-1926607734),i=js(i,r,s,o,e[c+5],4,-378558),o=js(o,i,r,s,e[c+8],11,-2022574463),s=js(s,o,i,r,e[c+11],16,1839030562),r=js(r,s,o,i,e[c+14],23,-35309556),i=js(i,r,s,o,e[c+1],4,-1530992060),o=js(o,i,r,s,e[c+4],11,1272893353),s=js(s,o,i,r,e[c+7],16,-155497632),r=js(r,s,o,i,e[c+10],23,-1094730640),i=js(i,r,s,o,e[c+13],4,681279174),o=js(o,i,r,s,e[c+0],11,-358537222),s=js(s,o,i,r,e[c+3],16,-722521979),r=js(r,s,o,i,e[c+6],23,76029189),i=js(i,r,s,o,e[c+9],4,-640364487),o=js(o,i,r,s,e[c+12],11,-421815835),s=js(s,o,i,r,e[c+15],16,530742520),r=js(r,s,o,i,e[c+2],23,-995338651),i=zs(i,r,s,o,e[c+0],6,-198630844),o=zs(o,i,r,s,e[c+7],10,1126891415),s=zs(s,o,i,r,e[c+14],15,-1416354905),r=zs(r,s,o,i,e[c+5],21,-57434055),i=zs(i,r,s,o,e[c+12],6,1700485571),o=zs(o,i,r,s,e[c+3],10,-1894986606),s=zs(s,o,i,r,e[c+10],15,-1051523),r=zs(r,s,o,i,e[c+1],21,-2054922799),i=zs(i,r,s,o,e[c+8],6,1873313359),o=zs(o,i,r,s,e[c+15],10,-30611744),s=zs(s,o,i,r,e[c+6],15,-1560198380),r=zs(r,s,o,i,e[c+13],21,1309151649),i=zs(i,r,s,o,e[c+4],6,-145523070),o=zs(o,i,r,s,e[c+11],10,-1120210379),s=zs(s,o,i,r,e[c+2],15,718787259),r=zs(r,s,o,i,e[c+9],21,-343485551),i=wd(i,u),r=wd(r,g),s=wd(s,b),o=wd(o,S)}return[i,r,s,o]}function cK(e,t=R0.Hex){const i=t||R0.Base64,r=k5e(M5e(e),e.length*Iy);switch(i){case R0.Raw:return r;case R0.Hex:return C5e(r);case R0.String:return T5e(r);case R0.Base64:return A5e(r)}}var VA;let hv=VA=class extends s9{writeLevels(e,t,i){for(const r in e){const s=this.levels[r];return void(t.stops=s)}}clone(){return new VA({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:bd(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:bd(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:ve(this.levels)})}};v([_()],hv.prototype,"levels",void 0),v([qe("levels")],hv.prototype,"writeLevels",null),hv=VA=v([K("esri.views.2d.engine.LevelDependentSizeVariable")],hv);const O5e=Ie.getLogger("esri.views.2d.layers.support.clusterUtils");Se.add("esri-cluster-arcade-enabled",!0);const P5e=Se("esri-cluster-arcade-enabled"),F5e=(e,t,i,r,s)=>{const o=t.clone();if(!R5e(o))return o;if(o.authoringInfo||(o.authoringInfo=new bk),o.authoringInfo.isAutoGenerated=!0,"visualVariables"in o){const c=(o.visualVariables||[]).filter(g=>g.valueExpression!=="$view.scale"),u=hK(c);c.forEach(g=>{g.type==="rotation"?g.field?g.field=sp(e,g.field,"avg_angle","number"):g.valueExpression&&(g.field=o1(e,g.valueExpression,"avg_angle","number"),g.valueExpression=null):g.normalizationField?(g.field=sp(e,g.field,"avg_norm","number",g.normalizationField),g.normalizationField=null):g.field?g.field=sp(e,g.field,"avg","number"):g.valueExpression&&(g.field=o1(e,g.valueExpression,"avg","number"),g.valueExpression=null)}),ae(u)&&!L5e(c)&&s&&(c.push(dK(i,r)),o.dynamicClusterSize=!0),o.visualVariables=c}switch(o.type){case"simple":break;case"pie-chart":for(const c of o.attributes)c.field?c.field=sp(e,c.field,"sum","number"):c.valueExpression&&(c.field=o1(e,c.valueExpression,"sum","number"),c.valueExpression=null);break;case"unique-value":o.field?o.field=sp(e,o.field,"mode","string"):o.valueExpression&&(o.field=o1(e,o.valueExpression,"mode","string"),o.valueExpression=null);break;case"class-breaks":o.normalizationField?(o.field=sp(e,o.field,"avg_norm","number",o.normalizationField),o.normalizationField=null):o.field?o.field=sp(e,o.field,"avg","number"):o.valueExpression&&(o.field=o1(e,o.valueExpression,"avg","number"),o.valueExpression=null)}return o},hK=e=>{for(const t of e)if(t.type==="size")return t;return null};function Lze(e,t,i){const r=e.clone();let s=!1;if("visualVariables"in r){const o=(r.visualVariables||[]).filter(u=>u.valueExpression!=="$view.scale"),c=hK(o);ae(c)&&(r.visualVariables||(r.visualVariables=[]),r.visualVariables.push(dK(t,i)),r.dynamicClusterSize=!0,s=!0)}return{renderer:r,didInject:s}}const L5e=e=>{for(const t of e)if(t.field==="cluster_count")return!0;return!1},dK=(e,t)=>{const i=[new wm({value:0,size:0}),new wm({value:1})];if(ae(t))return new s9({field:"cluster_count",stops:[...i,new wm({value:2,size:0})]});const r=Object.keys(t).reduce((s,o)=>({...s,[o]:[...i,new wm({value:Math.max(2,t[o].minValue),size:e.clusterMinSize}),new wm({value:Math.max(3,t[o].maxValue),size:e.clusterMaxSize})]}),{});return new hv({field:"cluster_count",levels:r})},R5e=e=>{const t=i=>O5e.error(new de("Unsupported-renderer",i,{renderer:e}));switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!P5e){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function N5e(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,s="field",o=t.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+cK(o)}}}function o1(e,t,i,r){const s=cK(t),o=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some(c=>c.name===o)||e.push(new g0({name:o,isAutoGenerated:!0,onStatisticExpression:new Dk({expression:t,returnType:r}),statisticType:i})),o}function sp(e,t,i,r,s){if(t==="cluster_count"||e.some(c=>c.name===t))return t;const o=N5e(i,t,s);return e.some(c=>c.name===o)||(i==="avg_norm"?e.push(new g0({name:o,isAutoGenerated:!0,onStatisticExpression:new Dk({expression:`$feature.${t} / $feature.${s}`,returnType:r}),statisticType:"avg"})):e.push(new g0({name:o,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),o}const D5e=e=>{let t=class extends e{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},!0))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_normalizeFeatureReduction(i){var u,g;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),s=[new g0({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],o=((u=r.fields)!=null?u:[]).filter(b=>!b.isAutoGenerated);if(i.renderer&&!((g=i.renderer.authoringInfo)!=null&&g.isAutoGenerated))return r.fields=[...s,...o],r;if(i.symbol)return r.fields=[...s,...o],r.renderer=null,r;if(!this.renderer)return i;const c=F5e(s,this.renderer,i,null,!1);return r.fields=[...s,...o],r.renderer=c,r}};return v([_(E5e)],t.prototype,"featureReduction",null),t=v([K("esri.layers.mixins.FeatureReductionLayer")],t),t},j5e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},z5e=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,r,s,o){(o&&o.layerContainerType==="ground"||i&&kae(this,s,{},o))&&(r[s]=i)}writeOperationalLayerType(i,r,s,o){!i||o&&o.layerContainerType==="tables"||(r.layerType=i)}writeTitle(i,r){r.title=i!=null?i:"Layer"}read(i,r){r&&(r.layer=this),Cae(this,i,s=>super.read(i,s),r)}write(i,r){var c,u;if(r!=null&&r.origin){const g=`${r.origin}/${r.layerContainerType||"operational-layers"}`,b=j5e[g];let S=b&&b[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&g==="web-scene/operational-layers"&&(S=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&g==="web-map/operational-layers"&&(S=!1),!S)return(c=r.messages)==null||c.push(new de("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${g}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),o=!!r&&!!r.messages&&!!r.messages.filter(g=>g instanceof de&&g.name==="web-document-write:property-required").length;return h5(s==null?void 0:s.url)?((u=r==null?void 0:r.messages)==null||u.push(new de("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:s}beforeSave(){}};return v([_({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),v([_(QJ)],t.prototype,"listMode",void 0),v([qe("listMode")],t.prototype,"writeListMode",null),v([_({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),v([qe("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),v([_(EA)],t.prototype,"opacity",void 0),v([_({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),v([qe("title"),qe(["web-scene"],"title")],t.prototype,"writeTitle",null),v([_({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=v([K("esri.layers.mixins.OperationalLayer")],t),t};var GA;const bE=new It({asc:"ascending",desc:"descending"});let Am=GA=class extends $e{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new GA({field:this.field,valueExpression:this.valueExpression,order:this.order})}};v([_({type:String,json:{write:!0}})],Am.prototype,"field",void 0),v([_({type:String,json:{write:!0}})],Am.prototype,"valueExpression",void 0),v([_({type:bE.apiValues,json:{read:bE.read,write:bE.write}})],Am.prototype,"order",void 0),Am=GA=v([K("esri.layers.support.OrderByInfo")],Am);const pK=Am;function V5e(e,t,i){if(!e)return null;const r=e.find(o=>!!o.field);if(!r)return null;const s=new pK;return s.read(r,i),[s]}function G5e(e,t,i,r){const s=e.find(o=>!!o.field);s&&tn(i,[s.toJSON()],t)}const U5e=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return v([_({type:[pK],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:V5e},write:{target:"layerDefinition.orderBy",writer:G5e}}})],t.prototype,"orderBy",void 0),t=v([K("esri.layers.mixins.OrderedLayer")],t),t};async function q5e(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Tf(e);const i=wt.WGS84;return await R7(t,i),lu(e,i)}function Rze(e,t){if(!B5e(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function B5e(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function Nze(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}async function Dze(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return q5e(i)}const jze={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function pN(e){var g;const{portal:t,isOrgItem:i,itemControl:r}=e,s=(g=t.user)==null?void 0:g.privileges;let o=!s||s.includes("features:user:edit"),c=!!i&&!!(s!=null&&s.includes("features:user:fullEdit"));const u=r==="update"||r==="admin";return u?c=o=!0:c&&(o=!0),{features:{edit:o,fullEdit:c},content:{updateItem:u}}}const H5e=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=ti(this.portalItem)}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new Gv({id:r.itemId,portal:s&&s.portal})}writePortalItem(i,r){i&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem&&this.portalItem.id)try{const s=await pe(()=>import("./layersLoader.7d60eaab.js"),["assets/layersLoader.7d60eaab.js","assets/fetchService.1ee40f9a.js","assets/jsonContext.6c135492.js"]);return or(r),await s.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(s){throw ro(s)||Ie.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(Jl(r),!0)))}async _setUserPrivileges(i,r){if(!jt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:s,fullEdit:o},content:{updateItem:c}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",c)}catch(s){Jl(s)}}async _fetchUserPrivileges(i,r){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(r);const o=i===s.id;if(o&&s.portal.user)return pN(s);let c,u;if(o)c=s.portal.url;else try{c=await Z6(this.url,r)}catch(E){Jl(E)}if(!c||!sle(c,s.portal.url))return this._fetchFallbackUserPrivileges(r);try{const E=U(r)?r.signal:null;u=await(qt==null?void 0:qt.getCredential(`${c}/sharing`,{prompt:!1,signal:E}))}catch(E){Jl(E)}const g=!0,b=!1,S=!1;if(!u)return{features:{edit:g,fullEdit:b},content:{updateItem:S}};try{if(o?await s.reload():(s=new Gv({id:i,portal:{url:c}}),await s.load(r)),s.portal.user)return pN(s)}catch(E){Jl(E)}return{features:{edit:g,fullEdit:b},content:{updateItem:S}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(s){Jl(s)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?qt==null?void 0:qt.findCredential(this.url):null;if(!r)return!0;const s=r2.credential===r?r2.user:await this._fetchEditingUser(i);return r2.credential=r,r2.user=s,ae(s)||s.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var S,E,A;const r=(E=(S=this.portalItem)==null?void 0:S.portal)==null?void 0:E.user;if(r)return r;const s=qt.findServerInfo((A=this.url)!=null?A:"");if(!(s!=null&&s.owningSystemUrl))return null;const o=`${s.owningSystemUrl}/sharing/rest`,c=Ts.getDefault();if(c&&c.loaded&&ll(c.restUrl)===ll(o))return c.user;const u=`${o}/community/self`,g=U(i)?i.signal:null,b=await u5(mi(u,{authMode:"no-prompt",query:{f:"json"},signal:g}));return b.ok?Y6.fromJSON(b.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r&&r.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Ts.getDefault());return s&&o&&!BG(o.restUrl,s.restUrl)?(r.messages&&r.messages.push(new de("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return v([_({type:Gv})],t.prototype,"portalItem",null),v([Ne("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),v([qe("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),v([_({clonable:!1})],t.prototype,"resourceReferences",void 0),v([_({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),v([_({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),v([_({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=v([K("esri.layers.mixins.PortalLayer")],t),t},r2={credential:null,user:null};let dv=class extends Re{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};v([_()],dv.prototype,"updating",void 0),v([_()],dv.prototype,"status",void 0),dv=v([K("esri.layers.support.PublishingInfo")],dv);const W5e=dv,fK="esri.layers.mixins.PublishableLayer",J5e=Symbol(fK),Y5e=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const s=new W5e;return this._checkPublishingStatus(s),s}_checkPublishingStatus(r){let c=0;const u=async b=>{let S;r.updating=!0;try{S=await this.fetchPublishingStatus()}catch{S="unavailable"}S!=="published"&&S!=="unavailable"||(r.status==="publishing"&&this.refresh(),g.remove()),r.status=S,r.updating=!1,g.removed||(c=setTimeout(u,b,b+125))},g={removed:!1,remove(){this.removed=!0,clearTimeout(c)}};this.when().catch(()=>g.remove()),u(250),this.own(g)}};return t=J5e,v([_({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=v([K(fK)],i),i},Kb=new Be,ib=new WeakMap;function K5e(e){mK(e)&&Kb.push(e)}function Z5e(e){mK(e)&&Kb.includes(e)&&Kb.remove(e)}function mK(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function yK(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:yK(t,e%t):0}let wE=0,s2=0;function X5e(){var t;const e=Date.now();for(const i of Kb)i.refreshInterval&&e-((t=ib.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(ib.set(i,e),i.refresh(e))}pG(()=>{const e=Date.now();let t=0;for(const i of Kb)t=yK(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?ib.get(i)||ib.set(i,e):ib.delete(i);if(t!==s2){if(s2=t,clearInterval(wE),s2===0)return void(wE=0);wE=setInterval(X5e,s2)}});const Q5e=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=o5(()=>this.hasDataChanged()),this.when().then(()=>{K5e(this)},()=>{})}destroy(){Z5e(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){qf(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{Ie.getLogger(this.declaredClass).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}};return v([_({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),v([_({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),v([_()],t.prototype,"refreshParameters",null),t=v([K("esri.layers.mixins.RefreshableLayer")],t),t},gK=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&e9e(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return v([_({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),v([_({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),v([_({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=v([K("esri.layers.mixins.ScaleRangeLayer")],t),t};function e9e(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const vK=$s()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let pv=class extends Ni($e){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return _we(this.value,this.unit,"milliseconds")}};v([Qe(vK,{nonNullable:!0})],pv.prototype,"unit",void 0),v([_({type:Number,json:{write:!0},nonNullable:!0})],pv.prototype,"value",void 0),pv=v([K("esri.TimeInterval")],pv);const fS=pv;function fN(e,t){return fS.fromJSON({value:e,unit:t})}let Bs=class extends Ni($e){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),r=new Date(t.timeExtent[1]);return new pu({start:i,end:r})}writeFullTimeExtent(e,t){e&&U(e.start)&&U(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?fN(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?fN(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){var i,r;t.timeInterval=(i=e==null?void 0:e.toJSON().value)!=null?i:null,t.timeIntervalUnits=(r=e==null?void 0:e.toJSON().unit)!=null?r:null}};v([_({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Bs.prototype,"cumulative",void 0),v([_({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"endField",void 0),v([_({type:pu,json:{write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"fullTimeExtent",void 0),v([Ne("fullTimeExtent",["timeExtent"])],Bs.prototype,"readFullTimeExtent",null),v([qe("fullTimeExtent")],Bs.prototype,"writeFullTimeExtent",null),v([_({type:Boolean,json:{write:!0}})],Bs.prototype,"hasLiveData",void 0),v([_({type:fS,json:{write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"interval",void 0),v([Ne("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Bs.prototype,"readInterval",null),v([qe("interval")],Bs.prototype,"writeInterval",null),v([_({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"startField",void 0),v([_({type:By,json:{write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"timeReference",void 0),v([_({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Bs.prototype,"trackIdField",void 0),v([_({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Bs.prototype,"useTime",void 0),Bs=v([K("esri.layers.support.TimeInfo")],Bs);const bK=Bs,t9e=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const o=s.timeOffset,c=vK.fromJSON(s.timeOffsetUnits);return o&&c?new fS({value:o,unit:c}):null}set timeInfo(i){wq(i,this.fieldsIndex),this._set("timeInfo",i)}};return v([_({type:pu,json:{write:!1}})],t.prototype,"timeExtent",void 0),v([_({type:fS})],t.prototype,"timeOffset",void 0),v([Ne("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),v([_({value:null,type:bK,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),v([_({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=v([K("esri.layers.mixins.TemporalLayer")],t),t},mN=new It({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ch=class extends Ni($e){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};v([_({json:{write:!0}})],Ch.prototype,"name",void 0),v([_({json:{write:!0}})],Ch.prototype,"description",void 0),v([_({json:{read:mN.read,write:mN.write}})],Ch.prototype,"drawingTool",void 0),v([_({json:{write:!0}})],Ch.prototype,"prototype",void 0),v([_({json:{write:!0}})],Ch.prototype,"thumbnail",void 0),Ch=v([K("esri.layers.support.FeatureTemplate")],Ch);const Gk=Ch;let Bu=class extends Ni($e){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=Q5(e[i]);return t}writeDomains(e,t){var r;const i={};for(const s of Object.keys(e))e[s]&&(i[s]=(r=e[s])==null?void 0:r.toJSON());t.domains=i}};v([_({json:{write:!0}})],Bu.prototype,"id",void 0),v([_({json:{write:!0}})],Bu.prototype,"name",void 0),v([_({json:{write:!0}})],Bu.prototype,"domains",void 0),v([Ne("domains")],Bu.prototype,"readDomains",null),v([qe("domains")],Bu.prototype,"writeDomains",null),v([_({type:[Gk],json:{write:!0}})],Bu.prototype,"templates",void 0),Bu=v([K("esri.layers.support.FeatureType")],Bu);const wK=Bu;function i9e(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function yN(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function gN(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class r9e{constructor(t=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;this.fields=t;const i=[];for(const r of t){const s=r==null?void 0:r.name,o=bN(r==null?void 0:r.name);if(s&&o){const c=vN(s);this._fieldsMap.set(s,r),this._fieldsMap.set(c,r),this._normalizedFieldsMap.set(o,r),i.push(c),i9e(r)?(this.dateFields.push(r),this._dateFieldsSet.add(r)):rl(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r)),yN(r)||gN(r)||(r.editable=r.editable==null||!!r.editable,r.nullable=r.nullable==null||!!r.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)yN(t)||gN(t)||t.nullable||_de(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){var r;if(!t)return;let i=this._fieldsMap.get(t);return i||(i=(r=this._fieldsMap.get(vN(t)))!=null?r:this._normalizedFieldsMap.get(bN(t)),i&&this._fieldsMap.set(t,i),i)}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;const i=this.get(t);if(i)return(r=i.name)!=null?r:void 0}}function vN(e){return e.trim().toLowerCase()}function bN(e){var t,i;return(i=(t=hde(e))==null?void 0:t.toLowerCase())!=null?i:""}function s9e(){return{fields:{type:[ok],value:null},fieldsIndex:{readOnly:!0,get(){return new r9e(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||Ie.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return S5(this.fieldsIndex,e)}}}}const _E=Ie.getLogger("esri.layers.support.labelingInfo"),n9e=/\[([^\[\]]+)\]/gi;function wN(e,t,i){return e?e.map(r=>{const s=new h9;if(s.read(r,i),s.labelExpression){const o=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;s.labelExpression=s.labelExpression.replace(n9e,(c,u)=>`[${o9e(u,o)}]`)}return s}):null}function o9e(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}const a9e={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function zze(e,t){const i=ve(e);return i.some(r=>l9e(r,t))?[]:i}function l9e(e,t){const i=e.labelPlacement,r=a9e[t];if(!e.symbol)return _E.warn("No ILabelClass symbol specified."),!0;if(!r)return _E.error(new de("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!r.includes(i)){const s=r[0];i&&_E.warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${s}`),e.labelPlacement=s}return!1}const qa=[];function u9e(e,t){var r,s;if(HJ((r=e.url)!=null?r:""))return!0;const{wkid:i}=t;for(const o of qa){if(((s=e.version)!=null?s:0)>=o[0])return!0;if(typeof o[1]=="function"&&(o[1]=o[1]()),o[1].has(i))return!1}return!0}qa.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),qa.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),qa.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),qa.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),qa.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]),qa.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),qa.push([10.61,()=>new Set([102497])]),qa.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),qa.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),qa.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function c9e(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await u5(r.populateFromStyle());if(or(i),s.ok===!1){const o=s.error;t&&t.messages&&t.messages.push(new Cn("renderer:style-reference",`Failed to create unique value renderer from style reference: ${o.message}`,{error:o,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}const h9e=["oid","global-id"],d9e=["oid","global-id","guid"];function p9e({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},o){if(!i)return null;const c=b9e({editFieldsInfo:t,fields:i,objectIdField:r},o);if(!c.length)return null;const u=x9e({titleBase:s,fields:i,displayField:e}),g=_9e();return new $w({title:u,content:g,fieldInfos:c})}const f9e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],m9e=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:r})=>r?r.has(e.name):!_K(e.name,t)&&(!i||e.name!==i)&&!h9e.includes(e.type)&&!f9e.some(s=>s.test(e.name));function y9e(e,t){const i=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===i&&(e=e.slice()),e.sort(g9e),e}function g9e(e,t){return e.type==="oid"?-1:t.type==="oid"?1:_N(e)?-1:_N(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function _K(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:r,editDateField:s,editorField:o}=t;return[i&&i.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase(),o&&o.toLowerCase()].includes(e.toLowerCase())}function v9e(e,t){return e.editable&&!d9e.includes(e.type)&&!_K(e.name,t)}function b9e({editFieldsInfo:e,fields:t,objectIdField:i},r){return y9e(t!=null?t:[],(r==null?void 0:r.ignoreFieldTypes)||S9e).map(s=>new Aw({fieldName:s.name,isEditable:v9e(s,e),label:s.alias,format:w9e(s),visible:m9e(s,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:r==null?void 0:r.visibleFieldNames})}))}function w9e(e){switch(e.type){case"small-integer":case"integer":case"single":return new Bm({digitSeparator:!0,places:0});case"double":return new Bm({digitSeparator:!0,places:2});case"date":return new Bm({dateFormat:"long-month-day-year"});default:return e.type==="string"&&Tq(e.name)?new Bm({digitSeparator:!0,places:0}):null}}function _9e(){return[new Ry,new kb]}function x9e(e){const t=xq(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i!=null?i:""}function _N(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"}const S9e=["geometry","blob","raster","guid","xml"],un="FeatureLayer",xK="esri.layers.FeatureLayer",I9e=Ie.getLogger(xK);function n2(e,t){return new de("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function xN(e){return e&&e instanceof Be}const xE=s9e();function SE(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Ze=class extends KSe(D5e(t3e(Y5e(X2e(WJ(U5e(t9e(gK(Q5e(Y2e(z5e(H5e(LJ(K2e(V2e(Ni(Tb))))))))))))))))){constructor(...e){super(...e),this._handles=new Vr,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=wt.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=ti(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var r;const t=U(e)?e.signal:null;if(((r=this.portalItem)==null?void 0:r.loaded)&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Jl).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new de("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this._setUserPrivileges(this.serviceItemId,e)).then(()=>FSe(this,e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,tK(t,this.url)}get createQueryVersion(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),((e=this._get("createQueryVersion"))!=null?e:0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return LSe(this)}readIsTable(e,t){var i;return(t=(i=t==null?void 0:t.layerDefinition)!=null?i:t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&tn(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return QY(t.layerDefinition||t)}readObjectIdField(e,t){return eK(t.layerDefinition||t)}get parsedUrl(){const e=is(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=n0(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=n0(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){rF(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){var s,o;const r=(s=(t=t.layerDefinition||t).drawingInfo)==null?void 0:s.renderer;if(r){const c=(o=Yb(r,t,i))!=null?o:void 0;return c||I9e.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),c}if(t.defaultSymbol)return t.types&&t.types.length?new Ww({defaultSymbol:IE(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(c=>({id:c.id,symbol:IE(c.symbol,c,i)}))}):new Gy({symbol:IE(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(xN(t)&&this._resetMemorySource(t),xN(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Be?new Qu({layer:this,items:e}):e:null}readSource(e,t){var r;const i=t9.fromJSON(t.featureSet);return new Qu({layer:this,items:(r=i==null?void 0:i.features)!=null?r:[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e=e&&e.map(o=>Gk.fromJSON(o)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,t){var s,o;const i=(o=(s=t.layerDefinition)==null?void 0:s.name)!=null?o:t.name,r=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const c=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?B2e(this.url,i):i;let u=i;if(!u&&this.url){const g=_c(this.url);U(g)&&(u=g.title)}return u?(this.sublayerTitleMode==="item-title-and-service-name"&&c&&c!==u&&(u=c+" - "+u),Tk(u)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i&&i.creatorField,s=i&&i.editorField;return e&&e.map(o=>(o=wK.fromJSON(o),this._fixTemplates(o.templates,r),this._fixTemplates(o.templates,s),o))}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return bSe(this,e,t,un)}async updateAttachment(e,t,i){return wSe(this,e,t,i,un)}async applyEdits(e,t){return _Se(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return p9e(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await i0(pe(()=>import("./FeatureLayerSource.cf40a760.js"),["assets/FeatureLayerSource.cf40a760.js","assets/assetEditingSupport.240adbda.js","assets/clientSideDefaults.58eeb936.js","assets/QueryEngineCapabilities.ea616409.js","assets/QueryTask.e85b83f8.js","assets/executeForIds.41c40739.js"]),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=kSe(this);e.dynamicDataSource=this.dynamicDataSource;const t=U(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,i=E2e(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){return xSe(this,e,t,un)}async fetchRecomputedExtents(e){return SSe(this,e,un)}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(r==null)return null;let s=null;return i==null||i.some(o=>{const{id:c}=o;return c!=null&&(c.toString()===r.toString()&&(s=o),!!s)}),s}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return ISe(this,e,t,un)}async queryFeatures(e,t){var s;const i=await this.load(),r=await i.source.queryFeatures((s=Xl.from(e))!=null?s:i.createQuery(),t);if(r!=null&&r.features)for(const o of r.features)o.layer=o.sourceLayer=i;return r}async queryObjectIds(e,t){return ESe(this,e,t,un)}async queryFeatureCount(e,t){return MSe(this,e,t,un)}async queryExtent(e,t){return TSe(this,e,t,un)}async queryRelatedFeatures(e,t){return CSe(this,e,t,un)}async queryRelatedFeaturesCount(e,t){return ASe(this,e,t,un)}async queryTopFeatures(e,t){var o;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((o=r==null?void 0:r.query)!=null&&o.supportsTopFeaturesQuery))throw new de(un,"Layer source does not support queryTopFeatures capability");const s=await i.queryTopFeatures(V_.from(e),t);if(s!=null&&s.features)for(const c of s.features)c.layer=c.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new de(un,"Layer source does not support queryTopObjectIds capability");return i.queryTopObjectIds(V_.from(e),t)}async queryTopFeaturesExtent(e,t){var s;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((s=r==null?void 0:r.query)!=null&&s.supportsTopFeaturesQuery))throw new de(un,"Layer source does not support queryTopExtents capability");return i.queryTopExtents(V_.from(e),t)}async queryTopFeatureCount(e,t){var s;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((s=r==null?void 0:r.query)!=null&&s.supportsTopFeaturesQuery))throw new de(un,"Layer source does not support queryFeatureCount capability");return i.queryTopCount(V_.from(e),t)}read(e,t){const i=e.featureCollection;if(i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){var o,c;t={...t,origin:(o=t==null?void 0:t.origin)!=null?o:void 0,writeLayerSchema:(c=t==null?void 0:t.writeLayerSchema)!=null?c:this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:s}=t;if(this.dynamicDataSource)return s==null||s.push(n2(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&r!=="tables")return s==null||s.push(n2(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return s==null||s.push(n2(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&r==="tables")return s==null||s.push(n2(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new de(un,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||u9e(this,e))}async save(e){return(await pe(()=>import("./featureLayerUtils.82efe5b1.js"),["assets/featureLayerUtils.82efe5b1.js","assets/originUtils.5c585c3a.js","assets/multiOriginJSONSupportUtils.6105c957.js","assets/fetchService.1ee40f9a.js","assets/jsonContext.6c135492.js"])).save(this,e)}async saveAs(e,t){return(await pe(()=>import("./featureLayerUtils.82efe5b1.js"),["assets/featureLayerUtils.82efe5b1.js","assets/originUtils.5c585c3a.js","assets/multiOriginJSONSupportUtils.6105c957.js","assets/fetchService.1ee40f9a.js","assets/jsonContext.6c135492.js"])).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var s;let r=(s=e.layerDefinition)==null?void 0:s.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var s,o;if(!e){const c=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";tn("layerDefinition.capabilities",c,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=c)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return mi(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),rF(this.renderer,this.fieldsIndex),wq(this.timeInfo,this.fieldsIndex),c9e(this,{origin:"service"})}async hasDataChanged(){return $Se(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,i,r;const e=(i=(t=this.parsedUrl)==null?void 0:t.path)!=null?i:"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((r=this.fields)==null?void 0:r.some(s=>s.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype&&i.prototype.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new de("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new de("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};v([Ne("service","capabilities")],Ze.prototype,"readCapabilities",null),v([_({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ze.prototype,"charts",void 0),v([_({readOnly:!0})],Ze.prototype,"createQueryVersion",null),v([_({json:{read:{source:"layerDefinition.copyrightText"}}})],Ze.prototype,"copyright",void 0),v([_({json:{read:{source:"layerDefinition.displayField"}}})],Ze.prototype,"displayField",void 0),v([_({types:Hn,readOnly:!0})],Ze.prototype,"defaultSymbol",void 0),v([_({type:Za})],Ze.prototype,"dynamicDataSource",void 0),v([_({type:Boolean})],Ze.prototype,"editingEnabled",null),v([Ne(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ze.prototype,"readEditingEnabled",null),v([Ne("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ze.prototype,"readEditingEnabledFromWebMap",null),v([qe(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ze.prototype,"writeEditingEnabled",null),v([qe("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ze.prototype,"writeEditingEnabledToWebMap",null),v([_({readOnly:!0})],Ze.prototype,"effectiveEditingEnabled",null),v([_({...xE.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:SE}}}}})],Ze.prototype,"fields",void 0),v([_(xE.fieldsIndex)],Ze.prototype,"fieldsIndex",void 0),v([_({type:VJ,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ze.prototype,"formTemplate",void 0),v([_({json:{read:{source:"layerDefinition.extent"}}})],Ze.prototype,"fullExtent",void 0),v([_({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:SE,writer(e,t,i){const r=e?OA.toJSON(e):null;r&&tn(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:OA.read}}})],Ze.prototype,"geometryType",void 0),v([_({json:{read:{source:"layerDefinition.hasM"}}})],Ze.prototype,"hasM",void 0),v([_({json:{read:{source:"layerDefinition.hasZ"}}})],Ze.prototype,"hasZ",void 0),v([_(p3e)],Ze.prototype,"id",void 0),v([_({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ze.prototype,"infoFor3D",void 0),v([_({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ze.prototype,"isTable",void 0),v([Ne("service","isTable",["type","geometryType"]),Ne("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ze.prototype,"readIsTable",null),v([qe("web-map","isTable")],Ze.prototype,"writeIsTable",null),v([_(Ak)],Ze.prototype,"labelsVisible",void 0),v([_({type:[h9],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:wN},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:wN},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ze.prototype,"labelingInfo",void 0),v([_((()=>{const e=ve(d3e);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){tn(r,b5(t),i)}}},e})())],Ze.prototype,"opacity",void 0),v([_(c3e)],Ze.prototype,"legendEnabled",void 0),v([_({type:["show","hide"],json:(()=>{const e=ve(QJ.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ze.prototype,"listMode",void 0),v([Ne("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ze.prototype,"readGlobalIdField",null),v([_({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:SE}}}}})],Ze.prototype,"objectIdField",void 0),v([Ne("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ze.prototype,"readObjectIdField",null),v([_({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ze.prototype,"operationalLayerType",void 0),v([_(xE.outFields)],Ze.prototype,"outFields",void 0),v([_({readOnly:!0})],Ze.prototype,"parsedUrl",null),v([_({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ze.prototype,"path",void 0),v([_(Ck)],Ze.prototype,"popupEnabled",void 0),v([_({type:$w,json:{name:"popupInfo",write:!0}})],Ze.prototype,"popupTemplate",void 0),v([_({readOnly:!0})],Ze.prototype,"defaultPopupTemplate",null),v([_({types:o9,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:_2e,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ze.prototype,"renderer",null),v([Ne("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Ne("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ze.prototype,"readRenderer",null),v([_((()=>{const e=ve(l3e);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ze.prototype,"screenSizePerspectiveEnabled",void 0),v([_({clonable:!1})],Ze.prototype,"source",null),v([_t("source")],Ze.prototype,"castSource",null),v([Ne("portal-item","source",["featureSet"]),Ne("web-map","source",["featureSet"])],Ze.prototype,"readSource",null),v([_({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ze.prototype,"spatialReference",void 0),v([_({type:Number})],Ze.prototype,"subtypeCode",void 0),v([_({type:[Gk]})],Ze.prototype,"templates",void 0),v([Ne("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ze.prototype,"readTemplates",null),v([_({type:bK})],Ze.prototype,"timeInfo",void 0),v([_()],Ze.prototype,"title",void 0),v([Ne("service","title",["name"]),Ne("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ze.prototype,"readTitle",null),v([Ne("web-map","title",["layerDefinition.name","title"])],Ze.prototype,"readTitleFromWebMap",null),v([_({type:String})],Ze.prototype,"sublayerTitleMode",void 0),v([_({json:{read:!1}})],Ze.prototype,"type",void 0),v([_({type:String})],Ze.prototype,"typeIdField",void 0),v([Ne("service","typeIdField"),Ne("typeIdField",["layerDefinition.typeIdField"])],Ze.prototype,"readTypeIdField",null),v([_({type:[wK]})],Ze.prototype,"types",void 0),v([Ne("service","types",["types"]),Ne("types",["layerDefinition.types"])],Ze.prototype,"readTypes",null),v([_({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ze.prototype,"visible",void 0),v([Ne("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ze.prototype,"readVisible",null),Ze=v([K(xK)],Ze);const IE=zd({types:O5}),p9=Ze;var Vze=Object.freeze(Object.defineProperty({__proto__:null,default:p9},Symbol.toStringTag,{value:"Module"}));const E9e=["$datastore","$map","$layer","$aggregatedfeatures"],M9e="esri.widgets.Feature.support.arcadeFeatureUtils",T9e=Ie.getLogger(M9e);function C9e(e){return typeof e=="string"?Vw(Z7(e)):Array.isArray(e)?A9e(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?$9e(e):e}function A9e(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?Vw(Z7(t)):t}</li>`).join("")}</ul>`}function $9e(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?Vw(Z7(i)):i}</td></tr>`}).join("")}</table>`}function k9e({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:r,viewInfo:s,map:o,graphic:c,interceptor:u}){i.forEach(g=>{const b=g.toLowerCase(),S=s.sr,E={map:o,spatialReference:S,interceptor:u};if(b==="$map"&&(r.vars[b]=t.convertMapToFeatureSetCollection(E)),b==="$layer"&&(r.vars[b]=t.convertFeatureLayerToFeatureSet({layer:c.sourceLayer,spatialReference:S,interceptor:u})),b==="$datastore"&&(r.vars[b]=t.convertServiceUrlToWorkspace({url:c.sourceLayer.url,spatialReference:S,interceptor:u})),b==="$aggregatedfeatures"){const A=c.layer,{fields:O,objectIdField:L,geometryType:N,spatialReference:z,displayField:q}=A,Z=new p9({fields:O,objectIdField:L,geometryType:N,spatialReference:z,displayField:q,...A.type==="feature"?{templates:A.templates,typeIdField:A.typeIdField,types:A.types}:null,source:e});r.vars[b]=t.convertFeatureLayerToFeatureSet({layer:Z,spatialReference:z,interceptor:u})}})}function SK(){return pe(()=>import("./arcadeUtils.6bec0d6d.js").then(function(e){return e.aw}),["assets/arcadeUtils.6bec0d6d.js","assets/number.d4116036.js","assets/arcadeTimeUtils.7055c5d7.js"])}function O9e(e){return"createQuery"in e&&"queryFeatures"in e}async function P9e({graphic:e,view:t}){const{isAggregate:i,layer:r}=e;if(!i||!r||(t==null?void 0:t.type)!=="2d")return[];const s=await t.whenLayerView(r);if(!O9e(s))return[];const o=s.createQuery(),c=e.getObjectId();o.aggregateIds=c!=null?[c]:[];const{features:u}=await s.queryFeatures(o);return u}async function IK({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:r,map:s,graphic:o,view:c}){if(!e||!e.expression)return null;const u=t.createSyntaxTree(e.expression),g=E9e.filter(O=>t.hasVariable(u,O)),[b]=await Promise.all([P9e({graphic:o,view:c}),t.loadScriptDependencies(u,!0,g)]),S=t.getViewInfo({spatialReference:r}),E=t.createExecContext(o,S);E.interceptor=i,E.useAsync=!0,k9e({aggregatedFeatures:b,arcadeUtils:t,featureSetVars:g,context:E,viewInfo:S,map:s,graphic:o,interceptor:i});const A=t.createFunction(u,E);return t.executeAsyncFunction(A,E).catch(O=>T9e.error("arcade-execution-error",{error:O,graphic:o,expressionInfo:e}))}async function F9e({expressionInfos:e,spatialReference:t,graphic:i,interceptor:r,map:s,view:o}){if(!e||!e.length)return{};const c=await SK(),u={};for(const S of e)u[`expression/${S.name}`]=IK({expressionInfo:S,arcadeUtils:c,interceptor:r,spatialReference:t,map:s,graphic:i,view:o});const g=await Ms(u),b={};for(const S in g)b[S]=C9e(g[S].value);return b}const L9e=1;let go=class extends ar(Re){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var r,s;const t=(r=this.contentElement)==null?void 0:r.type;(s=this.contentElementViewModel)==null||s.destroy();const i=t==="fields"?new U5:t==="media"?new zf:t==="text"?new iS:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=gy(this._compile,L9e,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:r,spatialReference:s,map:o,view:c,_abortController:u}=this;if(!(t&&i&&s&&o))return void this._set("contentElement",null);const g=await SK();if(u!==this._abortController)return;const b=await IK({arcadeUtils:g,expressionInfo:t,graphic:i,interceptor:r,map:o,spatialReference:s,view:c});if(!b||b.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const S=await b.castAsJsonAsync(u==null?void 0:u.signal),E=S==null?void 0:S.type,A=E==="media"?Fb.fromJSON(S):E==="text"?Ny.fromJSON(S):E==="fields"?Ry.fromJSON(S):null;this._set("contentElement",A)},this.handles.add([ge(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),rt),ge(()=>[this.contentElement],()=>this._createVM(),rt)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e,t;return(t=(e=this.view)==null?void 0:e.spatialReference)!=null?t:null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e,t;return(t=(e=this.view)==null?void 0:e.map)!=null?t:null}set map(e){this._override("map",e)}};v([_()],go.prototype,"_abortController",void 0),v([_({type:Cq})],go.prototype,"expressionInfo",void 0),v([_({type:wr})],go.prototype,"graphic",void 0),v([_({readOnly:!0})],go.prototype,"contentElement",void 0),v([_({readOnly:!0})],go.prototype,"contentElementViewModel",void 0),v([_()],go.prototype,"interceptor",void 0),v([_()],go.prototype,"spatialReference",null),v([_({readOnly:!0})],go.prototype,"state",null),v([_()],go.prototype,"map",null),v([_()],go.prototype,"view",void 0),go=v([K("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],go);const Uk=go,o2={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let V3=class extends ki{constructor(e,t){super(e,t),this._contentWidget=null,this.viewModel=new Uk}initialize(){this.addHandles(ge(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),rt))}destroy(){this._destroyContentWidget()}renderLoading(){return J("div",{key:"loading-container",class:o2.loadingSpinnerContainer},J("span",{class:this.classes(o2.iconLoading,o2.spinner)}))}render(){var t;const{state:e}=this.viewModel;return J("div",{class:o2.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const r=e?i==="fields"?new gW({viewModel:e}):i==="media"?new QW({viewModel:e}):i==="text"?new b3({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};v([_({type:Uk})],V3.prototype,"viewModel",void 0),V3=v([K("esri.widgets.Feature.FeatureExpression")],V3);const R9e=V3,EE=100;let _i=class extends Ni(Gd(ar(Re))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:t}=this;t&&t.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const t=new AbortController;this._queryAbortController=t,await qf(this._query()),this._queryAbortController===t&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const t=new AbortController;this._queryFeatureCountAbortController=t,await qf(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const t=new AbortController;this._queryPageAbortController=t,await qf(this._queryPage()),this._queryPageAbortController===t&&(this._queryPageAbortController=null)},this._queryThrottled=gy(this._queryController,EE,this),this._queryFeatureCountThrottled=gy(this._queryFeatureCountController,EE,this),this._queryPageThrottled=gy(this._queryPageController,EE,this),this._query=async()=>{const{_queryAbortController:t,relatedFeatures:i}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,i.removeAll(),i.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:t==null?void 0:t.signal})))},this.handles.add([ge(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),rt),ge(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),ge(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:t,featureCount:i}=this,r=1,s=Math.ceil(i/t)||1;this._set("featurePage",Math.min(Math.max(e,r),s))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:t}=this;return e&&(t==null?void 0:t.loaded)?e.map(i=>{const r=i.clone(),s=qb(i.field,t);return r.field=s,r}):e!=null?e:[]}get supportsCacheHint(){var e,t,i;return!!((i=(t=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:t.queryRelated)!=null&&i.supportsCacheHint)}get canQuery(){var t,i;const e=(i=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:i.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e==null?void 0:e.supportsCount)&&(e==null?void 0:e.supportsPagination))}get itemDescriptionFieldName(){var e,t;return((t=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:t.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,t,i;return(i=this.objectIdField&&((t=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:t[this.objectIdField]))!=null?i:null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new Be}get relatedLayer(){var r;const{layer:e,map:t,relationship:i}=this;return(e==null?void 0:e.loaded)&&t&&i&&(r=R1e(t,e,i))!=null?r:null}get relationship(){var i,r;const{relationshipId:e,layer:t}=this;return typeof e=="number"&&(r=(i=t==null?void 0:t.relationships)==null?void 0:i.find(({id:s})=>s===e))!=null?r:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new Be}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:t,_queryPageAbortController:i,canQuery:r}=this;return t?"loading":e||i?"querying":r?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:t,relationshipId:i,objectId:r,_queryFeatureCountAbortController:s,canQuery:o,supportsCacheHint:c}=this;if(await(e==null?void 0:e.load()),await(t==null?void 0:t.load()),!o||!e||!t)return void this._set("featureCount",0);const u=t.createQuery(),g=new Vy({cacheHint:c,relationshipId:i,returnGeometry:!1,objectIds:[r],where:tP(u.where,void 0)}),b=await e.queryRelatedFeaturesCount(g,{signal:s==null?void 0:s.signal});this._set("featureCount",b[r]||0)}_sliceFeatures(e){const{showAllEnabled:t,displayCount:i}=this;return t?e:i?e.slice(0,i):[]}async _queryPage(){const{relatedFeatures:e,featurePage:t,showAllEnabled:i,_queryPageAbortController:r}=this;!i||t<2||e.addMany(await this._queryRelatedFeatures({signal:r==null?void 0:r.signal}))}async _queryRelatedFeatures(e){var ne;const{orderByFieldsFixedCasing:t,showAllEnabled:i,featuresPerPage:r,displayCount:s,layer:o,relationshipId:c,featurePage:u,featureCount:g,relatedLayer:b,supportsCacheHint:S}=this,{canQuery:E,objectId:A}=this;if(!E||!o||!b)return[];const O=i?((u-1)*r+g)%g:0,L=i?r:s,N=b.objectIdField,z=[...t==null?void 0:t.map(oe=>oe.field),N].filter(U),q=t==null?void 0:t.map(oe=>`${oe.field} ${oe.order}`),Z=b.createQuery(),ee=new Vy({orderByFields:q,start:O,num:L,outFields:z,cacheHint:S,relationshipId:c,returnGeometry:!1,objectIds:[A],where:tP(Z.where,void 0)}),ie=((ne=(await o.queryRelatedFeatures(ee,{signal:e==null?void 0:e.signal}))[A])==null?void 0:ne.features)||[];return ie.forEach(oe=>{oe.sourceLayer=b,oe.layer=b}),ie}};v([_()],_i.prototype,"_queryAbortController",void 0),v([_()],_i.prototype,"_queryPageAbortController",void 0),v([_()],_i.prototype,"_queryFeatureCountAbortController",void 0),v([_({value:1})],_i.prototype,"featurePage",null),v([_()],_i.prototype,"featuresPerPage",void 0),v([_({readOnly:!0})],_i.prototype,"orderByFieldsFixedCasing",null),v([_({readOnly:!0})],_i.prototype,"supportsCacheHint",null),v([_({readOnly:!0})],_i.prototype,"canQuery",null),v([_()],_i.prototype,"description",void 0),v([_({readOnly:!0})],_i.prototype,"itemDescriptionFieldName",null),v([_({value:3})],_i.prototype,"displayCount",null),v([_({type:wr})],_i.prototype,"graphic",void 0),v([_()],_i.prototype,"layer",void 0),v([_()],_i.prototype,"map",void 0),v([_({readOnly:!0})],_i.prototype,"objectId",null),v([_({readOnly:!0})],_i.prototype,"objectIdField",null),v([_()],_i.prototype,"orderByFields",void 0),v([_({readOnly:!0})],_i.prototype,"relatedFeatures",null),v([_({readOnly:!0})],_i.prototype,"relatedLayer",null),v([_({readOnly:!0})],_i.prototype,"relationship",null),v([_()],_i.prototype,"featureCount",void 0),v([_({readOnly:!0})],_i.prototype,"relatedFeatureViewModels",null),v([_()],_i.prototype,"relationshipId",void 0),v([_()],_i.prototype,"showAllEnabled",void 0),v([_()],_i.prototype,"state",null),v([_()],_i.prototype,"title",void 0),_i=v([K("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],_i);const qk=_i,fv="esri-feature",ME=`${fv}-relationship`,Su={base:ME,esriWidget:"esri-widget",listContainer:`${ME}__list`,listContainerQuerying:`${ME}__list--querying`,featureObserver:`${fv}__feature-observer`,stickySpinnerContainer:`${fv}__sticky-loading-container`,loadingSpinnerContainer:`${fv}__loading-container`,spinner:`${fv}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},SN={title:!0,description:!0};let yn=class extends ki{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([i])=>{i!=null&&i.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new qk,this.messages=null,this.messagesCommon=null,this.visibleElements={...SN},this._increaseFeaturePage=()=>{const{state:i,showAllEnabled:r,relatedFeatures:s,featuresPerPage:o,featurePage:c}=this.viewModel;i==="ready"&&r&&s.length>=o*c&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new V5,this.addHandles([ge(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),rt),ge(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),$i(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([pe(()=>import("./calcite-list.727a3e11.js"),["assets/calcite-list.727a3e11.js","assets/interactive.5c805e74.js","assets/observers.6e054a3b.js","assets/utils3.7dad9d25.js","assets/loadable.bbce2443.js","assets/filter2.32839055.js","assets/debounce.43d64738.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/icon.48bdede2.js","assets/input.6359813e.js","assets/form.af49867d.js","assets/label2.c96a7d11.js","assets/progress.60118725.js","assets/loader.9c78e3db.js","assets/guid.994bd1dc.js","assets/scrim.02266be6.js"]),pe(()=>import("./calcite-list-item.38b02e4c.js"),["assets/calcite-list-item.38b02e4c.js","assets/interactive.5c805e74.js","assets/utils3.7dad9d25.js","assets/loadable.bbce2443.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"]),pe(()=>import("./calcite-icon.5b76e0a1.js"),["assets/calcite-icon.5b76e0a1.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"]),pe(()=>import("./calcite-notice.76697bda.js"),["assets/calcite-notice.76697bda.js","assets/conditionalSlot.25fc4c17.js","assets/observers.6e054a3b.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/icon.48bdede2.js"])])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=ti(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:i}=this.viewModel;return!e&&!!t&&(t>i||i===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return es(t===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...SN,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?J("div",{key:"sticky-loader",class:Su.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return J("span",{class:this.classes(Su.iconLoading,Su.spinner)})}renderLoading(){return J("div",{key:"loading-container",class:Su.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return J("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=Zn(this.container)?"chevron-left":"chevron-right";return J("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var s,o,c;const{itemDescriptionFieldName:t}=this.viewModel,i=e.title;e.description=t&&((s=e.formattedAttributes)==null?void 0:s.global[t]);const r=e.state==="loading";return J("calcite-list-item",{key:e.uid,label:r?`${(o=this.messagesCommon)==null?void 0:o.loading}\u2026`:i,description:r?"\u2026":(c=e.description)!=null?c:"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?J("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return J("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},J("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return J("div",{key:"feature-observer",class:Su.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return J("calcite-list",null,e.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return J("div",{key:"list-container",class:this.classes(Su.listContainer,{[Su.listContainerQuerying]:t==="querying"})},e?this.renderList():t==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return J("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},J("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var t;const{state:e}=this.viewModel;return J("div",{class:this.classes(Su.base,Su.esriWidget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(i=>{this.addHandles(ge(()=>[i.title,i.state],()=>this.scheduleRender(),rt),t)}),this.scheduleRender()}_setupFeatureElementInfo(){var s;const{headingLevel:e,visibleElements:t}=this,i=t.description&&this.description,r=t.title&&this.title;(s=this._featureElementInfo)==null||s.set({description:i,title:r,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await n5(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};v([_()],yn.prototype,"_relatedFeatureIntersectionObserverNode",void 0),v([_({readOnly:!0})],yn.prototype,"displayShowAllButton",null),v([_({readOnly:!0})],yn.prototype,"displayListItems",null),v([_()],yn.prototype,"description",null),v([_({readOnly:!0})],yn.prototype,"featureCountDescription",null),v([_()],yn.prototype,"headingLevel",void 0),v([_()],yn.prototype,"title",null),v([_({type:qk})],yn.prototype,"viewModel",void 0),v([_(),ui("esri/widgets/Feature/t9n/Feature")],yn.prototype,"messages",void 0),v([_(),ui("esri/t9n/common")],yn.prototype,"messagesCommon",void 0),v([_()],yn.prototype,"visibleElements",void 0),v([_t("visibleElements")],yn.prototype,"castVisibleElements",null),yn=v([K("esri.widgets.Feature.FeatureRelationship")],yn);const IN=yn;class N9e{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=r=>{}),this.preRequestCallback||(this.preLayerQueryCallback=r=>{})}}var mv;const D9e=1,EN="content-view-models",MN="relationship-view-models",TN={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let Vi=mv=class extends Gd(Re){constructor(e){super(e),this._handles=new Vr,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=gy(this._graphicChanged,D9e,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...TN},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&!!i.attachmentsContent||t.type==="custom"&&!!i.customContent||t.type==="fields"&&!!i.fieldsContent||t.type==="media"&&!!i.mediaContent||t.type==="text"&&!!i.textContent||t.type==="expression"&&!!i.expressionContent||t.type==="relationship"&&!!i.relationshipContent},this._handles.add(ge(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),rt))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return U(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return A1e(hL(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return sW(this.graphic)}castAbilities(e){return{...TN,...e}}get isTable(){var e;return((e=this._sourceLayer)==null?void 0:e.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){var e,t;return(t=(e=this.view)==null?void 0:e.spatialReference)!=null?t:null}set spatialReference(e){this._override("spatialReference",e)}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){this._override("map",e)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof zf&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof zf&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof zf&&t.previous()}async updateGeometry(){var c,u;const{graphic:e,spatialReference:t,_sourceLayer:i}=this;await(i==null?void 0:i.load());const r=i==null?void 0:i.objectIdField;if(!r||!e||!i)return;const s=(c=e==null?void 0:e.attributes)==null?void 0:c[r];if(s==null)return;const o=[s];if(!e.geometry){const g=(u=await cW({layer:i,graphic:e,outFields:[],objectIds:o,returnGeometry:!0,spatialReference:t}))==null?void 0:u.geometry;g&&(e.geometry=g)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){ro(i)||(this._error=i,Ie.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):e.type==="relationship"?this._compileRelationship(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)).filter(U):typeof e=="string"?this._compileText(new Ny({text:e}),0).text:e}_destroyContentViewModels(){var e,t;(e=this._handles)==null||e.remove(MN),(t=this._handles)==null||t.remove(EN),this.contentViewModels.forEach(i=>i&&!i.destroyed&&i.destroy()),this._set("contentViewModels",[])}_matchesFeature(e,t){var s;const i=(s=e==null?void 0:e.graphic)==null?void 0:s.getObjectId(),r=t==null?void 0:t.getObjectId();return U(i)&&U(r)&&i===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:e,relatedFeatures:t,map:i}){const{view:r,spatialReference:s}=this;t==null||t.filter(Boolean).forEach(o=>{e.find(c=>this._matchesFeature(c,o))||e.add(new mv({abilities:{relationshipContent:!1},map:i,view:r,spatialReference:s,graphic:o}))}),e.forEach(o=>{(t==null?void 0:t.find(u=>this._matchesFeature(o,u)))||e.remove(o)})}_setExpressionContentVM(e,t){const i=this.formattedAttributes,{contentElement:r,contentElementViewModel:s}=e,o=r==null?void 0:r.type;s&&o&&(o==="fields"&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createFieldsVMParams(r,t))),o==="media"&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:t,formattedAttributes:i}),s.set(this._createMediaVMParams(r,t))),o==="text"&&s.set(this._createTextVMParams(r)))}_compileRelationship(e,t){const{displayCount:i,orderByFields:r,relationshipId:s,title:o,description:c}=e,{_sourceLayer:u,graphic:g,map:b}=this,S=new qk({displayCount:i,graphic:g,orderByFields:r,relationshipId:s,layer:u,map:b,...this._compileTitleAndDesc({title:o,description:c})});return this.contentViewModels[t]=S,this._handles.add($i(()=>S.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(S)),MN),e}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:r,map:s,spatialReference:o,view:c}=this,u=new Uk({expressionInfo:i,graphic:r,interceptor:mv.interceptor,map:s,spatialReference:o,view:c});return this.contentViewModels[t]=u,this._handles.add(ge(()=>u.contentElementViewModel,()=>this._setExpressionContentVM(u,t),rt),EN),e}_compileAttachments(e,t){const{graphic:i}=this,{description:r,title:s}=e;return this.contentViewModels[t]=new X7({graphic:i,...this._compileTitleAndDesc({title:s,description:r})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:r,destroyer:s}=e;return this.contentViewModels[t]=new iS({graphic:i,creator:r,destroyer:s}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:r,graphic:s,formattedAttributes:o}=this,c=s==null?void 0:s.attributes,u=this._expressionAttributes,g=o.global;return{title:Df({attributes:c,fieldInfoMap:i,globalAttributes:g,expressionAttributes:u,layer:r,text:e}),description:Df({attributes:c,fieldInfoMap:i,globalAttributes:g,expressionAttributes:u,layer:r,text:t})}}_createFieldsVMParams(e,t){var b;const i=this._effectivePopupTemplate,r=this.formattedAttributes,s={...r==null?void 0:r.global,...r==null?void 0:r.content[t]},o=(b=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:b.filter(({fieldName:S})=>Y7(S)||dc(S)||s.hasOwnProperty(S)),c=i==null?void 0:i.expressionInfos,{description:u,title:g}=e;return{attributes:s,expressionInfos:c,fieldInfos:o,...this._compileTitleAndDesc({title:g,description:u})}}_compileFields(e,t){const i=e.clone(),r=new U5(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=r,i.fieldInfos=r.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){var L;const{abilities:i,graphic:r,_fieldInfoMap:s,_effectivePopupTemplate:o,relatedInfos:c,_sourceLayer:u,_expressionAttributes:g}=this,b=this.formattedAttributes,S=(L=r==null?void 0:r.attributes)!=null?L:{},{description:E,mediaInfos:A,title:O}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:S,isAggregate:r==null?void 0:r.isAggregate,layer:u,fieldInfoMap:s,formattedAttributes:{...b==null?void 0:b.global,...b==null?void 0:b.content[t]},expressionAttributes:g,mediaInfos:A,popupTemplate:o,relatedInfos:c,...this._compileTitleAndDesc({title:O,description:E})}}_compileMedia(e,t){const i=e.clone(),r=new zf(this._createMediaVMParams(e,t));return i.mediaInfos=r.formattedMediaInfos.slice(0),this.contentViewModels[t]=r,i}_createTextVMParams(e){var o,c,u;const{graphic:t,_fieldInfoMap:i,_sourceLayer:r,_expressionAttributes:s}=this;if(e&&e.text){const g=(o=t==null?void 0:t.attributes)!=null?o:{},b=(u=(c=this.formattedAttributes)==null?void 0:c.global)!=null?u:{};e.text=Df({attributes:g,fieldInfoMap:i,globalAttributes:b,expressionAttributes:s,layer:r,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new iS(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,s=t==null?void 0:t.editFieldsInfo;return r&&s?C1e(s,i==null?void 0:i.attributes):void 0}_compileTitle(e){var u,g,b;const{_fieldInfoMap:t,_sourceLayer:i,graphic:r,_expressionAttributes:s}=this,o=(u=r==null?void 0:r.attributes)!=null?u:{},c=(b=(g=this.formattedAttributes)==null?void 0:g.global)!=null?b:{};return Df({attributes:o,fieldInfoMap:t,globalAttributes:c,expressionAttributes:s,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this;if(!t)return null;const i=e==null?void 0:e.title;return tS(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this;if(!t)return null;const i=e==null?void 0:e.content;return tS(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:r,_effectivePopupTemplate:s}=this,o=this.map,c=this.view,u=this.spatialReference;if(t!==this._featureAbortController||!r)return;await k1e({graphic:r,popupTemplate:s,layer:i,spatialReference:u},e);const{content:{value:g},title:{value:b}}=await Ms({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:S}}=await Ms({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:F9e({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:u,graphic:r,map:o,interceptor:mv.interceptor,view:c})});t===this._featureAbortController&&r&&(this._expressionAttributes=S,this._graphicExpressionAttributes={...r.attributes,...S},this._set("formattedAttributes",this._createFormattedAttributes(g)),this._set("title",this._compileTitle(b)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(g)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:r,graphic:s,relatedInfos:o,_sourceLayer:c,_fieldInfoMap:u,_graphicExpressionAttributes:g}=this;i.content[t]=LI({fieldInfos:r==null?void 0:r.fieldInfos,graphic:s,attributes:{...g,...e.attributes},layer:c,fieldInfoMap:u,relatedInfos:o})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:r,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:c,_graphicExpressionAttributes:u}=this;i.content[t]=LI({fieldInfos:e.fieldInfos,graphic:r,attributes:{...u,...e.attributes},layer:o,fieldInfoMap:c,relatedInfos:s})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:c}=this,u=t==null?void 0:t.fieldInfos,g={global:LI({fieldInfos:u,graphic:i,attributes:c,layer:s,fieldInfoMap:o,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((b,S)=>{b.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:b,contentElementIndex:S,formattedAttributes:g}),b.type==="media"&&this._createMediaFormattedAttributes({contentElement:b,contentElementIndex:S,formattedAttributes:g})}),g}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,hL(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:r,_sourceLayer:s}=this;r.clear();const o=U(s==null?void 0:s.associatedLayer)?await(s==null?void 0:s.associatedLayer.load(i)):s;if(!o||!e)return;const c=t.filter(b=>b&&dc(b.fieldName));if(!c||!c.length)return;t.forEach(b=>this._configureRelatedInfo(b,o));const u=await i_e({relatedInfos:r,layer:o},i);Object.keys(u).forEach(b=>{var A;const S=r.get(b.toString()),E=(A=u[b])==null?void 0:A.value;S&&E&&(S.layerInfo=E.data)});const g=await r_e({graphic:e,relatedInfos:r,layer:o},i);Object.keys(g).forEach(b=>{var S;Zwe((S=g[b])==null?void 0:S.value,r.get(b.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,r=x3(e.fieldName);if(!r)return;const{layerId:s,fieldName:o}=r;if(!s)return;const c=i.get(s.toString())||Kwe(s,t);c&&(s_e({relatedInfo:c,fieldName:o,fieldInfo:e}),this.relatedInfos.set(s,c))}};Vi.interceptor=new N9e(F1e,L1e),v([_()],Vi.prototype,"_error",void 0),v([_()],Vi.prototype,"_featureAbortController",void 0),v([_({readOnly:!0})],Vi.prototype,"_effectivePopupTemplate",null),v([_({readOnly:!0})],Vi.prototype,"_fieldInfoMap",null),v([_({readOnly:!0})],Vi.prototype,"_sourceLayer",null),v([_()],Vi.prototype,"abilities",void 0),v([_t("abilities")],Vi.prototype,"castAbilities",null),v([_({readOnly:!0})],Vi.prototype,"content",void 0),v([_({readOnly:!0})],Vi.prototype,"contentViewModels",void 0),v([_()],Vi.prototype,"description",void 0),v([_({type:Boolean})],Vi.prototype,"defaultPopupTemplateEnabled",void 0),v([_({readOnly:!0})],Vi.prototype,"isTable",null),v([_({readOnly:!0})],Vi.prototype,"state",null),v([_({readOnly:!0})],Vi.prototype,"formattedAttributes",void 0),v([_({type:wr,value:null})],Vi.prototype,"graphic",null),v([_({readOnly:!0})],Vi.prototype,"lastEditInfo",void 0),v([_({readOnly:!0})],Vi.prototype,"relatedInfos",void 0),v([_()],Vi.prototype,"spatialReference",null),v([_({readOnly:!0})],Vi.prototype,"title",void 0),v([_()],Vi.prototype,"map",null),v([_({readOnly:!0})],Vi.prototype,"waitingForContent",null),v([_()],Vi.prototype,"view",void 0),Vi=mv=v([K("esri.widgets.FeatureViewModel")],Vi);const Bk=Vi,ws="esri-feature",rr={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:ws,container:`${ws}__size-container`,title:`${ws}__title`,main:`${ws}__main-container`,btn:`${ws}__button`,icon:`${ws}__icon`,content:`${ws}__content`,contentNode:`${ws}__content-node`,contentElement:`${ws}__content-element`,text:`${ws}__text`,lastEditedInfo:`${ws}__last-edited-info`,fields:`${ws}__fields`,fieldHeader:`${ws}__field-header`,fieldData:`${ws}__field-data`,fieldDataDate:`${ws}__field-data--date`,loadingSpinnerContainer:`${ws}__loading-container`,spinner:`${ws}__loading-spinner`},EK=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>sS(i)&&!i.destroyed?J("div",{class:rr.contentNode,key:i},i.render()):i instanceof HTMLElement?J("div",{class:rr.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):K1e(i)?J("div",{class:rr.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const r=this;i.appendChild(r)}};return t=v([K("esri.widgets.Feature.ContentMixin")],t),t};var UA;const CN={title:!0,content:!0,lastEditedInfo:!0},AN="relationship-handles";let Xr=UA=class extends EK(ki){constructor(e,t){super(e,t),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...CN},this.viewModel=new Bk}initialize(){this.addHandles(ge(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),rt))}loadDependencies(){return pe(()=>import("./calcite-notice.76697bda.js"),["assets/calcite-notice.76697bda.js","assets/conditionalSlot.25fc4c17.js","assets/observers.6e054a3b.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/icon.48bdede2.js"])}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get isTable(){return this.viewModel.isTable}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get title(){return this.viewModel.title}castVisibleElements(e){return{...CN,...e}}get map(){return this.viewModel.map}set map(e){this.viewModel.map=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const{state:e}=this.viewModel,t=J("div",{class:rr.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return J("div",{class:this.classes(rr.base,rr.esriWidget)},t)}setActiveMedia(e,t){return this.viewModel.setActiveMedia(e,t)}nextMedia(e){return this.viewModel.nextMedia(e)}previousMedia(e){return this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return J("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?J("div",{key:"error-title",slot:"title"},e.errorMessage):null,J("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return J("div",{key:"loading-container",class:rr.loadingSpinnerContainer},J("span",{class:this.classes(rr.iconLoading,rr.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?J("div",{class:rr.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?J(sl,{level:this.headingLevel,class:rr.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?J("div",{class:rr.contentNode,key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:J("div",{class:rr.contentNode,key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){var r;const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!((r=i.content)!=null&&r[e.type]))return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);case"relationship":return this.renderRelationship(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:r}=t.viewModel;return i==="loading"||r.length>0?J("div",{key:this._buildKey("attachments-element",e),class:this.classes(rr.contentElement)},t.render()):null}renderRelationship(e){const t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?J("div",{key:this._buildKey("relationship-element",e),class:rr.contentElement},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:J("div",{key:this._buildKey("expression-element",e),class:rr.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,r=this._contentWidgets[t];return!r||r.destroyed?null:i?J("div",{key:this._buildKey("custom-element",t),class:rr.contentElement},r.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:J("div",{key:this._buildKey("fields-element",e),class:rr.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:J("div",{key:this._buildKey("media-element",e),class:rr.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:r,user:s}=i,o=i.type==="edit"?s?t.lastEditedByUser:t.lastEdited:s?t.lastCreatedByUser:t.lastCreated,c=es(o,{date:r,user:s});return J("div",{key:"edit-info-element",class:this.classes(rr.lastEditedInfo,rr.contentElement)},c)}renderText(e,t){const i=e.text,r=this._contentWidgets[t];return!r||r.destroyed?null:i?J("div",{key:this._buildKey("text-element",t),class:this.classes(rr.contentElement,rr.text)},r.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this.removeHandles(AN),this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_addFeatureRelationshipHandles(e){const{flowItems:t,visibleElements:i}=this;this.addHandles([$i(()=>e,"select-record",({featureViewModel:r})=>{t&&(r.abilities={relationshipContent:!0},t.push(new UA({flowItems:t,viewModel:r,visibleElements:i})))}),$i(()=>e,"show-all-records",()=>{if(!t)return;const{viewModel:r}=e;r.showAllEnabled=!0;const s=new IN({visibleElements:{title:!1,description:!1},viewModel:r});this._addFeatureRelationshipHandles(s),t.push(s)})],AN)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:r}=this.viewModel;if(Array.isArray(i))i.forEach((s,o)=>{if(s.type==="attachments"&&(this._contentWidgets[o]=new G1e({displayType:s.displayType,headingLevel:t.title?e+1:e,viewModel:r[o]})),s.type==="fields"&&(this._contentWidgets[o]=new gW({viewModel:r[o]})),s.type==="media"&&(this._contentWidgets[o]=new QW({viewModel:r[o]})),s.type==="text"&&(this._contentWidgets[o]=new b3({viewModel:r[o]})),s.type==="custom"&&(this._contentWidgets[o]=new b3({viewModel:r[o]})),s.type==="expression"&&(this._contentWidgets[o]=new R9e({viewModel:r[o]})),s.type==="relationship"){const c=new IN({viewModel:r[o]});this._addFeatureRelationshipHandles(c),this._contentWidgets[o]=c}},this);else{const s=r[0];s&&!s.destroyed&&(this._contentWidgets[0]=new b3({viewModel:s}))}this.scheduleRender()}};v([_()],Xr.prototype,"graphic",null),v([_()],Xr.prototype,"defaultPopupTemplateEnabled",null),v([_()],Xr.prototype,"flowItems",void 0),v([_()],Xr.prototype,"headingLevel",void 0),v([_({readOnly:!0})],Xr.prototype,"isTable",null),v([_()],Xr.prototype,"label",null),v([_(),ui("esri/widgets/Feature/t9n/Feature")],Xr.prototype,"messages",void 0),v([_(),ui("esri/t9n/common")],Xr.prototype,"messagesCommon",void 0),v([_(),ui("esri/widgets/support/t9n/uriUtils")],Xr.prototype,"messagesURIUtils",void 0),v([_()],Xr.prototype,"spatialReference",null),v([_({readOnly:!0})],Xr.prototype,"title",null),v([_()],Xr.prototype,"visibleElements",void 0),v([_t("visibleElements")],Xr.prototype,"castVisibleElements",null),v([_()],Xr.prototype,"map",null),v([_()],Xr.prototype,"view",null),v([_({type:Bk})],Xr.prototype,"viewModel",void 0),Xr=UA=v([K("esri.widgets.Feature")],Xr);const j9e=Xr;var MK;const G3=Symbol("anchorHandles");let Hp=class extends ss.EventedAccessor{constructor(e){super(e),this[MK]=new Vr,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[G3].add([ts(()=>tl(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),ge(()=>this.screenLocation,(t,i)=>{U(t)&&U(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[G3]=ti(this[G3])}get screenLocation(){var r;const{location:e,view:t,screenLocationEnabled:i}=this;return i&&U(e)&&U(t)&&t.ready?(r=t.toScreen)==null?void 0:r.call(t,e):null}};MK=G3,v([_()],Hp.prototype,"location",void 0),v([_()],Hp.prototype,"screenLocation",null),v([_()],Hp.prototype,"screenLocationEnabled",void 0),v([_()],Hp.prototype,"view",void 0),Hp=v([K("esri.widgets.support.AnchorElementViewModel")],Hp);const TK=Hp,z9e="esri.widgets.CompassViewModel";let U3=class extends TK{constructor(e){super(e),this.visible=!1}};v([_()],U3.prototype,"visible",void 0),U3=v([K(z9e)],U3);const Hk=U3,TE="esri-spinner",CE={base:TE,spinnerStart:`${TE}--start`,spinnerFinish:`${TE}--finish`};let Wp=class extends ki{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new Hk}initialize(){this.addHandles(ge(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:i}=e!=null?e:{};t&&(this.viewModel.location=t),this.visible=!0;const r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,r=e&&i,s=!e&&i,o={[CE.spinnerStart]:r,[CE.spinnerFinish]:s},c=this._getPositionStyles();return J("div",{class:this.classes(CE.base,o),styles:c})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=n5(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(ae(t)||ae(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};v([_()],Wp.prototype,"location",null),v([_()],Wp.prototype,"view",null),v([_({type:Hk})],Wp.prototype,"viewModel",void 0),v([_()],Wp.prototype,"visible",null),Wp=v([K("esri.widgets.Spinner")],Wp);const CK=Wp,f9={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Vf=new x0({id:"zoom-to-feature",title:"{messages.zoom}",className:f9.iconZoom}),$N=new x0({id:"remove-selected-feature",title:"{messages.remove}",className:f9.iconTrash}),Km=new x0({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:f9.iconZoom}),Zm=new x0({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:f9.iconBrowseClusteredFeatures}),V9e="esri.widgets.Popup.PopupViewModel",mS=Ie.getLogger(V9e),G9e=e=>{const{event:t,view:i}=e,{action:r}=t,s=i&&i.popup;if(!r)return Promise.reject(new de("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new de("trigger-action:missing-arguments","view.popup is missing"));const{disabled:o,id:c}=r;if(!c)return Promise.reject(new de("trigger-action:invalid-action","action.id is missing"));if(o)return Promise.reject(new de("trigger-action:invalid-action","Action is disabled"));if(c===Vf.id)return q9e(s.viewModel).catch(q4);if(c===Km.id)return B9e(s.viewModel);if(c===Zm.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,c===$N.id){s.close();const{selectedFeature:u}=s;if(!u)return Promise.reject(new de(`trigger-action:${$N.id}`,"selectedFeature is required",{selectedFeature:u}));const{sourceLayer:g}=u;return g?g.remove(u):i.graphics.remove(u),Promise.resolve()}return Promise.resolve()};function AK(e){var s;const{selectedFeature:t,location:i,view:r}=e;return r?r.type==="3d"?(s=t!=null?t:i)!=null?s:null:e.get("selectedFeature.geometry")||i:null}function gf(e){var t,i;return!!e&&e.isAggregate&&((i=(t=e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}async function U9e(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let r;try{r=await i.whenGraphicBounds(e,{useViewElevation:!0})}catch{}return!r||!r.boundingBox||r.boundingBox[0]===r.boundingBox[3]&&r.boundingBox[1]===r.boundingBox[4]&&r.boundingBox[2]===r.boundingBox[5]}return!0}async function q9e(e){var S;const{location:t,selectedFeature:i,view:r,zoomFactor:s}=e,o=AK(e);if(!r||!o){const E=new de("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:o,view:r});throw mS.error(E),E}const c=r.scale/s,u=(S=e.selectedFeature)==null?void 0:S.geometry,g=u!=null?u:t,b=U(g)&&g.type==="point"&&await U9e(i,r);Vf.active=!0,Vf.disabled=!0;try{await e.zoomTo({target:{target:o,scale:b?c:void 0}})}catch{const A=new de("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});mS.error(A)}finally{Vf.active=!1,Vf.disabled=!1,e.zoomToLocation=null,b&&(e.location=g)}}async function B9e(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const c=new de("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw mS.error(c),c}if(!t||!gf(t)){const c=new de("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw mS.error(c),c}const[r,s]=await Wk(i,t);Km.active=!0,Km.disabled=!0;const{extent:o}=await r.queryExtent(s);await e.zoomTo({target:o}),Km.active=!1,Km.disabled=!1}async function H9e(e){const{view:t,selectedFeature:i}=e;if(!t||!i)return;const[r,s]=await Wk(t,i),{extent:o}=await r.queryExtent(s);e.selectedClusterBoundaryFeature.geometry=o,t.graphics.add(e.selectedClusterBoundaryFeature)}async function W9e(e){var c;const{selectedFeature:t,view:i}=e;if(!i||!t)return;const[r,s]=await Wk(i,t);Zm.active=!0,Zm.disabled=!0;const{features:o}=await r.queryFeatures(s);Zm.active=!1,Zm.disabled=!1,(c=i.popup)==null||c.open({features:[t].concat(o),featureMenuOpen:!0})}async function Wk(e,t){const i=await e.whenLayerView(t.sourceLayer),r=i.createQuery(),s=t.getObjectId();return r.aggregateIds=s!=null?[s]:[],[i,r]}function J9e(e){const t=e.features.filter(i=>gf(i));t.length&&(e.features=t)}function $K(e){var t;if(ae(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return(t=e.extent)==null?void 0:t.center;default:return null}}const it="esri-popup",a1=`${it}__header`,np=`${it}--is-docked`,ke={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:it,widget:"esri-widget",main:`${it}__main-container`,loadingContainer:`${it}__loading-container`,isCollapsible:`${it}--is-collapsible`,isCollapsed:`${it}--is-collapsed`,shadow:`${it}--shadow`,isDocked:np,isDockedTopLeft:`${np}-top-left`,isDockedTopCenter:`${np}-top-center`,isDockedTopRight:`${np}-top-right`,isDockedBottomLeft:`${np}-bottom-left`,isDockedBottomCenter:`${np}-bottom-center`,isDockedBottomRight:`${np}-bottom-right`,alignTopCenter:`${it}--aligned-top-center`,alignBottomCenter:`${it}--aligned-bottom-center`,alignTopLeft:`${it}--aligned-top-left`,alignBottomLeft:`${it}--aligned-bottom-left`,alignTopRight:`${it}--aligned-top-right`,alignBottomRight:`${it}--aligned-bottom-right`,isFeatureMenuOpen:`${it}--feature-menu-open`,isActionsMenuOpen:`${it}--actions-menu-open`,hasFeatureUpdated:`${it}--feature-updated`,header:a1,headerButtons:`${a1}-buttons`,headerContainer:`${a1}-container`,headerContainerButton:`${a1}-container--button`,headerTitle:`${a1}-title`,content:`${it}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${it}__footer`,footerHasPagination:`${it}__footer--has-pagination`,footerHasActions:`${it}__footer--has-actions`,footerHasActionsMenu:`${it}__footer--has-actions-menu`,button:`${it}__button`,buttonDisabled:`${it}__button--disabled`,buttonDock:`${it}__button--dock`,icon:`${it}__icon`,iconDock:`${it}__icon--dock-icon`,inlineActionsContainer:`${it}__inline-actions-container`,actionsMenuButton:`${it}__actions-menu-button`,actions:`${it}__actions`,action:`${it}__action`,actionImage:`${it}__action-image`,actionText:`${it}__action-text`,actionToggle:`${it}__action-toggle`,actionToggleOn:`${it}__action-toggle--on`,actionExit:`${it}__action--exit`,actionSelectFeature:`${it}__action--select-feature`,pointer:`${it}__pointer`,pointerDirection:`${it}__pointer-direction`,navigation:`${it}__navigation`,paginationPrevious:`${it}__pagination-previous`,paginationNext:`${it}__pagination-next`,paginationPreviousIconLTR:`${it}__pagination-previous-icon`,paginationPreviousIconRTL:`${it}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${it}__pagination-next-icon`,paginationNextIconRTL:`${it}__pagination-next-icon--rtl`,featureMenu:`${it}__feature-menu`,featureMenuList:`${it}__feature-menu-list`,featureMenuItem:`${it}__feature-menu-item`,featureMenuViewport:`${it}__feature-menu-viewport`,featureMenuHeader:`${it}__feature-menu-header`,featureMenuNote:`${it}__feature-menu-note`,featureMenuSelected:`${it}__feature-menu-item--selected`,featureMenuButton:`${it}__feature-menu-button`,featureMenuTitle:`${it}__feature-menu-title`,featureMenuObserver:`${it}__feature-menu-observer`,featureMenuLoader:`${it}__feature-menu-loader`,collapseButton:`${it}__collapse-button`,collapseIcon:`${it}__collapse-icon`},Y9e="OBJECTID";var rs;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(rs||(rs={}));const qA={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function K9e(e,t,i){const r=rs.size;let s=r,o=r;e<1?s*=.75:e>1&&(o*=1.25);const c=0,u=0;let g=r,b=r;return t&&i&&(s=o=g=b=0),[{type:"path",path:[{command:"M",values:[g,c]},{command:"L",values:[i?g:.875*g,c]},{command:"L",values:[i?s-.5*g:u,o-.5*b]},{command:"L",values:[s-.5*g,o-.5*b]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[g,c]},{command:"L",values:[g,t?c:.125*b]},{command:"L",values:[s-.5*g,t?o-.5*b:b]},{command:"L",values:[s-.5*g,o-.5*b]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s-.5*g,o-.5*b]},{command:"L",values:[i?s-.5*g:u,o-.5*b]},{command:"L",values:[i?s-.5*g:u,t?o-.5*b:b]},{command:"L",values:[s-.5*g,t?o-.5*b:b]},{command:"Z",values:[]}]}]}function Z9e(e){const t=rs.size,i=.5*e,r=0,s=0;return[{type:"path",path:[{command:"M",values:[s,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[s,.7*t+i-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[t,i]},{command:"L",values:[t,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,r]},{command:"L",values:[t,r]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[s,.7*t*.5]},{command:"Z",values:[]}]}]}function X9e(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function Q9e(e,t){let i=t?rs.tallSymbolWidth:e;const r=e,s=t?4:6;i<=rs.size?i-=.5*s:i-=s;const o=0,c=0,u=t?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,o]},{command:"L",values:[i,.5*u]},{command:"L",values:[.5*i,u]},{command:"L",values:[c,.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*u]},{command:"L",values:[.5*i,u]},{command:"L",values:[.5*i,r]},{command:"L",values:[c,r-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,u]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*u]},{command:"L",values:[i,.5*u]},{command:"Z",values:[]}]}]}function eIe(e,t){let i=t?rs.tallSymbolWidth:e;const r=e,s=t?4:6;i<=rs.size?i-=.5*s:i-=s;const o=.5*i,c=.15*i,u=0,g=r-c;return[{type:"ellipse",cx:.5*i,cy:g,rx:o,ry:c},{type:"path",path:[{command:"M",values:[u,c]},{command:"L",values:[u,g]},{command:"L",values:[i,g]},{command:"L",values:[i,c]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:c,rx:o,ry:c}]}function tIe(e,t){let i=t?rs.tallSymbolWidth:e;const r=e,s=t?4:6;i<=rs.size?i-=.5*s:i-=s;const o=.15*i,c=r-o;return[{type:"ellipse",cx:.5*i,cy:c,rx:.5*i,ry:o},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,c]},{command:"L",values:[0,c]},{command:"Z",values:[]}]}]}function iIe(e){let t=e;const i=e,r=6;t<rs.size?t-=.5*r:t-=r;const s=.15*t,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[t,o]},{command:"L",values:[.5*t,i-s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:s}]}function rIe(e){let t=e;const i=e,r=4;t<rs.size?t-=.5*r:t-=r;const s=0,o=0,c=t,u=i,g=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*c,s]},{command:"L",values:[c,.5*u-g]},{command:"L",values:[.45*c-g,.5*u+g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*c,s]},{command:"L",values:[.45*c-g,.5*u+g]},{command:"L",values:[o,.5*u-g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*u-g]},{command:"L",values:[.45*c-g,.5*u+g]},{command:"L",values:[.45*c,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*c,i]},{command:"L",values:[c,.5*u-g]},{command:"L",values:[.45*c-g,.5*u+g]},{command:"Z",values:[]}]}]}function sIe(e){const t=e,i=2;let r=e;r<rs.size?r-=.5*i:r-=i;const s=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*t,s]},{command:"L",values:[t,r]},{command:"L",values:[.45*t,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,s]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[o,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,r]},{command:"L",values:[.45*t,.6*r]},{command:"L",values:[t,r]},{command:"Z",values:[]}]}]}function Td(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function Gze(e,t){if(e==null)return new Je;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const i=new Je(e);return new Je([Td(i.r,t),Td(i.g,t),Td(i.b,t),i.a])}function nIe(e){return"r"in e&&"g"in e&&"b"in e}function kK(e){return"h"in e&&"s"in e&&"v"in e}function OK(e){return"l"in e&&"a"in e&&"b"in e}function PK(e){return"l"in e&&"c"in e&&"h"in e}function oIe(e){return"x"in e&&"y"in e&&"z"in e}const aIe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],lIe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function FK(e,t){const i=[];let r,s;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,c=e[0].length;let u=0;for(r=0;r<o;r++){for(u=0,s=0;s<c;s++)u+=e[r][s]*t[s];i.push(u)}return i}function LK(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=FK(aIe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function Jk(e){const t=FK(lIe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function RK(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function NK(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function uIe(e){const t=e.l,i=e.a,r=e.b,s=Math.sqrt(i*i+r*r);let o=Math.atan2(r,i);return o=o>0?o:o+2*Math.PI,{l:t,c:s,h:o}}function cIe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function DK(e){return RK(LK(e))}function jK(e){return Jk(NK(e))}function hIe(e){return uIe(RK(LK(e)))}function dIe(e){return Jk(NK(cIe(e)))}function pIe(e){const t=e.r,i=e.g,r=e.b,s=Math.max(t,i,r),o=s-Math.min(t,i,r);let c=s,u=o===0?0:s===t?(i-r)/o%6:s===i?(r-t)/o+2:(t-i)/o+4,g=o===0?0:o/c;return u<0&&(u+=6),u*=60,g*=100,c*=100/255,{h:u,s:g,v:c}}function fIe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,s=r*i,o=s*(1-Math.abs(t%2-1));let c;switch(Math.floor(t)){case 0:c={r:s,g:o,b:0};break;case 1:c={r:o,g:s,b:0};break;case 2:c={r:0,g:s,b:o};break;case 3:c={r:0,g:o,b:s};break;case 4:c={r:o,g:0,b:s};break;case 5:case 6:c={r:s,g:0,b:o};break;default:c={r:0,g:0,b:0}}return c.r=Math.round(c.r+r-s),c.g=Math.round(c.g+r-s),c.b=Math.round(c.b+r-s),c}function Qw(e){return nIe(e)?e:PK(e)?dIe(e):OK(e)?jK(e):oIe(e)?Jk(e):kK(e)?fIe(e):e}function Yk(e){return kK(e)?e:pIe(Qw(e))}function Uze(e){return OK(e)?e:DK(Qw(e))}function qze(e){return PK(e)?e:hIe(Qw(e))}function Bze(e,t){const i=DK(e);return i.l*=1-t,jK(i)}function yS(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function mIe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function yIe(e,t,i,r,s,o){const c=new Float32Array(6);return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=s,c[5]=o,c}function gIe(e,t){return new Float32Array(e,t,6)}function zK(e,t,i,r){const s=t[r],o=t[r+1];e[r]=i[0]*s+i[2]*o+i[4],e[r+1]=i[1]*s+i[3]*o+i[5]}function vIe(e,t,i,r=0,s=0,o=2){const c=s||t.length/o;for(let u=r;u<c;u++)zK(e,t,i,u*o)}Object.freeze(Object.defineProperty({__proto__:null,clone:mIe,create:yS,createView:gIe,fromValues:yIe,transform:zK,transformMany:vIe},Symbol.toStringTag,{value:"Module"}));function bIe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function m9(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function wIe(e,t,i,r,s,o,c){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=o,e[5]=c,e}function Kk(e,t){const i=t[0],r=t[1],s=t[2],o=t[3],c=t[4],u=t[5];let g=i*o-r*s;return g?(g=1/g,e[0]=o*g,e[1]=-r*g,e[2]=-s*g,e[3]=i*g,e[4]=(s*u-o*c)*g,e[5]=(r*c-i*u)*g,e):null}function _Ie(e){return e[0]*e[3]-e[1]*e[2]}function vf(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],g=t[5],b=i[0],S=i[1],E=i[2],A=i[3],O=i[4],L=i[5];return e[0]=r*b+o*S,e[1]=s*b+c*S,e[2]=r*E+o*A,e[3]=s*E+c*A,e[4]=r*O+o*L+u,e[5]=s*O+c*L+g,e}function e_(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],g=t[5],b=Math.sin(i),S=Math.cos(i);return e[0]=r*S+o*b,e[1]=s*S+c*b,e[2]=r*-b+o*S,e[3]=s*-b+c*S,e[4]=u,e[5]=g,e}function y9(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],g=t[5],b=i[0],S=i[1];return e[0]=r*b,e[1]=s*b,e[2]=o*S,e[3]=c*S,e[4]=u,e[5]=g,e}function Hy(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],g=t[5],b=i[0],S=i[1];return e[0]=r,e[1]=s,e[2]=o,e[3]=c,e[4]=r*b+o*S+u,e[5]=s*b+c*S+g,e}function VK(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function GK(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Zk(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function xIe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function SIe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function IIe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function UK(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function EIe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function MIe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function TIe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function CIe(e,t){const i=e[0],r=e[1],s=e[2],o=e[3],c=e[4],u=e[5],g=t[0],b=t[1],S=t[2],E=t[3],A=t[4],O=t[5],L=Ro();return Math.abs(i-g)<=L*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(r-b)<=L*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(s-S)<=L*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(o-E)<=L*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(c-A)<=L*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-O)<=L*Math.max(1,Math.abs(u),Math.abs(O))}const AIe=vf,$Ie=UK;Object.freeze(Object.defineProperty({__proto__:null,add:IIe,copy:bIe,determinant:_Ie,equals:CIe,exactEquals:TIe,frob:SIe,fromRotation:VK,fromScaling:GK,fromTranslation:Zk,identity:m9,invert:Kk,mul:AIe,multiply:vf,multiplyScalar:EIe,multiplyScalarAndAdd:MIe,rotate:e_,scale:y9,set:wIe,str:xIe,sub:$Ie,subtract:UK,translate:Hy},Symbol.toStringTag,{value:"Module"}));const kIe="http://www.w3.org/2000/svg";let OIe=0,PIe=0;const kN=Se("android"),FIe=Se("chrome")||kN&&kN>=4?"auto":"optimizeLegibility",LIe={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},RIe=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let sr={},si={};const ON={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},NIe=Math.PI;let DIe=1;function Xm(e,t){const i=e*(NIe/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function qK(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function BK(e,t,i,r){if(e){if(e.type==="circle")return J("circle",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if(e.type==="ellipse")return J("ellipse",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if(e.type==="rect")return J("rect",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if(e.type==="image")return J("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if(e.type==="path"){const s=typeof e.path!="string"?qK(e.path):e.path;return J("path",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:s})}if(e.type==="text")return eu(r),J("text",{"dominant-baseline":r.dominantBaseline,fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":FIe,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:e.x,y:e.y},e.text)}return null}function HK(e){const t={fill:"none",pattern:null,linearGradient:null};if(e){if("type"in e&&e.type==="pattern"){const i="patternId-"+ ++OIe;t.fill=`url(#${i})`,t.pattern={id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&e.type==="linear"){const i="linearGradientId-"+ ++PIe;t.fill=`url(#${i})`,t.linearGradient={id:i,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(r=>({offset:r.offset,color:r.color&&new Je(r.color).toString()}))}}else if(e){const i=new Je(e);t.fill=i.toString()}}return t}function WK(e){var i;const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new Je(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashArray&&(t.dashOffset=e.dashoffset),e.style)){let r=null;if(e.style in ON&&(r=ON[e.style]),Array.isArray(r)){r=r.slice(0);const s=(i=e.width)!=null?i:0;for(let o=0;o<r.length;++o)r[o]*=s;if(e.cap!=="butt"){for(let o=0;o<r.length;o+=2)r[o]-=s,r[o]<1&&(r[o]=1);for(let o=1;o<r.length;o+=2)r[o]+=s}r=r.join(",")}t.dashArray=r}return t}function JK(e,t){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const r=e.alignBaseline,s=r==="baseline"?"auto":r==="top"?"text-top":r==="bottom"?"hanging":r;i.align=e.align,i.dominantBaseline=s,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",eu(t),i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"}return i}function jIe(e){const{pattern:t,linearGradient:i}=e;if(t)return J("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},J("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(i){const r=i.stops.map((s,o)=>J("stop",{key:`${o}-stop`,offset:s.offset,"stop-color":s.color}));return J("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},r)}return null}function zIe(e,t){if(!e)return null;const i=[];for(const r of e){const{shape:s,fill:o,stroke:c,font:u}=r,g=HK(o),b=WK(c),S=s.type==="text"?JK(s,u):null,E=BK(s,g.fill,b,S);E&&i.push(E)}return J("mask",{id:t,maskUnits:"userSpaceOnUse"},J("g",null,i))}function PN(e,t,i){return Hy(e,m9(e),[t,i])}function FN(e,t,i,r,s){return y9(e,m9(e),[t,i]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*i-s*i+s,e}function VIe(e,t,i,r){const s=t%360*Math.PI/180;e_(e,m9(e),s);const o=Math.cos(s),c=Math.sin(s),u=e[4],g=e[5];return e[4]=u*o-g*c+r*c-i*o+i,e[5]=g*o+u*c-i*c-r*o+r,e}function cn(e,t){sr&&"left"in sr?(sr.left!=null&&sr.left>e&&(sr.left=e),(sr.right==null||sr.right<e)&&(sr.right=e),(sr.top==null||sr.top>t)&&(sr.top=t),(sr.bottom==null||sr.bottom<t)&&(sr.bottom=t)):sr={left:e,bottom:t,right:e,top:t}}function LN(e){const t=e.args,i=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)cn(t[r],t[r+1]);si.x=t[i-2],si.y=t[i-1];break;case"H":for(r=0;r<i;++r)cn(t[r],si.y);si.x=t[i-1];break;case"V":for(r=0;r<i;++r)cn(si.x,t[r]);si.y=t[i-1];break;case"m":{let s=0;for(("x"in si)||(cn(si.x=t[0],si.y=t[1]),s=2),r=s;r<i;r+=2)cn(si.x+=t[r],si.y+=t[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)cn(si.x+=t[r],si.y+=t[r+1]);break;case"h":for(r=0;r<i;++r)cn(si.x+=t[r],si.y);break;case"v":for(r=0;r<i;++r)cn(si.x,si.y+=t[r]);break;case"c":for(r=0;r<i;r+=6)cn(si.x+t[r],si.y+t[r+1]),cn(si.x+t[r+2],si.y+t[r+3]),cn(si.x+=t[r+4],si.y+=t[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)cn(si.x+t[r],si.y+t[r+1]),cn(si.x+=t[r+2],si.y+=t[r+3]);break;case"A":for(r=0;r<i;r+=7)cn(t[r+5],t[r+6]);si.x=t[i-2],si.y=t[i-1];break;case"a":for(r=0;r<i;r+=7)cn(si.x+=t[r+5],si.y+=t[r+6])}}function RN(e,t,i){const r=LIe[e.toLowerCase()];let s;typeof r=="number"&&(r?t.length>=r&&(s={action:e,args:t.slice(0,t.length-t.length%r)},i.push(s),LN(s)):(s={action:e,args:[]},i.push(s),LN(s)))}function GIe(e){const t=(typeof e.path!="string"?qK(e.path):e.path).match(RIe),i=[];if(sr={},si={},!t)return null;let r="",s=[];const o=t.length;for(let u=0;u<o;++u){const g=t[u],b=parseFloat(g);isNaN(b)?(r&&RN(r,s,i),s=[],r=g):s.push(b)}RN(r,s,i);const c={x:0,y:0,width:0,height:0};return sr&&"left"in sr&&(c.x=sr.left,c.y=sr.top,c.width=sr.right-sr.left,c.height=sr.bottom-sr.top),c}function UIe(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const i=fs(GIe(e));t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function qIe(e){const t={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const o of e)i?(i.x=Math.min(i.x,o.x),i.y=Math.min(i.y,o.y),r=Math.max(r,o.x+o.width),s=Math.max(s,o.y+o.height)):(i=t,i.x=o.x,i.y=o.y,r=o.x+o.width,s=o.y+o.height);return i&&(i.width=r-i.x,i.height=s-i.y),i}function BIe(e,t,i,r,s,o,c,u,g){let b=(c&&o?Xm(o,t):t)/2,S=(c&&o?Xm(o,i):i)/2;if(g){const Z=g[0],ee=g[1];b=(c&&o?Xm(o,Z):Z)/2,S=(c&&o?Xm(o,ee):ee)/2}const E=e.width+r,A=e.height+r,O=yS(),L=yS();let N=!1;if(s&&E!==0&&A!==0){const Z=t!==i?t/i:E/A,ee=t>i?t:i;let ie=1,ne=1;isNaN(ee)||(Z>1?(ie=ee/E,ne=ee/Z/A):(ne=ee/A,ie=ee*Z/E)),vf(L,L,FN(O,ie,ne,b,S)),N=!0}const z=e.x+(E-r)/2,q=e.y+(A-r)/2;if(vf(L,L,PN(O,b-z,S-q)),!N&&(E>t||A>i)){const Z=E/t>A/i,ee=(Z?t:i)/(Z?E:A);vf(L,L,FN(O,ee,ee,z,q))}return o&&vf(L,L,VIe(O,o,z,q)),u&&vf(L,L,PN(O,u[0],u[1])),`matrix(${L[0]},${L[1]},${L[2]},${L[3]},${L[4]},${L[5]})`}function HIe(e,t,i){const r=e==null?void 0:e.effects.find(b=>b.type==="bloom");if(!r)return null;const{strength:s,radius:o}=r,c=s>0?o:0,u=(s+c)*t,g=4*s+1;return J("filter",{id:`bloom${i}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},J("feMorphology",{operator:"dilate",radius:(s+.5*c)*(5**(t/100)*(.4+t/100)),in:"SourceGraphic",result:"dilate"}),J("feGaussianBlur",{in:"dilate",stdDeviation:u/25,result:"blur"}),J("feGaussianBlur",{in:"blur",stdDeviation:u/50,result:"intensityBlur"}),J("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},J("feFuncR",{type:"linear",slope:g}),J("feFuncG",{type:"linear",slope:g}),J("feFuncB",{type:"linear",slope:g})),J("feMerge",null,J("feMergeNode",{in:"intensityBlur"}),J("feMergeNode",{in:"intensityBrightness"}),J("feGaussianBlur",{stdDeviation:s/10})))}function WIe(e,t,i,r={}){var b,S,E;const s=[],o=[],c=++DIe,u=HIe(r.effectView,t,c);let g=null;if(u){const A=(b=r.effectView)==null?void 0:b.effects.find(z=>z.type==="bloom"),O=(A.strength?A.strength+A.radius/2:0)/3,L=t+t*O,N=i+i*O;g=[Math.max(L,10),Math.max(N,10)]}for(let A=0;A<e.length;A++){const O=e[A],L=[],N=[];let z=0,q=0,Z=0;for(const ne of O){const{shape:oe,fill:me,stroke:fe,font:Ce,offset:_e}=ne;r.ignoreStrokeWidth||(z+=fe&&fe.width||0);const Ae=HK(me),Oe=WK(fe),je=oe.type==="text"?JK(oe,Ce):null;s.push(jIe(Ae)),L.push(BK(oe,Ae.fill,Oe,je)),N.push(UIe(oe)),_e&&(q+=_e[0],Z+=_e[1])}const ee=BIe(fs(qIe(N)),t,i,z,(S=r.scale)!=null?S:!1,r.rotation,(E=r.useRotationSize)!=null?E:!1,[q,Z],g);let ie=null;if(r.masking){const ne=`mask-${A}`,oe=r.masking[A];s.push(zIe(oe,ne)),ie=`url(#${ne})`}o.push(ie?J("g",{mask:ie},J("g",{transform:ee},L)):J("g",{transform:ee},L))}return r.useRotationSize&&r.rotation&&(t=Xm(r.rotation,t),i=Xm(r.rotation,i)),u&&(eu(g),t=g[0],i=g[1]),J("svg",{xmlns:kIe,width:t,height:i,style:"display: block;"},u,J("defs",null,s),u?J("g",{filter:`url(#bloom${c})`},o):o)}const NN=WT();function JIe(e,t){NN.append(e,t),NN.detach(t)}function g9(e,t,i){const r=Math.ceil(t[0]),s=Math.ceil(t[1]);if(!e.some(c=>!!c.length))return null;const o=i&&i.node||document.createElement("div");return i.opacity!=null&&(o.style.opacity=i.opacity.toString()),i.effectView!=null&&(o.style.filter=$W(i.effectView)),JIe(o,()=>WIe(e,r,s,i)),o}function YIe(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";const r=i.getContext("2d");return r.clearRect(0,0,e,t),r}function KIe(e,t,i){return e?mi(e,{responseType:"image"}).then(r=>{const s=r.data,o=s.width,c=s.height,u=o/c;let g=t;if(i){const b=Math.max(o,c);g=Math.min(g,b)}return{image:s,width:u<=1?Math.ceil(g*u):g,height:u<=1?g:Math.ceil(g/u)}}):Promise.reject(new de("renderUtils: imageDataSize","href not provided."))}function ZIe(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function XIe(e,t,i,r,s){switch(s){case"multiply":e[t+0]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];break;default:{const o=Yk({r:e[t+0],g:e[t+1],b:e[t+2]});o.h=r.h,o.s=r.s,o.v=o.v/100*r.v;const c=Qw(o);e[t+0]=c.r,e[t+1]=c.g,e[t+2]=c.b,e[t+3]*=i[3];break}}}function QIe(e,t,i,r,s){return KIe(e,t,s).then(o=>{const c=o.width?o.width:t,u=o.height?o.height:t;if(o.image&&ZIe(i,r)){let g=o.image.width,b=o.image.height;Se("edge")&&/\.svg$/i.test(e)&&(g-=1,b-=1);const S=YIe(c,u);S.drawImage(o.image,0,0,g,b,0,0,c,u);const E=S.getImageData(0,0,c,u),A=[i.r/255,i.g/255,i.b/255,i.a],O=Yk(i);for(let L=0;L<E.data.length;L+=4)XIe(E.data,L,A,O,r);S.putImageData(E,0,0),e=S.canvas.toDataURL("image/png")}else{const g=qt&&qt.findCredential(e);if(g&&g.token){const b=e.includes("?")?"&":"?";e=`${e}${b}token=${g.token}`}}return{url:e,width:c,height:u}}).catch(()=>({url:e,width:t,height:t}))}function eEe(e){return e=e||globalThis.location.hostname,tEe.some(t=>(e==null?void 0:e.match(t))!=null)}function DN(e,t){return e&&(t=t||globalThis.location.hostname)?t.match(YK)!=null||t.match(ZK)!=null?e.replace("static.arcgis.com","staticdev.arcgis.com"):t.match(KK)!=null||t.match(XK)!=null?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const YK=/^devext.arcgis.com$/,KK=/^qaext.arcgis.com$/,ZK=/^[\w-]*\.mapsdevext.arcgis.com$/,XK=/^[\w-]*\.mapsqa.arcgis.com$/,tEe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,YK,KK,/^jsapps.esri.com$/,ZK,XK];function QK(e,t,i,r){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?iEe(e,t,r):kJ(e,t,r).then(s=>eZ(fs(s),e.name,t,i,r)):Promise.reject(new de("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function eZ(e,t,i,r,s){var O,L,N;const o=e.data,c=i&&U(i.portal)?i.portal:Ts.getDefault(),u={portal:c,url:is(e.baseUrl),origin:"portal-item"},g=o.items.find(z=>z.name===t);if(!g){const z=`The symbol name '${t}' could not be found`;return Promise.reject(new de("symbolstyleutils:symbol-name-not-found",z,{symbolName:t}))}let b=Fd(y2e(g,r),u),S=(L=(O=g.thumbnail)==null?void 0:O.href)!=null?L:null;const E=g.thumbnail&&g.thumbnail.imageData;eEe()&&(b=(N=DN(b))!=null?N:"",S=DN(S));const A={portal:c,url:is(j6(b)),origin:"portal-item"};return Ik(b,s).then(z=>{const q=r==="cimRef"?OJ(z.data):z.data,Z=fJ(q,A);if(Z&&Ld(Z)){if(S){const ee=Fd(S,u);Z.thumbnail=new Wf({url:ee})}else E&&(Z.thumbnail=new Wf({url:`data:image/png;base64,${E}`}));e.styleUrl?Z.styleOrigin=new Rb({portal:i.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(Z.styleOrigin=new Rb({portal:i.portal,styleName:e.styleName,name:t}))}return Z})}function iEe(e,t,i){const r=g2e.replace(/\{SymbolName\}/gi,e.name),s=U(t.portal)?t.portal:Ts.getDefault();return Ik(r,i).then(o=>{const c=OJ(o.data);return fJ(c,{portal:s,url:is(j6(r)),origin:"portal-item"})})}var rEe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:eZ,resolveWebStyleSymbol:QK},Symbol.toStringTag,{value:"Module"}));const bf=rs.size,q3=rs.maxSize,Xk=rs.maxOutlineSize,jN=rs.lineWidth,BA=rs.tallSymbolWidth;function Qm(e){const t=e.outline,i=U(e.material)?e.material.color:null,r=U(i)?i.toHex():null;if(ae(t)||"pattern"in t&&U(t.pattern)&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&r==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const s=Is(t.size)||0;return{color:"rgba("+(U(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(s,Xk),style:"pattern"in t&&U(t.pattern)&&t.pattern.type==="style"?nk(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function sEe(e,t){const i=t&&t.resource,r=i&&i.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(r&&t.type!=="object")return Promise.resolve(abe(t));const s=Dt("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?QK(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(o=>o).then(o=>{var c;return((c=o==null?void 0:o.thumbnail)==null?void 0:c.url)||s}):Promise.resolve(s)}function AE(e,t=1){const i=e.a,r=Yk(e),s=r.h,o=r.s/t,c=100-(100-r.v)/t,{r:u,g,b}=Qw({h:s,s:o,v:c});return[u,g,b,i]}function gS(e){return e.type==="water"?ae(e.color)?null:e.color:ae(e.material)||ae(e.material.color)?null:e.material.color}function Ei(e,t=0){const i=gS(e);if(!i){if(e.type==="fill")return null;const s=rbe.r,o=Td(s,t);return[o,o,o,100]}const r=i.toRgba();for(let s=0;s<3;s++)r[s]=Td(r[s],t);return r}async function tZ(e,t){const i=e.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await ibe(Dt(`esri/symbols/patterns/${i}.png`),t.toCss(!0)),width:5,height:5}}function zN(e){return e.outline?Qm(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function iZ(e,t){const i=gS(e);if(!i)return null;let r="rgba(";return r+=Td(i.r,t)+",",r+=Td(i.g,t)+",",r+=Td(i.b,t)+",",r+i.a+");"}function HA(e,t){const i=iZ(e,t);return i?"pattern"in e&&U(e.pattern)&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:i,width:Math.min(e.size?Is(e.size):.75,Xk),style:"pattern"in e&&U(e.pattern)&&e.pattern.type==="style"?nk(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?Is(2):e.join:null}:{}}function a2(e,t,i){const r=i!=null?.75*i:0;return{type:"linear",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function nEe(e){const t=e.depth,i=e.height,r=e.width;return r!==0&&t!==0&&i!==0&&r===t&&r!=null&&i!=null&&r<i}function oEe(e,t,i){const r=[];if(!e)return r;switch(e.type){case"icon":{const c=t,u=t;switch(e.resource&&e.resource.primitive||Dpe){case"circle":r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:Ei(e,0),stroke:Qm(e)});break;case"square":r.push({shape:{type:"path",path:[{command:"M",values:[0,u]},{command:"L",values:[0,0]},{command:"L",values:[c,0]},{command:"L",values:[c,u]},{command:"Z",values:[]}]},fill:Ei(e,0),stroke:Qm(e)});break;case"triangle":r.push({shape:{type:"path",path:[{command:"M",values:[0,u]},{command:"L",values:[.5*c,0]},{command:"L",values:[c,u]},{command:"Z",values:[]}]},fill:Ei(e,0),stroke:Qm(e)});break;case"cross":r.push({shape:{type:"path",path:[{command:"M",values:[.5*c,0]},{command:"L",values:[.5*c,u]},{command:"M",values:[0,.5*u]},{command:"L",values:[c,.5*u]}]},stroke:zN(e)});break;case"x":r.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[c,u]},{command:"M",values:[c,0]},{command:"L",values:[0,u]}]},stroke:zN(e)});break;case"kite":r.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[.5*c,0]},{command:"L",values:[c,.5*u]},{command:"L",values:[.5*c,u]},{command:"Z",values:[]}]},fill:Ei(e,0),stroke:Qm(e)})}break}case"object":switch(e.resource&&e.resource.primitive||Gpe){case"cone":{const s=a2(Ei(e,0),Ei(e,-.6),i?BA:t),o=tIe(t,i);r.push({shape:o[0],fill:s}),r.push({shape:o[1],fill:s});break}case"inverted-cone":{const s=Ei(e,0),o=a2(s,Ei(e,-.6),t),c=iIe(t);r.push({shape:c[0],fill:o}),r.push({shape:c[1],fill:s});break}case"cube":{const s=Q9e(t,i);r.push({shape:s[0],fill:Ei(e,0)}),r.push({shape:s[1],fill:Ei(e,-.3)}),r.push({shape:s[2],fill:Ei(e,-.5)});break}case"cylinder":{const s=a2(Ei(e,0),Ei(e,-.6),i?BA:t),o=eIe(t,i);r.push({shape:o[0],fill:s}),r.push({shape:o[1],fill:s}),r.push({shape:o[2],fill:Ei(e,0)});break}case"diamond":{const s=rIe(t);r.push({shape:s[0],fill:Ei(e,-.3)}),r.push({shape:s[1],fill:Ei(e,0)}),r.push({shape:s[2],fill:Ei(e,-.3)}),r.push({shape:s[3],fill:Ei(e,-.7)});break}case"sphere":{const s=a2(Ei(e,0),Ei(e,-.6));s.x1=0,s.y1=0,s.x2=.25*t,s.y2=.25*t,r.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:s});break}case"tetrahedron":{const s=sIe(t);r.push({shape:s[0],fill:Ei(e,-.3)}),r.push({shape:s[1],fill:Ei(e,0)}),r.push({shape:s[2],fill:Ei(e,-.6)});break}}break}return r}function v9(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?Is(t):null}function aEe(e){return e.type==="icon"?"multiply":"tint"}function lEe(e,t){var E;const i=v9(t),r=t!=null&&t.maxSize?Is(t.maxSize):null,s=(E=t==null?void 0:t.disableUpsampling)!=null?E:!1,o=e.symbolLayers,c=[];let u=0,g=0;const b=o.getItemAt(o.length-1);let S;return b&&b.type==="icon"&&(S=b.size&&Is(b.size)),o.forEach(A=>{var N;if(A.type!=="icon"&&A.type!=="object")return;const O=A.type==="icon"?A.size&&Is(A.size):0,L=i||O?Math.ceil(Math.min(i||O,r||q3)):bf;if(A&&A.resource&&A.resource.href){const z=sEe(e,A).then(q=>{const Z=A.get("material.color"),ee=aEe(A);return QIe(q,L,Z,ee,s)}).then(q=>{const Z=q.width,ee=q.height;return u=Math.max(u,Z),g=Math.max(g,ee),[{shape:{type:"image",x:0,y:0,width:Z,height:ee,src:q.url},fill:null,stroke:null}]});c.push(z)}else{let z=L;A.type==="icon"&&S&&i&&(z=L*(O/S));const q=(t==null?void 0:t.symbolConfig)==="tall"||((N=t==null?void 0:t.symbolConfig)==null?void 0:N.isTall)||A.type==="object"&&nEe(A);u=Math.max(u,q?BA:z),g=Math.max(g,z),c.push(Promise.resolve(oEe(A,z,q)))}}),Ms(c).then(A=>{const O=[];return A.forEach(L=>{L.value?O.push(L.value):L.error&&Ie.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",L.error)}),g9(O,[u,g],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})})}function uEe(e,t){const i=e.symbolLayers,r=[],s=obe(e),o=v9(t),c=(t&&t.maxSize?Is(t.maxSize):null)||Xk;let u,g=0,b=0;return i.forEach((S,E)=>{if(!S||S.type!=="line"&&S.type!=="path")return;const A=[];switch(S.type){case"line":{const O=HA(S,0);if(ae(O))break;const L=O&&O.width||0;E===0&&(u=L);const N=Math.min(o||L,c),z=E===0?N:o?N*(L/u):N,q=z>jN/2?2*z:jN;b=Math.max(b,z),g=Math.max(g,q),O.width=z,A.push({shape:{type:"path",path:[{command:"M",values:[0,.5*b]},{command:"L",values:[g,.5*b]}]},stroke:O});break}case"path":{const O=Math.min(o||bf,c),L=Ei(S,0),N=Ei(S,-.2),z=iZ(S,-.4),q=z?{color:z,width:1}:{};if(S.profile==="quad"){const Z=S.width,ee=S.height,ie=K9e(Z&&ee?Z/ee:1,ee===0,Z===0),ne={...q,join:"bevel"};A.push({shape:ie[0],fill:N,stroke:ne}),A.push({shape:ie[1],fill:N,stroke:ne}),A.push({shape:ie[2],fill:L,stroke:ne})}else A.push({shape:qA.pathSymbol3DLayer[0],fill:N,stroke:q}),A.push({shape:qA.pathSymbol3DLayer[1],fill:L,stroke:q});b=Math.max(b,O),g=b}}r.push(A)}),Promise.resolve(g9(r,[g,b],{node:t&&t.node,scale:s,opacity:t&&t.opacity}))}async function cEe(e,t){const i=e.type==="mesh-3d",r=e.symbolLayers,s=v9(t),o=t&&t.maxSize?Is(t.maxSize):null,c=s||bf,u=[];let g=0,b=0,S=!1;for(let E=0;E<r.length;E++){const A=r.getItemAt(E),O=[];if(i&&A.type!=="fill")continue;const L=qA.fill[0];switch(A.type){case"fill":{const N=Qm(A),z=Math.min(c,o||q3);g=Math.max(g,z),b=Math.max(b,z),S=!0;let q=Ei(A,0);const Z="pattern"in A?A.pattern:null,ee=gS(A);!i&&U(Z)&&Z.type==="style"&&Z.style!=="solid"&&ee&&(q=await tZ(Z,ee)),O.push({shape:L,fill:q,stroke:N});break}case"line":{const N=HA(A,0);if(ae(N))break;const z={stroke:N,shape:L};g=Math.max(g,bf),b=Math.max(b,bf),O.push(z);break}case"extrude":{const N={join:"round",width:1,...HA(A,-.4)},z=Ei(A,0),q=Ei(A,-.2),Z=Math.min(c,o||q3),ee=Z9e(Z);N.width=1,O.push({shape:ee[0],fill:q,stroke:N}),O.push({shape:ee[1],fill:q,stroke:N}),O.push({shape:ee[2],fill:z,stroke:N});const ie=bf,ne=.7*bf+.5*Z;g=Math.max(g,ie),b=Math.max(b,ne);break}case"water":{const N=fs(gS(A)),z=AE(N),q=AE(N,2),Z=AE(N,3),ee=X9e();S=!0,O.push({shape:ee[0],fill:z}),O.push({shape:ee[1],fill:q}),O.push({shape:ee[2],fill:Z});const ie=Math.min(c,o||q3);g=Math.max(g,ie),b=Math.max(b,ie);break}}u.push(O)}return g9(u,[g,b],{node:t&&t.node,scale:S,opacity:t&&t.opacity})}function hEe(e,t){if(e.symbolLayers.length===0)return Promise.reject(new de("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return lEe(e,t);case"line-3d":return uEe(e,t);case"polygon-3d":case"mesh-3d":return cEe(e,t)}return Promise.reject(new de("symbolPreview: swatchInfo3D","symbol not supported."))}var dEe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:tZ,getSizeFromOptions:v9,getSymbolLayerFill:Ei,previewSymbol3D:hEe},Symbol.toStringTag,{value:"Module"}));let N0=null;const VN=[255,255,255];function GN(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Hze(e,t,i){const{backgroundColor:r,outline:s,dotSize:o}=e,c=i&&i.swatchSize||rs.size,u=.8,g=Math.round(c*c/o**2*u),b=window.devicePixelRatio,S=document.createElement("canvas"),E=c*b;S.width=E,S.height=E,S.style.width=S.width/b+"px",S.style.height=S.height/b+"px";const A=S.getContext("2d");if(r&&(A.fillStyle=r.toCss(!0),A.fillRect(0,0,E,E),A.fill()),A.fillStyle=t.toCss(!0),N0&&N0.length/2===g)for(let L=0;L<2*g;L+=2){const N=N0[L],z=N0[L+1];A.fillRect(N,z,o*b,o*b),A.fill()}else{N0=[];for(let L=0;L<2*g;L+=2){const N=GN(0,E),z=GN(0,E);N0.push(N,z),A.fillRect(N,z,o*b,o*b),A.fill()}}s&&(s.color&&(A.strokeStyle=s.color.toCss(!0)),A.lineWidth=s.width,A.strokeRect(0,0,E,E));const O=new Image(c,c);return O.src=S.toDataURL(),O}function Wze(e,t={}){const i=t.radius||40,r=2*Math.PI*i,s=e.length,o=r/s,c=[],u=sk(t.outline);(u==null?void 0:u.width)!=null&&(u.width*=2),(u||t.backgroundColor)&&c.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:t.backgroundColor,stroke:u,offset:[0,0]});const g=t.values,b=g&&g.length===s&&g.reduce((L,N)=>L+N,0)===100,S=[0];for(let L=0;L<s;L++){let N=null;b&&(N=g[L]*r/100,S.push(N+S[L])),c.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(N!=null?N:o)/2} ${r}`,dashoffset:"-"+(b?S[L]/2:L*(o/2)),color:e[L]},offset:[0,0]})}let E=null;const A=2*i+((u==null?void 0:u.width)||0),O=t.holePercentage;if(O){u&&c.push({shape:{type:"circle",cx:i,cy:i,r:i*O},fill:null,stroke:u,offset:[0,0]});const L=A/2;E=[[{shape:{type:"circle",cx:L,cy:L,r:L},fill:VN,stroke:u?{...u,color:VN}:null,offset:[0,0]},{shape:{type:"circle",cx:L,cy:L,r:i*O},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return g9([c],[A,A],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:E,rotation:-90})}function Jze(e,t={}){const s=t.align==="horizontal",o=s?75:24,c=s?24:75,{width:u=o,height:g=c,gradient:b=!0}=t,S=window.devicePixelRatio,E=u*S,A=g*S,O=document.createElement("canvas");O.width=E,O.height=A,O.style.width=`${u}px`,O.style.height=`${g}px`;const L=O.getContext("2d"),N=s?E:0,z=s?0:A;if(b){const Z=L.createLinearGradient(0,0,N,z),ee=e.length,ie=ee===1?0:1/(ee-1);e.forEach((ne,oe)=>Z.addColorStop(oe*ie,ne.toString())),L.fillStyle=Z,L.fillRect(0,0,E,A)}else{const Z=s?E/e.length:E,ee=s?A:A/e.length;let ie=0,ne=0;for(const oe of e)L.fillStyle=oe.toString(),L.fillRect(ie,ne,Z,ee),ie=s?ie+Z:0,ne=s?0:ne+ee}const q=document.createElement("div");return q.style.width=`${u}px`,q.style.height=`${g}px`,pEe(q,t==null?void 0:t.effectList),q.appendChild(O),q}function pEe(e,t){if(!t)return;e.style.filter=$W(t);const i=t.effects;if(i){for(const r of i)if((r==null?void 0:r.type)==="drop-shadow"){r.offsetX<0?e.style.marginLeft=`${Math.abs(r.offsetX)}px`:e.style.marginRight=`${r.offsetX}px`;break}}}async function rZ(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:i}=await pe(()=>import("./previewWebStyleSymbol.0fe6b5fc.js"),[]);return i(e,rZ,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await pe(()=>Promise.resolve().then(function(){return dEe}),void 0);return i(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await pe(()=>import("./previewSymbol2D.c8991a3d.js"),["assets/previewSymbol2D.c8991a3d.js","assets/fontUtils.a84c0faf.js","assets/colorUtils.9d159c9e.js"]);return i(e,t)}case"cim":{const{previewCIMSymbol:i}=await pe(()=>import("./previewCIMSymbol.473f2981.js"),["assets/previewCIMSymbol.473f2981.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/enums.9a5c29c3.js","assets/alignmentUtils.ba8835fe.js","assets/definitions.1d569ae6.js","assets/number.dcd3e86c.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/CIMSymbolRasterizer.e19db8d8.js","assets/CIMResourceManager.06b6abfa.js","assets/Rasterizer.f4189955.js","assets/_commonjsHelpers.4421ccc9.js","assets/rasterizingUtils.35b0a2ca.js","assets/imageutils.2b310abc.js"]);return i(e,t)}default:return}}function sZ(e){return e&&"opacity"in e?e.opacity*sZ(e.parent):1}async function vS(e,t){var z,q;if(!e)return;const i=e.sourceLayer,r=(z=U(t)&&t.useSourceLayer?i:e.layer)!=null?z:i,s=sZ(r);if(U(e.symbol)&&(!U(t)||t.ignoreGraphicSymbol!==!0)){const Z=e.symbol.type==="web-style"?await _be(e.symbol,{...t,cache:U(t)?t.webStyleCache:null}):e.symbol.clone();return UI(Z,null,s),Z}const o=(q=U(t)?t.renderer:null)!=null?q:r&&"renderer"in r?r.renderer:null;let c=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!c)return;if(c=c.type==="web-style"?await c.fetchSymbol({...t,cache:U(t)?t.webStyleCache:null}):c.clone(),!(o&&"visualVariables"in o&&o.visualVariables&&o.visualVariables.length))return UI(c,null,s),c;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&(ae(t)||ae(t.arcade))){const Z={...t};Z.arcade=await pl(),t=Z}const u=await pe(()=>Promise.resolve().then(function(){return r9}),void 0),g=[],b=[],S=[],E=[];for(const Z of o.visualVariables)switch(Z.type){case"color":g.push(Z);break;case"opacity":b.push(Z);break;case"rotation":E.push(Z);break;case"size":Z.target||S.push(Z)}const A=!!g.length&&g[g.length-1],O=A?u.getColor(A,e,t):null,L=!!b.length&&b[b.length-1];let N=L?u.getOpacity(L,e,t):null;if(s!=null&&(N=N!=null?N*s:s),UI(c,O,N),S.length){const Z=u.getAllSizes(S,e,t);await bbe(c,Z)}for(const Z of E)wbe(c,u.getRotationAngle(Z,e,t),Z.axis);return c}class fEe{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const s=t[r],o=new sG(s,void 0,void 0,2,2);this._properties[r]={pool:o,acquired:[]}}this._afterDispatchHandle=Roe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)vP(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const s of i.acquired)vP(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}}const mEe=Se("mac")?"Meta":"Ctrl",b9={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)b9[e]=String.fromCharCode(e);for(let e=1;e<25;e++)b9[111+e]=`F${e}`;for(let e=65;e<91;e++)b9[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function yEe(e){if(e.key!==void 0)return el(e);const t=b9[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function gEe(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class vEe{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}}const UN=Ie.getLogger("esri.views.input.InputHandler");class ns{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?UN.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const o=typeof t=="string"?new vEe(t,s):t,c=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},u=S=>{const E=this._incoming[S.match.eventType];if(E){const A=E.indexOf(S);E.splice(A,1),c(),this._manager&&this._manager.updateDependencies()}},g=new bEe(o,r,{onPause:u,onRemove:u,onResume:S=>{const E=this._incoming[S.match.eventType];E&&!E.includes(S)&&(E.push(S),c(),this._manager&&this._manager.updateDependencies())}});let b=this._incoming[o.eventType];return b||(b=[],this._incoming[o.eventType]=b),b.push(g),c(),this._manager&&this._manager.updateDependencies(),g}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new wEe(t,{onEmit:(r,s,o,c)=>{var u;(u=this._manager)==null||u.emit(r.eventType,s,o,c)},onRemove:r=>{var s;delete this._outgoing[r.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):UN.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const s of i)if(s.match.matches(t)&&((r=s.callback)==null||r.call(s,t),t.shouldStopPropagation()))break}}}class bEe{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class wEe{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}}class _Ee extends ns{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=t;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}}class bS{constructor(t){this._observable=new M6,this._value=t}get(){return gt(this._observable),this._value}set(t){t!==this._value&&(this._value=t,this._observable.notify())}}class xEe extends ns{get multiTouchActive(){return this._multiTouchActive.get()}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new bS(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}}let jl=class extends Re{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=mEe,this._latestPointerType="mouse",this._propertiesPool=new fEe({latestPointerLocation:EEe},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,t,i=Ai.INTERNAL){if(this._nameToGroup[e])return void Ie.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void Ie.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const r={name:e,handlers:t.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let s=r.handlers.length-1;s>=0;s--){const o=r.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(c,u,g,b,S)=>{this._emitInputEvent(o.priorityIndex+1,c,u,g,S,b)},setPointerCapture:(c,u)=>{this._setPointerCapture(r,o,c,u)},setEventCallback:c=>{o.eventCallback=c},setUninstallCallback:c=>{o.uninstallCallback=c},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{var r;i.removed=!0,(r=i.uninstallCallback)==null||r.call(i)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Ie.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const r=this._handlers[i];r.priorityIndex=i,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const r=this._handlersPriority[i];r.priorityIndex=i;let s=r.handler.hasSideEffects;if(!s){for(const o of r.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of r.handler.incomingEventMatches){e.add(o.eventType);for(const c of o.keyModifiers)gEe(c)||t.add(c)}r.active=s}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._latestPointerType=e;const r=this._get("latestPointerLocation");if(ae(r)||r.x!==t||r.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=t,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const s=t;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,r=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,r)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const r=()=>{if(!i){const c=new Set;this._activeKeyModifiers.forEach(u=>{c.add(u)}),this._activeKeyModifiers=c,i=!0}},s=(c,u)=>{u&&!this._activeKeyModifiers.has(c)?(r(),this._activeKeyModifiers.add(c)):!u&&this._activeKeyModifiers.has(c)&&(r(),this._activeKeyModifiers.delete(c))};if(e==="key-down"||e==="key-up"){const c=t.key;this._keyModifiers.has(c)&&s(c,e==="key-down")}const o=t.native;s("Alt",!(!o||!o.altKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new _Ee((e,t,i)=>this._setLatestPointer(e,t,i)),this._multiTouchHandler=new xEe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Ai.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Ai.INTERNAL)}_setPointerCapture(e,t,i,r){const s=e.name+"-"+t.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),r?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,r){this._emitInputEvent(0,e,t,i,r)}_emitInputEvent(e,t,i,r,s,o){const c=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),u=s!==void 0&&s,g={event:new SEe(t,i,c,o||this._activeKeyModifiers,u),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(g):this._doNewPropagation(g)}_doNewPropagation(e){this._currentPropagation={events:new Rx,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var t,i;const e=fs(this._currentPropagation);for(;e.events.length>0;){const{event:r,priorityIndex:s}=e.events.pop(),o=r.data&&r.data.eventId;if(!(o!=null&&this._stoppedPropagationEventIds.has(o)))for(e.currentHandler=this._handlersPriority[s];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&((i=(t=e.currentHandler).eventCallback)==null||i.call(t,r)),r.shouldStopPropagation()){o!=null&&this._stoppedPropagationEventIds.add(o);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const t=new Rx;t.push(e);const i=this._currentPropagation;if(i){for(;i.events.length;)t.push(i.events.pop());i.events=t,i.currentHandler=null}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const r of t.handler.incomingEventMatches){if(i.eventType!==r.eventType)continue;const s=i.keyModifiers.filter(o=>r.keyModifiers.includes(o));if(s.length===i.keyModifiers.length!=(s.length===r.keyModifiers.length))return i.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let r=0;for(;r<t.length&&this._compareHandlerPriority(i,t[r])>=0;)r++;t.splice(r,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};v([_({readOnly:!0})],jl.prototype,"hasPendingInputs",null),v([_({constructOnly:!0})],jl.prototype,"eventSource",void 0),v([_({constructOnly:!0})],jl.prototype,"recognizers",void 0),v([_()],jl.prototype,"_latestPointerType",void 0),v([_()],jl.prototype,"latestPointerType",null),v([_()],jl.prototype,"multiTouchActive",null),v([_({readOnly:!0})],jl.prototype,"latestPointerLocation",void 0),jl=v([K("esri.views.input.InputManager")],jl);class SEe{constructor(t,i,r,s,o){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=o,this._propagationState=id.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=id.STOPPED}shouldStopPropagation(){return(this._propagationState&id.STOPPED)!=0}async(t){this._propagationState|=id.PAUSED;const i=(r,s)=>{this._propagationState&=~id.PAUSED;const o=this._resumeCallback;if(this._resumeCallback=null,o&&o(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&id.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var id;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(id||(id={}));const Ai={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class IEe{}const EEe=IEe;function wS(e){return e&&typeof e.highlight=="function"}function Yze(e,t,i){return ae(e)||e>i&&(t===0||e<t)}const nZ=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return eu(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return v([_()],t.prototype,"goToOverride",void 0),v([_()],t.prototype,"view",void 0),t=v([K("esri.widgets.support.GoTo")],t),t},rb=Be.ofType({key:"type",defaultKeyValue:"button",base:fg,typeMap:{button:x0,toggle:v7}}),MEe=()=>[Vf.clone()],TEe=()=>[Km.clone(),Zm.clone()];let kt=class extends nZ(TK){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new Vr,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new rb,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new wr({symbol:new fl({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([ge(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),ge(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),ge(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),ge(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),ge(()=>this.location,e=>this._locationChange(e)),ge(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),ge(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),ge(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),ge(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>G9e({event:e,view:this.view})),ts(()=>!this.waitingForResult,()=>this._waitingForResultChange(),au),ge(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),ge(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),ts(()=>!this.visible,()=>this.browseClusterEnabled=!1),ge(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new rb;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:r,includeDefaultActions:s,selectedFeature:o}=this,c=s?i.concat(t):t,u=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(r)||o.popupTemplate),g=u&&u.actions,b=u&&u.overwriteActions?g:g?g.concat(c):c;return b&&b.filter(Boolean).forEach(S=>e.add(S)),e}get defaultActions(){const e=this._get("defaultActions")||new rb;return e.removeAll(),e.addMany(gf(this.selectedFeature)?TEe():MEe()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:r,selectedFeatureIndex:s}=this,o=r&&t.length;o&&i&&s===-1?this.selectedFeatureIndex=0:o&&s!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){var r,s,o;let t=e;const i=(s=(r=this.view)==null?void 0:r.spatialReference)==null?void 0:s.isWebMercator;e&&((o=e==null?void 0:e.spatialReference)==null?void 0:o.isWGS84)&&i&&(t=gc(e)),this._set("location",t)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=s=>{this._pendingPromises.has(t)&&this._updateFeatures(s),this._updatePendingPromises(t)},r=()=>this._updatePendingPromises(t);t.then(i,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=AK(this);return t&&e?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new de("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e)throw new de("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const s of r)delete t[s];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){J9e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?gf(t)?(await H9e(this),await W9e(this)):Ie.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):Ie.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Vf.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(gf(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:r,featureViewModels:s}=this;if(i===null)return;const o=((i-1)*r+t)%t,c=o+r;s.slice(o,c).forEach((u,g)=>{u&&!u.graphic&&(u.graphic=e[o+g])})}async _selectedFeatureChange(e){const{location:t,updateLocationEnabled:i,view:r}=this;if(e&&r){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),gf(e)?void 0:(e.symbol=await vS(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{var o;const s=(o=r.center)==null?void 0:o.clone();s&&(this.location=s)}):this.location=$K(e.geometry)}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:r}=t,s=Promise.resolve(i),o=r.map(c=>c.promise);this.promises=[s,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(gf(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const r=i.slice(0),s=[];t.forEach((o,c)=>{var g,b;if(!o)return;let u=null;if(r.some((S,E)=>(S&&S.graphic===o&&(u=S,r.splice(E,1)),!!u)),u)s[c]=u;else{const S=new Bk({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(g=this.view)==null?void 0:g.spatialReference,graphic:o===e?o:null,map:(b=this.view)==null?void 0:b.map,view:this.view});s[c]=S}}),r.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",s)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const r=this.view.on("click",s=>{s.pointerType==="mouse"&&s.button!==0||this._fetchFeaturesAndOpen(s)},Ai.WIDGET);t.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:r}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:r,event:t});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:r}=this;this._fetchFeaturesWithController(t,e).then(s=>{var b;const{clientOnlyGraphics:o,promisesPerLayerView:c,location:u}=s,g=[Promise.resolve(o),...c.map(S=>S.promise)];return(b=r==null?void 0:r.popup)==null||b.open({location:u||i,promises:g}),s})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return i&&"layer"in i&&i.layer?i.layer:(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t?t.objectIdField||Y9e:null,r=e.attributes;return r&&i&&r[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:r,visible:s}=this;if(!(r&&i&&t&&s))return;const o=this._getHighlightLayer(r);if(!(o&&o instanceof Tb))return;const c=this._getLayerView(i,o);this._highlightActiveFeaturePromise=c;const u=await c;if(!(u&&wS(u)&&this._highlightActiveFeaturePromise===c&&this.activeFeature&&this.highlightEnabled))return;const g=u.highlight(this._getHighlightTarget(r,o));this._handles.add(g,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:r,visible:s}=this;if(!(t&&r&&i&&s))return;const o=this._getHighlightLayer(t);if(!(o&&o instanceof Tb))return;const c=this._getLayerView(r,o);this._highlightSelectedFeaturePromise=c;const u=await c;if(!(u&&wS(u)&&this._highlightSelectedFeaturePromise===c&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const g=u.highlight(this._getHighlightTarget(t,o));this._handles.add(g,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(r=>!t.includes(r));this.features=t.concat(i)}};v([_()],kt.prototype,"featurePage",void 0),v([_()],kt.prototype,"isLoadingFeature",null),v([_({type:rb})],kt.prototype,"actions",void 0),v([_({readOnly:!0})],kt.prototype,"active",null),v([_()],kt.prototype,"activeFeature",void 0),v([_({readOnly:!0})],kt.prototype,"allActions",null),v([_({type:Boolean})],kt.prototype,"defaultPopupTemplateEnabled",void 0),v([_()],kt.prototype,"autoCloseEnabled",void 0),v([_()],kt.prototype,"autoOpenEnabled",void 0),v([_()],kt.prototype,"browseClusterEnabled",void 0),v([_()],kt.prototype,"content",void 0),v([_({type:rb,readOnly:!0})],kt.prototype,"defaultActions",null),v([_({readOnly:!0})],kt.prototype,"featureCount",null),v([_()],kt.prototype,"features",null),v([_()],kt.prototype,"featuresPerPage",void 0),v([_()],kt.prototype,"featureViewModelAbilities",void 0),v([_({readOnly:!0})],kt.prototype,"featureViewModels",void 0),v([_()],kt.prototype,"highlightEnabled",void 0),v([_()],kt.prototype,"includeDefaultActions",void 0),v([_({type:pt})],kt.prototype,"location",null),v([_({readOnly:!0})],kt.prototype,"pendingPromisesCount",null),v([_({readOnly:!0})],kt.prototype,"selectedClusterBoundaryFeature",void 0),v([_({readOnly:!0})],kt.prototype,"waitingForResult",null),v([_({readOnly:!0})],kt.prototype,"promiseCount",null),v([_()],kt.prototype,"promises",null),v([_({value:null,readOnly:!0})],kt.prototype,"selectedFeature",null),v([_({value:-1})],kt.prototype,"selectedFeatureIndex",null),v([_({readOnly:!0})],kt.prototype,"selectedFeatureViewModel",null),v([_({readOnly:!0})],kt.prototype,"state",null),v([_()],kt.prototype,"title",void 0),v([_()],kt.prototype,"updateLocationEnabled",void 0),v([_()],kt.prototype,"view",void 0),v([_()],kt.prototype,"visible",void 0),v([_()],kt.prototype,"zoomFactor",void 0),v([_()],kt.prototype,"zoomToLocation",void 0),v([_()],kt.prototype,"centerAtLocation",null),kt=v([K("esri.widgets.Popup.PopupViewModel")],kt);const oZ=kt,qN="selected-index",CEe=0,BN="popup-spinner",HN={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},WN="esri-popup";function Iu(e,t){return t===void 0?`${WN}__${e}`:`${WN}__${e}-${t}`}const JN={closeButton:!0,featureNavigation:!0};let tt=class extends EK(ki){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Vr,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([i])=>{(i==null?void 0:i.isIntersecting)&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=gy(()=>this._displaySpinner(),CEe),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new Be,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new oZ,this.visibleElements={...JN},this._handleOpenRelatedFeature=i=>{this._openRelatedFeature(i)},this._addSelectedFeatureIndexHandle(),this.addHandles([ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),ge(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,r)=>{!!i!=!!r&&this.reposition()}),ge(()=>{var i,r,s,o,c,u;return[(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.padding,(o=(s=this.viewModel)==null?void 0:s.view)==null?void 0:o.size,(c=this.viewModel)==null?void 0:c.active,(u=this.viewModel)==null?void 0:u.location,this.alignment]},()=>this.reposition()),ge(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),ge(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.size},(i,r)=>this._updateDockEnabledForViewSize(i,r)),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,r)=>this._viewChange(i,r)),ge(()=>{var i,r;return(r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.ready},(i,r)=>this._viewReadyChange(i!=null?i:!1,r!=null?r:!1)),ge(()=>{var i,r;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),ge(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),ge(()=>{var i,r,s,o;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.title,(o=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:o.state]},()=>this._setTitleFromFeatureWidget()),ge(()=>{var i,r,s,o;return[(r=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:r.content,(o=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:o.state]},()=>this._setContentFromFeatureWidget()),ts(()=>!this.collapsed,()=>{var i,r;((r=(i=this.viewModel)==null?void 0:i.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),$i(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),rt),ge(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop()),$i(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),ge(()=>{var i,r,s,o;return[(r=(i=this._activeFlowItemWidget)==null?void 0:i.viewModel)==null?void 0:r.state,(o=(s=this._activeFlowItemWidget)==null?void 0:s.viewModel)==null?void 0:o.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([pe(()=>import("./calcite-flow.0283cc12.js"),["assets/calcite-flow.0283cc12.js","assets/observers.6e054a3b.js"]),pe(()=>import("./calcite-flow-item.27e1b766.js"),["assets/calcite-flow-item.27e1b766.js","assets/interactive.5c805e74.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/panel.6ae1f692.js","assets/action-menu.2be79bdb.js","assets/guid.994bd1dc.js","assets/action.1ad673c5.js","assets/icon.48bdede2.js","assets/loader.9c78e3db.js","assets/popover.12329f5f.js","assets/openCloseComponent.1beecb6a.js","assets/debounce.43d64738.js","assets/Heading.91bac1c4.js","assets/scrim.02266be6.js","assets/tooltip.c949aa56.js"]),pe(()=>import("./calcite-action.642b40f3.js"),["assets/calcite-action.642b40f3.js","assets/action.1ad673c5.js","assets/guid.994bd1dc.js","assets/interactive.5c805e74.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/icon.48bdede2.js","assets/loader.9c78e3db.js"]),pe(()=>import("./calcite-tooltip.ebc0d16d.js"),["assets/calcite-tooltip.ebc0d16d.js","assets/tooltip.c949aa56.js","assets/openCloseComponent.1beecb6a.js","assets/debounce.43d64738.js","assets/guid.994bd1dc.js"]),pe(()=>import("./calcite-icon.5b76e0a1.js"),["assets/calcite-icon.5b76e0a1.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"])])}destroy(){var e,t;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:t}=this;if(!e)return!!(t!=null&&t.content);const i=e.viewModel;if((i==null?void 0:i.waitingForContent)||(i==null?void 0:i.state)==="error")return!0;const r=i==null?void 0:i.content;return Array.isArray(r)?!!r.length:!!r}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation!=null}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||HN}set dockOptions(e){var u,g;const t={...HN},i=(g=(u=this.viewModel)==null?void 0:u.view)==null?void 0:g.breakpoints,r={};i&&(r.width=i.xsmall,r.height=i.xsmall);const s={...t,...e},o={...t.breakpoint,...r},{breakpoint:c}=s;typeof c=="object"?s.breakpoint={...o,...c}:c&&(s.breakpoint=o),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i,_flowItems:r}=this,{selectedFeatureViewModel:s}=this.viewModel,o={...t,title:!1};return s?(e?(e.viewModel=s,e.visibleElements=o):this._feature=new j9e({flowItems:r,headingLevel:i+1,viewModel:s,visibleElements:o}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...JN,...e}}blur(){const{active:e}=this.viewModel;e||Ie.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||Ie.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var s,o;this._handles.remove(qN);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((o=(s=this.viewModel)==null?void 0:s.view)==null?void 0:o.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var L,N,z,q;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:r,currentAlignment:s,currentDockPosition:o}=this,{active:c}=this.viewModel,{menuActions:u}=r,g=c&&u.length>1&&e,b=c&&t,S=c&&!t,E=(N=(L=this.selectedFeature)==null?void 0:L.layer)==null?void 0:N.title,A=(q=(z=this.selectedFeature)==null?void 0:z.layer)==null?void 0:q.id,O={[ke.alignTopCenter]:s==="top-center",[ke.alignBottomCenter]:s==="bottom-center",[ke.alignTopLeft]:s==="top-left",[ke.alignBottomLeft]:s==="bottom-left",[ke.alignTopRight]:s==="top-right",[ke.alignBottomRight]:s==="bottom-right",[ke.isDocked]:b,[ke.shadow]:S,[ke.isDockedTopLeft]:o==="top-left",[ke.isDockedTopCenter]:o==="top-center",[ke.isDockedTopRight]:o==="top-right",[ke.isDockedBottomLeft]:o==="bottom-left",[ke.isDockedBottomCenter]:o==="bottom-center",[ke.isDockedBottomRight]:o==="bottom-right",[ke.isFeatureMenuOpen]:i,[ke.isActionsMenuOpen]:g};return J("div",{class:this.classes(ke.base,O),role:"presentation","data-layer-title":E,"data-layer-id":A,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},c?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return J("span",{"aria-hidden":"true",class:this.classes(ke.icon,ke.iconLoading,ke.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?J("div",{key:Iu("loading-container"),role:"presentation",class:ke.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=Zn(this.container),t={[ke.iconRightTriangleArrow]:e,[ke.paginationPreviousIconRTL]:e,[ke.iconLeftTriangleArrow]:!e,[ke.paginationPreviousIconLTR]:!e};return J("span",{"aria-hidden":"true",class:this.classes(ke.icon,t)})}renderPreviousButton(){const{messages:e}=this;return J("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(ke.button,ke.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=Zn(this.container),t={[ke.iconLeftTriangleArrow]:e,[ke.paginationNextIconRTL]:e,[ke.iconRightTriangleArrow]:!e,[ke.paginationNextIconLTR]:!e};return J("span",{"aria-hidden":"true",class:this.classes(ke.icon,t)})}renderNextButton(){const{messages:e}=this;return J("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(ke.button,ke.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:r,selectedFeatureIndex:s}=this.viewModel;return J("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(ke.button,ke.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(r,s))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[ke.iconUndock]:e,[ke.iconDock]:!e,[ke.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[ke.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[ke.iconDockToTop]:!e&&t==="top-center",[ke.iconDockToBottom]:!e&&t==="bottom-center"};return J("span",{"aria-hidden":"true",class:this.classes(i,ke.icon)})}renderDockButton(){var s,o,c;const{dockEnabled:e,messages:t}=this,i=(o=(s=this.viewModel)==null?void 0:s.view)==null?void 0:o.widthBreakpoint,r=e?t.undock:t.dock;return i!=="xsmall"&&((c=this.dockOptions)==null?void 0:c.buttonEnabled)?J("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(ke.button,ke.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:r,messagesCommon:s}=this,o={[ke.headerContainerButton]:i},c=J(sl,{level:this.headingLevel,class:ke.headerTitle,innerHTML:e!=null?e:""}),u=i?J("button",{key:`${e}--collapsible`,id:t,title:r?s.expand:s.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ke.headerContainer,o),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},c,J("calcite-icon",{class:ke.collapseIcon,key:"collapse-icon",icon:r?"chevron-down":"chevron-up",scale:"m"})):J("div",{key:e!=null?e:"title",id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ke.headerContainer,o)},c);return e?u:null}renderCloseIcon(){return J("span",{"aria-hidden":"true",class:this.classes(ke.icon,ke.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?J("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:ke.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return J("header",{class:ke.header},this.renderTitle(),J("div",{class:ke.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i,_flowItems:r}=this,{content:s}=this.viewModel,o=r.toArray(),c={[ke.contentHasFlows]:!!o.length};return t&&!i?J("div",{key:s!=null?s:"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(ke.content,c)},J("calcite-flow",{bind:this},J("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:gd,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),o.map(u=>this.renderFlowItem(u))),o.map(u=>this.renderFlowItemTooltips(u))):null}renderFlowItem(e){var s;const{messages:t}=this,i=rS(),r="graphic"in e&&!e.isTable;return J("calcite-flow-item",{bind:this,class:this.classes({[ke.calciteThemeDark]:!i,[ke.calciteThemeLight]:i}),heading:(s=e.title)!=null?s:"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${e.viewModel.uid}`},J("calcite-action",{class:ke.actionExit,icon:"move-up",label:t==null?void 0:t.exitRelatedRecords,text:t==null?void 0:t.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:o=>this._storeExitRelatedRecordsAction(e,o),onclick:this._destroyFlowItemWidgets}),r?J("calcite-action",{class:ke.actionSelectFeature,icon:"zoom-to-object",label:t==null?void 0:t.selectFeature,text:t==null?void 0:t.selectFeature,slot:"header-actions-end",bind:this,afterCreate:o=>this._storeFeatureSelectionAction(e,o),onclick:()=>this._handleOpenRelatedFeature(e)}):null,J("div",{class:this.classes(ke.contentFlowItem,{[ke.calciteThemeDark]:i,[ke.calciteThemeLight]:!i})},e.render()))}renderFlowItemTooltips(e){const{messages:t,_exitRelatedRecordsActions:i,_featureSelectionActions:r}=this,s=rS(),o=r.get(e);return[J("calcite-tooltip",{class:this.classes({[ke.calciteThemeDark]:!s,[ke.calciteThemeLight]:s}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:i.get(e),placement:"top"},t==null?void 0:t.exitRelatedRecords),o?J("calcite-tooltip",{class:this.classes({[ke.calciteThemeDark]:!s,[ke.calciteThemeLight]:s}),key:`select-related-record-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.selectFeature,overlayPositioning:"fixed",referenceElement:o,placement:"top"},t==null?void 0:t.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r,messagesCommon:s}=this,o=i?s.close:s.open,{menuActions:c}=r;return c.length?J("div",{key:Iu("actions-menu-button"),class:this.classes(ke.button,ke.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},J("span",{"aria-hidden":"true",class:ke.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:r}=this,{menuActions:s}=r;return s.length&&i?J("ul",{id:e,role:"menu","aria-labelledby":t,key:Iu("actions"),class:ke.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},s.toArray().map(o=>this.renderAction({action:o,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return e.length?e.toArray().map(t=>this.renderAction({action:t,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,r=!!t.length;return i||r?J("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":r.toString(),class:ke.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?J("section",{key:Iu("navigation"),class:this.classes(ke.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:r}=t,s=!!i.length,o=!!r.length,c={[ke.footerHasPagination]:e,[ke.footerHasActions]:s,[ke.footerHasActionsMenu]:o};return e||s?J("div",{key:Iu("feature-buttons"),class:this.classes(ke.footer,c)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,r=es(e.selectedFeatures,{total:t.length});return J("section",{key:Iu("menu"),class:ke.featureMenu},J("strong",{class:ke.featureMenuHeader},r),J("nav",{bind:this,class:ke.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:gd},this.renderFeatureMenu(),J("div",{class:ke.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?J("div",{class:ke.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:J("div",{key:Iu("pointer"),class:ke.pointer,role:"presentation"},J("div",{class:this.classes(ke.pointerDirection,ke.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:r,contentId:s,collapsible:o,hasContent:c,contentCollapsed:u,visibleElements:g}=this,{title:b}=this.viewModel,S=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",E=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",A={[ke.shadow]:e,[ke.isCollapsible]:o,[ke.isCollapsed]:u};return J("div",{class:this.classes(ke.main,ke.widget,A),tabIndex:g.closeButton?void 0:-1,role:"dialog","aria-labelledby":b?r:"","aria-describedby":c&&!u?s:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},S?this.renderFooter():null,S?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),E?this.renderFooter():null,E?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?J("div",{class:rr.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return J("span",{key:"text",class:ke.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),r={[ke.iconLoading]:e.active,[ke.rotating]:e.active,[ke.icon]:!!t,[ke.actionImage]:!e.active&&!!i};return t&&(r[t]=!e.active),J("span",{key:"icon","aria-hidden":"true",class:this.classes(ke.icon,r),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,r=this._getActionTitle(t),s={[ke.action]:t.type!=="toggle",[ke.actionToggle]:t.type==="toggle",[ke.actionToggleOn]:t.type==="toggle"&&t.value,[ke.buttonDisabled]:t.disabled},o=[this.renderActionIcon(t),this.renderActionText(r)],c=i==="menu-item"?J("li",{key:t.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(ke.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):J("div",{key:t.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(ke.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return t.visible?c:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:r}=this,{selectedFeatureIndex:s,selectedFeatureViewModel:o}=this.viewModel,c=e===o,u={[ke.featureMenuSelected]:c},g=c?J("span",{key:Iu(`feature-menu-selected-feature-${s}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:ke.iconCheckMark}):null,b=J("span",{innerHTML:e.title||r.untitled});return J("li",{role:"menuitem",tabIndex:-1,key:Iu(`feature-menu-feature-${s}`),class:this.classes(u,ke.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},J("span",{class:ke.featureMenuTitle},b,g))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?J("ol",{class:ke.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,r)=>this.renderFeatureMenuItem(i,r))):null}_storeFeatureSelectionAction(e,t){this._featureSelectionActions.set(e,t),this.scheduleRender()}_storeExitRelatedRecordsAction(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()}_getFlowItemDescription(e){var t;return"featureCountDescription"in e?e.featureCountDescription:(t=e.viewModel.description)!=null?t:""}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const t=e.graphic,i=t==null?void 0:t.geometry;if(ae(i)||ae(t))return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:i});const r=$K(i);this.open({features:[t],location:U(r)?r:void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}_getActionTitle(e){var g;const{messages:t,selectedFeature:i,messagesCommon:r}=this,{id:s}=e,o=i==null?void 0:i.attributes,c=(g=e.title)!=null?g:"",u=s==="zoom-to-feature"?es(c,{messages:t}):s==="remove-selected-feature"?es(c,{messages:r}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?es(c,{messages:t}):e.title;return u&&o?es(u,o):u!=null?u:""}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:r,image:s}=e,o=s||r?r:ke.iconDefaultAction;return o&&i?es(o,i):o!=null?o:""}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:r}=e;return r&&i?es(r,i):r!=null?r:""}_createFeatureUpdatedAnimation(){return nye("enter",ke.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(ge(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(o=>o.visible),i=this._getInlineActionCount(),r=i===null,s=i===0;return{inlineActions:r?t.slice(0):s?new Be:t.slice(0,i),menuActions:r?new Be:s?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,r;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){el(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){el(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=el(e),{_featureMenuNode:i}=this,r=e.currentTarget["data-feature-index"];if(!i)return;const s=i.querySelectorAll("li"),o=s.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(r+1+o)%o].focus()):(e.stopPropagation(),s[(r-1+o)%o].focus())}_handleActionMenuItemKeyup(e){const t=el(e),{_actionsMenuNode:i}=this,r=e.currentTarget.dataset.actionUid,{menuActions:s}=this.dividedActions,o=s.findIndex(g=>g.uid===r);if(!i)return;const c=i.querySelectorAll("li"),u=c.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),c[c.length-1].focus()):(e.stopPropagation(),c[0].focus()):(e.stopPropagation(),c[(o+1+u)%u].focus()):(e.stopPropagation(),c[(o-1+u)%u].focus())}_handleMainKeyup(e){const t=el(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i&&t?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e!=null&&e.shouldFocus&&(await In(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=ge(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,qN)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:r,side:s,view:o}=e;if(isNaN(i)||isNaN(t)||!o||!r)return!1;const c=o.padding;return s==="right"&&r.x+i/2>o.width-c.right||s==="left"&&r.x-i/2<c.left||s==="top"&&r.y-t<c.top||s==="bottom"&&r.y+t>o.height-c.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:r,viewModel:s}=this,{screenLocation:o,view:c}=s;if(ae(o)||!c||!i)return"top-center";if(!this._isScreenLocationWithinView(o,c))return this._get("currentAlignment")||"top-center";function u(ee){return parseInt(ee.replace(/[^-\d\.]/g,""),10)}const g=r?window.getComputedStyle(r,null):null,b=g?u(g.getPropertyValue("max-height")):0,S=g?u(g.getPropertyValue("height")):0,{height:E,width:A}=i.getBoundingClientRect(),O=A+t,L=Math.max(E,b,S)+t,N=this._isOutsideView({popupHeight:L,popupWidth:O,screenLocation:o,side:"right",view:c}),z=this._isOutsideView({popupHeight:L,popupWidth:O,screenLocation:o,side:"left",view:c}),q=this._isOutsideView({popupHeight:L,popupWidth:O,screenLocation:o,side:"top",view:c}),Z=this._isOutsideView({popupHeight:L,popupWidth:O,screenLocation:o,side:"bottom",view:c});return z?q?"bottom-right":"top-right":N?q?"bottom-left":"top-left":q?Z?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return Zn(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var c;if(e!=="auto")return e;const t=(c=this.viewModel)==null?void 0:c.view,i=Zn(this.container)?"top-left":"top-right";if(!t)return i;const r=t.padding||{left:0,right:0,top:0,bottom:0},s=t.width-r.left-r.right,{breakpoints:o}=t;return o&&s<=o.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:t}=this.viewModel,{width:i}=this._containerNode.getBoundingClientRect(),r=this._calculatePositionStyle(t,i);r&&Object.assign(this._containerNode.style,r)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,r){const{currentAlignment:s,_pointerOffsetInPx:o}=this;if(!i)return;const{padding:c}=i,u=r/2,g=i.height-t,b=i.width-e;return s==="bottom-center"?{top:t+o-c.top,left:e-u-c.left}:s==="top-left"?{bottom:g+o-c.bottom,right:b+o-c.right}:s==="bottom-left"?{top:t+o-c.top,right:b+o-c.right}:s==="top-right"?{bottom:g+o-c.bottom,left:e+o-c.left}:s==="bottom-right"?{top:t+o-c.top,left:e+o-c.left}:s==="top-center"?{bottom:g+o-c.bottom,left:e-u-c.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:r}=this;if(!r)return;if(i)return{left:"",top:"",right:"",bottom:""};if(ae(e)||!t)return;const s=this._calculateFullWidth(t),o=this._calculateAlignmentPosition(e.x,e.y,r,s);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[r,s]=e,[o,c]=t,{width:u=0,height:g=0}=i!=null?i:{};return r<=u&&o>u||r>u&&o<=u||s<=g&&c>g||s>g&&c<=g}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=i.left+i.right,s=i.top+i.bottom,o=[],c=[];o[0]=e[0]-r,o[1]=e[1]-s,c[0]=t[0]-r,c[1]=t[1]-s;const{dockOptions:u}=this,g=u.breakpoint;this._dockingThresholdCrossed(o,c,g)&&this._setDockEnabledForViewSize(u),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var u,g,b,S;const t=e.breakpoint,i=(g=(u=this.viewModel)==null?void 0:u.view)==null?void 0:g.ui;if(!i)return!1;const{width:r,height:s}=i;if(isNaN(r)||isNaN(s)||!t)return!1;const o=t.hasOwnProperty("width")&&r<=((b=t.width)!=null?b:0),c=t.hasOwnProperty("height")&&s<=((S=t.height)!=null?S:0);return o||c}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?es(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(e,BN),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new CK({view:e}),e.ui.add(this._spinner,{key:BN,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,r=i.findIndex(o=>o.uid===t),s=i.getItemAt(r);s&&s.type==="toggle"&&(s.value=!s.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};v([_({readOnly:!0})],tt.prototype,"actionsMenuId",null),v([_({readOnly:!0})],tt.prototype,"actionsMenuButtonId",null),v([_({readOnly:!0})],tt.prototype,"featureMenuId",null),v([_({readOnly:!0})],tt.prototype,"titleId",null),v([_({readOnly:!0})],tt.prototype,"contentId",null),v([_({readOnly:!0})],tt.prototype,"hasContent",null),v([_({readOnly:!0})],tt.prototype,"featureNavigationVisible",null),v([_({readOnly:!0})],tt.prototype,"collapsible",null),v([_({readOnly:!0})],tt.prototype,"featureMenuVisible",null),v([_({readOnly:!0})],tt.prototype,"contentCollapsed",null),v([_({readOnly:!0})],tt.prototype,"dividedActions",null),v([_({readOnly:!0,dependsOn:["_flowItems.length"]})],tt.prototype,"_activeFlowItemWidget",null),v([_()],tt.prototype,"actions",null),v([_()],tt.prototype,"actionsMenuOpen",null),v([_()],tt.prototype,"alignment",void 0),v([_()],tt.prototype,"autoCloseEnabled",null),v([_()],tt.prototype,"autoOpenEnabled",null),v([_()],tt.prototype,"defaultPopupTemplateEnabled",null),v([_()],tt.prototype,"content",null),v([_()],tt.prototype,"collapsed",void 0),v([_()],tt.prototype,"collapseEnabled",void 0),v([_({readOnly:!0})],tt.prototype,"currentAlignment",null),v([_({readOnly:!0})],tt.prototype,"currentDockPosition",null),v([_()],tt.prototype,"dockOptions",null),v([_()],tt.prototype,"dockEnabled",void 0),v([_({readOnly:!0})],tt.prototype,"featureCount",null),v([_()],tt.prototype,"featureMenuOpen",void 0),v([_()],tt.prototype,"features",null),v([_()],tt.prototype,"goToOverride",null),v([_()],tt.prototype,"headingLevel",void 0),v([_()],tt.prototype,"highlightEnabled",null),v([_()],tt.prototype,"location",null),v([_()],tt.prototype,"label",null),v([_()],tt.prototype,"maxInlineActions",void 0),v([_(),ui("esri/widgets/Popup/t9n/Popup")],tt.prototype,"messages",void 0),v([_(),ui("esri/t9n/common")],tt.prototype,"messagesCommon",void 0),v([_()],tt.prototype,"promises",null),v([_({readOnly:!0})],tt.prototype,"selectedFeature",null),v([_()],tt.prototype,"selectedFeatureIndex",null),v([_({readOnly:!0})],tt.prototype,"selectedFeatureWidget",null),v([_()],tt.prototype,"spinnerEnabled",void 0),v([_()],tt.prototype,"title",null),v([_()],tt.prototype,"updateLocationEnabled",null),v([_()],tt.prototype,"view",null),v([_({type:oZ}),G5(["triggerAction","trigger-action"])],tt.prototype,"viewModel",void 0),v([_()],tt.prototype,"visible",null),v([_()],tt.prototype,"visibleElements",void 0),v([_t("visibleElements")],tt.prototype,"castVisibleElements",null),v([vr()],tt.prototype,"_close",null),v([vr()],tt.prototype,"_toggleDockEnabled",null),v([vr()],tt.prototype,"_toggleFeatureMenu",null),v([vr()],tt.prototype,"_toggleActionsMenu",null),v([vr()],tt.prototype,"_triggerAction",null),v([vr()],tt.prototype,"_selectFeature",null),v([vr()],tt.prototype,"_next",null),v([vr()],tt.prototype,"_previous",null),tt=v([K("esri.widgets.Popup")],tt);const YN=tt,$E=[0,0];function AEe(e){var r,s;const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return $E[0]=i.left+((r=t==null?void 0:t.pageXOffset)!=null?r:0),$E[1]=i.top+((s=t==null?void 0:t.pageYOffset)!=null?s:0),$E}function KN(e){e&&(qB(e),e.parentNode&&e.parentNode.removeChild(e))}function $Ee(e){const t=document.createElement("div");return e.appendChild(t),t}const l1=16,l2=750,kEe=512,OEe=2,PEe=e=>{let t=class extends e{constructor(...i){var r;super(...i),this._freqInfo={freq:l1,time:l2},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,i.length!==0&&((r=i[0])==null?void 0:r.popup)!==void 0||(this.popup=new YN({view:this})),this.handles.add([ge(()=>this.cursor,s=>{const{surface:o}=this;o&&o.setAttribute("data-cursor",s)}),ge(()=>this.interacting,s=>{const{surface:o}=this;o&&o.setAttribute("data-interacting",s.toString())})])}initialize(){this.handles.add(ge(()=>this.ui,(i,r)=>this._handleUIChange(i,r))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=ti(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){var i;return(i=this._get("container"))!=null?i:null}set container(i){const r=this._get("container"),s=F5(i);if(s||typeof i!="string"||Ie.getLogger(this.declaredClass).error("#container",`element with id '${i}' not found`),r===s)return;const o="dom-size";if(this.handles.remove(o),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(KN(this.root),this._set("root",null)),this.userContent&&(FF(this.userContent,r),KN(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const c=document.createElement("div");c.className="esri-view-user-storage",FF(s,c),s.appendChild(c),this._set("userContent",c);const u=document.createElement("div");u.className="esri-view-root",s.insertBefore(u,s.firstChild),this._set("root",u);const g=document.createElement("div");g.className="esri-view-surface",g.setAttribute("role","application"),g.tabIndex=0,u.appendChild(g),this._set("surface",g);const b=new qF;u.appendChild(b.surface),this._set("overlay",b),ge(()=>b.needsRender,S=>{S&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Ay({render:()=>{var E;return(E=this.overlay)==null?void 0:E.render()}}):this._overlayRenderTaskHandle=Ti(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(ge(()=>this.size,S=>{const[E,A]=S,O="esri-view-surface--inset-outline";E>=document.body.clientWidth||A>=document.body.clientHeight?g.classList.add(O):g.classList.remove(O)},rt),o),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}set popup(i){const r=this._get("popup");r&&r!==i&&r.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,r,s){const o=this.position;return i-=o?o[0]:0,r-=o?o[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const o=this.position;return i+=o?o[0]:0,r+=o?o[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){r&&(this.handles.remove("ui"),r.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([ge(()=>this.root,r=>{i.container=r?$Ee(r):null},rt),ge(()=>this.popup,(r,s)=>{const o="popup",c="manual";s&&i.remove(s,o),r&&(r.view=i.view,i.add(r,{key:o,position:c}))},rt)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=l1,i.time=l2,this.handles.add([(()=>{const r=()=>{i.freq=l1,i.time=l2};return window.addEventListener("resize",r),{remove(){window.removeEventListener("resize",r)}}})(),Ay({prepare:r=>{const s=this._measure(),o=this._freqInfo;if(o.time+=r.deltaTime,s&&(o.freq=l1,this._get("resizing")||this._set("resizing",!0)),o.time<o.freq)return;o.time=0;const c=this._position();o.freq=c||s?l1:Math.min(l2,o.freq*OEe),!s&&o.freq>=kEe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,c=this.height;return r===o&&s===c?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:c,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&AEe(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return v([_()],t.prototype,"container",null),v([_({readOnly:!0})],t.prototype,"focused",null),v([_({readOnly:!0})],t.prototype,"height",void 0),v([_({type:YN})],t.prototype,"popup",null),v([_({type:qF})],t.prototype,"overlay",void 0),v([_({readOnly:!0})],t.prototype,"position",void 0),v([_({readOnly:!0})],t.prototype,"resizing",void 0),v([_({readOnly:!0})],t.prototype,"root",void 0),v([_({value:null,readOnly:!0})],t.prototype,"size",null),v([_({readOnly:!0})],t.prototype,"surface",void 0),v([_({readOnly:!0})],t.prototype,"suspended",void 0),v([_()],t.prototype,"ui",void 0),v([_({readOnly:!0})],t.prototype,"userContent",void 0),v([_({readOnly:!0})],t.prototype,"width",void 0),v([_()],t.prototype,"widthBreakpoint",void 0),t=v([K("esri.views.DOMContainer")],t),t},FEe=e=>{let t=class extends e{async fetchPopupFeatures(i,r){await this.when();const{location:s,queryArea:o,layerViewsAndGraphics:c,clientOnlyGraphics:u}=await this._prepareFetchPopupFeatures(i,r),g=Promise.resolve(u),b=this._queryLayerPopupFeatures(o,c,r),S=b.map(E=>E.promise);return{location:s,clientOnlyGraphics:u,allGraphicsPromise:oG([g,...S]).then(E=>Array.from(new Set(E.flat()))),promisesPerLayerView:b}}_queryLayerPopupFeatures(i,r,s){return r.map(({layerView:o,graphics:c})=>{const u={clientGraphics:c,event:U(s)?s.event:void 0,signal:U(s)?s.signal:void 0,defaultPopupTemplateEnabled:!!U(s)&&!!s.defaultPopupTemplateEnabled},g=o.fetchPopupFeatures(i,u);return{layerView:o,promise:g}})}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(U(r)&&r.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,r){const{clientGraphics:s,queryArea:o,location:c}=await this._popupHitTestGraphics(i,r),u=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:g,clientOnlyGraphics:b}=this._graphicsPerFetchPopupLayerView(s,u);return{clientOnlyGraphics:b,layerViewsAndGraphics:g,queryArea:o,location:c}}async _popupHitTestGraphics(i,r){const s=await this.popupHitTest(i),o=s.results,c=s.mapPoint,u=o.filter(b=>b.type==="graphic"&&this._isValidPopupGraphic(b.graphic,r)),g=u.length?u[0].mapPoint:null;return{clientGraphics:u.map(b=>b.graphic),queryArea:c,location:c||g}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&i.push(r)}),U(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return U(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,r){const s=[],o=new Map,c=r.map(u=>{const g=[];return"layer"in u?o.set(u.layer,g):o.set(u.graphics,g),{layerView:u,graphics:g}});for(const u of i){const g=o.get(u.layer)||o.get(u.sourceLayer)||null;g?g.push(u):s.push(u)}return{layerViewsAndGraphics:c,clientOnlyGraphics:s}}};return t=v([K("esri.views.PopupView")],t),t};let sb=class extends ar(Be){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{ae(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Be.ofType(this.itemType.Type))(e):new Be(e)}};function WA(e,t){return{type:e,cast:PG,set(i){const r=s0(i,this._get(t),e);r.owner=this,this._set(t,r)}}}v([_()],sb.prototype,"owner",null),sb=v([K("esri.core.support.OwningCollection")],sb);let _S=class extends sb{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{ae(t.item)||t.item.parent===this.owner&&(Ie.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};_S=v([K("esri.support.AnalysesCollection")],_S);let Xf=class extends sb{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};v([E6({Type:wr,ensureType:Er(wr)})],Xf.prototype,"itemType",void 0),Xf=v([K("esri.support.GraphicsCollection")],Xf);let Ah=class extends Re{constructor(e){super(e),this.view=null,this.baseLayerViews=new Be,this.referenceLayerViews=new Be,this._loadingHandle=ge(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},rt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};v([_({constructOnly:!0})],Ah.prototype,"view",void 0),v([_({readOnly:!0})],Ah.prototype,"baseLayerViews",void 0),v([_({readOnly:!0})],Ah.prototype,"referenceLayerViews",void 0),v([_({readOnly:!0})],Ah.prototype,"suspended",null),v([_({type:Boolean,readOnly:!0})],Ah.prototype,"updating",null),Ah=v([K("esri.views.BasemapView")],Ah);function LEe(e){return"tryRecycleWith"in e}class REe{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=tu(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,To(this._controller.signal,()=>{const s=new de("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}tryRecycle(t){if(!this.done||!this.layerView||!LEe(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let s=0;s<t.length;s++){const o=t[s];if(o.type!==i)continue;const c=this.layerView.tryRecycleWith(o,{signal:r});if(c){t.splice(s,1),this.layer=o;const u=this.layerView,g=u.view;return this.promise=Promise.race([c.then(()=>(or(this._controller.signal),o.emit("layerview-destroy",{view:g,layerView:u}),g.emit("layerview-destroy",{view:g,layerView:u}),o.emit("layerview-create",{view:g,layerView:u}),g.emit("layerview-create",{view:g,layerView:u}),u)),new Promise((b,S)=>To(this._controller.signal,()=>S(Ri())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var s,o,c;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let u,g;if(await i.load({signal:t}),"prefetchResources"in i&&await((s=i.prefetchResources)==null?void 0:s.call(i,{signal:t})),DEe(i))u=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new de("layer:view-not-supported","No layerview implementation was found");const E=await this.layerViewImporter.importLayerView(i);or(t),u="default"in E?new E.default({layer:i,view:r}):new E({layer:i,view:r})}const b=()=>{g=Ti(g),u.destroyed||u.destroy(),u.layer=null,u.parent=null,u.view=null,this.done=!0};g=To(t,b),or(t);try{await u.when()}catch(E){throw b(),E}if(!((c=(o=this._map)==null?void 0:o.allLayers)==null?void 0:c.includes(i)))return b(),void this._deferred.reject(new de("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=u,i.emit("layerview-create",{view:r,layerView:u}),r.emit("layerview-create",{layer:i,layerView:u}),this.done=!0,this._deferred.resolve(u)}catch(u){i.emit("layerview-create-error",{view:r,error:u}),r.emit("layerview-create-error",{layer:i,error:u}),this.done=!0,this._deferred.reject(new de("layerview:create-error","layerview creation failed",{layer:i,error:u}))}}}let Zo=class extends Re{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Jf,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(ae(this._workPromise)&&(this._workPromise=tu(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(ug(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var u,g,b;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),ae(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,r=[],s=this.view.ready,o=S=>{if(!ae(S)){for(const E of S)if(E){i.add(E);const A=this._layerLayerViewInfoMap.get(E);A&&s?A.start():A||this._recyclingInfoMap.has(E)||r.push(E),"layers"in E&&E.layers&&o(E.layers)}}};for(const S of this._rootCollectionNames)o(this.get(S));for(const[S,E]of this._layerLayerViewInfoMap)if(!i.has(S)){this._layerLayerViewInfoMap.delete(E.layer);const A=E.tryRecycle(r);A?(this._recyclingInfoMap.set(E.layer,E),A.then(()=>{this._recyclingInfoMap.delete(E.layer),this._layerLayerViewInfoMap.set(E.layer,E),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(E.layer),E.destroy(),this._reschedule()})):E.destroy()}for(const[S,E]of this._recyclingInfoMap)i.has(S)||(this._recyclingInfoMap.delete(E.layer),E.destroy());for(const S of r)this._createLayerView(S);this._refreshCollections();const c=[(u=t==null?void 0:t.ground)==null?void 0:u.layers,(g=t==null?void 0:t.basemap)==null?void 0:g.baseLayers,(b=t==null?void 0:t.basemap)==null?void 0:b.referenceLayers,t==null?void 0:t.layers].filter(S=>!!S);i.forEach(S=>"layers"in S&&c.push(S.layers)),this.addHandles(c.map(S=>this._watchUpdatingTracking.addOnCollectionChange(()=>S,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([$i(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ge(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Mn)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,U(this._workPromise)&&(this._workPromise.reject(Ri()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return U(this._workPromise)||this._watchUpdatingTracking.updating||xw(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new de("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let r=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o||!o.layerView)continue;const c=o.layerView;c.layer=s,c.parent=i,t.getItemAt(r)!==c&&t.splice(r,0,c),s.layers&&this._populateLayerViewsOwners(s.layers,c.layerViews,c),r+=1}r<t.length&&t.splice(r,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new REe(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var r,s;i&&(ro(i)||i.name==="cancelled:layerview-create")||Ie.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${(r=e.title)!=null?r:"no title"}', id:'${(s=e.id)!=null?s:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};v([_()],Zo.prototype,"_workPromise",void 0),v([_({readOnly:!0})],Zo.prototype,"_watchUpdatingTracking",void 0),v([_({readOnly:!0})],Zo.prototype,"_layersToLayerViews",null),v([_({readOnly:!0})],Zo.prototype,"_rootCollectionNames",null),v([_()],Zo.prototype,"layerViewImporter",void 0),v([_()],Zo.prototype,"supportsGround",void 0),v([_({readOnly:!0})],Zo.prototype,"updating",null),v([_({readOnly:!0})],Zo.prototype,"updatingRemaining",null),v([_({constructOnly:!0})],Zo.prototype,"view",void 0),Zo=v([K("esri.views.LayerViewManager")],Zo);const NEe=Zo;function DEe(e){return"createLayerView"in e&&e.createLayerView!=null}let vo=class extends Re{constructor(e){super(e),this.factor=1.5,this.offset=Xs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};v([_({type:Number})],vo.prototype,"factor",void 0),v([_({nonNullable:!0})],vo.prototype,"offset",void 0),v([_()],vo.prototype,"position",void 0),v([_({type:Number,range:{min:0}})],vo.prototype,"size",void 0),v([_()],vo.prototype,"maskUrl",void 0),v([_()],vo.prototype,"maskEnabled",void 0),v([_()],vo.prototype,"overlayUrl",void 0),v([_()],vo.prototype,"overlayEnabled",void 0),v([_({readOnly:!0})],vo.prototype,"version",null),v([_({type:Boolean})],vo.prototype,"visible",void 0),vo=v([K("esri.views.Magnifier")],vo);const aZ=vo;class jEe{constructor(){this._tasks=new Array,this._running=new bS(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(t){for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return this._running.set(!0),new Promise((s,o)=>this._tasks.push(new ZN(s,o,t,i,r)))}unshift(t,i,r){return this._running.set(!0),new Promise((s,o)=>this._tasks.unshift(new ZN(s,o,t,i,r)))}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const s=Fo(i.signal);if(s&&!i.abortCallback)i.reject(Ri());else{const o=s?(r=i.abortCallback)==null?void 0:r.call(i,Ri()):i.callback(t);Lc(o)?o.then(i.resolve,i.reject):i.resolve(o)}}catch(s){i.reject(s)}return this._running.set(this._tasks.length>0),!0}cancelAll(){const t=Ri();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0,this._running.set(!1)}}class ZN{constructor(t,i,r,s,o){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=o}}let yv=class extends Re{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};v([_()],yv.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),v([_()],yv.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),yv=v([K("esri.views.support.DebugFlags")],yv);const zEe=new yv;var _o;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(_o||(_o={}));var JA,Ct;(function(e){e[e.YIELD=1]="YIELD"})(JA||(JA={})),function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e[e.TEST_PRIO=1]="TEST_PRIO"}(Ct||(Ct={}));const Wl=0,XN=new Map([[Ct.RESOURCE_CONTROLLER_IMMEDIATE,Wl],[Ct.RESOURCE_CONTROLLER,4],[Ct.SLIDE,Wl],[Ct.STREAM_DATA_LOADER,Wl],[Ct.ELEVATION_QUERY,Wl],[Ct.TERRAIN_SURFACE,1],[Ct.SURFACE_GEOMETRY_UPDATES,1],[Ct.LOD_RENDERER,2],[Ct.GRAPHICS_CORE,2],[Ct.I3S_CONTROLLER,2],[Ct.POINT_CLOUD_LAYER,2],[Ct.FEATURE_TILE_FETCHER,2],[Ct.OVERLAY,4],[Ct.STAGE,4],[Ct.GRAPHICS_DECONFLICTOR,4],[Ct.FILTER_VISIBILITY,4],[Ct.SCALE_VISIBILITY,4],[Ct.FRUSTUM_VISIBILITY,4],[Ct.CLOUDS_GENERATOR,4],[Ct.POINT_OF_INTEREST_FREQUENT,6],[Ct.POINT_OF_INTEREST_INFREQUENT,30],[Ct.LABELER,8],[Ct.FEATURE_QUERY_ENGINE,8],[Ct.FEATURE_TILE_TREE,16],[Ct.FEATURE_TILE_TREE_ACTIVE,Wl],[Ct.ELEVATION_ALIGNMENT,12],[Ct.TEXT_TEXTURE_ATLAS,12],[Ct.TEXTURE_UNLOAD,12],[Ct.LINE_OF_SIGHT_TOOL,16],[Ct.LINE_OF_SIGHT_TOOL_INTERACTIVE,Wl],[Ct.SNAPPING,Wl],[Ct.SHADOW_ACCUMULATOR,30]]);function QN(e){return XN.has(e)?XN.get(e):typeof e=="number"?e:1}const eD=6.5,tD=1,VEe=30,iD=1e3/30,rD=100,sD=.9;var YA,op;(function(e){class t{get updating(){return this._updating.get()}_updatingChanged(){this._updating.set(this._tasks.some(o=>o.needsUpdate))}constructor(){this._updating=new bS(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Dv("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=_o.INTERACTING,this._tasks=new Uf,this._runQueue=new Uf,this._load=0,this._idleStateCallbacks=new Uf,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=ge(()=>zEe.SCHEDULER_LOG_SLOW_TASKS,c=>this._debug=c,rt);for(const c of Object.keys(Ct))this.performanceInfo.tasks.set(Ct[c],new Dv(Ct[c]));const o=this;this._test={FRAME_SAFETY_BUDGET:eD,INTERACTING_BUDGET:iD,IDLE_BUDGET:rD,get availableBudget(){return o._budget.budget},usedBudget:0,getBudget:()=>o._budget,setBudget:c=>o._budget=c,updateTask:c=>this._updateTask(c),getState:c=>this._getState(c),getRuntime:c=>this._getRuntime(c),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(o=>o.remove()),this._tasks.clear(),Ti(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(o){this._updatingChanged(),o&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(o,c){const u=QN(o),g=new i(this,o,c,u);return this._tasks.push(g),this._updatingChanged(),this.performanceInfo.tasks.has(o)||this.performanceInfo.tasks.set(o,new Dv(o)),g}registerIdleStateCallbacks(o,c){const u={idleBegin:o,idleEnd:c};this._idleStateCallbacks.push(u),this.state===_o.IDLE&&this._idleUpdatesStartFired&&u.idleBegin();const g=this;return{remove:()=>this._removeIdleStateCallbacks(u),set idleBegin(b){g._idleUpdatesStartFired&&(u.idleEnd(),g._state===_o.IDLE&&b()),u.idleBegin=b},set idleEnd(b){u.idleEnd=b}}}get load(){return this._load}set state(o){this._state!==o&&(this._state=o,this.state!==_o.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(c=>c.idleEnd())))}get state(){return this._state}updateBudget(o){this._test.usedBudget=0,++this._frameNumber;let c=eD,u=o.frameDuration,g=tD;switch(this.state){case _o.IDLE:c=0,u=Math.max(rD,o.frameDuration),g=VEe;break;case _o.INTERACTING:u=Math.max(iD,o.frameDuration);case _o.ANIMATING:}return u=u-o.elapsedFrameTime-c,this.state!==_o.IDLE&&u<tD&&!this._forceTask?(this._forceTask=!0,!1):(u=Math.max(u,g),this._budget.reset(u,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case _o.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(o=>o.idleBegin())),this._runIdle();break;case _o.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(o){this._idleUpdatesStartFired&&o.idleEnd(),this._idleStateCallbacks.removeUnordered(o)}removeTask(o){this._tasks.removeUnordered(o),this._runQueue.removeUnordered(o),this._updatingChanged()}_updateTask(o){this._tasks.forAll(c=>{c.name===o&&c.setPriority(o)})}_getState(o){if(this._runQueue.some(u=>u.name===o))return op.SCHEDULED;let c=op.IDLE;return this._tasks.forAll(u=>{u.name===o&&u.needsUpdate&&(u.schedulePriority<=1?c=op.READY:c!==op.READY&&(c=op.WAITING))}),c}_getRuntime(o){let c=0;return this._tasks.forAll(u=>{u.name===o&&(c+=u.runtime)}),c}_resetRuntimes(){this._tasks.forAll(o=>o.runtime=0)}_getRunning(){const o=new Map;if(this._tasks.forAll(u=>{u.needsUpdate&&o.set(u.name,(o.get(u.name)||0)+1)}),o.size===0)return null;let c="";return o.forEach((u,g)=>{c+=u>1?` ${u}x ${g}`:` ${g}`}),c}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const o=this._tasks.reduce((c,u)=>u.needsUpdate?++c:c,0);this._load=this._load*sD+o*(1-sD)}_schedule(){for(this._runQueue.filterInPlace(o=>!!o.needsUpdate||(o.schedulePriority=o.basePriority,!1)),this._tasks.forAll(o=>{o.basePriority===Wl&&o.needsUpdate&&!this._runQueue.includes(o)&&o.blockFrame!==this._frameNumber&&this._runQueue.unshift(o)});this._runQueue.length===0;){let o=!1,c=0;if(this._tasks.forAll(u=>{u.needsUpdate&&u.schedulePriority!==0&&u.basePriority!==Wl&&u.blockFrame!==this._frameNumber&&(o=!0,c=Math.max(c,u.basePriority),u.schedulePriority===1?(u.schedulePriority=0,this._runQueue.push(u)):--u.schedulePriority)}),!o)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const o=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const c=this._budget.now(),u=this._runQueue.pop();this._budget.resetProgress();try{u.task.runTask(this._budget)===JA.YIELD&&(u.blockFrame=this._frameNumber)}catch(b){Ie.getLogger("esri.views.support.Scheduler").error(`Exception in task "${u.name}"`,b)}!this._budget.hasProgressed&&u.blockFrame!==this._frameNumber&&u.needsUpdate&&(u.name,Ct.I3S_CONTROLLER,u.blockFrame=this._frameNumber),u.schedulePriority=u.basePriority;const g=this._budget.now()-c;if(u.runtime+=g,this._frameTaskTimes.set(u.priority,this._frameTaskTimes.get(u.priority)+g),this._debug&&g>2*this._budget.budget&&console.log("Task",u.name,"used",g,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-o)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-o)}_startFrameTaskTimes(){for(const o of Object.keys(Ct))this._frameTaskTimes.set(Ct[o],0)}_recordFrameTaskTimes(o){this._frameTaskTimes.forEach((c,u)=>this.performanceInfo.tasks.get(u).record(c)),this.performanceInfo.total.record(o)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.get()}get updating(){return this._queue.running}constructor(o,c,u,g){this._scheduler=o,this.name=c,this._basePriority=g,this.blockFrame=0,this.runtime=0,this._queue=new jEe,this._handles=new Vr,this.schedulePriority=this._basePriority,this._task=new bS(U(u)?u:this._queue),this._handles.add(ts(()=>this.task.running,b=>o.taskRunningChanged(b)))}remove(){this.processQueue(lZ),this._scheduler.removeTask(this),this.schedule=KA.schedule,this.reschedule=KA.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(o){this.name=o;const c=QN(o);this._basePriority!==Wl&&this.schedulePriority===0||(this.schedulePriority=c),this._basePriority=c}get priority(){return this.name}set priority(o){this.setPriority(o)}get needsUpdate(){return this.updating||this.task.running}schedule(o,c,u){return this._queue.push(o,c,u)}reschedule(o,c,u){return this._queue.unshift(o,c,u)}processQueue(o){this._queue.runTask(o)}}class r{constructor(){this._begin=typeof performance!="undefined"?performance.now():0,this._budget=0,this._state=_o.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(o){return!this.done&&(o()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(o){this._enabled=o}reset(o,c){this._begin=this.now(),this._budget=o,this._state=c,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(YA||(YA={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(op||(op={}));const lZ=(()=>{const e=new YA.Budget;return e.enabled=!1,e})();class GEe{remove(){}processQueue(){}schedule(t,i,r){try{if(Fo(i)){const s=Ri();return r?Promise.resolve(r(s)):Promise.reject(s)}return B4(t(lZ))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}}const KA=new GEe;let gv=class extends Re{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(Ct.TEXTURE_UNLOAD))!=null?i:KA}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const r=this.makeUid(e);let s=this._textureRequests.get(r);if(!s){const o=t();s={referenceCount:0,texture:o,textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(o),this._stage.loadImmediate(o)),this._textureRequests.set(r,s)}return s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return U(t)?`${e}.${t}px`:e}};v([_()],gv.prototype,"_frameTask",void 0),v([_()],gv.prototype,"updating",null),gv=v([K("esri.views.3d.support.TextureCollection")],gv);var nD;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(nD||(nD={}));const uZ=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],cZ={};function hZ(e){return!!cZ[e]}function UEe(e){for(const t of e)if(!hZ(t))return!1;return!0}uZ.forEach(e=>{cZ[e]=!0});class qEe{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},s)=>{var o;return(o=this.inputManager)==null?void 0:o.installHandlers(s,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,s){const o=Array.isArray(t)?t:t.split(",");if(!UEe(o))return o.some(hZ)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let c,u;Array.isArray(i)?u=i:(c=i,u=[]),typeof r=="function"?c=r:s=r,s=s!=null?s:Ai.DEFAULT;const g=this._createUniqueGroupName(),b=new BEe(this.view,o,u,c);this._handlers.set(g,{handler:b,priority:s});for(const S of o){const E=this._handlerCounts.get(S)||0;this._handlerCounts.set(S,E+1)}return this.inputManager&&this.inputManager.installHandlers(g,[b],s),{remove:()=>this._removeHandler(g,o)}}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const s=this._handlerCounts.get(r);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",r):s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class BEe extends ns{constructor(t,i,r,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const o of i)switch(o){case"click":this.registerIncoming("click",r,c=>s(this._wrapClick(c)));break;case"double-click":this.registerIncoming("double-click",r,c=>s(this._wrapDoubleClick(c)));break;case"immediate-click":this.registerIncoming("immediate-click",r,c=>s(this._wrapImmediateClick(c)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,c=>s(this._wrapImmediateDoubleClick(c)));break;case"hold":this.registerIncoming("hold",r,c=>s(this._wrapHold(c)));break;case"drag":this.registerIncoming("drag",r,c=>{const u=this._wrapDrag(c);u&&s(u)});break;case"key-down":this.registerIncoming("key-down",r,c=>s(this._wrapKeyDown(c)));break;case"key-up":this.registerIncoming("key-up",r,c=>s(this._wrapKeyUp(c)));break;case"pointer-down":this.registerIncoming("pointer-down",r,c=>s(this._wrapPointer(c,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,c=>s(this._wrapPointer(c,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,c=>s(this._wrapPointer(c,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,c=>s(this._wrapPointerDrag(c)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,c=>s(this._wrapMouseWheel(c)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,c=>s(this._wrapPointer(c,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,c=>s(this._wrapPointer(c,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,c=>{s(this._wrapGamepad(c))});break;case"focus":this.registerIncoming("focus",r,c=>{s(this._wrapFocus(c))});break;case"blur":this.registerIncoming("blur",r,c=>{s(this._wrapBlur(c))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:r,buttons:s,x:o,y:c,native:u,eventId:g}=t.data,{cancelable:b,timestamp:S}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:o,y:c,native:u,timestamp:S,screenPoint:Xs(o,c),mapPoint:this._getMapPoint(o,c),eventId:g,cancelable:b,stopPropagation:()=>t.stopPropagation(),async:E=>t.async(E),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:o,y:c,native:u,eventId:g}=t.data,{cancelable:b,timestamp:S}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:o,y:c,native:u,timestamp:S,mapPoint:this._getMapPoint(o,c),eventId:g,cancelable:b,stopPropagation:()=>t.stopPropagation(),async:E=>t.async(E),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:r,buttons:s,x:o,y:c,native:u,eventId:g}=t.data,b=u.pointerId,{cancelable:S,timestamp:E}=t;return{type:"immediate-click",pointerId:b,pointerType:i,button:r,buttons:s,x:o,y:c,native:u,timestamp:E,mapPoint:this._getMapPoint(o,c),eventId:g,cancelable:S,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:r,buttons:s,x:o,y:c,native:u,eventId:g}=t.data,b=u.pointerId,{cancelable:S,timestamp:E}=t;return{type:"immediate-double-click",pointerId:b,pointerType:i,button:r,buttons:s,x:o,y:c,native:u,timestamp:E,mapPoint:this._getMapPoint(o,c),eventId:g,cancelable:S,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:r,buttons:s,x:o,y:c,native:u}=t.data,{cancelable:g,timestamp:b}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:o,y:c,native:u,timestamp:b,mapPoint:this._getMapPoint(o,c),cancelable:g,stopPropagation:()=>t.stopPropagation(),async:S=>t.async(S),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(Xs(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:o,pointerType:c,button:u}=i;if(o==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const g=i.pointer.native,b=i.buttons,{cancelable:S,timestamp:E}=t,A={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return o==="end"&&(this._latestDragStart=void 0),{type:"drag",action:o,x:r,y:s,origin:A,pointerType:c,button:u,buttons:b,radius:i.radius,angle:ZU(i.angle),native:g,timestamp:E,cancelable:S,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:r,native:s}=t.data,{cancelable:o,timestamp:c}=t;return{type:"key-down",key:i,repeat:r,native:s,timestamp:c,cancelable:o,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:r}=t.data,{cancelable:s,timestamp:o}=t;return{type:"key-up",key:i,native:r,timestamp:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:r,y:s,button:o,buttons:c,native:u,eventId:g}=t.data,b=u.pointerId,S=u.pointerType,{cancelable:E,timestamp:A}=t;return{type:i,x:r,y:s,pointerId:b,pointerType:S,button:o,buttons:c,native:u,timestamp:A,eventId:g,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:r,buttons:s,native:o,eventId:c}=t.data.currentEvent,{button:u}=t.data.startEvent,g=t.data.startEvent.native.pointerId,b=t.data.startEvent.native.pointerType,S=t.data.action,E={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:A,timestamp:O}=t;return{type:"pointer-drag",x:i,y:r,pointerId:g,pointerType:b,button:u,buttons:s,action:S,origin:E,native:o,timestamp:O,eventId:c,cancelable:A,stopPropagation:()=>t.stopPropagation(),async:L=>t.async(L),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:r,timestamp:s}=t,{x:o,y:c,deltaY:u,native:g}=r;return{type:"mouse-wheel",x:o,y:c,deltaY:u,native:g,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:r,device:s}=t.data,{cancelable:o,timestamp:c}=t,{buttons:u,axes:g}=r;return{type:"gamepad",device:s,timestamp:c,action:i,buttons:u,axes:g,cancelable:o,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}}var Zb,oD,aD;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Zb||(Zb={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(oD||(oD={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(aD||(aD={}));function HEe(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return Ie.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function ZA(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Zb.USER)&&e.getEditableFlag(Zb.MANAGER)}function ta(e){return Xs(e.x,e.y)}function dZ(e,t){var r;const i=(r=e instanceof HTMLElement?e:e.surface)==null?void 0:r.getBoundingClientRect();return i?Xs(t.clientX-i.left,t.clientY-i.top):Xs(0,0)}function lD(e,t){return t instanceof Event?dZ(e,t):ta(t)}function uD(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class WEe{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":cD(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!hD(t))break;const s=ta(t),o=this._intersect(s,t.pointerType,i.forEachTool);if(ae(o))break;const c=o.manipulator,u=o.tool;!(U(c)&&U(u)&&c.interactive)||c.grabbable&&c.grabbableForEvent(t)||!c.grabbing||c.dragging||this._ungrabManipulatorBeforeDragging(c,t,i),U(c)&&U(u)&&c.interactive&&c.grabbable&&c.grabbableForEvent(t)&&!c.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:c,tool:u,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&ae(i.activeTool)&&(this._revertToNullActiveTool=!0,i.setActiveTool(o.tool)),c.grabbing=!0,c.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!hD(t))break;const s=this._grabbedManipulators.get(t.pointerId),o=tl(s,({manipulator:S})=>S),c=tl(s,({tool:S})=>S);if(ae(o)||ae(c))break;const u=ta(t);u.x=so(u.x,0,i.view.width),u.y=so(u.y,0,i.view.height);const g=s.start,b=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(o.dragging=!0,b?o.events.emit("drag",{action:"update",start:g,screenPoint:u}):o.events.emit("drag",{action:"start",start:g,screenPoint:u,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:c,manipulator:o,start:g}));break;case"end":o.dragging=!1,b&&o.events.emit("drag",{action:"end",start:g,screenPoint:u}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=ta(t),o=this._intersect(s,t.pointerType,i.forEachTool);if(JEe(t)||i.forEachTool(b=>{if((!U(o)||o.tool!==b||b.automaticManipulatorSelection)&&b.manipulators){let S=!1;b.manipulators.forEach(({manipulator:E})=>{E.selected&&(E.selected=!1,S=!0)}),S&&b.onManipulatorSelectionChanged&&b.onManipulatorSelectionChanged()}}),ae(o))break;const{manipulator:c,tool:u}=o;if(!c.interactive)break;c.selectable&&u.automaticManipulatorSelection&&(c.selected=!c.selected,u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged());const g=t.native.shiftKey;c.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:g,stopPropagation:r});break}case"click":{const s=ta(t),o=this._intersect(s,t.pointerType,i.forEachTool),c=U(o)?o.manipulator:null;if(ae(c)||!c.interactive)break;const u=t.native.shiftKey;c.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:u}),r();break}case"double-click":{const s=ta(t),o=this._intersect(s,t.pointerType,i.forEachTool),c=U(o)?o.manipulator:null;if(ae(c)||!c.interactive)break;const u=t.native.shiftKey;c.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:r});break}case"immediate-double-click":{const s=ta(t),o=this._intersect(s,t.pointerType,i.forEachTool),c=U(o)?o.manipulator:null;if(ae(c)||!c.interactive)break;const u=t.native.shiftKey;c.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:r});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:ta(i)}),this._grabbedManipulators.forEach(({manipulator:s},o)=>{s===t&&this._grabbedManipulators.delete(o)}),this._afterManipulatorUngrab(r.setActiveTool)}_handlePointerEnd(t,i){const r=tl(this._grabbedManipulators.get(t.pointerId),({manipulator:s})=>s);ae(r)||r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:ta(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(t){let i=null;return xw(t,({manipulator:r})=>!(ae(r)||!r.interactive)&&(r.grabbing&&r.grabCursor?(i=r.grabCursor,!0):!!r.cursor&&(i=r.cursor,!0))),i}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),t(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const o=this._grabbedManipulators.values(),c=Jne(o,({tool:u})=>u===s);s.firstGrabbedManipulator=U(c)?c.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},s=!0,o){const c=(u,g)=>u===t&&(ae(o)||o===g);this._grabbedManipulators.forEach(({tool:u,manipulator:g,pointerType:b},S)=>{c(u,g)&&(this._grabbedManipulators.delete(S),g.grabbing=!1,g.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:b}))}),this._draggedManipulators.forEach(({tool:u,manipulator:g},b)=>{c(u,g)&&(this._draggedManipulators.delete(b),g.dragging=!1,g.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:u,manipulator:g},b)=>{c(u,g)&&(this._hoveredManipulators.delete(b),g.hovering=!1)}),this._afterManipulatorUngrab(r),this._onFocusChange(i)}_intersect(t,i,r){let s=null;return r(o=>{if(o.manipulators==null||!ZA(o))return!1;const c=o.manipulators.intersect(t,i);return!ae(c)&&(s={tool:o,manipulator:c},!0)}),s}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Xs(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!cD(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(ta(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){let o=this._intersect(t,r,s);const c=tl(this._hoveredManipulators.get(i),({manipulator:u})=>u);U(o)&&!o.manipulator.interactive&&(o=null),U(o)&&c===o.manipulator||(U(c)&&(c.hovering=!1),U(o)?(o.manipulator.hovering=!0,this._hoveredManipulators.set(i,o)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorUngrab(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}}function cD(e){return e==="mouse"}function hD(e){return e.pointerType!=="mouse"||e.button===0}function JEe(e){return!!e.native.shiftKey}const dD="attached",kE="tools";let Hu=class extends zy{constructor(e){super(e),this._manipulatorState=new WEe,this.tools=new Be,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(uZ,e=>{this._handleInputEvent(e)},Ai.TOOL),...HEe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(U(e)&&!this.view.ready)return void Ie.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),U(t)&&t.deactivate(),U(e)&&e.activate(),this._removeIncompleteTools(e);for(const i of this.tools){this._updateToolEditableFlag(i);const r=ZA(i);!ae(this.activeTool)&&r||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!r)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){var e;this.view.type==="3d"?(this._set("textures",new gv(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([ge(()=>{const{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",t=>this._forEachManipulator(i=>i.onElevationChange(t))),Mo(()=>this._set("textures",ti(this.textures)))],dD)):this.handles.add(ge(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){U(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(dD)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};U(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(r=>{!t&&r.visible&&r.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),!t&&U(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(kE),this._forEachTool(e=>{if(e instanceof Re){const t=ge(()=>[e.cursor,e.visible,e.editable],()=>{ZA(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(t,kE)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],kE)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var t;(t=e.setEditableFlag)==null||t.call(e,Zb.MANAGER,ae(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;ae(e)&&this._forEachTool(t=>!(!U(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(ae(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};v([_({constructOnly:!0,nonNullable:!0})],Hu.prototype,"view",void 0),v([_({readOnly:!0,nonNullable:!0})],Hu.prototype,"textures",void 0),v([_({value:null})],Hu.prototype,"activeTool",null),v([_({readOnly:!0,type:Be})],Hu.prototype,"tools",void 0),v([_({readOnly:!0})],Hu.prototype,"cursor",void 0),v([_({readOnly:!0})],Hu.prototype,"updating",null),Hu=v([K("esri.views.ToolViewManager")],Hu);const YEe=Hu;let $m=class extends Re{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":KEe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return ZEe[this.deviceType]}};v([_({nonNullable:!0,readOnly:!0})],$m.prototype,"nativeIndex",void 0),v([_({type:String,readOnly:!0})],$m.prototype,"deviceType",null),v([_({type:Number,readOnly:!0})],$m.prototype,"axisThreshold",null),$m=v([K("esri.views.input.gamepad.GamepadInputDevice")],$m);const KEe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),ZEe={standard:.15,spacemouse:.025,unknown:0},Qk=$m;let vv=class extends Re{constructor(...e){super(...e),this.devices=new Be,this.enabledFocusMode="document"}};v([_({type:Be.ofType(Qk),readOnly:!0})],vv.prototype,"devices",void 0),v([_({type:["document","view","none"]})],vv.prototype,"enabledFocusMode",void 0),vv=v([K("esri.views.input.gamepad.GamepadSettings")],vv);const XEe=vv;let B3=class extends Re{constructor(){super(...arguments),this.gamepad=new XEe}};v([_({readOnly:!0})],B3.prototype,"gamepad",void 0),B3=v([K("esri.views.input.Input")],B3);const QEe=B3;let $h=class extends Re{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};v([_({type:Boolean,nonNullable:!0})],$h.prototype,"enabled",void 0),v([_({type:Qk})],$h.prototype,"device",void 0),v([_({type:["pan","zoom"],nonNullable:!0})],$h.prototype,"mode",void 0),v([_({type:["forward-down","forward-up"],nonNullable:!0})],$h.prototype,"tiltDirection",void 0),v([_({type:Number,nonNullable:!0})],$h.prototype,"velocityFactor",void 0),$h=v([K("esri.views.navigation.gamepad.GamepadSettings")],$h);const pZ=$h;let Jp=class extends Re{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new pZ,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};v([_({type:Boolean})],Jp.prototype,"browserTouchPanEnabled",void 0),v([_({type:pZ,nonNullable:!0})],Jp.prototype,"gamepad",void 0),v([_({type:Boolean})],Jp.prototype,"momentumEnabled",void 0),v([_({type:Boolean})],Jp.prototype,"mouseWheelZoomEnabled",void 0),Jp=v([K("esri.views.navigation.Navigation")],Jp);const fZ=Jp;function Kze(e,t,i){const r=mZ(e),s=t,o=e4e(r,s,i);if(r){const c=Jw.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!i&&c!==r.heightUnit){const u=new de("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${c})`,{horizontalUnit:c});return new de("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:u})}}if(!t4e(e)||o===Bn.Unsupported)return new de("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(o){case Bn.Units:{const c=(r==null?void 0:r.heightUnit)||"unknown",u=(s==null?void 0:s.heightUnit)||"unknown",g=new de("layerview:incompatible-height-unit",`The vertical units of the layer (${c}) must match the vertical units of the scene (${u})`,{layerUnit:c,sceneUnit:u});return new de("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:g})}case Bn.HeightModel:{const c=(r==null?void 0:r.heightModel)||"unknown",u=(s==null?void 0:s.heightModel)||"unknown",g=new de("layerview:incompatible-height-model",`The height model of the layer (${c}) must match the height model of the scene (${u})`,{layerHeightModel:c,sceneHeightModel:u});return new de("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:g})}case Bn.CRS:{const c=(r==null?void 0:r.vertCRS)||"unknown",u=(s==null?void 0:s.vertCRS)||"unknown",g=new de("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${c}) must match the vertical datum of the scene (${u})`,{layerDatum:c,sceneDatum:u});return new de("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:s,error:g})}}return null}function e4e(e,t,i){if(!pD(e)||!pD(t))return Bn.Unsupported;if(e==null||t==null)return Bn.Ok;if(!i&&e.heightUnit!==t.heightUnit)return Bn.Units;if(e.heightModel!==t.heightModel)return Bn.HeightModel;switch(e.heightModel){case"gravity-related-height":return Bn.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Bn.Ok:Bn.CRS;default:return Bn.Unsupported}}var Bn;function pD(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function t4e(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!vZ(e)}function mZ(e){var r;const t=e.url?_c(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&U(t)&&t.serverType==="ImageServer")&&yZ(e)&&e.heightModelInfo?e.heightModelInfo:vZ(e)?Jw.deriveUnitFromSR(r4e,e.spatialReference):null}function yZ(e){return"heightModelInfo"in e}function gZ(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function vZ(e){return gZ(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):bZ(e)}function i4e(e){return e.layers!=null||bZ(e)||gZ(e)||yZ(e)}function bZ(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Bn||(Bn={}));const r4e=new Jw({heightModel:"gravity-related-height"});var xS;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(xS||(xS={}));let XA,OE=null;async function s4e(e){OE||(OE=pe(()=>import("./geometryServiceUtils.f8ebf652.js"),[]).then(t=>XA=t)),await OE,or(e)}async function wZ(e,t,i,r){if(!e)return null;const s=e.spatialReference;return Rd()||uu(s,t)?lu(e,t):XA?XA.projectGeometry(e,t,i,r):(await Promise.race([s4e(r),Nd(r)]),wZ(e,t,i,r))}let xi=class extends Re{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=fc(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return U(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return ae(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,r,s,o;const e=(i=this.map)==null?void 0:i.call(this),t=[];return U(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var s;if(this.suspended)return(s=this._get("_spatialReferenceTask"))!=null?s:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const o of e){const c=this._getSupportedSpatialReferences(o);if(c.length>0){const u=this._narrowDownSpatialReferenceCandidates(i,c);U(u)&&(i=u)}if(U(i)&&i.length===1)break}if(t&&(ae(i)||i.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(i);return{spatialReference:U(r)?r.spatialReference:null,viewingMode:U(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,r,s,o,c,u,g,b;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(s=(r=this.map)==null?void 0:r.call(this))==null?void 0:s.basemap,layers:(u=(c=(o=this.map)==null?void 0:o.call(this))==null?void 0:c.basemap)==null?void 0:u.baseLayers},{layers:(b=(g=this.map)==null?void 0:g.call(this))==null?void 0:b.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const S=e[0].tileInfo;return{tileInfo:S&&S.spatialReference.equals(this.spatialReference)?S:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,r,s,o;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(r=this._get("_heightModelInfoTask"))!=null?r:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const c of e)if(i4e(c)){const u=mZ(c);if(u)return{heightModelInfo:u,vcsWkid:(s=c.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(o=c.spatialReference)==null?void 0:o.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var r,s;if(this.suspended||!this.required.extent)return(r=this._get("_extentCandidatesTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const o of e.layers){const c="fullExtents"in o&&o.fullExtents||(U(o.fullExtent)?[o.fullExtent]:[]),u=this.requiresExtentInSpatialReference?null:c[0],g=(s=c.find(b=>b.spatialReference.equals(this.spatialReference)))!=null?s:u;if(g)return{candidates:[{extent:g,layer:o}],updating:!1};if(this._getSupportedSpatialReferences(o).length>0)for(const b of c)i.push({extent:b,layer:o})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(ae(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:U(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(U(this._projectExtentTask.task)&&(this._projectExtentTask.task=fc(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:$6(async s=>{try{const o=await wZ(i.extent,r,i.layer.portalItem,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Fo(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(ae(e))return t;const i=[],r=(s,o)=>U(s)?U(o)?s===o&&s:s:o;for(const s of e)for(const o of t){if(!s.spatialReference.equals(o.spatialReference))continue;const c=r(s.viewingMode,o.viewingMode);if(c!==!1){i.push({spatialReference:s.spatialReference,viewingMode:c});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return ae(e)||e.length<1?U(t)?{spatialReference:t,viewingMode:null}:null:(U(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==xS.Local)&&(e=e.filter(({viewingMode:i})=>i!==xS.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const r of t){const s=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(U(s)){const o=U(s.constraints)?s.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:c,viewingMode:u}of o)(!this.requiresExtentInSpatialReference||ae(this.userSpatialReference)||c.equals(this.userSpatialReference))&&i.push({spatialReference:c,viewingMode:u})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};v([_()],xi.prototype,"required",void 0),v([_({constructOnly:!0})],xi.prototype,"map",void 0),v([_({constructOnly:!0})],xi.prototype,"getSpatialReferenceSupport",void 0),v([_()],xi.prototype,"defaultSpatialReference",void 0),v([_()],xi.prototype,"userSpatialReference",void 0),v([_()],xi.prototype,"sourcePreloadCount",void 0),v([_()],xi.prototype,"priorityCollection",void 0),v([_()],xi.prototype,"requiresExtentInSpatialReference",void 0),v([_()],xi.prototype,"suspended",void 0),v([_({readOnly:!0})],xi.prototype,"ready",null),v([_({readOnly:!0})],xi.prototype,"heightModelInfoReady",null),v([_({readOnly:!0})],xi.prototype,"spatialReference",null),v([_({readOnly:!0})],xi.prototype,"extent",null),v([_({readOnly:!0})],xi.prototype,"heightModelInfo",null),v([_({readOnly:!0})],xi.prototype,"vcsWkid",null),v([_({readOnly:!0})],xi.prototype,"latestVcsWkid",null),v([_({readOnly:!0})],xi.prototype,"viewingMode",null),v([_({readOnly:!0})],xi.prototype,"tileInfo",null),v([_({readOnly:!0})],xi.prototype,"mapCollections",null),v([_({readOnly:!0})],xi.prototype,"_allLayers",null),v([_({readOnly:!0})],xi.prototype,"_spatialReferenceTask",null),v([_({readOnly:!0})],xi.prototype,"_tileInfoTask",null),v([_({readOnly:!0})],xi.prototype,"_heightModelInfoTask",null),v([_({readOnly:!0})],xi.prototype,"_extentCandidatesTask",null),v([_()],xi.prototype,"_extentTask",null),v([_()],xi.prototype,"_projectExtentTask",void 0),xi=v([K("esri.views.support.DefaultsFromMap")],xi);var H3;let ot=H3=class extends ar(ss.EventedMixin(Iw(Re))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Mb({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Xf,this.analyses=new _S,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Be,this.magnifier=new aZ,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new By,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new QEe,this.navigation=new fZ,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new qEe(this),this.persistableViewModels=new Be,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(ge(()=>this.preconditionsReady,t=>{var i,r;t?(this._currentSpatialReference=this.spatialReference,H3.views.add(this)):(this._currentSpatialReference=null,H3.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.toolViewManager)==null||i.detach(),U(this.analysisViewManager)&&this.analysisViewManager.detach(),(r=this.layerViewManager)==null||r.clear(),this._teardown()):t&&!this.ready&&(this._startup(),U(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},au))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,In(()=>this.ready)))),this.basemapView=new Ah({view:this}),this.layerViewManager=new NEe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new YEe({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([ge(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),ge(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),ge(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([ge(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(U(e))return;const s=Mo(()=>e=fc(e));e=$6(async o=>{try{await n5(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{e=null}Ie.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ti(this.graphics),this.analyses=ti(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ti(this.analysisViewManager),this.toolViewManager=ti(this.toolViewManager),this.layerViewManager=ti(this.layerViewManager),this.basemapView=ti(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ie.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new xi({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||ru.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(Ie.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:e}),e=null),ru.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Hi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return U(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new de("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return U(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&Ie.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(ts(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ot.views=new Be,v([_()],ot.prototype,"_userSpatialReference",void 0),v([_()],ot.prototype,"activeTool",null),v([_({readOnly:!0})],ot.prototype,"allLayerViews",void 0),v([_()],ot.prototype,"groundView",void 0),v([_()],ot.prototype,"animation",null),v([_()],ot.prototype,"basemapView",void 0),v([_()],ot.prototype,"center",null),v([_({readOnly:!0})],ot.prototype,"_defaultsFromMapSettings",null),v([_()],ot.prototype,"defaultsFromMap",null),v([_()],ot.prototype,"fatalError",void 0),v([_({type:vi})],ot.prototype,"extent",null),v([_(WA(Xf,"graphics"))],ot.prototype,"graphics",void 0),v([_(WA(_S,"analyses"))],ot.prototype,"analyses",void 0),v([_({readOnly:!0,type:Jw})],ot.prototype,"heightModelInfo",null),v([_({readOnly:!0})],ot.prototype,"interacting",null),v([_({readOnly:!0})],ot.prototype,"navigating",null),v([_({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ot.prototype,"preconditionsReady",null),v([_({readOnly:!0})],ot.prototype,"typeSpecificPreconditionsReady",void 0),v([_({type:Be,readOnly:!0})],ot.prototype,"layerViews",void 0),v([_()],ot.prototype,"resolution",null),v([_({type:aZ})],ot.prototype,"magnifier",void 0),v([_({value:null,type:vq})],ot.prototype,"map",null),v([_()],ot.prototype,"padding",void 0),v([_({readOnly:!0})],ot.prototype,"ready",void 0),v([_({type:wt})],ot.prototype,"spatialReference",null),v([_()],ot.prototype,"spatialReferenceWarningDelay",void 0),v([_()],ot.prototype,"stationary",null),v([_({readOnly:!0})],ot.prototype,"supportsGround",void 0),v([_({type:pu})],ot.prototype,"timeExtent",void 0),v([_({type:By,nonNullable:!0})],ot.prototype,"timeReference",void 0),v([_()],ot.prototype,"tools",null),v([_()],ot.prototype,"toolViewManager",void 0),v([_({readOnly:!0})],ot.prototype,"type",void 0),v([_({type:Number})],ot.prototype,"scale",void 0),v([_({readOnly:!0})],ot.prototype,"updating",void 0),v([_({readOnly:!0})],ot.prototype,"initialExtentRequired",void 0),v([_({readOnly:!0})],ot.prototype,"initialExtent",null),v([_()],ot.prototype,"cursor",null),v([_({readOnly:!0})],ot.prototype,"input",void 0),v([_({type:fZ,nonNullable:!0})],ot.prototype,"navigation",void 0),v([_()],ot.prototype,"layerViewManager",void 0),v([_()],ot.prototype,"analysisViewManager",void 0),v([_()],ot.prototype,"width",void 0),v([_()],ot.prototype,"height",void 0),v([_({readOnly:!0})],ot.prototype,"resizing",void 0),v([_({value:null,readOnly:!0})],ot.prototype,"size",null),v([_({readOnly:!0})],ot.prototype,"suspended",void 0),v([_({readOnly:!0})],ot.prototype,"viewEvents",void 0),v([_({readOnly:!0})],ot.prototype,"persistableViewModels",void 0),v([_()],ot.prototype,"_isValid",void 0),v([_()],ot.prototype,"_readyCycleForced",void 0),v([_()],ot.prototype,"_currentSpatialReference",void 0),ot=H3=v([K("esri.views.View")],ot);const n4e=ot;let kh=class extends Sx{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new de("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,t){t||(t=Lc(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};v([_({readOnly:!0})],kh.prototype,"done",null),v([_({readOnly:!0,type:String})],kh.prototype,"state",void 0),v([_()],kh.prototype,"target",void 0),kh=v([K("esri.views.ViewAnimation")],kh),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(kh||(kh={}));const QA=kh;function wf(e,t,i,r){const s=3*e,o=3*(i-e)-s,c=1-s-o,u=3*t,g=3*(r-t)-u,b=1-u-g;function S(L){return((c*L+o)*L+s)*L}function E(L){return((b*L+g)*L+u)*L}function A(L){return(3*c*L+2*o)*L+s}function O(L,N){let z,q,Z,ee,ie,ne;for(Z=L,ne=0;ne<8;ne++){if(ee=S(Z)-L,Math.abs(ee)<N)return Z;if(ie=A(Z),Math.abs(ie)<1e-6)break;Z-=ee/ie}if(z=0,q=1,Z=L,Z<z)return z;if(Z>q)return q;for(;z<q;){if(ee=S(Z),Math.abs(ee-L)<N)return Z;L>ee?z=Z:q=Z,Z=.5*(q-z)+z}return Z}return function(L,N=1e-6){return E(O(L,N))}}const o4e=/^cubic-bezier\((.*)\)/,ia={};function a4e(e){let t=ia[e]||null;if(!t){const i=o4e.exec(e);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(t=wf.apply(wf,r))}}return t}ia.ease=wf(.25,.1,.25,1),ia.linear=wf(0,0,1,1),ia.easeIn=ia["ease-in"]=wf(.42,0,1,1),ia.easeOut=ia["ease-out"]=wf(0,0,.58,1),ia.easeInOut=ia["ease-in-out"]=wf(.42,0,.58,1);function Cd(){return[1,0,0,1,0,0]}function l4e(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function u4e(e,t,i,r,s,o){return[e,t,i,r,s,o]}function c4e(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:l4e,create:Cd,createView:c4e,fromValues:u4e},Symbol.toStringTag,{value:"Module"}));function Xb(e,t){return e[0]=t[0],e[1]=t[1],e}function ds(e,t,i){return e[0]=t,e[1]=i,e}function e8(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function jr(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function _Z(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function xZ(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function h4e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function d4e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function p4e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function f4e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function m4e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Og(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function xc(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function M0(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function vl(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function Wy(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function jd(e){const t=e[0],i=e[1];return t*t+i*i}function SZ(e,t){return e[0]=-t[0],e[1]=-t[1],e}function y4e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function e$(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function Wd(e,t){return e[0]*t[0]+e[1]*t[1]}function IZ(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function EZ(e,t,i,r){const s=t[0],o=t[1];return e[0]=s+r*(i[0]-s),e[1]=o+r*(i[1]-o),e}function g4e(e,t){t=t||1;const i=2*g5()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function v4e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function Yl(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function b4e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function w4e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function _4e(e,t,i,r){const s=t[0]-i[0],o=t[1]-i[1],c=Math.sin(r),u=Math.cos(r);return e[0]=s*u-o*c+i[0],e[1]=s*c+o*u+i[1],e}function x4e(e,t){const i=e[0],r=e[1],s=t[0],o=t[1];let c=i*i+r*r;c>0&&(c=1/Math.sqrt(c));let u=s*s+o*o;u>0&&(u=1/Math.sqrt(u));const g=(i*s+r*o)*c*u;return g>1?0:g<-1?Math.PI:Math.acos(g)}function S4e(e){return"vec2("+e[0]+", "+e[1]+")"}function I4e(e,t){return e[0]===t[0]&&e[1]===t[1]}function E4e(e,t){const i=e[0],r=e[1],s=t[0],o=t[1],c=Ro();return Math.abs(i-s)<=c*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))}function M4e(e,t,i,r,s){let o=t[0]-i[0],c=t[1]-i[1];const u=(r[0]*o+r[1]*c)*(s-1);return o=r[0]*u,c=r[1]*u,e[0]=t[0]+o,e[1]=t[1]+c,e}const T4e=Wy,w9=jr,C4e=_Z,A4e=xZ,$4e=M0,k4e=vl,O4e=jd;Object.freeze(Object.defineProperty({__proto__:null,add:e8,angle:x4e,ceil:h4e,copy:Xb,cross:IZ,dist:$4e,distance:M0,div:A4e,divide:xZ,dot:Wd,equals:E4e,exactEquals:I4e,floor:d4e,inverse:y4e,len:T4e,length:Wy,lerp:EZ,max:f4e,min:p4e,mul:C4e,multiply:_Z,negate:SZ,normalize:e$,projectAndScale:M4e,random:g4e,rotate:_4e,round:m4e,scale:Og,scaleAndAdd:xc,set:ds,sqrDist:k4e,sqrLen:O4e,squaredDistance:vl,squaredLength:jd,str:S4e,sub:w9,subtract:jr,transformMat2:v4e,transformMat2d:Yl,transformMat3:b4e,transformMat4:w4e},Symbol.toStringTag,{value:"Module"}));function Yt(){return[0,0]}function MZ(e){return[e[0],e[1]]}function t_(e,t){return[e,t]}function P4e(e){const t=Yt(),i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function F4e(e,t){return new Float64Array(e,t,2)}function TZ(){return Yt()}function CZ(){return t_(1,1)}function AZ(){return t_(1,0)}function $Z(){return t_(0,1)}const L4e=TZ(),R4e=CZ(),N4e=AZ(),D4e=$Z();Object.freeze(Object.defineProperty({__proto__:null,ONES:R4e,UNIT_X:N4e,UNIT_Y:D4e,ZEROS:L4e,clone:MZ,create:Yt,createView:F4e,fromArray:P4e,fromValues:t_,ones:CZ,unitX:AZ,unitY:$Z,zeros:TZ},Symbol.toStringTag,{value:"Module"}));const kZ=96,OZ=39.37,j4e=180/Math.PI;function PZ(e){return e.wkid?e:e.spatialReference||wt.WGS84}function t8(e,t){return t.type?ds(e,t.x,t.y):Xb(e,t)}function FZ(e){return Od(e)}function nb(e,t){const i=Math.max(1,t[0]),r=Math.max(1,t[1]);return Math.max(e.width/i,e.height/r)*J4e(e.spatialReference)}async function bv(e,t,i,r){let s,o;if(!e||Array.isArray(e)&&!e.length)return null;if(Be.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const u=e.every(S=>"attributes"in S),g=e.some(S=>!S.geometry);let b=e;if(u&&g&&t&&t.allLayerViews){const S=new Map;for(const L of e){const N=L.layer,z=S.get(N)||[],q=L.attributes[N.objectIdField];q!=null&&z.push(q),S.set(N,z)}const E=[];S.forEach((L,N)=>{const z=t.allLayerViews.find(q=>q.layer.id===N.id);if(z&&"queryFeatures"in z){const q=N.createQuery();q.objectIds=L,q.returnGeometry=!0,E.push(z.queryFeatures(q))}});const A=await Promise.all(E),O=[];for(const L of A)if(L&&L.features&&L.features.length)for(const N of L.features)U(N.geometry)&&O.push(N.geometry);b=O}for(const S of b)r=await bv(S,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new pt(e);else if(e instanceof Vd)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const u=e.layer,g=t.allLayerViews.find(b=>b.layer.id===u.id);if(g&&"queryFeatures"in g){const b=u.createQuery();b.objectIds=[e.attributes[u.objectIdField]],b.returnGeometry=!0;const S=await g.queryFeatures(b);s=Cy(S,"features",0,"geometry")}}}if(ae(s)||(o=s.type==="point"?new vi({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!o))return null;Rd()||uu(o.spatialReference,i)||await Nd();const c=lu(o,i);return c?r=r?r.union(c):c:null}function z4e(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const s=r.layer;s&&s.minScale&&s.maxScale&&(t=s.minScale<t?s.minScale:t,i=s.maxScale>i?s.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function PE(e,t){return Hi(PZ(e),t)?e:lu(e,t)}async function V4e(e,t){if(!e||!t)return new Zl({targetGeometry:new pt,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:o,size:c}=t,u=[s?c[0]-s.left-s.right:c[0],s?c[1]-s.top-s.bottom:c[1]];let g=null;e instanceof Zl?g=e:e.viewpoint?g=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(g=e.target);let b=null;g&&g.targetGeometry?b=g.targetGeometry:e instanceof vi?b=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(b=await bv(e.center,t,i)||await bv(e.extent,t,i)||await bv(e.target,t,i)||await bv(e,t,i)),!b&&o&&o.targetGeometry?b=o.targetGeometry:!b&&t.extent&&(b=t.extent),i||(i=PZ(t.spatialReference||t.extent||b)),Rd()||Hi(b.spatialReference,i)||uu(b,i)||await Nd();const S=PE(b.center?b.center:b,i);let E=0;if(g&&U(g.targetGeometry)&&g.targetGeometry.type==="point")E=g.scale;else if("scale"in e&&e.scale)E=e.scale;else if("zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs)E=r.zoomToScale(e.zoom);else if(Array.isArray(b)||b.type==="point"||b.type==="extent"&&b.width===0&&b.height===0){const N=PE(t.extent,i);E=U(N)?nb(N,u):t.extent?nb(t.extent,u):o.scale}else E=nb(PE(b.extent,i),u);const A=z4e(e);A&&(A.min&&A.min>E?E=A.min:A.max&&A.max<E&&(E=A.max));let O=0;g?O=g.rotation:e.hasOwnProperty("rotation")?O=e.rotation:o&&(O=o.rotation);let L=new Zl({targetGeometry:S,scale:E,rotation:O});return r&&(L=r.fit(L),r.constrainByGeometry(L),r.rotationEnabled||(L.rotation=O)),L}function bl(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function G4e(e,t,i){return i?ds(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):Og(e,t,.5)}const U4e=function(){const e=Yt();return function(t,i,r){const s=i.targetGeometry;t8(e,s);const o=.5*Pg(i);return t.xmin=e[0]-o*r[0],t.ymin=e[1]-o*r[1],t.xmax=e[0]+o*r[0],t.ymax=e[1]+o*r[1],t.spatialReference=s.spatialReference,t}}();function q4e(e,t,i,r,s){return t$(e,t,i.center),e.scale=nb(i,r),s&&s.constraints&&s.constraints.constrain(e),e}function B4e(e,t,i,r){return s8(e,t,i,r),Kk(e,e)}const LZ=function(){const e=Yt();return function(t,i,r){return w9(t,Y4e(t,i),G4e(e,i,r))}}(),H4e=function(){const e=Cd(),t=Yt();return function(i,r,s,o){const c=Pg(r),u=i8(r);return ds(t,c,c),GK(e,t),e_(e,e,u),Hy(e,e,LZ(t,s,o)),Hy(e,e,[0,o.top-o.bottom]),ds(i,e[4],e[5])}}();function Pg(e){return e.scale*W4e(e.targetGeometry)}function W4e(e){return U(e)&&Sr(e.spatialReference)?1/(FZ(e.spatialReference)*OZ*kZ):1}function i8(e){return e7(e.rotation)||0}function J4e(e){return Sr(e)?FZ(e)*OZ*kZ:1}function Y4e(e,t){return Og(e,t,.5)}const r8=function(){const e=Yt(),t=Yt(),i=Yt();return function(r,s,o,c,u,g){return SZ(e,s),Og(t,o,.5*g),ds(i,1/c*g,-1/c*g),Zk(r,t),u&&e_(r,r,u),y9(r,r,i),Hy(r,r,e),r}}(),s8=function(){const e=Yt();return function(t,i,r,s){const o=Pg(i),c=i8(i);return t8(e,i.targetGeometry),r8(t,e,r,o,c,s)}}(),K4e=function(){const e=Yt();return function(t,i,r,s){const o=Pg(i);return t8(e,i.targetGeometry),r8(t,e,r,o,0,s)}}();function Z4e(e){const t=ua(e);return t?t.valid[1]-t.valid[0]:0}function X4e(e,t){return Math.round(Z4e(e)/t)}const Q4e=function(){const e=Yt(),t=Yt(),i=[0,0,0];return function(r,s,o){jr(e,r,s),e$(e,e),jr(t,r,o),e$(t,t),IZ(i,e,t);let c=Math.acos(Wd(e,t)/(Wy(e)*Wy(t)))*j4e;return i[2]<0&&(c=-c),isNaN(c)&&(c=0),c}}(),eMe=function(){const e=Yt();return function(t,i,r,s){const o=t.targetGeometry;return bl(t,i),H4e(e,i,r,s),o.x+=e[0],o.y+=e[1],t}}(),t$=function(e,t,i){bl(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},tMe=function(){const e=Yt();return function(t,i,r,s,o){o||(o="center"),w9(e,r,s),Og(e,e,.5);const c=e[0],u=e[1];switch(o){case"center":ds(e,0,0);break;case"left":ds(e,-c,0);break;case"top":ds(e,0,u);break;case"right":ds(e,c,0);break;case"bottom":ds(e,0,-u);break;case"top-left":ds(e,-c,u);break;case"bottom-left":ds(e,-c,-u);break;case"top-right":ds(e,c,u);break;case"bottom-right":ds(e,c,-u)}return _9(t,i,e),t}}();function Zze(e,t,i){return bl(e,t),e.rotation+=i,e}function iMe(e,t,i){return bl(e,t),e.rotation=i,e}const rMe=function(){const e=Yt();return function(t,i,r,s,o){return bl(t,i),isNaN(r)||r===0||(NZ(e,s,i,o),t.scale=i.scale*r,DZ(e,e,t,o),_9(t,t,ds(e,e[0]-s[0],s[1]-e[1]))),t}}();function fD(e,t,i){return bl(e,t),e.scale=i,e}const RZ=function(){const e=Yt();return function(t,i,r,s,o,c){return bl(t,i),isNaN(r)||r===0||(NZ(e,o,i,c),t.scale=i.scale*r,t.rotation+=s,DZ(e,e,t,c),_9(t,t,ds(e,e[0]-o[0],o[1]-e[1]))),t}}(),Xze=function(){const e=Yt(),t=Yt();return function(i,r,s,o,c,u,g){return LZ(t,u,g),e8(e,c,t),o?RZ(i,r,s,o,e,u):rMe(i,r,s,e,u)}}(),NZ=function(){const e=Cd();return function(t,i,r,s){return Yl(t,i,B4e(e,r,s,1))}}(),DZ=function(){const e=Cd();return function(t,i,r,s){return Yl(t,i,s8(e,r,s,1))}}(),_9=function(){const e=Yt(),t=Cd();return function(i,r,s){bl(i,r);const o=Pg(r),c=i.targetGeometry;return VK(t,i8(r)),y9(t,t,t_(o,o)),Yl(e,s,t),c.x+=e[0],c.y+=e[1],i}}();class sMe{constructor(t,i,r,s){const o=t.targetGeometry,c=i.targetGeometry;s?typeof s=="string"&&(s=a4e(s)||ia.ease):s=ia.ease,this.easing=s,this.duration=r,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=c.x,this.tCenterY=c.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const r=this.easing(i);let s,o,c,u;i>=1?(s=this.tCenterX,o=this.tCenterY,c=this.tRotation,u=this.tScale):(s=this.sCenterX+r*this.dCenterX,o=this.sCenterY+r*this.dCenterY,c=this.sRotation+r*this.dRotation,u=this.sScale+r*this.dScale),t.targetGeometry.x=s,t.targetGeometry.y=o,t.scale=u,t.rotation=c}}let Wu=class extends Re{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=ia.ease,this.view=null,this.viewpoint=new Zl({targetGeometry:new pt,scale:0,rotation:0}),this._updateTask=Ay({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=Ti(this._updateTask)}animate(e,t,i){this.stop();const r=this.viewpoint;bl(r,t),this.transition=new sMe(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const s=()=>{var o,c;this.animation===e&&this._updateTask&&(e.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(c=this.view)!=null&&c.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new QA({target:e.clone()}),r=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var i,r;const t=this.animation;if(t&&t.state!==QA.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const s=this.transition,o=(performance.now()-this._startTime)/s.duration,c=o>=1;s.applyRatio(this.viewpoint,o),c&&((i=this.animation)==null||i.finish())}(r=this.view)!=null&&r.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};v([_()],Wu.prototype,"animation",void 0),v([_()],Wu.prototype,"duration",void 0),v([_()],Wu.prototype,"transition",void 0),v([_()],Wu.prototype,"easing",void 0),v([_()],Wu.prototype,"view",void 0),v([_()],Wu.prototype,"viewpoint",void 0),Wu=v([K("esri.views.2d.AnimationManager")],Wu);const nMe=Wu;class oMe{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var u;this._updateRequested=!1;const{basemapView:i,graphicsView:r,labelManager:s,layerViews:o,state:{id:c}}=this.view;i==null||i.baseLayerViews.forEach(this._updateLayerView,this),o.forEach(this._updateLayerView,this),i==null||i.referenceLayerViews.forEach(this._updateLayerView,this),U(s)&&(s.lastUpdateId!==c&&(s.viewChange(),s.lastUpdateId=c),s.updateRequested&&s.processUpdate(this._updateParameters)),U(r)&&(r.lastUpdateId!==c&&(r.viewChange(),r.lastUpdateId=c),r.updateRequested&&r.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((u=this._frameTaskHandle)==null||u.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ge(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Ay(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function yr(){return Promise.all([pe(()=>import("./webglDeps.82e33e6e.js"),["assets/webglDeps.82e33e6e.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/ProgramTemplate.058b26d9.js","assets/programUtils.10146243.js","assets/NestedMap.2ac03b78.js"]),pe(()=>import("./mapViewDeps.33032dd5.js"),["assets/mapViewDeps.33032dd5.js","assets/CIMResourceManager.06b6abfa.js","assets/Rasterizer.f4189955.js","assets/_commonjsHelpers.4421ccc9.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/enums.9a5c29c3.js","assets/alignmentUtils.ba8835fe.js","assets/definitions.1d569ae6.js","assets/number.dcd3e86c.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/rasterizingUtils.35b0a2ca.js","assets/imageutils.2b310abc.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/BufferPool.2da87f69.js","assets/color.18cd4954.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/WGLContainer.53e4a52c.js","assets/VertexArrayObject.ad007c8f.js","assets/vec4f32.c3d64d30.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/enums.7f1ae3cd.js","assets/MagnifierPrograms.4bede4dd.js","assets/Matcher.19c09547.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/CircularArray.e19cffa8.js","assets/webgl-debug.bb689b12.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/programUtils.10146243.js","assets/NestedMap.2ac03b78.js","assets/RenderingContext.c1f30f62.js","assets/OrderIndependentTransparency.43c6e481.js","assets/basicInterfaces.f8f3b23b.js","assets/doublePrecisionUtils.d6c628ce.js","assets/imageUtils.da66a66b.js","assets/GraphicsView2D.9477d269.js","assets/normalizeUtilsSync.95f750ca.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/GraphicContainer.b56922f6.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/TileContainer.39dd4e2d.js","assets/vec3f32.4d8dc001.js","assets/requestImageUtils.828b299e.js"])])}const u1=()=>yr().then(()=>pe(()=>import("./TileLayerView2D.827e63c8.js"),["assets/TileLayerView2D.827e63c8.js","assets/Rasterizer.f4189955.js","assets/_commonjsHelpers.4421ccc9.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/enums.9a5c29c3.js","assets/alignmentUtils.ba8835fe.js","assets/definitions.1d569ae6.js","assets/number.dcd3e86c.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/rasterizingUtils.35b0a2ca.js","assets/EffectView.ab0cb7da.js","assets/Container.f0dd2697.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/BufferPool.2da87f69.js","assets/color.18cd4954.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/WGLContainer.53e4a52c.js","assets/VertexArrayObject.ad007c8f.js","assets/vec4f32.c3d64d30.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/enums.7f1ae3cd.js","assets/MagnifierPrograms.4bede4dd.js","assets/imageutils.2b310abc.js","assets/Matcher.19c09547.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/CircularArray.e19cffa8.js","assets/webgl-debug.bb689b12.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/OrderIndependentTransparency.43c6e481.js","assets/basicInterfaces.f8f3b23b.js","assets/GraphicsView2D.9477d269.js","assets/normalizeUtilsSync.95f750ca.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/vec3f32.4d8dc001.js","assets/imageUtils.b6567b42.js","assets/BitmapTileContainer.576c494b.js","assets/Bitmap.a6f40812.js","assets/TileContainer.39dd4e2d.js","assets/LayerView2D.faad288b.js","assets/HighlightGraphicContainer.006af201.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js","assets/MapServiceLayerViewHelper.e9327185.js","assets/scaleUtils.c6c8857b.js","assets/floorFilterUtils.4de71259.js","assets/sublayerUtils.81ed8bc5.js","assets/popupUtils.46d32bd9.js"])),D0=()=>yr().then(()=>pe(()=>import("./FeatureLayerView2D.bbaa0084.js"),["assets/FeatureLayerView2D.bbaa0084.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/schemaUtils.1fd0b466.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/utils.e5643e7e.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/visualVariablesUtils.fc657d78.js","assets/createSymbolSchema.0873edf1.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/ExpandedCIM.31fce9f6.js","assets/util.c874f147.js","assets/floorFilterUtils.4de71259.js","assets/popupUtils.46d32bd9.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),mD={"base-dynamic":()=>yr().then(()=>pe(()=>import("./BaseDynamicLayerView2D.3a80a5c5.js"),["assets/BaseDynamicLayerView2D.3a80a5c5.js","assets/BitmapContainer.840dd63e.js","assets/WGLContainer.53e4a52c.js","assets/definitions.1d569ae6.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/ExportStrategy.94652a2d.js","assets/Bitmap.a6f40812.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),"base-tile":u1,"bing-maps":u1,csv:D0,"geo-rss":()=>yr().then(()=>pe(()=>import("./GeoRSSLayerView2D.b4b5aa6f.js"),["assets/GeoRSSLayerView2D.b4b5aa6f.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/GraphicContainer.b56922f6.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/VertexArrayObject.ad007c8f.js","assets/TileContainer.39dd4e2d.js","assets/WGLContainer.53e4a52c.js","assets/vec4f32.c3d64d30.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/vec3f32.4d8dc001.js","assets/GraphicsView2D.9477d269.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/normalizeUtilsSync.95f750ca.js","assets/Matcher.19c09547.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/LayerView.cc5af741.js"])),feature:D0,geojson:D0,graphics:()=>yr().then(()=>pe(()=>import("./GraphicsLayerView2D.62f4409c.js"),["assets/GraphicsLayerView2D.62f4409c.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/GraphicContainer.b56922f6.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/VertexArrayObject.ad007c8f.js","assets/TileContainer.39dd4e2d.js","assets/WGLContainer.53e4a52c.js","assets/vec4f32.c3d64d30.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/vec3f32.4d8dc001.js","assets/GraphicsView2D.9477d269.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/normalizeUtilsSync.95f750ca.js","assets/Matcher.19c09547.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/LayerView.cc5af741.js"])),group:()=>yr().then(()=>pe(()=>import("./GroupLayerView2D.fd4c90ab.js"),["assets/GroupLayerView2D.fd4c90ab.js","assets/GroupContainer.9c96badb.js","assets/WGLContainer.53e4a52c.js","assets/definitions.1d569ae6.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/LayerView.cc5af741.js"])),imagery:()=>yr().then(()=>pe(()=>import("./ImageryLayerView2D.c6b25ba0.js"),["assets/ImageryLayerView2D.c6b25ba0.js","assets/RasterVFDisplayObject.bd2ef59b.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/dataUtils.4f32230d.js","assets/pixelRangeUtils.eec66021.js","assets/WGLContainer.53e4a52c.js","assets/definitions.1d569ae6.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/GraphicsView2D.9477d269.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/normalizeUtilsSync.95f750ca.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/Matcher.19c09547.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/HighlightGraphicContainer.006af201.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/TileContainer.39dd4e2d.js","assets/vec3f32.4d8dc001.js","assets/BitmapContainer.840dd63e.js","assets/Bitmap.a6f40812.js","assets/ExportStrategy.94652a2d.js","assets/rasterProjectionHelper.991a34b5.js","assets/popupUtils.46d32bd9.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),"imagery-tile":()=>yr().then(()=>pe(()=>import("./ImageryTileLayerView2D.c0f7ba76.js"),["assets/ImageryTileLayerView2D.c0f7ba76.js","assets/multidimensionalUtils.4513f586.js","assets/RasterVFDisplayObject.bd2ef59b.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/dataUtils.4f32230d.js","assets/pixelRangeUtils.eec66021.js","assets/WGLContainer.53e4a52c.js","assets/definitions.1d569ae6.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/rasterUtils.9e1c402f.js","assets/TiledDisplayObject.2607ae61.js","assets/TileContainer.39dd4e2d.js","assets/RawBlockCache.adb6f79d.js","assets/rasterProjectionHelper.991a34b5.js","assets/util.c874f147.js","assets/popupUtils.46d32bd9.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),kml:()=>yr().then(()=>pe(()=>import("./KMLLayerView2D.2a40e519.js"),["assets/KMLLayerView2D.2a40e519.js","assets/kmlUtils.23083c73.js","assets/Bitmap.a6f40812.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/BitmapContainer.840dd63e.js","assets/WGLContainer.53e4a52c.js","assets/VertexArrayObject.ad007c8f.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/GraphicContainer.b56922f6.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/TileContainer.39dd4e2d.js","assets/vec3f32.4d8dc001.js","assets/GraphicsView2D.9477d269.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/normalizeUtilsSync.95f750ca.js","assets/Matcher.19c09547.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/LayerView.cc5af741.js","assets/rasterProjectionHelper.991a34b5.js","assets/RenderingContext.c1f30f62.js","assets/programUtils.10146243.js","assets/NestedMap.2ac03b78.js","assets/OrderIndependentTransparency.43c6e481.js","assets/basicInterfaces.f8f3b23b.js","assets/doublePrecisionUtils.d6c628ce.js","assets/webgl-debug.bb689b12.js","assets/rasterUtils.9e1c402f.js"])),"knowledge-graph":()=>yr().then(()=>pe(()=>import("./KnowledgeGraphLayerView2D.8e3cec9c.js"),["assets/KnowledgeGraphLayerView2D.8e3cec9c.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/LayerView.cc5af741.js"])),"link-chart":()=>yr().then(()=>pe(()=>import("./KnowledgeGraphLayerView2D.8e3cec9c.js"),["assets/KnowledgeGraphLayerView2D.8e3cec9c.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/LayerView.cc5af741.js"])),"knowledge-graph-sublayer":D0,"map-image":()=>yr().then(()=>pe(()=>import("./MapImageLayerView2D.e2bdf8e9.js"),["assets/MapImageLayerView2D.e2bdf8e9.js","assets/BitmapContainer.840dd63e.js","assets/WGLContainer.53e4a52c.js","assets/definitions.1d569ae6.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/GraphicsView2D.9477d269.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/normalizeUtilsSync.95f750ca.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/Matcher.19c09547.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/HighlightGraphicContainer.006af201.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/TileContainer.39dd4e2d.js","assets/vec3f32.4d8dc001.js","assets/ExportStrategy.94652a2d.js","assets/Bitmap.a6f40812.js","assets/LayerView.cc5af741.js","assets/ExportImageParameters.351e008e.js","assets/floorFilterUtils.4de71259.js","assets/sublayerUtils.81ed8bc5.js","assets/RefreshableLayerView.d7e6fba9.js","assets/MapServiceLayerViewHelper.e9327185.js","assets/scaleUtils.c6c8857b.js","assets/popupUtils.46d32bd9.js"])),"map-notes":()=>yr().then(()=>pe(()=>import("./MapNotesLayerView2D.5c08a7be.js"),["assets/MapNotesLayerView2D.5c08a7be.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/GroupContainer.9c96badb.js","assets/WGLContainer.53e4a52c.js","assets/VertexArrayObject.ad007c8f.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/GraphicContainer.b56922f6.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/TileContainer.39dd4e2d.js","assets/vec3f32.4d8dc001.js","assets/GraphicsView2D.9477d269.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/normalizeUtilsSync.95f750ca.js","assets/Matcher.19c09547.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/LayerView.cc5af741.js"])),media:()=>yr().then(()=>pe(()=>import("./MediaLayerView2D.7549a3c3.js"),["assets/MediaLayerView2D.7549a3c3.js","assets/perspectiveUtils.d572d5f6.js","assets/normalizeUtilsSync.95f750ca.js","assets/mat3f64.9180efcb.js","assets/Rasterizer.f4189955.js","assets/_commonjsHelpers.4421ccc9.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/enums.9a5c29c3.js","assets/alignmentUtils.ba8835fe.js","assets/definitions.1d569ae6.js","assets/number.dcd3e86c.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/rasterizingUtils.35b0a2ca.js","assets/EffectView.ab0cb7da.js","assets/Container.f0dd2697.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/BufferPool.2da87f69.js","assets/color.18cd4954.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/WGLContainer.53e4a52c.js","assets/VertexArrayObject.ad007c8f.js","assets/vec4f32.c3d64d30.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/enums.7f1ae3cd.js","assets/MagnifierPrograms.4bede4dd.js","assets/imageutils.2b310abc.js","assets/Matcher.19c09547.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/CircularArray.e19cffa8.js","assets/webgl-debug.bb689b12.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/OrderIndependentTransparency.43c6e481.js","assets/basicInterfaces.f8f3b23b.js","assets/GraphicsView2D.9477d269.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/vec3f32.4d8dc001.js","assets/LayerView2D.faad288b.js","assets/LayerView.cc5af741.js"])),"ogc-feature":()=>yr().then(()=>pe(()=>import("./OGCFeatureLayerView2D.09d96ded.js"),["assets/OGCFeatureLayerView2D.09d96ded.js","assets/FeatureLayerView2D.bbaa0084.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/schemaUtils.1fd0b466.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/utils.e5643e7e.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/visualVariablesUtils.fc657d78.js","assets/createSymbolSchema.0873edf1.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/ExpandedCIM.31fce9f6.js","assets/util.c874f147.js","assets/floorFilterUtils.4de71259.js","assets/popupUtils.46d32bd9.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),"open-street-map":u1,"oriented-imagery":D0,route:()=>yr().then(()=>pe(()=>import("./RouteLayerView2D.3f14dbd2.js"),["assets/RouteLayerView2D.3f14dbd2.js","assets/Stop.8d318e39.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/GraphicContainer.b56922f6.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/VertexArrayObject.ad007c8f.js","assets/TileContainer.39dd4e2d.js","assets/WGLContainer.53e4a52c.js","assets/vec4f32.c3d64d30.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/vec3f32.4d8dc001.js","assets/GraphicsView2D.9477d269.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/normalizeUtilsSync.95f750ca.js","assets/Matcher.19c09547.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/LayerView.cc5af741.js"])),stream:()=>yr().then(()=>pe(()=>import("./StreamLayerView2D.7d4b6bd9.js"),["assets/StreamLayerView2D.7d4b6bd9.js","assets/FeatureLayerView2D.bbaa0084.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/schemaUtils.1fd0b466.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/utils.e5643e7e.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/visualVariablesUtils.fc657d78.js","assets/createSymbolSchema.0873edf1.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/ExpandedCIM.31fce9f6.js","assets/util.c874f147.js","assets/floorFilterUtils.4de71259.js","assets/popupUtils.46d32bd9.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),"subtype-group":()=>yr().then(()=>pe(()=>import("./SubtypeGroupLayerView2D.c65efb95.js"),["assets/SubtypeGroupLayerView2D.c65efb95.js","assets/FeatureLayerView2D.bbaa0084.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/LayerView2D.faad288b.js","assets/Container.f0dd2697.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/schemaUtils.1fd0b466.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/utils.e5643e7e.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/visualVariablesUtils.fc657d78.js","assets/createSymbolSchema.0873edf1.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/ExpandedCIM.31fce9f6.js","assets/util.c874f147.js","assets/floorFilterUtils.4de71259.js","assets/popupUtils.46d32bd9.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),tile:u1,"vector-tile":()=>yr().then(()=>pe(()=>import("./VectorTileLayerView2D.d93fa553.js"),["assets/VectorTileLayerView2D.d93fa553.js","assets/enums.7f1ae3cd.js","assets/Rect.e8e4d18d.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/rasterizingUtils.35b0a2ca.js","assets/floatRGBA.7b501bd7.js","assets/VertexArrayObject.ad007c8f.js","assets/config.86ceb802.js","assets/TiledDisplayObject.2607ae61.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/StyleDefinition.dc47b5d4.js","assets/enums.9a5c29c3.js","assets/color.18cd4954.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/number.dcd3e86c.js","assets/TileContainer.39dd4e2d.js","assets/WGLContainer.53e4a52c.js","assets/vec4f32.c3d64d30.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/StyleRepository.f88abb19.js","assets/GeometryUtils.6fd53e6d.js","assets/LayerView2D.faad288b.js","assets/LayerView.cc5af741.js"])),wcs:()=>yr().then(()=>pe(()=>import("./ImageryTileLayerView2D.c0f7ba76.js"),["assets/ImageryTileLayerView2D.c0f7ba76.js","assets/multidimensionalUtils.4513f586.js","assets/RasterVFDisplayObject.bd2ef59b.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/dataUtils.4f32230d.js","assets/pixelRangeUtils.eec66021.js","assets/WGLContainer.53e4a52c.js","assets/definitions.1d569ae6.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/rasterUtils.9e1c402f.js","assets/TiledDisplayObject.2607ae61.js","assets/TileContainer.39dd4e2d.js","assets/RawBlockCache.adb6f79d.js","assets/rasterProjectionHelper.991a34b5.js","assets/util.c874f147.js","assets/popupUtils.46d32bd9.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),"web-tile":u1,wfs:D0,wms:()=>yr().then(()=>pe(()=>import("./WMSLayerView2D.8429d60b.js"),["assets/WMSLayerView2D.8429d60b.js","assets/BitmapContainer.840dd63e.js","assets/WGLContainer.53e4a52c.js","assets/definitions.1d569ae6.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/earcut.a219bf29.js","assets/LayerView2D.faad288b.js","assets/ExportStrategy.94652a2d.js","assets/Bitmap.a6f40812.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js","assets/ExportWMSImageParameters.6db0f6a7.js"])),wmts:()=>yr().then(()=>pe(()=>import("./WMTSLayerView2D.695b53e3.js"),["assets/WMTSLayerView2D.695b53e3.js","assets/imageUtils.b6567b42.js","assets/BitmapTileContainer.576c494b.js","assets/Bitmap.a6f40812.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/definitions.1d569ae6.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/TiledDisplayObject.2607ae61.js","assets/WGLContainer.53e4a52c.js","assets/VertexArrayObject.ad007c8f.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/vec4f32.c3d64d30.js","assets/color.18cd4954.js","assets/enums.9a5c29c3.js","assets/number.dcd3e86c.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/alignmentUtils.ba8835fe.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/TileContainer.39dd4e2d.js","assets/LayerView2D.faad288b.js","assets/LayerView.cc5af741.js","assets/RefreshableLayerView.d7e6fba9.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function aMe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new de(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const yD={hasLayerViewModule:e=>U(mD[e.type]),importLayerView:e=>{const t=mD[e.type];if(ae(t))throw aMe(e);return t(e)}};function lMe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s=Number.POSITIVE_INFINITY,o=0,c=0;const u=[0,0],g=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const b of g)for(let S=0;S<b.length-1;S++){$he(u,r,b,S);const E=M0(r,u);E<s&&(s=E,o=u[0],c=u[1])}return{coordinate:new pt({x:o,y:c,spatialReference:i}),distance:s}}var i$;let _f=i$=class extends u7(Re){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(ae(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return lu(this.geometry,this.spatialReference)}catch(e){return Ie.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(ae(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?f5(this.normalizedGeometry,i):wU(this.normalizedGeometry,i))return e;const{coordinate:r}=lMe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new i$({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};v([_({constructOnly:!0})],_f.prototype,"geometry",void 0),v([_({readOnly:!0})],_f.prototype,"normalizedGeometry",null),v([_({constructOnly:!0})],_f.prototype,"spatialReference",void 0),_f=i$=v([K("esri.views.2d.constraints.GeometryConstraint")],_f);var r$;let wv=r$=class extends u7(Re){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new r$({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};v([_()],wv.prototype,"enabled",void 0),v([_()],wv.prototype,"rotationEnabled",void 0),wv=r$=v([K("esri.views.2d.constraints.RotationConstraint")],wv);const jZ=wv;var s$;let Vn=s$=class extends u7(Re){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:o}=this,c=-1,u=-1,g=!1,b=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(S=>S.clone()),t.sort((S,E)=>E.scale-S.scale),t.forEach((S,E)=>S.level=E);for(const S of t)!g&&i>0&&i>=S.scale&&(c=S.level,g=!0),!b&&r>0&&r>=S.scale&&(u=e?e.level:-1,b=!0),e=S;s===-1&&(s=i===0?0:c),o===-1&&(o=r===0?t.length-1:u),s=Math.max(s,0),s=Math.min(s,t.length-1),o=Math.max(o,0),o=Math.min(o,t.length-1),s>o&&([s,o]=[o,s]),i=t[s].scale,r=t[o].scale,t.splice(0,s),t.splice(o-s+1,t.length),t.forEach((S,E)=>{this._lodByScale[S.scale]=S,this._scales[E]=S.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",o),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,o=t&&t.targetGeometry,c=r!==0&&e.scale<r,u=i!==0&&e.scale>i;if(c||u){const g=u?i:r;if(t&&o){const b=(g-t.scale)/(e.scale-t.scale);s.x=o.x+(s.x-o.x)*b,s.y=o.y+(s.y-o.y)*b}e.scale=g}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new s$({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};v([_({readOnly:!0})],Vn.prototype,"effectiveLODs",void 0),v([_({readOnly:!0})],Vn.prototype,"effectiveMinZoom",void 0),v([_({readOnly:!0})],Vn.prototype,"effectiveMaxZoom",void 0),v([_({readOnly:!0})],Vn.prototype,"effectiveMinScale",void 0),v([_({readOnly:!0})],Vn.prototype,"effectiveMaxScale",void 0),v([_()],Vn.prototype,"lods",void 0),v([_()],Vn.prototype,"minZoom",void 0),v([_()],Vn.prototype,"maxZoom",void 0),v([_()],Vn.prototype,"minScale",void 0),v([_()],Vn.prototype,"maxScale",void 0),v([_()],Vn.prototype,"snapToZoom",void 0),Vn=s$=v([K("esri.views.2d.constraints.ZoomConstraint")],Vn);const zZ=Vn,uMe={base:null,key:"type",typeMap:{extent:vi,polygon:Qn}};let fr=class extends Re{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,t,i;return`${(e=this._zoom)==null?void 0:e.uid}/${(t=this._rotation)==null?void 0:t.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _defaultLODs(){var i,r,s;const e=(r=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:r.tileInfo,t=(s=this.view)==null?void 0:s.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new _f({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new jZ({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,r=this.maxZoom,s=this.minScale,o=this.maxScale,c=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===r&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===c?e:new zZ({lods:t,minZoom:i,maxZoom:r,minScale:s,maxScale:o,snapToZoom:c})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};v([_({readOnly:!0})],fr.prototype,"effectiveLODs",null),v([_({readOnly:!0})],fr.prototype,"effectiveMinScale",null),v([_({readOnly:!0})],fr.prototype,"effectiveMaxScale",null),v([_({readOnly:!0})],fr.prototype,"effectiveMinZoom",null),v([_({readOnly:!0})],fr.prototype,"effectiveMaxZoom",null),v([_({types:uMe,value:null})],fr.prototype,"geometry",null),v([_({type:[Kh]})],fr.prototype,"lods",void 0),v([_()],fr.prototype,"minScale",void 0),v([_()],fr.prototype,"maxScale",void 0),v([_()],fr.prototype,"minZoom",void 0),v([_()],fr.prototype,"maxZoom",void 0),v([_()],fr.prototype,"rotationEnabled",void 0),v([_()],fr.prototype,"snapToZoom",void 0),v([_()],fr.prototype,"view",void 0),v([_({readOnly:!0})],fr.prototype,"version",null),v([_()],fr.prototype,"_defaultLODs",null),v([_({type:_f})],fr.prototype,"_geometry",null),v([_({type:jZ})],fr.prototype,"_rotation",null),v([_({readOnly:!0,type:zZ})],fr.prototype,"_zoom",null),fr=v([K("esri.views.2d.MapViewConstraints")],fr);const VZ=fr;function cMe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function hMe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function GZ(e,t,i,r,s,o,c,u,g,b){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=o,e[5]=c,e[6]=u,e[7]=g,e[8]=b,e}function UZ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function dMe(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function pMe(e,t){const i=t[0],r=t[1],s=t[2],o=t[3],c=t[4],u=t[5],g=t[6],b=t[7],S=t[8],E=S*c-u*b,A=-S*o+u*g,O=b*o-c*g;let L=i*E+r*A+s*O;return L?(L=1/L,e[0]=E*L,e[1]=(-S*r+s*b)*L,e[2]=(u*r-s*c)*L,e[3]=A*L,e[4]=(S*i-s*g)*L,e[5]=(-u*i+s*o)*L,e[6]=O*L,e[7]=(-b*i+r*g)*L,e[8]=(c*i-r*o)*L,e):null}function fMe(e,t){const i=t[0],r=t[1],s=t[2],o=t[3],c=t[4],u=t[5],g=t[6],b=t[7],S=t[8];return e[0]=c*S-u*b,e[1]=s*b-r*S,e[2]=r*u-s*c,e[3]=u*g-o*S,e[4]=i*S-s*g,e[5]=s*o-i*u,e[6]=o*b-c*g,e[7]=r*g-i*b,e[8]=i*c-r*o,e}function mMe(e){const t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],c=e[5],u=e[6],g=e[7],b=e[8];return t*(b*o-c*g)+i*(-b*s+c*u)+r*(g*s-o*u)}function n8(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],g=t[5],b=t[6],S=t[7],E=t[8],A=i[0],O=i[1],L=i[2],N=i[3],z=i[4],q=i[5],Z=i[6],ee=i[7],ie=i[8];return e[0]=A*r+O*c+L*b,e[1]=A*s+O*u+L*S,e[2]=A*o+O*g+L*E,e[3]=N*r+z*c+q*b,e[4]=N*s+z*u+q*S,e[5]=N*o+z*g+q*E,e[6]=Z*r+ee*c+ie*b,e[7]=Z*s+ee*u+ie*S,e[8]=Z*o+ee*g+ie*E,e}function n$(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],g=t[5],b=t[6],S=t[7],E=t[8],A=i[0],O=i[1];return e[0]=r,e[1]=s,e[2]=o,e[3]=c,e[4]=u,e[5]=g,e[6]=A*r+O*c+b,e[7]=A*s+O*u+S,e[8]=A*o+O*g+E,e}function qZ(e,t,i){const r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],g=t[5],b=t[6],S=t[7],E=t[8],A=Math.sin(i),O=Math.cos(i);return e[0]=O*r+A*c,e[1]=O*s+A*u,e[2]=O*o+A*g,e[3]=O*c-A*r,e[4]=O*u-A*s,e[5]=O*g-A*o,e[6]=b,e[7]=S,e[8]=E,e}function yMe(e,t,i){const r=i[0],s=i[1],o=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=o*t[6],e[7]=o*t[7],e[8]=o*t[8],e}function gMe(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function vMe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function bMe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function wMe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function _Me(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function xMe(e,t){const i=t[0],r=t[1],s=t[2],o=t[3],c=i+i,u=r+r,g=s+s,b=i*c,S=r*c,E=r*u,A=s*c,O=s*u,L=s*g,N=o*c,z=o*u,q=o*g;return e[0]=1-E-L,e[3]=S-q,e[6]=A+z,e[1]=S+q,e[4]=1-b-L,e[7]=O-N,e[2]=A-z,e[5]=O+N,e[8]=1-b-E,e}function SMe(e,t){const i=t[0],r=t[1],s=t[2],o=t[4],c=t[5],u=t[6],g=t[8],b=t[9],S=t[10],E=S*c-u*b,A=-S*o+u*g,O=b*o-c*g,L=i*E+r*A+s*O;if(!L)return null;const N=1/L;return e[0]=E*N,e[1]=(-S*r+s*b)*N,e[2]=(u*r-s*c)*N,e[3]=A*N,e[4]=(S*i-s*g)*N,e[5]=(-u*i+s*o)*N,e[6]=O*N,e[7]=(-b*i+r*g)*N,e[8]=(c*i-r*o)*N,e}function IMe(e,t){const i=t[0],r=t[1],s=t[2],o=t[3],c=t[4],u=t[5],g=t[6],b=t[7],S=t[8],E=t[9],A=t[10],O=t[11],L=t[12],N=t[13],z=t[14],q=t[15],Z=i*u-r*c,ee=i*g-s*c,ie=i*b-o*c,ne=r*g-s*u,oe=r*b-o*u,me=s*b-o*g,fe=S*N-E*L,Ce=S*z-A*L,_e=S*q-O*L,Ae=E*z-A*N,Oe=E*q-O*N,je=A*q-O*z;let De=Z*je-ee*Oe+ie*Ae+ne*_e-oe*Ce+me*fe;return De?(De=1/De,e[0]=(u*je-g*Oe+b*Ae)*De,e[1]=(g*_e-c*je-b*Ce)*De,e[2]=(c*Oe-u*_e+b*fe)*De,e[3]=(s*Oe-r*je-o*Ae)*De,e[4]=(i*je-s*_e+o*Ce)*De,e[5]=(r*_e-i*Oe-o*fe)*De,e[6]=(N*me-z*oe+q*ne)*De,e[7]=(z*ie-L*me-q*ee)*De,e[8]=(L*oe-N*ie+q*Z)*De,e):null}function EMe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function MMe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function TMe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function CMe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function BZ(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function AMe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function $Me(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function kMe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function OMe(e,t){const i=e[0],r=e[1],s=e[2],o=e[3],c=e[4],u=e[5],g=e[6],b=e[7],S=e[8],E=t[0],A=t[1],O=t[2],L=t[3],N=t[4],z=t[5],q=t[6],Z=t[7],ee=t[8],ie=Ro();return Math.abs(i-E)<=ie*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(r-A)<=ie*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(s-O)<=ie*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(o-L)<=ie*Math.max(1,Math.abs(o),Math.abs(L))&&Math.abs(c-N)<=ie*Math.max(1,Math.abs(c),Math.abs(N))&&Math.abs(u-z)<=ie*Math.max(1,Math.abs(u),Math.abs(z))&&Math.abs(g-q)<=ie*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(b-Z)<=ie*Math.max(1,Math.abs(b),Math.abs(Z))&&Math.abs(S-ee)<=ie*Math.max(1,Math.abs(S),Math.abs(ee))}function PMe(e){const t=Ro(),i=e[0],r=e[1],s=e[2],o=e[3],c=e[4],u=e[5],g=e[6],b=e[7],S=e[8];return Math.abs(1-(i*i+o*o+g*g))<=t&&Math.abs(1-(r*r+c*c+b*b))<=t&&Math.abs(1-(s*s+u*u+S*S))<=t}const FMe=n8,LMe=BZ;Object.freeze(Object.defineProperty({__proto__:null,add:CMe,adjoint:fMe,copy:hMe,determinant:mMe,equals:OMe,exactEquals:kMe,frob:TMe,fromMat2d:_Me,fromMat4:cMe,fromQuat:xMe,fromRotation:bMe,fromScaling:wMe,fromTranslation:vMe,identity:UZ,invert:pMe,isOrthoNormal:PMe,mul:FMe,multiply:n8,multiplyScalar:AMe,multiplyScalarAndAdd:$Me,normalFromMat4:IMe,normalFromMat4Legacy:SMe,projection:EMe,rotate:qZ,scale:yMe,scaleByVec2:gMe,set:GZ,str:MMe,sub:LMe,subtract:BZ,translate:n$,transpose:dMe},Symbol.toStringTag,{value:"Module"}));function W3(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function RMe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function NMe(e,t,i,r,s,o,c,u,g){const b=new Float32Array(9);return b[0]=e,b[1]=t,b[2]=i,b[3]=r,b[4]=s,b[5]=o,b[6]=c,b[7]=u,b[8]=g,b}function DMe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:RMe,create:W3,createView:DMe,fromValues:NMe},Symbol.toStringTag,{value:"Module"}));function HZ(){return new Float32Array(2)}function jMe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Jy(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function zMe(e,t){return new Float32Array(e,t,2)}function WZ(){return HZ()}function JZ(){return Jy(1,1)}function YZ(){return Jy(1,0)}function KZ(){return Jy(0,1)}const VMe=WZ(),GMe=JZ(),UMe=YZ(),qMe=KZ();Object.freeze(Object.defineProperty({__proto__:null,ONES:GMe,UNIT_X:UMe,UNIT_Y:qMe,ZEROS:VMe,clone:jMe,create:HZ,createView:zMe,fromValues:Jy,ones:JZ,unitX:YZ,unitY:KZ,zeros:WZ},Symbol.toStringTag,{value:"Module"}));function BMe(e){return e instanceof Float32Array&&e.length>=2}function HMe(e){return Array.isArray(e)&&e.length>=2}function FE(e){return BMe(e)||HMe(e)}var o$;const Eu=[0,0];let Oh=o$=class extends $e{constructor(e){super(e),this._viewpoint2D={center:Yt(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new vi,this.id=0,this.inverseTransform=Cd(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Cd(),this.transformNoRotation=Cd(),this.displayMat3=W3(),this.displayViewMat3=W3(),this.viewMat3=W3(),this.viewMat2d=yS(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=bl(i,e.viewpoint),this._set("size",Xb(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new o$({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return FE(t)?Yl(e,t,this.inverseTransform):(Eu[0]=t,Eu[1]=i,Yl(e,Eu,this.inverseTransform))}toScreen(e,t,i){return FE(t)?Yl(e,t,this.transform):(Eu[0]=t,Eu[1]=i,Yl(e,Eu,this.transform))}toScreenNoRotation(e,t,i){return FE(t)?Yl(e,t,this.transformNoRotation):(Eu[0]=t,Eu[1]=i,Yl(e,Eu,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return r8(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,o=this._get("size"),c=new Zl({targetGeometry:new pt(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",c),!o||!t||!i)return;this.resolution=Pg(c),this.rotation=r,this.scale=i,this.spatialReference=t,Xb(this.center,e);const u=o[0]!==0?2/o[0]:0,g=o[1]!==0?-2/o[1]:0;GZ(this.displayMat3,u,0,0,0,g,0,-1,1,1);const b=UZ(this.viewMat3),S=Jy(o[0]/2,o[1]/2),E=Jy(-o[0]/2,-o[1]/2),A=e7(r);n$(b,b,S),qZ(b,b,A),n$(b,b,E),n8(this.displayViewMat3,this.displayMat3,b);const O=Zk(this.viewMat2d,S);return e_(O,O,A),Hy(O,O,E),U4e(this.extent,c,o),s8(this.transform,c,o,s),Kk(this.inverseTransform,this.transform),K4e(this.transformNoRotation,c,o,s),this.worldScreenWidth=X4e(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};v([_({readOnly:!0})],Oh.prototype,"id",void 0),v([_({value:1,json:{write:!0}})],Oh.prototype,"pixelRatio",null),v([_({json:{write:!0}})],Oh.prototype,"size",null),v([_()],Oh.prototype,"spatialReference",void 0),v([_({type:Zl,json:{write:!0}})],Oh.prototype,"viewpoint",null),Oh=o$=v([K("esri.views.2d.ViewState")],Oh);const gD=Oh;var a$,l$;let sc=a$=class extends Re{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new a$({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};v([_()],sc.prototype,"left",void 0),v([_()],sc.prototype,"top",void 0),v([_()],sc.prototype,"right",void 0),v([_()],sc.prototype,"bottom",void 0),sc=a$=v([K("esri.views.2d.PaddedViewState.Padding")],sc);let km=l$=class extends gD{constructor(...e){super(...e),this.paddedViewState=new gD,this._updateContent=(()=>{const t=Yt();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;ds(t,r.left+r.right,r.top+r.bottom),jr(t,i,t),Xb(s.size,t);const o=s.viewpoint;o&&(this.viewpoint=o)}})(),this.addHandles(ge(()=>[this.size,this.padding],()=>this._updateContent(),au)),this.padding=new sc,this.size=[0,0]}set padding(e){this._set("padding",e||new sc)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,eMe(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,r=t.targetGeometry;i.center[0]=r.x,i.center[1]=r.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=r.spatialReference,this._update()}}clone(){return new l$({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};v([_()],km.prototype,"paddedViewState",void 0),v([_({type:sc})],km.prototype,"padding",null),v([_()],km.prototype,"viewpoint",null),km=l$=v([K("esri.views.2d.PaddedViewState")],km);const WMe=km;class JMe{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class ZZ{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new Rx(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&U(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let o=null;i&&(o=To(i,()=>s.abort()));const c=()=>{const S=this._processingItems.get(t);S&&S.controller.abort(),u(),b.reject(Ri())},u=()=>{g.remove(),U(o)&&o.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},g=b6(s.signal,c),b=tu();return this._deferreds.set(t,b),this._controllers.set(t,s),b.promise.then(u,u),this._queue.push(t),this._scheduleNext(),b.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=ug(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(ae(t))return;let i;const r=new AbortController,s=new JMe(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(o){this._processError(s,o)}Lc(i)?(s.promise=i,i.then(o=>this._processResult(s,o),o=>this._processError(s,o))):this._processResult(s,i)}get test(){return{update:t=>this.runTask(t)}}}function YMe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const LE=new Set,u2=[],j0=new Map,vD=[0,0];let ih=class extends Re{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new ZZ({concurrency:e,process:(i,r)=>{const s=this._keyToItem.get(i);return t(s,{signal:r})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue=ti(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const r=this._queue.push(i),s=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(b=>{const S=this._keyToItem.get(b),E=this.tileInfoView.getTileScale(S.key);j0.has(E)||(j0.set(E,[]),i=Math.max(E,i),r=Math.min(E,r)),j0.get(E).push(S.key),LE.add(E)});let s=this.state.scale;j0.has(s)||(YMe(u2,LE),u2.sort((b,S)=>b-S),s=u2.reduce((b,S)=>Math.abs(S-s)<Math.abs(b-s)?S:b,u2[0])),s=Math.min(s,i),s=Math.max(s,r);const o=j0.get(s),c=t.getClosestInfoForScale(s),u=c.getColumnForX(this.state.center[0]),g=c.getRowForY(this.state.center[1]);return o.sort((b,S)=>{const E=c.denormalizeCol(b.col,b.world),A=c.denormalizeCol(S.col,S.world);return Math.sqrt((u-E)*(u-E)+(g-b.row)*(g-b.row))-Math.sqrt((u-A)*(u-A)+(g-S.row)*(g-S.row))}),LE.clear(),j0.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(o=>{const c=this._keyToItem.get(o);t.getTileCoords(vD,c.key);const u=M0(vD,i);u<s&&(s=u,r=c.key)}),r.id}};v([_({constructOnly:!0})],ih.prototype,"concurrency",void 0),v([_({constructOnly:!0})],ih.prototype,"process",void 0),v([_()],ih.prototype,"state",void 0),v([_({constructOnly:!0})],ih.prototype,"strategy",void 0),v([_({constructOnly:!0})],ih.prototype,"tileInfoView",void 0),v([_({readOnly:!0})],ih.prototype,"updating",null),ih=v([K("esri.views.2d.tiling.PagedTileQueue")],ih);class Yn{static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}constructor(t,i,r,s){this.set(t,i,r,s)}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Yn(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[o,c,u,g]=t.split("/");this.level=parseFloat(o),this.row=parseFloat(c),this.col=parseFloat(u),this.world=parseFloat(g)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Yn(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new Yn(t,i,r,s),new Yn(t,i,r+1,s),new Yn(t,i+1,r,s),new Yn(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Yn.pool=new Po(Yn,null,null,25,50);function rh(e,t){return[e,t]}function ap(e,t,i){return e[0]=t,e[1]=i,e}function KMe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const Ca=new Yn("0/0/0/0");class o8{static create(t,i,r=null){const s=ua(t.spatialReference),o=i.origin||rh(t.origin.x,t.origin.y),c=rh(t.size[0]*i.resolution,t.size[1]*i.resolution),u=rh(-1/0,-1/0),g=rh(1/0,1/0),b=rh(1/0,1/0);U(r)&&(ap(u,Math.max(0,Math.floor((r.xmin-o[0])/c[0])),Math.max(0,Math.floor((o[1]-r.ymax)/c[1]))),ap(g,Math.max(0,Math.floor((r.xmax-o[0])/c[0])),Math.max(0,Math.floor((o[1]-r.ymin)/c[1]))),ap(b,g[0]-u[0]+1,g[1]-u[1]+1));const{cols:S,rows:E}=i;let A,O,L,N;return!r&&S&&E&&(ap(u,S[0],E[0]),ap(g,S[1],E[1]),ap(b,S[1]-S[0]+1,E[1]-E[0]+1)),t.isWrappable?(A=rh(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),b[1]),O=rh(Math.floor((s.origin[0]-o[0])/c[0]),u[1]),L=rh(A[0]+O[0]-1,g[1]),N=!0):(O=u,L=g,A=b,N=!1),new o8(i.level,i.resolution,i.scale,o,u,g,b,c,O,L,A,N)}constructor(t,i,r,s,o,c,u,g,b,S,E,A){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=o,this.last=c,this.size=u,this.norm=g,this.worldStart=b,this.worldEnd=S,this.worldSize=E,this.wrap=A}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){Ca.set(i);const s=r?Ca.col:this.denormalizeCol(Ca.col,Ca.world),o=Ca.row;return KMe(t,this.getXForColumn(s),this.getYForRow(o+1),this.getXForColumn(s+1),this.getYForRow(o)),t}getTileCoords(t,i,r=!1){Ca.set(i);const s=r?Ca.col:this.denormalizeCol(Ca.col,Ca.world);return Array.isArray(t)?ap(t,this.getXForColumn(s),this.getYForRow(Ca.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(Ca.row)),t}}class Yy{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:o}=s;if(r.length!==0)for(const{row:c,colFrom:u,colTo:g}of r)for(let b=u;b<=g;b++)t.call(i,o,c,s.normalizeCol(b),s.getWorldForColumn(b))}}Yy.pool=new Po(Yy);class RE{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}}const Ki=new Yn("0/0/0/0");class a8{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[o,c]=i,u=o-r,g=c-s,b=g!==0?u/g:0,S=(Math.ceil(s)-s)*b,E=(Math.floor(s)-s)*b;return new a8(r,Math.floor(s),Math.ceil(c),b,u<0?S:E,u<0?E:S,u<0?o:r,u<0?r:o)}constructor(t,i,r,s,o,c,u,g){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=o,this.rightAdjust=c,this.leftBound=u,this.rightBound=g}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const uo=[[0,0],[0,0],[0,0],[0,0]],ZMe=1e-6;class XMe{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const r=t.lods.slice();r.sort((o,c)=>c.scale-o.scale);const s=this._lodInfos=r.map(o=>o8.create(t,o,i));r.forEach((o,c)=>{this._infoByLevel[o.level]=s[c],this._infoByScale[o.scale]=s[c],this.scales[c]=o.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){Ki.set(i);const s=this._infoByLevel[Ki.level];return s?s.getTileBounds(t,Ki,r):t}getTileCoords(t,i,r=!1){Ki.set(i);const s=this._infoByLevel[Ki.level];return s?s.getTileCoords(t,Ki,r):t}getTileCoverage(t,i=192,r="closest"){const s=r==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=Yy.pool.acquire(s),c=this._wrap;let u,g,b,S=1/0,E=-1/0;const A=o.spans;uo[0][0]=uo[0][1]=uo[1][1]=uo[3][0]=-i,uo[1][0]=uo[2][0]=t.size[0]+i,uo[2][1]=uo[3][1]=t.size[1]+i;for(const z of uo)t.toMap(z,z),z[0]=s.getColumnForX(z[0]),z[1]=s.getRowForY(z[1]);const O=[];let L=3;for(let z=0;z<4;z++){if(uo[z][1]===uo[L][1]){L=z;continue}const q=a8.create(uo[z],uo[L]);S=Math.min(q.ymin,S),E=Math.max(q.ymax,E),O[q.ymin]===void 0&&(O[q.ymin]=[]),O[q.ymin].push(q),L=z}if(S==null||E==null||E-S>100)return null;let N=[];for(u=S;u<E;){O[u]!=null&&(N=N.concat(O[u])),g=1/0,b=-1/0;for(let z=N.length-1;z>=0;z--){const q=N[z];g=Math.min(g,q.getLeftCol()),b=Math.max(b,q.getRightCol())}if(g=Math.floor(g),b=Math.floor(b),u>=s.first[1]&&u<=s.last[1])if(c)if(s.size[0]<s.worldSize[0]){const z=Math.floor(b/s.worldSize[0]);for(let q=Math.floor(g/s.worldSize[0]);q<=z;q++)A.push(new RE(u,Math.max(s.getFirstColumnForWorld(q),g),Math.min(s.getLastColumnForWorld(q),b)))}else A.push(new RE(u,g,b));else g>s.last[0]||b<s.first[0]||(g=Math.max(g,s.first[0]),b=Math.min(b,s.last[0]),A.push(new RE(u,g,b)));u+=1;for(let z=N.length-1;z>=0;z--){const q=N[z];q.ymax>=u?q.incrRow():N.splice(z,1)}}return o}getTileParentId(t){Ki.set(t);const i=this._infoByLevel[Ki.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Ki,this._lodInfos[r],Ki),Ki.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Ki.set(i);const r=this._infoByLevel[Ki.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(Ki,s,Ki);const c=s.denormalizeCol(Ki.col,Ki.world);for(const u of t.spans)if(u.row===Ki.row&&u.colFrom<=c&&u.colTo>=c)return!0}if(s.resolution<r.resolution){const[c,u,g,b]=t.spans.reduce((N,z)=>(N[0]=Math.min(N[0],z.row),N[1]=Math.max(N[1],z.row),N[2]=Math.min(N[2],z.colFrom),N[3]=Math.max(N[3],z.colTo),N),[1/0,-1/0,1/0,-1/0]),S=r.denormalizeCol(Ki.col,Ki.world),E=s.getColumnForX(r.getXForColumn(S)),A=s.getRowForY(r.getYForRow(Ki.row)),O=s.getColumnForX(r.getXForColumn(S+1))-1,L=s.getRowForY(r.getYForRow(Ki.row+1))-1;return!(E>b||O<g||A>u||L<c)}const o=s.denormalizeCol(Ki.col,Ki.world);return t.spans.some(c=>c.row===Ki.row&&c.colFrom<=o&&c.colTo>=o)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=ua(this.tileInfo.spatialReference),o=-r*(s.valid[1]-s.valid[0]);t[0]+=o,t[2]+=o}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+ZMe)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}}function QMe(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const NE=new Set,c2=[],z0=new Map,bD=[0,0];let Ju=class extends Re{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new ZZ({concurrency:e,process:(r,s)=>{const o=this._keyToItem.get(r);return t(o,{signal:s})},peeker:i==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue=ti(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),r=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(r,r),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(b=>{const S=this._keyToItem.get(b),E=this.tileInfoView.getTileScale(S.key);z0.has(E)||(z0.set(E,[]),i=Math.max(E,i),r=Math.min(E,r)),z0.get(E).push(S.key),NE.add(E)});let s=this.state.scale;z0.has(s)||(QMe(c2,NE),c2.sort((b,S)=>b-S),s=c2.reduce((b,S)=>Math.abs(S-s)<Math.abs(b-s)?S:b,c2[0])),s=Math.min(s,i),s=Math.max(s,r);const o=z0.get(s),c=t.getClosestInfoForScale(s),u=c.getColumnForX(this.state.center[0]),g=c.getRowForY(this.state.center[1]);return o.sort((b,S)=>{const E=c.denormalizeCol(b.col,b.world),A=c.denormalizeCol(S.col,S.world);return Math.sqrt((u-E)*(u-E)+(g-b.row)*(g-b.row))-Math.sqrt((u-A)*(u-A)+(g-S.row)*(g-S.row))}),NE.clear(),z0.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(o=>{const c=this._keyToItem.get(o);t.getTileCoords(bD,c.key);const u=M0(bD,i);u<s&&(s=u,r=c.key)}),r.id}};v([_({constructOnly:!0})],Ju.prototype,"concurrency",void 0),v([_({constructOnly:!0})],Ju.prototype,"process",void 0),v([_()],Ju.prototype,"state",void 0),v([_({constructOnly:!0})],Ju.prototype,"strategy",void 0),v([_({constructOnly:!0})],Ju.prototype,"tileInfoView",void 0),v([_({readOnly:!0})],Ju.prototype,"updating",null),Ju=v([K("esri.views.2d.tiling.TileQueue")],Ju);const Qze=Ju;class eTe{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];wD(this._tilePerId,t);for(let o=0;o<s.length;o++)if(s[o].id===t){s.splice(o,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let o=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&o>=0;)o!==t&&(s=this._pruneAroundCenterTile(s,i,r,o)),o--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const o=this._tileKeysPerLevel[s];if(!o||o.length===0)return t;const{size:c,origin:u}=this._tileInfoView.tileInfo,g=r*c[0],b=r*c[1],S=[0,0],E=[0,0];for(o.sort((A,O)=>(S[0]=u.x+g*(A.col+.5),S[1]=u.y-b*(A.row+.5),E[0]=u.x+g*(O.col+.5),E[1]=u.y-b*(O.row+.5),vl(S,i)-vl(E,i)));o.length>0;){const A=o.pop();if(this._removeTile(A.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),wD(this._tilePerId,t)}}function wD(e,t){e.delete(t)}const lp=new Yn(0,0,0,0),zo=new Map,V0=[],h2=[];class eVe{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new eTe(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,s=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(h2.length=0,V0.length=0,zo.clear(),!s)return;const{minScale:o,maxScale:c}=this.tileInfoView.tileInfo,{spans:u,lodInfo:g}=s,{level:b}=g,{scale:S,center:E,resolution:A}=t.state,O=!t.stationary&&S>this._previousScale;if(this._previousScale=S,this.tiles.length=0,!i&&(S>o||S<c))return this.tiles.length=0,zo.clear(),r.forEach(q=>{this.releaseTile(q)}),r.clear(),h2.length=0,V0.length=0,zo.clear(),Yy.pool.release(s),!0;r.forEach(q=>q.visible=!0);let L=0,N=0;if(u.length>0)for(const{row:q,colFrom:Z,colTo:ee}of u)for(let ie=Z;ie<=ee;ie++){L++;const ne=lp.set(b,q,g.normalizeCol(ie),g.getWorldForColumn(ie)).id;if(r.has(ne)){const oe=r.get(ne);oe.isReady?(zo.set(ne,oe),N++):O||this._addParentTile(ne,zo)}else{let oe;if(this._tileCache&&this._tileCache.has(ne)){if(oe=this._tileCache.pop(ne),this.tileIndex.set(ne,oe),oe.isReady){zo.set(ne,oe),N++;continue}}else oe=this.acquireTile(lp),this.tileIndex.set(ne,oe);O||this._addParentTile(ne,zo)}}const z=N===L;r.forEach((q,Z)=>{if(lp.set(Z),zo.has(Z))return;const ee=this.tileInfoView.intersects(s,lp),ie=this.cachePolicy==="purge"?lp.level!==b:lp.level>b;!ee||!O&&z?!ie&&ee||V0.push(Z):q.isReady?ie&&this.cachePolicy==="purge"&&this._hasReadyAncestor(lp,b)?V0.push(Z):h2.push(Z):ie&&V0.push(Z)});for(const q of h2){const Z=r.get(q);Z&&Z.isReady&&zo.set(q,Z)}for(const q of V0){const Z=r.get(q);this._tileCache?this._tileCache.add(Z):this.releaseTile(Z),r.delete(q)}return zo.forEach(q=>this.tiles.push(q)),r.forEach(q=>{zo.has(q.key.id)||(q.visible=!1)}),this._tileCache&&this._tileCache.prune(b,E,A),Yy.pool.release(s),zo.clear(),z}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(r=>{this.releaseTile(r)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=Oc();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const o=Oc();if(this.tileInfoView.getTileBounds(o,s.key,!0),gpe(o,r))return!0}return!1}}function l8(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class _D extends ns{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){l8(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class tTe extends ns{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:o}=i,{view:c}=this,{mapViewNavigation:u}=c;switch(s){case"begin":{const{scale:g}=c;this._startScale=g,this._currentScale=g,this._previousDelta=o,u.begin();break}case"update":{if(this._previousDelta.y===o.y)return;this._previousDelta=o;const g=1.015**o.y,b=this._startScale*g,S=b/this._currentScale;u.setViewpointImmediate(S),this._currentScale=b;break}case"end":{const{constraints:g}=c,{effectiveLODs:b,snapToZoom:S}=g;if(!S||!b)return void u.end();const E=g.snapScale(this._currentScale),A=(o.y>0?Math.max(E,g.snapToPreviousScale(this._startScale)):Math.min(E,g.snapToNextScale(this._startScale)))/this._currentScale;u.zoom(A);break}}}}class x9{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}}class iTe extends ns{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new x9({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&l8(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class rTe extends ns{constructor(t,i,r){super(!0),this._view=t,this.pointerAction=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new x9({start:(o,c)=>{s.rotate.begin(this._view,c.data),c.stopPropagation()},update:(o,c)=>{s.rotate.update(this._view,c.data),c.stopPropagation()},end:(o,c)=>{s.rotate.end(),c.stopPropagation()},condition:(o,c)=>o===1&&l8(c.data,this.pointerAction)}),this.registerIncoming("drag",r,o=>this._dragEventSeparator.handle(o))}}function Aa(e){let t=e*e;return e<0&&(t*=-1),t}function sTe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function nTe(e,t,i){const r=i,s=e.state,o=e.device,c=t.tiltDirection==="forward-down"?1:-1,u=1;return o.deviceType==="standard"?(r.translation[0]=Aa(s.axes[0]),r.translation[1]=Aa(s.axes[1]),r.translation[2]=Aa(s.buttons[7])-Aa(s.buttons[6]),r.heading=Aa(s.axes[2]),r.tilt=Aa(s.axes[3])):o.deviceType==="spacemouse"&&(r.translation[0]=1.2*Aa(s.axes[0]),r.translation[1]=1.2*Aa(s.axes[1]),r.translation[2]=2*-Aa(s.axes[2]),r.heading=1.2*Aa(s.axes[5]),r.tilt=1.2*Aa(s.axes[3])),r.tilt*=c,zU(r.translation,r.translation,u),r}function oTe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class aTe extends ns{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Vr,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ge(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Ay({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},rt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,sTe(this._transformation)):(this._currentDevice=t.data.device,nTe(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(oTe(i))return;const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,o=uTe*s*t;_9(r,r,[i.translation[0]*o,-i.translation[1]*o]);const c=1+i.translation[2]*cTe*t,u=this._view.constraints.rotationEnabled?-i.heading*lTe*t:0,g=this._view.size,b=[g[0]/2,g[1]];RZ(r,r,c,u,b,g);const S=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=S}}const lTe=.06,uTe=.7,cTe=6e-4;class hTe extends ns{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=this._keyMap[t.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class dTe extends ns{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var ey;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(ey||(ey={}));class pTe extends ns{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=ey.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=ey.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:o}=this.view;let c=null;switch(s){case ey.IN:c=o.zoomIn();break;case ey.OUT:c=o.zoomOut();break;default:return}o.begin(),c.then(()=>o.end()),t.stopPropagation()}}const fTe=.6;class mTe extends ns{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:o}=t.data,c=1/fTe**(1/60*o),u=i.zoom(c,[r,s]);u&&(this._canZoom=!1,u.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class yTe extends ns{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new x9({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function xD(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>bTe(i,e.axisThreshold))}:{buttons:[],axes:[]}}function gTe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function vTe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function bTe(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class wTe{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=o=>{this._connectGamepad(o.gamepad)},this._onDisconnectGamepad=o=>{const c=o.gamepad,u=c.index,g=this._inputDevices[u];g&&(this._emitGamepadEvent(c,xD(g),!1),this._inputDevices.splice(u,1),this._latestUpdate.splice(u,1),this._input.gamepad.devices.remove(g),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(this._forEachGamepad(o=>this._connectGamepad(o)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new Qk(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Ay({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(s=>{const o=this._inputDevices[s.index];if(!o)return;const c=this._latestUpdate[s.index],u=xD(o),g=r||vTe(u);c&&(c.timestamp===s.timestamp||!c.active&&g||gTe(c.state,u))||this._emitGamepadEvent(s,u,!g)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let r=0;r<i.length;r++){const s=i[r];this._validate(s)&&t(s)}}_emitGamepadEvent(t,i,r){const s=this._latestUpdate[t.index],o=s&&s.active;if(!o&&!r)return;const c=!o&&r?"start":o&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:c})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const SD=Se("edge"),_Te=Se("chrome"),xTe=Se("ff"),STe=Se("safari"),ID="esri-view-surface",G0={touchNone:`${ID}--touch-none`,touchPan:`${ID}--touch-pan`};class S9{constructor(t,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new wTe(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=ti(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){var i;for(const r in this._active)if(!t||!t.has(r)){const s=this._active[r];this._element.removeEventListener(DE[r],s),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&DE[r]){const s=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(DE[r],s),this._active[r]=s}}),this._gamepadSource.hasEventListeners=(i=t==null?void 0:t.has("gamepad"))!=null?i:!1}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?G0.touchNone:G0.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?G0.touchPan:G0.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(G0.touchNone),this._element.classList.remove(G0.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=dZ(this._element,t);return S9.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const r=yEe(i);r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_handleMouseWheel(t,i){let r=i.deltaY;switch(i.deltaMode){case 0:SD&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}SD?r*=.7:_Te||STe?r*=.6:xTe&&(r*=1.375);const s=100,o=Math.abs(r);o>s&&(r=r/o*200/(1+Math.exp(-.02*(o-s))));const c=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,c)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}S9.test={disableSubpixelCoordinates:!1};const DE={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class ITe extends ns{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function u8(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function ETe(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function MTe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Xs()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[ee,ie]=e,[ne,oe]=[ie.x-ee.x,ie.y-ee.y];return t.radius=Math.sqrt(ne*ne+oe*oe)/2,t.center.x=(ee.x+ie.x)/2,t.center.y=(ee.y+ie.y)/2,t}let i=0,r=0;for(let ee=0;ee<e.length;ee++)i+=e[ee].x,r+=e[ee].y;i/=e.length,r/=e.length;const s=e.map(ee=>ee.x-i),o=e.map(ee=>ee.y-r);let c=0,u=0,g=0,b=0,S=0,E=0,A=0;for(let ee=0;ee<s.length;ee++){const ie=s[ee],ne=o[ee],oe=ie*ie,me=ne*ne;c+=oe,u+=me,g+=ie*ne,b+=oe*ie,S+=me*ne,E+=ie*me,A+=ne*oe}const O=.5*(b+E),L=.5*(S+A),N=c*u-g*g,z=(O*u-L*g)/N,q=(c*L-g*O)/N,Z=Xs(z+i,q+r);return{radius:Math.sqrt(z*z+q*q+(c+u)/e.length),center:Z}}function Qf(e){const{native:t}=e,{pointerId:i,button:r,pointerType:s}=t;return s==="mouse"?`${i}:${r}`:`${s}`}const la={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class TTe extends ns{constructor(t=la.maximumDoubleClickDelay,i=la.maximumDoubleClickDistance,r=la.maximumDoubleTouchDelay,s=la.maximumDoubleTouchDistance,o=ww){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=o,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Ti(t.doubleClickTimer))}get hasPendingInputs(){return xw(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=Ti(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){const{pointerId:i,pointerType:r,button:s}=t.native;return r==="mouse"?`${i}:${s}`:`${r}`}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,s=this._getPointerId(i);if(!this._pointerState.has(s))return void this._startClick(t);const o=this._pointerState.get(s),{data:c,modifiers:u}=o.event,g=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;u8(c,i)>g?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),o.pointerDownCount===2&&this._doubleClick.emit(c,void 0,u))}_handlePointerDown(t){const i=Qf(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,s=Qf(i),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,c=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),o),u=1;this._pointerState.set(s,{event:t,doubleClickTimer:c,pointerDownCount:u}),this.refreshHasPendingInputs()}}class CTe extends ns{constructor(t=la.maximumDoubleClickDelay,i=la.maximumDoubleClickDistance,r=la.maximumDoubleTouchDelay,s=la.maximumDoubleTouchDistance,o=ww){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=o,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Xs(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new x9({start:(c,u)=>this._dragStart(c,u),update:(c,u)=>this._dragUpdate(u),end:(c,u)=>this._dragEnd(u)}),this.registerIncoming("drag",c=>this._dragEventSeparator.handle(c)),this.registerIncoming("pointer-down",c=>this._handlePointerDown(c)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Ti(t.doubleTapTimeout)})}get hasPendingInputs(){return xw(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=Ti(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,r){const{button:s,buttons:o,pointer:c,pointers:u,pointerType:g,timestamp:b}=r;return{action:t,delta:i,button:s,buttons:o,pointer:c,pointers:u,pointerType:g,timestamp:b}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:o}=r;this._dragStartCenter=o;const c=this._createDoubleTapDragData("begin",Xs(0,0),r);this._doubleTapDrag.emit(c,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,o=Xs(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),c=this._createDoubleTapDragData("update",o,i);this._doubleTapDrag.emit(c,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,o=Xs(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),c=this._createDoubleTapDragData("end",o,i);this._doubleTapDrag.emit(c,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=Qf(i),s=this._pointerState.get(r),{pointerType:o}=i.native;if(s){const c=o==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),u8(s.event.data,i)>c?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=Qf(i),o=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,c=this._clock.setTimeout(()=>this._clearPointerDown(s),o);this._pointerState.set(s,{event:t,doubleTapTimeout:c}),this.refreshHasPendingInputs()}}class ATe extends ns{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:$Te(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=d2(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const o=J3(s,XZ(this._activePointerMap));s.initialAngle=o,s.lastAngle=o,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=d2(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=d2(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=J3(r,i)-t,r.lastAngle=J3(r,i)-t})}_emitEvent(t,i,r){const s=d2(this._activePointerMap);this._drag.emit(this._createPayload(t,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}}function XZ(e){const t=[];return e.forEach(i=>{t.push(Xs(i.event.x,i.event.y))}),MTe(t)}function d2(e){const t=XZ(e);let i=0;return e.forEach(r=>{let s=J3(r,t),o=s-r.lastAngle;for(;o>Math.PI;)o-=2*Math.PI;for(;o<-Math.PI;)o+=2*Math.PI;s=r.lastAngle+o,r.lastAngle=s,i+=s-r.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function $Te(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function J3(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var ED;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(ED||(ED={}));class kTe extends ns{constructor(t=la.maximumDoubleClickDelay,i=la.maximumDoubleClickDistance,r=la.maximumDoubleTouchDelay,s=la.maximumDoubleTouchDistance,o=ww){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=o,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=Qf(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=Qf(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const o=s.immediateDoubleClick;if(o){o.timeoutHandle.remove();const c=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;u8(o,t.data)>c?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=Qf(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const c1={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class OTe extends ns{constructor(t=c1.maximumClickDelay,i=c1.movementUntilMouseDrag,r=c1.movementUntilPenDrag,s=c1.movementUntilTouchDrag,o=c1.holdDelay,c=ww){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=s,this._holdDelay=o,this._clock=c,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",u=>{this._handlePointerLoss(u,"pointer-up")}),this.registerIncoming("pointer-capture-lost",u=>{this._handlePointerLoss(u,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",u=>{this._handlePointerLoss(u,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Ti(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const c=this._pointerState.get(r);if(c){if(!c.isDragging){const u=c.previousEvent;this._pointerHold.emit(u,void 0,t.modifiers),c.holdEmitted=!0}c.holdTimeout=null}},this._holdDelay));const o={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,o),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,r){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:r}}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,i),void 0,s.modifiers):ETe(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,i)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,o=this._pointerState.get(s);o&&(o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",o,i==="pointer-up"?r:o.previousEvent),void 0,o.modifiers):i==="pointer-up"&&o.downButton===r.native.button&&t.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}}const p2={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Yp=class extends Re{constructor(){super(...arguments),this._handles=new Vr}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([ts(()=>!e(),()=>this._disconnect()),ts(e,()=>this._connect())])}destroy(){this._handles=ti(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e,t;return(t=(e=this._inputManager)==null?void 0:e.multiTouchActive)!=null?t:!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=ti(this._inputManager)}_connect(){const e=this.view.surface,t=new S9(e,this.view.input),i=[new kTe,new OTe,new TTe,new ATe(this.view.navigation),new CTe],r=new jl({eventSource:t,recognizers:i});r.installHandlers("prevent-context-menu",[new ITe],Ai.INTERNAL),r.installHandlers("navigation",[new yTe(this.view),new aTe(this.view),new mTe(this.view),new _D(this.view),new _D(this.view,[p2.counter]),new iTe(this.view,"primary"),new hTe(this.view,p2.pan),new pTe(this.view,p2.zoom),new dTe(this.view,p2.rotate),new rTe(this.view,"secondary"),new tTe(this.view,"touch")],Ai.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,ge(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},rt)}get test(){return{inputManager:this._inputManager}}};v([_()],Yp.prototype,"view",void 0),v([_()],Yp.prototype,"latestPointerType",null),v([_()],Yp.prototype,"latestPointerLocation",null),v([_()],Yp.prototype,"multiTouchActive",null),Yp=v([K("esri.views.2d.input.MapViewInputManager")],Yp);const PTe=Yp;var MD,TD,CD,u$={},FTe={get exports(){return u$},set exports(e){u$=e}};MD=FTe,TD=function(){function e(s,o,c,u,g){t(s,o,c||0,u||s.length-1,g||r)}function t(s,o,c,u,g){for(;u>c;){if(u-c>600){var b=u-c+1,S=o-c+1,E=Math.log(b),A=.5*Math.exp(2*E/3),O=.5*Math.sqrt(E*A*(b-A)/b)*(S-b/2<0?-1:1);t(s,o,Math.max(c,Math.floor(o-S*A/b+O)),Math.min(u,Math.floor(o+(b-S)*A/b+O)),g)}var L=s[o],N=c,z=u;for(i(s,c,o),g(s[u],L)>0&&i(s,c,u);N<z;){for(i(s,N,z),N++,z--;g(s[N],L)<0;)N++;for(;g(s[z],L)>0;)z--}g(s[c],L)===0?i(s,c,z):i(s,++z,u),z<=o&&(c=z+1),o<=z&&(u=z-1)}}function i(s,o,c){var u=s[o];s[o]=s[c],s[c]=u}function r(s,o){return s<o?-1:s>o?1:0}return e},(CD=TD())!==void 0&&(MD.exports=CD);const LTe=u$;function SS(e,t){if(!(this instanceof SS))return new SS(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function RTe(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function U0(e,t){_v(e,0,e.children.length,t,e)}function _v(e,t,i,r,s){s||(s=Om(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var o,c=t;c<i;c++)o=e.children[c],xv(s,e.leaf?r(o):o);return s}function xv(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function AD(e,t){return e.minX-t.minX}function $D(e,t){return e.minY-t.minY}function jE(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function f2(e){return e.maxX-e.minX+(e.maxY-e.minY)}function NTe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function DTe(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,o-r)}function zE(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m2(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Om(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function kD(e,t,i,r,s){for(var o,c=[t,i];c.length;)(i=c.pop())-(t=c.pop())<=r||(o=t+Math.ceil((i-t)/r/2)*r,LTe(e,o,t,i,s),c.push(t,o,o,i))}SS.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!m2(e,t))return i;for(var s,o,c,u,g=[];t;){for(s=0,o=t.children.length;s<o;s++)c=t.children[s],m2(e,u=t.leaf?r(c):c)&&(t.leaf?i.push(c):zE(e,u)?this._all(c,i):g.push(c));t=g.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!m2(e,t))return!1;for(var r,s,o,c,u=[];t;){for(r=0,s=t.children.length;r<s;r++)if(o=t.children[r],m2(e,c=t.leaf?i(o):o)){if(t.leaf||zE(e,c))return!0;u.push(o)}t=u.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Om([]),this},remove:function(e,t){if(!e)return this;for(var i,r,s,o,c=this.data,u=this.toBBox(e),g=[],b=[];c||g.length;){if(c||(c=g.pop(),r=g[g.length-1],i=b.pop(),o=!0),c.leaf&&(s=RTe(e,c.children,t))!==-1)return c.children.splice(s,1),g.push(c),this._condense(g),this;o||c.leaf||!zE(c,u)?r?(i++,c=r.children[i],o=!1):c=null:(g.push(c),b.push(i),i=0,r=c,c=c.children[0])}return this},toBBox:function(e){return e},compareMinX:AD,compareMinY:$D,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,o=i-t+1,c=this._maxEntries;if(o<=c)return U0(s=Om(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(o)/Math.log(c)),c=Math.ceil(o/Math.pow(c,r-1))),(s=Om([])).leaf=!1,s.height=r;var u,g,b,S,E=Math.ceil(o/c),A=E*Math.ceil(Math.sqrt(c));for(kD(e,t,i,A,this.compareMinX),u=t;u<=i;u+=A)for(kD(e,u,b=Math.min(u+A-1,i),E,this.compareMinY),g=u;g<=b;g+=E)S=Math.min(g+E-1,b),s.children.push(this._build(e,g,S,r-1));return U0(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,o,c,u,g,b,S,E;r.push(t),!t.leaf&&r.length-1!==i;){for(S=E=1/0,s=0,o=t.children.length;s<o;s++)g=jE(c=t.children[s]),(b=NTe(e,c)-g)<E?(E=b,S=g<S?g:S,u=c):b===E&&g<S&&(S=g,u=c);t=u||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),o=[],c=this._chooseSubtree(s,this.data,t,o);for(c.children.push(e),xv(c,s);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(s,o,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var o=this._chooseSplitIndex(i,s,r),c=Om(i.children.splice(o,i.children.length-o));c.height=i.height,c.leaf=i.leaf,U0(i,this.toBBox),U0(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(i,c)},_splitRoot:function(e,t){this.data=Om([e,t]),this.data.height=e.height+1,this.data.leaf=!1,U0(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,o,c,u,g,b,S;for(g=b=1/0,r=t;r<=i-t;r++)c=DTe(s=_v(e,0,r,this.toBBox),o=_v(e,r,i,this.toBBox)),u=jE(s)+jE(o),c<g?(g=c,S=r,b=u<b?u:b):c===g&&u<b&&(b=u,S=r);return S},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:AD,s=e.leaf?this.compareMinY:$D;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,o,c=this.toBBox,u=_v(e,0,t,c),g=_v(e,i-t,i,c),b=f2(u)+f2(g);for(s=t;s<i-t;s++)o=e.children[s],xv(u,e.leaf?c(o):o),b+=f2(u);for(s=i-t-1;s>=t;s--)o=e.children[s],xv(g,e.leaf?c(o):o),b+=f2(g);return b},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)xv(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():U0(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class IS{constructor(t,i){this.key=new Yn(0,0,0,0),this.bounds=Oc(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.scale=r.scale,this.level=r.level}get id(){return this.key.id}get extent(){return vi.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=En.acquire();for(let r=0;r<t.length;r++)i[r]=new IS(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return zW.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const up={added:[],removed:[]},VE=new Set,jTe=new Yn(0,0,0,0);class zTe extends ss{constructor(t){super(),this._tiles=new Map,this._index=SS(9,Se("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new IS(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:o}=s;if(r.length>0)for(const{row:c,colFrom:u,colTo:g}of r)for(let b=u;b<=g;b++){const S=jTe.set(o,c,s.normalizeCol(b),s.getWorldForColumn(b)).id;if(VE.add(S),!this.has(S)){const E=new IS(this.tileScheme,S);this._tiles.set(S,E),this._index.insert(E),this.tiles.push(E),up.added.push(E)}}for(let c=this.tiles.length-1;c>=0;c--){const u=this.tiles[c];VE.has(u.id)||(this._tiles.delete(u.id),this.tiles.splice(c,1),this._index.remove(u),up.removed.push(u))}(up.added.length||up.removed.length)&&this.emit("update",up),Yy.pool.release(i),VE.clear(),up.added.length=0,up.removed.length=0}}let Kp=class extends Re{constructor(){super(...arguments),this.color=new Je([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};v([_({type:Je})],Kp.prototype,"color",void 0),v([_({type:Je})],Kp.prototype,"haloColor",void 0),v([_()],Kp.prototype,"haloOpacity",void 0),v([_()],Kp.prototype,"fillOpacity",void 0),Kp=v([K("esri.views.2d.support.HighlightOptions")],Kp);const QZ=Kp,VTe=e=>e.includes("Brush");class eX{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),VTe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function GTe(e,t,i,r,s,o,c,u){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let g=null;e.width!=null&&e.height!=null?g=[e.width,e.height]:e.width==null&&e.height!=null?g=[e.height,e.height]:e.width!=null&&e.height==null?g=[e.width,e.width]:e.width==null&&e.height==null&&(g=null);const b=i[0]-(r.left+r.right),S=i[1]-(r.top+r.bottom);let E,A,O=e.area||{x:0,y:0,width:b,height:S};if(g){const L=b/S,N=g[0]/g[1];if(N>L){const z=O.width/N;O={x:O.x,y:Math.round(O.y+(O.height-z)/2),width:O.width,height:Math.round(z)}}else{const z=O.height*N;O={x:Math.round(O.x+(O.width-z)/2),y:O.y,width:Math.round(z),height:O.height}}}else g=[O.width,O.height];return g[0]>O.width?(E=Math.min(g[0]/O.width,t),A=g[0]/O.width/E):(E=1,A=g[0]/O.width),{resolutionScale:E,cropArea:{x:Math.round((O.x+r.left)*E),y:Math.round((O.y+r.top)*E),width:Math.round(O.width*E),height:Math.round(O.height*E)},outputScale:A,format:s,quality:o,children:c,rotation:u}}function UTe(e,t,i){const{ctx:r,canvas:s}=tX(e,i),o=r.getImageData(0,0,e.width,e.height),c=HTe(s,t);return iX(s),{dataUrl:c,data:o}}function qTe(e,t){const{ctx:i,canvas:r}=tX(e,t),s=i.getImageData(0,0,e.width,e.height);return iX(r),s}function tX(e,t){const i=BTe();t.premultipliedAlpha&&ZTe(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&KTe(r),{ctx:r,canvas:i}}function iX(e){e.width=0,e.height=0}function BTe(){return ae(GE)&&(GE=document.createElement("canvas")),GE}let GE=null;function HTe(e,t){const i=XTe[t.format],r=t.quality/100;return e.toDataURL(i,r)}function WTe(e,t){const i=YTe(e),r=eCe[i];return{format:i,quality:so(t!=null?t:r,0,100)}}function JTe(e,t){return t/Math.max(e[0],e[1])}function tVe(e,t,i,r=0,s=0,o=e.width-r,c=e.height-s,u=!1){const{data:g}=e,{width:b,height:S,data:E}=t,A=o/b,O=c/S,L=Math.ceil(A/2),N=Math.ceil(O/2),z=e.width;for(let q=0;q<S;q++)for(let Z=0;Z<b;Z++){const ee=4*(Z+(u?S-q-1:q)*b);let ie=0,ne=0,oe=0,me=0,fe=0,Ce=0;const _e=(q+.5)*O;for(let Ae=Math.floor(q*O);Ae<(q+1)*O;Ae++){const Oe=Math.abs(_e-(Ae+.5))/N,je=(Z+.5)*A,De=Oe*Oe;for(let nt=Math.floor(Z*A);nt<(Z+1)*A;nt++){const mt=Math.abs(je-(nt+.5))/L,ct=Math.sqrt(De+mt*mt);if(ct>=1)continue;let dt=2*ct*ct*ct-3*ct*ct+1;const Nt=4*(r+nt+(s+Ae)*z);Ce+=dt*g[Nt+3],ne+=dt,!i&&g[Nt+3]<255&&(dt=dt*g[Nt+3]/255),oe+=dt*g[Nt],me+=dt*g[Nt+1],fe+=dt*g[Nt+2],ie+=dt}}E[ee]=oe/ie,E[ee+1]=me/ie,E[ee+2]=fe/ie,E[ee+3]=Ce/ne}return t}function YTe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return QTe}}function KTe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function ZTe(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s!==255&&s>0){const o=255/s;t[r+0]=t[r+0]*o,t[r+1]=t[r+1]*o,t[r+2]=t[r+2]*o}}}const XTe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},OD=98,QTe="png",eCe={png:100,jpg:OD,jpeg:OD};var xr;function iVe(e,t,i={}){const r=rX(e);for(;r.length>1;){const s=ES(t,r.shift(),i);if(U(s))return s}return tCe(t,r.shift(),i)}function rX(e){const t=Se("esri-force-webgl");if(t===xr.WEBGL1||t===xr.WEBGL2)return[t];switch(e){case"2d":return Se("mac")&&Se("chrome")?[xr.WEBGL1,xr.WEBGL2]:[xr.WEBGL2,xr.WEBGL1];case"3d":return[xr.WEBGL2,xr.WEBGL1]}}function tCe(e,t,i={}){if(!window.WebGLRenderingContext)return PD(e,iCe),null;const r=ES(e,t,i);return ae(r)&&PD(e,rCe),r}function ES(e,t,i={}){const r=t===xr.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let s=null;for(const o of r){try{s=e.getContext(o,i)}catch{}if(s)break}return s}function PD(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(xr||(xr={}));const iCe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',rCe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let UE,qE;function sCe(e){const t=rX(e);for(;t.length>1;){const i=FD(t.shift());if(i.available)return i}return FD(t.shift())}function FD(e){switch(e){case xr.WEBGL1:return nCe();case xr.WEBGL2:return oCe()}}function nCe(){return UE||(UE=uCe()),UE}function oCe(){return qE||(qE=cCe()),qE}class sX{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class aCe extends sX{constructor(){super(...arguments),this.type=xr.WEBGL1}}class lCe extends sX{constructor(){super(...arguments),this.type=xr.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function nX(e,t){var o;if(e===xr.WEBGL1&&typeof WebGLRenderingContext=="undefined"||e===xr.WEBGL2&&typeof WebGL2RenderingContext=="undefined")return null;const i=document.createElement("canvas");if(!i)return null;let r=ES(i,e,{failIfMajorPerformanceCaveat:!0});if(ae(r)&&(r=ES(i,e),U(r)&&(t.majorPerformanceCaveat=!0)),ae(r))return r;if(e===xr.WEBGL1){const c=(o=r.getParameter(r.VERSION))==null?void 0:o.match(/^WebGL\s+([\d.]*)/);if(c){const u=parseFloat(c[1]);t.available=u>=.94}}else t.available=!0;t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const s=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return s&&(t.supportsHighPrecisionFragment=s.precision>0),r}function uCe(){const e=new aCe,t=nX(xr.WEBGL1,e);return ae(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function cCe(){const e=new lCe,t=nX(xr.WEBGL2,e);return ae(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function hCe(e){const t=sCe(e);if(!t.available)return new de("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new de("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new de("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new de("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===xr.WEBGL1){if(!t.supportsElementIndexUint)return new de("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new de("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new de("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function dCe(e){return e&&"nodeType"in e}function pCe(e){return e&&typeof e.render=="function"}const LD={component:"esri-component"};let Zp=class extends Re{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(LD.component),t&&t.classList.remove(LD.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||dCe(e)?(this._set("widget",null),F5(e)):(pCe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};v([_({dependsOn:[]})],Zp.prototype,"id",null),v([_()],Zp.prototype,"node",null),v([_t("node")],Zp.prototype,"castNode",null),v([_({readOnly:!0})],Zp.prototype,"widget",void 0),Zp=v([K("esri.views.ui.Component")],Zp);const Y3=Zp,fCe={left:0,top:0,bottom:0,right:0},oX={bottom:30,top:15,right:15,left:15},BE="manual",Mu="esri-ui",hn={ui:Mu,corner:`${Mu}-corner`,innerContainer:`${Mu}-inner-container`,manualContainer:`${Mu}-manual-container`,cornerContainer:`${Mu}-corner-container`,topLeft:`${Mu}-top-left`,topRight:`${Mu}-top-right`,bottomLeft:`${Mu}-bottom-left`,bottomRight:`${Mu}-bottom-right`};function mCe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function HE(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function WE(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let zl=class extends ss.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=Dr(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&WE(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&WE(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ge(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,rt),ge(()=>this.padding,this._applyUIPadding,rt),ge(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},rt),m5(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(hn.ui),J1e(e),this._attachContainers(e)),t&&(t.classList.remove(hn.ui),WE(t,{top:"",bottom:"",left:"",right:""}),qB(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...oX,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,r;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const s=HE(e);s&&({index:i,position:t,component:e,key:r}=s),t&&typeof t=="object"&&({index:i,key:r,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==t)return;const s=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(s,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||BE)===BE?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(hn.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(o=>this.move(o,t)),!e)return;let i;const r=HE(e)||HE(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const s=this.remove(e);s&&this.add(s,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r){e instanceof Y3||(e=new Y3({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof Y3?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||fCe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(hn.innerContainer),e.classList.add(hn.cornerContainer);const t=document.createElement("div");t.classList.add(hn.innerContainer),t.classList.add(hn.manualContainer);const i=document.createElement("div");i.classList.add(hn.topLeft),i.classList.add(hn.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(hn.topRight),r.classList.add(hn.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(hn.bottomLeft),s.classList.add(hn.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(hn.bottomRight),o.classList.add(hn.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;const c=Zn();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":s,"bottom-right":o,"top-leading":c?r:i,"top-trailing":c?i:r,"bottom-leading":c?o:s,"bottom-trailing":c?s:o},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||BE,r=e.index,s=this._positionNameToContainerLookup[i],o=r!=null&&r>-1;if(mCe(t.widget)&&t.widget.startup(),!o)return void s.appendChild(t.node);const c=Array.prototype.slice.call(s.children);if(r===0)return void(s.firstChild?PF(t.node,s.firstChild):s.appendChild(t.node));r>=c.length?s.appendChild(t.node):PF(t.node,c[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(r=>(t=r===e,t&&(i=r),t)),i}_findById(e){let t,i=null;return this._components.some(r=>(t=r.id===e,t&&(i=r),t)),i}_findByNode(e){let t,i=null;return this._components.some(r=>(t=r.node===e,t&&(i=r),t)),i}};v([_()],zl.prototype,"_locale",void 0),v([_()],zl.prototype,"container",null),v([_()],zl.prototype,"height",null),v([_({value:oX})],zl.prototype,"padding",null),v([_t("padding")],zl.prototype,"castPadding",null),v([_()],zl.prototype,"view",void 0),v([_()],zl.prototype,"width",null),zl=v([K("esri.views.ui.UI")],zl);const yCe=zl;function RD(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function gCe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function y2(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function vCe(e){return e.type==="bing-maps"}const sh=[];let Pm=class extends zy{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Be,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(r=>ge(()=>{var s;return[r.suspended,(s=r.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([$i(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ts(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;sh.length=0,e&&t?(t.forEach(i=>{var o;if(i.suspended||!((o=i.layer)!=null&&o.attributionVisible))return;const r=i.layer;if(RD(r,"user"))return void y2(sh,i,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(i)){const c=this._fetchedAttributionData.get(i);return void(c?y2(sh,i,this._getDynamicAttribution(c,e,r)):RD(r)&&y2(sh,i,r.copyright))}return void this._fetchAttributionData(i)}const s=r.get("portalItem.accessInformation");y2(sh,i,s||r.copyright)}),gCe(this.items,sh)&&(this.items.removeAll(),this.items.addMany(sh)),sh.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await u5(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,vCe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const o=i[s],c=o.coverageAreas;if(!c)return;for(const u of c){const g=u.bbox,b=u.zoomMin-(t&&u.zoomMin?1:0),S=u.zoomMax-(t&&u.zoomMax?1:0),E={xmin:g[1],ymin:g[0],xmax:g[3],ymax:g[2],spatialReference:wt.WGS84},A={extent:gc(E),attribution:o.attribution||"",score:u.score!=null?u.score:100,id:s};for(let O=b;O<=S;O++)r[O]=r[O]||[],r[O].push(A)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){var b,S,E;const{extent:r,scale:s}=t;let o=(S=(b=i.tileInfo)==null?void 0:b.scaleToZoom(s))!=null?S:0;if(o=Math.min((E=e.maxKey)!=null?E:0,Math.round(o)),!r||o==null||o<=-1)return"";const c=e[o],u=p5(r.center.clone().normalize(),t.spatialReference),g={};return c?c.filter(A=>{const O=A.id,L=!g[O]&&u&&A.extent&&f5(A.extent,u);return L&&(g[O]=!0),L}).sort((A,O)=>O.score-A.score||A.objectId-O.objectId).map(A=>A.attribution).join(", "):""}};v([_({readOnly:!0,type:Be})],Pm.prototype,"items",void 0),v([_({readOnly:!0})],Pm.prototype,"state",null),v([_()],Pm.prototype,"view",void 0),Pm=v([K("esri.widgets.Attribution.AttributionViewModel")],Pm);const aX=Pm,q0="esri-attribution",nh={base:`${q0} esri-widget`,poweredBy:`${q0}__powered-by`,sources:`${q0}__sources`,open:`${q0}--open`,sourcesOpen:`${q0}__sources--open`,link:`${q0}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let gn=class extends ki{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=nh.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new aX}initialize(){this.addHandles($i(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[nh.open]:this._isOpen};return J("div",{bind:this,class:this.classes(nh.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return J("div",{class:nh.poweredBy},"Powered by"," ",J("a",{class:nh.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:r}=this,s={[nh.sourcesOpen]:e,[nh.interactive]:t};return J("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(nh.sources,s),innerHTML:r,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,o=s>r,c=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,c&&(t=!0),this._isOpen){const u=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,u&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};v([_()],gn.prototype,"_isOpen",void 0),v([_()],gn.prototype,"_isInteractive",null),v([_()],gn.prototype,"_attributionTextOverflowed",void 0),v([_()],gn.prototype,"_prevSourceNodeHeight",void 0),v([_({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],gn.prototype,"attributionText",null),v([_()],gn.prototype,"iconClass",void 0),v([_()],gn.prototype,"itemDelimiter",void 0),v([_()],gn.prototype,"label",null),v([_(),ui("esri/widgets/Attribution/t9n/Attribution")],gn.prototype,"messages",void 0),v([_()],gn.prototype,"view",null),v([_({type:aX})],gn.prototype,"viewModel",void 0),v([vr()],gn.prototype,"_toggleState",null),gn=v([K("esri.widgets.Attribution")],gn);const bCe=gn,wCe="esri.widgets.CompassViewModel";let Xp=class extends nZ(Re){constructor(e){super(e),this._handles=new Vr,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(ge(()=>this.view,this._updateRotationWatcher,rt))}destroy(){Ti(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var t;if(!this.get("view.ready"))return;const e={};((t=this.view)==null?void 0:t.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?ge(()=>e==null?void 0:e.rotation,this._updateForRotation,rt):ge(()=>e==null?void 0:e.camera,this._updateForCamera,rt))}};v([_({readOnly:!0})],Xp.prototype,"canShowNorth",null),v([_()],Xp.prototype,"orientation",void 0),v([_({readOnly:!0})],Xp.prototype,"state",null),v([_()],Xp.prototype,"view",void 0),Xp=v([K(wCe)],Xp);const lX=Xp,oh={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Vl=class extends ki{constructor(e,t){super(e,t),this.iconClass=oh.widgetIcon,this.messages=null,this.viewModel=new lX}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",r=(t==="rotation"?"rotation":"compass")=="compass",s=i?-1:0,o={[oh.disabled]:i,[oh.interactive]:!i},c={[oh.northIcon]:r,[oh.rotationIcon]:!r},{messages:u}=this;return J("div",{bind:this,class:this.classes(oh.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":u.reset,title:u.reset},J("span",{"aria-hidden":"true",class:this.classes(oh.icon,c),styles:this._toRotationTransform(e)}),J("span",{class:oh.text},u.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};v([_()],Vl.prototype,"goToOverride",null),v([_()],Vl.prototype,"iconClass",void 0),v([_()],Vl.prototype,"label",null),v([_(),ui("esri/widgets/Compass/t9n/Compass")],Vl.prototype,"messages",void 0),v([_()],Vl.prototype,"view",null),v([_({type:lX})],Vl.prototype,"viewModel",void 0),v([vr()],Vl.prototype,"_reset",null),Vl=v([K("esri.widgets.Compass")],Vl);const _Ce=Vl,B0="esri-navigation-toggle",Vo={base:`${B0} esri-widget`,button:`${B0}__button esri-widget--button`,activeButton:`${B0}__button--active`,panButton:`${B0}__button--pan`,rotateButton:`${B0}__button--rotate`,isLayoutHorizontal:`${B0}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Fm=class extends Re{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(ts(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};v([_({readOnly:!0})],Fm.prototype,"state",null),v([_()],Fm.prototype,"navigationMode",void 0),v([_()],Fm.prototype,"view",void 0),Fm=v([K("esri.widgets.NavigationToggleViewModel")],Fm);const uX=Fm;let Gl=class extends ki{constructor(e,t){super(e,t),this.iconClass=Vo.widgetIcon,this.messages=null,this.viewModel=new uX}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[Vo.disabled]:e,[Vo.isLayoutHorizontal]:this.layout==="horizontal"},r={[Vo.activeButton]:t},s={[Vo.activeButton]:!t},o=e?-1:0,c=this.messages.toggle;return J("div",{bind:this,class:this.classes(Vo.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":c,title:c},J("div",{class:this.classes(Vo.button,Vo.panButton,r)},J("span",{class:Vo.panIcon})),J("div",{class:this.classes(Vo.button,Vo.rotateButton,s)},J("span",{class:Vo.rotationIcon})))}_toggle(){this.toggle()}};v([_()],Gl.prototype,"iconClass",void 0),v([_()],Gl.prototype,"label",null),v([_({value:"vertical"})],Gl.prototype,"layout",null),v([_(),ui("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Gl.prototype,"messages",void 0),v([_()],Gl.prototype,"view",null),v([_({type:uX})],Gl.prototype,"viewModel",void 0),v([vr()],Gl.prototype,"_toggle",null),Gl=v([K("esri.widgets.NavigationToggle")],Gl);const xCe=Gl,h1={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Ph=class extends ki{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[h1.disabled]:!this.enabled,[h1.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return J("div",{bind:this,class:this.classes(h1.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},J("span",{"aria-hidden":"true",role:"presentation",class:this.classes(h1.icon,i)}),J("span",{class:h1.iconText},this.title))}_triggerAction(){this.action.call(this)}};v([_()],Ph.prototype,"action",void 0),v([_()],Ph.prototype,"enabled",void 0),v([_()],Ph.prototype,"iconClass",void 0),v([_()],Ph.prototype,"title",void 0),v([vr()],Ph.prototype,"_triggerAction",null),Ph=v([K("esri.widgets.IconButton")],Ph);const ND=Ph;let Lm=class extends Re{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};v([_({readOnly:!0})],Lm.prototype,"canZoomIn",null),v([_({readOnly:!0})],Lm.prototype,"canZoomOut",null),v([_()],Lm.prototype,"view",void 0),Lm=v([K("esri.widgets.Zoom.ZoomConditions2D")],Lm);const SCe=Lm;let Rm=class extends Re{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};v([_({readOnly:!0})],Rm.prototype,"canZoomIn",null),v([_({readOnly:!0})],Rm.prototype,"canZoomOut",null),v([_()],Rm.prototype,"view",void 0),Rm=v([K("esri.widgets.Zoom.ZoomConditions3D")],Rm);const ICe=Rm;let Fh=class extends Re{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return U(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return U(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new SCe({view:e}):e.type==="3d"&&(this._zoomConditions=new ICe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():qf(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():qf(e.goTo({zoomFactor:.5}))}};v([_()],Fh.prototype,"_zoomConditions",void 0),v([_()],Fh.prototype,"canZoomIn",null),v([_()],Fh.prototype,"canZoomOut",null),v([_({readOnly:!0})],Fh.prototype,"state",null),v([_()],Fh.prototype,"view",null),Fh=v([K("esri.widgets.Zoom.ZoomViewModel")],Fh);const cX=Fh,d1={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Yu=class extends ki{constructor(e,t){super(e,t),this.iconClass=d1.widgetIcon,this.messages=null,this.viewModel=new cX}initialize(){this._zoomInButton=new ND({action:this.zoomIn.bind(this),iconClass:d1.zoomInIcon}),this._zoomOutButton=new ND({action:this.zoomOut.bind(this),iconClass:d1.zoomOutIcon})}destroy(){this._zoomInButton=ti(this._zoomInButton),this._zoomOutButton=ti(this._zoomOutButton)}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,t={[d1.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=e;this._zoomInButton.enabled=i,this._zoomOutButton.enabled=r;const{zoomIn:s,zoomOut:o}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=o,J("div",{class:this.classes(d1.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};v([_()],Yu.prototype,"iconClass",void 0),v([_()],Yu.prototype,"label",null),v([_({value:"vertical"})],Yu.prototype,"layout",null),v([_(),ui("esri/widgets/Zoom/t9n/Zoom")],Yu.prototype,"messages",void 0),v([_()],Yu.prototype,"view",null),v([_({type:cX})],Yu.prototype,"viewModel",void 0),Yu=v([K("esri.widgets.Zoom")],Yu);const ECe=Yu;function MCe(e){return e&&e.view!==void 0}let K3=class extends yCe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([ge(()=>this.components,this._componentsWatcher.bind(this),rt),ge(()=>this.view,this._updateViewAwareWidgets.bind(this),rt)])}_add(e,t,i,r){let s=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;s=this._createComponent(e)}super._add(s,t,i,r)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),r=i&&i.widget;MCe(r)&&(r.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new Y3({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new bCe({view:this.view})}_createCompass(){return new _Ce({view:this.view})}_createNavigationToggle(){return new xCe({view:this.view})}_createZoom(){return new ECe({view:this.view})}};v([_()],K3.prototype,"components",void 0),K3=v([K("esri.views.ui.DefaultUI")],K3);const TCe=K3;let Z3=class extends TCe{constructor(e){super(e),this.components=["attribution","zoom"]}};v([_()],Z3.prototype,"components",void 0),Z3=v([K("esri.views.ui.2d.DefaultUI2D")],Z3);const hX=Z3;var c$;let X3=c$=class extends $e{constructor(e){super(e),this.color=new Je([0,0,0,1])}clone(){return new c$(ve({color:this.color}))}};v([_({type:Je,json:{write:!0}})],X3.prototype,"color",void 0),X3=c$=v([K("esri.webmap.background.ColorBackground")],X3);const CCe=X3;let dX,pX,fX,mX,yX,gX;async function ACe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,Stage:o}]=await Promise.all([pe(()=>import("./webglDeps.82e33e6e.js"),["assets/webglDeps.82e33e6e.js","assets/VertexArrayObject.ad007c8f.js","assets/Texture.d66dc1cb.js","assets/enums.3c1fa5b5.js","assets/ProgramTemplate.058b26d9.js","assets/programUtils.10146243.js","assets/NestedMap.2ac03b78.js"]),pe(()=>import("./mapViewDeps.33032dd5.js"),["assets/mapViewDeps.33032dd5.js","assets/CIMResourceManager.06b6abfa.js","assets/Rasterizer.f4189955.js","assets/_commonjsHelpers.4421ccc9.js","assets/cimAnalyzer.2e975d1d.js","assets/fontUtils.a84c0faf.js","assets/BidiEngine.f5b8c89f.js","assets/GeometryUtils.6fd53e6d.js","assets/enums.9a5c29c3.js","assets/alignmentUtils.ba8835fe.js","assets/definitions.1d569ae6.js","assets/number.dcd3e86c.js","assets/Rect.e8e4d18d.js","assets/callExpressionWithFeature.565c4416.js","assets/floatRGBA.7b501bd7.js","assets/rasterizingUtils.35b0a2ca.js","assets/imageutils.2b310abc.js","assets/Container.f0dd2697.js","assets/EffectView.ab0cb7da.js","assets/enums.3c1fa5b5.js","assets/Texture.d66dc1cb.js","assets/BufferPool.2da87f69.js","assets/color.18cd4954.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/WGLContainer.53e4a52c.js","assets/VertexArrayObject.ad007c8f.js","assets/vec4f32.c3d64d30.js","assets/ProgramTemplate.058b26d9.js","assets/MaterialKey.3d16bafa.js","assets/utils.e5643e7e.js","assets/StyleDefinition.dc47b5d4.js","assets/config.86ceb802.js","assets/GeometryUtils.ccd3b111.js","assets/earcut.a219bf29.js","assets/enums.7f1ae3cd.js","assets/MagnifierPrograms.4bede4dd.js","assets/Matcher.19c09547.js","assets/visualVariablesUtils.313d5012.js","assets/visualVariablesUtils.fc657d78.js","assets/tileUtils.dbdde791.js","assets/TurboLine.cfd1c2a2.js","assets/ExpandedCIM.31fce9f6.js","assets/CircularArray.e19cffa8.js","assets/webgl-debug.bb689b12.js","assets/ComputedAttributeStorage.6996e7f3.js","assets/arcadeTimeUtils.7055c5d7.js","assets/centroid.193a93e9.js","assets/programUtils.10146243.js","assets/NestedMap.2ac03b78.js","assets/RenderingContext.c1f30f62.js","assets/OrderIndependentTransparency.43c6e481.js","assets/basicInterfaces.f8f3b23b.js","assets/doublePrecisionUtils.d6c628ce.js","assets/imageUtils.da66a66b.js","assets/GraphicsView2D.9477d269.js","assets/normalizeUtilsSync.95f750ca.js","assets/AttributeStoreView.a805ba6a.js","assets/TiledDisplayObject.2607ae61.js","assets/schemaUtils.1fd0b466.js","assets/createSymbolSchema.0873edf1.js","assets/util.c874f147.js","assets/GraphicContainer.b56922f6.js","assets/BaseGraphicContainer.5e2911c8.js","assets/FeatureContainer.3cd0def7.js","assets/TileContainer.39dd4e2d.js","assets/vec3f32.4d8dc001.js","assets/requestImageUtils.828b299e.js"])]);pX=e,fX=t,mX=i,yX=r,gX=s,dX=o}const DD=160;function $Ce(e){return e&&e.declaredClass==="esri.Viewpoint"}let ht=class extends sme(PEe(FEe(n4e))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Mb({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new oMe(this),this._pePromise=null,this.floors=new Be,this.highlightOptions=new QZ,this.inputManager=new PTe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new eX,this.type="2d",this.ui=new hX,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new VZ,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([ge(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(DD)},au),this.on("resize",t=>this._resizeHandler(t)),ge(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),Ofe()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new zTe(this.featuresTilingScheme)}get initialExtentRequired(){var c;const{scale:e,constraints:t,center:i,viewpoint:r,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((c=this.map.initialViewProperties)==null?void 0:c.viewpoint))&&!s&&(t!=null&&t.effectiveLODs||(o=-1),(!i||e===0&&o===-1)&&(!r||!U(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Rd()||(this._pePromise||(this._pePromise=Nd().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!uu(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{var r;e===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(i,i)}get background(){return OCe(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new pt({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void Ie.getLogger(this.declaredClass).error(new de("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const i=this.viewpoint;t$(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(ge(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},au),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ie.getLogger(this.declaredClass).error(new de("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(r){return void Ie.getLogger(this.declaredClass).error(new de("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const i=this.viewpoint;q4e(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;iMe(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;fD(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var t,i,r;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(Se("esri-2d-log-updating")){const s=this.allLayerViews.reduce((o,c)=>({...o,[c.layer.id]:!c.destroyed&&!("layerViews"in c)&&c.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(t=this.layerViewManager)==null?void 0:t.updating}
-> labelManager.updating: ${(i=this.labelManager)==null?void 0:i.updating}
-> graphicsView.updating: ${(r=this.graphicsView)==null?void 0:r.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new de("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):ae(e.targetGeometry)&&(i=new de("mapview:invalid-viewpoint","geometry not defined"))}catch(s){i=new de("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(i)return void Ie.getLogger(this.declaredClass).error(i);this._scaleBeforeChangingSpatialReference=null;const r=new Zl({targetGeometry:new pt,scale:0,rotation:0});bl(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;fD(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),In(()=>this.ready,t).then(()=>{var s;const i={animate:!0,...t},r=V4e(e,this);return(s=this.animation)==null||s.update(r),this._gotoTask={},i.animate?this._gotoAnimated(r,i):this._gotoImmediate(r,i)});Ie.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=uD(e)?lD(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=!1,o=null,c=null;t!=null&&t.include?zD(t.include,jD(this,S=>r.add(S),S=>{o||(o=new Set),o.add(S)},S=>r.add(S),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),t!=null&&t.exclude&&zD(t.exclude,jD(this,S=>r.delete(S),S=>{c||(c=new Set),c.add(S)}));const u=this.allLayerViews.filter(S=>!S.suspended&&r.has(S)).reverse(),g=this.toMap(i);let b=[...s?this.graphicsView.hitTest(g).map(S=>({type:"graphic",graphic:S,layer:null,mapPoint:g})):[],...await Promise.all(u.map(S=>S.hitTest(g,i)).toArray())].filter(U).flat().filter(U);return o&&(b=b.filter(S=>!("graphic"in S)||!S.graphic||(o==null?void 0:o.has(h$(S.graphic))))),c&&(b=b.filter(S=>!("graphic"in S)||!S.graphic||(c==null?void 0:c.has(h$(S.graphic))))),{screenPoint:i,results:b}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return UTe(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return qTe(i,this._pixelFormat)}_createScreenshotPlan(e){e=e!=null?e:{};const t=this.supersampleScreenshotsEnabled?Math.min(4,JTe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(o=>{const c=this.allLayerViews.find(u=>u.layer.id===o.id);c&&"container"in c&&c.container&&i.push(c.container)})):i=this._stage.children;const{format:r,quality:s}=WTe(e.format,e.quality);return GTe(e,t,this.size,this.padding,r,s,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=uD(e)?lD(this,e):e,i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),o=this.spatialReference;return new pt({x:r,y:s,spatialReference:o})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),Xs(i[0],i[1])}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return yD.hasLayerViewModule(e)}importLayerView(e){return yD.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(Ie.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=hCe(this.type);return Se("safari")&&Se("safari")<9&&(e=new de("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Se("safari")})),U(e)?(Ie.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):ACe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new QA),this.animation}_cancellableGoTo(e,t,i){const r=()=>e===this._gotoTask,s=i.then(()=>{r()&&(this.animation=null)}).catch(c=>{throw r()&&(t&&!t.done&&(t.stop(),this.frameTask.animationInProgress=!1),this.animation=null),c}),o=new Promise(c=>c(s));return t.when().catch(()=>{r()&&o.cancel&&o.cancel()}),o}_gotoImmediate(e,t){const i=this._gotoTask,r=this.animation,s=e.then(o=>{if(or(t),i!==this._gotoTask)throw new de("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=o,r.finish()});return this._cancellableGoTo(i,r,s)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<DD&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var z,q,Z,ee;const{constraints:e,initialExtent:t,map:i,padding:r,size:s}=this;if(!e)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,c={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?c.zoom!==-1&&(c.scale=e.zoomToScale(c.zoom)):c.zoom=-1;let u=null,g=null,b=0;const S=c.viewpoint&&c.viewpoint.rotation,E=c.viewpoint&&c.viewpoint.targetGeometry;U(E)&&(E.type==="extent"?u=E:E.type==="point"&&(g=E,b=c.viewpoint.scale));const A=c.extent||u||((q=(z=o==null?void 0:o.viewpoint)==null?void 0:z.targetGeometry)==null?void 0:q.extent)||t,O=c.center||g||(A==null?void 0:A.center),L=c.scale||b||((Z=o==null?void 0:o.viewpoint)==null?void 0:Z.scale)||A&&nb(A,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),N=c.rotation||S||((ee=o==null?void 0:o.viewpoint)==null?void 0:ee.rotation)||0;return O&&L?new Zl({targetGeometry:O,scale:L,rotation:N}):null}_gotoAnimated(e,t){const i=this._gotoTask,r=this.animation;if(!r)return Promise.resolve();const s=e.then(o=>{if(or(t),i!==this._gotoTask)throw new de("view:goto-interrupted","Goto was interrupted");return r.update(o),this.animationManager.animate(r,this.viewpoint,t),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,r,s)}_project(e,t){var s;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((s=i.spatialReference)==null?void 0:s.imageCoordinateSystem)||Hi(t,i.spatialReference))return e;const r=lu(i,t);if(!r)throw new de("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return $Ce(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],tMe(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,void 0),this.state.viewpoint=i}_startup(){var u,g;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(b){Ie.getLogger(this.declaredClass).warn(new Cn("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:b})),e.targetGeometry=((u=this.defaultsFromMap.extent)==null?void 0:u.center)||new pt({x:0,y:0,spatialReference:this.spatialReference})}(g=this.constraints)==null||g.fit(e),this._set("state",new WMe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new dX(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new gX,this._magnifierView.magnifier=this.magnifier;const r=new mX({view:this});this._set("labelManager",r);const s=new nMe({view:this});this._set("animationManager",s);const o=new yX({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",b=>this.fatalError=b.error),ge(()=>this.stationary,b=>i.stationary=b,Mn),ge(()=>this.background,b=>{i.background=b,this._magnifierView.background=b},Mn),ge(()=>this.magnifier,b=>this._magnifierView.magnifier=b,Mn),ge(()=>this.renderingOptions,b=>i.renderingOptions=b,Mn),ge(()=>this.highlightOptions,b=>i.highlightOptions=b,Mn),ge(()=>this.state.id,()=>i.state=this.state,Mn)],"map-view"),this._updateStageChildren();const c=this._resolveWhenReady;this._resolveWhenReady=[],c.forEach(b=>b(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:r,scale:s}=this.state.paddedViewState,o=new pt({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new XMe(ime.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new pX({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new fX(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const u of this.allLayerViews)u.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(ae(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const u=t.viewpoint.clone();u.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=u}const i=t.clone(),[r,s]=t.center;let o=null;try{o=this._project(new pt({x:r,y:s,spatialReference:t.spatialReference}),e)}catch(u){Rd()||Ie.getLogger(this.declaredClass).warn(new Cn("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:u}))}o||(o=new pt({x:0,y:0,spatialReference:e}));const c=t$(new Zl({targetGeometry:new pt,scale:0,rotation:0}),t.viewpoint,o);i.viewpoint=c;try{const g=[t.size[0]/2,t.size[1]/2],b=[g[0]+20,g[1]],S=t.toMap([0,0],b),{x:E,y:A}=this._project(new pt({x:S[0],y:S[1],spatialReference:t.spatialReference}),e);S[0]=E,S[1]=A,i.toScreen(S,S);const O=Q4e(g,S,b),L=Math.hypot(S[0]-g[0],S[1]-g[1])/20;!Number.isFinite(L)||Math.abs(L)>4?(c.rotation=0,c.targetGeometry=new pt({x:0,y:0,spatialReference:e})):(c.scale*=L,c.scale>Se("mapview-srswitch-adjust-rotation-scale-threshold")?c.rotation=0:c.rotation+=Number.isFinite(O)?O:0)}catch{}this._get("constraints").constrain(c,void 0),this._get("state").viewpoint=c,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const u of this.allLayerViews)u.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};ht.type="2d",v([_({readOnly:!0})],ht.prototype,"animationManager",void 0),v([_({constructOnly:!0})],ht.prototype,"deactivatedWebGLExtensions",void 0),v([_({constructOnly:!0})],ht.prototype,"debugWebGLExtensions",void 0),v([_({readOnly:!0})],ht.prototype,"featuresTilingScheme",void 0),v([_({readOnly:!0})],ht.prototype,"fullOpacity",void 0),v([_({readOnly:!0})],ht.prototype,"graphicsTileStore",null),v([_()],ht.prototype,"graphicsView",void 0),v([_({readOnly:!0})],ht.prototype,"state",void 0),v([_()],ht.prototype,"initialExtentRequired",null),v([_()],ht.prototype,"labelManager",void 0),v([_({readOnly:!0})],ht.prototype,"resourceManager",null),v([_({readOnly:!0})],ht.prototype,"textureManager",null),v([_({readOnly:!0})],ht.prototype,"mapViewNavigation",void 0),v([_({constructOnly:!0})],ht.prototype,"renderCanvas",void 0),v([_()],ht.prototype,"renderingOptions",void 0),v([_({readOnly:!0})],ht.prototype,"rendering",void 0),v([_({constructOnly:!0})],ht.prototype,"supersampleScreenshotsEnabled",void 0),v([_({readOnly:!0})],ht.prototype,"supportsGround",void 0),v([_()],ht.prototype,"_stationaryTimer",void 0),v([_()],ht.prototype,"_defaultsFromMapSettings",null),v([_()],ht.prototype,"_pePromise",void 0),v([_({readOnly:!0})],ht.prototype,"typeSpecificPreconditionsReady",null),v([_()],ht.prototype,"animation",null),v([_({type:CCe})],ht.prototype,"background",null),v([_({value:null,type:pt,dependsOn:["state.id","ready"]})],ht.prototype,"center",null),v([_({type:VZ})],ht.prototype,"constraints",null),v([_({value:null,type:vi,dependsOn:["state.id","ready"]})],ht.prototype,"extent",null),v([_()],ht.prototype,"floors",void 0),v([_({type:QZ})],ht.prototype,"highlightOptions",void 0),v([_({readOnly:!0})],ht.prototype,"inputManager",void 0),v([_()],ht.prototype,"map",void 0),v([_({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],ht.prototype,"padding",null),v([_()],ht.prototype,"resizeAlign",void 0),v([_({readOnly:!0,dependsOn:["state.id"]})],ht.prototype,"resolution",null),v([_({value:0,type:Number,dependsOn:["state.id","ready"]})],ht.prototype,"rotation",null),v([_({value:0,type:Number,dependsOn:["state.id","ready"]})],ht.prototype,"scale",null),v([_({constructOnly:!0})],ht.prototype,"spatialReferenceLocked",void 0),v([_()],ht.prototype,"stationary",null),v([_({type:eX,readOnly:!0})],ht.prototype,"timeline",void 0),v([_({readOnly:!0})],ht.prototype,"type",void 0),v([_({readOnly:!0})],ht.prototype,"updating",null),v([_({value:null,type:Zl,dependsOn:["state.id","ready"]})],ht.prototype,"viewpoint",null),v([_({value:-1,dependsOn:["state.id","ready"]})],ht.prototype,"zoom",null),v([_({readOnly:!0})],ht.prototype,"navigating",null),v([_({type:hX})],ht.prototype,"ui",void 0),ht=v([K("esri.views.MapView")],ht);const kCe=ht;function h$(e){var i,r,s,o;const t=e.getObjectId();return t?`${(o=(s=(i=e.layer)==null?void 0:i.uid)!=null?s:(r=e.sourceLayer)==null?void 0:r.uid)!=null?o:"MapView"}/${t}`:`"MapView/${e.uid}`}function jD(e,t,i,r,s){return o=>{if(o instanceof wr){if(o.layer===e)s==null||s();else{const c=e.allLayerViews.find(u=>u.layer===o.layer);c&&(r==null||r(c))}i(h$(o))}else{const c=e.allLayerViews.find(u=>u.layer===o);c&&t(c)}}}function zD(e,t){if(e)if(ax(e))for(const i of e)if(ax(i))for(const r of i)t(r);else t(i);else t(e)}function OCe(e){return(e==null?void 0:e.declaredClass)==="esri.WebMap"}let Ku=class extends WJ(gK(Tb)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new Xf,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};v([_({type:ZJ})],Ku.prototype,"elevationInfo",void 0),v([_(WA(Xf,"graphics"))],Ku.prototype,"graphics",void 0),v([_({type:["show","hide"]})],Ku.prototype,"listMode",void 0),v([_()],Ku.prototype,"screenSizePerspectiveEnabled",void 0),v([_({readOnly:!0})],Ku.prototype,"type",void 0),v([_({constructOnly:!0})],Ku.prototype,"internal",void 0),Ku=v([K("esri.layers.GraphicsLayer")],Ku);const I9=Ku;function PCe(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var MS={};(function(e,t){function i(){function s(p){if(typeof p=="number")return Q.Uc.ah(p);if(p==null)return null;if(Rs[p]!=null)return Q.Uc.ah(Rs[p]);throw Error("Unrecognised Unit Type")}function o(p){if(typeof p=="number")return Q.Uc.ah(p);if(p==null)return null;if(gu[p]!=null)return Q.Uc.ah(gu[p]);throw Error("Unrecognised Unit Type")}function c(p){if(p)switch(p){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function u(p,P,x,d){if(x==null||x.B())return null;switch(x.K()){case Q.sn.Point:return p.exportPoint(P,x,d);case Q.sn.Polygon:return p.exportPolygon(P,x,d);case Q.sn.Polyline:return p.exportPolyline(P,x,d);case Q.sn.MultiPoint:return p.exportMultipoint(P,x,d);case Q.sn.Envelope:return p.exportExtent(P,x,d)}return null}function g(p,P,x,d){if(x.K()!==Q.sn.Point)throw Error("Geometry not Point");return p.exportPoint(P,x,d)}function b(p,P,x){return p.convertToGEGeometry(P,x)}function S(p){var P=p.wkid;p=p.wkt;var x=xa.get(P||p);return x==null&&(P!==-1&&P!=null?(x=Q.Gg.create(P),xa.set(P,x)):p&&(x=Q.Gg.lP(p),xa.set(p,x)),wl.has(P||p)&&x.QW(wl.get(P||p))),x}function E(p){var P;if(p==null)return null;var x=S(p);return p=x.Id(),x=x.Mn(),(P={}).tolerance=x,P.unitType=p==null?-1:p.pd,P.unitID=p==null?-1:p.Fc(),P.unitBaseFactor=p==null?0:p.ci,P.unitSquareDerivative=p==null?0:Q.Uc.WF(p).Fc(),P}function A(p,P,x,d){return x==null?null:(x=Q.ac.clip(b(p,Le,x),b(p,Le,d),S(P)),u(p,Le,x,P))}function O(p,P,x,d){x=Q.ac.fl(b(p,Le,x),b(p,Le,d),S(P)),d=[];for(var l=0;l<x.length;l++)d.push(u(p,Le,x[l],P));return d}function L(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.contains(b(p,Le,x),b(p,Le,d),S(P))}function N(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.wP(b(p,Le,x),b(p,Le,d),S(P))}function z(p,P,x,d,l){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.ub(b(p,Le,x),b(p,Le,d),S(P),s(l))}function q(p,P,x,d){return!(x==null&&d!=null||d==null&&x!=null)&&Q.ac.Nb(b(p,Le,x),b(p,Le,d),S(P))}function Z(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.OS(b(p,Le,x),b(p,Le,d),S(P))}function ee(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.touches(b(p,Le,x),b(p,Le,d),S(P))}function ie(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.mY(b(p,Le,x),b(p,Le,d),S(P))}function ne(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.OP(b(p,Le,x),b(p,Le,d),S(P))}function oe(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.yU(b(p,Le,x),b(p,Le,d),S(P))}function me(p,P,x,d,l){if(x==null||d==null)throw Error("Illegal Argument Exception");return Q.ac.tB(b(p,Le,x),b(p,Le,d),S(P),l)}function fe(p,P,x){if(x==null)throw Error("Illegal Argument Exception");return Q.ac.ZS(b(p,Le,x),S(P))}function Ce(p,P,x){if(x==null)throw Error("Illegal Argument Exception");return x=Q.ac.$B(b(p,Le,x),S(P)),u(p,Le,x,P)}function _e(p,P,x,d){if(d===void 0&&(d=!1),x==null)throw Error("Illegal Argument Exception");if(Array.isArray(x)){var l=d,n=[];for(d=0;d<x.length;d++)n.push(b(p,Le,x[d]));for(x=Q.ac.eP(n,l),l=Array(x.length),d=0;d<x.length;d++)l[d]=u(p,Le,x[d],P);return l}return d=Q.ac.dP(b(p,Le,x),S(P)),u(p,Le,d,P)}function Ae(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");if(Array.isArray(x)){for(var l=[],n=0;n<x.length;n++)l.push(b(p,Le,x[n]));for(x=Q.ac.LP(l,b(p,Le,d),S(P)),d=Array(x.length),n=0;n<x.length;n++)d[n]=u(p,Le,x[n],P);return d}return n=Q.ac.km(b(p,Le,x),b(p,Le,d),S(P)),u(p,Le,n,P)}function Oe(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");if(Array.isArray(x)){for(var l=[],n=0;n<x.length;n++)l.push(b(p,Le,x[n]));for(x=Q.ac.RX(l,b(p,Le,d),S(P)),d=Array(x.length),n=0;n<x.length;n++)d[n]=u(p,Le,x[n],P);return d}return n=Q.ac.gp(b(p,Le,x),b(p,Le,d),S(P)),u(p,Le,n,P)}function je(p,P,x,d){if(x==null||d==null)throw Error("Illegal Argument Exception");if(Array.isArray(x)){for(var l=[],n=0;n<x.length;n++)l.push(b(p,Le,x[n]));for(x=Q.ac.MS(l,b(p,Le,d),S(P)),d=Array(x.length),n=0;n<x.length;n++)d[n]=u(p,Le,x[n],P);return d}return n=Q.ac.Fa(b(p,Le,x),b(p,Le,d),S(P)),u(p,Le,n,P)}function De(p,P,x,d){if(x==null)return null;var l=[];if(Array.isArray(x)){if(x.length===0)return null;for(d=0;d<x.length;d++)l.push(b(p,Le,x[d]))}else l.push(b(p,Le,x)),d!=null&&l.push(b(p,Le,d));return u(p,Le,Q.ac.fY(l,S(P)),P)}function nt(p,P,x,d,l,n,a,h){var f=0;if(n!=null)switch(n){case"round":f=0;break;case"bevel":f=1;break;case"miter":f=2;break;case"square":f=3}if(Array.isArray(x)){if(x==null)p=null;else if(x.length===0)p=[];else{var m=[];for(n=0;n<x.length;n++)m.push(b(p,Le,x[n]));for(x=Q.ac.wU(m,S(P),d,f,a,h,s(l)),d=Array(x.length),n=0;n<x.length;n++)d[n]=u(p,Le,x[n],P);p=d}return p}return x=Q.ac.offset(b(p,Le,x),S(P),d,f,a,h,s(l)),u(p,Le,x,P)}function mt(p,P,x,d,l,n){if(n===void 0&&(n=!1),Array.isArray(x)){if(!Array.isArray(d)){for(var a=[],h=0;h<x.length;h++)a.push(d);d=a}if(d.length!=x.length){if(d.length==0)throw Error("Illegal Argument Exception");a=[];var f=0;for(h=0;h<x.length;h++)d[h]===void 0?a.push(f):(a.push(d[h]),f=d[h]);d=a}return dt(p,P,x,d,l,!1,n,"geodesic",NaN)}return x=Q.ac.buffer(b(p,Le,x),S(P),d,s(l),!1,0,NaN),u(p,Le,x,P)}function ct(p,P,x,d,l,n,a,h){if(Array.isArray(x)){if(!Array.isArray(d)){for(var f=[],m=0;m<x.length;m++)f.push(d);d=f}if(d.length!==x.length){if(d.length===0)throw Error("Illegal Argument Exception");f=[];var y=0;for(m=0;m<x.length;m++)d[m]===void 0?f.push(y):(f.push(d[m]),y=d[m]);d=f}return dt(p,P,x,d,l,!0,n,a,h)}return a===void 0&&(a=NaN),x=Q.ac.buffer(b(p,Le,x),S(P),d,s(l),!0,c(n),a),u(p,Le,x,P)}function dt(p,P,x,d,l,n,a,h,f){if(f===void 0&&(f=NaN),x==null)return null;if(x.length===0)return[];for(var m=[],y=0;y<x.length;y++)m.push(b(p,Le,x[y]));for(x=Q.ac.HN(m,S(P),d,s(l),n,a,c(h),f),d=Array(x.length),y=0;y<x.length;y++)d[y]=u(p,Le,x[y],P);return d}function Nt(p,P,x,d,l){var n;return l===void 0&&(l=!0),x=Q.ac.iz(b(p,Le,x),b(p,Le,d),l),(n={}).coordinate=g(p,Le,x.az(),P),n.distance=x.cz(),n.isRightSide=x.Nz(),n.vertexIndex=x.Va(),n.isEmpty=x.B(),n}function Mr(p,P,x,d){var l;return x=Q.ac.jz(b(p,Le,x),b(p,Le,d)),(l={}).coordinate=g(p,Le,x.az(),P),l.distance=x.cz(),l.isRightSide=x.Nz(),l.vertexIndex=x.Va(),l.isEmpty=x.B(),l}function nn(p,P,x,d,l,n){var a;for(x=Q.ac.kz(b(p,Le,x),b(p,Le,d),l,n),d=[],l=0;l<x.length;l++)x[l].B()===!1&&d.push(((a={}).coordinate=g(p,Le,x[l].az(),P),a.distance=x[l].cz(),a.isRightSide=x[l].Nz(),a.vertexIndex=x[l].Va(),a.isEmpty=x[l].B(),a));return d}function ks(p,P,x,d,l,n){return x=Q.ac.LQ(b(p,Le,x),S(P),d,l,s(n)),u(p,Le,x,P)}function oo(p,P,x,d,l){return x=Q.ac.Sr(b(p,Le,x),S(P),d,s(l)),u(p,Le,x,P)}function $n(p,P,x,d,l,n){return n===void 0&&(n=0),x=Q.ac.Ry(b(p,Le,x),S(P),d,s(l),n),u(p,Le,x,P)}function Os(p,P,x,d){if(x==null)throw Error("Illegal Argument Exception");return Q.ac.EU(b(p,Le,x),S(P),o(d))}function wa(p,P,x,d){if(x==null)throw Error("Illegal Argument Exception");return Q.ac.FU(b(p,Le,x),S(P),s(d))}function _a(p,P,x,d,l){if(x==null)throw Error("Illegal Argument Exception");return Q.ac.RQ(b(p,Le,x),S(P),o(d),c(l))}function ao(p,P,x,d,l){if(x==null)throw Error("Illegal Argument Exception");return Q.ac.UQ(b(p,Le,x),S(P),s(d),c(l))}function fu(p){Q.IL.bind(p)}function Yd(p,P,x,d,l){var n=null,a=null;if(d){if(!l)throw Q.i.O("AOI missing Spatial Reference");n=b(p,Le,d),a=S(l).hh()}return(p=Q.iu.SR(S(P).hh(),S(x).hh(),n,a))!==null?p:null}function mu(p,P,x,d,l){var n=null,a=null;if(d){if(!l)throw Q.i.O("AOI missing Spatial Reference");n=b(p,Le,d),a=S(l).hh()}return Q.iu.TR(S(P).hh(),S(x).hh(),n,a)}function Kd(p,P,x,d,l,n){if(l===void 0&&(l=null),n===void 0&&(n=null),n){var a=new Q.tC;a.Xu=n.densificationStep,a.Lr=n.centralMeridianOfOutputGCS,n.clipWithInputHorizon&&a.KW(n.clipWithInputHorizon),n.clipWithOutputHorizon&&a.LW(n.clipWithOutputHorizon)}if(this.GY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(P.length===0)return[];if(l){if(!(n=l.getCachedGeTransformation(x,d)))e:{if(n=l,l=null,n){var h=n.getGTListEntry();if(h!==null){l=new Q.rC(null);for(var f=0,m=h.steps;f<m.length;f++){h=m[f];var y=new Q.Cx(h.geogtran);h.isInverse&&y.Lz(),l.add(y)}a=Q.xr.Pr(S(x).hh(),S(d).hh(),l,a),n.assignCachedGe(x,d,a),n=a;break e}}if(l===null&&n&&n.steps&&0<n.steps.length){for(l=new Q.rC(null),f=0,m=n.steps;f<m.length;f++)(h=m[f]).wkid!=-1&&h.wkid!=null?l.add(Q.Cx.create(h.wkid,h.isInverse)):l.add(Q.Cx.pP(h.wkt,h.isInverse));a=Q.xr.Pr(S(x).hh(),S(d).hh(),l,a),n.assignCachedGe(x,d,a),n=a}else n=Q.xr.Pr(S(x).hh(),S(d).hh(),l,a)}for(x=[],l=0;l<P.length;l++)a=P[l],x.push(yu(p,a,d,n))}else for(n=Q.xr.Pr(S(x).hh(),S(d).hh(),null),x=[],l=0;l<P.length;l++)a=P[l],x.push(yu(p,a,d,n));return x}function yu(p,P,x,d){return P=Q.ac.Bh(b(p,Le,P),d),u(p,Le,P,x)}function Zd(p,P){p!=null&&(p=p.wkid||p.wkt,wl.has(p),wl.set(p,P),xa.has(p)&&xa.delete(p))}function Xd(p){p!=null&&(p=p.wkid||p.wkt,wl.has(p)&&(wl.delete(p),xa.has(p)&&xa.delete(p)))}function zc(p,P,x,d){if(x==null||d==null)return[];var l=[],n=0;for(x=Q.ac.LS(b(p,Le,x),b(p,Le,d),S(P))||[];n<x.length;n++)l.push(u(p,Le,x[n],P));return l}var Wi,Q,Tr,kn,Et=this&&this.__extends||function(){function p(P,x){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,l){d.__proto__=l}||function(d,l){for(var n in l)l.hasOwnProperty(n)&&(d[n]=l[n])})(P,x)}return function(P,x){function d(){this.constructor=P}p(P,x),P.prototype=x===null?Object.create(x):(d.prototype=x.prototype,new d)}}();(function(p){var P;(P=p.sn||(p.sn={}))[P.Unknown=0]="Unknown",P[P.Point=33]="Point",P[P.Line=322]="Line",P[P.Envelope=197]="Envelope",P[P.MultiPoint=550]="MultiPoint",P[P.Polyline=1607]="Polyline",P[P.Polygon=1736]="Polygon",function(d){d[d.enumMild=0]="enumMild",d[d.enumMedium=1]="enumMedium",d[d.enumHot=2]="enumHot"}(p.TK||(p.TK={}));var x=function(){function d(){this.description=null,this.QA=0}return d.prototype.K=function(){return 0},d.prototype.Eb=function(){return-1},d.prototype.Pf=function(l){this.wc(),l!=this.description&&this.un(l)},d.prototype.un=function(){},d.prototype.Ll=function(l){this.wc(),l!=this.description&&(l=p.fe.xR(this.description,l))!=this.description&&this.un(l)},d.prototype.hasAttribute=function(l){return this.description.hasAttribute(l)},d.prototype.se=function(l){this.wc(),this.description.hasAttribute(l)||(l=p.fe.wR(this.description,l),this.un(l))},d.prototype.Vg=function(){return null},d.prototype.dn=function(){},d.prototype.A=function(){},d.prototype.So=function(){},d.prototype.yc=function(l){this.A(l)},d.prototype.B=function(){return!0},d.prototype.Pa=function(){},d.prototype.Pc=function(){},d.prototype.Ja=function(){return null},d.prototype.copyTo=function(){},d.prototype.He=function(){return 0},d.prototype.Rb=function(){return 0},d.prototype.dG=function(){return this.hasAttribute(1)},d.uf=function(l){return 1+((192&l)>>6)>>1},d.Tn=function(l){return(32&l)!=0},d.PS=function(l){return(128&l)!=0},d.zd=function(l){return(256&l)!=0},d.zj=function(l){return(512&l)!=0},d.Ic=function(l){return(1024&l)!=0},d.prototype.Qf=function(){var l=this.Ja();return this.copyTo(l),l},d.prototype.ng=function(){return null},d.kg=function(l){var n=l.Ja();return l.copyTo(n),n},d.prototype.wc=function(){0<=this.QA&&(this.QA+=2147483649)},d.zx=function(l){var n=l.K();if(d.zj(n))return l.I();if(l.B())return 0;if(n==197)return 4;if(n==33)return 1;if(d.zd(n))return 2;throw p.i.ga("missing type")},d}();p.ba=x})(Q||(Q={})),Tr=Q||(Q={}),kn=function(){function p(){this.y=this.x=0}return p.construct=function(P,x){var d=new p;return d.x=P,d.y=x,d},p.cl=function(P){var x=new p;return x.x=P.x,x.y=P.y,x},p.prototype.na=function(P,x){this.x=P,this.y=x},p.prototype.N=function(P){this.x=P.x,this.y=P.y},p.prototype.hq=function(P,x){return this.x===P&&this.y===x},p.prototype.Mz=function(P){return 2220446049250313e-31>=Math.abs(this.x-P.x)&&2220446049250313e-31>=Math.abs(this.y-P.y)},p.prototype.rb=function(P){return this.x===P.x&&this.y===P.y},p.prototype.Nb=function(P){return P==this||P instanceof p&&this.x==P.x&&this.y==P.y},p.prototype.sub=function(P){this.x-=P.x,this.y-=P.y},p.prototype.vc=function(P,x){this.x=P.x-x.x,this.y=P.y-x.y},p.prototype.add=function(P,x){x!==void 0?(this.x=P.x+x.x,this.y=P.y+x.y):(this.x+=P.x,this.y+=P.y)},p.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},p.prototype.nt=function(P){this.x=-P.x,this.y=-P.y},p.prototype.IS=function(P,x,d){this.x=P.x*(1-d)+x.x*d,this.y=P.y*(1-d)+x.y*d},p.prototype.Dt=function(P,x){this.x=this.x*P+x.x,this.y=this.y*P+x.y},p.prototype.BW=function(P,x,d){this.x=x.x*P+d.x,this.y=x.y*P+d.y},p.prototype.scale=function(P){this.x*=P,this.y*=P},p.prototype.compare=function(P){return this.y<P.y?-1:this.y>P.y?1:this.x<P.x?-1:this.x>P.x?1:0},p.prototype.normalize=function(){var P=this.length();P==0&&(this.x=1,this.y=0),this.x/=P,this.y/=P},p.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},p.prototype.Uk=function(){return this.x*this.x+this.y*this.y},p.ub=function(P,x){return Math.sqrt(this.zc(P,x))},p.Jy=function(P,x,d,l){return P-=d,x-=l,Math.sqrt(P*P+x*x)},p.prototype.Sh=function(P){return this.x*P.x+this.y*P.y},p.prototype.aD=function(P){return Math.abs(this.x*P.x)+Math.abs(this.y*P.y)},p.prototype.yi=function(P){return this.x*P.y-this.y*P.x},p.prototype.Ct=function(P,x){var d=-this.x*x+this.y*P;this.x=this.x*P+this.y*x,this.y=d},p.prototype.Jv=function(){var P=this.x;this.x=-this.y,this.y=P},p.prototype.HG=function(P){this.x=-P.y,this.y=P.x},p.prototype.cr=function(){var P=this.x;this.x=this.y,this.y=-P},p.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},p.pu=function(P,x){var d=P.su(),l=x.su();return l==d?0>(P=P.yi(x))?1:0<P?-1:0:d<l?-1:1},p.zc=function(P,x){var d=P.x-x.x;return d*d+(P=P.y-x.y)*P},p.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},p.prototype.Sc=function(){this.y=this.x=NaN},p.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},p.prototype.offset=function(P,x){var d=p.ub(P,x),l=p.construct(this.x,this.y);if(d==0)return p.ub(l,P);var n=new p;return n.N(x),n.sub(P),l.sub(P),l.yi(n)/d},p.Wq=function(P,x,d){var l=new Tr.Xb;l.set(x.x),l.sub(P.x);var n=new Tr.Xb;n.set(d.y),n.sub(P.y);var a=new Tr.Xb;a.set(x.y),a.sub(P.y);var h=new Tr.Xb;return h.set(d.x),h.sub(P.x),l.Bg(n),a.Bg(h),l.sub(a),l.rs()?(l=new Tr.jp(x.x),n=new Tr.jp(P.x),a=new Tr.jp(P.y),l=l.kt(n),P=(P=new Tr.jp(d.y)).kt(a),x=(x=new Tr.jp(x.y)).kt(a),d=(d=new Tr.jp(d.x)).kt(n),l=l.nr(P),x=x.nr(d),(l=l.nr(x)).iT()?-1:l.aS()?1:0):0>(d=l.value())?-1:0<d?1:0},p.prototype.dc=function(){return Tr.P.wj(Tr.P.wj())},p}(),Tr.h=kn,function(p){var P=function(){function x(d){this.Ay=this.Ot=0,this.KX=d}return x.prototype.reset=function(){this.Ay=this.Ot=0},x.prototype.add=function(d){d-=this.Ay;var l=this.Ot+d;this.Ay=l-this.Ot-d,this.Ot=l},x.prototype.sub=function(d){this.add(-d)},x.prototype.tm=function(){return this.KX+this.Ot},x}();p.Ex=P,p.mc=function(){function x(){}return x.En=function(d,l){return 0<=l?Math.abs(d):-Math.abs(d)},x.sign=function(d){return 0>d?-1:0<d?1:0},x.MK=function(d){return d-360*Math.floor(d/360)},x.round=function(d){return Math.floor(d+.5)},x.ox=function(d){return d*d},x.jq=function(d,l,n){return .5>=n?d+(l-d)*n:l-(l-d)*(1-n)},x.JG=function(d,l,n,a){.5>=n?(a.x=d.x+(l.x-d.x)*n,a.y=d.y+(l.y-d.y)*n):(a.x=l.x-(l.x-d.x)*(1-n),a.y=l.y-(l.y-d.y)*(1-n))},x.gT=function(d,l,n,a,h,f){.5>=h?(f.x=d+(n-d)*h,f.y=l+(a-l)*h):(f.x=n-(n-d)*(1-h),f.y=a-(a-l)*(1-h))},x}()}(Q||(Q={})),function(p){var P=function(x){function d(){var l=x.call(this)||this;return l.ta=0,l.oa=0,l.qa=0,l.ma=0,l.la=null,l}return Et(d,x),d.prototype.bc=function(){return p.h.construct(this.ta,this.oa)},d.prototype.$p=function(l){l.x=this.ta,l.y=this.oa},d.prototype.Ec=function(l){this.gm(0,l)},d.prototype.UB=function(l,n){this.gm(0,p.h.construct(l,n))},d.prototype.Vo=function(l){this.cD(0,l)},d.prototype.setStart=function(l){this.pD(0,l)},d.prototype.yv=function(l,n){return this.Pd(0,l,n)},d.prototype.TB=function(l,n,a){this.vn(0,l,n,a)},d.prototype.xc=function(){return p.h.construct(this.qa,this.ma)},d.prototype.Vr=function(l){l.x=this.qa,l.y=this.ma},d.prototype.Rc=function(l){this.gm(1,l)},d.prototype.Sl=function(l,n){this.gm(1,p.h.construct(l,n))},d.prototype.Ro=function(l){this.cD(1,l)},d.prototype.setEnd=function(l){this.pD(1,l)},d.prototype.jv=function(l,n){return this.Pd(1,l,n)},d.prototype.JB=function(l,n,a){this.vn(1,l,n,a)},d.prototype.Eb=function(){return 1},d.prototype.B=function(){return this.Bc()},d.prototype.Pa=function(){},d.prototype.He=function(){return 0},d.prototype.Fa=function(l,n,a,h,f){return this.FM(l,n,a,h,f)},d.prototype.isIntersecting=function(l,n){return this.Br(l,n,!1)!=0},d.prototype.ss=function(l,n){return this.tu(l,n,!1)},d.prototype.tu=function(){return null},d.prototype.Bc=function(){return!1},d.prototype.$x=function(l){if(this.wc(),this.la==null&&0<l)this.la=p.P.mg(2*l);else if(this.la!=null&&this.la.length<2*l){for(var n=this.la.slice(0),a=this.la.length;a<2*l;a++)n[a]=0;this.la=n}},d.bM=function(l,n,a){if(0<a)var h=0;for(var f=0;f<a;f++)n[0+h]=l[0],h++},d.prototype.gm=function(l,n){l!=0?(this.qa=n.x,this.ma=n.y):(this.ta=n.x,this.oa=n.y)},d.prototype.un=function(l){if(this.la!=null){for(var n=p.fe.Kw(l,this.description),a=[],h=d.Ig(this.description,0),f=d.Ig(this.description,1),m=d.Ig(l,0),y=d.Ig(l,1),w=0,I=1,M=l.Ba;I<M;I++){var T=l.ld(I),$=p.sa.Wa(T);if(n[I]==-1){var F=p.sa.te(T);for(T=0;T<$;T++)a[m+w]=F,a[y+w]=F,w++}else for(F=this.description.bk(n[I])-2,T=0;T<$;T++)a[m+w]=this.la[h+F],a[y+w]=this.la[f+F],w++,F++}this.la=a}this.description=l},d.prototype.cD=function(l,n){if(this.Bc())throw p.i.ga("empty geometry");n.Pf(this.description),n.Bc()&&n.wn();for(var a=0;a<this.description.Ba;a++)for(var h=this.description.Fd(a),f=0,m=p.sa.Wa(h);f<m;f++){var y=this.Pd(l,h,f);n.setAttribute(h,f,y)}},d.prototype.pD=function(l,n){if(this.wc(),n.Bc())throw p.i.ga("empty geometry");for(var a=n.description,h=0,f=a.Ba;h<f;h++)for(var m=a.Fd(h),y=p.sa.Wa(m),w=0;w<y;w++){var I=n.Vc(m,w);this.vn(l,m,w,I)}},d.prototype.Pd=function(l,n,a){if(this.Bc())throw p.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return l!=0?a!=0?this.ma:this.qa:a!=0?this.oa:this.ta;if(a>=p.sa.Wa(n))throw p.i.de();var h=this.description.Rf(n);return 0<=h?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[d.Ig(this.description,l)+this.description.bk(h)-2+a]):p.sa.te(n)},d.prototype.vn=function(l,n,a,h){if(this.wc(),a>=p.sa.Wa(n))throw p.i.de();var f=this.description.Rf(n);0>f&&(this.se(n),f=this.description.Rf(n)),n==0?l!=0?a!=0?this.ma=h:this.qa=h:a!=0?this.oa=h:this.ta=h:(this.la==null&&this.$x(this.description.Be.length-2),this.la[d.Ig(this.description,l)+this.description.bk(f)-2+a]=h)},d.prototype.copyTo=function(l){if(l.K()!=this.K())throw p.i.O();l.description=this.description,l.$x(this.description.Be.length-2),d.bM(this.la,l.la,2*(this.description.Be.length-2)),l.ta=this.ta,l.oa=this.oa,l.qa=this.qa,l.ma=this.ma,l.wc(),this.qp(l)},d.prototype.Vg=function(l,n){var a=new p.Oc;return this.Bc()?(a.Pa(),a):(a.pa=this.Pd(0,l,n),a.wa=a.pa,a.Nk(this.Pd(1,l,n)),a)},d.prototype.UI=function(l){this.Bc()?l.Pa():(l.pa=this.Pd(0,0,0),l.wa=l.pa,l.Nk(this.Pd(1,0,0)))},d.prototype.Vw=function(l,n){n.Pf(this.description),n.Db(this.ic(l));for(var a=1,h=this.description.Ba;a<h;a++)for(var f=this.description.Fd(a),m=p.sa.Wa(f),y=0;y<m;y++){var w=this.Vc(l,f,y);n.setAttribute(f,y,w)}},d.prototype.AM=function(l){if(this.description!=l.description||this.ta!=l.ta||this.qa!=l.qa||this.oa!=l.oa||this.ma!=l.ma)return!1;for(var n=0;n<2*(this.description.Be.length-2);n++)if(this.la[n]!=l.la[n])return!1;return!0},d.prototype.wG=function(){return this.ta==this.qa&&this.oa==this.ma},d.prototype.reverse=function(){var l=this.ta;this.ta=this.qa,this.qa=l,l=this.oa,this.oa=this.ma,this.ma=l,l=1;for(var n=this.description.Ba;l<n;l++)for(var a=this.description.ld(l),h=0,f=p.sa.Wa(a);h<f;h++){var m=this.Pd(0,a,h),y=this.Pd(1,a,h);this.vn(0,a,h,y),this.vn(1,a,h,m)}},d.prototype.Br=function(l,n,a){var h=l.K();if(this.K()===322){if(h==322)return p.zb.JM(this,l,n,a);throw p.i.Ra()}throw p.i.Ra()},d.prototype.FM=function(l,n,a,h,f){var m=l.K();if(this.K()===322){if(m==322)return p.zb.Yx(this,l,n,a,h,f);throw p.i.Ra()}throw p.i.Ra()},d.prototype.Sx=function(){return null},d.Ig=function(l,n){return n*(l.Be.length-2)},d.prototype.ic=function(l,n){if(n===void 0)return n=new p.h,this.ic(l,n),n;p.mc.gT(this.ta,this.oa,this.qa,this.ma,l,n)},d.prototype.ge=function(){return null},d.prototype.$F=function(){return null},d.prototype.fq=function(){return null},d.prototype.Di=function(){return null},d.prototype.Rn=function(){return null},d.prototype.lg=function(){return null},d.prototype.Tx=function(l,n){return n!==void 0?this.ux(n)-this.ux(l):this.ux(l)},d.prototype.qp=function(){},d.prototype.fl=function(){return null},d.prototype.dh=function(){},d.prototype.Vc=function(){return null},d.prototype.Me=function(){return null},d.prototype.ux=function(){return null},d.prototype.IG=function(){return null},d.prototype.ub=function(l,n){if(!n&&this.Br(l,0,!1)!=0)return 0;n=17976931348623157e292;var a=this.bc(),h=l.ge(a,!1);return a.sub(l.ic(h)),(a=a.length())<n&&(n=a),a=this.xc(),h=l.ge(a,!1),a.sub(l.ic(h)),(a=a.length())<n&&(n=a),a=l.bc(),h=this.ge(a,!1),a.sub(this.ic(h)),(a=a.length())<n&&(n=a),a=l.xc(),h=this.ge(a,!1),a.sub(this.ic(h)),(a=a.length())<n&&(n=a),n},d.prototype.ng=function(){return p.si.im(this,null)},d}(p.ba);p.NC=P}(Q||(Q={})),new Q.h,function(p){var P;(P=p.VK||(p.VK={}))[P.Unknown=-1]="Unknown",P[P.Not=0]="Not",P[P.Weak=1]="Weak",P[P.Strong=2]="Strong",function(d){d[d.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",d[d.IsWeakSimple=2]="IsWeakSimple",d[d.IsStrongSimple=4]="IsStrongSimple",d[d.DirtyOGCFlags=8]="DirtyOGCFlags",d[d.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",d[d.DirtyExactIntervals=64]="DirtyExactIntervals",d[d.DirtyLooseIntervals=128]="DirtyLooseIntervals",d[d.DirtyIntervals=192]="DirtyIntervals",d[d.DirtyIsEnvelope=256]="DirtyIsEnvelope",d[d.DirtyLength2D=512]="DirtyLength2D",d[d.DirtyRingAreas2D=1024]="DirtyRingAreas2D",d[d.DirtyCoordinates=1993]="DirtyCoordinates",d[d.DirtyAllInternal=65535]="DirtyAllInternal",d[d.DirtyAll=16777215]="DirtyAll"}(p.HK||(p.HK={}));var x=function(d){function l(){var n=d.call(this)||this;return n.Jm=65535,n.xa=0,n.Rg=-1,n.Cb=null,n}return Et(l,d),l.prototype.qp=function(){},l.prototype.Zx=function(){},l.prototype.ey=function(){},l.prototype.I=function(){return this.xa},l.prototype.B=function(){return this.Bc()},l.prototype.Bc=function(){return this.xa==0},l.prototype.ck=function(n){return(this.Jm&n)!=0},l.prototype.Nf=function(n,a){this.Jm=a?this.Jm|n:this.Jm&~n},l.prototype.oc=function(){this.ck(32)&&this.XM()},l.prototype.vx=function(){if(this.Bc())throw p.i.ga("This operation was performed on an Empty Geometry.")},l.prototype.we=function(n,a){if(0>n||n>=this.xa)throw p.i.ga("index out of bounds");this.oc(),a.Pf(this.description),a.B()&&a.wn();for(var h=0;h<this.description.Ba;h++)for(var f=this.description.Fd(h),m=0,y=p.sa.Wa(f);m<y;m++){var w=this.Aa[h].gg(y*n+m);a.setAttribute(f,m,w)}},l.prototype.It=function(n,a){this.oc();for(var h=a.description,f=0;f<h.Ba;f++)for(var m=h.Fd(f),y=p.sa.Wa(m),w=0;w<y;w++){var I=a.Vc(m,w);this.setAttribute(m,n,w,I)}},l.prototype.D=function(n,a){if(0>n||n>=this.I())throw p.i.de();this.oc(),this.Aa[0].uc(2*n,a)},l.prototype.Oa=function(n){var a=new p.h;return this.D(n,a),a},l.prototype.Hc=function(n,a){this.Aa[0].uc(2*n,a)},l.prototype.Db=function(n,a,h){if(0>n||n>=this.xa)throw p.i.de();this.oc();var f=this.Aa[0];h!==void 0?(f.write(2*n,a),f.write(2*n+1,h)):f.Vt(2*n,a),this.Qc(1993)},l.prototype.xz=function(){if(void 0>=this.I())throw p.i.de();this.oc();var n=this.Aa[0],a=new p.Od;return a.x=n.read(NaN),a.y=n.read(NaN),a.z=this.hasAttribute(1)?this.Aa[1].gg(void 0):p.sa.te(1),a},l.prototype.ZB=function(n){if(0>n||n>=this.I())throw p.i.de();this.se(1),this.oc(),this.Qc(1993);var a=this.Aa[0];a.write(2*n,(void 0).x),a.write(2*n+1,(void 0).y),this.Aa[1].rr(n,(void 0).z)},l.prototype.Vc=function(n,a,h){if(0>a||a>=this.xa)throw p.i.de();var f=p.sa.Wa(n);if(h>=f)throw p.i.de();this.oc();var m=this.description.Rf(n);return 0<=m?this.Aa[m].gg(a*f+h):p.sa.te(n)},l.prototype.tF=function(n,a){return this.Vc(n,a,void 0)},l.prototype.setAttribute=function(n,a,h,f){if(0>a||a>=this.xa)throw p.i.de();var m=p.sa.Wa(n);if(h>=m)throw p.i.de();this.se(n),this.oc(),n=this.description.Rf(n),this.Qc(1993),this.Aa[n].rr(a*m+h,f)},l.prototype.vb=function(n){return this.vx(),this.se(n),this.oc(),this.Aa[this.description.Rf(n)]},l.prototype.kn=function(n,a){if(a!=null&&p.sa.Vp(n)!=a.Vp())throw p.i.O();this.se(n),n=this.description.Rf(n),this.Aa==null&&(this.Aa=p.Zc.lI(this.description.Ba)),this.Aa[n]=a,this.Qc(16777215)},l.prototype.un=function(n){var a=null;if(this.Aa!=null){var h=p.fe.Kw(n,this.description);a=[];for(var f=0,m=n.Ba;f<m;f++)h[f]!=-1&&(a[f]=this.Aa[h[f]])}this.description=n,this.Aa=a,this.Rg=-1,this.Qc(16777215)},l.prototype.vD=function(n){this.yu(!0),n instanceof p.l?this.aa.A(n):this.aa.So(n)},l.prototype.WM=function(n){this.yu(!1),n instanceof p.l?this.aa.A(n):this.aa.So(n)},l.prototype.dn=function(n){this.yu(!0),this.aa.copyTo(n)},l.prototype.A=function(n){this.vD(n)},l.prototype.So=function(n){this.vD(n)},l.prototype.yc=function(n){this.WM(n)},l.prototype.Vg=function(n,a){var h=new p.Oc;return this.Bc()?(h.Pa(),h):(this.yu(!0),this.aa.Vg(n,a))},l.prototype.dc=function(){var n=this.description.dc();if(!this.Bc())for(var a=this.I(),h=0,f=this.description.Ba;h<f;h++)n=this.Aa[h].Cn(n,0,a*p.sa.Wa(this.description.Fd(h)));return n},l.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof l&&this.description.Nb(n.description))||this.Bc()!=n.Bc())return!1;if(this.Bc())return!0;var a=this.I();if(a!=n.I())return!1;for(var h=0;h<this.description.Ba;h++){var f=this.description.ld(h),m=this.vb(f),y=n.vb(f);if(!m.Nb(y,0,a*p.sa.Wa(f)))return!1}return!0},l.prototype.copyTo=function(n){if(n.K()!=this.K())throw p.i.O();this.ZC(n)},l.prototype.ZC=function(n){this.oc(),n.description=this.description,n.Aa=null;var a=this.description.Ba,h=null;if(this.Aa!=null){h=[];for(var f=0;f<a;f++)this.Aa[f]!=null&&(h[f]=this.Aa[f].BB(this.I()*p.sa.Wa(this.description.Fd(f))))}this.aa!=null?(n.aa=this.aa.Ja(),this.aa.copyTo(n.aa)):n.aa=null,n.xa=this.xa,n.Jm=this.Jm,n.Aa=h;try{this.qp(n)}catch{throw n.Pa(),p.i.hu()}},l.prototype.rD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},l.prototype.Qc=function(n){n==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=n,this.gM(),this.wc()},l.prototype.yu=function(n){if(this.oc(),this.ck(192))if(this.aa==null?this.aa=new p.Hh(this.description):this.aa.Pf(this.description),this.B())this.aa.Pa();else{this.dy(n);for(var a=1;a<this.description.Ba;a++)for(var h=this.description.Fd(a),f=p.sa.Wa(h),m=this.Aa[a],y=0;y<f;y++){var w=new p.Oc;w.Pa();for(var I=0;I<this.xa;I++){var M=m.gg(I*f+y);w.$b(M)}this.aa.setInterval(h,y,w)}n&&this.Nf(192,!1)}},l.prototype.dy=function(){this.aa.Pa();for(var n=this.Aa[0],a=new p.h,h=0;h<this.xa;h++)n.uc(2*h,a),this.aa.$b(a)},l.prototype.Ap=function(n){n.Pa();for(var a=this.Aa[0],h=new p.h,f=0;f<this.xa;f++)a.uc(2*f,h),n.$b(h)},l.prototype.XM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=p.Zc.lI(this.description.Ba)),this.Rg=2147483647;for(var n=0;n<this.description.Ba;n++){var a=this.description.Fd(n);if(this.Aa[n]!=null){var h=p.sa.Wa(a),f=p.P.truncate(this.Aa[n].size/h);f<this.xa&&(f=p.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[n].resize(f*h,p.sa.te(a))),f<this.Rg&&(this.Rg=f)}else this.Aa[n]=p.Zc.TE(a,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},l.prototype.fm=function(n){if(0>n)throw p.i.O();n!=this.xa&&(this.xa=n,this.Qc(65535))},l.prototype.qm=function(n){if(!this.ck(1)){if(!this.ck(2))return 0;if(this.LT>=n)return this.ck(8)?1:2}return-1},l.prototype.Eh=function(n,a){if(this.LT=a,n==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),n==0)this.Nf(2,!1),this.Nf(4,!1);else if(n==1)this.Nf(2,!0),this.Nf(4,!1);else{if(n!=2)throw p.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},l.prototype.gM=function(){this.Cb!=null&&(this.Cb=null)},l.prototype.fD=function(n,a,h,f){if(0>n||n>=this.xa||0>a||a>=this.xa)throw p.i.ga("index out of bounds");this.oc(),f.Pf(this.description),f.B()&&f.wn();for(var m=0;m<this.description.Ba;m++)for(var y=this.description.Fd(m),w=0,I=p.sa.Wa(y);w<I;w++){var M=this.Aa[m].gg(I*n+w),T=this.Aa[m].gg(I*a+w);f.setAttribute(y,w,p.mc.jq(M,T,h))}},l.prototype.Ar=function(n,a){var h=this.Aa[0].o,f=h[2*n]-h[2*a];return n=h[2*n+1]-h[2*a+1],Math.sqrt(f*f+n*n)},l.prototype.FR=function(n){if(0>n||n>=this.xa)throw p.i.de();this.oc();var a=new p.Ta;a.Pf(this.description),a.B()&&a.wn();for(var h=0;h<this.description.Ba;h++)for(var f=this.description.ld(h),m=0,y=p.sa.Wa(f);m<y;m++){var w=this.Aa[h].gg(y*n+m);a.setAttribute(f,m,w)}return a},l.prototype.Fh=function(n,a){if(0>n||n>=this.xa)throw p.i.de();if(a.B())throw p.i.O();this.oc();for(var h=a.description,f=0;f<h.Ba;f++)for(var m=h.ld(f),y=p.sa.Wa(m),w=0;w<y;w++){var I=a.Vc(m,w);this.setAttribute(m,n,w,I)}},l.prototype.nu=function(){return null},l.prototype.hj=function(){return null},l}(p.ba);p.Fx=x}(Q||(Q={})),function(p){var P=function(){function x(){this.ob=this.ao=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new p.ad(7),this.ao=null}return x.prototype.Xo=function(d){this.ao=d},x.prototype.MP=function(){this.Tv=!1},x.prototype.Ee=function(d){this.ob.Ee(d)},x.prototype.Rr=function(d){var l=this.ob.De();return this.nX(l),this.qX(d,l),l},x.prototype.HP=function(d){this.ob.kd(d)},x.prototype.addElement=function(d,l){return l==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),l=this.Ne),this.AD(d,0,l)},x.prototype.ED=function(d){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.AD(d,1,this.Ne)},x.prototype.zn=function(d){this.Ne==-1&&(this.Ne=this.Rr(-1));var l=this.Ne,n=this.ob.o;if(l==-1||n[7*l]==-1)return d=this.ob.Nl([-1,-1,-1,d,this.il(),-1,-1]),(n=this.ob.o)[7*l]=d,this.xp(-1,d,l,n),d;var a=l==-1?-1:n[7*l+2];return d=this.ob.Nl([-1,-1,a,d,this.il(),-1,-1]),(n=this.ob.o)[7*a+1]=d,this.ky(d,n),n[7*d+2]===-1&&(n[7*l]=d),this.xp(-1,d,l,n),d},x.prototype.Bu=function(d,l,n,a){var h=-1;h==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),h=this.Ne);var f=this.ob.o;if(h==-1||f[7*h]==-1)return n=this.ob.Nl([-1,-1,-1,n,this.il(),-1,-1]),(f=this.ob.o)[7*h]=n,this.xp(-1,n,h,f),n;if(a){a=l!=-1?this.ao.compare(this,n,l):-1;var m=d!=-1?this.ao.compare(this,n,d):1}else a=-1,m=1;if(a==0||m==0)return f[7*h+3]=a==0?l:d,-1;for((l!=-1&&d!=-1?this.Vm>p.P.XA(this.Vm)>>1:l!=-1)?d=l:a=m,l=!0;;){if(0>a){if((m=f[7*d])==-1){a=d,n=this.ob.Nl([-1,-1,d,n,this.il(),-1,-1]),(f=this.ob.o)[7*d]=n;break}d=m}else{if((m=f[7*d+1])==-1){a=f[7*d+6],n=this.ob.Nl([-1,-1,d,n,this.il(),-1,-1]),(f=this.ob.o)[7*d+1]=n;break}d=m}l&&(a*=-1,l=!1)}return this.ky(n,f),f[7*n+2]===-1&&(f[7*h]=n),this.xp(a,n,h,f),n},x.prototype.AF=function(){return this.dR(this.Ne)},x.prototype.wd=function(d,l){l=l==-1?this.Ne:l,this.Tv?this.GP(d,l):this.eY(d,l)},x.prototype.search=function(d,l){for(l=this.uv(l);l!=-1;){var n=this.ao.compare(this,d,l);if(n==0)return l;l=0>n?this.nl(l):this.Zp(l)}return-1},x.prototype.DW=function(d){for(var l=this.uv(-1),n=-1;l!=-1;){var a=d.compare(this,l);if(a==0)return l;0>a?l=this.nl(l):(n=l,l=this.Zp(l))}return n},x.prototype.pJ=function(d){for(var l=this.uv(-1),n=-1;l!=-1;){var a=d.compare(this,l);if(a==0)return l;0>a?(n=l,l=this.nl(l)):l=this.Zp(l)}return n},x.prototype.ka=function(d){return this.ob.U(d,3)},x.prototype.nl=function(d){return this.ob.U(d,0)},x.prototype.Zp=function(d){return this.ob.U(d,1)},x.prototype.getParent=function(d){return this.ob.U(d,2)},x.prototype.lb=function(d){return this.ob.U(d,6)},x.prototype.xe=function(d){return this.ob.U(d,5)},x.prototype.sc=function(d){return d==-1?this.ml(this.Ne):this.ml(d)},x.prototype.Gc=function(d){return d==-1?this.bs(this.Ne):this.bs(d)},x.prototype.UR=function(d){return d==-1?this.XF(this.Ne):this.XF(d)},x.prototype.Uj=function(d,l){this.IB(d,l)},x.prototype.uv=function(d){return d==-1?this.TF(this.Ne):this.TF(d)},x.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},x.prototype.size=function(d){return d==-1?this.VF(this.Ne):this.VF(d)},x.prototype.FN=function(d,l){for(var n=l[7*d],a=l[7*d+1],h=l[7*d+4];n!=-1||a!=-1;){var f=n!=-1?l[7*n+4]:2147483647;if(a=a!=-1?l[7*a+4]:2147483647,h<=Math.min(f,a))break;f<=a?this.nJ(n,l):this.mJ(d,l),n=l[7*d],a=l[7*d+1]}},x.prototype.ky=function(d,l){if(this.Tv)for(var n=l[7*d+4],a=l[7*d+2];a!=-1&&l[7*a+4]>n;)l[7*a]==d?this.nJ(d,l):this.mJ(a,l),a=l[7*d+2]},x.prototype.mJ=function(d,l){var n=l[7*d+1];l[7*n+2]=l[7*d+2],l[7*d+2]=n;var a=l[7*n];l[7*d+1]=a,a!=-1&&(l[7*a+2]=d),l[7*n]=d,(a=l[7*n+2])!=-1&&(l[7*a]==d?l[7*a]=n:l[7*a+1]=n)},x.prototype.nJ=function(d,l){var n=l[7*d+2];l[7*d+2]=l[7*n+2],l[7*n+2]=d;var a=l[7*d+1];l[7*n]=a,a!=-1&&(l[7*a+2]=n),l[7*d+1]=n,(a=l[7*d+2])!=-1&&(l[7*a]===n?l[7*a]=d:l[7*a+1]=d)},x.prototype.Rk=function(d,l){this.ob.T(d,2,l)},x.prototype.OB=function(d,l){this.ob.T(d,0,l)},x.prototype.SB=function(d,l){this.ob.T(d,1,l)},x.prototype.RB=function(d,l){this.ob.T(d,5,l)},x.prototype.fx=function(d,l){this.ob.T(d,6,l)},x.prototype.SJ=function(d,l){this.ob.T(l,0,d)},x.prototype.nX=function(d){this.ob.T(d,4,0)},x.prototype.qX=function(d,l){this.ob.T(l,5,d)},x.prototype.TF=function(d){return d==-1?-1:this.ob.U(d,0)},x.prototype.ml=function(d){return d==-1?-1:this.ob.U(d,1)},x.prototype.bs=function(d){return d==-1?-1:this.ob.U(d,2)},x.prototype.dR=function(d){return d==-1?-1:this.ob.U(d,3)},x.prototype.VF=function(d){return d==-1?0:this.ob.U(d,4)},x.prototype.XF=function(d){return this.ob.U(d,5)},x.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},x.prototype.hl=function(d){d!=-1&&this.ob.kd(d)},x.prototype.il=function(){return this.Vm=p.P.XA(this.Vm),1073741823&this.Vm},x.prototype.AD=function(d,l,n){var a=this.ob.o;if(n==-1||a[7*n]==-1)return d=this.ob.Nl([-1,-1,-1,d,this.il(),-1,-1]),(a=this.ob.o)[7*n]=d,this.xp(-1,d,n,a),d;for(var h=n==-1?-1:a[7*n];;){var f=l==-1?1:this.ao.compare(this,d,h);if(0>f){if((f=this.nl(h))==-1){l=h,d=this.ob.Nl([-1,-1,h,d,this.il(),-1,-1]),(a=this.ob.o)[7*h]=d;break}h=f}else{if(l==1&&f==0)return a[7*n+3]=h,-1;if((f=a[7*h+1])==-1){l=a[7*h+6],d=this.ob.Nl([-1,-1,h,d,this.il(),-1,-1]),(a=this.ob.o)[7*h+1]=d;break}h=f}}return this.ky(d,a),a[7*d+2]===-1&&(a[7*n]=d),this.xp(l,d,n,a),d},x.prototype.xp=function(d,l,n,a){if(d!=-1){var h=a[7*d+5];a[7*d+5]=l}else h=n==-1?-1:a[7*n+2];a[7*l+5]=h,h!=-1&&(a[7*h+6]=l),a[7*l+6]=d,d==(n==-1?-1:a[7*n+1])&&(a[7*n+1]=l),d==-1&&(a[7*n+2]=l),a[7*n+4]=(n==-1?0:a[7*n+4])+1},x.prototype.vB=function(d,l){var n=this.ob.o,a=n[7*d+5];d=n[7*d+6],a!=-1?n[7*a+6]=d:n[7*l+1]=d,d!=-1?n[7*d+5]=a:n[7*l+2]=a,n[7*l+4]=l===-1?-1:n[7*l+4]-1},x.prototype.eY=function(d,l){this.vB(d,l);var n=this.nl(d),a=this.Zp(d),h=this.getParent(d),f=d;if(n!=-1&&a!=-1){this.Vm=p.P.XA(this.Vm);var m=1073741823<this.Vm?this.lb(d):this.xe(d),y=this.getParent(m)==d;this.ob.bC(d,m,0),this.ob.bC(d,m,1),this.ob.bC(d,m,2),h!=-1?this.nl(h)==d?this.OB(h,m):this.SB(h,m):this.SJ(m,l),y?(n==m?(this.OB(m,d),this.Rk(a,m)):a==m&&(this.SB(m,d),this.Rk(n,m)),this.Rk(d,m),h=m):(this.Rk(n,m),this.Rk(a,m),h=this.getParent(d),f=m),n=this.nl(d),a=this.Zp(d),n!=-1&&this.Rk(n,d),a!=-1&&this.Rk(a,d)}n=n!=-1?n:a,h==-1?this.SJ(n,l):this.nl(h)==f?this.OB(h,n):this.SB(h,n),n!=-1&&this.Rk(n,h),this.hl(d)},x.prototype.GP=function(d,l){var n=this.ob.o;n[7*d+4]=2147483647;var a=-1,h=-1,f=l===-1?-1:n[7*l],m=f==d;if(m&&(a=n[7*f],h=n[7*f+1],a==-1&&h==-1))return this.vB(f,l),this.hl(f),void(n[7*l]=-1);this.FN(d,n),(f=n[7*d+2])!=-1&&(n[7*f]==d?n[7*f]=-1:n[7*f+1]=-1),this.vB(d,l),this.hl(d),m&&(n[7*l]=a==-1||n[7*a+2]!=-1?h:a)},x.prototype.IB=function(d,l){this.ob.T(d,3,l)},x}();p.$j=P}(Q||(Q={})),function(p){var P=function(){function x(d,l){d!==void 0&&this.L(d,l)}return x.prototype.L=function(d,l){this.pa=d,this.wa=l,this.normalize()},x.prototype.isIntersecting=function(d){return this.pa<=d.pa?this.wa>=d.pa:d.wa>=this.pa},x.prototype.move=function(d){this.B()||(this.pa+=d,this.wa+=d)},x.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var d=this.pa;this.pa=this.wa,this.wa=d}isNaN(this.wa)&&this.Pa()}},x.prototype.Pa=function(){this.wa=this.pa=NaN},x.prototype.B=function(){return isNaN(this.pa)},x.prototype.$b=function(d){typeof d=="number"?this.B()?this.wa=this.pa=d:this.Nk(d):d.B()||(this.B()?(this.pa=d.pa,this.wa=d.wa):(this.pa>d.pa&&(this.pa=d.pa),this.wa<d.wa&&(this.wa=d.wa),this.pa>this.wa&&this.Pa()))},x.prototype.Nk=function(d){d<this.pa?this.pa=d:d>this.wa&&(this.wa=d)},x.prototype.contains=function(d){return typeof d=="number"?d>=this.pa&&d<=this.wa:d.pa>=this.pa&&d.wa<=this.wa},x.prototype.Fa=function(d){this.B()||d.B()?this.Pa():(this.pa<d.pa&&(this.pa=d.pa),this.wa>d.wa&&(this.wa=d.wa),this.pa>this.wa&&this.Pa())},x.prototype.X=function(d){this.B()||(this.pa-=d,this.wa+=d,this.wa<this.pa&&this.Pa())},x.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},x.prototype.FB=function(d,l){d>l?(this.pa=l,this.wa=d):(this.pa=d,this.wa=l)},x.prototype.Kt=function(d){return p.P.Tk(d,this.pa,this.wa)},x.prototype.S=function(){return this.wa-this.pa},x.prototype.tf=function(){return .5*(this.pa+this.wa)},x.prototype.Nb=function(d){return d==this||d instanceof x&&(!(!this.B()||!d.B())||this.pa==d.pa&&this.wa==d.wa)},x.prototype.dc=function(){return p.P.wj(p.P.wj())},x}();p.Oc=P}(Q||(Q={})),function(p){var P=new p.Oc,x=new p.Oc,d=function(){this.oe=null,this.pb=-1,this.tb=new p.zb,this.lA=55555555,this.Vv=this.Xv=!1,this.Wf=new p.Oc,this.Wf.FB(0,0)};p.EY=d;var l=function(){function n(a,h,f){this.g=a,this.Jk=NaN,this.IH=this.Mq=0,this.JH=NaN,this.ra=h,this.Pq=10*h,this.KH=this.LH=NaN,this.sg=!1,this.Fm=this.ht=this.No=this.Zs=this.Ys=-1,this.bA=f,this.OA=new d,this.TH=new d,p.P.truncate(3*a.gd/2)}return n.prototype.hG=function(a,h,f,m){a.oe=m===null?null:m[f[5*h]],a.Vv=a.oe!=null,a.Vv||((m=f[5*h+2])!==-1&&this.g.hW(f[5*h],f[5*m],a.tb),a.oe=a.tb,a.Wf.FB(a.tb.ta,a.tb.qa),a.Wf.wa+=this.ra,a.tb.mI(),a.Xv=a.tb.ma==a.tb.oa,a.Xv||(a.lA=(a.tb.qa-a.tb.ta)/(a.tb.ma-a.tb.oa)))},n.prototype.JO=function(a,h){var f=a.Br(h,this.ra,!0);return f!=0?f==2?this.Ly():this.zi():(a.$p(Ps),a.Vr(Fs),h.$p(Ls),h.Vr(on),Ci.na(this.Mq,this.Jk),Ps.rb(Ls)&&this.Jk==Ps.y?0>Fs.compare(on)?Ci.N(Fs):Ci.N(on):Ps.rb(on)&&this.Jk==Ps.y?0>Fs.compare(Ls)?Ci.N(Fs):Ci.N(Ls):Ls.rb(Fs)&&this.Jk==Ls.y?0>Ps.compare(on)?Ci.N(Ps):Ci.N(on):Fs.rb(on)&&this.Jk==Fs.y&&(0>Ps.compare(Ls)?Ci.N(Ps):Ci.N(Ls)),a.Me(Ci.y,Ci.x)<h.Me(Ci.y,Ci.x)?-1:1)},n.prototype.HO=function(a,h){if(a.tb.oa==h.tb.oa&&a.tb.ta==h.tb.ta)return a.tb.ma==h.tb.ma&&a.tb.qa==h.tb.qa?this.bA?this.Ly():0:this.KE(a,h);if(a.tb.ma==h.tb.ma&&a.tb.qa==h.tb.qa)return this.JE(a,h);var f=this.JE(a,h);return a=this.KE(a,h),0>f&&0>a?-1:0<f&&0<a?1:this.zi()},n.prototype.DO=function(a,h){if(a.qa>h.qa){if(h.qa>h.ta&&h.ma-h.oa<2*this.ra&&a.xi(h.qa,h.ma,this.ra))return this.zi()}else if((h.ma-h.oa)/(h.qa-h.ta)*(a.qa-a.ta)<this.Pq&&h.xi(a.qa,a.ma,this.ra))return this.zi();return 1},n.prototype.EO=function(a,h){if(a.ta<h.ta){if(h.qa>h.ta&&h.ma-h.oa<2*this.ra&&a.xi(h.qa,h.ma,this.ra))return this.zi()}else if((h.ma-h.oa)/(h.qa-h.ta)*(a.ta-a.qa)<this.Pq&&h.xi(a.ta,a.oa,this.ra))return this.zi();return-1},n.prototype.FO=function(a,h){var f=new p.h;f.vc(h.xc(),h.bc()),f.cr(),f.normalize();var m=new p.h;m.vc(a.bc(),h.bc());var y=new p.h;y.vc(a.xc(),h.bc()),m=m.Sh(f),f=y.Sh(f),y=Math.abs(m);var w=Math.abs(f);if(y<w){if(y<this.Pq&&h.xi(a.ta,a.oa,this.ra))return this.zi()}else if(w<this.Pq&&h.xi(a.qa,a.ma,this.ra))return this.zi();return 0>m&&0>f?-1:0<m&&0<f?1:this.zi()},n.prototype.IE=function(a,h){return a.oa==h.oa&&a.ta==h.ta?this.DO(a,h):a.ma==h.ma&&a.qa==h.qa?this.EO(a,h):this.FO(a,h)},n.prototype.GO=function(a,h){return a.ma==h.ma&&a.qa==h.qa&&a.oa==h.oa&&a.ta==h.ta?this.bA?this.Ly():0:this.zi()},n.prototype.JE=function(a,h){var f=1;if(a.tb.oa<h.tb.oa){f=-1;var m=a;a=h,h=m}a=a.tb,m=h.tb;var y=a.ta-m.ta;h=h.lA*(a.oa-m.oa);var w=this.Pq;return y<h-w?-f:y>h+w?f:m.xi(a.ta,a.oa,this.ra)?this.zi():y<h?-f:f},n.prototype.KE=function(a,h){var f=1;if(h.tb.ma<a.tb.ma){f=-1;var m=a;a=h,h=m}a=a.tb,m=h.tb;var y=a.qa-m.ta;h=h.lA*(a.ma-m.oa);var w=this.Pq;return y<h-w?-f:y>h+w?f:m.xi(a.qa,a.ma,this.ra)?this.zi():y<h?-f:f},n.prototype.Ly=function(){return this.sg=!0,this.Pi=new p.Nd(5,this.No,this.ht),-1},n.prototype.zi=function(){return this.sg=!0,this.bA?this.Pi=new p.Nd(4,this.No,this.ht):this.ht=this.No=this.Zs=this.Ys=-1,-1},n.prototype.IO=function(a,h,f,m){if(this.sg)return-1;var y=this.JH==this.Jk&&this.IH==this.Mq;if(y&&a==this.Ys)var w=this.KH;else w=NaN,this.Ys=-1;return y&&h==this.Zs?y=this.LH:(y=NaN,this.Zs=-1),f.oe.UI(P),m.oe.UI(x),P.wa<x.pa?-1:x.wa<P.pa?1:(this.JH=this.Jk,this.IH=this.Mq,isNaN(w)&&(this.Ys=a,this.KH=w=a=f.oe.Me(this.Jk,this.Mq)),isNaN(y)&&(this.Zs=h,this.LH=y=a=m.oe.Me(this.Jk,this.Mq)),Math.abs(w-y)<=this.ra?this.JO(f.oe,m.oe):w<y?-1:w>y?1:0)},n.prototype.Mr=function(){this.sg=!1},n.prototype.tm=function(){return this.Pi},n.prototype.VJ=function(a,h){this.Jk=a,this.Mq=h,this.ht=this.No=this.Zs=this.Ys=-1},n.prototype.compare=function(a,h,f){return this.sg?-1:(a=a.ka(f),this.Fm=f,this.ME(h,h,a,a))},n.prototype.ME=function(a,h,f,m){if(this.No==h)var y=this.OA;else this.No=h,y=this.OA,this.OA.pb=a,this.hG(y,h,this.g.ud.o,this.g.Te);if(w==null){this.ht=m;var w=this.TH;this.TH.pb=f,this.hG(w,m,this.g.ud.o,this.g.Te)}return y.Vv||w.Vv?this.IO(h,m,y,w):y.Wf.wa<w.Wf.pa?-1:w.Wf.wa<y.Wf.pa?1:(a=y.Xv?1:0,(a|=w.Xv?2:0)==0?this.HO(y,w):a==1?this.IE(y.tb,w.tb):a==2?-1*this.IE(w.tb,y.tb):this.GO(y.tb,w.tb))},n}();p.PC=l}(Q||(Q={})),function(p){var P=function(){function x(d,l){this.g=d,this.ra=l,this.sg=!1,this.No=-1,this.Wf=new p.Oc,this.Iq=new p.h,this.Iq.Sc(),this.je=new p.zb,this.Fm=-1,this.wA=17976931348623157e292}return x.prototype.Mr=function(){this.sg=!1,this.wA=17976931348623157e292},x.prototype.Fh=function(d){this.Iq.N(d)},x.prototype.compare=function(d,l){return this.NE(l,d.ka(l))},x.prototype.NE=function(d,l){var n=this.g.cc(l)!=null;if(n||(this.g.fd(l,this.je),this.Wf.FB(this.je.ta,this.je.qa)),n)throw p.i.ga("not implemented");if(this.Iq.x+this.ra<this.Wf.pa)return-1;if(this.Iq.x-this.ra>this.Wf.wa)return 1;if(this.je.oa==this.je.ma)return this.Fm=d,this.sg=!0,0;this.je.mI(),n=this.je.bc(),(l=new p.h).vc(this.je.xc(),n),l.cr();var a=new p.h;return a.vc(this.Iq,n),n=l.Sh(a),(n/=l.length())<10*-this.ra?-1:n>10*this.ra?1:this.je.ss(this.Iq,this.ra)&&((l=Math.abs(n))<this.wA&&(this.Fm=d,this.wA=l),this.sg=!0,l<.25*this.ra)?0:0>n?-1:1},x}();p.WL=P}(Q||(Q={})),function(p){function P(d,l,n,a){n=new Float64Array(d.subarray(n,a)),d.set(n,l)}var x=function(){function d(l){this.Pb=this.rk=!1,this.o=null;var n=l;2>n&&(n=2),this.o=new Float64Array(n),this.size=l}return d.prototype.rotate=function(l,n,a){if(this.Pb)throw p.i.ga("invalid_call");if(n<l||n>a||l>a)throw p.i.O();l!=n&&a!=n&&(this.pi(l,n-l,1),this.pi(n,a-n,1),this.pi(l,a-l,1))},d.rf=function(l,n){var a=new d(l),h=a.o;if(2>l&&(l=2),n!==0)for(var f=0;f<l;f++)h[f]=n;return a},d.Dn=function(l){var n=new d(0);return n.o=new Float64Array(l.o),n.size=l.size,n},d.Nr=function(l,n){var a=new d(0);return a.size=l.size,a.size>n&&(a.size=n),2>(n=a.size)&&(n=2),a.o=new Float64Array(n),a.o.set(l.o.length<=n?l.o:l.o.subarray(0,n),0),a},d.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Float64Array(l):l<=this.o.length||(0<this.o.length?((l=new Float64Array(l)).set(this.o),this.o=l):this.o=new Float64Array(l)))},d.prototype.read=function(l){return this.o[l]},d.prototype.uc=function(l,n){n.x=this.o[l],n.y=this.o[l+1]},d.prototype.get=function(l){return this.o[l]},d.prototype.write=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n},d.prototype.set=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n},d.prototype.Vt=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n.x,this.o[l+1]=n.y},d.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},d.prototype.BB=function(l){return d.Nr(this,l)},d.prototype.gg=function(l){return this.read(l)},d.prototype.resize=function(l,n){if(n===void 0&&(n=0),this.rk)throw p.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Float64Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=p.P.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Float64Array(a)).set(this.o),this.o=a),a=this.o;for(var h=this.size;h<l;h++)a[h]=n}this.size=l},d.prototype.Dh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.rk)throw p.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},d.prototype.rr=function(l,n){this.write(l,n)},d.prototype.Cn=function(l,n,a){for(var h=this.size;n<h&&n<a;n++)l=p.P.wj(this.read(n));return l},d.prototype.Nb=function(l,n,a){if(l==null||!(l instanceof d))return!1;var h=this.size,f=l.size;if(a>h||a>f&&h!=f)return!1;for(a>h&&(a=h);n<a;n++)if(this.read(n)!=l.read(n))return!1;return!0},d.prototype.addRange=function(l,n,a,h,f){if(this.Pb)throw p.i.Hb();if(!h&&(1>f||a%f!=0))throw p.i.O();var m=this.size;if(this.resize(m+a),h)this.o.set(l.o.subarray(n,n+a),m);else{h=a;for(var y=0;y<a;y+=f){h-=f;for(var w=0;w<f;w++)this.o[m+y+w]=l.o[n+h+w]}}},d.prototype.On=function(l,n,a,h,f,m,y){if(this.Pb)throw p.i.Hb();if(!f&&(1>m||h%m!=0))throw p.i.O();var w=this.size-y;if(w<h&&this.resize(this.size+h-w),P(this.o,l+h,l,l+(y-l)),this.o==n.o&&l<a&&(a+=h),f)this.o.set(n.o.subarray(a,a+h),l);else for(f=h,y=0;y<h;y+=m)for(f-=m,w=0;w<m;w++)this.o[l+y+w]=n.o[a+f+w]},d.prototype.Dz=function(l,n,a,h,f,m){if(this.Pb)throw p.i.Hb();if(0>m&&(m=this.size),this.size+2*h>this.o.length?this.resize(this.size+2*h):this.size+=2*h,P(this.o,l+2*h,l,l+(m-l)),f)for(f=0;f<h;f++)m=n[a++],this.o[l++]=m.x,this.o[l++]=m.y;else{f=0;for(var y=h-1;f<h;++f)m=n[a+y],this.o[l++]=m.x,this.o[l++]=m.y,y--}},d.prototype.Nn=function(l,n,a,h){if(this.Pb)throw p.i.Hb();for(h-=l,P(this.o,l+h,l,l+h),h=0;h<a;h++)this.o[l+h]=n},d.prototype.xj=function(l,n,a){if(this.Pb)throw p.i.Hb();P(this.o,l+2,l,l+(a-l)),this.o[l]=n.x,this.o[l+1]=n.y},d.prototype.Wt=function(l,n,a,h,f,m){if(0>l||0>n||0>h||!f&&(0>=m||n%m!=0)||a.size<h+n)throw p.i.O();if(n!=0)if(this.size<n+l&&this.resize(n+l),a==this)this.Cr(l,n,h,f,m);else if(f)for(f=0;f<n;f++)this.o[l]=a.o[h],l++,h++;else if(h=h+n-m,m==1)for(f=0;f<n;f++)this.o[l]=a.o[h],l++,h--;else for(f=0,n=p.P.truncate(n/m);f<n;f++){for(var y=0;y<m;y++)this.o[l+y]=a.o[h+y];l+=m,h-=m}},d.prototype.Gn=function(l,n,a){if(this.Pb||l+n>this.size)throw p.i.Hb();0<a-(l+n)&&P(this.o,l,l+n,l+(a-(l+n))+n),this.size-=n},d.prototype.pi=function(l,n,a){if(this.Pb||1>a||n%a!=0)throw p.i.Hb();for(var h=n>>1,f=0;f<h;f+=a){n-=a;for(var m=0;m<a;m++){var y=this.o[l+f+m];this.o[l+f+m]=this.o[l+n+m],this.o[l+n+m]=y}}},d.prototype.Yj=function(l,n,a){if(0>n||0>a||0>n||a+n>this.size)throw p.i.O();for(var h=n;h<n+a;h++)this.o[h]=l},d.prototype.Cr=function(l,n,a,h,f){if(!(h&&l==a||(this.o.set(this.o.subarray(a,a+n),l),h)))for(a=l,l=l+n-f,h=0,n=p.P.truncate(n/2);h<n;h++){for(var m=0;m<f;m++){var y=this.o[a+m];this.o[a+m]=this.o[l+m],this.o[l+m]=y}a+=f,l-=f}},d.prototype.qC=function(l,n,a,h,f){if(0>l||0>n||0>h)throw p.i.O();if(n!=0)for(this.size<(n<<1)+l&&this.resize((n<<1)+l),f||(l+=n-1<<1),f=f?2:-2,n+=h;h<n;h++)this.o[l]=a[h].x,this.o[l+1]=a[h].y,l+=f},d.prototype.pC=function(l,n,a){if(0>l||0>n)throw p.i.O();if(n!=0){this.size<(n<<1)+l&&this.resize((n<<1)+l),n+=0;for(var h=0;h<n;h++)this.o[l]=a[h][0],this.o[l+1]=a[h][1],l+=2}},d.prototype.Xw=function(l,n,a,h,f){if(0>l||0>n||0>h||this.size<n+l)throw p.i.O();if(f)for(f=0;f<n;f++)a[h+f]=this.o[l+f];else for(h=h+n-1;l<n;l++)a[h]=this.o[l],h--},d.prototype.pB=function(l,n,a){if(0>l||0>n||this.size<(n>>1)+l)throw p.i.O();if(n!=0){n=0+n;for(var h=0;h<n;h++)a[h][0]=this.o[l],a[h][1]=this.o[l+1],l+=2}},d.prototype.clear=function(l){l?this.resize(0):this.Dh(0)},d.prototype.ix=function(){this.rk=this.Pb=!0},d.prototype.Wd=function(l,n,a){Array.prototype.sort.call(this.o.subarray(l,n),a)},d.prototype.Vp=function(){return 1},d}();p.ce=x}(Q||(Q={})),function(p){function P(d,l,n,a){n=new Int32Array(d.subarray(n,a)),d.set(n,l)}p.nY=function(){this.random=1973};var x=function(){function d(l){this.Pb=this.rk=!1,this.o=null;var n=l;2>n&&(n=2),this.o=new Int32Array(n),this.size=l}return d.prototype.rotate=function(l,n,a){if(this.Pb)throw p.i.ga("invalid_call");if(n<l||n>a||l>a)throw p.i.O();l!=n&&a!=n&&(this.pi(l,n-l,1),this.pi(n,a-n,1),this.pi(l,a-l,1))},d.rf=function(l,n){var a=new d(l),h=a.o;if(2>l&&(l=2),n!==0)for(var f=0;f<l;f++)h[f]=n;return a},d.Dn=function(l){var n=new d(0);return n.o=new Int32Array(l.o),n.size=l.size,n},d.Nr=function(l,n){var a=new d(0);return a.size=l.size,a.size>n&&(a.size=n),2>(n=a.size)&&(n=2),a.o=new Int32Array(n),a.o.set(l.o.length<=n?l.o:l.o.subarray(0,n),0),a},d.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Int32Array(l):l<=this.o.length||(0<this.o.length?((l=new Int32Array(l)).set(this.o),this.o=l):this.o=new Int32Array(l)))},d.prototype.read=function(l){return this.o[l]},d.prototype.uc=function(l,n){n.x=this.o[l],n.y=this.o[l+1]},d.prototype.get=function(l){return this.o[l]},d.prototype.write=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n},d.prototype.set=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n},d.prototype.Vt=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n.x,this.o[l+1]=n.y},d.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},d.prototype.BB=function(l){return d.Nr(this,l)},d.prototype.gg=function(l){return this.read(l)},d.prototype.resize=function(l,n){if(n===void 0&&(n=0),this.rk)throw p.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Int32Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=p.P.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Int32Array(a)).set(this.o),this.o=a),a=this.o;for(var h=this.size;h<l;h++)a[h]=n}this.size=l},d.prototype.Dh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.rk)throw p.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},d.prototype.rr=function(l,n){this.write(l,n)},d.prototype.Cn=function(l,n,a){for(var h=this.size;n<h&&n<a;n++)l=p.P.Vh(this.read(n),l);return l},d.prototype.Nb=function(l,n,a){if(l==null||!(l instanceof d))return!1;var h=this.size,f=l.size;if(a>h||a>f&&h!=f)return!1;for(a>h&&(a=h);n<a;n++)if(this.read(n)!=l.read(n))return!1;return!0},d.prototype.addRange=function(l,n,a,h,f){if(this.Pb)throw p.i.Hb();if(!h&&(1>f||a%f!=0))throw p.i.O();var m=this.size;if(this.resize(m+a),h)this.o.set(l.o.subarray(n,n+a),m);else{h=a;for(var y=0;y<a;y+=f){h-=f;for(var w=0;w<f;w++)this.o[m+y+w]=l.o[n+h+w]}}},d.prototype.On=function(l,n,a,h,f,m,y){if(this.Pb)throw p.i.Hb();if(!f&&(1>m||h%m!=0))throw p.i.O();if(P(this.o,l+h,l,l+(y-l)),this.o==n.o&&l<a&&(a+=h),f)this.o.set(n.o.subarray(a,a+h),l);else for(f=h,y=0;y<h;y+=m){f-=m;for(var w=0;w<m;w++)this.o[l+y+w]=n.o[a+f+w]}},d.prototype.Dz=function(l,n,a,h,f,m){if(this.Pb)throw p.i.Hb();if(0>m&&(m=this.size),this.size+2*h>this.o.length?this.resize(this.size+2*h):this.size+=2*h,P(this.o,l+2*h,l,l+(m-l)),f)for(f=0;f<h;f++)m=n[a++],this.o[l++]=m.x,this.o[l++]=m.y;else{f=0;for(var y=h-1;f<h;++f)m=n[a+y],this.o[l++]=m.x,this.o[l++]=m.y,y--}},d.prototype.Nn=function(l,n,a,h){if(this.Pb)throw p.i.Hb();for(h-=l,P(this.o,l+h,l,l+h),h=0;h<a;h++)this.o[l+h]=n},d.prototype.xj=function(l,n,a){if(this.Pb)throw p.i.Hb();P(this.o,l+2,l,l+(a-l)),this.o[l]=n.x,this.o[l+1]=n.y},d.prototype.Wt=function(l,n,a,h,f,m){if(0>l||0>n||0>h||!f&&(0>=m||n%m!=0)||a.size<h+n)throw p.i.O();if(n!=0)if(this.size<n+l&&this.resize(n+l),a==this)this.Cr(l,n,h,f,m);else if(f)for(f=0;f<n;f++)this.o[l]=a.o[h],l++,h++;else if(h=h+n-m,m==1)for(f=0;f<n;f++)this.o[l]=a.o[h],l++,h--;else for(f=0,n=p.P.truncate(n/m);f<n;f++){for(var y=0;y<m;y++)this.o[l+y]=a.o[h+y];l+=m,h-=m}},d.prototype.Gn=function(l,n,a){if(this.Pb||l+n>this.size)throw p.i.Hb();0<a-(l+n)&&P(this.o,l,l+n,l+(a-(l+n))+n),this.size-=n},d.prototype.pi=function(l,n,a){if(this.Pb||1>a||n%a!=0)throw p.i.Hb();for(var h=n>>1,f=0;f<h;f+=a){n-=a;for(var m=0;m<a;m++){var y=this.o[l+f+m];this.o[l+f+m]=this.o[l+n+m],this.o[l+n+m]=y}}},d.prototype.Yj=function(l,n,a){if(0>n||0>a||0>n||a+n>this.size)throw p.i.O();for(var h=n;h<n+a;h++)this.o[h]=l},d.prototype.Cr=function(l,n,a,h,f){if(!(h&&l==a||(this.o.set(this.o.subarray(a,a+n),l),h)))for(a=l,l=l+n-f,h=0,n=p.P.truncate(n/2);h<n;h++){for(var m=0;m<f;m++){var y=this.o[a+m];this.o[a+m]=this.o[l+m],this.o[l+m]=y}a+=f,l-=f}},d.prototype.qC=function(l,n,a,h,f){if(0>l||0>n||0>h)throw p.i.O();if(n!=0)for(this.size<(n<<1)+l&&this.resize((n<<1)+l),f||(l+=n-1<<1),f=f?2:-2,n+=h;h<n;h++)this.o[l]=a[h].x,this.o[l+1]=a[h].y,l+=f},d.prototype.Xw=function(l,n,a,h,f){if(0>l||0>n||0>h||this.size<n+l)throw p.i.O();if(f)for(f=0;f<n;f++)a[h+f]=this.o[l+f];else for(h=h+n-1;l<n;l++)a[h]=this.o[l],h--},d.prototype.clear=function(l){l?this.resize(0):this.Dh(0)},d.prototype.ix=function(){this.rk=this.Pb=!0},d.prototype.Wd=function(l,n,a){10>n-l?d.mG(this.o,l,n,a):d.lB(this.o,l,n-1,a)},d.prototype.Vp=function(){return 2},d.prototype.Gc=function(){return this.o[this.size-1]},d.prototype.Jf=function(){this.resize(this.size-1)},d.prototype.XW=function(l){this.o[this.size-1]=l},d.prototype.NV=function(l){l<this.size-1&&(this.o[l]=this.o[this.size-1]),this.resize(this.size-1)},d.prototype.gF=function(l){for(var n=0,a=this.size;n<a;n++)if(this.o[n]==l)return n;return-1},d.prototype.cG=function(l){return 0<=this.gF(l)},d.mG=function(l,n,a,h){for(var f=n;f<a;f++){for(var m=l[f],y=f-1;y>=n&&0<h(l[y],m);)l[y+1]=l[y],y--;l[y+1]=m}},d.sx=function(l,n,a){var h=l[a];l[a]=l[n],l[n]=h},d.lB=function(l,n,a,h){if(!(n>=a))for(;;){if(9>a-n){d.mG(l,n,a+1,h);break}var f=l[n];d.sx(l,n,a);for(var m=n,y=n;y<a;y++)0>=h(l[y],f)&&(d.sx(l,m,y),m+=1);d.sx(l,m,a),m-n<a-m?(d.lB(l,n,m-1,h),n=m+1):(d.lB(l,m+1,a,h),a=m-1)}},d}();p.ja=x}(Q||(Q={})),function(p){function P(d,l,n,a){n=new Int8Array(d.subarray(n,a)),d.set(n,l)}var x=function(){function d(l){this.o=null;var n=l;2>n&&(n=2),this.o=new Int8Array(n),this.size=l}return d.prototype.rotate=function(l,n,a){if(this.Pb)throw p.i.ga("invalid_call");if(n<l||n>a||l>a)throw p.i.O();l!=n&&a!=n&&(this.pi(l,n-l,1),this.pi(n,a-n,1),this.pi(l,a-l,1))},d.rf=function(l,n){var a=new d(l),h=a.o;if(2>l&&(l=2),n!==0)for(var f=0;f<l;f++)h[f]=n;return a},d.Dn=function(l){var n=new d(0);return n.o=new Int8Array(l.o),n.size=l.size,n},d.Nr=function(l,n){var a=new d(0);return a.size=l.size,a.size>n&&(a.size=n),2>(n=a.size)&&(n=2),a.o=new Int8Array(n),a.o.set(l.o.length<=n?l.o:l.o.subarray(0,n),0),a},d.prototype.Jb=function(l){0>=l||(this.o==null?this.o=new Int8Array(l):l<=this.o.length||(0<this.o.length?((l=new Int8Array(l)).set(this.o),this.o=l):this.o=new Int8Array(l)))},d.prototype.read=function(l){return this.o[l]},d.prototype.uc=function(l,n){n.x=this.o[l],n.y=this.o[l+1]},d.prototype.get=function(l){return this.o[l]},d.prototype.write=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n},d.prototype.set=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n},d.prototype.Vt=function(l,n){if(this.Pb)throw p.i.Hb();this.o[l]=n.x,this.o[l+1]=n.y},d.prototype.add=function(l){this.resize(this.size+1),this.o[this.size-1]=l},d.prototype.BB=function(l){return d.Nr(this,l)},d.prototype.gg=function(l){return this.read(l)},d.prototype.resize=function(l,n){if(n===void 0&&(n=0),this.rk)throw p.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(l<=this.size){if(30<this.o.length&&5*l/4<this.o.length){var a=new Int8Array(this.o,0,l);this.o=a}}else{l>this.o.length&&(a=p.P.truncate(64>l?Math.max(2*l,4):5*l/4),(a=new Int8Array(a)).set(this.o),this.o=a),a=this.o;for(var h=this.size;h<l;h++)a[h]=n}this.size=l},d.prototype.Dh=function(l){if((this.o==null||l>this.o.length)&&this.resize(l),this.rk)throw p.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=l},d.prototype.rr=function(l,n){this.write(l,n)},d.prototype.Cn=function(l,n,a){for(var h=this.size;n<h&&n<a;n++)l=p.P.Vh(this.read(n),l);return l},d.prototype.Nb=function(l,n,a){if(l==null||!(l instanceof d))return!1;var h=this.size,f=l.size;if(a>h||a>f&&h!=f)return!1;for(a>h&&(a=h);n<a;n++)if(this.read(n)!=l.read(n))return!1;return!0},d.prototype.addRange=function(l,n,a,h,f){if(this.Pb)throw p.i.Hb();if(!h&&(1>f||a%f!=0))throw p.i.O();var m=this.size;if(this.resize(m+a),h)this.o.set(l.o.subarray(n,n+a),m);else{h=a;for(var y=0;y<a;y+=f){h-=f;for(var w=0;w<f;w++)this.o[m+y+w]=l.o[n+h+w]}}},d.prototype.On=function(l,n,a,h,f,m,y){if(this.Pb)throw p.i.Hb();if(!f&&(1>m||h%m!=0))throw p.i.O();if(P(this.o,l+h,l,l+(y-l)),this.o==n.o&&l<a&&(a+=h),f)this.o.set(n.o.subarray(a,a+h),l);else for(f=h,y=0;y<h;y+=m){f-=m;for(var w=0;w<m;w++)this.o[l+y+w]=n.o[a+f+w]}},d.prototype.Nn=function(l,n,a,h){if(this.Pb)throw p.i.Hb();for(h-=l,P(this.o,l+h,l,l+h),h=0;h<a;h++)this.o[l+h]=n},d.prototype.Dz=function(l,n,a,h,f,m){if(this.Pb)throw p.i.Hb();if(0>m&&(m=this.size),this.size+2*h>this.o.length?this.resize(this.size+2*h):this.size+=2*h,P(this.o,l+2*h,l,l+(m-l)),f)for(f=0;f<h;f++)m=n[a++],this.o[l++]=m.x,this.o[l++]=m.y;else{f=0;for(var y=h-1;f<h;++f)m=n[a+y],this.o[l++]=m.x,this.o[l++]=m.y,y--}},d.prototype.xj=function(l,n,a){if(this.Pb)throw p.i.Hb();P(this.o,l+2,l,l+(a-l)),this.o[l]=n.x,this.o[l+1]=n.y},d.prototype.Wt=function(l,n,a,h,f,m){if(0>l||0>n||0>h||!f&&(0>=m||n%m!=0)||a.size<h+n)throw p.i.O();if(n!=0)if(this.size<n+l&&this.resize(n+l),a==this)this.Cr(l,n,h,f,m);else if(f)for(f=0;f<n;f++)this.o[l]=a.o[h],l++,h++;else if(h=h+n-m,m==1)for(f=0;f<n;f++)this.o[l]=a.o[h],l++,h--;else for(f=0,n=p.P.truncate(n/m);f<n;f++){for(var y=0;y<m;y++)this.o[l+y]=a.o[h+y];l+=m,h-=m}},d.prototype.Gn=function(l,n,a){if(this.Pb||l+n>this.size)throw p.i.Hb();0<a-(l+n)&&P(this.o,l,l+n,l+(a-(l+n))+n),this.size-=n},d.prototype.pi=function(l,n,a){if(this.Pb||1>a||n%a!=0)throw p.i.Hb();for(var h=n>>1,f=0;f<h;f+=a){n-=a;for(var m=0;m<a;m++){var y=this.o[l+f+m];this.o[l+f+m]=this.o[l+n+m],this.o[l+n+m]=y}}},d.prototype.Yj=function(l,n,a){if(0>n||0>a||0>n||a+n>this.size)throw p.i.O();for(var h=n;h<n+a;h++)this.o[h]=l},d.prototype.Cr=function(l,n,a,h,f){if(!(h&&l==a||(this.o.set(this.o.subarray(a,a+n),l),h)))for(a=l,l=l+n-f,h=0,n=p.P.truncate(n/2);h<n;h++){for(var m=0;m<f;m++){var y=this.o[a+m];this.o[a+m]=this.o[l+m],this.o[l+m]=y}a+=f,l-=f}},d.prototype.qC=function(l,n,a,h,f){if(0>l||0>n||0>h)throw p.i.O();if(n!=0)for(this.size<(n<<1)+l&&this.resize((n<<1)+l),f||(l+=n-1<<1),f=f?2:-2,n+=h;h<n;h++)this.o[l]=a[h].x,this.o[l+1]=a[h].y,l+=f},d.prototype.Xw=function(l,n,a,h,f){if(0>l||0>n||0>h||this.size<n+l)throw p.i.O();if(f)for(f=0;f<n;f++)a[h+f]=this.o[l+f];else for(h=h+n-1;l<n;l++)a[h]=this.o[l],h--},d.prototype.clear=function(l){l?this.resize(0):this.Dh(0)},d.prototype.ix=function(){this.rk=this.Pb=!0},d.prototype.Wd=function(l,n,a){n=this.o.subarray(l,n),Array.prototype.sort.call(n,a),this.o.set(n,l)},d.prototype.uJ=function(l,n){if(this.Pb)throw p.i.ga("invalid call. Attribute Stream is read only.");this.o[l]|=n},d.prototype.FE=function(l,n){if(this.Pb)throw p.i.ga("invalid call. Attribute Stream is read only.");this.o[l]&=~n},d.prototype.Vp=function(){return 1},d}();p.rn=x}(Q||(Q={})),function(p){p.Zc=function(){function P(){}return P.Or=function(x,d){return p.rn.rf(x,d)},P.Fn=function(x,d){return p.ce.rf(x,d)},P.kP=function(x,d,l){switch(x){case 1:x=p.ce.rf(d,l);break;case 2:x=p.ja.rf(d,l);break;case 4:x=p.rn.rf(d,l);break;default:throw p.i.Ra()}return x},P.TE=function(x,d){return P.kP(p.sa.Vp(x),d*p.sa.Wa(x),p.sa.te(x))},P.Qh=function(x,d){return p.ja.rf(x,d)},P.lI=function(x){var d,l=[];for(d=0;d<x;d++)l.push(null);return l},P}()}(Q||(Q={})),function(p){p.ha=function(P){P===void 0&&(P=0),this.u=P}}(Q||(Q={})),function(p){p.IL=function(){function P(){}return P.bind=function(x){p.Tc=x.PeDefs,p.qf=x.PeFactory,p.IC=x.PeVertcs,p.gj=x.PeCSTransformations,p.HC=x.PeGTTransformations,p.GL=x.PeGeogtran,p.FL=x.PeFactoryCodechange,p.GC=x.PeGCSExtent,p.Eg=x.PePCSInfo,p.HL=x.PeHorizon,p.EL=x.PeCoordsys,p.np=x.PeGTlistExtended,p.np.PE_GTLIST_OPTS_USE_DEFAULT=128,p.qf.initialize(null),p.Lx=x.PeGTlistExtendedEntry,p.qf.fromString(p.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},P}(),p.qf=null,p.IC=null,p.EL=null,p.HL=null,p.Eg=null,p.np=null,p.Lx=null,p.GC=null,p.FL=null,p.GL=null,p.Tc=null,p.HC=null,p.gj=null}(Q||(Q={})),function(p){var P=function(){function x(){}return x.Mb=function(d,l){return 0<=l?x.R(d):-x.R(d)},x.R=function(d){return 0>d?-d:d},x.vi=function(d){return 3552713678800501e-30>d},x.FC=function(d,l,n){return x.R(d-l)<=n*(1+(x.R(d)+x.R(l))/2)},x.$=function(d,l){return x.FC(d,l,3552713678800501e-30)},x.AL=function(d){return 3552713678800501e-30>=x.R(d)},x.Dd=function(d){return x.AL(d)},x}();p.s=P,p.F=function(){function x(){}return x.ip=function(d,l){var n=0;return(d=P.R(d))+(l=P.R(l))!=0&&(d>l?(n=l/d,n=d*Math.sqrt(1+n*n)):(n=d/l,n=l*Math.sqrt(1+n*n))),n},x.Yq=function(d,l,n,a,h){for(var f=[0,0,0],m=[0,0,0],y=0;2>=y;y++)l[y]-=d[y],n[y]-=l[y];n=f[1]*m[2]-f[2]*m[1],l=f[2]*m[0]-f[0]*m[2],f=f[0]*m[1]-f[1]*m[0],d=-1*(n*d[0]+l*d[1]+f*d[2]),a[0]=n,a[1]=l,a[2]=f,a[3]=d,m=x.qn(a),a[0]/=m,a[1]/=m,a[2]/=m,a[3]/=m,h!=0&&(m=P.Dd(f)?P.Dd(d)?P.Mb(1,l):-P.Mb(1,d):P.Mb(1,f),m*=P.Mb(1,h),a[0]*=m,a[1]*=m,a[2]*=m,a[3]*=m)},x.yx=function(d,l,n){n[0]=d[1]*l[2]-l[1]*d[2],n[1]=d[2]*l[0]-l[2]*d[0],n[2]=d[0]*l[1]-l[0]*d[1]},x.Ut=function(d,l){return d[0]*l[0]+d[1]*l[1]+d[2]*l[2]},x.qn=function(d){return x.ip(x.ip(d[0],d[1]),d[2])},x.el=function(d,l,n,a,h,f,m,y){d=x.n(d,l,n);var w=Math.cos(n);f.u=(d+h)*w*Math.cos(a),m.u=(d+h)*w*Math.sin(a),y.u=(d*(1-l)+h)*Math.sin(n)},x.eO=function(d,l,n,a,h,f,m){var y=x.ip(l,n),w=1*Math.sqrt(1-d),I=w/1;if(P.$(y,0))f.u=0,h.u=P.Mb(1.570796326794897,a),m.u=P.R(a)-w;else{f.u=Math.atan2(n,l),n=Math.atan2(1*a,w*y),f=Math.cos(n);var M=Math.sin(n);l=w*d/(1-d),d*=1,n=Math.atan2(a+l*M*M*M,y-d*f*f*f),3.141592653589793<P.R(n)&&(n=P.Mb(3.141592653589793,n)-n),n=Math.atan(I*Math.tan(n)),M=Math.sin(n),f=Math.cos(n),h.u=Math.atan2(a+l*M*M*M,y-d*f*f*f),1.570796326794897<P.R(h.u)&&(h.u=P.Mb(3.141592653589793,h.u)-h.u),n=Math.atan(I*Math.tan(h.u)),M=Math.sin(n),f=Math.cos(n),m.u=(a-w*M)*Math.sin(h.u)+(y-1*f)*Math.cos(h.u)}},x.n=function(d,l,n){return n=Math.sin(n),d/Math.sqrt(1-l*n*n)},x.pt=function(d,l){return Math.atan2(Math.sin(l)*(1-d),Math.cos(l))},x.Sj=function(d,l){return Math.atan2(Math.sin(l),Math.cos(l)*(1-d))},x.Tq=function(d,l){if(P.vi(d)||l==0||P.$(P.R(l),1.570796326794897))return l;if(.006884661117170036>d){var n=Math.sqrt(1-d),a=(1-n)/(1+n),h=a*a,f=a*h,m=a*f,y=a*m,w=a*y,I=a*w,M=1.572916666666667*f-3.2578125*y+4.295068359375*I;d=2.142578125*m-6.071484375*w,n=3.129296875*y-11.249837239583334*I;var T=4.775276692708333*w,$=7.958636765252976*I,F=Math.cos(2*l);return l+Math.sin(2*l)*(1.5*a-.84375*f+.525390625*y-.2688395182291667*I-M+n-$+F*(2*(1.3125*h-1.71875*m+1.650146484375*w)-4*d+6*T+F*(4*M-12*n+24*$+F*(8*d-32*T+F*(16*n-80*$+F*(32*T+64*F*$))))))}for(n=1-d,a=d/2,f=(h=P.R(l))*x.av(d)/(1.570796326794897*n),m=9999,w=h,h=0;1e-16<m&&50>h;h++)I=x.w(d,w),y=w-(M=(y=(x.fG(w,d)-a*Math.sin(2*w)/I)/n-f)/(I=1/(I*I*I))),m=P.R(M),w=y;return 0<=l?w:-w},x.lW=function(d,l){return P.vi(l)?d:d*x.av(l)/1.570796326794897},x.ca=function(d){return 0>(d=x.kF(d,6.283185307179586))?d+6.283185307179586:3.141592653589793>P.R(d)||P.$(P.R(d),3.141592653589793)?d:d-6.283185307179586},x.kF=function(d,l){return d-Math.floor(d/l)*l},x.Ch=function(d,l){if(.006884661117170036>l){var n=(l=(1-(l=Math.sqrt(1-l)))/(1+l))*l,a=n*n;return d/(1+l)*(1+.25*n+.015625*a+.00390625*n*a)*1.570796326794897}return d*x.av(l)},x.Xq=function(d,l){var n=P.Mb(1,Math.sin(l));return l=1.570796326794897>=(l=P.R(x.kF(l,3.141592653589793)))?l:3.141592653589793-l,(P.$(l,1.570796326794897)?l:Math.atan(Math.sqrt(1-d)*Math.tan(l)))*n},x.q=function(d,l,n){if(.006884661117170036>l){var a=(l=(1-(l=Math.sqrt(1-l)))/(1+l))*l,h=l*a,f=l*h,m=l*f,y=l*m,w=l*y,I=-.7291666666666666*h+.2278645833333333*m+.03987630208333334*w,M=.615234375*f-.21533203125*y,T=-.54140625*m+.20302734375*w,$=.48876953125*y,F=-.4488699776785715*w,R=Math.cos(2*n);return d/(1+l)*((1+.25*a+.015625*f+.00390625*y)*n+Math.sin(2*n)*(-1.5*l+.1875*h+.0234375*m+.00732421875*w-I+T-F+R*(2*(.9375*a-.234375*f-.03662109375*y)-4*M+6*$+R*(4*I-12*T+24*F+R*(8*M-32*$+R*(16*T-80*F+R*(32*$+64*R*F)))))))}return d*(x.fG(n,l)-.5*l*Math.sin(2*n)/x.w(l,n))},x.w=function(d,l){return l=Math.sin(l),Math.sqrt(1-d*l*l)},x.av=function(d){return P.FC(d,1,2220446049250313e-31)?1:1>d?x.Zw(0,1-d)-d/3*x.Ww(0,1-d):NaN},x.fG=function(d,l){var n=P.Mb(1,d);d=P.R(d);var a=Math.floor(d/1.570796326794897);if(1<l)l=d==0?0:NaN;else if(P.Dd(a))l=(d=x.sin(d))*x.Zw(1-d*d,1-l*d*d)-l/3*d*d*d*x.Ww(1-d*d,1-l*d*d);else{var h=p.P.truncate(a%2),f=x.av(l);0<h?l=f*(a+1)-(l=(d=Math.sin(1.570796326794897*(a+1)-d))*x.Zw(1-d*d,1-l*d*d)-l/3*d*d*d*x.Ww(1-d*d,1-l*d*d)):l=f*a+(l=(d=Math.sin(d-1.570796326794897*a))*x.Zw(1-d*d,1-l*d*d)-l/3*d*d*d*x.Ww(1-d*d,1-l*d*d))}return l*n},x.sin=function(d){d=x.ca(d);var l=P.Mb(1,d);return d=P.R(d),P.$(d,3.141592653589793)?0:P.$(d,1.570796326794897)?1*l:Math.sin(d)*l},x.Ww=function(d,l){var n,a,h,f,m=d,y=l,w=1;for(l=0,d=1;a=((n=.2*(m+y+3*w))-m)/n,h=(n-y)/n,f=(n-w)/n,!(1e-4>P.R(a)&&1e-4>P.R(h)&&1e-4>P.R(f));)f=Math.sqrt(y),l+=d/((n=Math.sqrt(w))*(w+(f=Math.sqrt(m)*(f+n)+f*n))),d*=.25,m=.25*(m+f),y=.25*(y+f),w=.25*(w+f);return y=(m=a*h)-(w=f*f),3*l+d*(1+(w=m-6*w)*(.10227272727272728*w-.2142857142857143-.1730769230769231*f*(a=w+y+y))+f*(.1666666666666667*a+f*(-.4090909090909091*y+.1153846153846154*f*m)))/(n*Math.sqrt(n))},x.Zw=function(d,l){for(var n,a,h,f,m=1;a=2-((n=(d+l+m)/3)+d)/n,h=2-(n+l)/n,f=2-(n+m)/n,!(1e-4>P.R(a)&&1e-4>P.R(h)&&1e-4>P.R(f));m=.25*(m+n))n=Math.sqrt(l),a=Math.sqrt(m),d=.25*(d+(n=Math.sqrt(d)*(n+a)+n*a)),l=.25*(l+n);return(1+(.04166666666666666*(d=a*h-f*f)-.1-.06818181818181818*(l=a*h*f))*d+.07142857142857142*l)/Math.sqrt(n)},x.Sw=function(d,l){if(P.vi(d)||l==0||P.$(P.R(l),1.570796326794897))return l;if(.006884661117170036>d){var n=d*d,a=d*n,h=d*a,f=d*h,m=d*f,y=d*m,w=-(.02708333333333333*a+.03430059523809524*h+.03149181547619048*f+.02634359154541446*m+.02156896735835538*y),I=.007669890873015873*h+.01299603174603175*f+.0148051353064374*m+.01454454953803912*y,M=-(.002275545634920635*f+.004830845032667949*m+.006558395368616723*y),T=.0006957236677288761*m+.001775193002406544*y,$=-.000217324089394402*y,F=Math.cos(2*l);return l+Math.sin(2*l)*(-(.5*d+.2083333333333333*n+.09375*a+.04878472222222222*h+.02916666666666667*f+.01938905423280423*m+.01388255931712963*y)-w+M-$+F*(2*(.1041666666666667*n+.0875*a+.06050347222222222*h+.04151785714285714*f+.02958958540013228*m+.02203667534722222*y)-4*I+6*T+F*(4*w-12*M+24*$+F*(8*I-32*T+F*(16*M-80*$+F*(32*T+64*F*$))))))}return l==0||P.$(P.R(l),1.570796326794897)?n=l:(h=(a=Math.sqrt(d))*Math.sin(l),n=Math.tan(.7853981633974483+l/2)*Math.pow((1-h)/(1+h),a/2),n=2*Math.atan(n)-1.570796326794897),n},x.tO=function(d,l){if(P.vi(d)||l==0||P.$(P.R(l),1.570796326794897))return l;if(.006884661117170036>d){var n=d*(T=d*(M=d*(F=d*d))),a=d*($=d*n),h=.05833333333333333*M+.07232142857142858*T+.05634300595238095*n+.0355325796406526*$+.020235546186067*a,f=.02653149801587302*T+.04379960317460317*n+.0429211791776896*$+.03255384637546096*a,m=.01294022817460318*n+.02668104344536636*$+.03155651254609588*a,y=.00659454790965208*$+.0163075268674227*a,w=.003463473736911237*a,I=Math.cos(2*l);return l+Math.sin(2*l)*(.5*d+.2083333333333333*F+.08333333333333333*M+.03611111111111111*T+.01875*n+.01195601851851852*$+.008863673941798942*a-h+m-w+I*(2*(.1458333333333333*F+.1208333333333333*M+.07039930555555556*T+.03616071428571429*n+.01839451058201058*$+.01017113095238095*a)-4*f+6*y+I*(4*h-12*m+24*w+I*(8*f-32*y+I*(16*m-80*w+I*(32*y+64*I*w))))))}var M=Math.sqrt(d),T=M/2,$=Math.tan(.7853981633974483+l/2);d=0,h=1;for(var F=l;h!=0;F=a)n=M*Math.sin(F),a=$*Math.pow((1+n)/(1-n),T),a=2*Math.atan(a)-1.570796326794897,d++,(P.$(a,F)||3e4<d)&&(h=0);return F},x}()}(Q||(Q={})),function(p){var P=function(){function x(d){this.wl=this.Ws=null,this.Kv=!1,this.BA=this.CA=0,this.CH=new p.h,this.SH=new p.h,this.FA=!1,this.xq=new p.l,this.rH=this.uw=0,this.vw=null,this.Bl=!1,this.Go=null,this.Xz=0,this.Re=d,this.Cs=p.Ab.zv(this.Re,0,!0),this.CH.Sc(),this.SH.Sc(),this.MH=NaN;var l=d.getCode();0<l?(this.Mk=l,p.qf.getCode(d)):this.Mk=p.qf.getCode(d),0>this.Mk&&(this.Mk=0);var n=this.Re.getType();if(this.eH=n==p.Tc.PE_TYPE_PROJCS?2:1,n==p.Tc.PE_TYPE_PROJCS&&!d.loadConstants())throw p.i.O("PeProjcs.loadConstants failed");l=n==p.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),n!=p.Tc.PE_TYPE_GEOGCS&&p.qf.getCode(l),this.Go=d.getUnit(),this.MH=l.getPrimem().getLongitude(),this.rH=d=l.getUnit().getUnitFactor(),d=Math.PI/(180*d),1e-10>Math.abs(d-1)&&(d=1),this.BA=d,(n&p.Tc.PE_TYPE_PROJCS)!=0?(l=this.Re,this.CA=1/l.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=p.Eg.generate(l,p.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=p.Ab.lN(this.vw.getCentralMeridian(),this.BA)):(this.FA=this.Bl=!0,this.CA=0,n=1/l.getUnit().getUnitFactor(),this.uw=.001/l.getDatum().getSpheroid().getAxis()*n,this.Xz=0),this.Bl&&(this.wx(),this.yK(),this.jY(),this.xK(),this.hY(),this.iY())}return x.prototype.cs=function(){return this.Mk},x.prototype.mk=function(){return this.vw},x.Ky=function(d,l){return d==l||d!=null&&l!=null&&d.Mk==0&&l.Mk==0&&d.Cs===l.Cs},x.prototype.Xc=function(){return this.Bl},x.prototype.ih=function(d){d.L(this.uo)},x.prototype.rv=function(){return this.uo.v},x.prototype.qv=function(){return this.uo.C},x.prototype.BR=function(d){d.L(this.ww)},x.prototype.hY=function(){var d=this.Re.getType();if(d==p.Tc.PE_TYPE_PROJCS){d=this.Re;var l=this.mk().getCentralMeridian(),n=d.getGeogcs();if(n==null)throw p.i.ga("internal error");l=[[l+(n=1/n.getUnit().getUnitFactor()*Math.PI),0]],p.gj.geogToProj(d,1,l),l=l[0][0],n=d.getParameters()[p.Tc.PE_PARM_X0].getValue();var a=this.ol();d=new p.l,a.A(d),l=(a=Math.abs(l-n))+n,n=-1*a+n,a=d.H,d=d.G;var h=new p.l;h.L(n,d,l,a),this.uo==null&&(this.uo=h)}else{if(d!=p.Tc.PE_TYPE_GEOGCS)throw p.i.ga("internal error");n=1/this.Re.getUnit().getUnitFactor()*Math.PI,(d=new p.l).L(-n,-n/2,n,n/2),this.uo==null&&(this.uo=d)}},x.prototype.iY=function(){var d=this.Re.getType();if(d==p.Tc.PE_TYPE_PROJCS){var l=this.Re;if(d=this.mk().getCentralMeridian(),(l=l.getGeogcs())==null)throw p.i.ga("internal error");l=1/l.getUnit().getUnitFactor()*Math.PI;var n=this.Xr(),a=new p.l;n.A(a),(n=new p.l).L(d-l,a.G,d+l,a.H),this.ww==null&&(this.ww=n)}else{if(d!=p.Tc.PE_TYPE_GEOGCS)throw p.i.ga("internal error");l=1/this.Re.getUnit().getUnitFactor()*Math.PI,(d=new p.l).L(-l,-l/2,l,l/2),this.ww==null&&(this.ww=d)}},x.prototype.bf=function(){return this.BA},x.prototype.rm=function(){return this.CA},x.prototype.Xr=function(){if(this.Bl)return this.wl;var d=this.wl;return d!=null?d:(this.wx(),this.wl)},x.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.TG)},x.prototype.wx=function(){if(this.Re.getType()==p.Tc.PE_TYPE_PROJCS){var d=this.Re,l=d.getGeogcs(),n=d.horizonGcsGenerate();if(n!=null){var a=n[0].getNump(),h=n[0].getKind();d=0<n[0].getInclusive();var f=this.bf(),m=90*f,y=360*f,w=370*f,I=180*f*p.Tc.PE_HORIZON_DELTA/Math.PI,M=new p.l,T=null;if(1<a){for(var $=1;$<a;$++)if(n[$].getKind()==p.Tc.PE_HORIZON_LINE){T==null&&(T=new p.Ua);var F=n[$].getCoord();T.rx(F[0][0],F[0][1]),T.Aj(F[1][0],F[1][1])}}if(h==p.Tc.PE_HORIZON_RECT)n=n[0].getCoord(),M.L(n[0][0],n[0][1]),M.$b(n[1][0],n[1][1]),Math.abs(M.H-m)<1e-7*I&&(M.H=m),Math.abs(M.G+m)<1e-7*I&&(M.G=-m),M.S()>w&&(n=-400*f,M.L(n,M.G,n+5*y,M.H)),n=new p.Hh(M),this.wl==null&&(this.wl=n,this.Kv=d);else{if(w=new p.Ea,y=this.mk().isGcsHorizonMultiOverlap(),M=p.iu.XE(l,p.ju.Integer64),y){for(w=new p.bL,I=p.Ih.local().W(w,M,null),$=0;$<a;$++)if(n[$].getKind()==p.Tc.PE_HORIZON_POLY){for(l=n[$].getSize(),f=n[$].getCoord(),h=[],m=0;m<l;m++)h[m]=p.h.construct(f[m][0],f[m][1]);n[$].getInclusive(),y&&((f=new p.Ea).$k(h,l-1),w.VX(f),I.re())}w=I.next()}else for($=0;$<a;$++)if(n[$].getKind()==p.Tc.PE_HORIZON_POLY){for(l=n[$].getSize(),f=n[$].getCoord(),y=[],m=0;m<l;m++)y[m]=p.h.construct(f[m][0],f[m][1]);n[$].getInclusive(),w.$k(y,l-1)}d?p.Zj.local().yn(w,M,1):p.mp.local().yn(w,M,1),p.fj.local().yn(w,M,1),this.wl==null&&(this.wl=w,this.Kv=d,this.TG=T)}}}},x.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},x.prototype.yK=function(){if(this.eH==2){var d=this.Re.horizonPcsGenerate();if(d!=null){var l=d[0].getKind();d[0].getInclusive();var n=d[0].getNump(),a=!1;if(l==p.Tc.PE_HORIZON_RECT)d=d[0].getCoord(),(n=new p.l).L(d[0][0],d[0][1]),n.$b(d[1][0],d[1][1]),d=new p.Hh(n);else{for(l=-1,a=0;a<n;a++)d[a].getKind()==p.Tc.PE_HORIZON_POLY&&(l=a);for(a=d[l].getSize()-1,d=d[l].getCoord(),n=[],l=0;l<a;l++)n[l]=p.h.construct(d[l][0],d[l][1]);d=l=new p.Ea,l.$k(n,a),a=!0}this.mk().isDensificationNeeded()&&(n=1e5*this.rm(),d=p.Zl.local().W(d,n,null)),a&&(a=new p.Hh,d.dn(a),d.He(),d.Rb(),d.kR(),p.Zj.local().yn(d,null,1)),this.Ws==null&&(this.Ws=d)}}},x.prototype.ol=function(){if(this.Bl)return this.Ws;var d=this.Ws;return d!=null?d:(this.yK(),this.Ws)},x.prototype.jY=function(){if(this.Re.getType()==p.Tc.PE_TYPE_PROJCS){var d=90*this.bf();d=[[0,d],[0,-d]],p.gj.geogToProj(this.Re,2,d);var l=this.mk(),n=l.getNorthPoleLocation()!=p.Eg.PE_POLE_OUTSIDE_BOUNDARY;l=l.getSouthPoleLocation()!=p.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.FA||(n&&this.CH.na(d[0][0],d[0][1]),l&&this.SH.na(d[1][0],d[1][1]))}this.FA=!0},x.prototype.xK=function(){if(this.eH==1){var d=400*this.bf();this.xq.L(-d,-d,d,d)}else d=p.Eg.generate(this.Re,p.Eg.PE_PCSINFO_OPTION_DOMAIN),d=p.l.construct(d.getDomainMinx(),d.getDomainMiny(),d.getDomainMaxx(),d.getDomainMaxy()),this.xq.B()&&this.xq.L(d)},x.prototype.cR=function(d){this.Bl&&d.L(this.xq),this.xq.B()&&this.xK(),d.L(this.xq)},x.prototype.Wp=function(){return this.MH},x.prototype.Bi=function(){return this.Xz},x.prototype.Id=function(){return this.Go},x.prototype.Zr=function(){return this.rH},x}();p.JC=P}(Q||(Q={})),function(p){var P=function(){function x(d){this.FT=d,this.Cs=p.Ab.zv(d,0,!0);var l=d.getCode();this.us=0<l?l:p.qf.getCode(d),0>this.us&&(this.us=0),this.Go=l=this.FT.getUnit(),this.DH=1/l.getUnitFactor(),p.qf.getCode(d)}return x.Ky=function(d,l){return d==l||d!=null&&l!=null&&d.us==0&&l.us==0&&d.Cs===l.Cs},x.prototype.cs=function(){return this.us},x}();p.KL=P}(Q||(Q={})),function(p){p.$g=function(){function P(){}return P.ub=function(x,d,l,n,a,h,f,m){if(h!=null||f!=null||m!=null){n=p.F.ca(n),d=p.F.ca(d),l=p.F.ca(l),a=p.F.ca(a),1.570796326794897<p.s.R(l)&&(l=p.s.Mb(3.141592653589793,l)-l,d=p.F.ca(d+3.141592653589793)),1.570796326794897<p.s.R(a)&&(a=p.s.Mb(3.141592653589793,a)-a,n=p.F.ca(n+3.141592653589793));var y=p.F.ca(n-d);if(p.s.$(l,a)&&(p.s.$(d,n)||p.s.$(p.s.R(l),1.570796326794897)))h!=null&&(h.u=0),f!=null&&(f.u=0),m!=null&&(m.u=0);else{if(p.s.$(l,-a)){if(p.s.$(p.s.R(l),1.570796326794897))return h!=null&&(h.u=3.141592653589793*x),f!=null&&(f.u=0<l?p.F.ca(3.141592653589793-p.F.ca(n)):p.F.ca(n)),void(m!=null&&(m.u=0<l?p.F.ca(n):p.F.ca(3.141592653589793-p.F.ca(n))));if(p.s.$(p.s.R(y),3.141592653589793))return h!=null&&(h.u=3.141592653589793*x),f!=null&&(f.u=0),void(m!=null&&(m.u=0))}var w=p.s.R(l)==1.570796326794897?0:Math.cos(l),I=Math.sin(l),M=p.s.R(a)==1.570796326794897?0:Math.cos(a),T=Math.sin(a),$=p.s.R(y)==1.570796326794897?0:Math.cos(y),F=p.s.R(y)==3.141592653589793?0:Math.sin(y);if(h!=null){var R=Math.sin((a-l)/2);y=Math.sin(y/2),h.u=2*Math.asin(Math.sqrt(R*R+w*M*y*y))*x}f!=null&&(f.u=p.s.$(p.s.R(l),1.570796326794897)?0>l?n:p.F.ca(3.141592653589793-n):Math.atan2(M*F,w*T-I*M*$)),m!=null&&(p.s.$(p.s.R(a),1.570796326794897)?m.u=0>a?d:p.F.ca(3.141592653589793-d):(m.u=Math.atan2(w*F,T*w*$-M*I),m.u=p.F.ca(m.u+3.141592653589793)))}}},P.sf=function(x,d,l,n,a,h,f){if(h!=null||f!=null){d=p.F.ca(d),l=p.F.ca(l),1.570796326794897<p.s.R(l)&&(l=p.s.Mb(3.141592653589793,l)-l,d=p.F.ca(d+3.141592653589793)),p.s.$(p.s.R(l),1.570796326794897)&&(d=0),a=p.F.ca(a);var m=p.s.$(p.s.R(a),1.570796326794897)?0:Math.cos(a),y=p.s.$(p.s.R(a),3.141592653589793)?0:Math.sin(a),w=p.s.$(p.s.R(l),1.570796326794897)?0:Math.cos(l),I=Math.sin(l);x=n/x,n=p.s.$(p.s.R(x),1.570796326794897)?0:Math.cos(x);var M=p.s.$(p.s.R(x),3.141592653589793)?0:Math.sin(x),T=Math.asin(I*n+w*M*m);f!=null&&(f.u=T),h!=null&&(h.u=p.s.$(p.s.R(T),1.570796326794897)?p.s.$(l,-T)?0>T?a:p.F.ca(3.141592653589793-a):d:p.s.$(p.s.R(l),1.570796326794897)&&p.s.$(x,3.141592653589793)?0>l?a:p.F.ca(3.141592653589793-a):p.F.ca(d+Math.atan2(M*y,w*n-I*M*m)))}},P}()}(Q||(Q={})),function(p){p.Yk=function(){function P(){}return P.ub=function(x,d,l,n,a,h,f,m,y){var w=new p.ha(0),I=new p.ha(0),M=[0,0,0],T=[0,0,0],$=[0,0,0],F=new p.ha(0),R=new p.ha(0),j=new p.ha(0),H=new p.ha(0),W=new p.ha(0);if(f!=null||m!=null||y!=null)if(p.s.vi(d))p.$g.ub(x,l,n,a,h,f,m,y);else{a=p.F.ca(a),l=p.F.ca(l);var V=p.F.ca(a-l);if(p.s.$(n,h)&&(p.s.$(l,a)||p.s.$(p.s.R(n),1.570796326794897)))f!=null&&(f.u=0),m!=null&&(m.u=0),y!=null&&(y.u=0);else{if(p.s.$(n,-h)){if(p.s.$(p.s.R(n),1.570796326794897))return f!=null&&(f.u=2*p.F.Ch(x,d)),m!=null&&(m.u=0<n?p.F.ca(3.141592653589793-p.F.ca(a)):p.F.ca(a)),void(y!=null&&(y.u=0<n?p.F.ca(a):p.F.ca(3.141592653589793-p.F.ca(a))));p.s.$(p.s.R(V),3.141592653589793)&&(f!=null&&(f.u=2*p.F.Ch(x,d)),m!=null&&(m.u=0),y!=null&&(y.u=0))}else(p.s.$(p.s.R(n),1.570796326794897)||p.s.$(p.s.R(h),1.570796326794897))&&(p.s.$(p.s.R(n),1.570796326794897)?l=a:a=l);var Y=0;if(0>V){Y=1;var se=l;l=a,a=se,se=n,n=h,h=se}V=p.F.pt(d,n);var re=p.F.pt(d,h);m==null&&y==null||(p.$g.ub(x,l,V,a,re,null,w,I),w=Math.atan2(Math.sin(w.u)*Math.cos(n-V),Math.cos(w.u)),I=Math.atan2(Math.sin(I.u)*Math.cos(h-re),Math.cos(I.u)),Y!=0&&(se=w,w=I,I=se),m!=null&&(m.u=w),y!=null&&(y.u=I)),f!=null&&(p.F.el(1,d,n,l,0,j,H,W),M[0]=j.u,M[1]=H.u,M[2]=W.u,p.F.el(1,d,h,a,0,j,H,W),T[0]=j.u,T[1]=H.u,T[2]=W.u,$[0]=M[1]*T[2]-T[1]*M[2],$[1]=-(M[0]*T[2]-T[0]*M[2]),$[2]=M[0]*T[1]-T[0]*M[1],d=1-p.F.w(d,p.F.Xq(d,p.F.Sj(d,Math.acos($[2]/Math.sqrt($[0]*$[0]+$[1]*$[1]+$[2]*$[2]))))),d*=2-d,m=Math.atan2(-$[1],-$[0]),$=p.F.ca(m-1.570796326794897),m=p.F.ca(m+1.570796326794897),$=p.s.R(p.F.ca(l-$))<=p.s.R(p.F.ca(l-m))?$:m,p.$g.ub(1,$,0,l,V,F,null,null),p.$g.ub(1,$,0,a,re,R,null,null),3.141592653589793<F.u+R.u&&($=p.F.ca($+3.141592653589793),p.$g.ub(1,$,0,l,V,F,null,null),p.$g.ub(1,$,0,a,re,R,null,null)),F.u*=p.s.Mb(1,n),R.u*=p.s.Mb(1,h),F.u=p.F.Sj(d,F.u),R.u=p.F.Sj(d,R.u),l=p.F.q(x,d,F.u),x=p.F.q(x,d,R.u),f.u=p.s.R(x-l))}}},P.sf=function(x,d,l,n,a,h,f,m){var y=0,w=new p.ha(0),I=new p.ha(0),M=[0,0,0],T=[0,0,0],$=new p.ha(0),F=new p.ha(0),R=new p.ha(0);if(f!=null||m!=null)if(p.s.vi(d))p.$g.sf(x,l,n,a,h,f,m);else if(p.s.Dd(a))f!=null&&(f.u=l),m!=null&&(m.u=n);else if(h=p.F.ca(h),0>a&&(a=p.s.R(a),h=p.F.ca(h+3.141592653589793)),l=p.F.ca(l),n=p.F.ca(n),1.570796326794897<p.s.R(n)&&(l=p.F.ca(l+3.141592653589793),n=p.s.Mb(3.141592653589793,n)-n),p.s.$(p.s.R(n),1.570796326794897)&&(l=0),p.s.Dd(n)){var j=p.s.R(1.570796326794897-p.s.R(h));j=p.F.Sj(d,j),j=1-p.F.w(d,p.F.Xq(d,j)),j*=2-j,x=a/p.F.Ch(x,j)*1.570796326794897,x=p.F.Tq(j,x),x=p.F.pt(j,x),p.$g.sf(1,l,n,x,h,f,w),m!=null&&(y=w.u),m!=null&&(m.u=p.F.Sj(d,y))}else if(p.s.$(p.s.R(n),1.570796326794897))w=2*(y=p.F.Ch(x,d)),h=0<(x=p.s.Mb(1.570796326794897,n))?p.F.ca(3.141592653589793-h):h,n=y-a,p.s.R(n)<=y?f!=null&&(f.u=h):(n=Math.floor(a/w),p.P.truncate(n%2)==0?(f!=null&&(f.u=h),a-=n*w):(f!=null&&(f.u=p.F.ca(h+3.141592653589793)),a=(n+1)*w-a),n=y-a),m!=null&&(m.u=p.F.Tq(d,n/y*x));else{j=p.F.pt(d,n),h=Math.atan2(Math.sin(h),Math.cos(h)*Math.cos(n-j));var H=p.P.truncate(p.s.Mb(1,j))*(1.570796326794897>=p.s.R(h)?1:-1);h=p.F.ca(l+Math.atan(Math.tan(h)*-Math.sin(j))),p.$g.ub(x,h,0,l,j,null,I,null),j=p.s.R(1.570796326794897-p.s.R(I.u)),j=p.F.Sj(d,j),j=1-p.F.w(d,p.F.Xq(d,j)),j*=2-j,p.F.el(1,d,0,h,0,$,F,R),M[0]=$.u,M[1]=F.u,M[2]=R.u,p.F.el(1,d,n,l,0,$,F,R),T[0]=$.u,T[1]=F.u,T[2]=R.u,n=Math.acos((M[0]*T[0]+M[1]*T[1]+M[2]*T[2])/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2])),n=p.F.Sj(j,n),a=0<(n=p.F.q(x,j,n)+a*H)?I.u:p.F.ca(I.u+3.141592653589793),x=p.s.R(n)/p.F.Ch(x,j)*1.570796326794897,x=p.F.Tq(j,x),x=p.F.pt(j,x),p.$g.sf(1,h,0,x,a,f,w),m!=null&&(y=w.u),m!=null&&(m.u=p.F.Sj(d,y))}},P}()}(Q||(Q={})),function(p){p.eu=function(){function P(){}return P.ub=function(x,d,l,n,a,h,f,m,y){var w=0,I=0,M=0;if(f!=null||m!=null||y!=null)if(p.s.vi(d))p.$g.ub(x,l,n,a,h,f,m,y);else{var T=p.F.ca(a-l);if(p.s.$(n,h)&&(p.s.Dd(T)||p.s.$(p.s.R(n),1.570796326794897)))f!=null&&(f.u=0),m!=null&&(m.u=0),y!=null&&(y.u=0);else{if(p.s.$(n,-h)){if(p.s.$(p.s.R(n),1.570796326794897))return f!=null&&(f.u=2*p.F.Ch(x,d)),m!=null&&(m.u=0<n?p.F.ca(3.141592653589793-p.F.ca(a)):p.F.ca(a)),void(y!=null&&(y.u=0<n?p.F.ca(a):p.F.ca(3.141592653589793-p.F.ca(a))));p.s.$(p.s.R(T),3.141592653589793)&&(f!=null&&(f.u=2*p.F.Ch(x,d)),m!=null&&(m.u=0),y!=null&&(y.u=0))}else if(p.s.$(p.s.R(n),1.570796326794897)||p.s.$(p.s.R(h),1.570796326794897)||p.s.Dd(T)||p.s.$(p.s.R(T),3.141592653589793))return void p.Yk.ub(x,d,l,n,a,h,f,m,y);var $=1-Math.sqrt(1-d),F=d/(1-d),R=x*(1-$);x=p.F.Xq(d,n);var j=p.F.Xq(d,h);d=p.s.R(x)==1.570796326794897?0:Math.cos(x);var H=Math.sin(x),W=p.s.R(j)==1.570796326794897?0:Math.cos(j),V=Math.sin(j),Y=T,se=Math.cos(Y),re=Math.sin(Y),he=1,ue=0;do{var we=Y,Te=Math.sqrt(Math.pow(W*re,2)+Math.pow(d*V-H*W*se,2)),Ee=H*V+d*W*se,He=Math.atan2(Te,Ee);if(Te==0){he=0;break}var Pe=d*W*re/Te;if(w=Math.cos(Math.asin(Pe)),I=Ee-2*H*V/(w*=w),1<p.s.R(I)&&(I=p.s.Mb(1,I)),Y=T+(1-(Y=$/16*w*(4+$*(4-3*w))))*$*Pe*(He+Y*Te*(I+Y*Ee*(2*(M=I*I)-1))),se=Math.cos(Y),re=Math.sin(Y),ue++,3.141592653589793<p.s.R(Y)&&30<ue){he=0;break}}while(5e3>=ue&&!p.s.$(we,Y));if(he!=0)$=(F*=w)*(256+F*(F*(74-47*F)-128))/1024,f!=null&&(f.u=R*(1+F*(4096+F*(F*(320-175*F)-768))/16384)*(He-$*Te*(I+$/4*(Ee*(2*M-1)-$/6*I*(4*Te*Te-3)*(4*M-3))))),m!=null&&(m.u=p.s.$(p.s.R(n),1.570796326794897)?0>n?a:p.F.ca(3.141592653589793-a):Math.atan2(W*re,d*V-H*W*se)),y!=null&&(p.s.$(p.s.R(h),1.570796326794897)?y.u=0>h?l:p.F.ca(3.141592653589793-l):(y.u=Math.atan2(d*re,d*V*se-H*W),y.u=p.F.ca(y.u+3.141592653589793)));else{Y=p.s.Mb(3.141592653589793,T),Ee=H*V-d*W,He=Math.acos(Ee),Te=Math.sin(He),w=1,ue=Pe=0;do M=Pe,se=1-.25*(Pe=$*(w*=w)*(1+$+$*$))+.1875*(I=$*$*(se=w*w)*(1+2.25*$))-.1953125*(he=$*$*$*se*w),Pe=.25*Pe-.25*I+.29296875*he,re=.03125*I-.05859375*he,he*=.00651041666666667,I=Ee-2*H*V/w,1<p.s.R(I)&&(I=p.s.Mb(1,I)),w=Math.acos(I),Ee=Math.cos(2*w),we=Math.cos(3*w),re=(Pe=p.s.$(n,-h)?p.F.ca(3.141592653589793-T)/(3.141592653589793*$*se):p.F.ca(Y-T)/($*(se*He+Pe*Te*I+re*Math.sin(2*He)*Ee+he*Math.sin(3*He)*we)))*Te/(d*W),Y=1.570796326794897<p.s.R(T)?p.s.Mb(3.141592653589793,re)-Math.asin(re):Math.asin(re),se=Math.cos(Y),Te=Math.sqrt(Math.pow(W*re,2)+Math.pow(d*V-H*W*se,2)),He=3.141592653589793-Math.asin(p.s.R(Te)),Ee=Math.cos(He),w=Math.cos(Math.asin(Pe)),ue++;while(70>=ue&&!p.s.$(M,Pe));f!=null&&(se=1+(F*=w*=w)*(4096+F*(F*(320-175*F)-768))/16384,p.s.$(n,-h)?f.u=3.141592653589793*R*se:(I=Ee-2*H*V/w,w=Math.acos(I),Ee=Math.cos(2*w),we=Math.cos(3*w),f.u=R*(se*He+F*(F*(128+F*(35*F-60))-512)/2048*Te*I+F*(5*F-4)/6144*F*F*Math.sin(2*He)*Ee+he*Math.sin(3*He)*we+-762939453125e-16*F*F*F*F*Math.sin(4*He)*Math.cos(4*w)))),m!=null&&(p.s.Dd(n)&&p.s.Dd(h)?(w=Math.sqrt(1-Pe*Pe),m.u=Math.acos(w),0>T&&(m.u*=-1)):p.s.$(p.s.R(n),1.570796326794897)?m.u=0>n?a:p.F.ca(3.141592653589793-a):(f=Pe/d,R=Math.sqrt(1-f*f),0>d*V-H*W*Math.cos(Y)&&(R*=-1),m.u=Math.atan2(f,R),p.s.$(n,-h)&&p.s.R(p.F.ca(l-a))>3.141592653589793*(1-$*Math.cos(n))&&(0<n&&1.570796326794897>p.s.R(m.u)||0>n&&1.570796326794897<p.s.R(m.u))&&(m.u=p.s.Mb(3.141592653589793,m.u)-m.u))),y!=null&&(p.s.Dd(n)&&p.s.Dd(h)?(w=Math.sqrt(1-Pe*Pe),y.u=Math.acos(w),0<=T&&(y.u*=-1)):p.s.$(p.s.R(h),1.570796326794897)?y.u=0>h?l:p.F.ca(3.141592653589793-l):(T=Pe/W,f=Math.sqrt(1-T*T),R=Math.sin(Y/2),0>Math.sin(j-x)-2*d*V*R*R&&(f*=-1),y.u=Math.atan2(T,f),y.u=p.F.ca(y.u+3.141592653589793),p.s.$(n,-h)&&!p.s.Dd(n)&&!p.s.$(p.s.R(n),1.570796326794897)&&p.s.R(p.F.ca(l-a))>3.141592653589793*(1-$*Math.cos(n))&&(m!=null?R=m.u:(f=Pe/d,R=Math.sqrt(1-f*f),0>d*V-H*W*Math.cos(Y)&&(R*=-1),R=Math.atan2(f,R),p.s.$(n,-h)&&p.s.R(p.F.ca(l-a))>3.141592653589793*(1-$*Math.cos(n))&&(0<n&&1.570796326794897>p.s.R(R)||0>n&&1.570796326794897<p.s.R(R))&&(R=p.s.Mb(3.141592653589793,R)-R)),1.570796326794897>=p.s.R(R)&&1.570796326794897<p.s.R(y.u)||1.570796326794897<=p.s.R(R)&&1.570796326794897>p.s.R(y.u))&&(y.u=-1*p.F.ca(y.u+3.141592653589793))))}}}},P.sf=function(x,d,l,n,a,h,f,m){if(f!=null||m!=null)if(p.s.vi(d))p.$g.sf(x,l,n,a,h,f,m);else if(h=p.F.ca(h),p.s.$(p.s.R(n),1.570796326794897)||p.s.Dd(h)||p.s.$(p.s.R(h),3.141592653589793))p.Yk.sf(x,d,l,n,a,h,f,m);else{var y=p.s.R(h)==1.570796326794897?0:Math.cos(h),w=p.s.R(h)==3.141592653589793?0:Math.sin(h);p.s.$(p.s.R(n),1.570796326794897)&&(l=0),h=1-Math.sqrt(1-d);var I=p.F.Xq(d,n);n=p.s.R(I)==1.570796326794897?0:Math.cos(I);var M=Math.sin(I);I=Math.atan2(Math.tan(I),y);var T=n*w,$=T*T,F=1-$,R=d/(1-d)*F,j=(d=R*(256+R*(R*(74-47*R)-128))/1024)/4,H=d/6,W=a/(x*(1-h)*(1+R*(4096+R*(R*(320-175*R)-768))/16384)),V=W;do{var Y=V;a=p.s.R(V)==1.570796326794897?0:Math.cos(V);var se=(R=p.s.R(V)==3.141592653589793?0:Math.sin(V))*R;V=d*R*((x=Math.cos(2*I+V))+j*(a*(2*(V=x*x)-1)-H*x*(4*se-3)*(4*V-3)))+W}while(!p.s.$(Y,V));a=p.s.R(V)==1.570796326794897?0:Math.cos(V),R=p.s.R(V)==3.141592653589793?0:Math.sin(V),f!=null&&(w=Math.atan2(R*w,n*a-M*R*y),F=h/16*F*(4+h*(4-3*F)),x=Math.cos(2*I+V),f.u=p.F.ca(l+(w-(1-F)*h*T*(V+F*R*(x+F*a*(2*x*x-1)))))),m!=null&&(F=M*R-n*a*y,F=(1-h)*Math.sqrt($+F*F),m.u=Math.atan2(M*a+n*R*y,F))}},P}()}(Q||(Q={})),function(p){p.KC=function(){function P(){}return P.ub=function(x,d,l,n,a,h,f,m,y){var w=p.F.ca(a-l),I=p.s.$(p.s.R(n),1.570796326794897),M=p.s.$(p.s.R(h),1.570796326794897);if(p.s.$(n,h)&&(p.s.Dd(w)||I))f!=null&&(f.u=0),m!=null&&(m.u=0),y!=null&&(y.u=0);else{if(p.s.vi(d)){var T=Math.sin(n),$=Math.sin(h);T=Math.sqrt((1+T)/(1-T)),$=Math.sqrt((1+$)/(1-$)),T=Math.log($)-Math.log(T),T=Math.atan2(w,T),f!=null&&(f.u=p.s.$(n,h)?p.s.R(x*Math.cos(n)*w):p.s.R((x*h-x*n)/Math.cos(T)))}else $=p.F.Sw(d,h),T=Math.sin(p.F.Sw(d,n)),$=Math.sin($),T=Math.sqrt((1+T)/(1-T)),$=Math.sqrt((1+$)/(1-$)),T=Math.log($)-Math.log(T),T=Math.atan2(w,T),f!=null&&(p.s.$(n,h)?f.u=p.s.R(x*w*Math.cos(n)/p.F.w(d,n)):(w=p.F.q(x,d,n),x=p.F.q(x,d,h),f.u=p.s.R((x-w)/Math.cos(T))));m==null&&y==null||(f=p.F.ca(T+3.141592653589793),I&&M||!I&&!M||(I?T=0>n?a:p.F.ca(3.141592653589793-a):M&&(f=0>h?l:p.F.ca(3.141592653589793-l))),m!=null&&(m.u=T),y!=null&&(y.u=f))}},P.sf=function(x,d,l,n,a,h,f,m){h=p.F.ca(h),0>a&&(a=p.s.R(a),h=p.F.ca(h+3.141592653589793)),p.s.vi(d)?p.s.$(p.s.R(n),1.570796326794897)?(l=0>n?h:p.F.ca(3.141592653589793-h),3.141592653589793>=(h=a/x%6.283185307179586)?x=n-p.s.Mb(h,n):(l=p.F.ca(l+3.141592653589793),x=-n+p.s.Mb(h-3.141592653589793,n))):p.s.$(p.s.R(h),1.570796326794897)?(l=p.F.ca(l+p.s.Mb(a,h)/(x*Math.cos(n))),x=n):(x=n+a*Math.cos(h)/x,1.570796326794897<p.s.R(x)&&(x=1.570796326794897),p.s.$(p.s.R(x),1.570796326794897)&&(p.s.Dd(h)||p.s.$(p.s.R(h),3.141592653589793))||(1.570796316258184<p.s.R(x)&&(x=p.s.Mb(1.570796316258184,x)),d=Math.sin(n),n=Math.sin(x),d=Math.sqrt((1+d)/(1-d)),n=Math.sqrt((1+n)/(1-n)),d=Math.log(n)-Math.log(d),l=p.F.ca(l+Math.tan(h)*d))):p.s.$(p.s.R(n),1.570796326794897)?(l=0>n?h:p.F.ca(3.141592653589793-h),h=a/p.F.lW(x,d),3.141592653589793>=(h%=6.283185307179586)?x=n-p.s.Mb(h,n):(l=p.F.ca(l+3.141592653589793),x=-n+p.s.Mb(h-3.141592653589793,n)),x=p.F.Tq(d,x)):p.s.$(p.s.R(h),1.570796326794897)?(l=p.F.ca(l+p.s.Mb(a,h)*p.F.w(d,n)/(x*Math.cos(n))),x=n):(x=1.570796326794897*(a*Math.cos(h)+p.F.q(x,d,n))/p.F.Ch(x,d),1.570796326794897<p.s.R(x)&&(x=p.s.Mb(1.570796326794897,x)),x=p.F.Tq(d,x),p.s.$(p.s.R(x),1.570796326794897)&&(p.s.Dd(h)||p.s.$(p.s.R(h),3.141592653589793))||(a=p.F.Sw(d,n),n=p.F.Sw(d,x),1.570796316258184<p.s.R(n)&&(n=p.s.Mb(1.570796316258184,x),x=p.F.tO(d,n)),d=Math.sin(a),n=Math.sin(n),d=Math.sqrt((1+d)/(1-d)),n=Math.sqrt((1+n)/(1-n)),d=Math.log(n)-Math.log(d),l=p.F.ca(l+Math.tan(h)*d))),f!=null&&(f.u=l),m!=null&&(m.u=x)},P}()}(Q||(Q={})),function(p){p.kb=function(){function P(){}return P.Sy=function(x,d,l,n,a,h,f){p.eu.ub(x,d,l,n,a,h,null,f,null)},P.Ai=function(x,d,l,n,a,h,f,m){p.eu.sf(x,d,l,n,a,h,f,m)},P.xd=function(x,d,l,n,a,h,f,m,y,w){switch(w){case 2:p.Yk.ub(x,d,l,n,a,h,f,m,y);break;case 3:p.LC.ub(x,d,l,n,a,h,f,m,y);break;case 1:p.KC.ub(x,d,l,n,a,h,f,m,y);break;default:p.eu.ub(x,d,l,n,a,h,f,m,y)}},P.qj=function(x,d,l,n,a,h,f,m,y){switch(y){case 2:p.Yk.sf(x,d,l,n,a,h,f,m);break;case 3:p.LC.sf(x,d,l,n,a,h,f,m);break;case 1:p.KC.sf(x,d,l,n,a,h,f,m);break;default:p.eu.sf(x,d,l,n,a,h,f,m)}},P}()}(Q||(Q={})),function(p){var P=function(){function d(){this.y=this.x=null}return d.construct=function(l){var n=new d;return n.x=new p.Xb,n.x.set(l.x),n.y=new p.Xb,n.y.set(l.y),n},d.QE=function(l,n){var a=new d;return a.x=new p.Xb,a.x.set(l),a.y=new p.Xb,a.y.set(n),a},d.prototype.rg=function(){return this.x.rg()&&this.y.rg()},d.prototype.value=function(){return p.h.construct(this.x.value(),this.y.value())},d}();p.rY=P;var x=function(){function d(){this.z=this.y=this.x=null}return d.construct=function(l){var n=new d;return n.x=new p.Xb,n.x.set(l.x),n.y=new p.Xb,n.y.set(l.y),n.z=new p.Xb,n.z.set(l.z),n},d.QE=function(l,n,a){var h=new d;return h.x=new p.Xb,h.x.set(l),h.y=new p.Xb,h.y.set(n),h.z=new p.Xb,h.z.set(a),h},d.prototype.rg=function(){return this.x.rg()&&this.y.rg()&&this.z.rg()},d.prototype.value=function(){return new p.Od(this.x.value(),this.y.value(),this.z.value())},d.prototype.Sh=function(l){var n=new p.Xb,a=new p.Xb,h=new p.Xb;return n.Ml(this.x,l.x),a.Ml(this.y,l.y),h.Ml(this.z,l.z),(l=new p.Xb).ZM(n,a),l.add(h),l},d.prototype.YE=function(l){var n=new d;n.x.Ml(this.y,l.z),n.y.Ml(this.z,l.x),n.z.Ml(this.x,l.y);var a=new p.Xb,h=new p.Xb,f=new p.Xb;return a.Ml(this.z,l.y),h.Ml(this.x,l.z),f.Ml(this.y,l.x),n.x.sub(a),n.y.sub(h),n.z.sub(f),n},d}();p.sY=x,p.Nx=function(){function d(){}return d.zP=function(l,n,a){var h=n.x;n=n.y,d.el(1,l,Math.cos(h),Math.sin(h),Math.cos(n),Math.sin(n),a)},d.yP=function(l,n){var a=new p.Od;return d.zP(l,n,a),a},d.el=function(l,n,a,h,f,m,y){l/=Math.sqrt(1-n*m*m),y.L(l*f*a,l*f*h,l*(1-n)*m)},d.$u=function(l,n){var a=new p.Xb,h=new p.Xb,f=new p.Xb,m=new p.Xb;a.cos(n.x),h.sin(n.x),f.cos(n.y),m.sin(n.y);var y=new p.Xb;return y.set(m),y.Bg(m),y.Po(l),y.Po(-1),y.fN(),y.sqrt(),(n=new p.Xb).set(1),n.lm(y),(y=new p.Xb).set(n),y.Bg(f),y.Bg(a),(a=new p.Xb).set(n),a.Bg(f),a.Bg(h),(h=new p.Xb).set(n),h.Po(1-l),h.Bg(m),x.QE(y,a,h)},d.NS=function(l,n,a,h){if(Math.abs(n.x-a.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(a.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(a.y)==.5*Math.PI)&&n.x!=a.x)return NaN;if(h=d.YA(h,Math.min(n.x,a.x),Math.max(n.x,a.x)),!new p.Oc(n.x,a.x).contains(h))return NaN;var f=P.construct(n);if(a=P.construct(a),f=d.$u(l,f),a=d.$u(l,a),(a=f.YE(a)).z.rg())return n.y;var m=new p.Xb;m.set(a.x),m.lm(a.z),m.Po(-1);var y=new p.Xb;y.set(a.y),y.lm(a.z),y.Po(-1);var w=new p.Xb;return w.set(y),w.Bg(y),(f=new p.Xb).set(m),f.Bg(m),f.add(w),f.sqrt(),f.rg()||m.rg()&&y.rg()?n.y:(n=Math.atan2(y.value(),m.value()),n=Math.atan2(f.value()*Math.cos(n-h),1-l),h=d.yP(l,p.h.construct(h,n)),l=new p.Od(h.x,h.y,-h.z),h=a.value().Sh(h),l=a.value().Sh(l),Math.abs(l)<Math.abs(h)&&(n=-n),n)},d.Jz=function(l,n,a,h,f){if(f[0]=NaN,f[1]=NaN,Math.abs(n.x-a.x)>Math.PI||Math.abs(n.y)>.5*Math.PI||Math.abs(a.y)>.5*Math.PI||(Math.abs(n.y)==.5*Math.PI||Math.abs(a.y)==.5*Math.PI)&&n.x!=a.x||Math.abs(h)>=.5*Math.PI||0<n.y&&0<a.y&&n.y>h&&a.y>h||0>n.y&&0>a.y&&n.y<h&&a.y<h)return 0;var m=P.construct(n),y=P.construct(a);m=d.$u(l,m),y=d.$u(l,y);var w=m.YE(y);if(w.z.rg())return new p.Oc(n.y,a.y).contains(h)?(f[0]=n.x,1):0;(y=new p.Xb).set(w.x),y.lm(w.z),y.Po(-1),(m=new p.Xb).set(w.y),m.lm(w.z),m.Po(-1),(w=new p.Xb).set(m),w.Bg(m);var I=new p.Xb;return I.set(y),I.Bg(y),I.add(w),I.sqrt(),I.rg()||y.rg()&&m.rg()?h==0?(f[0]=n.x,f[1]=a.x,2):0:(l=(1-l)*Math.tan(h)/I.value(),1<Math.abs(l)?0:(l=Math.acos(l),w=Math.atan2(m.value(),y.value()),y=Math.min(n.x,a.x),m=Math.max(n.x,a.x),a=d.YA(w-l,y,m),l=h!=0?d.YA(w+l,y,m):a,h=0,y<=a&&a<=m&&(f[h]=a,h++),l!=a&&y<=l&&l<=m&&(f[h]=l,++h==2&&Math.abs(f[0]-n.x)>Math.abs(f[1]-n.x)&&(n=f[0],f[0]=f[1],f[1]=n)),h))},d.YA=function(l,n,a){return l>a?l-=2*(n=Math.ceil((l-a)/(2*Math.PI)))*Math.PI:l<n&&(l+=2*(n=Math.ceil((n-l)/(2*Math.PI)))*Math.PI),l},d}()}(Q||(Q={})),function(p){p.SK=function(){function P(){}return P.WX=function(x,d){var l=8,n=[0,0,0,0],a=new p.h;a.N(d),a.scale(p.cb.tc(x).Id().Fc()==9102?1:p.cb.tc(x).Id().ci/3.141592653589793*180),-180>a.x?(a.x-=a.x%360,-180>a.x&&(a.x+=360)):180<a.x&&(a.x-=a.x%360,180<a.x&&(a.x-=360)),90<a.y&&(a.y=90),-90>a.y&&(a.y=-90);for(var h=-180,f=180,m=(x=5*l)-1,y=(d=(x+31)/32)-1;0<=y;y--)for(var w=m-32*y,I=Math.min(32,x-32*y),M=1;M<I;M+=2){var T=.5*(f+h);a.x>=T?(n[y]|=1<<w,h=T):f=T,w-=2,m-=2}for(h=-90,f=90,m=x-2,y=d-1;0<=y;y--)for(w=m-32*y,I=Math.min(32,x-32*y),M=0;M<I;M+=2)T=.5*(f+h),a.y>=T?(n[y]|=1<<w,h=T):f=T,w-=2,m-=2;return P.VP(n,l,l)},P.VP=function(x,d,l){for(var n=[],a=0;a<d;a++)n[a]="";for(var h=a=0,f=0;f<d;f++){var m=x[a]>>h&31;if(31<(h+=5)){var y=37-h;m&=(1<<y)-1,h-=32,m|=(x[++a]&(1<<h)-1)<<y}n[d-1-f]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[m]}if(l>d)for(f=0;f<l-d;f++)n.push("0");else l<d&&(n.length=l);return n.join("")},P}()}(Q||(Q={})),function(p){var P={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},x={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};p.yr=function(){function d(){}return d.Ny=function(l){d.zp===!1&&d.zt();var n=d.AQ(l);if(n==-1){var a=d.Ax(l);a!=l&&(n=d.Ny(a))}return n==-1&&(a=d.AK(l))!=l&&(n=d.Ny(a)),n},d.AQ=function(l){return d.Hw[l]!==void 0?d.Hw[l]:-1},d.xQ=function(l){d.zp===!1&&d.zt();var n=d.iF(l);if(n==1e38){var a=d.Ax(l);if(a!=l&&(n=d.iF(a)),n==1e38)return 1e-10}return n},d.US=function(l){if(d.Ks[l]!==void 0)return!0;var n=d.Ax(l);return n!=l&&d.Ks[n]!==void 0},d.WS=function(l){if(d.zo[l]!==void 0)return!0;var n=d.Ax(l);return n!=l&&d.zo[n]!==void 0},d.iF=function(l){return d.zp===!1&&d.zt(),d.Ks[l]!==void 0?d.Ks[l]:d.zo[l]!==void 0?d.zo[l]:1e38},d.AK=function(l){return d.zp===!1&&d.zt(),d.RA[l]!==void 0?d.RA[l]:l},d.Ax=function(l){return d.zp===!1&&d.zt(),d.SA[l]!==void 0?d.SA[l]:l},d.zt=function(){for(var l,n=P,a=0;a<n.pcsid.length;a+=2)d.zo[n.pcsid[a]]=n.pcstol[2*n.pcsid[a+1]+1];for(a=0;a<n.pcsidc.length;a+=1)for(var h=(l=n.pcsidc[a])[0];h<=l[1];h++)d.zo[h]=n.pcstol[2*l[2]+1];for(a=0;a<n.gcsid.length;a+=2)d.Ks[n.gcsid[a]]=n.gcstol[2*n.gcsid[a+1]+1];for(a=0;a<n.gcsidc.length;a+=1)for(h=(l=n.gcsidc[a])[0];h<=l[1];h++)d.zo[h]=n.gcstol[2*l[2]+1];for(a=0;a<x.c.length;a+=1)for(h=(l=x.c[a])[0];h<=l[1];h++)d.Hw[h]=l[2];for(a=0;a<x.nc.length;a+=2)d.Hw[x.nc[a]]=x.nc[a+1];for(x=null,a=0;a<n.newtoold.length;a+=2)d.RA[n.newtoold[a+1]]=n.newtoold[a],d.SA[n.newtoold[a]]=n.newtoold[a+1];P=null,d.zp=!0},d.zp=!1,d.Ks=[],d.zo=[],d.RA=[],d.SA=[],d.Hw=[],d}()}(Q||(Q={})),function(p){function P(d){return d.length===0?'""':d[0]=='"'||d[0]=="."||"0"<=d[0]&&"9">=d[0]?d:'"'+d.trim()+'"'}var x=[];p.SC=function(){function d(){}return d.zQ=function(l){try{for(var n=0;n<x.length;n++)if(x[n].wkttext===l)return x[n].unit;for(var a,h=n="",f=!1,m=0;m<l.length;m++){var y=l[m];f===!0?y=='"'?l[m+1]=='"'?n+=y:f=f=!1:n+=y:/[\s]/.test(y)||(y==","?(h=n!==""?h+(P(n)+","):h+",",n=""):y==")"||y=="]"?(h=n!==""?h+(P(n)+"]}"):h+"]}",n=""):y=="("||y=="["?(h+='{ "entity": "'+n.toUpperCase().trim()+'", "values":[',n=""):y=='"'?(f=!0,n=""):n+=y)}a=JSON.parse(h);var w=d.hF(a);if(w===null)return null;for(a=null,y=0;y<w.values.length;y++)if(typeof w.values[y]=="object"&&w.values[y].entity==="UNIT"){a=w.values[y];break}if(a===null)return null;var I=p.Uc.UO(w.entity==="GEOGCS"?1:0,a.values[1],a.values[2]);return x.push({wkttext:l,unit:I}),10<x.length&&x.shift(),I}catch{return null}},d.hF=function(l){if(l===null)return null;if(l.entity==="GEOGCS"||l.entity==="PROJCS")return l;for(var n=[],a=0;a<l.values.length;a++)if(typeof l.values[a]=="object"&&l.values[a].entity!==void 0){if(l.values[a].entity==="GEOGCS"||l.values[a].entity=="PROJCS")return l.values[a];n.push(l.values[a])}for(l=0;l<n.length;l++)if((a=d.hF(n[l]))!==null)return a;return null},d.yQ=function(l){var n=-1;if(l!=null&&0<l.length){var a=l.indexOf("PROJCS");if(0<=a){var h=0;if(0<=(a=l.lastIndexOf("UNIT"))&&0<(a=l.indexOf(",",a+4))){a++;var f=l.indexOf("]",a+1);if(0<f)try{h=parseFloat(l.substring(a,f))}catch{h=0}}0<h&&(n=.001/h)}else if(0<=(a=l.indexOf("GEOGCS"))){var m=0;if(h=0,0<(a=l.indexOf("SPHEROID",a+6))&&0<(a=l.indexOf(",",a+8))){if(a++,0<(f=l.indexOf(",",a+1)))try{m=parseFloat(l.substring(a,f))}catch{m=0}if(0<m&&0<=(a=l.indexOf("UNIT",f+1))&&0<(a=l.indexOf(",",a+4))&&(a++,0<(f=l.indexOf("]",a+1))))try{h=parseFloat(l.substring(a,f))}catch{h=0}}0<m&&0<h&&(n=.001/(m*h))}}return n},d}()}(Q||(Q={})),function(p){var P;(P=p.$K||(p.$K={}))[P.NONE=0]="NONE",P[P.LINEAR=1]="LINEAR",P[P.ANGULAR=2]="ANGULAR",function(d){d[d.enumFloat=0]="enumFloat",d[d.enumDouble=1]="enumDouble",d[d.enumInt32=2]="enumInt32",d[d.enumInt64=3]="enumInt64",d[d.enumInt8=4]="enumInt8",d[d.enumInt16=5]="enumInt16"}(p.LL||(p.LL={})),function(d){d[d.POSITION=0]="POSITION",d[d.Z=1]="Z",d[d.M=2]="M",d[d.ID=3]="ID",d[d.NORMAL=4]="NORMAL",d[d.TEXTURE1D=5]="TEXTURE1D",d[d.TEXTURE2D=6]="TEXTURE2D",d[d.TEXTURE3D=7]="TEXTURE3D",d[d.ID2=8]="ID2",d[d.MAXSEMANTICS=10]="MAXSEMANTICS"}(p.Kh||(p.Kh={}));var x=function(){function d(l,n){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.dg=null,this.yl=0,n!==void 0){for(this.Ba=n.Ba,this.Qq=n.Qq,this.dg=n.dg.slice(0),this.wh=n.wh.slice(0),this.yl=n.yl,this.Xs=[],l=n=0;l<this.Ba;l++)this.Xs[l]=n,n+=d.Wa(this.dg[l]);for(this.Qq=n,this.Be=[],l=0;l<this.Ba;l++){n=d.Wa(this.ld(l));for(var a=d.te(this.ld(l)),h=0;h<n;h++)this.Be[this.Xs[l]+h]=a}}else this.Qq=this.Ba=0}return d.prototype.ld=function(l){if(0>l||l>this.Ba)throw p.i.O();return this.dg[l]},d.prototype.Rf=function(l){return this.wh[l]},d.gz=function(l){return d.EM[l]},d.Vp=function(l){return d.NM[l]},d.Wa=function(l){return d.mM[l]},d.prototype.hasAttribute=function(l){return 0<=this.wh[l]},d.prototype.dG=function(){return this.hasAttribute(1)},d.te=function(l){return d.$C[l]},d.prototype.GR=function(l){return this.Xs[l]},d.yG=function(l,n){return d.$C[l]===n},d.prototype.Nb=function(l){return this===l},d.prototype.Cn=function(){for(var l=p.P.Vh(this.dg[0]),n=1;n<this.Ba;n++)l=p.P.Vh(this.dg[n],l);return l},d.prototype.bk=function(l){return this.Xs[l]},d.prototype.dc=function(){return this.yl},d.prototype.Fd=function(l){return this.dg[l]},d.$C=[0,0,NaN,0,0,0,0,0,0],d.EM=[1,1,1,0,2,1,1,1,0],d.NM=[1,1,1,2,0,0,0,0,2],d.mM=[2,1,1,1,3,1,2,3,2],d}();p.sa=x}(Q||(Q={})),function(p){function P(f,m,y){var w=m-(f=new h(f)).e,I=f.c;for(I.length>++m&&x(f,w,h.gu),I[0]?y?w=m:(I=f.c,w=f.e+w+1):++w;I.length<w;I.push(0));return w=f.e,y===1||y&&(m<=w||w<=l)?(0>f.Cd&&I[0]?"-":"")+(1<I.length?I[0]+"."+I.join("").slice(1):I[0])+(0>w?"e":"e+")+w:f.toString()}function x(f,m,y,w){var I=f.c,M=f.e+m+1;if(y===1?w=5<=I[M]:y===2?w=5<I[M]||I[M]==5&&(w||0>M||I[M+1]!==void 0||1&I[M-1]):y===3?w=w||I[M]!==void 0||0>M:(w=!1,y!==0&&d("!Big.RM!")),1>M||!I[0])w?(f.e=-m,f.c=[1]):f.c=[f.e=0];else{if(I.length=M--,w)for(;9<++I[M];)I[M]=0,M--||(++f.e,I.unshift(1));for(M=I.length;!I[--M];I.pop());}return f}function d(f){throw(f=Error(f)).name="BigError",f}var l=-7,n=21,a=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,h=function(){function f(m){if(m instanceof f)this.Cd=m.Cd,this.e=m.e,this.c=m.c.slice();else{var y,w,I;for(m===0&&0>1/m?m="-0":a.test(m+="")||d(NaN),this.Cd=m.charAt(0)=="-"?(m=m.slice(1),-1):1,-1<(y=m.indexOf("."))&&(m=m.replace(".","")),0<(w=m.search(/e/i))?(0>y&&(y=w),y+=+m.slice(w+1),m=m.substring(0,w)):0>y&&(y=m.length),w=0;m.charAt(w)=="0";w++);if(w==(I=m.length))this.c=[this.e=0];else{for(;m.charAt(--I)=="0";);for(this.e=y-w-1,this.c=[],y=0;w<=I;this.c[y++]=+m.charAt(w++));}}}return f.prototype.abs=function(){var m=new f(this);return m.Cd=1,m},f.prototype.cmp=function(m){var y=this.c,w=(m=new f(m)).c,I=this.Cd,M=m.Cd,T=this.e,$=m.e;if(!y[0]||!w[0])return y[0]?I:w[0]?-M:0;if(I!=M)return I;if(m=0>I,T!=$)return T>($^m)?1:-1;for(I=-1,M=(T=y.length)<($=w.length)?T:$;++I<M;)if(y[I]!=w[I])return y[I]>(w[I]^m)?1:-1;return T==$?0:T>($^m)?1:-1},f.prototype.lm=function(m){var y=this.c,w=(m=new f(m)).c,I=this.Cd==m.Cd?1:-1,M=f.tr;if((M!==~~M||0>M||1e6<M)&&d("!Big.DP!"),!y[0]||!w[0])return y[0]==w[0]&&d(NaN),w[0]||d(I/0),new f(0*I);var T,$,F=w.slice(),R=T=w.length,j=y.length,H=y.slice(0,T),W=H.length,V=m,Y=V.c=[],se=0,re=M+(V.e=this.e-m.e)+1;for(V.Cd=I,I=0>re?0:re,F.unshift(0);W++<T;H.push(0));do{for($=0;10>$;$++){if(T!=(W=H.length))var he=T>W?1:-1;else{var ue=-1;for(he=0;++ue<T;)if(w[ue]!=H[ue]){he=w[ue]>H[ue]?1:-1;break}}if(!(0>he))break;for(m=W==T?w:F;W;){if(H[--W]<m[W]){for(ue=W;ue&&!H[--ue];H[ue]=9);--H[ue],H[W]+=10}H[W]-=m[W]}for(;!H[0];H.shift());}Y[se++]=he?$:++$,H[0]&&he?H[W]=y[R]||0:H=[y[R]]}while((R++<j||H[0]!==void 0)&&I--);return Y[0]||se==1||(Y.shift(),V.e--),se>re&&x(V,M,f.gu,H[0]!==void 0),V},f.prototype.aS=function(){return 0<this.cmp(0)},f.prototype.iT=function(){return 0>this.cmp(0)},f.prototype.kt=function(m){var y,w=this.Cd,I=(m=new f(m)).Cd;if(w!=I)return m.Cd=-I,this.oI(m);var M=this.c.slice(),T=this.e,$=m.c,F=m.e;if(!M[0]||!$[0])return $[0]?(m.Cd=-I,m):new f(M[0]?this:0);if(w=T-F){for((y=0>w)?(w=-w,T=M):(F=T,T=$),T.reverse(),I=w;I--;T.push(0));T.reverse()}else for(T=((y=M.length<$.length)?M:$).length,w=I=0;I<T;I++)if(M[I]!=$[I]){y=M[I]<$[I];break}if(y&&(T=M,M=$,$=T,m.Cd=-m.Cd),0<(I=(T=$.length)-(y=M.length)))for(;I--;M[y++]=0);for(I=y;T>w;){if(M[--T]<$[T]){for(y=T;y&&!M[--y];M[y]=9);--M[y],M[T]+=10}M[T]-=$[T]}for(;M[--I]==0;M.pop());for(;M[0]==0;)M.shift(),--F;return M[0]||(m.Cd=1,M=[F=0]),m.c=M,m.e=F,m},f.prototype.oI=function(m){var y=this.Cd,w=(m=new f(m)).Cd;if(y!=w)return m.Cd=-w,this.kt(m);w=this.e;var I=this.c,M=m.e,T=m.c;if(!I[0]||!T[0])return T[0]?m:new f(I[0]?this:0*y);if(I=I.slice(),y=w-M){for(0<y?(M=w,w=T):(y=-y,w=I),w.reverse();y--;w.push(0));w.reverse()}for(0>I.length-T.length&&(w=T,T=I,I=w),y=T.length,w=0;y;)w=(I[--y]=I[y]+T[y]+w)/10|0,I[y]%=10;for(w&&(I.unshift(w),++M),y=I.length;I[--y]==0;I.pop());return m.c=I,m.e=M,m},f.prototype.pow=function(m){var y=this,w=new f(1),I=w,M=0>m;for((m!==~~m||-1e6>m||1e6<m)&&d("!pow!"),m=M?-m:m;1&m&&(I=I.nr(y)),m>>=1;)y=y.nr(y);return M?w.lm(I):I},f.prototype.round=function(m,y){var w=this;return m==null?m=0:(m!==~~m||0>m||1e6<m)&&d("!round!"),x(w=new f(w),m,y!=null?y:f.gu),w},f.prototype.sqrt=function(){var m=this.c,y=this.Cd,w=this.e,I=new f("0.5");if(!m[0])return new f(this);0>y&&d(NaN),(y=Math.sqrt(this.toString()))==0||y==1/0?((y=m.join("")).length+w&1||(y+="0"),(m=new f(Math.sqrt(y).toString())).e=((w+1)/2|0)-(0>w||1&w)):m=new f(y.toString()),y=m.e+(f.tr+=4);do w=m,m=I.nr(w.oI(this.lm(w)));while(w.c.slice(0,y).join("")!==m.c.slice(0,y).join(""));return x(m,f.tr-=4,f.gu),m},f.prototype.nr=function(m){var y=this.c,w=(m=new f(m)).c,I=y.length,M=w.length,T=this.e,$=m.e;if(m.Cd=this.Cd==m.Cd?1:-1,!y[0]||!w[0])return new f(0*m.Cd);if(m.e=T+$,I<M){var F=y;y=w,w=F,$=I,I=M,M=$}for(F=Array($=I+M);$--;F[$]=0);for(T=M;T--;){for(M=0,$=I+T;$>T;)M=F[$]+w[T]*y[$-T-1]+M,F[$--]=M%10,M=M/10|0;F[$]=(F[$]+M)%10}for(M&&++m.e,F[0]||F.shift(),T=F.length;!F[--T];F.pop());return m.c=F,m},f.prototype.toString=function(){var m=this.e,y=this.c.join(""),w=y.length;if(m<=l||m>=n)y=y.charAt(0)+(1<w?"."+y.slice(1):"")+(0>m?"e":"e+")+m;else if(0>m){for(;++m;y="0"+y);y="0."+y}else if(0<m)if(++m>w)for(m-=w;m--;y+="0");else m<w&&(y=y.slice(0,m)+"."+y.slice(m));else 1<w&&(y=y.charAt(0)+"."+y.slice(1));return 0>this.Cd&&this.c[0]?"-"+y:y},f.prototype.toExponential=function(m){return m==null?m=this.c.length-1:(m!==~~m||0>m||1e6<m)&&d("!toExp!"),P(this,m,1)},f.prototype.toFixed=function(m){var y=l,w=n;if(l=-(n=1/0),m==null)var I=this.toString();else m===~~m&&0<=m&&1e6>=m&&(I=P(this,this.e+m),0>this.Cd&&this.c[0]&&0>I.indexOf("-")&&(I="-"+I));return l=y,n=w,I||d("!toFix!"),I},f.prototype.toPrecision=function(m){return m==null?this.toString():((m!==~~m||1>m||1e6<m)&&d("!toPre!"),P(this,m-1,2))},f.tr=20,f.gu=1,f}();p.jp=h}(Q||(Q={})),function(p){var P=function(){function x(d){this.lf=d}return x.prototype.qr=function(d,l,n){var a=new p.h,h=new p.h,f=this.lf;n.Wd(d,l,function(m,y){return f.uc(2*m,a),f.uc(2*y,h),a.compare(h)})},x.prototype.bq=function(d){return this.lf.read(2*d+1)},x}();p.si=function(){function x(){}return x.cq=function(d){if(d.B())return!1;var l=d.K();return l==1736?d.He()!=0:l==1607?(l=[!1],x.nE(d,!0,l),l[0]):!(l!=197&&(!p.ba.zd(l)||d.wG()))},x.im=function(d){var l=d.K();if(l==1736)return l=new p.Ua(d.description),d.B()||d.ZC(l),l;if(l==1607)return x.nE(d,!1,null);if(l==197)return l=new p.Ua(d.description),d.B()||l.bd(d,!1),l;if(p.ba.zd(l)){if(l=new p.ee(d.description),!d.B()&&!d.wG()){var n=new p.Ta;d.Vo(n),l.add(n),d.Ro(n),l.add(n)}return l}if(p.ba.Tn(l))return null;throw p.i.O()},x.nE=function(d,l,n){n!=null&&(n[0]=!1);var a=null;if(l||(a=new p.ee(d.description)),!d.B()){var h=new p.ja(0);h.Jb(2*d.ea());for(var f=0,m=d.ea();f<m;f++)if(0<d.Ka(f)&&!d.Pn(f)){var y=d.Ca(f);h.add(y),y=d.Wc(f)-1,h.add(y)}if(0<h.size){m=new p.Zt,f=d.vb(0),m.sort(h,0,h.size,new P(f)),m=new p.h,f.uc(2*h.get(0),m),y=0;for(var w=1,I=new p.Ta,M=new p.h,T=1,$=h.size;T<$;T++)if(f.uc(2*h.get(T),M),M.rb(m))h.get(y)>h.get(T)?(h.set(y,2147483647),y=T):h.set(T,2147483647),w++;else{if((1&w)==0)h.set(y,2147483647);else if(l)return n!=null&&(n[0]=!0),null;m.N(M),y=T,w=1}if((1&w)==0)h.set(y,2147483647);else if(l)return n!=null&&(n[0]=!0),null;if(!l)for(h.Wd(0,h.size,function(F,R){return F-R}),T=0,$=h.size;T<$&&h.get(T)!=2147483647;T++)d.we(h.get(T),I),a.add(I)}}return l?null:a},x}()}(Q||(Q={})),function(p){var P=function(){function x(){this.zf=new p.ja(0),this.As=new p.ja(0),this.zH=1,this.Gs=NaN}return x.prototype.sort=function(d,l,n,a){if(32>n-l)a.qr(l,n,d);else{var h=!0;try{for(var f=1/0,m=-1/0,y=l;y<n;y++){var w=a.bq(d.get(y));w<f&&(f=w),w>m&&(m=w)}if(this.reset(n-l,f,m,n-l)){for(y=l;y<n;y++){var I=d.get(y);w=a.bq(I);var M=this.uF(w);this.zf.set(M,this.zf.get(M)+1),this.As.write(y-l,I)}var T=this.zf.get(0);this.zf.set(0,0),y=1;for(var $=this.zf.size;y<$;y++){var F=this.zf.get(y);this.zf.set(y,T),T+=F}for(y=l;y<n;y++){I=this.As.read(y-l),w=a.bq(I),M=this.uF(w);var R=this.zf.get(M);d.set(R+l,I),this.zf.set(M,R+1)}h=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(h)a.qr(l,n,d);else{for(y=n=0,$=this.zf.size;y<$;y++)h=n,(n=this.zf.get(y))>h&&a.qr(l+h,l+n,d);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},x.prototype.reset=function(d,l,n,a){return!(2>d||n==l)&&(d=Math.min(x.cL,d),this.zf.Jb(d),this.zf.resize(d),this.zf.Yj(0,0,this.zf.size),this.zH=l,this.As.resize(a),this.Gs=(n-l)/(d-1),!0)},x.prototype.uF=function(d){return p.P.truncate((d-this.zH)/this.Gs)},x.cL=65536,x}();p.Zt=P}(Q||(Q={})),function(p){var P,x;(x=P||(P={}))[x.enum_line=1]="enum_line",x[x.enum_arc=2]="enum_arc",x[x.enum_dummy=4]="enum_dummy",x[x.enum_concave_dip=8]="enum_concave_dip",x[x.enum_connection=3]="enum_connection";var d=function(){function f(){}return f.Su=function(m,y,w,I,M,T){var $=new f;return $.Km=new p.h,$.Xm=new p.h,$.cw=new p.h,$.Km.N(m),$.Xm.N(y),$.cw.N(w),$.Eo=I,$.sh=M,$.uh=T,$},f.construct=function(m,y,w,I){var M=new f;return M.Km=new p.h,M.Xm=new p.h,M.cw=new p.h,M.Km.N(m),M.Xm.N(y),M.cw.Sc(),M.Eo=4,M.sh=w,M.uh=I,M},f}(),l=function(){function f(m,y,w,I,M,T){this.$v=null,this.za=0,this.zA=m,this.XH=this.VH=0,this.La=y,this.Oj=w,this.xk=I,this.Fq=M,this.Vb=T}return f.prototype.next=function(){for(var m=new p.Ta;;){if(this.za==this.zA.I())return null;if(this.zA.we(this.za,m),this.za++,!m.B())break}var y=!1;if(this.$v==null&&(this.VH=m.Ng(),this.XH=m.kh(),this.$v=h.buffer(m,this.La,this.Oj,this.xk,this.Fq,this.Vb),y=!0),this.za<this.zA.I()){var w=new p.Ea;this.$v.copyTo(w)}else w=this.$v;if(!y){y=new p.Ed;var I=m.Ng()-this.VH;m=m.kh()-this.XH,y.ig(I,m),w.Pc(y)}return w},f.prototype.Ma=function(){return 0},f.prototype.re=function(){},f}(),n=function(){function f(m,y){this.Xa=m,this.za=0,this.qq=y}return f.prototype.next=function(){var m=this.Xa.Y;if(this.za<m.ea()){var y=this.za;if(this.za++,!m.Pn(y))for(var w=m.Oa(m.Wc(y)-1);this.za<m.ea();){var I=m.Oa(m.Ca(this.za));if(m.Pn(this.za)||I!=w)break;w=m.Oa(m.Wc(this.za)-1),this.za++}if(this.za-y==1)return this.Xa.fE(this.Xa.Y,y,this.qq);for((w=new p.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,y,!0),y+=1;y<this.za;y++)w.Fr(this.Xa.Y,y,0,m.tv(y),!1);return this.Xa.fE(w,0,this.qq)}return null},f.prototype.Ma=function(){return 0},f.prototype.re=function(){},f}(),a=function(){function f(m){this.Xa=m,this.za=0}return f.prototype.next=function(){var m=this.Xa.Y;if(this.za<m.ea()){var y=this.za;for(m.Kr(this.za),this.za++;this.za<m.ea()&&!(0<m.Kr(this.za));)this.za++;return y==0&&this.za==m.ea()?this.Xa.ly(m,0,m.ea()):this.Xa.ly(m,y,this.za)}return null},f.prototype.Ma=function(){return 0},f.prototype.re=function(){},f}(),h=function(){function f(m){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=m,this.sb=this.Mv=this.ET=this.La=this.oA=this.dt=this.ra=0,this.jA=this.xk=-1,this.qq=!0}return f.buffer=function(m,y,w,I,M,T){if(m==null||0>I)throw p.i.O();if(m.B())return new p.Ea(m.description);var $=new p.l;return m.yc($),0<y&&$.X(y,y),(T=new f(T)).Oj=w,T.Y=m,T.ra=p.ua.Xd(w,$,!0),T.dt=p.ua.Xd(null,$,!0),T.La=y,T.ET=m.K(),0>=M&&(M=96),T.sb=Math.abs(T.La),T.Mv=T.sb!=0?1/T.sb:0,isNaN(I)||I==0?I=1e-5*T.sb:I>.5*T.sb&&(I=.5*T.sb),12>M&&(M=12),(m=Math.abs(y)*(1-Math.cos(Math.PI/M)))>I?I=m:(m=Math.PI/Math.acos(1-I/Math.abs(y)))<M-1&&12>(M=p.P.truncate(m))&&(M=12,I=Math.abs(y)*(1-Math.cos(Math.PI/M))),T.xk=I,T.Fq=M,T.oA=Math.min(T.dt,.25*I),T.gE()},f.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var m=this.lE();m=p.P.truncate((m+3)/4);var y=.5*Math.PI/m;this.jA=y;for(var w=0;w<4*m;w++)this.Jd.push(null);var I=Math.cos(y);y=Math.sin(y);var M=p.h.construct(0,1);for(w=0;w<m;w++)this.Jd[w+0*m]=p.h.construct(M.y,-M.x),this.Jd[w+1*m]=p.h.construct(-M.x,-M.y),this.Jd[w+2*m]=p.h.construct(-M.y,M.x),this.Jd[w+3*m]=M,(M=p.h.construct(M.x,M.y)).Ct(I,y)},f.prototype.gE=function(){var m=this.Y.K();if(p.ba.zd(m))return(m=new p.Ua(this.Y.description)).pc(this.Y,!0),this.Y=m,this.gE();if(this.La<=this.ra){if(!p.ba.PS(m))return new p.Ea(this.Y.description);if(0>=this.La&&(m=new p.l,this.Y.A(m),m.S()<=2*-this.La||m.da()<=2*this.La))return new p.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.KN();case 550:return this.JN();case 1607:return this.MN();case 1736:return this.LN();case 197:return this.GN();default:throw p.i.Ra()}},f.prototype.MN=function(){if(this.zG(this.Y)){var m=new p.Ta;this.Y.we(0,m);var y=new p.l;return this.Y.A(y),m.Db(y.tf()),this.Iu(m)}return this.Y=this.RV(this.Y),m=new n(this,this.qq),p.Ih.local().W(m,this.Oj,this.Vb).next()},f.prototype.LN=function(){if(this.La==0)return this.Y;var m=p.$l.local();if(this.ev(),this.Y=m.W(this.Y,null,!1,this.Vb),0>this.La){var y=this.Y;return y=this.ly(y,0,y.ea()),m.W(y,this.Oj,!1,this.Vb)}return this.zG(this.Y)?(m=new p.Ta,this.Y.we(0,m),y=new p.l,this.Y.A(y),m.Db(y.tf()),this.Iu(m)):(m=new a(this),p.Ih.local().W(m,this.Oj,this.Vb).next())},f.prototype.ly=function(m,y,w){for(var I=new p.Ea(m.description);y<w;y++)if(!(1>m.Ka(y))){var M=m.Kr(y),T=new p.l;if(m.Tj(y,T),0<this.La){if(0<M)if(this.AG(m,y))M=new p.Ta,m.we(m.Ca(y),M),M.Db(T.tf()),this.Au(I,M);else{var $=M=new p.Ua(m.description);$=p.au.EG(this.Y,y)||this.Bn(this.Y,y,$,!0,1)==2?this.eE(m,y):this.An(M),I.add($,!1)}else if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||($=M=new p.Ua(m.description),this.Bn(this.Y,y,$,!0,1),M.B()))){var F=new p.l;for(F.L(T),F.X(this.sb,this.sb),$.vp(F),T=1,M=($=this.An(M)).ea();T<M;T++)I.addPath($,T,!0)}}else if(0<M){if(!(T.S()+this.ra<=2*this.sb||T.da()+this.ra<=2*this.sb||($=M=new p.Ua(m.description),this.Bn(this.Y,y,$,!0,-1),M.B())))for(F=new p.l,$.yc(F),F.X(this.sb,this.sb),$.vp(F),T=1,M=($=this.An(M)).ea();T<M;T++)I.addPath($,T,!0)}else for($=M=new p.Ua(m.description),this.Bn(this.Y,y,$,!0,-1),T=0,M=($=this.An(M)).ea();T<M;T++)I.addPath($,T,!0)}if(0<this.La)return 1<I.ea()?I=this.An(I):f.kx(I);if(m=new p.l,I.yc(m),I.B())return f.kx(I);for(m.X(this.sb,this.sb),I.vp(m),I=this.An(I),m=new p.Ea(I.description),T=1,M=I.ea();T<M;T++)m.addPath(I,T,!1);return f.kx(m)},f.prototype.KN=function(){return this.Iu(this.Y)},f.prototype.Iu=function(m){var y=new p.Ea(this.Y.description);return this.Au(y,m),this.oX(y)},f.prototype.JN=function(){var m=new l(this.Y,this.La,this.Oj,this.xk,this.Fq,this.Vb);return p.Ih.local().W(m,this.Oj,this.Vb).next()},f.prototype.GN=function(){var m=new p.Ea(this.Y.description);if(0>=this.La){if(this.La==0)m.bd(this.Y,!1);else{var y=new p.Hh;this.Y.dn(y),y.X(this.La,this.La),m.bd(y,!1)}return m}return m.bd(this.Y,!1),this.Y=m,this.eE(m,0)},f.prototype.eE=function(m,y){this.ev();var w=new p.Ea(m.description),I=new p.h,M=new p.h,T=new p.h,$=new p.h,F=new p.h,R=new p.h,j=new p.h,H=new p.h,W=m.Ka(y),V=m.Ca(y),Y=0;for(y=m.Ka(y);Y<y;Y++){if(m.D(V+Y,M),m.D(V+(Y+1)%W,$),m.D(V+(Y+2)%W,R),j.vc($,M),j.length()==0||(j.Jv(),j.normalize(),j.scale(this.sb),I.add(j,M),T.add(j,$),Y==0?w.Nt(I):w.Ei(I),w.Ei(T),H.vc(R,$),H.length()==0))throw p.i.Ra();H.Jv(),H.normalize(),H.scale(this.sb),F.add(H,$),this.BD(w,$,T,F,!1)}return f.kx(w)},f.prototype.fE=function(m,y,w){if(this.ev(),1>m.Ka(y))return null;if(this.AG(m,y)&&0<this.La){w=new p.Ta,m.we(m.Ca(y),w);var I=new p.l;return m.Tj(y,I),w.Db(I.tf()),this.Iu(w)}if(I=new p.Ua(m.description),m.Pn(y))this.Bn(m,y,I,w,1),this.Bn(m,y,I,w,-1);else{var M=new p.Ua(m.description);M.addPath(m,y,!1),M.Fr(m,y,0,m.tv(y),!1),this.Bn(M,0,I,w,1)}return this.An(I)},f.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw p.i.hu("user_canceled")},f.prototype.An=function(m){return p.Hg.Ok(m,this.dt,!0,!0,this.Vb)},f.prototype.lE=function(){if(this.xk==0)return this.Fq;var m=1-this.xk*Math.abs(this.Mv);return 4>(m=-1>m?4:2*Math.PI/Math.acos(m)+.5)?m=4:m>this.Fq&&(m=this.Fq),p.P.truncate(m)},f.prototype.BD=function(m,y,w,I,M){this.ev();var T=new p.h;T.vc(w,y),T.scale(this.Mv);var $=new p.h;$.vc(I,y),$.scale(this.Mv),0>(T=Math.atan2(T.y,T.x)/this.jA)&&(T=this.Jd.length+T),T=this.Jd.length-T,0>($=Math.atan2($.y,$.x)/this.jA)&&($=this.Jd.length+$),($=this.Jd.length-$)<T&&($+=this.Jd.length);var F=p.P.truncate($);$=p.P.truncate(Math.ceil(T)),(T=new p.h).N(this.Jd[$%this.Jd.length]),T.Dt(this.sb,y);var R=10*this.ra;for(T.sub(w),T.length()<R&&($+=1),T.N(this.Jd[F%this.Jd.length]),T.Dt(this.sb,y),T.sub(I),T.length()<R&&--F,w=F-$,w++,F=0,$%=this.Jd.length;F<w;F++,$=($+1)%this.Jd.length)T.N(this.Jd[$]),T.Dt(this.sb,y),m.Ei(T),this.Zq();M&&m.Ei(I)},f.prototype.Bn=function(m,y,w,I,M){var T=new p.hd,$=T.hN(m,y);if(T.Ip(this.oA,!1,!1),2>T.I($))return 0>M||(M=m,T=new p.Ta,M.we(M.Ca(y),T),this.Au(w,T)),1;var F=T.Oa(T.Ya(T.Ob($))),R=new p.Ed;if(R.ig(-F.x,-F.y),T.Pc(R),I&&(this.oQ(T,$,M),2>T.I($)))return 0>M||(M=m,T=new p.Ta,M.we(M.Ca(y),T),this.Au(w,T)),1;this.$d.length=0;var j=T.Ob($);y=T.Ya(j);var H=M==1?T.Na(y):T.V(y);m=M==1?T.V(y):T.Na(y);var W=!0;I=new p.h,$=new p.h;var V=new p.h,Y=new p.h,se=new p.h,re=new p.h,he=new p.h,ue=new p.h,we=new p.h,Te=new p.h,Ee=this.sb;j=T.Ka(j);for(var He=0;He<j;He++)T.D(m,$),W&&(T.D(y,I),T.D(H,V),ue.vc(I,V),ue.normalize(),Te.HG(ue),Te.scale(Ee),Y.add(Te,I)),he.vc($,I),he.normalize(),we.HG(he),we.scale(Ee),se.add(I,we),H=ue.yi(he),W=ue.Sh(he),0>H||0>W&&H==0?this.$d.push(d.Su(Y,se,I,2,this.$d.length+1,this.$d.length-1)):Y.rb(se)||(this.$d.push(d.construct(Y,I,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(d.construct(I,se,this.$d.length+1,this.$d.length-1,"dummy"))),re.add($,we),this.$d.push(d.Su(se,re,I,1,this.$d.length+1,this.$d.length-1)),Y.N(re),Te.N(we),V.N(I),I.N($),ue.N(he),H=y,y=m,W=!1,m=M==1?T.V(y):T.Na(y);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.TV(w),R.ig(F.x,F.y),w.TD(R,w.ea()-1),1},f.prototype.TV=function(m){for(var y=this.uO(),w=!0,I=y+1,M=y;I!=y;M=I){var T=this.$d[M];I=T.sh!=-1?T.sh:(M+1)%this.$d.length,T.Eo!=0&&(w&&m.Nt(T.Km),T.Eo==2?this.BD(m,T.cw,T.Km,T.Xm,!0):m.Ei(T.Xm),w=!1)}},f.prototype.uO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var m=0,y=0,w=this.$d.length;y<w;){var I=this.$d[y];if((3&I.Eo)!=0){m=y;break}y=I.sh}for(w=m+1,y=m;w!=m;y=w){w=(I=this.$d[y]).sh;for(var M=1,T=null;w!=y&&(3&(T=this.$d[w]).Eo)==0;)w=T.sh,M++;M!=1&&(I.Eo&T.Eo)==1&&(this.Ns==null&&(this.Ns=new p.zb,this.nw=new p.zb),this.Ns.Ec(I.Km),this.Ns.Rc(I.Xm),this.nw.Ec(T.Km),this.nw.Rc(T.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(I.Xm.N(this.Ms[0]),T.Km.N(this.Ms[0]),I.sh=w,T.uh=y))}return m},f.prototype.Hv=function(m,y,w){var I=new p.h;if(I.vc(w,m),w=I.length(),0<(w=this.sb*this.sb-w*w*.25)){w=Math.sqrt(w),I.normalize(),I.cr();var M=new p.h;if(M.vc(y,m),M.Sh(I)+w>=this.sb)return!0}return!1},f.prototype.oQ=function(m,y,w){for(var I=0;1>I;I++){var M=!1,T=m.Ob(y),$=m.Ka(T);if($==0)break;var F=$;if(3>$)break;!m.ec(T)&&(F=$-1),T=m.Ya(T),$=0<w?m.Na(T):m.V(T);for(var R=0<w?m.V(T):m.Na(T),j=$,H=!0,W=new p.h,V=new p.h,Y=new p.h,se=new p.h,re=new p.h,he=p.h.construct(0,0),ue=new p.h,we=new p.h,Te=new p.h,Ee=new p.h,He=this.sb,Pe=0,lt=0;lt<F&&(m.D(R,V),H&&(m.D(T,W),m.D($,Y),j=$),we.vc(W,Y),we.normalize(),ue.vc(V,W),ue.normalize(),j!=R);){var et=we.yi(ue),Ve=we.Sh(ue),Zt=!0;if(0>et||0>Ve&&et==0||!this.Hv(Y,W,V)||(he.N(V),Zt=!1,++Pe,M=!0),Zt){if(0<Pe)for(;(et=0<w?m.Na(j):m.V(j))!=T;){if(m.D(et,se),!this.Hv(se,Y,he)){et!=R&&this.Hv(se,Y,V)&&this.Hv(se,W,V)&&(Y.N(se),j=et,Zt=!1,++Pe);break}Y.N(se),j=et,Zt=!1,++Pe}if(!Zt)continue;if(0<Pe){for(j=0<w?m.Na($):m.V($),H=1;H<Pe;H++)Zt=0<w?m.Na(j):m.V(j),m.qd(j,!0),j=Zt;Te.vc(W,Y),Pe=He*He-(Pe=Te.length())*Pe*.25,He-(Pe=Math.sqrt(Pe))>.5*this.xk?(re.add(Y,W),re.scale(.5),Te.normalize(),Te.cr(),Ee.N(Te),Ee.scale(He-Pe),re.add(Ee),m.mf($,re)):m.qd($,!0),Pe=0}Y.N(W),j=T}W.N(V),$=T,T=R,R=0<w?m.V(T):m.Na(T),lt++,H=!1}if(0<Pe){for(j=0<w?m.Na($):m.V($),H=1;H<Pe;H++)Zt=0<w?m.Na(j):m.V(j),m.qd(j,!0),j=Zt;re.add(Y,W),re.scale(.5),Te.vc(W,Y),Pe=He*He-(Pe=Te.length())*Pe*.25,Pe=Math.sqrt(Pe),Te.normalize(),Te.cr(),Ee.N(Te),Ee.scale(He-Pe),re.add(Ee),m.mf($,re)}if(m.Ip(this.oA,!1,!1),!M)break}},f.prototype.AG=function(m,y){if(m.Ka(y)==1)return!0;var w=new p.l;return m.Tj(y,w),Math.max(w.S(),w.da())<.5*this.xk},f.prototype.zG=function(m){var y=new p.l;return m.A(y),Math.max(y.S(),y.da())<.5*this.xk},f.prototype.RV=function(m){for(var y=0,w=0,I=(m=p.zC.local().W(m,.25*this.xk,!1,this.Vb)).ea();w<I;w++)y=Math.max(m.Ka(w),y);return 32>y?(this.qq=!1,m):(this.qq=!0,p.Hg.Ok(m,this.dt,!1,!0,this.Vb))},f.prototype.Au=function(m,y){if(y=y.D(),this.Jd!=null&&this.Jd.length!==0){var w=new p.h;w.N(this.Jd[0]),w.Dt(this.sb,y),m.Nt(w);for(var I=1,M=this.Jd.length;I<M;I++)w.N(this.Jd[I]),w.Dt(this.sb,y),m.Ei(w)}else{I=this.lE(),w=p.P.truncate((I+3)/4),I=.5*Math.PI/w,M=Math.cos(I);for(var T=Math.sin(I),$=new p.h,F=3;0<=F;F--){switch($.na(0,this.sb),F){case 0:for(I=0;I<w;I++)m.Aj($.x+y.x,$.y+y.y),$.Ct(M,T);break;case 1:for(I=0;I<w;I++)m.Aj(-$.y+y.x,$.x+y.y),$.Ct(M,T);break;case 2:for(I=0;I<w;I++)m.Aj(-$.x+y.x,-$.y+y.y),$.Ct(M,T);break;default:for(m.rx($.y+y.x,-$.x+y.y),I=1;I<w;I++)$.Ct(M,T),m.Aj($.y+y.x,-$.x+y.y)}this.Zq()}}},f.kx=function(m){return m.Eh(1,0),m},f.prototype.oX=function(m){return m.Eh(2,this.ra),m.hm(),m},f}();p.CK=h}(Q||(Q={})),function(p){var P=function(){function x(d){this.Da=d,this.g=new p.hd,this.ed=new p.ja(0)}return x.prototype.Nh=function(d,l,n){switch(l){case 0:if(d.v<n&&d.C<=n)break;return d.v>=n?1:-1;case 1:if(d.G<n&&d.H<=n)break;return d.G>=n?1:-1;case 2:if(d.v>=n&&d.C>n)break;return d.C<=n?1:-1;case 3:if(!(d.G>=n&&d.H>n))return d.H<=n?1:-1}return 0},x.prototype.vy=function(d,l){return d.K()==1736?this.xy(d,l):this.yy(d)},x.prototype.xy=function(d,l){if(this.Da.S()==0||this.Da.da()==0)return d.Ja();var n=new p.l;d.yc(n),this.Y=this.g.Ib(d);var a=new p.l,h=new p.l,f=new p.h,m=new p.h,y=[0,0,0,0,0,0,0,0,0],w=[0,0,0,0,0,0,0,0,0];new p.jg;var I=new p.zb,M=new p.ja(0);M.Jb(Math.min(100,d.I()));for(var T=!1,$=0;!T&&4>$;$++){var F=!1,R=(1&$)!=0,j=0;switch($){case 0:j=this.Da.v,F=n.v<=j&&n.C>=j;break;case 1:j=this.Da.G,F=n.G<=j&&n.H>=j;break;case 2:j=this.Da.C,F=n.v<=j&&n.C>=j;break;case 3:j=this.Da.H,F=n.G<=j&&n.H>=j}if(F)for(T=!0,F=this.g.Ob(this.Y);F!=-1;){var H=-1,W=-1,V=this.g.Ya(F),Y=V;do{var se=this.g.cc(Y);se==null&&(se=I,this.g.D(Y,f),se.Ec(f),this.g.D(this.g.V(Y),m),se.Rc(m)),se.A(a);var re=this.Nh(a,$,j),he=0,ue=-1;if(re==-1){he=0<(se=se.fq(R,j,y,w))?this.g.Wl(Y,w,se):0,he+=1;var we=Y,Te=this.g.V(we);for(se=0;se<he;se++){if(this.g.D(we,f),this.g.D(Te,m),(ue=this.g.cc(we))==null&&((ue=I).Ec(f),ue.Rc(m)),ue.A(h),(ue=this.Nh(h,$,j))==-1){if(R)(ue=Math.abs(f.y-j))<(Ee=Math.abs(m.y-j))?(f.y=j,this.g.mf(we,f)):(m.y=j,this.g.mf(Te,m));else{ue=Math.abs(f.x-j);var Ee=Math.abs(m.x-j);ue<Ee?(f.x=j,this.g.mf(we,f)):(m.x=j,this.g.mf(Te,m))}(ue=this.g.cc(we))==null&&((ue=I).Ec(f),ue.Rc(m)),ue.A(h),ue=this.Nh(h,$,j)}Ee=H,H=ue,W==-1&&(W=H),Ee==0&&H==1||Ee==1&&H==0||Ee!=0||H!=0||M.add(we),H==1&&(T=!1),ue=we=Te,Te=this.g.V(Te)}}he==0&&(Ee=H,H=re,W==-1&&(W=H),Ee==0&&H==1||Ee==1&&H==0||Ee!=0||H!=0||M.add(Y),H==1&&(T=!1),ue=this.g.V(Y)),Y=ue}while(Y!=V);for(W==0&&H==0&&M.add(V),se=0,H=M.size;se<H;se++)W=M.get(se),this.g.qd(W,!1);M.clear(!1),F=3>this.g.Ka(F)?this.g.ar(F):this.g.Sb(F)}}return T?d.Ja():(this.AB(),0<l&&this.Hy(l),this.g.Ke(this.Y))},x.prototype.yy=function(d){var l=new p.l,n=new p.l,a=[0,0,0,0,0,0,0,0,0],h=[0,0,0,0,0,0,0,0,0],f=new p.jg,m=d,y=new p.l;d.yc(y);for(var w=0;4>w;w++){var I=!1,M=(1&w)!=0,T=0;switch(w){case 0:T=this.Da.v,I=y.v<=T&&y.C>=T;break;case 1:T=this.Da.G,I=y.G<=T&&y.H>=T;break;case 2:T=this.Da.C,I=y.v<=T&&y.C>=T;break;case 3:T=this.Da.H,I=y.G<=T&&y.H>=T}if(I){I=m,m=d.Ja(),(I=I.Ha()).aj();for(var $,F=new p.h;I.ab();)for(var R,j=!0;I.Ia();){var H=I.ia();H.A(l);var W=this.Nh(l,w,T);if(W==-1){if(0<(W=H.fq(M,T,a,h))){var V=0;$=H.bc();for(var Y=0;Y<=W;Y++)if(V!=(R=Y<W?h[Y]:1)){H.dh(V,R,f);var se=f.get();se.Ec($),Y<W&&(M?(F.x=a[Y],F.y=T):(F.x=T,F.y=a[Y]),se.Rc(F)),se.A(n);var re=this.Nh(n,w,T);if(re==-1){if($=se.bc(),V=se.xc(),M)(re=Math.abs($.y-T))<(he=Math.abs(V.y-T))?($.y=T,se.Ec($)):(V.y=T,se.Rc(V));else{re=Math.abs($.x-T);var he=Math.abs(V.x-T);re<he?($.x=T,se.Ec($)):(V.x=T,se.Rc(V))}se.A(n),re=this.Nh(n,w,T)}$=se.xc(),V=R,(R=re)==1?(m.pc(se,j),j=!1):j=!0}}}else(R=W)==1?(m.pc(H,j),j=!1):j=!0}}}return m},x.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var d=new p.h,l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l))for(var n=this.g.Ya(l),a=0,h=this.g.Ka(l);a<h;a++,n=this.g.V(n))this.g.D(n,d),(this.Da.v==d.x||this.Da.C==d.x||this.Da.G==d.y||this.Da.H==d.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},x.prototype.Hy=function(d){for(var l=new p.h,n=new p.h,a=p.P.mg(2048,0),h=this.g.Ob(this.Y);h!=-1;h=this.g.Sb(h)){var f=this.g.Ya(h),m=f;do{var y=this.g.V(m);this.g.D(m,l);var w=-1;if(l.x==this.Da.v?(this.g.D(y,n),n.x==this.Da.v&&(w=1)):l.x==this.Da.C&&(this.g.D(y,n),n.x==this.Da.C&&(w=1)),l.y==this.Da.G?(this.g.D(y,n),n.y==this.Da.G&&(w=0)):l.y==this.Da.H&&(this.g.D(y,n),n.y==this.Da.H&&(w=0)),w!=-1&&(w=p.h.ub(l,n),!(1>=(w=p.P.truncate(Math.min(Math.ceil(w/d),2048)))))){for(var I=1;I<w;I++)a[I-1]=1*I/w;this.g.Wl(m,a,w-1)}m=y}while(m!=f)}},x.prototype.Xl=function(d,l){var n=this.g.Hd(),a=new p.h,h=new p.ja(0);h.Jb(100);for(var f=this.g.Ob(this.Y);f!=-1;f=this.g.Sb(f))for(var m=this.g.Ya(f),y=0,w=this.g.Ka(f);y<w;y++){var I=this.g.V(m);this.g.D(m,a),(d?a.y==l:a.x==l)&&(this.g.D(I,a),(d?a.y==l:a.x==l)&&(this.g.Qa(m,n)!=1&&(h.add(m),this.g.Sa(m,n,1)),this.g.Qa(I,n)!=1&&(h.add(I),this.g.Sa(I,n,1)))),m=I}if(this.g.Ud(n),!(3>h.size)){var M=this;h.Wd(0,h.size,function(re,he){return M.Oh(re,he)}),n=new p.h,f=new p.h,m=new p.h,f.Sc();var T=-1;y=new p.ja(0),w=new p.ja(0),I=this.g.Hd();for(var $=this.g.Hd(),F=0,R=h.size;F<R;F++){var j=h.get(F);if(this.g.D(j,a),!a.rb(f)){if(T!=-1){for(var H=T;H<F;H++){T=h.get(H);var W=this.g.V(T);j=this.g.Na(T);var V=!1;0>this.Oh(T,W)&&(this.g.D(W,n),d?n.y==l:n.x==l)&&(y.add(T),V=!0,this.g.Sa(T,$,1)),0>this.Oh(T,j)&&(this.g.D(j,n),d?n.y==l:n.x==l)&&(V||y.add(T),this.g.Sa(T,I,1))}for(H=0,V=y.size;H<V;H++){if(T=y.get(H),j=this.g.Qa(T,I),W=this.g.Qa(T,$),j==1){j=this.g.Na(T),this.g.D(j,m);var Y=[0];if(Y[0]=0,!m.rb(a)){var se=p.h.ub(f,m);Y[0]=p.h.ub(m,a)/se,Y[0]==0?Y[0]=2220446049250313e-31:Y[0]==1&&(Y[0]=.9999999999999998),this.g.Wl(j,Y,1),j=this.g.Na(T),this.g.mf(j,a),w.add(j),this.g.Sa(j,I,1),this.g.Sa(j,$,-1)}}W==1&&(W=this.g.V(T),this.g.D(W,m),(Y=[0])[0]=0,m.rb(a)||(se=p.h.ub(f,m),Y[0]=p.h.ub(f,a)/se,Y[0]==0?Y[0]=2220446049250313e-31:Y[0]==1&&(Y[0]=.9999999999999998),this.g.Wl(T,Y,1),j=this.g.V(T),this.g.mf(j,a),w.add(j),this.g.Sa(j,I,-1),this.g.Sa(j,$,1)))}T=y,y=w,(w=T).clear(!1)}T=F,f.N(a)}}this.g.Ud(I),this.g.Ud($)}},x.prototype.Pl=function(d,l){var n=new p.h,a=new p.ja(0);a.Jb(100);for(var h=this.g.Hd(),f=0,m=this.ed.size;f<m;f++){var y=this.ed.get(f);if(y!=-1){var w=this.g.V(y);this.g.D(y,n),(d?n.y==l:n.x==l)&&(this.g.D(w,n),(d?n.y==l:n.x==l)&&(this.g.Qa(y,h)!=-2&&(a.add(y),this.g.Sa(y,h,-2)),this.g.Qa(w,h)!=-2&&(a.add(w),this.g.Sa(w,h,-2))))}}if(a.size!=0){var I=this;for(a.Wd(0,a.size,function(he,ue){return I.Oh(he,ue)}),f=0,m=a.size;f<m;f++){var M=a.get(f);this.g.Sa(M,h,f)}y=new p.h,(w=new p.h).Sc();var T=-1;for(f=0,m=a.size;f<m;f++)if((M=a.get(f))!=-1&&(this.g.D(M,n),!n.rb(w))){if(T!=-1)for(;;){M=!1;for(var $=1<f-T?f-1:f,F=T;F<$;F++){var R=a.get(F);if(R!=-1){var j=-1,H=this.g.V(R);0>this.Oh(R,H)&&(this.g.D(H,y),d?y.y==l:y.x==l)&&(j=H),H=-1;var W=this.g.Na(R);if(0>this.Oh(R,W)&&(this.g.D(W,y),d?y.y==l:y.x==l)&&(H=W),j!=-1&&H!=-1)this.Mh(R,a,h),this.g.qd(R,!1),this.Mh(j,a,h),this.g.qd(j,!1),M=!0;else if(j!=-1||H!=-1){for(W=F+1;W<f;W++){var V=a.get(W);if(V!=-1){var Y=this.g.V(V),se=-1;0>this.Oh(V,Y)&&(this.g.D(Y,y),d?y.y==l:y.x==l)&&(se=Y),Y=this.g.Na(V);var re=-1;if(0>this.Oh(V,Y)&&(this.g.D(Y,y),d?y.y==l:y.x==l)&&(re=Y),se!=-1&&re!=-1){this.Mh(V,a,h),this.g.qd(V,!1),this.Mh(se,a,h),this.g.qd(se,!1),M=!0;break}if(j!=-1&&re!=-1){this.At(a,R,j,V,re,h),M=!0;break}if(H!=-1&&se!=-1){this.At(a,V,se,R,H,h),M=!0;break}}}if(M)break}}}if(!M)break}T=f,w.N(n)}}this.g.Ud(h)},x.prototype.Mh=function(d,l,n){n=this.g.Qa(d,n),l.set(n,-1),n=this.g.Qa(d,this.li),this.ed.set(n,-1),(l=this.g.cd(d))!=-1&&this.g.Ya(l)==d&&(this.g.Kf(l,-1),this.g.Yg(l,-1))},x.prototype.At=function(d,l,n,a,h,f){this.g.Cc(l,a),this.g.Dc(a,l),this.g.Dc(n,h),this.g.Cc(h,n),this.Mh(a,d,f),this.g.oi(a,!1),this.Mh(h,d,f),this.g.oi(h,!0)},x.prototype.Oy=function(){for(var d=0,l=this.ed.size;d<l;d++){var n=this.ed.get(d);n!=-1&&this.g.cj(n,-1)}for(var a=0,h=0,f=this.g.Ob(this.Y);f!=-1;){var m=this.g.Ya(f);if(m==-1||f!=this.g.cd(m)){var y=f;f=this.g.Sb(f),this.g.Kf(y,-1),this.g.br(y)}else{n=m,y=0;do this.g.cj(n,f),y++,n=this.g.V(n);while(n!=m);2>=y?(n=this.g.Qa(m,this.li),this.ed.set(n,-1),m=this.g.qd(m,!1),y==2&&(n=this.g.Qa(m,this.li),this.ed.set(n,-1),this.g.qd(m,!1)),y=f,f=this.g.Sb(f),this.g.Kf(y,-1),this.g.br(y)):(this.g.fp(f,!1),this.g.Yg(f,this.g.Na(m)),this.g.Xj(f,y),h+=y,a++,f=this.g.Sb(f))}}for(d=0,l=this.ed.size;d<l;d++)if((n=this.ed.get(d))!=-1&&(f=this.g.cd(n))==-1){f=this.g.wf(this.Y,-1),y=0,m=n;do this.g.cj(n,f),y++,n=this.g.V(n);while(n!=m);2>=y?(n=this.g.Qa(m,this.li),this.ed.set(n,-1),m=this.g.qd(m,!1),y==2&&(0<=(n=this.g.Qa(m,this.li))&&this.ed.set(n,-1),this.g.qd(m,!1)),y=f,this.g.Kf(y,-1),this.g.br(y)):(this.g.mn(f,!0),this.g.Xj(f,y),this.g.Kf(f,m),this.g.Yg(f,this.g.Na(m)),this.g.fp(f,!1),h+=y,a++)}for(this.g.Tl(this.Y,a),this.g.Vj(this.Y,h),d=0,l=this.g.md;l!=-1;l=this.g.ve(l))d+=this.g.I(l);this.g.XB(d)},x.wy=function(d,l,n){return new x(l).vy(d,n)},x.clip=function(d,l,n,a){if(d.B())return d;if(l.B())return d.Ja();if((n=d.K())==33)return a=d.D(),l.contains(a)?d:d.Ja();if(n==197)return a=new p.l,d.A(a),a.Fa(l)?(l=new p.Hh,d.copyTo(l),l.Zo(a),l):d.Ja();var h=new p.l;if(d.yc(h),l.contains(h))return d;if(!l.isIntersecting(h))return d.Ja();if((h=d.Cb)!=null&&(h=h.Hk)!=null){if((h=h.To(l))==1){if(n!=1736)throw p.i.Ra();return(d=new p.Ea(d.description)).vp(l),d}if(h==0)return d.Ja()}switch(n){case 550:n=null,h=d.I();for(var f=d.vb(0),m=0,y=0;y<h;y++)a=new p.h,f.uc(2*y,a),l.contains(a)||(m==0&&(n=d.Ja()),m<y&&n.Gd(d,m,y),m=y+1);return 0<m&&n.Gd(d,m,h),m==0?d:n;case 1736:case 1607:return x.wy(d,l,a);default:throw p.i.Ra()}},x.prototype.Oh=function(d,l){var n=new p.h;return this.g.D(d,n),d=new p.h,this.g.D(l,d),n.compare(d)},x}();p.Vd=P}(Q||(Q={})),function(p){var P=function(){function x(d,l){this.Da=d,this.g=new p.hd,this.ed=new p.ja(0),this.od=l}return x.prototype.Nh=function(d,l,n){switch(l){case 0:if(d.v<n&&d.C<=n)break;return d.v>=n?1:-1;case 1:if(d.G<n&&d.H<=n)break;return d.G>=n?1:-1;case 2:if(d.v>=n&&d.C>n)break;return d.C<=n?1:-1;case 3:if(!(d.G>=n&&d.H>n))return d.H<=n?1:-1}return 0},x.prototype.vy=function(d,l){return d.K()==1736?this.xy(d,l):this.yy(d)},x.prototype.xy=function(d,l){if(this.Da.S()==0||this.Da.da()==0)return d.Ja();var n=new p.l;d.yc(n),this.Y=this.g.Ib(d);var a=new p.l,h=new p.l,f=new p.h,m=new p.h,y=[0,0,0,0,0,0,0,0,0],w=[0,0,0,0,0,0,0,0,0],I=new p.zb,M=new p.ja(0);M.Jb(256);for(var T=!1,$=0;!T&&4>$;$++){var F=!1,R=(1&$)!=0,j=0;switch($){case 0:j=this.Da.v,F=n.v<=j&&n.C>=j;break;case 1:j=this.Da.G,F=n.G<=j&&n.H>=j;break;case 2:j=this.Da.C,F=n.v<=j&&n.C>=j;break;case 3:j=this.Da.H,F=n.G<=j&&n.H>=j}if(F)for(T=!0,F=this.g.Ob(this.Y);F!=-1;){var H=!0,W=-1,V=-1,Y=this.g.Ya(F),se=Y;do{var re=this.g.cc(se);re==null&&(re=I,this.g.D(se,f),re.Ec(f),this.g.D(this.g.V(se),m),re.Rc(m)),re.A(a);var he=this.Nh(a,$,j),ue=0,we=-1;if(he==-1){ue=0<(re=re.fq(R,j,y,w))?this.g.HX(se,w,re):0,ue+=1;var Te=se,Ee=this.g.V(Te);for(re=0;re<ue;re++){if(this.g.D(Te,f),this.g.D(Ee,m),(we=this.g.cc(Te))==null&&((we=I).Ec(f),we.Rc(m)),we.A(h),(we=this.Nh(h,$,j))==-1){if(R)(we=Math.abs(f.y-j))<(He=Math.abs(m.y-j))?(f.y=j,this.g.mf(Te,f)):(m.y=j,this.g.mf(Ee,m));else{we=Math.abs(f.x-j);var He=Math.abs(m.x-j);we<He?(f.x=j,this.g.mf(Te,f)):(m.x=j,this.g.mf(Ee,m))}(we=this.g.cc(Te))==null&&((we=I).Ec(f),we.Rc(m)),we.A(h),we=this.Nh(h,$,j)}He=W,W=we,V==-1&&(V=W),He==0&&W==1||He==1&&W==0||He!=0||W!=0||M.add(Te),W==1&&(H=T=!1),we=Te=Ee,Ee=this.g.V(Ee)}}if(ue==0&&(He=W,W=he,V==-1&&(V=W),He==0&&W==1||He==1&&W==0||He!=0||W!=0||M.add(se),W==1&&(H=T=!1),we=this.g.V(se)),se=we,256<=M.size){for(re=1,he=M.size-1;re<he;re++)ue=M.get(re),this.g.qd(ue,!1);M.set(1,M.Gc()),M.Dh(2)}}while(se!=Y);if(!H)for(V==0&&W==0&&M.add(Y),re=0,he=M.size;re<he;re++)ue=M.get(re),this.g.qd(ue,!1);M.clear(!1),F=H||this.g.Ka(F)==0?this.g.ar(F):this.g.Sb(F)}}return T?d.Ja():(this.AB(),0<l&&this.Hy(l),this.g.Ke(this.Y))},x.prototype.yy=function(d){var l=new p.l,n=new p.l,a=[0,0,0,0,0,0,0,0,0],h=[0,0,0,0,0,0,0,0,0],f=new p.jg,m=d,y=new p.l;d.yc(y);for(var w=new p.h,I=new p.h,M=null,T=null,$=0;4>$;$++){var F=!1,R=(1&$)!=0,j=0;switch($){case 0:j=this.Da.v,F=y.v<=j&&y.C>=j;break;case 1:j=this.Da.G,F=y.G<=j&&y.H>=j;break;case 2:j=this.Da.C,F=y.v<=j&&y.C>=j;break;case 3:j=this.Da.H,F=y.G<=j&&y.H>=j}if(F)for(F=m,m=d.Ja(),(F=F.Ha()).aj();F.ab();)for(var H,W=!0;F.Ia();){var V=F.ia();V.A(l);var Y=this.Nh(l,$,j);if(Y==-1){if(0<(Y=V.fq(R,j,a,h))){var se=0;V.$p(w);for(var re=0;re<=Y;re++)if(se!=(H=re<Y?h[re]:1)){V.dh(se,H,f);var he=f.get();he.Ec(w),re<Y&&(R?(I.x=a[re],I.y=j):(I.x=j,I.y=a[re]),he.Rc(I)),he.A(n);var ue=this.Nh(n,$,j);ue==-1&&(M==null&&(M=new p.h),T==null&&(T=new p.h),he.$p(M),he.Vr(T),R?(se=Math.abs(M.y-j))<(ue=Math.abs(T.y-j))?(M.y=j,he.Ec(M)):(T.y=j,he.Rc(T)):(se=Math.abs(M.x-j))<(ue=Math.abs(T.x-j))?(M.x=j,he.Ec(M)):(T.x=j,he.Rc(T)),he.A(n),ue=this.Nh(n,$,j)),he.Vr(w),se=H,(H=ue)==1?(m.pc(he,W),W=!1):W=!0}}}else(H=Y)==1?(m.pc(V,W),W=!1):W=!0}}return m},x.prototype.AB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var d=new p.h,l=this.g.Ob(this.Y);l!=-1;l=this.g.Sb(l))for(var n=this.g.Ya(l),a=0,h=this.g.Ka(l);a<h;a++,n=this.g.V(n))this.g.D(n,d),(this.Da.v==d.x||this.Da.C==d.x||this.Da.G==d.y||this.Da.H==d.y)&&(this.g.Sa(n,this.li,this.ed.size),this.ed.add(n));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},x.prototype.Hy=function(d){for(var l=new p.h,n=new p.h,a=null,h=null,f=p.P.mg(2048,0),m=this.g.Ob(this.Y);m!=-1;m=this.g.Sb(m)){var y=this.g.Ya(m),w=y;do{var I=this.g.V(w);this.g.D(w,l);var M=-1;if(l.x==this.Da.v?(this.g.D(I,n),n.x==this.Da.v&&(M=1)):l.x==this.Da.C&&(this.g.D(I,n),n.x==this.Da.C&&(M=1)),l.y==this.Da.G?(this.g.D(I,n),n.y==this.Da.G&&(M=0)):l.y==this.Da.H&&(this.g.D(I,n),n.y==this.Da.H&&(M=0)),M!=-1){if(a==null&&(a=new p.h),h==null&&(h=new p.h),a.N(l),h.na(0,0),M==0){var T=l.x-this.Da.v;h.x=p.mc.sign(n.x-l.x),a.x=d*p.mc.En(Math.floor(Math.abs(T/d)),T)+this.Da.v,0>a.x&&(a.x+=d)}else T=l.y-this.Da.G,h.y=p.mc.sign(n.y-l.y),a.y=d*p.mc.En(Math.floor(Math.abs(T/d)),T)+this.Da.G,0>a.y&&(a.y+=d);T=M!=0?n.y-l.y:n.x-l.x;var $=Math.abs(T);if(65536<$/d)throw p.i.ga("internal error");if(0<$){$=p.P.truncate($/d)+2,f.length<$&&(f=p.P.mg($));for(var F=$=0;;F++){var R=new p.h;if(R.x=a.x+h.x*F*d,R.y=a.y+h.y*F*d,1<=(R=(M!=0?R.y-l.y:R.x-l.x)/T))break;0>=R||(f[$]=R,$++)}$!=0&&this.g.Wl(w,f,$)}}w=I}while(w!=y)}},x.prototype.Xl=function(d,l){for(var n=-1,a=new p.h,h=null,f=this.g.Ob(this.Y);f!=-1;f=this.g.Sb(f))for(var m=this.g.Ya(f),y=0,w=this.g.Ka(f);y<w;y++){var I=this.g.V(m);this.g.D(m,a),(d?a.y==l:a.x==l)&&(this.g.D(I,a),(d?a.y==l:a.x==l)&&(n==-1&&(n=this.g.Hd()),h==null&&(h=new p.ja(0)).Jb(100),this.g.Qa(m,n)!=1&&(h.add(m),this.g.Sa(m,n,1)),this.g.Qa(I,n)!=1&&(h.add(I),this.g.Sa(I,n,1)))),m=I}if(n!=-1&&this.g.Ud(n),!(h==null||3>h.size)){var M=this;h.Wd(0,h.size,function(re,he){return M.Oh(re,he)}),n=new p.h,f=new p.h,m=new p.h,f.Sc();var T=-1;y=new p.ja(0),w=new p.ja(0),I=null;for(var $=this.g.Hd(),F=this.g.Hd(),R=0,j=h.size;R<j;R++){var H=h.get(R);if(this.g.D(H,a),!a.rb(f)){if(T!=-1){for(var W=T;W<R;W++){T=h.get(W);var V=this.g.V(T);H=this.g.Na(T);var Y=!1;this.g.D(V,n),0>f.compare(n)&&(d?n.y==l:n.x==l)&&(y.add(T),Y=!0,this.g.Sa(T,F,1)),this.g.D(H,n),0>f.compare(n)&&(d?n.y==l:n.x==l)&&(Y||y.add(T),this.g.Sa(T,$,1))}for(W=0,Y=y.size;W<Y;W++){if(T=y.get(W),H=this.g.Qa(T,$),V=this.g.Qa(T,F),H==1&&(H=this.g.Na(T),this.g.D(H,m),!m.rb(a))){I==null&&(I=[]);var se=p.h.ub(f,m);I[0]=p.h.ub(m,a)/se,I[0]==0?I[0]=2220446049250313e-31:I[0]==1&&(I[0]=.9999999999999998),this.g.Wl(H,I,1),H=this.g.Na(T),this.g.mf(H,a),w.add(H),this.g.Sa(H,$,1),this.g.Sa(H,F,-1)}V==1&&(V=this.g.V(T),this.g.D(V,m),m.rb(a)||(I==null&&(I=[]),se=p.h.ub(f,m),I[0]=p.h.ub(f,a)/se,I[0]==0?I[0]=2220446049250313e-31:I[0]==1&&(I[0]=.9999999999999998),this.g.Wl(T,I,1),H=this.g.V(T),this.g.mf(H,a),w.add(H),this.g.Sa(H,$,-1),this.g.Sa(H,F,1)))}T=y,y=w,(w=T).clear(!1)}T=R,f.N(a)}}this.g.Ud($),this.g.Ud(F)}},x.prototype.Pl=function(d,l){for(var n=new p.h,a=null,h=-1,f=0,m=this.ed.size;f<m;f++){var y=this.ed.get(f);if(y!=-1){var w=this.g.V(y);this.g.D(y,n),(d?n.y==l:n.x==l)&&(this.g.D(w,n),(d?n.y==l:n.x==l)&&(h==-1&&(h=this.g.Hd()),a==null&&(a=new p.ja(0)).Jb(100),this.g.Qa(y,h)!=-2&&(a.add(y),this.g.Sa(y,h,-2)),this.g.Qa(w,h)!=-2&&(a.add(w),this.g.Sa(w,h,-2))))}}if(a==null)h!=-1&&this.g.Ud(h);else{var I=this;for(a.Wd(0,a.size,function(he,ue){return I.Oh(he,ue)}),f=0,m=a.size;f<m;f++){var M=a.get(f);this.g.Sa(M,h,f)}y=new p.h,(w=new p.h).Sc();var T=-1;for(f=0,m=a.size;f<m;f++)if((M=a.get(f))!=-1&&(this.g.D(M,n),!n.rb(w))){if(T!=-1)for(;;){M=!1;for(var $=1<f-T?f-1:f,F=T;F<$;F++){var R=a.get(F);if(R!=-1){var j=-1,H=this.g.V(R);this.g.D(H,y),0>w.compare(y)&&(d?y.y==l:y.x==l)&&(j=H),H=-1;var W=this.g.Na(R);if(this.g.D(W,y),0>w.compare(y)&&(d?y.y==l:y.x==l)&&(H=W),j!=-1&&H!=-1)this.Mh(R,a,h),this.g.qd(R,!1),this.Mh(j,a,h),this.g.qd(j,!1),M=!0;else if(j!=-1||H!=-1){for(W=F+1;W<f;W++){var V=a.get(W);if(V!=-1){var Y=this.g.V(V),se=-1;this.g.D(Y,y),0>w.compare(y)&&(d?y.y==l:y.x==l)&&(se=Y),Y=this.g.Na(V);var re=-1;if(this.g.D(Y,y),0>w.compare(y)&&(d?y.y==l:y.x==l)&&(re=Y),se!=-1&&re!=-1){this.Mh(V,a,h),this.g.qd(V,!1),this.Mh(se,a,h),this.g.qd(se,!1),M=!0;break}if(j!=-1&&re!=-1){this.At(a,R,j,V,re,h),M=!0;break}if(H!=-1&&se!=-1){this.At(a,V,se,R,H,h),M=!0;break}}}if(M)break}}}if(!M)break}T=f,w.N(n)}this.g.Ud(h)}},x.prototype.Mh=function(d,l,n){n=this.g.Qa(d,n),l.set(n,-1),n=this.g.Qa(d,this.li),this.ed.set(n,-1),(l=this.g.cd(d))!=-1&&this.g.Ya(l)==d&&(this.g.Kf(l,-1),this.g.Yg(l,-1))},x.prototype.At=function(d,l,n,a,h,f){this.g.Cc(l,a),this.g.Dc(a,l),this.g.Dc(n,h),this.g.Cc(h,n),this.Mh(a,d,f),this.g.oi(a,!1),this.Mh(h,d,f),this.g.oi(h,!0)},x.prototype.Oy=function(){for(var d=0,l=this.ed.size;d<l;d++){var n=this.ed.get(d);n!=-1&&this.g.cj(n,-1)}for(var a=0,h=0,f=this.g.Ob(this.Y);f!=-1;){var m=this.g.Ya(f);if(m==-1||f!=this.g.cd(m)){var y=f;f=this.g.Sb(f),this.g.Kf(y,-1),this.g.br(y)}else{n=m,y=0;do this.g.cj(n,f),y++,n=this.g.V(n);while(n!=m);this.g.fp(f,!1),this.g.Yg(f,this.g.Na(m)),this.g.Xj(f,y),h+=y,a++,f=this.g.Sb(f)}}for(d=0,l=this.ed.size;d<l;d++)if((n=this.ed.get(d))!=-1&&(f=this.g.cd(n))==-1){f=this.g.wf(this.Y,-1),y=0,m=n;do this.g.cj(n,f),y++,n=this.g.V(n);while(n!=m);2>=y?(n=this.g.Qa(m,this.li),this.ed.set(n,-1),m=this.g.qd(m,!1),y==2&&(0<=(n=this.g.Qa(m,this.li))&&this.ed.set(n,-1),this.g.qd(m,!1)),y=f,this.g.Kf(y,-1),this.g.br(y)):(this.g.mn(f,!0),this.g.Xj(f,y),this.g.Kf(f,m),this.g.Yg(f,this.g.Na(m)),this.g.fp(f,!1),h+=y,a++)}for(this.g.Tl(this.Y,a),this.g.Vj(this.Y,h),d=0,l=this.g.md;l!=-1;l=this.g.ve(l))d+=this.g.I(l);this.g.XB(d)},x.wy=function(d,l,n,a){return new x(l,a).vy(d,n)},x.clip=function(d,l,n,a,h){return x.Pu(d,l,null,n,a,h)},x.Pu=function(d,l,n,a,h,f){var m=d.K();if(m==33)return h=d.D(),l.contains(h)?d:d.Ja();if(m==197)return h=new p.l,d.A(h),h.Fa(l)?(l=new p.Hh,d.copyTo(l),l.Zo(h),l):d.Ja();if(d.B())return d;if(l.B())return d.Ja();var y=new p.l;if(d.yc(y),l.contains(y))return d;if(!l.isIntersecting(y))return d.Ja();if((n!=null||isNaN(a))&&p.ua.oy(n,l,!1),!p.ba.zj(m))throw p.i.O();if((n=d.Cb)!=null&&(n=n.Hk)!=null){if((n=n.To(l))==1){if(m!=1736)throw p.i.ga("internal error");return(d=new p.Ea(d.description)).vp(l),d}if(n==0)return d.Ja()}switch(m){case 550:for(f=null,m=d.I(),n=d.vb(0),a=0,h=new p.h,y=0;y<m;y++)n.uc(2*y,h),l.contains(h)||(a==0&&(f=d.Ja()),a<y&&f.Gd(d,a,y),a=y+1);return 0<a&&f.Gd(d,a,m),a==0?d:f;case 1736:case 1607:return x.wy(d,l,h,f);default:throw p.i.ga("internal error")}},x.prototype.Oh=function(d,l){var n=new p.h;return this.g.D(d,n),d=new p.h,this.g.D(l,d),n.compare(d)},x}();p.ti=P}(Q||(Q={})),function(p){var P=new p.h,x=function(){function l(n,a,h,f,m){this.Rm=new p.h,this.Fk=new p.h,this.Ri=new p.h,this.g=n,this.Cw=h,this.po=f,this.Rm=a,this.Al=m,this.Fk.Sc(),this.Ri.Sc()}return l.prototype.sE=function(n){this.g.D(n,this.Fk),n=p.P.truncate((this.Fk.x-this.Rm.x)*this.po+.5);var a=p.P.truncate((this.Fk.y-this.Rm.y)*this.po+.5);return d.eG(n,a)},l.prototype.ez=function(n){return this.g.Qa(n,this.Al)},l.prototype.Ky=function(n,a){return this.g.D(n,this.Fk),this.g.D(a,this.Ri),d.Ev(this.Fk.x,this.Fk.y,this.Ri.x,this.Ri.y,this.Cw)},l}();p.oY=function(){};var d=function(){function l(){this.Rm=new p.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.so=this.Al=-1}return l.dQ=function(n,a){var h=new l;return h.g=n,h.ra=a,h.Cw=a*a,h.bw=2*a,h.po=1/h.bw,h.wO()},l.Ev=function(n,a,h,f,m){return(n-=h)*n+(a-=f)*a<=m},l.eG=function(n,a){return p.P.Vh(a,p.P.Vh(n))},l.prototype.yO=function(n,a){this.g.Hc(n,P);for(var h=(P.y-this.Rm.y)*this.po,f=p.P.truncate((P.x-this.Rm.x)*this.po),m=p.P.truncate(h),y=h=0;1>=y;y+=1)for(var w=0;1>=w;w+=1){var I=l.eG(f+y,m+w),M=this.zl.lR(I);M!=-1&&(this.rq[h]=M,this.zs[h]=I,h++)}for(f=h-1;1<=f;f--)for(M=this.rq[f],m=f-1;0<=m;m--)if(M==this.rq[m]){this.zs[m]=-1,f!=--h&&(this.zs[f]=this.zs[h],this.rq[f]=this.rq[h]);break}for(m=0;m<h;m++)this.zO(n,this.zs[m],P,this.rq[m],a)},l.prototype.zO=function(n,a,h,f,m){for(var y=new p.h;f!=-1;f=this.zl.zR(f)){var w=this.zl.ka(f);n==w||a!=-1&&this.g.Qa(w,this.Al)!=a||(this.g.Hc(w,y),l.Ev(h.x,h.y,y.x,y.y,this.Cw)&&m.add(f))}},l.prototype.Zm=function(n,a,h){var f=this.g.Qa(n,this.so),m=this.g.Qa(a,this.so);return f==-1&&(f=this.Ad.Rh(),this.Ad.addElement(f,n),this.g.Sa(n,this.so,f)),m==-1?this.Ad.addElement(f,a):this.Ad.Cy(f,m),this.g.Sa(a,this.so,-2),a=this.TT(n,a),h&&(h=this.mw.sE(n),this.g.Sa(n,this.Al,h)),a},l.RT=function(n,a,h){n.Nb(a),h=n;var f=new p.h;l.ST(n.D(),a.D(),f),h.Db(f)},l.ST=function(n,a,h){var f=n.x;n.x!=a.x&&(f=(1*n.x+1*a.x)/2);var m=n.y;n.y!=a.y&&(m=(1*n.y+1*a.y)/2),h.na(f,m)},l.prototype.TT=function(n,a){var h=new p.h;this.g.D(n,h);var f=new p.h;this.g.D(a,f);var m=this.g.YF(n),y=m+(a=this.g.YF(a)),w=0,I=h.x;h.x!=f.x&&(I=(h.x*m+f.x*a)/y,w++);var M=h.y;return h.y!=f.y&&(M=(h.y*m+f.y*a)/y,w++),0<w&&this.g.Db(n,I,M),this.g.rX(n,y),w!=0},l.prototype.wO=function(){var n=this.g.gd,a=this.g.DF();for(this.Rm=a.hz(),a=Math.max(a.da(),a.S())/2147483646,this.bw<a&&(this.bw=a,this.po=1/this.bw),this.Ad=new p.cu,this.Ad.Bt(p.P.truncate(this.g.gd/3+1)),this.Ad.hn(p.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.so=this.g.Hd(),this.mw=new x(this.g,this.Rm,this.Cw,this.po,this.Al),this.zl=new p.ZK(p.P.truncate(4*n/3),this.mw),this.zl.vW(this.g.gd),n=!1,a=this.g.md;a!=-1;a=this.g.ve(a))for(var h=this.g.Ob(a);h!=-1;h=this.g.Sb(h))for(var f=this.g.Ya(h),m=0,y=this.g.Ka(h);m<y;m++){var w=this.mw.sE(f);this.g.Sa(f,this.Al,w),this.zl.addElement(f,w),f=this.g.V(f)}var I=new p.ja(0);for(I.Jb(10),a=this.g.md;a!=-1;a=this.g.ve(a))for(h=this.g.Ob(a);h!=-1;h=this.g.Sb(h))for(f=this.g.Ya(h),m=0,y=this.g.Ka(h);m<y;m++){if(this.g.Qa(f,this.so)!=-2)for(w=this.g.Qa(f,this.Al),this.zl.kd(f,w);this.yO(f,I),I.size!=0;){w=!1;for(var M=0,T=I.size;M<T;M++){var $=I.get(M),F=this.zl.ka($);this.zl.wd($),w=this.Zm(f,F,M+1==T)||w}if(n=n||w,I.clear(!1),!w)break}f=this.g.V(f)}return n&&this.qN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.so),n},l.prototype.qN=function(){for(var n=new p.h,a=this.Ad.ke;a!=-1;a=this.Ad.lz(a)){var h=this.Ad.sc(a);for(this.g.D(this.Ad.ka(h),n),h=this.Ad.lb(h);h!=-1;h=this.Ad.lb(h))this.g.mf(this.Ad.ka(h),n)}},l}();p.$t=d}(Q||(Q={})),function(p){var P=function(){function x(d){d===void 0&&(d=null),this.zg=null,this.Pb=!1,this.zg=d===null?[]:d}return x.prototype.copyTo=function(d){if(d.Pb)throw p.i.ga("CompositeGeographicTransformation is read-only");for(var l=0;l<this.zg.length;l++)d.zg.push(this.zg[l].Qf())},x.prototype.count=function(){return this.zg.length},x.prototype.add=function(d){if(this.Pb)throw p.i.ga("CompositeGeographicTransformation is read-only");this.zg.push(d.Qf())},x.prototype.clear=function(){if(this.Pb)throw p.i.ga("CompositeGeographicTransformation is read-only");this.zg.length=0},x.prototype.remove=function(d){if(this.Pb)throw p.i.ga("CompositeGeographicTransformation is read-only");this.zg.splice(d,1)},x.prototype.kg=function(){var d=new x;return this.copyTo(d),d},x.prototype.Qf=function(){return this.kg()},x.prototype.transform=function(d,l,n,a){if(d.length<l)throw p.i.ga("invalid Argument");var h=n;for(n=0;n<this.zg.length;n++){var f=this.zg[n];if(f.sm()!=null){var m=f.Wn,y=m?1:0,w=m?f.sm().getGeogcs2():f.sm().getGeogcs1();if(w=h/(w=w.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(w-1))for(h=0;h<l;h++)d[h][0]*=w,d[h][1]*=w;p.HC.geogToGeog(f.sm(),l,d,null,y),h=(m?f.sm().getGeogcs1():f.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(w=h/a,3552713678800501e-30<Math.abs(w-1))for(h=0;h<l;h++)d[h][0]*=w,d[h][1]*=w;return l},x.prototype.Nb=function(d){if(d==this)return!0;if(!(d instanceof x)||this.zg.length!=d.zg.length)return!1;for(var l=0;l<this.zg.length;l++)if(!this.zg[l].Nb(d.zg[l]))return!1;return!0},x.prototype.ix=function(){this.Pb=!0},x.prototype.toString=function(){for(var d="CGT ("+this.count()+") ",l=0,n=this.count();l<n;++l)d+=this.zg[l].toString()+", ";return 200<d.length?d.substring(0,197)+"... ("+d.length.toString()+" characters)":d},x.create=function(){return new x},x}();p.rC=P}(Q||(Q={})),function(p){var P,x=Math.PI,d=2*Math.PI,l=Math.PI/2,n=function(){function f(){}return f.OO=function(m,y){var w=new f;return w.x=m,w.y=y,w.type=0,w.Wh=0,w},f.cl=function(m){var y=new f;return y.x=m.x,y.y=m.y,y.type=0,y.Wh=0,y},f.NO=function(m){var y=new f;return y.x=m.x,y.y=m.y,y.type=m.type,y.Wh=m.Wh,y},f.Qd=function(m,y,w){var I=new f;return I.x=m.x+y*Math.cos(w),I.y=m.y+y*Math.sin(w),I.type=m.type,I.Wh=m.Wh,I},f.Ru=function(m,y){var w=new f;return w.x=.5*(m.x+y.x),w.y=.5*(m.y+y.y),w.type=m.type,w.Wh=m.Wh,w},f.OE=function(m,y){var w=new f;return w.x=m.x+.001*(y.x-m.x),w.y=m.y+.001*(y.y-m.y),w.type=m.type,w.Wh=m.Wh,w},f}(),a=function(){};(P=p.aL||(p.aL={}))[P.Round=0]="Round",P[P.Bevel=1]="Bevel",P[P.Miter=2]="Miter",P[P.Square=3]="Square";var h=function(){function f(m){this.IA=this.Zb=this.xg=null,this.od=m}return f.W=function(m,y,w,I,M,T){if(m==null||1>m.Eb())throw p.i.O();return y==0||m.B()?m:((T=new f(T)).mo=m,T.La=y,T.ra=M,T.Mi=w,T.xA=I,T.Qx())},f.prototype.$L=function(){var m=this.mo,y=m.bc(),w=m.xc(),I=new p.h;return I.vc(w,y),I.normalize(),I.Jv(),I.scale(this.La),y.add(I),w.add(I),I=m.Ja(),m.Ec(y),m.Rc(w),I},f.prototype.ZL=function(){var m=this.mo;if(0<this.La&&this.Mi!=2){var y=new p.Ea;return y.bd(m,!1),this.mo=y,this.Qx()}return(m=new p.Hh(m.aa)).X(this.La,this.La),m},f.prototype.oJ=function(m,y,w,I){return(y.x-m.x)*(I.x-w.x)+(y.y-m.y)*(I.y-w.y)},f.prototype.hc=function(m,y){if(y===void 0)this.Zb.push(m),this.gf++;else if(this.gf==0)this.hc(m);else{var w=this.Dw,I=this.xg[y==0?w-1:y-1],M=this.xg[y],T=this.oJ(I,M,this.Zb[this.gf-1],m);0<T?this.hc(m):0>T&&(0<this.oJ(I,M,M,this.Zb[this.gf-1])?(M=this.xg[y==0?w-2:y==1?w-1:y-2],w=n.Qd(I,this.La,Math.atan2(I.y-M.y,I.x-M.x)-l),this.Zb[this.gf-1]=w,this.Mi==1||this.Mi==2?(w=n.Ru(w,I),this.hc(w),w=n.Qd(I,this.La,this.Lv+l),(I=n.Ru(w,I)).type|=256,this.hc(I)):(w=n.Qd(I,this.La,this.Lv+l)).type|=256,this.hc(w),this.hc(m,y)):(w=n.Qd(M,this.La,this.Lv+l),this.hc(w),this.Mi==1||this.Mi==2?(w=n.Ru(w,M),this.hc(w),w=n.Qd(M,this.La,this.Wz-l),(I=n.Ru(w,M)).type|=256,this.hc(I)):(w=n.Qd(M,this.La,this.Wz-l)).type|=256,this.hc(w)))}},f.prototype.hE=function(){var m,y=this.Dw;this.gf=0;var w=.5*this.ra,I=0,M=0;for(m=0;m<y;m++){var T=this.xg[m],$=m==0?this.xg[y-1]:this.xg[m-1],F=m==y-1?this.xg[0]:this.xg[m+1],R=$.x-T.x,j=$.y-T.y,H=F.x-T.x,W=F.y-T.y,V=Math.atan2(j,R),Y=Math.atan2(W,H);if(this.Lv=V,this.Wz=Y,m==0&&(I=V,M=Y),R=R*W-H*j,j=Y,Y<V&&(Y+=d),0<R*this.La)this.Mi==1||this.Mi==2?(V=n.Qd(T,this.La,V+l),this.hc(V),V=n.OE(T,V),this.hc(V),V=n.Qd(T,this.La,Y-l),(T=n.OE(T,V)).type|=256,this.hc(T),this.hc(V)):(R=.5*(Y-V),R=this.La/Math.abs(Math.sin(R)),V=n.Qd(T,R,.5*(V+Y)),this.hc(V,m));else if((512&T.type)!=0){for(R=1-w/Math.abs(this.La),$=1,F=0>this.La?-x:x,-1<R&&1>R&&(.017453292519943295>(j=2*Math.acos(R))&&(j=.017453292519943295),1<($=p.P.truncate(x/j+1.5))&&(F/=$)),j=V+l,V=n.Qd(T,this.La,j),m==0&&(V.type|=1024),this.hc(V,m),R=this.La/Math.cos(F/2),j+=F/2,(V=n.Qd(T,R,j)).type|=1024,this.hc(V);0<--$;)j+=F,(V=n.Qd(T,R,j)).type|=1024,this.hc(V);(V=n.Qd(T,this.La,Y-l)).type|=1024,this.hc(V)}else if(this.Mi==1)V=n.Qd(T,this.La,V+l),this.hc(V,m),V=n.Qd(T,this.La,Y-l),this.hc(V);else if(this.Mi==0)for(R=1-w/Math.abs(this.La),$=1,F=Y-l-(V+l),-1<R&&1>R&&(.017453292519943295>(j=2*Math.acos(R))&&(j=.017453292519943295),1<($=p.P.truncate(Math.abs(F)/j+1.5))&&(F/=$)),R=this.La/Math.cos(.5*F),j=V+l+.5*F,V=n.Qd(T,R,j),this.hc(V,m);0<--$;)j+=F,V=n.Qd(T,R,j),this.hc(V);else this.Mi==2?(R=$.x-T.x,j=$.y-T.y,.99999999<($=(R*(H=F.x-T.x)+j*(W=F.y-T.y))/Math.sqrt(R*R+j*j)/Math.sqrt(H*H+W*W))?(V=n.Qd(T,1.4142135623730951*this.La,Y-.25*x),this.hc(V,m),V=n.Qd(T,1.4142135623730951*this.La,Y+.25*x),this.hc(V)):($=Math.abs(this.La/Math.sin(.5*Math.acos($))))>(F=Math.abs(this.xA*this.La))?(R=.5*(Y-V),R=this.La/Math.abs(Math.sin(R)),V=n.Qd(T,R,.5*(V+Y)),Y=p.h.construct(V.x,V.y),V=p.h.construct(T.x,T.y),(T=new p.h).vc(Y,V),(Y=new p.h).BW(F/T.length(),T,V),V=($-F)*Math.abs(this.La)/Math.sqrt($*$-this.La*this.La),0<this.La?T.Jv():T.cr(),T.scale(V/T.length()),(V=new p.h).add(Y,T),($=new p.h).vc(Y,T),V=n.cl(V),this.hc(V,m),V=n.cl($),this.hc(V)):(R=.5*(Y-V),R=this.La/Math.abs(Math.sin(R)),V=n.Qd(T,R,.5*(V+Y)),this.hc(V,m))):(Y=j,0<this.La?(Y>V&&(Y-=d),$=V-Y<l):(Y<V&&(Y+=d),$=Y-V<l),$?(j=0>(R=1.4142135623730951*this.La)?V+.25*x:V+.75*x,V=n.Qd(T,R,j),this.hc(V,m),j=0>R?Y-.25*x:Y-.75*x,V=n.Qd(T,R,j),this.hc(V)):(R=.5*(Y-V),R=this.La/Math.abs(Math.sin(R)),Y<V&&(Y+=d),V=n.Qd(T,R,(V+Y)/2),this.hc(V,m)))}return this.Lv=I,this.Wz=M,this.hc(this.Zb[0],0),T=n.NO(this.Zb[this.gf-1]),this.Zb[0]=T,this.rW()},f.prototype.Cu=function(m,y){if(!(2>y))for(var w=0;w<y;w++){var I=this.Zb[m+w];w!=0?this.IA.Ei(p.h.construct(I.x,I.y)):this.IA.Nt(p.h.construct(I.x,I.y))}},f.prototype.aM=function(m,y,w){var I=m.Ca(y),M=m.Wc(y);if(this.Zb=[],this.IA=w,m.ec(y)){for(y=m.Oa(I);m.Oa(M-1).rb(y);)M--;if(2<=M-I){for(this.Dw=M-I,this.xg=[],y=I;y<M;y++)this.xg.push(n.cl(m.Oa(y)));this.hE()&&this.Cu(0,this.gf-1)}}else{for(y=m.Oa(I);I<M&&m.Oa(I+1).rb(y);)I++;for(y=m.Oa(M-1);I<M&&m.Oa(M-2).rb(y);)M--;if(2<=M-I){for(this.Dw=2*(M-I)-2,this.xg=[],(w=n.cl(m.Oa(I))).type|=1536,this.xg.push(w),y=I+1;y<M-1;y++)w=n.cl(m.Oa(y)),this.xg.push(w);for((w=n.cl(m.Oa(M-1))).type|=512,this.xg.push(w),y=M-2;y>=I+1;y--)(w=n.cl(m.Oa(y))).type|=1024,this.xg.push(w);if(this.hE())if(2<=this.Zb.length){for(m=-1,(M=(1024&this.Zb[this.gf-1].type)!=0)||(m=0),y=1;y<this.gf;y++)(I=(1024&this.Zb[y].type)!=0)?M||1<(M=y-1)-m+1&&this.Cu(m,M-m+1):M&&(m=y-1),M=I;M||1<(M=this.gf-1)-m+1&&this.Cu(m,M-m+1)}else m=0,M=this.gf-1,0<=m&&1<=M-m&&this.Cu(m,M-m+1)}}this.xg=null,this.Dw=0,this.Zb=null,this.gf=0},f.prototype.rW=function(){for(var m=!1,y=0;y<this.gf;y++){var w=this.Zb[y];w.sh=y+1,w.uh=y-1,this.Zb[y]=w}for((w=this.Zb[0]).uh=this.gf-2,this.Zb[0]=w,(w=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=w,y=w=0;y<this.gf;y++)if((256&this.Zb[w].type)!=0){var I=this.BP(w);if(I==-1){m=!0;break}w=I}else w=this.Zb[w].sh;return!m&&(this.LO(w),!0)},f.prototype.BP=function(m){for(var y,w,I=this.gf-1,M=m,T=1;T<=I-2;T++){y=M=this.Zb[M].sh,w=m;for(var $=1;$<=T;$++){if(w=this.Zb[w].uh,(256&this.Zb[w].type)==0&&(256&this.Zb[y].type)==0){var F=this.bS(w,y);if(F!=-1)return F}y=this.Zb[y].uh}}return-1},f.prototype.bS=function(m,y){var w=this.Zb[this.Zb[m].uh],I=this.Zb[m],M=this.Zb[this.Zb[y].uh],T=this.Zb[y];if(!this.EW(w,I,M,T))return-1;var $=new a;return this.sQ(w,I,M,T,$)&&!$.XD&&p.P.XJ((I.x-w.x)*(T.y-M.y)-(I.y-w.y)*(T.x-M.x))!=p.P.XJ(this.La)?(w=this.Zb[m].uh,$.cn.type=I.type,$.cn.sh=y,$.cn.uh=w,this.Zb[m]=$.cn,$.cn=this.Zb[y],$.cn.uh=m,this.Zb[y]=$.cn,y):-1},f.prototype.EW=function(m,y,w,I){return Math.max(m.x,y.x)>=Math.min(w.x,I.x)&&Math.max(w.x,I.x)>=Math.min(m.x,y.x)&&Math.max(m.y,y.y)>=Math.min(w.y,I.y)&&Math.max(w.y,I.y)>=Math.min(m.y,y.y)},f.prototype.sQ=function(m,y,w,I,M){M.XD=!1;var T=(y.y-m.y)*(I.x-w.x)-(y.x-m.x)*(I.y-w.y),$=(w.y-m.y)*(y.x-m.x)-(w.x-m.x)*(y.y-m.y);if(0<=(T=T==0?2:$/T)&&1>=T){var F=T;if(T=(I.y-w.y)*(y.x-m.x)-(I.x-w.x)*(y.y-m.y),$=(m.y-w.y)*(I.x-w.x)-(m.x-w.x)*(I.y-w.y),0<=(T=T==0?2:$/T)&&1>=T)return M.cn=n.OO(m.x+T*(y.x-m.x),m.y+T*(y.y-m.y)),M.cn.Wh=w.Wh+F*(I.Wh-w.Wh),F!=0&&F!=1||T!=0&&T!=1||(M.XD=!0),M.RY=T,M.SY=F,!((F==0||F==1)&&0<T&&1>T||(T==0||T==1)&&0<F&&1>F)}return!1},f.prototype.LO=function(m){for(;this.Zb[m].uh<m;)m=this.Zb[m].uh;var y=0,w=m;do w=this.Zb[w],this.Zb[y]=w,w=w.sh,y++;while(w!=m);this.Zb[y]=this.Zb[0],this.gf=y+1},f.prototype.VC=function(m){var y=this.mo,w=y.Ha();if(w!=null){w.aj();for(var I=-1;w.ab();)I++,this.aM(y,I,m)}},f.prototype.Qx=function(){var m=this.mo.K();return m==322?this.$L():m==197?this.ZL():p.ba.zd(m)?((m=new p.Ua).pc(this.mo,!0),this.mo=m,this.Qx()):m==1607?(m=new p.Ua,this.VC(m),m):m==1736?(m=new p.Ea,this.VC(m),m):null},f}();p.DK=h}(Q||(Q={})),function(p){var P=function(){function n(a){this.sk=a}return n.prototype.D=function(a,h){this.sk.g.D(a,h)},n.prototype.wd=function(a){var h=this.sk.Ga.ka(a);this.sk.Ga.wd(a,-1),this.sk.g.qd(h,!1)},n}(),x=function(){function n(a){this.sk=a}return n.prototype.D=function(a,h){this.sk.DT.D(a,h)},n.prototype.wd=function(a){this.sk.Ga.wd(a,-1)},n}(),d=function(){function n(a){this.sk=a}return n.prototype.D=function(a,h){h.N(this.sk.GT[a])},n.prototype.wd=function(a){this.sk.Ga.wd(a,-1)},n}(),l=function(){function n(a){a===void 0?(this.Ga=new p.$j,this.Ga.Ee(20),this.g=new p.hd,this.sT=this.g.Kg(550),this.Us=this.g.wf(this.sT,-1),this.Zh=new P(this)):a instanceof Array?(this.Ga=new p.$j,this.Ga.Ee(20),this.GT=a,this.Zh=new d(this)):(this.Ga=new p.$j,this.Ga.Ee(20),this.DT=a,this.Zh=new x(this))}return n.prototype.Ib=function(a){var h=a.K();if(p.Fx.zj(h))this.eN(a);else if(p.Xk.zd(h))this.jN(a);else if(h==197)this.bN(a);else{if(h!=33)throw p.i.O("invalid shape type");this.iN(a)}},n.prototype.YQ=function(){var a=new p.Ta,h=this.Ga.sc(-1),f=new p.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(h),a),f.nf(a),h=this.Ga.lb(h);h!=-1;h=this.Ga.lb(h))this.g.Xi(this.Ga.ka(h),a),f.lineTo(a);return f},n.MO=function(a){var h=new n(a),f=a.I(),m=1,y=new p.h,w=new p.h,I=new p.h;for(a.D(0,y);a.D(m,w),w.Mz(y)&&m<f-1;)m++;for(h.Ga.addElement(0,-1),h.Ga.zn(m),f=m+1;f<a.I();f++)a.D(f,I),(m=h.kC(I))!=-1&&h.Ga.Uj(m,f);for(I=new p.Ta,m=h.Ga.sc(-1),f=new p.Ea(a.description),a.we(h.Ga.ka(m),I),f.nf(I),m=h.Ga.lb(m);m!=-1;m=h.Ga.lb(m))a.we(h.Ga.ka(m),I),f.lineTo(I);return f},n.construct=function(a,h,f){for(var m=new n(a),y=1,w=a[0];a[y].Mz(w)&&y<h-1;)y++;for(m.Ga.addElement(0,-1),m.Ga.zn(y),y+=1;y<h;y++)(w=m.kC(a[y]))!=-1&&m.Ga.Uj(w,y);for(a=0,h=m.Ga.sc(-1);h!=-1;h=m.Ga.lb(h))f[a++]=m.Ga.ka(h);return a},n.EG=function(a,h){var f=a.Ca(h),m=a.Wc(h);if(h=!a.ec(h)&&a.Pn(h),a=a.vb(0),m*=2,h&&(m-=2),6>m-(f*=2))return!0;h=new p.h;var y=new p.h,w=new p.h;a.uc(f,h),a.uc(f+2,y),a.uc(f+4,w);var I=n.Yu(y,w,h);if(I.rs()||!n.wm(I.value()))return!1;var M=p.h.construct(y.x,y.y),T=new p.h;for(f+=6;f<m;f+=2)if(T.N(y),y.N(w),a.uc(f,w),(I=n.Yu(y,w,h)).rs()||!n.wm(I.value())||(I=n.Yu(M,w,h)).rs()||!n.wm(I.value())||(I=n.Yu(y,w,T)).rs()||!n.wm(I.value()))return!1;return!0},n.prototype.eN=function(a){for(var h=new p.Ta,f=new p.h,m=0;m<a.I();m++){a.D(m,f);var y=this.Er(f);if(y!=-1){a.we(m,h);var w=this.g.hc(this.Us,h);this.Ga.Uj(y,w)}}},n.prototype.bN=function(a){for(var h=new p.Ta,f=new p.h,m=0;4>m;m++){a.hB(m,f);var y=this.Er(f);if(y!=-1){a.If(m,h);var w=this.g.hc(this.Us,h);this.Ga.Uj(y,w)}}},n.prototype.jN=function(a){var h=new p.Ta,f=a.bc();if((f=this.Er(f))!=-1){a.Vo(h);var m=this.g.hc(this.Us,h);this.Ga.Uj(f,m)}f=a.xc(),(f=this.Er(f))!=-1&&(a.Ro(h),a=this.g.hc(this.Us,h),this.Ga.Uj(f,a))},n.prototype.iN=function(a){var h=a.D();(h=this.Er(h))!=-1&&(a=this.g.hc(this.Us,a),this.Ga.Uj(h,a))},n.prototype.Er=function(a){var h=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var f=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return a.Mz(f)||(h=this.Ga.zn(-5)),h}return this.kC(a)},n.prototype.kC=function(a){var h=-1;do{var f=this.Ga.sc(-1),m=this.Ga.Gc(-1),y=this.Ga.ka(f),w=this.Ga.ka(m),I=new p.h,M=new p.h;if(this.Zh.D(y,I),this.Zh.D(w,M),y=p.h.Wq(M,a,I),n.wm(y))h=this.Ga.zn(-1),(I=this.iC(a,m,f))!=f&&this.jC(a,f,this.Ga.xe(I));else if(n.xG(y)){M=this.Ga.uv(-1);var T=this.Ga.sc(-1),$=this.Ga.Gc(-1);for(y=new p.h,w=new p.h;T!=this.Ga.xe($);){var F=this.Ga.ka(M);this.Zh.D(F,y),F=p.h.Wq(y,a,I),n.xG(F)?($=M,M=this.Ga.nl(M)):(T=M,M=this.Ga.Zp(M))}if(M=$,I=T,F=this.Ga.ka(M),T=this.Ga.ka(I),this.Zh.D(F,y),this.Zh.D(T,w),I!=f&&(y=p.h.Wq(w,a,y),!n.wm(y)))continue;h=this.Ga.Bu(I,M,-2,!1),this.jC(a,M,m),this.iC(a,I,f)}else this.tb==null&&(this.tb=new p.zb),this.tb.Ec(M),this.tb.Rc(I),0>(I=this.tb.ge(a,!0))?(I=this.Ga.xe(m),this.Ga.wd(m,-1),h=this.Ga.zn(-3),this.iC(a,I,f)):1<I&&(I=this.Ga.lb(f),this.Ga.wd(f,-1),h=this.Ga.Bu(-1,I,-3,!1),this.jC(a,I,m))}while(0);return h},n.prototype.jC=function(a,h,f){if(h!=f){var m=this.Ga.ka(h),y=this.Ga.lb(h),w=new p.h,I=new p.h;for(this.Zh.D(m,w);h!=f&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(y),I),m=p.h.Wq(I,a,w),!n.wm(m));)m=h,h=y,w.N(I),y=this.Ga.lb(h),this.Zh.wd(m)}},n.prototype.iC=function(a,h,f){if(h==f)return f;var m=this.Ga.ka(h),y=this.Ga.xe(h),w=new p.h,I=new p.h;for(this.Zh.D(m,w);h!=f&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(y),I),m=p.h.Wq(w,a,I),!n.wm(m));)m=h,h=y,w.N(I),y=this.Ga.xe(h),this.Zh.wd(m);return h},n.Yu=function(a,h,f){var m=new p.Xb;m.set(h.x),m.sub(a.x);var y=new p.Xb;y.set(f.y),y.sub(a.y);var w=new p.Xb;return w.set(h.y),w.sub(a.y),(h=new p.Xb).set(f.x),h.sub(a.x),m.Bg(y),w.Bg(h),m.sub(w),m},n.wm=function(a){return 0>a},n.xG=function(a){return 0<a},n}();p.au=l}(Q||(Q={})),function(p){var P=function(){function x(d){this.g=null,this.oH=!0,this.od=d}return x.uU=function(d,l,n){return d=p.ua.Gr(d),p.$t.Ev(l.Ng(),l.kh(),n.Ng(),n.kh(),p.mc.ox(d))},x.xO=function(d,l){var n=new p.Ta;return p.$t.RT(d,l,n),n},x.W=function(d,l,n,a){return(n=new x(n)).g=d,n.ra=l,n.oH=a,n.zM()},x.prototype.iM=function(d){return p.$t.dQ(this.g,d)},x.prototype.nM=function(d){return p.bu.W(this.g,d,this.od)},x.prototype.zM=function(){var d=this.ra,l=p.ua.Gr(d),n=1.00001*(d=p.ua.mN(d));d*=1.000001;for(var a=!1,h=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),f=0,m=this.g.eS();;f++){if(f>h)throw p.i.ga("Internal Error: max number of iterations exceeded");var y=this.iM(l);if(a=a||y,this.oH&&(y=this.g.Ip(l,!0,!1)!=0,a=a||y),y=!1,(f==0||m||p.bu.fI(!0,this.g,d,null,this.od))&&(y=this.nM(n),a=a||y),!y)break;p.op.Bp(this.od)}return a},x}();p.Vk=P}(Q||(Q={})),function(p){var P=function(){function d(l){this.ae=this.Nc=null,this.$s=0,this.Vb=l,this.Yz=!0}return d.prototype.wv=function(l,n){var a=this.g.cc(l);if(a==null){if(!this.g.fd(l,n))return null;a=n}return a},d.prototype.Zq=function(){var l;l===void 0&&(l=!1),this.$s++,(l||(4095&this.$s)==0)&&(this.$s=0,p.op.Bp(this.Vb))},d.prototype.iP=function(){var l=this.g.$q(!1),n=!1,a=new p.zb,h=new p.zb,f=new p.l;f.Pa();var m=new p.l;m.Pa();for(var y=new p.Ta,w=new p.OC,I=l.next();I!=-1;I=l.next()){p.op.Bp(this.Vb);var M=null,T=!1;if(!p.ba.Tn(this.g.jc(l.ek))){if((M=this.wv(I,a))==null)continue;if(M.A(f),f.X(this.ra,this.ra),M.Di(this.ra)){if(!M.Di(0))continue;T=!0,M=null}}var $=this.g.$q(l),F=$.next();for(F!=-1&&(F=$.next());F!=-1;F=$.next()){var R=null,j=!1;if(!p.ba.Tn(this.g.jc($.ek))){if((R=this.wv(F,h))==null)continue;if(R.A(m),R.Di(this.ra)){if(!R.Di(0))continue;j=!0,R=null}}var H=0,W=0;if(M!=null&&R!=null)f.CG(m)&&(w.Qo(M),w.Qo(R),w.Fa(this.ra,!1),0<(H=w.ql(0))+(W=w.ql(1))&&(this.g.lr(I,w,0,!0),this.g.lr(F,w,1,!0)),w.clear());else if(M!=null){var V=new p.h;if(this.g.D(F,V),f.contains(V)){if(w.Qo(M),this.g.Xi(F,y),w.Fz(this.ra,y,!1),0<(H=w.ql(0)))if(this.g.lr(I,w,0,!0),j){for(j=-1,V=this.g.V(F);V!=-1&&V!=F&&(j=V,(R=this.wv(V,h))!=null&&R.Di(0));V=this.g.V(V));for(V=F;V!=-1&&(this.g.Fh(V,w.Cf),V!=j);V=this.g.V(V));}else this.g.Fh(F,w.Cf);w.clear()}}else{if(R==null)continue;if(V=new p.h,this.g.D(I,V),m.X(this.ra,this.ra),m.contains(V)){if(w.Qo(R),this.g.Xi(I,y),w.Fz(this.ra,y,!1),0<(W=w.ql(0)))if(this.g.lr(F,w,0,!0),T){for(j=-1,V=this.g.V(I);V!=-1&&V!=I&&(j=V,(R=this.wv(V,h))!=null&&R.Di(0));V=this.g.V(V));for(V=I;V!=-1&&(this.g.Fh(V,w.Cf),V!=j);V=this.g.V(V));}else this.g.Fh(I,w.Cf);w.clear()}}if(H+W!=0){if(H!=0){if((M=this.g.cc(I))==null){if(!this.g.fd(I,a))continue;M=a,a.A(f)}else M.A(f);if(M.Di(this.ra))break}n=!0}}}return n},d.prototype.jP=function(){return this.LU()},d.prototype.LU=function(){return new p.MC().LX(this.g,this.ra)},d.prototype.gI=function(){var l=!1;this.Nc==null&&(this.Nc=new p.$j);var n=new p.ja(0);n.Jb(this.g.gd+1);for(var a=this.g.$q(),h=a.next();h!=-1;h=a.next())n.add(h);this.g.nx(n,n.size),n.add(-1),a=this.g.Hd(),h=this.g.Hd(),this.ae=new p.PC(this.g,this.ra,!this.Yz),this.Nc.Xo(this.ae);var f=new p.ja(0),m=new p.ja(0),y=0;new p.h;var w=this.g.ud;this.g.wb.oc();for(var I,M,T=this.g.wb.Aa[0].o,$=n.get(y++);$!=-1;){var F=I=T[2*(M=w.U($,0))],R=M=T[2*M+1];do{var j=w.U($,2),H=w.U($,1);if(j!=-1){var W=w.U(j,0),V=T[2*W];0>(R<(W=T[2*W+1])?-1:R>W?1:F<V?-1:F>V?1:0)&&(m.add($),m.add(j))}H!=-1&&(V=T[2*(W=w.U(H,0))],0>(R<(W=T[2*W+1])?-1:R>W?1:F<V?-1:F>V?1:0)&&(m.add(H),m.add(H))),(V=this.g.Qa($,a))!=-1&&(f.add(V),this.g.Sa($,a,-1)),(V=this.g.Qa($,h))!=-1&&(f.add(V),this.g.Sa($,h,-1)),($=n.get(y++))!==-1&&(F=T[2*(R=w.U($,0))],R=T[2*R+1])}while($!=-1&&F===I&&R===M);for(F=f.size==1&&m.size==2,V=R=-1,j=0,H=f.size;j<H;j++){W=f.get(j);var Y=this.Nc.xe(W);if(Y==-1||f.cG(Y)||(R=Y),(W=this.Nc.lb(W))==-1||f.cG(W)||(V=W),R!=-1&&V!=-1)break}for(this.ae.VJ(M,I),j=0,H=f.size;j<H;j++)W=f.get(j),this.Nc.wd(W,-1);if(f.clear(!1),!F&&R!=-1&&V!=-1&&this.lO(R,V)){l=!0,this.Pi=this.ae.tm();break}for(j=0,H=m.size;j<H;j+=2){if(M=m.get(j),I=m.get(j+1),F?(M=this.Nc.Bu(R,V,M,!0),F=!1):M=this.Nc.addElement(M,-1),this.ae.sg){this.Pi=this.ae.tm(),l=!0;break}this.g.Qa(I,a)==-1?this.g.Sa(I,a,M):this.g.Sa(I,h,M)}if(l)break;m.Dh(0)}return this.g.Ud(a),this.g.Ud(h),l},d.prototype.lO=function(l,n){return this.ae.compare(this.Nc,this.Nc.ka(l),n),l=this.ae.sg,this.ae.Mr(),l},d.tE=function(l){for(var n=l.md;n!=-1;n=l.ve(n))if(p.ba.Ic(l.jc(n)))return!0;return!1},d.aQ=function(l,n,a,h){return!!d.tE(l)&&((n=new d(h)).g=l,n.ra=a,15>l.gd?l=n.iP():n.jP())},d.W=function(l,n,a){return d.aQ(l,l.DF(),n,a)},d.fI=function(l,n,a,h,f){if(!d.tE(n))return!1;var m=new d(f);if(m.g=n,m.ra=a,m.Yz=l,m.gI())return h!=null&&h.Yt(m.Pi),!0;var y=new p.Ed;return y.VB(),n.Pc(y),(m=new d(f)).g=n,m.ra=a,m.Yz=l,l=m.gI(),y.VB(),n.Pc(y),!!l&&(h!=null&&h.Yt(m.Pi),!0)},d.Ol=function(l,n){return!(16>(l=l.I()))&&2*l+Math.log(l)*Math.LOG10E/Math.log(2)*n<1*l*n},d.gP=function(l,n,a,h){if(p.ba.Ic(n.K()))return new d(h).hP(l,n,a);throw p.i.ga("crack_A_with_B")},d.prototype.hP=function(l,n,a){var h=new p.l;l.yc(h);var f=new p.l;if(n.yc(f),f.X(a,a),!f.isIntersecting(h))return l;var m=l.Cb,y=null;m!=null&&(y=m.Gb),d.Ol(l,l.I())&&(y=p.ua.lj(l,f));var w=y!=null?y.getIterator():null,I=n.Ha();n=l.Ha();var M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(f=[];I.ab();)for(;I.Ia();){var T=I.ia();if(y!=null){for(w.Wo(T,a),m=w.next();m!=-1;m=w.next())if(this.Zq(),n.Wb(y.ka(m),-1),n.Ia()){var $=(m=n.ia()).Fa(T,null,M,null,a);for(m=0;m<$;++m){var F=M[m];if(F!=0&&F!=1){var R=n.xb(),j=new x;j.t=F,j.index=R,f.push(j)}}}}else{var H=new p.l;if(T.yc(H),H.X(a,a),h.isIntersecting(H)){for(n.aj();n.ab();)for(;n.Ia();)if(this.Zq(),m=n.ia(),F=new p.l,m.yc(F),F.isIntersecting(H))for($=m.Fa(T,null,M,null,a),m=0;m<$;++m)(F=M[m])!=0&&F!=1&&(R=n.xb(),(j=new x).t=F,j.index=R,f.push(j))}}}if(f.length==0)return l;for(f=f.sort(x.zy),l=l.Ja(),n.aj();n.ab()&&!n.Ia(););for(a=n.ia(),h=new p.jg,y=-1,m=0,w=f.length;m<w;){for(M=f[m].index,I=m+1;I<w&&f[I].index==M;)++I;for(;n.xb()<M;){if(this.Zq(),T=n.Ia(),F=n.gb,(H=T||!n.Qn()||n.Rn())&&l.pc(a,y!=F),y=F,!T)for(;n.ab()&&!n.Ia(););a=n.ia()}for(M=0;m<I;m++)(F=f[m].t)!=M&&(a.dh(M,F,h),M=F,F=n.gb,l.pc(h.get(),y!=F),y=F);if((H=(T=n.Ia())||!n.Qn()||n.Rn())&&(a.dh(M,1,h),l.pc(h.get(),!1)),T)a=n.ia();else{for(;n.ab()&&!n.Ia(););a=n.Ia()?n.ia():null}m=I}for(a!=null&&(F=n.gb,(H=(T=n.Ia())||!n.Qn()||n.Rn())&&l.pc(a,y!=F),y=F),T=n.Ia();;){if(!T){for(;n.ab()&&!(T=n.Ia()););if(!T)break}a=n.ia(),F=n.gb,(H=(T=n.Ia())||!n.Qn()||n.Rn())&&l.pc(a,y!=F),y=F}return l},d}();p.bu=P;var x=function(){function d(){}return d.zy=function(l,n){return l.index==n.index?l.t>n.t?1:l.t<n.t?-1:0:l.index>n.index?1:-1},d}()}(Q||(Q={})),function(p){var P;(P=p.FK||(p.FK={}))[P.Left=0]="Left",P[P.Right=1]="Right",P[P.Coincident=2]="Coincident",P[P.Undefined=3]="Undefined",P[P.Uncut=4]="Uncut";var x=function(n,a,h,f,m,y,w,I,M,T,$){this.Y=n,this.ct=a,this.Ps=h,this.ug=f,this.Nm=T,this.Cl=$};p.qY=x;var d=function(){function n(a,h){this.EH=a,this.Ji=h}return n.prototype.lM=function(a,h){var f=new p.h;this.Ji.D(a,f);var m=new p.h;return this.Ji.D(h,m),(f=f.compare(m))!=0?f:(a=this.Ji.Qa(a,this.EH))<(h=this.Ji.Qa(h,this.EH))?-1:a==h?0:1},n}(),l=function(n,a,h,f,m,y,w,I,M){this.ug=n,this.Ps=a,this.JA=h,this.PH=f,this.Gi=m,this.Cl=y,this.Nm=w,this.QH=I,this.JT=M};p.pY=l,p.GK=function(){function n(){}return n.EK=function(a,h,f,m,y,w){if(h.B())a=new x(h,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),y.push(a);else if(f.B())a=new x(h,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),y.push(a);else{var I=new p.hd;if(I.Ib(h),I.Ib(f),p.Vk.W(I,m,w,!0),I.gd==0)a=new x(h.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),y.push(a);else{for(h=0,f=I.Hd(),m=I.md;m!=-1;m=I.ve(m))for(w=I.Ob(m);w!=-1;w=I.Sb(w))for(var M=I.Ya(w),T=0,$=I.Ka(w);T<$;M=I.V(M),T++)I.Sa(M,f,h++);h=n.CM(f,I),n.YL(a,h,I,y)}}},n.CM=function(a,h){for(var f=h.gd,m=new p.ja(0),y=h.md;y!=-1;y=h.ve(y))for(var w=h.Ob(y);w!=-1;w=h.Sb(w))for(var I=h.Ya(w),M=0,T=h.Ka(w);M<T;I=h.V(I),M++)m.add(I);var $=new d(a,h);m.Wd(0,f,function(Te,Ee){return $.lM(Te,Ee)}),a=[];var F=[],R=h.Hd(),j=h.Hd();y=h.md,w=h.ve(y),T=new p.h;var H=new p.h,W=m.get(0),V=h.cd(W),Y=h.Sf(V);h.D(W,T);var se=1;for(I=0;se<f-1;){var re=!1;for(M=se;M<f;M++)if(M!=I){var he=m.get(M),ue=h.cd(he),we=h.Sf(ue);if(h.D(he,H),!T.rb(H))break;Y==y&&we==w&&(re=n.pM(R,j,h,a,F,V,W,ue,he))}if(re||I==se-1){if(re&&I==se-1&&se--,++I==f)break;W=m.get(I),V=h.cd(W),Y=h.Sf(V),h.D(W,T)}re||(se=I+1)}for(f=[],y=h.md;y!=-1;y=h.ve(y))for(w=h.Ob(y);w!=-1;w=h.Sb(w))for(m=h.Ya(w),M=0,T=h.Ka(w);M<T;m=h.V(m),M++){if(0<=(I=h.Qa(m,j)))for(;I<F.length&&F[I].ug==m;)f.push(F[I++]);if(0<=(I=h.Qa(m,R)))for(;I<a.length&&a[I].ug==m;)f.push(a[I++])}return h.Ud(R),h.Ud(j),f},n.pM=function(a,h,f,m,y,w,I,M,T){var $=f.tj(w),F=f.tj(M),R=f.Ya(w),j=f.Ya(M),H=f.Na(I),W=f.Na(T),V=!1,Y=!1,se=!1,re=!1;return I!=R&&(T!=j&&(V=n.qM(a,f,m,w,H,M,W)),T!=F&&(Y=n.rM(a,f,m,w,H,M,T))),I!=$&&(T!=j&&(se=n.sM(h,f,y,w,I,M,W,R)),T!=F&&(re=n.tM(h,f,y,w,I,M,T,R))),V&&Y&&se?(a=m.length-1,y[re?y.length-2:y.length-1].Gi==2&&(m[a-1]=m[a],--m.length)):V&&Y&&re&&y[y.length-1].Gi==2&&(y=m[m.length-1],--m.length,f.Qa(y.ug,a)==m.length&&f.Sa(y.ug,a,-1)),V||Y||se||re},n.qM=function(a,h,f,m,y,w,I){var M=new p.zb,T=new p.zb,$=[0,0],F=[0,0],R=h.cc(y);return R==null&&(h.fd(y,M),R=M),(M=h.cc(I))==null&&(h.fd(I,T),M=T),2>(R=R.Fa(M,null,$,F,0))&&(m=new l(y,m,$[0],NaN,R,I,w,F[0],NaN),f.push(m),0>(m=h.Qa(y,a))&&h.Sa(y,a,f.length-1)),!0},n.rM=function(a,h,f,m,y,w,I){var M=new p.zb,T=new p.zb,$=[0,0],F=[0,0],R=h.cc(y);return R==null&&(h.fd(y,M),R=M),(M=h.cc(I))==null&&(h.fd(I,T),M=T),2>(R=R.Fa(M,null,$,F,0))&&(m=new l(y,m,$[0],NaN,R,I,w,F[0],NaN),f.push(m),0>(m=h.Qa(y,a))&&h.Sa(y,a,f.length-1),!0)},n.sM=function(a,h,f,m,y,w,I,M){var T=new p.zb,$=new p.zb,F=[0,0],R=[0,0],j=h.cc(y);return j==null&&(h.fd(y,T),j=T),(T=h.cc(I))==null&&(h.fd(I,$),T=$),(j=j.Fa(T,null,F,R,0))==2?(m=new l(y,m,F[0],F[1],j,I,w,R[0],R[1]),f.push(m),0>(m=h.Qa(y,a))&&h.Sa(y,a,f.length-1),!0):($=!1,y==M&&(m=new l(y,m,F[0],NaN,j,I,w,R[0],NaN),f.push(m),0>(m=h.Qa(y,a))&&h.Sa(y,a,f.length-1),$=!0),$)},n.tM=function(a,h,f,m,y,w,I,M){var T=new p.zb,$=new p.zb,F=[0,0],R=[0,0],j=h.cc(y);return j==null&&(h.fd(y,T),j=T),(T=h.cc(I))==null&&(h.fd(I,$),T=$),(j=j.Fa(T,null,F,R,0))==2?(m=new l(y,m,F[0],F[1],j,I,w,R[0],R[1]),f.push(m),0>(m=h.Qa(y,a))&&h.Sa(y,a,f.length-1),!0):($=!1,y==M&&(m=new l(y,m,F[0],NaN,j,I,w,R[0],NaN),f.push(m),0>(m=h.Qa(y,a))&&h.Sa(y,a,f.length-1),$=!0),$)},n.YL=function(a,h,f,m){var y=[];y[0]=new p.h,y[1]=new p.h,y[2]=new p.h,y[3]=new p.h;var w=new p.h,I=new p.h,M=new p.h,T=new p.h,$=null;m!=null&&($=new p.jg).Qr();var F=0,R=null,j=new p.zb;new p.zb;for(var H=f.Ob(f.md);H!=-1;H=f.Sb(H)){for(var W=4,V=-1,Y=-1,se=-1,re=-1,he=NaN,ue=!0,we=!1,Te=!0,Ee=!0,He=!0,Pe=0,lt=H,et=0,Ve=f.Ya(H),Zt=f.Ka(H),Ji=0;Ji<Zt;Ve=f.V(Ve),Ji++){var ci=f.cc(Ve);if(ci==null){if(!f.fd(Ve,j))continue;ci=j}Y==-1&&(Y=Ve);for(var Pt=0;F<h.length&&Ve==h[F].ug;){V=h[F].Ps;var Ft=h[F].ug,vt=h[F].JA,bi=h[F].Nm,ft=h[F].Cl,an=h[F].QH;if(h[F].Gi==2){if(we||(lt=V,Y=Ft,et=vt,se=bi,re=ft,he=an,W=2,m!=null?R=new p.Ua:Pe=0,He=!1,Ee=!0),vt=h[F].PH,an=h[F].JT,m!=null?(ci.dh(Pt,h[F].PH,$),R.pc($.get(),Ee)):Pe++,Pt=vt,we=!0,Ee=ue=!1,F+1==h.length||h[F+1].Gi!=2||h[F+1].ug==Ft&&h[F+1].JA!=Pt){if(m!=null){var Mt=new x(R,2,V,Ft,vt,W,lt,Y,et,bi,ft);m.push(Mt)}else null.add(Pe);lt=V,Y=Ft,et=vt,se=bi,re=ft,he=an,W=2,we=ue=!1,Ee=He=!0}}else{var Gr=f.V(Ft);if(F<h.length-1&&h[F+1].ug==Gr&&h[F+1].Cl==ft&&h[F+1].Gi==2)vt!=Pt&&(He&&(m!=null?R=new p.Ua:Pe=0),ue=0<F&&h[F-1].Ps==V?W==1?0:W==0?1:3:3,m!=null?(ci.dh(Pt,vt,$),R.pc($.get(),Ee),Mt=new x(R,ue,V,Ft,vt,W,lt,Y,et,bi,ft),m.push(Mt)):(Pe++,null.add(Pe)),Pt=vt,lt=V,Y=Ft,et=vt,se=bi,re=ft,he=an,W=ue,ue=Te=!1,Ee=He=!0);else if(!n.xM(a,f,h,F,w,I)){n.uM(f,h,F,H,Ve,M,T);var zt=!1;if(Gr=!1,Mt=!0,!(w.rb(M)||I.rb(M)||w.rb(T)||I.rb(T))){y[0].N(w),y[1].N(I),y[2].N(M),y[3].N(T),y.sort(p.h.pu);var Vc=y[0],Gc=y[1],Uc=y[2],os=y[3];Vc.rb(w)?Gc.rb(I)?a?(Gr=zt=!0,Mt=!1):zt=!1:os.rb(I)?a?Mt=Gr=zt=!0:zt=!1:(zt=!0,Mt=Gc.rb(M)):Gc.rb(w)?Uc.rb(I)?a?(Gr=zt=!0,Mt=!1):zt=!1:Vc.rb(I)?a?Mt=Gr=zt=!0:zt=!1:(zt=!0,Mt=Uc.rb(M)):Uc.rb(w)?os.rb(I)?a?(Gr=zt=!0,Mt=!1):zt=!1:Gc.rb(I)?a?Mt=Gr=zt=!0:zt=!1:(zt=!0,Mt=os.rb(M)):Vc.rb(I)?a?(Gr=zt=!0,Mt=!1):zt=!1:Uc.rb(I)?a?Mt=Gr=zt=!0:zt=!1:(zt=!0,Mt=Vc.rb(M))}zt&&(zt=Ve==Ft,(vt!=Pt||zt&&Pt==0)&&(He&&(m!=null?R=new p.Ua:Pe=0),m!=null?(ci.dh(Pt,vt,$),R.pc($.get(),Ee)):Pe++),Mt?W!=1?((vt!=Pt||zt&&Pt==0)&&(m!=null?(Mt=new x(R,1,V,Ft,vt,W,lt,Y,et,bi,ft),m.push(Mt)):null.add(Pe)),Gr?(F>=h.length-2||h[F+2].Ps!=V)&&(W=0):W=1):((vt!=Pt||zt&&Pt==0)&&(m!=null?(Mt=new x(R,3,V,Ft,vt,W,lt,Y,et,bi,ft),m.push(Mt)):null.add(Pe)),W=1):W!=0?((vt!=Pt||zt&&Pt==0)&&(m!=null?(Mt=new x(R,0,V,Ft,vt,W,lt,Y,et,bi,ft),m.push(Mt)):null.add(Pe)),Gr?(F>=h.length-2||h[F+2].Ps!=V)&&(W=1):W=0):((vt!=Pt||zt&&Pt==0)&&(m!=null?(Mt=new x(R,3,V,Ft,vt,W,lt,Y,et,bi,ft),m.push(Mt)):null.add(Pe)),W=0),(vt!=Pt||zt&&Pt==0)&&(Pt=vt,lt=V,Y=Ft,et=vt,se=bi,re=ft,he=an,ue=Te=!1,Ee=He=!0))}}F++}Pt!=1&&(He&&(m!=null?R=new p.Ua:Pe=0),m!=null?(ci.dh(Pt,1,$),R.pc($.get(),Ee)):Pe++,Ee=He=!1,Te=!0)}Te&&(vt=1,Ft=f.tj(H),Ft=f.Na(Ft),ft=bi=-1,an=NaN,ue?m!=null?(Mt=new x(R,4,V,Ft,vt,W,lt,Y,et,bi,ft),m.push(Mt)):null.add(Pe):(ue=W==1?0:W==0?1:3,m!=null?(Mt=new x(R,ue,V,Ft,vt,W,lt,Y,et,bi,ft),m.push(Mt)):null.add(Pe)))}},n.xM=function(a,h,f,m,y,w){var I=f[m].QH;if(I==1)return n.vM(a,h,f,m,y,w);if(I==0)return n.wM(a,h,f,m,y,w);throw p.i.Ra()},n.vM=function(a,h,f,m,y,w){var I=new p.zb,M=f[m].ug,T=f[m].Nm,$=f[m].Cl,F=-1,R=-1,j=-1,H=-1;if(!a&&0<m){var W=f[m-1];F=W.ug,R=W.Nm,j=W.Cl,H=W.Gi}var V=-1,Y=-1,se=-1,re=-1;m<f.length-1&&(V=(W=f[m+1]).ug,Y=W.Nm,se=W.Cl,re=W.Gi);var he=h.V(M);return W=h.V($),a?m==f.length-1||V!=M||Y!=T||se!=W||re==2?((a=h.cc($))==null&&(h.fd($,I),a=I),w.N(a.lg()),y.nt(w),w.normalize(),y.normalize(),!1):((a=h.cc($))==null&&(h.fd($,I),a=I),y.N(a.lg()),(a=h.cc(W))==null&&(h.fd(W,I),a=I),w.N(a.lg()),y.Uq(),w.normalize(),y.normalize(),!1):0<m&&F==M&&R==T&&j==W&&H==2||m<f.length-1&&V==he&&Y==T&&se==W&&re==2?((a=h.cc($))==null&&(h.fd($,I),a=I),w.N(a.lg()),y.nt(w),w.normalize(),y.normalize(),!1):!(m<f.length-1&&V==M&&Y==T&&se==W)||((a=h.cc($))==null&&(h.fd($,I),a=I),y.N(a.lg()),(a=h.cc(W))==null&&(h.fd(W,I),a=I),w.N(a.lg()),y.Uq(),w.normalize(),y.normalize(),!1)},n.wM=function(a,h,f,m,y,w){var I=new p.zb,M=f[m].ug,T=f[m].Nm,$=f[m].Cl,F=-1,R=-1,j=-1,H=-1;if(!a&&m<f.length-1){var W=f[m+1];F=W.ug,R=W.Nm,j=W.Cl,H=W.Gi}var V=-1,Y=-1,se=-1;W=-1,0<m&&(V=(W=f[m-1]).ug,Y=W.Nm,se=W.Cl,W=W.Gi);var re=h.V(M),he=h.Na($);return a?m!=0&&V==M&&Y==T&&se==he&&W!=2||((a=h.cc($))==null&&(h.fd($,I),a=I),w.N(a.lg()),y.nt(w),w.normalize(),y.normalize(),!1):!(0<m&&V==M&&Y==T&&se==he&&W==2||m<f.length-1&&F==re&&R==T&&j==he&&H==2)||((a=h.cc($))==null&&(h.fd($,I),a=I),w.N(a.lg()),y.nt(w),w.normalize(),y.normalize(),!1)},n.uM=function(a,h,f,m,y,w,I){var M=new p.zb,T=a.cc(y);if(T==null&&(a.fd(y,M),T=M),h=(f=h[f]).ug,f=f.JA,y=a.V(h),f==1)w.N(T.lg()),y!=-1&&y!=a.tj(m)?((T=a.cc(y))==null&&(a.fd(y,M),T=M),I.N(T.lg()),(T=a.cc(h))==null&&a.fd(h,M)):I.N(w),w.Uq(),I.normalize(),w.normalize();else{if(f!=0)throw p.i.Ra();I.N(T.lg()),w.nt(I),I.normalize(),w.normalize()}},n}()}(Q||(Q={})),function(p){var P;(P=p.XL||(p.XL={}))[P.Linear=0]="Linear",P[P.Angular=1]="Angular",P[P.Area=2]="Area";var x=function(){function m(y,w,I){this.pd=w,this.ci=I,this.qA=y}return m.prototype.Nb=function(y){return y instanceof m&&this.ci===y.ci},m.WF=function(y){return y.pd!==0?null:y.qA===-1?new m(-1,2,y.ci*y.ci):m.ah(h[y.qA])},m.ah=function(y){return(y=a[y])===void 0?null:y},m.UO=function(y,w,I){var M=null;if(I!=null)try{I.values[0]==="EPSG"&&(M=m.ah(parseInt(I.values[1])))}catch{}return M===null&&(M=new m(-1,y,w)),M},m.prototype.Fc=function(){return this.qA},m.prototype.xF=function(y){if(y.pd!=this.pd)throw p.i.Hb();return this.ci/y.ci},m.Ph=function(y,w,I){return w.xF(I)*y},m.SE=function(y,w,I,M,T){for(I=I.xF(M),M=0;M<w;M++)T[M]=y[M]*I},m}();p.Uc=x;for(var d=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],l=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],n=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],a=[],h=[],f=0;f<d.length;f+=2)a[d[f]]=new x(d[f],2,d[f+1]);for(d=null,f=0;f<l.length;f+=2)a[l[f]]=new x(l[f],1,l[f+1]);for(l=null,f=0;f<n.length;f+=3)a[n[f]]=new x(n[f],0,n[f+1]),h[n[f]]=n[f+2];n=null}(Q||(Q={})),function(p){var P=function(){function x(){this.yb=this.pb=0}return x.prototype.set=function(d,l){l!==void 0?(this.pb=d,this.yb=l):typeof d=="number"?(this.pb=d,this.yb=0):(this.pb=d.pb,this.yb=d.yb)},x.prototype.value=function(){return this.pb},x.prototype.add=function(d){var l=this.pb+d.pb;d=this.yb+d.yb+2220446049250313e-31*Math.abs(l),this.pb=l,this.yb=d},x.prototype.fN=function(){var d=this.pb+1,l=this.yb+2220446049250313e-31*Math.abs(d);this.pb=d,this.yb=l},x.prototype.ZM=function(d,l){this.pb=d.pb+l.pb,this.yb=d.yb+l.yb+2220446049250313e-31*Math.abs(this.pb)},x.prototype.sub=function(d){if(typeof d=="number"){var l=this.pb-d;d=this.yb+2220446049250313e-31*Math.abs(l)}else l=this.pb-d.pb,d=this.yb+d.yb+2220446049250313e-31*Math.abs(l);this.pb=l,this.yb=d},x.prototype.Bg=function(d){var l=this.pb*d.pb;this.yb=this.yb*Math.abs(d.pb)+d.yb*Math.abs(this.pb)+this.yb*d.yb+2220446049250313e-31*Math.abs(l),this.pb=l},x.prototype.Po=function(d){var l=this.pb*d;this.yb=this.yb*Math.abs(d)+2220446049250313e-31*Math.abs(l),this.pb=l},x.prototype.Ml=function(d,l){var n=Math.abs(d.pb)*Math.abs(l.pb);this.yb=d.yb*Math.abs(l.pb)+l.yb*Math.abs(d.pb)+d.yb*l.yb+2220446049250313e-31*Math.abs(n),this.pb=n},x.prototype.lm=function(d){var l=Math.abs(d.pb),n=this.pb/d.pb,a=(this.yb+Math.abs(n)*d.yb)/l;d.yb>.01*l&&(a*=1+(1+(d=d.yb/l))*d),this.pb=n,this.yb=a+2220446049250313e-31*Math.abs(n)},x.prototype.sqrt=function(){if(0<=this.pb){var d=Math.sqrt(this.pb),l=this.pb>10*this.yb?.5*this.yb/d:this.pb>this.yb?d-Math.sqrt(this.pb-this.yb):Math.max(d,Math.sqrt(this.pb+this.yb)-d);l+=2220446049250313e-31*Math.abs(d)}else this.pb<-1*this.yb?l=d=NaN:(d=0,l=Math.sqrt(this.yb));this.pb=d,this.yb=l},x.prototype.sin=function(d){var l=Math.sin(d.pb),n=Math.cos(d.pb);this.pb=l,l=Math.abs(l),this.yb=(Math.abs(n)+.5*l*d.yb)*d.yb+2220446049250313e-31*l},x.prototype.cos=function(d){var l=Math.sin(d.pb),n=Math.cos(d.pb);this.pb=n,n=Math.abs(n),this.yb=(Math.abs(l)+.5*n*d.yb)*d.yb+2220446049250313e-31*n},x.prototype.rg=function(){return Math.abs(this.pb)<=this.yb},x.prototype.rs=function(){return this.rg()&&this.yb!=0},x}();p.Xb=P}(Q||(Q={}));var Ci=new Q.h,Ps=new Q.h,Fs=new Q.h,Ls=new Q.h,on=new Q.h;(function(p){var P,x;(x=P||(P={}))[x.closedPath=1]="closedPath",x[x.exteriorPath=2]="exteriorPath",x[x.ringAreaValid=4]="ringAreaValid";var d=function(){function l(n,a,h,f,m,y,w){a!==void 0?(this.ib=n,this.ek=a,this.dl=h,this.ki=f,this.za=y,this.cA=w,this.gw=m):(this.ib=n.ib,this.ek=n.ek,this.dl=n.dl,this.ki=n.ki,this.za=n.za,this.cA=n.cA,this.gw=n.gw),this.XG=!0}return l.prototype.next=function(){return this.XG?(this.XG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.VT()):-1},l.prototype.VT=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.ek!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.ek=this.ib.ve(this.ek),this.ek==-1)break;this.cA&&!p.ba.Ic(this.ib.jc(this.ek))||(this.dl=this.ib.Ob(this.ek))}return-1},l.vP=function(n,a,h,f,m,y,w){return new l(n,a,h,f,m,y,w)},l}();p.vY=d,P=function(){function l(){this.lo=this.Cm=this.yk=this.dd=this.Ek=this.xo=this.Qi=this.nd=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.md=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return l.prototype.Uh=function(n){return this.Te!=null?this.Te[n]:null},l.prototype.Zg=function(n,a){if(this.Te==null){if(a==null)return;this.Te=[];for(var h=0,f=this.wb.I();h<f;h++)this.Te.push(null)}this.Te[n]=a},l.prototype.ep=function(n,a){this.nd.T(n,1,a)},l.prototype.cp=function(n,a){this.nd.T(n,2,a)},l.prototype.QB=function(n,a){this.nd.T(n,6,a)},l.prototype.Up=function(n){return this.nd.U(n,6)},l.prototype.gx=function(n,a){this.nd.T(n,7,a)},l.prototype.sv=function(n){return this.nd.U(n,0)},l.prototype.JJ=function(n,a){this.dd.T(n,1,a)},l.prototype.NJ=function(n,a){this.dd.T(n,0,a)},l.prototype.EF=function(n){return this.dd.U(n,7)},l.prototype.ap=function(n,a){this.dd.T(n,3,a)},l.prototype.bp=function(n,a){this.dd.T(n,4,a)},l.prototype.pU=function(n){this.dd==null&&(this.dd=new p.ad(8));var a=this.dd.De();return this.dd.T(a,2,n),this.dd.T(a,5,0),this.dd.T(a,6,0),this.dd.T(a,7,a),a},l.prototype.JQ=function(n){this.dd.kd(n)},l.prototype.rU=function(n){this.nd==null&&(this.nd=new p.ad(8),this.ud=new p.ad(5),this.Qi=new p.ce(0),this.xo=new p.ce(0));var a=this.nd.De();return this.nd.T(a,0,a),this.nd.T(a,3,0),this.nd.T(a,6,0),this.gx(a,n),a>=this.Qi.size&&(n=16>a?16:p.P.truncate(3*a/2),this.Qi.resize(n),this.xo.resize(n)),this.Qi.set(a,0),this.xo.set(a,0),a},l.prototype.nF=function(n){this.nd.kd(n)},l.prototype.Qy=function(n){this.ud.kd(n),this.gd--},l.prototype.jI=function(n){this.nd==null&&(this.nd=new p.ad(8),this.ud=new p.ad(5),this.Qi=new p.ce(0),this.xo=new p.ce(0));var a=this.ud.De(),h=0<=n?n:a;if(this.ud.T(a,0,h),0>n){if(h>=this.wb.I()){if(n=16>h?16:p.P.truncate(3*h/2),this.wb.resize(n),this.Te!=null)for(var f=0;f<n;f++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(n),this.jt=this.wb.vb(0)}this.wb.Db(h,-1e38,-1e38),this.Te!=null&&(this.Te[h]=null),this.Ug!=null&&this.Ug.write(h,1)}return this.ud.T(a,4,2*h),this.gd++,a},l.prototype.yj=function(n,a,h){var f=a!=-1?this.Na(a):this.tj(n),m=f!=-1?this.V(f):-1,y=this.jI(h==null?this.gd:-1),w=this.Va(y);return h!=null&&this.wb.It(w,h),this.cj(y,n),this.Cc(y,m),this.Dc(y,f),m!=-1&&this.Dc(m,y),f!=-1&&this.Cc(f,y),h=this.ec(n),f=this.Ya(n),a==-1&&this.Yg(n,y),a==f&&this.Kf(n,y),h&&m==-1&&(this.Cc(y,y),this.Dc(y,y)),this.Xj(n,this.Ka(n)+1),n=this.Sf(n),this.Vj(n,this.I(n)+1),y},l.prototype.pm=function(){return this.lo==null&&(this.lo=new p.Ta(this.wb.description)),this.lo},l.prototype.$o=function(n,a){this.dd.T(n,2,-134217729&this.dd.U(n,2)||(a==1?134217728:0))},l.prototype.Kn=function(n){return(134217728&this.dd.U(n,2))!=0?1:0},l.prototype.cN=function(n){var a=this.Kg(n.K(),n.description);return n.K()==1736&&this.$o(a,n.Kn()),this.PD(a,n),a},l.prototype.dN=function(n){var a=this.Kg(n.K(),n.description);return this.QD(a,n),a},l.prototype.SV=function(n,a){this.nd==null&&(this.nd=new p.ad(8),this.ud=new p.ad(5),this.Qi=new p.ce(0),this.xo=new p.ce(0)),this.nd.Ee(this.nd.Jg+n),this.ud.Ee(this.ud.Jg+a),this.Qi.Jb(this.Qi.size+n),this.xo.Jb(this.xo.size+n)},l.prototype.PD=function(n,a){this.SV(a.ea(),a.I()),this.Kl.Gd(a,0,a.I()),this.jt=this.wb.vb(0);for(var h=this.Te!=null&&a.Se!=null,f=0,m=a.ea();f<m;f++)if(!(2>a.Ka(f))){var y=this.wf(n,-1);this.mn(y,a.ec(f));for(var w=a.Ca(f),I=a.Wc(f);w<I;w++){var M=this.yj(y,-1,null);if(h)if(M=this.Va(M),(1&a.UF(w))!=0)this.Zg(M,null);else{var T=new p.jg;a.cc(w,T,!0),this.Zg(M,T.get())}}}},l.prototype.QD=function(n,a){this.Kl.Gd(a,0,a.I()),this.jt=this.wb.vb(0),n=this.wf(n,-1);var h=0;for(a=a.I();h<a;h++)this.yj(n,-1,null)},l.prototype.JX=function(n,a,h){var f=this.V(n);if(f==-1)throw p.i.Ra();for(var m=this.pm(),y=this.cd(n),w=0,I=a.ql(h);w<I;w++){var M=this.Va(n),T=this.V(n),$=a.Xp(h,w);w==0&&($.Vo(m),this.Fh(n,m)),$.K()==322?this.Zg(M,null):this.Zg(M,p.ba.kg($)),$.Ro(m),w<I-1?n=this.yj(y,T,m):this.Fh(f,m)}},l.prototype.IX=function(n,a,h){var f=this.V(n);if(f==-1)throw p.i.Ra();for(var m=this.pm(),y=this.cd(n),w=0,I=a.ql(h);w<I;w++){var M=this.Va(n),T=this.V(n),$=a.Xp(h,I-w-1);w==0&&($.Ro(m),this.Fh(n,m)),$.K()==322?this.Zg(M,null):this.Zg(M,p.ba.kg($)),$.Vo(m),w<I-1?n=this.yj(y,T,m):this.Fh(f,m)}},l.prototype.DF=function(){var n=new p.l;n.Pa();for(var a=this.$q(),h=new p.h,f=!0,m=a.next();m!=-1;m=a.next())this.D(m,h),f?n.$b(h.x,h.y):n.Nk(h.x,h.y),f=!1;return n},l.prototype.Ib=function(n){var a=n.K();if(p.ba.Ic(a))return this.cN(n);if(a==550)return this.dN(n);throw p.i.Ra()},l.prototype.pN=function(n,a){var h=a.K();if(p.ba.Ic(h))this.PD(n,a);else{if(h!=550)throw p.i.Ra();this.QD(n,a)}},l.prototype.hN=function(n,a){var h=this.Kg(1736,n.description);if(2>n.Ka(a))return h;this.Kl.Gd(n,n.Ca(a),n.Wc(a)),this.jt=this.wb.vb(0);var f=this.wf(h,-1);this.mn(f,n.ec(a)||!0);var m=this.Te!=null&&n.Se!=null,y=n.Ca(a);for(a=n.Wc(a);y<a;y++){var w=this.yj(f,-1,null);if(m)if(w=this.Va(w),(1&n.UF(y))!=0)this.Zg(w,null);else{var I=new p.jg;n.cc(y,I,!0),this.Zg(w,I.get())}}return h},l.prototype.Ke=function(n){var a=this.jc(n),h=p.UK.Kg(a,this.Kl.description),f=this.I(n);if(f==0)return h;if(p.ba.Ic(a)){a=this.ea(n);for(var m=p.Zc.Qh(a+1),y=p.Zc.Or(a+1,0),w=h.description,I=0,M=w.Ba;I<M;I++){for(var T=w.ld(I),$=p.sa.Wa(T),F=p.Zc.TE(T,f),R=this.wb.vb(T),j=0,H=0,W=0,V=this.Ob(n);V!=-1;V=this.Sb(V)){var Y=0;this.ec(V)&&(Y|=1),this.TS(V)&&(Y|=4),Y!=0&&y.uJ(H,Y);var se=this.Ka(V);if(m.write(H++,W),W+=se,T==0){se=R;var re=F,he=new p.h;for(Y=this.Ya(V);j<W;Y=this.V(Y),j++){var ue=this.Va(Y);se.uc(2*ue,he),re.Vt(2*j,he)}}else for(Y=this.Ya(V);j<W;Y=this.V(Y),j++)for(ue=this.Va(Y),re=0;re<$;re++)he=R.gg(ue*$+re),F.rr(j*$+re,he)}h.kn(T,F),m.write(a,f)}h.KJ(y),h.LJ(m),h.Qc(16777215)}else if(a==550){for(w=h.description,h.resize(f),I=0,M=w.Ba;I<M;I++){for(T=w.ld(I),$=p.sa.Wa(T),F=h.vb(T),R=this.wb.vb(T),j=0,V=this.Ob(n),se=this.Ka(V),Y=this.Ya(V);j<se;Y=this.V(Y),j++)for(ue=this.Va(Y),re=0;re<$;re++)he=R.gg(ue*$+re),F.rr(j*$+re,he);h.kn(T,F)}h.Qc(16777215)}return h},l.prototype.wB=function(n){for(var a=this.Ob(n);a!=-1;a=this.ar(a));a=this.KR(n);var h=this.ve(n);a!=-1?this.JJ(a,h):this.md=h,h!=-1?this.NJ(h,a):this.sw=a,this.JQ(n)},l.prototype.Kg=function(n,a){return a===void 0?this.VE(n,p.fe.pg()):this.VE(n,a)},l.prototype.VE=function(n,a){return n=this.pU(n),this.wb==null?this.wb=this.Kl=new p.ee(a):this.Kl.Ll(a),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.md==-1?this.md=n:(this.NJ(n,this.sw),this.JJ(this.sw,n)),this.sw=n},l.prototype.ve=function(n){return this.dd.U(n,1)},l.prototype.KR=function(n){return this.dd.U(n,0)},l.prototype.jc=function(n){return 2147483647&this.dd.U(n,2)},l.prototype.CJ=function(n,a,h){a=this.yk[a],(n=this.EF(n))>=a.size&&a.resize(Math.max(p.P.truncate(1.25*n),16),-1),a.write(n,h)},l.prototype.FF=function(n,a){return(n=this.EF(n))<(a=this.yk[a]).size?a.read(n):-1},l.prototype.WE=function(){this.yk==null&&(this.yk=[]);for(var n=0;n<this.yk.length;n++)if(this.yk[n]==null)return this.yk[n]=p.Zc.Qh(0),n;return this.yk.push(p.Zc.Qh(0)),this.yk.length-1},l.prototype.sW=function(n){this.yk[n]=null},l.prototype.Ob=function(n){return this.dd.U(n,3)},l.prototype.mv=function(n){return this.dd.U(n,4)},l.prototype.I=function(n){return this.dd.U(n,5)},l.prototype.ea=function(n){return this.dd.U(n,6)},l.prototype.Ip=function(n,a,h){for(var f=0,m=this.md;m!=-1;m=this.ve(m)){var y=this.jc(m);if(p.ba.Ic(y)&&(!h||y==1736)){y=this.jc(m)==1736;for(var w=this.Ob(m);w!=-1;){for(var I=0,M=this.Ya(w);I<p.P.truncate(this.Ka(w)/2);){var T=this.V(M);if(T==-1)break;var $=this.Va(M),F=this.Uh($);F!=null?$=F.Rb():(F=this.Va(T),$=this.wb.Ar($,F)),$<=n?($==0?f==0&&(f=-1):f=1,T!=this.tj(w)&&(this.gC(T,M),this.qd(T,!0))):M=this.V(M),I++}for(I=this.Ya(w),M=this.ec(w)?I:this.tj(w);0<this.Ka(w);){if((T=this.Na(M))==-1){this.qd(M,!0),f==0&&(f=-1);break}var R=this.Va(T);if((F=this.Uh(R))!=null?$=F.Rb():($=this.Va(M),$=this.wb.Ar($,R)),$<=n)$==0?f==0&&(f=-1):f=1,this.gC(T,M),this.qd(T,!1),I==T&&(I=this.Ya(w));else if((M=this.Na(M))==I)break}M=this.Ka(w),a&&(y?3>M:2>M)?(w=this.ar(w),f=0<M?1:f==0?-1:f):w=this.Sb(w)}}}return f},l.prototype.gC=function(n,a){var h=this.Va(n),f=this.Va(a);if(this.Ug!=null&&(h=this.Ug.read(h),this.Ug.write(f,h)),this.di!=null){for(f=0,h=this.di.length;f<h;f++)if(this.di[f]!=null){var m=this.Qa(n,f);m!=-1&&this.Sa(a,f,m)}}},l.prototype.Wl=function(n,a,h){var f=0,m=this.V(n);if(m==-1)throw p.i.Ra();for(var y=this.Va(n),w=this.Va(m),I=this.Uh(y),M=I==null?this.wb.Ar(y,w):I.Rb(),T=0;T<h;T++){var $=a[T];if(0<$&&1>$){var F=$;I!=null&&(F=0<M?I.Tx($)/M:0),this.wb.fD(y,w,F,this.pm());var R=this.yj(this.cd(n),m,this.pm());if(f++,I!=null){var j=I.fl(0,$);F=this.Va(this.Na(R)),this.Zg(F,j),this.mf(R,j.xc()),T!=h-1&&a[T+1]!=1||($=I.fl($,1),this.Zg(F,$))}}}return f},l.prototype.HX=function(n,a,h){var f=0,m=this.V(n);if(m==-1)throw p.i.ga("internal error");var y=this.Va(n),w=this.Va(m),I=this.Uh(y),M=I==null?this.wb.Ar(y,w):I.Rb(),T=0;n=this.cd(n);for(var $=0;$<h;$++){var F=a[$];if(T<F&&1>F){var R=F;if(I!=null&&(R=0<M?I.Tx(F)/M:0),this.wb.fD(y,w,R,this.pm()),R=this.tS(n,m,this.pm()),f++,I!=null){T=I.fl(T,F);var j=this.Va(this.Na(R));this.Zg(j,T),this.Db(R,T.qa,T.ma),$!=h-1&&a[$+1]!=1||(T=I.fl(F,1),R=this.Va(R),this.Zg(R,T))}}T=F}return f},l.prototype.tS=function(n,a,h){var f=a!=-1?this.Na(a):this.tj(n),m=f!=-1?this.V(f):-1,y=this.jI(h==null?this.gd:-1),w=this.Va(y);return h!=null&&this.wb.It(w,h),this.cj(y,n),this.Cc(y,m),this.Dc(y,f),m!=-1&&this.Dc(m,y),f!=-1&&this.Cc(f,y),h=this.ec(n),f=this.Ya(n),a==-1&&this.Yg(n,y),a==f&&(h&&f!=-1||this.Kf(n,y)),h&&m==-1&&(this.Cc(y,y),this.Dc(y,y)),this.Xj(n,this.Ka(n)+1),n=this.Sf(n),this.Vj(n,this.I(n)+1),y},l.prototype.pE=function(n,a,h){var f=this.Va(a),m=this.Va(h);if(0>f||m>this.gd-1)throw p.i.O("invalid call");if(f>m&&!this.ec(n))throw p.i.O("cannot iterate across an open path");for(n=0;a!=h;a=this.V(a))f=this.Va(a),(m=this.Uh(f))!=null?n+=m.Rb():(m=this.Va(this.V(a)),n+=this.wb.Ar(f,m));return n},l.prototype.Fh=function(n,a){var h=this.Va(n);this.wb.It(h,a),(h=this.Uh(h))!=null&&h.setStart(a),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&h.setEnd(a))},l.prototype.Xi=function(n,a){n=this.Va(n),this.wb.we(n,a)},l.prototype.mf=function(n,a){this.Db(n,a.x,a.y)},l.prototype.Db=function(n,a,h){var f=this.Va(n);this.wb.Db(f,a,h),(f=this.Uh(f))!=null&&f.UB(a,h),(n=this.Na(n))!=-1&&(n=this.Va(n),this.Uh(n)!=null&&f.Sl(a,h))},l.prototype.D=function(n,a){this.wb.D(this.ud.U(n,0),a)},l.prototype.Hc=function(n,a){this.wb.Aa[0].uc(2*this.ud.U(n,0),a)},l.prototype.Oa=function(n){var a=new p.h;return this.wb.D(this.ud.U(n,0),a),a},l.prototype.ZF=function(n,a){this.jt.uc(2*n,a)},l.prototype.Vc=function(n,a,h){return this.wb.Vc(n,this.Va(a),h)},l.prototype.setAttribute=function(n,a,h,f){this.wb.setAttribute(n,this.Va(a),h,f)},l.prototype.Va=function(n){return this.ud.U(n,0)},l.prototype.kh=function(){var n=new p.h;return this.D(void 0,n),n.y},l.prototype.hq=function(n,a){n=this.Va(n),a=this.Va(a);var h=this.wb.Aa[0].o;return h[2*n]===h[2*a]&&h[2*n+1]===h[2*a+1]},l.prototype.Fv=function(n,a){n=this.Va(n);var h=this.wb.Aa[0].o;return h[2*n]===a.x&&h[2*n+1]===a.y},l.prototype.rX=function(n,a){if(1>a&&(a=1),this.Ug==null){if(a==1)return;this.Ug=p.Zc.Fn(this.wb.I(),1)}(n=this.Va(n))>=this.Ug.size&&this.Ug.resize(n+1,1),this.Ug.write(n,a)},l.prototype.YF=function(n){return n=this.Va(n),this.Ug==null||n>=this.Ug.size?1:this.Ug.read(n)},l.prototype.Sa=function(n,a,h){a=this.di[a],n=this.Va(n),a.size<this.wb.I()&&a.resize(this.wb.I(),-1),a.write(n,h)},l.prototype.Qa=function(n,a){return(n=this.Va(n))<(a=this.di[a]).size?a.read(n):-1},l.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var n=0;n<this.di.length;n++)if(this.di[n]==null)return this.di[n]=p.Zc.Qh(0,-1),n;return this.di.push(p.Zc.Qh(0,-1)),this.di.length-1},l.prototype.Ud=function(n){this.di[n]=null},l.prototype.cc=function(n){return this.Te!=null?(n=this.Va(n),this.Te[n]):null},l.prototype.fd=function(n,a){var h=this.ud.U(n,2);if(h==-1)return!1;if(this.aA){var f=new p.Ta;this.Xi(n,f),a.setStart(f),this.Xi(h,f),a.setEnd(f)}else this.wb.Hc(this.ud.U(n,0),Ci),a.gm(0,Ci),this.wb.Hc(this.ud.U(h,0),Ci),a.gm(1,Ci);return!0},l.prototype.hW=function(n,a,h){if(this.aA){var f=new p.Ta;this.Xi(n,f),h.setStart(f),this.Xi(a,f),h.setEnd(f)}else this.wb.Hc(n,Ci),h.gm(0,Ci),this.wb.Hc(a,Ci),h.gm(1,Ci)},l.prototype.wf=function(n,a){if(a!=-1){if(n!=this.Sf(a))throw p.i.Ra();var h=this.es(a)}else h=this.mv(n);var f=this.rU(n);return a!=-1&&this.ep(a,f),this.cp(f,a),this.ep(f,h),h!=-1?this.cp(h,f):this.ap(n,f),a==-1&&this.bp(n,f),this.Tl(n,this.ea(n)+1),f},l.prototype.iG=function(n,a,h,f){n=this.wf(n,-1);for(var m=0,y=a,w=!1;y==h&&(w=!0),this.cj(y,n),m++,(y=this.V(y))!=a;);return this.mn(n,!0),this.Xj(n,m),w&&(a=h),this.Kf(n,a),this.Yg(n,this.Na(a)),this.fp(n,!1),f!=null&&(f[0]=w),n},l.prototype.ar=function(n){var a=this.es(n),h=this.Sb(n),f=this.Sf(n);return a!=-1?this.cp(a,h):this.ap(f,h),h!=-1?this.ep(h,a):this.bp(f,a),this.vO(n),this.Tl(f,this.ea(f)-1),this.nF(n),h},l.prototype.vO=function(n){var a=this.Ya(n);if(a!=-1){for(var h=0,f=this.Ka(n);h<f;h++){var m=a;a=this.V(a),this.Qy(m)}a=this.Sf(n),this.Vj(a,this.I(a)-this.Ka(n))}this.Xj(n,0)},l.prototype.Sb=function(n){return this.nd.U(n,2)},l.prototype.es=function(n){return this.nd.U(n,1)},l.prototype.Ka=function(n){return this.nd.U(n,3)},l.prototype.ec=function(n){return(1&this.Up(n))!=0},l.prototype.mn=function(n,a){if(this.ec(n)!=a){if(0<this.Ka(n)){var h=this.Ya(n),f=this.tj(n);a?(this.Cc(f,h),this.Dc(h,f),h=this.Va(f)):(this.Cc(f,-1),this.Dc(h,-1),h=this.Va(f)),this.Zg(h,null)}this.QB(n,(1|this.Up(n))-1|(a?1:0))}},l.prototype.Sf=function(n){return this.nd.U(n,7)},l.prototype.TS=function(n){return(2&this.Up(n))!=0},l.prototype.KB=function(n,a){this.QB(n,(2|this.Up(n))-2|(a?2:0))},l.prototype.qz=function(n){if(this.YS(n))return this.Qi.get(this.sv(n));var a=new p.zb,h=this.Ya(n);if(h==-1)return 0;var f=new p.h;this.D(h,f);for(var m=0,y=0,w=this.Ka(n);y<w;y++,h=this.V(h)){var I=this.cc(h);if(I==null){if(!this.fd(h,a))continue;I=a}m+=I.Sx(f.x,f.y)}return this.fp(n,!0),this.Qi.set(this.sv(n),m),m},l.prototype.ir=function(n,a,h){a=this.Ek[a],n=this.sv(n),a.size<this.Qi.size&&a.resize(this.Qi.size,-1),a.write(n,h)},l.prototype.uj=function(n,a){return(n=this.sv(n))<(a=this.Ek[a]).size?a.read(n):-1},l.prototype.Fy=function(){this.Ek==null&&(this.Ek=[]);for(var n=0;n<this.Ek.length;n++)if(this.Ek[n]==null)return this.Ek[n]=p.Zc.Qh(0),n;return this.Ek.push(p.Zc.Qh(0)),this.Ek.length-1},l.prototype.xB=function(n){this.Ek[n]=null},l.prototype.UT=function(n,a,h){if(h==-1)throw p.i.O();if(a!=h){var f=this.Sb(h),m=this.es(h),y=this.Sf(h);m==-1?this.ap(y,f):this.cp(m,f),f==-1?this.bp(y,m):this.ep(f,m),this.Vj(y,this.I(y)-this.Ka(h)),this.Tl(y,this.ea(y)-1),m=a==-1?this.mv(n):this.es(a),this.ep(h,m),this.cp(h,a),a==-1?this.bp(n,h):this.ep(a,h),m==-1?this.ap(n,h):this.cp(m,h),this.Vj(n,this.I(n)+this.Ka(h)),this.Tl(n,this.ea(n)+1),this.gx(h,n)}},l.prototype.kj=function(n,a){this.wb.we(this.Va(a),this.pm()),this.yj(n,-1,this.pm())},l.prototype.qd=function(n,a){var h=this.cd(n),f=this.Na(n),m=this.V(n);f!=-1&&this.Cc(f,m);var y=this.Ka(h);if(n==this.Ya(h)&&this.Kf(h,1<y?m:-1),m!=-1&&this.Dc(m,f),n==this.tj(h)&&this.Yg(h,1<y?f:-1),f!=-1&&m!=-1){f=this.Va(f);var w=this.Va(m);a?(a=this.Uh(f))!=null&&(f=new p.h,this.wb.D(w,f),a.Rc(f)):(w=this.Va(n),a=this.Uh(w),this.Zg(f,a),a!=null&&(f=this.wb.Oa(f),a.Ec(f)))}return this.Xj(h,y-1),h=this.Sf(h),this.Vj(h,this.I(h)-1),this.Qy(n),m},l.prototype.Ya=function(n){return this.nd.U(n,4)},l.prototype.tj=function(n){return this.nd.U(n,5)},l.prototype.V=function(n){return this.ud.U(n,2)},l.prototype.Na=function(n){return this.ud.U(n,1)},l.prototype.cd=function(n){return this.ud.U(n,3)},l.prototype.hc=function(n,a){return this.yj(n,-1,a)},l.prototype.$q=function(n){if(n===void 0)return this.$q(!1);if(n instanceof d)return new d(n);var a,h=-1,f=-1,m=-1,y=0,w=!1;for(a=this.md;a!=-1;a=this.ve(a))if(!n||p.ba.Ic(this.jc(a))){for(h=this.Ob(a);h!=-1;h=this.Sb(h))if(m=f=this.Ya(h),y=0,f!=-1){w=!0;break}if(w)break}return d.vP(this,a,h,f,m,y,n)},l.prototype.Pc=function(n){if(this.Kl.Pc(n),this.Te!=null)for(var a=0,h=this.Te.length;a<h;a++)this.Te[a]!=null&&this.Te[a].Pc(n)},l.prototype.lr=function(n,a,h,f){f?this.JX(n,a,h):this.IX(n,a,h)},l.prototype.Dc=function(n,a){this.ud.T(n,1,a)},l.prototype.Cc=function(n,a){this.ud.T(n,2,a)},l.prototype.cj=function(n,a){this.ud.T(n,3,a)},l.prototype.Xj=function(n,a){this.nd.T(n,3,a)},l.prototype.Kf=function(n,a){this.nd.T(n,4,a)},l.prototype.Yg=function(n,a){this.nd.T(n,5,a)},l.prototype.Tl=function(n,a){this.dd.T(n,6,a)},l.prototype.Vj=function(n,a){this.dd.T(n,5,a)},l.prototype.kJ=function(n){var a=n;do{var h=this.V(a);this.Cc(a,this.Na(a)),this.Dc(a,h),a=h}while(a!=n)},l.prototype.XB=function(n){this.gd=n},l.prototype.br=function(n){var a=this.es(n),h=this.Sb(n),f=this.Sf(n);a!=-1?this.cp(a,h):this.ap(f,h),h!=-1?this.ep(h,a):this.bp(f,a),this.Kf(n,-1),this.Yg(n,-1),this.nF(n)},l.prototype.oi=function(n,a){var h=this.Na(n),f=this.V(n);if(h!=-1&&this.Cc(h,f),f!=-1&&this.Dc(f,h),h!=-1&&f!=-1)if(h=this.Va(h),f=this.Va(f),a){if((a=this.Uh(h))!=null){var m=new p.h;this.wb.D(f,m),a.Rc(m)}}else a=this.Va(n),a=this.Uh(a),this.Zg(h,a),a!=null&&(m=new p.h,this.wb.D(h,m),a.Ec(m));this.Qy(n)},l.prototype.YS=function(n){return(4&this.Up(n))!=0},l.prototype.fp=function(n,a){this.QB(n,(4|this.Up(n))-4|(a?4:0))},l.prototype.nx=function(n,a){var h=this.ud.o;this.wb.oc();var f=this.wb.Aa[0].o;n.Wd(0,a,function(m,y){var w=h[5*m];m=h[5*y],y=f[2*w],w=f[2*w+1];var I=f[2*m];return w<(m=f[2*m+1])?-1:w>m?1:y<I?-1:y>I?1:0})},l.prototype.eS=function(){for(var n=this.md;n!=-1;n=this.ve(n))if(!p.ba.Ic(this.jc(n)))return!0;return!1},l.prototype.cC=function(n,a){for(var h=this.Ob(n),f=this.Ob(a),m=this.mv(n),y=this.mv(a),w=this.Ob(n);w!=-1;w=this.Sb(w))this.gx(w,a);for(w=this.Ob(a);w!=-1;w=this.Sb(w))this.gx(w,n);this.ap(n,f),this.ap(a,h),this.bp(n,y),this.bp(a,m),h=this.I(n),f=this.ea(n),m=this.ea(a),this.Vj(n,this.I(a)),this.Vj(a,h),this.Tl(n,m),this.Tl(a,f),h=this.dd.U(n,2),this.dd.T(n,2,this.dd.U(a,2)),this.dd.T(a,2,h)},l}(),p.hd=P})(Q||(Q={})),function(p){var P=function(x){function d(l,n,a,h){var f=x.call(this)||this;return f.aa=new p.l,l===void 0?f.PE():typeof l=="number"?f.QO(l,n,a,h):l instanceof p.Ta?n!==void 0?f.Su(l,n,a):f.RO(l):l instanceof p.sa?n!==void 0?f.TO(l,n):f.SO(l):l instanceof p.l?f.PO(l):f.PE(),f}return Et(d,x),d.prototype.Su=function(l,n,a){this.description=p.fe.pg(),this.aa.Pa(),l.B()||this.vu(l,n,a)},d.prototype.PO=function(l){this.description=p.fe.pg(),this.aa.L(l),this.aa.normalize()},d.prototype.SO=function(l){if(l==null)throw p.i.O();this.description=l,this.aa.Pa()},d.prototype.TO=function(l,n){if(l==null)throw p.i.O();this.description=l,this.aa.L(n),this.aa.normalize()},d.prototype.PE=function(){this.description=p.fe.pg(),this.aa.Pa()},d.prototype.RO=function(l){this.description=p.fe.pg(),this.aa.Pa(),l.B()||this.vu(l)},d.prototype.QO=function(l,n,a,h){this.description=p.fe.pg(),this.L(l,n,a,h)},d.prototype.L=function(l,n,a,h){if(this.wc(),typeof l=="number")this.aa.L(l,n,a,h);else for(this.Pa(),n=0,a=l.length;n<a;n++)this.$b(l[n])},d.prototype.Zo=function(l){if(this.wc(),!l.aT())throw p.i.O();this.aa.L(l)},d.prototype.Pa=function(){this.wc(),this.aa.Pa()},d.prototype.B=function(){return this.aa.B()},d.prototype.S=function(){return this.aa.S()},d.prototype.da=function(){return this.aa.da()},d.prototype.ik=function(){return this.aa.ik()},d.prototype.Lp=function(){return this.aa.Lp()},d.prototype.Kp=function(){return this.aa.tf()},d.prototype.$b=function(l){if(l instanceof p.h)this.wc(),this.aa.$b(l);else if(l instanceof p.l)this.wc(),this.aa.$b(l);else if(l instanceof p.Ta){if(this.wc(),!l.Bc()){var n=l.description;if(this.description!=n&&this.Ll(n),this.B())this.vu(l);else{this.aa.$b(l.D());for(var a=1,h=n.Ba;a<h;a++)for(var f=n.Fd(a),m=p.sa.Wa(f),y=0;y<m;y++){var w=l.Vc(f,y),I=this.Vg(f,y);I.$b(w),this.setInterval(f,y,I)}}}}else if(l instanceof d&&!l.B())for((n=l.description)!=this.description&&this.Ll(n),this.aa.$b(l.aa),a=1,h=n.Ba;a<h;a++)for(f=n.ld(a),m=p.sa.Wa(f),y=0;y<m;y++)w=l.Vg(f,y),(I=this.Vg(f,y)).$b(w),this.setInterval(f,y,I)},d.prototype.vu=function(l,n,a){if(n!==void 0){this.aa.L(l.D(),n,a),a=1;for(var h=(n=l.description).Ba;a<h;a++)for(var f=n.Fd(a),m=p.sa.Wa(f),y=0;y<m;y++){var w=l.Vc(f,y);this.setInterval(f,y,w,w)}}else for(this.aa.L(l.la[0],l.la[1]),a=1,h=(n=l.description).Ba;a<h;a++)for(f=n.Fd(a),m=p.sa.Wa(f),y=0;y<m;y++)w=l.Vc(f,y),this.setInterval(f,y,w,w)},d.prototype.setInterval=function(l,n,a,h){if(a=typeof a=="number"?new p.Oc(a,h):a,this.wc(),l==0)if(n==0)this.aa.v=a.pa,this.aa.C=a.wa;else{if(n!=1)throw p.i.de();this.aa.G=a.pa,this.aa.H=a.wa}else this.qD(0,l,n,a.pa),this.qD(1,l,n,a.wa)},d.prototype.X=function(l,n){this.wc(),this.aa.X(l,n)},d.prototype.Pc=function(l){if(l instanceof p.Ed)this.wc(),l.hC(this.aa);else if(this.wc(),!this.aa.B()){var n=new p.JK;this.So(n),n.SS()?n.Pa():l.hC(n)}},d.prototype.copyTo=function(l){if(l.K()!=this.K())throw p.i.O();if(l.wc(),l.description=this.description,l.aa.L(this.aa),l.la=null,this.la!=null){l.qu();for(var n=0;n<2*(this.description.Be.length-2);n++)l.la[n]=this.la[n]}},d.prototype.Ja=function(){return new d(this.description)},d.prototype.He=function(){return this.aa.rF()},d.prototype.Rb=function(){return this.aa.tR()},d.prototype.K=function(){return 197},d.prototype.Eb=function(){return 2},d.prototype.dn=function(l){this.copyTo(l)},d.prototype.A=function(l){l.v=this.aa.v,l.G=this.aa.G,l.C=this.aa.C,l.H=this.aa.H},d.prototype.So=function(l){l.v=this.aa.v,l.G=this.aa.G,l.C=this.aa.C,l.H=this.aa.H,l.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},d.prototype.Vg=function(l,n){var a=new p.Oc;return a.L(this.Pd(0,l,n),this.Pd(1,l,n)),a},d.prototype.If=function(l,n){n.Pf(this.description);var a=this.description.Ba-1;switch(l){case 0:for(l=0;l<a;l++)for(var h=this.description.ld(l),f=p.sa.Wa(h),m=0;m<f;m++)n.setAttribute(h,m,this.Pd(0,h,m));n.Db(this.aa.v,this.aa.G);break;case 1:for(l=0;l<a;l++)for(h=this.description.ld(l),f=p.sa.Wa(h),m=0;m<f;m++)n.setAttribute(h,m,this.Pd(1,h,m));n.Db(this.aa.v,this.aa.H);break;case 2:for(l=0;l<a;l++)for(h=this.description.ld(l),f=p.sa.Wa(h),m=0;m<f;m++)n.setAttribute(h,m,this.Pd(0,h,m));n.Db(this.aa.C,this.aa.H);break;case 3:for(l=0;l<a;l++)for(h=this.description.ld(l),f=p.sa.Wa(h),m=0;m<f;m++)n.setAttribute(h,m,this.Pd(1,h,m));n.Db(this.aa.C,this.aa.G);break;default:throw p.i.de()}},d.prototype.hB=function(l,n){l=this.aa.hB(l),n.na(l.x,l.y)},d.prototype.fR=function(l,n){return n*(l.Qq-2)},d.prototype.sF=function(l,n,a){if(this.aa.B())throw p.i.ga("empty geometry");if(n==0)return l!=0?a!=0?this.aa.H:this.aa.C:a!=0?this.aa.G:this.aa.v;if(a>=p.sa.Wa(n))throw p.i.O();var h=this.description.Rf(n);return this.qu(),0<=h?this.la[this.fR(this.description,l)+this.description.GR(h)-2+a]:p.sa.te(n)},d.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var l=d.Ig(this.description,0),n=d.Ig(this.description,1),a=0,h=1,f=this.description.Ba;h<f;h++){var m=this.description.ld(h),y=p.sa.Wa(m);m=p.sa.te(m);for(var w=0;w<y;w++)this.la[l+a]=m,this.la[n+a]=m,a++}}},d.prototype.un=function(l){if(this.la!=null)if(2<l.Be.length){for(var n=p.fe.Kw(l,this.description),a=[],h=d.Ig(this.description,0),f=d.Ig(this.description,1),m=d.Ig(l,0),y=d.Ig(l,1),w=0,I=1,M=l.Ba;I<M;I++){var T=l.ld(I),$=p.sa.Wa(T);if(n[I]==-1){var F=p.sa.te(T);for(T=0;T<$;T++)a[m+w]=F,a[y+w]=F,w++}else for(F=this.description.bk(n[I])-2,T=0;T<$;T++)a[m+w]=this.la[h+F],a[y+w]=this.la[f+F],w++,F++}this.la=a}else this.la=null;this.description=l},d.prototype.Pd=function(l,n,a){if(this.aa.B())throw p.i.ga("This operation was performed on an Empty Geometry.");if(n==0)return l!=0?a!=0?this.aa.H:this.aa.C:a!=0?this.aa.G:this.aa.v;if(a>=p.sa.Wa(n))throw p.i.de();var h=this.description.Rf(n);return 0<=h?(this.qu(),this.la[d.Ig(this.description,l)+this.description.bk(h)-2+a]):p.sa.te(n)},d.prototype.qD=function(l,n,a,h){if(this.wc(),n==0)l!=0?a!=0?this.aa.H=h:this.aa.C=h:a!=0?this.aa.G=h:this.aa.v=h;else{if(a>=p.sa.Wa(n))throw p.i.de();if(!this.hasAttribute(n)){if(p.sa.yG(n,h))return;this.se(n)}n=this.description.Rf(n),this.qu(),this.la[d.Ig(this.description,l)+this.description.bk(n)-2+a]=h}},d.Ig=function(l,n){return n*(l.Be.length-2)},d.prototype.Fa=function(l){this.wc();var n=new p.l;return l.A(n),this.aa.Fa(n)},d.prototype.isIntersecting=function(l){return l instanceof p.l?this.aa.isIntersecting(l):this.aa.isIntersecting(l.aa)},d.prototype.Lu=function(l,n){this.wc(),l.B()?this.Pa():n!==void 0?this.vu(l,n,void 0):this.aa.Lu(l.Ng(),l.kh())},d.prototype.offset=function(l,n){this.wc(),this.aa.offset(l,n)},d.prototype.normalize=function(){this.wc(),this.aa.normalize()},d.prototype.tf=function(l){if(l===void 0){if(l=new p.Ta(this.description),this.B())return l;for(n=this.description.Ba,a=1;a<n;a++)for(h=this.description.Fd(a),f=p.sa.Wa(h),m=0;m<f;m++)y=.5*(this.Pd(0,h,m)+this.Pd(1,h,m)),l.setAttribute(h,m,y);return l.Db(this.aa.ik(),this.aa.Lp()),l}if(l.Pf(this.description),this.B())l.Pa();else{for(var n=this.description.Ba,a=1;a<n;a++)for(var h=this.description.ld(a),f=p.sa.Wa(h),m=0;m<f;m++){var y=.5*(this.sF(0,h,m)+this.sF(1,h,m));l.setAttribute(h,m,y)}l.Db(this.aa.tf())}},d.prototype.hz=function(){return new p.Ta(this.aa.hz())},d.prototype.contains=function(l){return l instanceof p.Ta?!l.B()&&this.aa.contains(l.Ng(),l.kh()):this.aa.contains(l.aa)},d.prototype.ZO=function(l){return this.aa.contains(l)},d.prototype.Nb=function(l){if(l==this)return!0;if(!(l instanceof d)||this.description!=l.description)return!1;if(this.B())return!!l.B();if(!this.aa.Nb(l.aa))return!1;for(var n=0,a=2*(this.description.Be.length-2);n<a;n++)if(this.la[n]!=l.la[n])return!1;return!0},d.prototype.dc=function(){var l=this.description.dc();if(l=p.P.Vh(l,this.aa.dc()),!this.B()&&this.la!=null)for(var n=0,a=2*(this.description.Be.length-2);n<a;n++)l=p.P.Vh(l,this.la[n]);return l},d.prototype.gs=function(){return this.aa.v},d.prototype.js=function(){return this.aa.G},d.prototype.fs=function(){return this.aa.C},d.prototype.hs=function(){return this.aa.H},d.prototype.ng=function(){return p.si.im(this,null)},d.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},d}(p.ba);p.Hh=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a){d===void 0?this.Pa():(this.v=d,this.G=l,this.C=n,this.H=a)}return x.construct=function(d,l,n,a){var h=new x;return h.v=d,h.G=l,h.C=n,h.H=a,h},x.prototype.L=function(d,l,n,a){typeof d=="number"?n!==void 0?(this.v=d,this.G=l,this.C=n,this.H=a,this.normalize()):(this.v=d,this.G=l,this.C=d,this.H=l):d instanceof p.h?l!==void 0?(this.v=d.x-.5*l,this.C=this.v+l,this.G=d.y-.5*n,this.H=this.G+n,this.normalize()):(this.v=d.x,this.G=d.y,this.C=d.x,this.H=d.y):d instanceof x?this.L(d.v,d.G,d.C,d.H):d instanceof p.Oc&&(d.B()||l.B()?this.Pa():(this.v=d.pa,this.C=d.wa,this.G=l.pa,this.H=l.wa))},x.prototype.bx=function(d,l){if(l!==void 0)if(l==0)this.Pa();else{this.v=d[0].x,this.G=d[0].y,this.C=this.v,this.H=this.G;for(var n=1;n<l;n++){var a=d[n];a.x<this.v?this.v=a.x:a.x>this.C&&(this.C=a.x),a.y<this.G?this.G=a.y:a.y>this.H&&(this.H=a.y)}}else if(d==null||d.length==0)this.Pa();else for(a=d[0],this.L(a.x,a.y),n=1;n<d.length;n++)l=d[n],this.Nk(l.x,l.y)},x.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},x.prototype.B=function(){return isNaN(this.v)},x.prototype.$b=function(d,l){typeof d=="number"?this.B()?(this.v=d,this.G=l,this.C=d,this.H=l):(this.v>d?this.v=d:this.C<d&&(this.C=d),this.G>l?this.G=l:this.H<l&&(this.H=l)):d instanceof p.h||d instanceof p.Od?this.$b(d.x,d.y):d instanceof x&&!d.B()&&(this.$b(d.v,d.G),this.$b(d.C,d.H))},x.prototype.Nk=function(d,l){this.v>d?this.v=d:this.C<d&&(this.C=d),this.G>l?this.G=l:this.H<l&&(this.H=l)},x.prototype.X=function(d,l){this.B()||(this.v-=d,this.C+=d,this.G-=l,this.H+=l,(this.v>this.C||this.G>this.H)&&this.Pa())},x.prototype.scale=function(d){0>d&&this.Pa(),this.B()||(this.v*=d,this.C*=d,this.G*=d,this.H*=d)},x.prototype.zoom=function(d,l){this.B()||this.L(this.tf(),d*this.S(),l*this.da())},x.prototype.isIntersecting=function(d){return!this.B()&&!d.B()&&(this.v<=d.v?this.C>=d.v:d.C>=this.v)&&(this.G<=d.G?this.H>=d.G:d.H>=this.G)},x.prototype.CG=function(d){return(this.v<=d.v?this.C>=d.v:d.C>=this.v)&&(this.G<=d.G?this.H>=d.G:d.H>=this.G)},x.prototype.Fa=function(d){return!this.B()&&!d.B()&&(d.v>this.v&&(this.v=d.v),d.C<this.C&&(this.C=d.C),d.G>this.G&&(this.G=d.G),d.H<this.H&&(this.H=d.H),(d=this.v<=this.C&&this.G<=this.H)||this.Pa(),d)},x.prototype.hB=function(d){switch(d){case 0:return p.h.construct(this.v,this.G);case 1:return p.h.construct(this.v,this.H);case 2:return p.h.construct(this.C,this.H);case 3:return p.h.construct(this.C,this.G);default:throw p.i.de()}},x.prototype.iB=function(d){if(d==null||4>d.length)throw p.i.O();d[0]!=null?d[0].na(this.v,this.G):d[0]=p.h.construct(this.v,this.G),d[1]!=null?d[1].na(this.v,this.H):d[1]=p.h.construct(this.v,this.H),d[2]!=null?d[2].na(this.C,this.H):d[2]=p.h.construct(this.C,this.H),d[3]!=null?d[3].na(this.C,this.G):d[3]=p.h.construct(this.C,this.G)},x.prototype.rF=function(){return this.B()?0:this.S()*this.da()},x.prototype.tR=function(){return this.B()?0:2*(this.S()+this.da())},x.prototype.ik=function(){return(this.C+this.v)/2},x.prototype.Lp=function(){return(this.H+this.G)/2},x.prototype.S=function(){return this.C-this.v},x.prototype.da=function(){return this.H-this.G},x.prototype.move=function(d,l){this.B()||(this.v+=d,this.G+=l,this.C+=d,this.H+=l)},x.prototype.Lu=function(d,l){if(l!==void 0)this.move(d-this.ik(),l-this.Lp());else if(d instanceof p.h)this.Lu(d.x,d.y);else{if(!(d instanceof p.Ta))throw p.i.O();l=(this.C-this.v)/2;var n=(this.H-this.G)/2;this.v=d.Ng()-l,this.C=d.Ng()+l,this.G=d.kh()-n,this.H=d.kh()+n}},x.prototype.offset=function(d,l){this.v+=d,this.C+=d,this.G+=l,this.H+=l},x.prototype.normalize=function(){if(!this.B()){var d=Math.min(this.v,this.C),l=Math.max(this.v,this.C);this.v=d,this.C=l,d=Math.min(this.G,this.H),l=Math.max(this.G,this.H),this.G=d,this.H=l}},x.prototype.fn=function(d){d.na(this.v,this.G)},x.prototype.VI=function(d){d.na(this.C,this.G)},x.prototype.YI=function(d){d.na(this.v,this.H)},x.prototype.gn=function(d){d.na(this.C,this.H)},x.prototype.aT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},x.prototype.tf=function(){return p.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},x.prototype.hz=function(){return p.h.construct(this.v,this.G)},x.prototype.contains=function(d,l){if(l!==void 0)return d>=this.v&&d<=this.C&&l>=this.G&&l<=this.H;if(d instanceof p.Ta)return this.contains(d.Ng(),d.kh());if(d instanceof p.h)return this.contains(d.x,d.y);if(d instanceof x)return d.v>=this.v&&d.C<=this.C&&d.G>=this.G&&d.H<=this.H;throw p.i.O()},x.prototype.jm=function(d,l){if(l!==void 0)return d>this.v&&d<this.C&&l>this.G&&l<this.H;if(d instanceof p.h)return this.jm(d.x,d.y);if(d instanceof x)return d.v>this.v&&d.C<this.C&&d.G>this.G&&d.H<this.H;throw p.i.O()},x.prototype.Nb=function(d){return d==this||d instanceof x&&(!(!this.B()||!d.B())||this.v==d.v&&this.G==d.G&&this.C==d.C&&this.H==d.H)},x.prototype.dc=function(){var d=this.v;d=p.P.truncate(d^d>>>32);var l=p.P.Vh(d);return d=this.C,d=p.P.truncate(d^d>>>32),l=p.P.Vh(d,l),d=this.G,d=p.P.truncate(d^d>>>32),l=p.P.Vh(d,l),d=this.H,d=p.P.truncate(d^d>>>32),p.P.Vh(d,l)},x.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},x.prototype.uy=function(d,l){var n=this.ak(d),a=this.ak(l);if((n&a)!=0)return 0;if((n|a)==0)return 4;var h=(n!=0?1:0)|(a!=0?2:0);do{var f=l.x-d.x,m=l.y-d.y;if(f>m?(n&x.TC)!=0?((n&x.lu)!=0?(d.y+=m*(this.v-d.x)/f,d.x=this.v):(d.y+=m*(this.C-d.x)/f,d.x=this.C),n=this.ak(d)):(a&x.TC)!=0?((a&x.lu)!=0?(l.y+=m*(this.v-l.x)/f,l.x=this.v):(l.y+=m*(this.C-l.x)/f,l.x=this.C),a=this.ak(l)):n!=0?((n&x.mu)!=0?(d.x+=f*(this.G-d.y)/m,d.y=this.G):(d.x+=f*(this.H-d.y)/m,d.y=this.H),n=this.ak(d)):((a&x.mu)!=0?(l.x+=f*(this.G-l.y)/m,l.y=this.G):(l.x+=f*(this.H-l.y)/m,l.y=this.H),a=this.ak(l)):(n&x.UC)!=0?((n&x.mu)!=0?(d.x+=f*(this.G-d.y)/m,d.y=this.G):(d.x+=f*(this.H-d.y)/m,d.y=this.H),n=this.ak(d)):(a&x.UC)!=0?((a&x.mu)!=0?(l.x+=f*(this.G-l.y)/m,l.y=this.G):(l.x+=f*(this.H-l.y)/m,l.y=this.H),a=this.ak(l)):n!=0?((n&x.lu)!=0?(d.y+=m*(this.v-d.x)/f,d.x=this.v):(d.y+=m*(this.C-d.x)/f,d.x=this.C),n=this.ak(d)):((a&x.lu)!=0?(l.y+=m*(this.v-l.x)/f,l.x=this.v):(l.y+=m*(this.C-l.x)/f,l.x=this.C),a=this.ak(l)),(n&a)!=0)return 0}while((n|a)!=0);return h},x.prototype.ak=function(d){return(d.x<this.v?1:0)|(d.x>this.C?1:0)<<1|(d.y<this.G?1:0)<<2|(d.y>this.H?1:0)<<3},x.prototype.Di=function(d){return!this.B()&&(this.S()<=d||this.da()<=d)},x.prototype.ub=function(d){return d instanceof p.h?Math.sqrt(this.dK(d)):Math.sqrt(this.px(d))},x.prototype.px=function(d){var l=0,n=0,a=this.v-d.C;return a>l&&(l=a),(a=this.G-d.H)>n&&(n=a),(a=d.v-this.C)>l&&(l=a),(a=d.G-this.H)>n&&(n=a),l*l+n*n},x.prototype.dK=function(d){var l=0,n=0,a=this.v-d.x;return a>l&&(l=a),(a=this.G-d.y)>n&&(n=a),(a=d.x-this.C)>l&&(l=a),(a=d.y-this.H)>n&&(n=a),l*l+n*n},x.prototype.en=function(d){this.B()?d.Pa():d.L(this.v,this.C)},x.lu=1,x.mu=4,x.TC=3,x.UC=12,x}();p.l=P}(Q||(Q={})),function(p){var P,x;(x=P||(P={}))[x.initialize=0]="initialize",x[x.initializeRed=1]="initializeRed",x[x.initializeBlue=2]="initializeBlue",x[x.initializeRedBlue=3]="initializeRedBlue",x[x.sweep=4]="sweep",x[x.sweepBruteForce=5]="sweepBruteForce",x[x.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",x[x.sweepRedBlue=7]="sweepRedBlue",x[x.sweepRed=8]="sweepRed",x[x.sweepBlue=9]="sweepBlue",x[x.iterate=10]="iterate",x[x.iterateRed=11]="iterateRed",x[x.iterateBlue=12]="iterateBlue",x[x.iterateBruteForce=13]="iterateBruteForce",x[x.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",x[x.resetRed=15]="resetRed",x[x.resetBlue=16]="resetBlue";var d=function(){function l(n,a){this.ei=n,this.ZG=a}return l.prototype.qr=function(n,a,h){this.ei.FX(h,n,a,this.ZG)},l.prototype.bq=function(n){return this.ei.Tr(n,this.ZG)},l}();P=function(){function l(){this.qw=this.qo=this.ff=this.sd=null,this.yq=new p.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.io=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Pk()}return l.prototype.mr=function(){this.Pk(),this.Rv=!0,this.Fb==null?(this.io=new p.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},l.prototype.bd=function(n,a){if(!this.Rv)throw p.i.Hb();var h=new p.l;h.L(a),this.io.add(n),this.Fb.push(h)},l.prototype.Hp=function(){if(!this.Rv)throw p.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},l.prototype.kK=function(){this.Pk(),this.Qv=!0,this.Fb==null?(this.io=new p.ja(0),this.Fb=[]):(this.io.Dh(0),this.Fb.length=0)},l.prototype.DD=function(n,a){if(!this.Qv)throw p.i.Hb();var h=new p.l;h.L(a),this.io.add(n),this.Fb.push(h)},l.prototype.dF=function(){if(!this.Qv)throw p.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},l.prototype.jK=function(){this.Pk(),this.Pv=!0,this.rd==null?(this.ew=new p.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},l.prototype.zD=function(n,a){if(!this.Pv)throw p.i.Hb();var h=new p.l;h.L(a),this.ew.add(n),this.rd.push(h)},l.prototype.cF=function(){if(!this.Pv)throw p.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},l.prototype.next=function(){if(this.Jc)return!1;for(var n=!0;n;)switch(this.Yb){case 0:n=this.Bz();break;case 1:n=this.mS();break;case 2:n=this.jS();break;case 3:n=this.lS();break;case 4:n=this.QX();break;case 5:n=this.MX();break;case 6:n=this.NX();break;case 7:n=this.OX();break;case 8:n=this.tx();break;case 9:n=this.dC();break;case 10:n=this.Pz();break;case 11:n=this.eT();break;case 12:n=this.bT();break;case 13:n=this.cT();break;case 14:n=this.dT();break;case 15:n=this.fJ();break;case 16:n=this.eJ();break;default:throw p.i.Ra()}return!this.Jc},l.prototype.WB=function(n){this.ra=n},l.prototype.oz=function(n){return this.Fb[n]},l.prototype.Wy=function(n){return this.rd[n]},l.prototype.pl=function(n){return this.io.read(n)},l.prototype.jl=function(n){return this.ew.read(n)},l.Oz=function(n){return(1&n)==1},l.gq=function(n){return(1&n)==0},l.prototype.Pk=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.qe=-1,this.Jc=!0},l.prototype.Bz=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length)return this.qe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new p.ur(!0),this.qo=this.sd.getIterator(),this.Md=new p.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var a=this.Fb[n];this.sd.Dr(a.v,a.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,2*this.Fb.length,!0),this.qe=2*this.Fb.length,this.Yb=4,!0},l.prototype.mS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new p.ur(!0),this.qo=this.sd.getIterator(),this.Md=new p.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var a=this.Fb[n];this.sd.Dr(a.v,a.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);return this.Mt(this.Md,this.Md.size,!0),this.qe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.eJ()},l.prototype.jS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new p.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new p.ja(0)),this.ff.mr();for(var n=0;n<this.rd.length;n++){var a=this.rd[n];this.ff.Dr(a.v,a.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.fJ()},l.prototype.lS=function(){if(this.Bf=this.Xf=-1,10>this.Fb.length||10>this.rd.length)return this.qe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new p.ur(!0),this.qo=this.sd.getIterator(),this.Md=new p.ja(0)),this.ff==null&&(this.ff=new p.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new p.ja(0)),this.sd.mr();for(var n=0;n<this.Fb.length;n++){var a=this.Fb[n];this.sd.Dr(a.v,a.C)}for(this.sd.Hp(),this.ff.mr(),n=0;n<this.rd.length;n++)a=this.rd[n],this.ff.Dr(a.v,a.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),n=0;n<2*this.Fb.length;n++)this.Md.add(n);for(n=0;n<2*this.rd.length;n++)this.Ff.add(n);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.qe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},l.prototype.QX=function(){var n=this.Md.get(--this.qe),a=n>>1;return l.gq(n)?(this.sd.remove(a),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1)):(this.qo.zB(this.Fb[a].v,this.Fb[a].C,this.ra),this.Xf=a,this.Yb=10,!0)},l.prototype.MX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Tg=this.Xf=this.qe,this.Yb=13,!0)},l.prototype.NX=function(){return--this.qe==-1?(this.Bf=this.Xf=-1,this.Jc=!0,!1):(this.Xf=this.qe,this.Tg=this.rd.length,this.Yb=14,!0)},l.prototype.OX=function(){var n=this.Md.get(this.qe-1),a=this.Ff.get(this.Tg-1),h=this.Tr(n,!0),f=this.Tr(a,!1);return h>f?this.tx():h<f?this.dC():l.Oz(n)?this.tx():l.Oz(a)?this.dC():this.tx()},l.prototype.tx=function(){var n=this.Md.get(--this.qe),a=n>>1;if(l.gq(n))return this.Ef!=-1&&this.Kj.get(a)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(a)),this.Kj.set(a,-1)):this.sd.remove(a),this.qe!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(n=this.Bd.sc(this.Df);n!=-1;){var h=this.Bd.getData(n);this.ff.xj(h),this.Jj.set(h,-1),h=this.Bd.lb(n),this.Bd.kd(this.Df,n),n=h}return 0<this.ff.size()?(this.qw.zB(this.Fb[a].v,this.Fb[a].C,this.ra),this.Xf=a,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new p.lp),this.Kj=new p.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(a,this.Bd.addElement(this.Ef,a)),this.Yb=7),!0},l.prototype.dC=function(){var n=this.Ff.get(--this.Tg),a=n>>1;if(l.gq(n))return this.Df!=-1&&this.Jj.get(a)!=-1?(this.Bd.kd(this.Df,this.Jj.get(a)),this.Jj.set(a,-1)):this.ff.remove(a),this.Tg!=0||(this.Bf=this.Xf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(n=this.Bd.sc(this.Ef);n!=-1;){var h=this.Bd.getData(n);this.sd.xj(h),this.Kj.set(h,-1),h=this.Bd.lb(n),this.Bd.kd(this.Ef,n),n=h}return 0<this.sd.size()?(this.qo.zB(this.rd[a].v,this.rd[a].C,this.ra),this.Bf=a,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new p.lp),this.Jj=new p.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(a,this.Bd.addElement(this.Df,a)),this.Yb=7),!0},l.prototype.Pz=function(){if(this.Bf=this.qo.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.qe)>>1;return this.sd.xj(n),this.Yb=4,!0},l.prototype.eT=function(){if(this.Xf=this.qo.next(),this.Xf!=-1)return!1;this.Bf=this.Xf=-1;var n=this.Ff.get(this.Tg)>>1;return this.ff.xj(n),this.Yb=7,!0},l.prototype.bT=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var n=this.Md.get(this.qe)>>1;return this.sd.xj(n),this.Yb=7,!0},l.prototype.cT=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.qe]);var n=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},l.prototype.dT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.qe]);var n=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(n)||(this.Bf=this.Tg,!1)},l.prototype.fJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.qe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},l.prototype.eJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},l.prototype.Mt=function(n,a,h){this.Cm==null&&(this.Cm=new p.Zt),h=new d(this,h),this.Cm.sort(n,0,a,h)},l.prototype.FX=function(n,a,h,f){var m=this;n.Wd(a,h,function(y,w){var I=m.Tr(y,f),M=m.Tr(w,f);return I<M||I==M&&l.gq(y)&&l.Oz(w)?-1:1})},l.prototype.Tr=function(n,a){var h=.5*this.ra;return a?(a=this.Fb[n>>1],l.gq(n)?a.G-h:a.H+h):(a=this.rd[n>>1],l.gq(n)?a.G-h:a.H+h)},l}(),p.sC=P}(Q||(Q={})),function(p){var P=function(){function x(){}return x.construct=function(d,l,n,a,h,f){var m=new x;return m.v=d,m.G=l,m.Xe=n,m.C=a,m.H=h,m.Dg=f,m},x.prototype.Pa=function(){this.Xe=this.v=NaN},x.prototype.B=function(){return isNaN(this.v)},x.prototype.SS=function(){return isNaN(this.Xe)},x.prototype.L=function(d,l,n,a,h,f){a!==void 0?typeof d=="number"?(this.v=d,this.G=l,this.Xe=n,this.C=a,this.H=h,this.Dg=f):(this.v=d.x-.5*l,this.C=this.v+l,this.G=d.y-.5*n,this.H=this.G+n,this.Xe=d.z-.5*a,this.Dg=this.Xe+a):(this.v=d,this.G=l,this.Xe=n,this.C=d,this.H=l,this.Dg=n)},x.prototype.move=function(d){this.v+=d.x,this.G+=d.y,this.Xe+=d.z,this.C+=d.x,this.H+=d.y,this.Dg+=d.z},x.prototype.copyTo=function(d){d.v=this.v,d.G=this.G,d.C=this.C,d.H=this.H},x.prototype.Nk=function(d,l,n){this.v>d?this.v=d:this.C<d&&(this.C=d),this.G>l?this.G=l:this.H<l&&(this.H=l),isNaN(this.Xe)==0?this.Xe>n?this.Xe=n:this.Dg<n&&(this.Dg=n):this.Dg=this.Xe=n},x.prototype.$b=function(d,l,n){if(typeof d=="number")this.B()?(this.v=d,this.G=l,this.Xe=n,this.C=d,this.H=l,this.Dg=n):this.Nk(d,l,n);else if(d instanceof p.Od)this.$b(d.x,d.y,d.z);else{if(!(d instanceof x))throw p.i.O();d.B()||(this.$b(d.v,d.G,d.Xe),this.$b(d.C,d.H,d.Dg))}},x.prototype.construct=function(d,l,n){d.B()||l.B()?this.Pa():(this.v=d.pa,this.C=d.wa,this.G=l.pa,this.H=l.wa,this.Xe=n.pa,this.Dg=n.wa)},x.prototype.iB=function(d){if(d==null||8>d.length)throw p.i.O();d[0]=new p.Od(this.v,this.G,this.Xe),d[1]=new p.Od(this.v,this.H,this.Xe),d[2]=new p.Od(this.C,this.H,this.Xe),d[3]=new p.Od(this.C,this.G,this.Xe),d[4]=new p.Od(this.v,this.G,this.Dg),d[5]=new p.Od(this.v,this.H,this.Dg),d[6]=new p.Od(this.C,this.H,this.Dg),d[7]=new p.Od(this.C,this.G,this.Dg)},x.prototype.bx=function(d){if(d==null||d.length==0)this.Pa();else{var l=d[0];for(this.L(l.x,l.y,l.z),l=1;l<d.length;l++){var n=d[l];this.Nk(n.x,n.y,n.z)}}},x}();p.JK=P}(Q||(Q={})),function(p){(function(P){P.Ra=function(){var x=Error();return x.message="Internal Error",x},P.Fe=function(){var x=Error();return x.message="Not Implemented",x},P.Zk=function(){var x=Error();return x.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",x},P.Hb=function(){var x=Error();return x.message="Invalid Call",x},P.O=function(x){var d=Error();return d.message="Illegal Argument Exception",x!==void 0&&(d.message+=": "+x),d},P.hu=function(x){var d=Error();return d.message=x!==void 0?"Runtime Exception: "+x:"Runtime Exception.",d},P.ga=function(x){var d=Error();return d.message="Geometry Exception: "+x,d},P.BK=function(){var x=Error();return x.message="Assert Failed Exception",x},P.de=function(){var x=Error();return x.message="IndexOutOfBoundsException",x},P.RC=function(){var x=Error();return x.message="UserCancelException",x}})(p.i||(p.i={}))}(Q||(Q={})),function(p){(p=p.dm||(p.dm={}))[p.forward=0]="forward",p[p.reverse=1]="reverse"}(Q||(Q={})),function(p){var P=function(){function l(n,a){this.Xa=n,this.AH=a,this.GH=-1,this.ul=!1}return l.prototype.re=function(){},l.prototype.next=function(){if(++this.GH==this.AH.I())return null;var n=this.AH.Oa(this.GH);n.scale(this.Xa.fc);var a=new p.Ea;return this.Xa.ny(n,this.ul,a),a},l.prototype.Ma=function(){return 0},l}(),x=function(){function l(n,a,h){this.Xa=n,this.tw=a,this.Zn=!1,this.fo=h,this.dw=[0],this.uk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new p.Ea,this.wk=[]}return l.prototype.re=function(){},l.prototype.next=function(){if(this.Zn){this.Zn=!1,this.td.ia();var n=p.ba.kg(this.sq);return p.Hg.Ok(n,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.fo!=null&&this.fo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.fo!=null&&this.fo.$k(null,0)}n=null,this.uk[0]=0,this.AA=this.dw[0]=0,this.fi=NaN,this.Zn=!1;for(var a=this.wk.length=0,h=new p.h,f=new p.h,m=[0];this.td.Ia()&&8>this.AA;){var y=this.td.ia();if(h.N(y.bc()),f.N(y.xc()),h.scale(this.Xa.fc),f.scale(this.Xa.fc),p.ej.Ou(h,f)?h.x=f.x:p.ej.Mu(h,f)&&(f.x=h.x),this.wk.length=0,p.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,h,f,this.Xa.LA,this.Xa.at,m,this.Pj,this.Is,this.wk,this.dw),this.fo!=null&&(y=this.wk.slice(0),this.fo.lG(this.fo.ea()-1,y,y.length-1)),p.ej.Nu(h,f)?(this.sq.Pa(),this.Xa.ny(h,this.ul,this.sq),this.Zn=!0):(this.sq.Pa(),this.Zn=this.sy(m[0],this.sq)),this.Zn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.xW();break}n==null&&(n=new p.Ea).$k(null,0),this.JD(n),a++}if(this.dw[0]=0,0<a){for(m=this.td.xb();0<a;)this.td.ni(),h.N(this.tw.Oa(this.td.xb())),f.N(this.tw.Oa(this.td.kk())),h.scale(this.Xa.fc),f.scale(this.Xa.fc),this.ul&&(p.ej.Ou(h,f)?h.x=f.x:p.ej.Mu(h,f)&&(f.x=h.x)),this.wk.length=0,p.ej.oF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,f,h,this.Xa.LA,this.Xa.at,null,this.Pj,this.Is,this.wk,this.dw),this.JD(n),a--;return h.N(this.tw.Oa(this.td.xb())),h.scale(this.Xa.fc),d.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,h,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.co,this.ul,this.uk,n,NaN,NaN),this.td.Wb(m),this.td.ia(),a=p.ua.mj(null,n,!0),p.Hg.Ok(n,a,!0,!0,this.Xa.Vb)}return this.Zn=!1,this.td.ia(),n=p.ba.kg(this.sq),p.Hg.Ok(n,this.Xa.Cq,!0,!0,this.Xa.Vb)},l.prototype.JD=function(n){var a=this.wk[0],h=this.Pj[0]-1.570796326794897,f=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var m=this.fi+1.570796326794897;h=m+3.141592653589793-(this.fi-this.Pj[0])}else h=(m=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var y=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),w=!1;if(Math.abs(h-m)<=.5*this.Xa.co)if(y){var I=n.Oa(n.I()-2);I.scale(this.Xa.fc);var M=new p.ha(0);for(p.kb.Sy(this.Xa.Ub,this.Xa.lc,a.x,a.y,I.x,I.y,M),I=M.u;I<=m;)I+=6.283185307179586;for(;I>m;)I-=6.283185307179586;I<h&&(w=!0)}else w=!0;w?(n.yB(0,n.I()-1),this.ul||((a=new p.h).N(n.Oa(n.I()-1)),a.scale(this.Xa.fc),-3.141592653589793>a.x-this.uk[0]?this.uk[0]-=6.283185307179586:3.141592653589793<a.x-this.uk[0]&&(this.uk[0]+=6.283185307179586)),y||(h=.5*(h+m))):(y?((m=new p.h).N(a),m.scale(1/this.Xa.fc),n.xf(0,-1,m)):d.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.wk[0],m,h,this.Xa.co,this.ul,this.uk,n,NaN,NaN),this.AA+=1)}d.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.wk,h,f,this.ul,this.uk,n),this.fi=this.Is[0]},l.prototype.sy=function(n,a){return this.Xa.sy(this.wk,n,this.Pj[0],this.Is[0],this.ul,a)},l.prototype.Ma=function(){return 0},l}(),d=function(){function l(){}return l.buffer=function(n,a,h,f,m,y){if(n==null)throw p.i.O("Geometry::Geodesic_bufferer::buffer");if(n.B())return new p.Ea(n.description);var w=new l;w.Sg=a,w.Kc=p.cb.tc(a);var I=p.cb.xv(w.Kc);if(w.Vb=y,w.Ub=p.cb.gv(w.Kc),w.lc=I*(2-I),w.fc=w.Kc.Id().ci,w.ra=w.Sg.Mn(),w.Cq=w.Kc.Mn(),w.at=w.Cq*w.fc,w.Bq=1.570796326794897/w.fc,w.KY=3.141592653589793/w.fc,w.Ls=6.283185307179586/w.fc,w.LY=w.Ls/6,w.GA=0,w.JY=1.5707963267948966*w.Ub/w.GA,h==4?(w.Ae=2,w.Yv=!0):(w.Ae=h,w.Yv=!1),w.La=f,w.sb=Math.abs(f),isNaN(m)||.001>m?w.tX():w.bo=m,h=n.K(),p.ba.zd(h)?((h=new p.Ua(n.description)).pc(n,!0),n=h,h=1607):h==197&&(h=new p.l,n.A(h),h.S()<=w.ra||h.da()<=w.ra?((h=new p.Ua(n.description)).bd(n,!1),n=h,h=1607):((h=new p.Ea(n.description)).bd(n,!1),n=h,h=1736)),w.uX(),p.ba.Tn(h)||w.vX(),w.sb<=.5*w.bo)return h!=1736?new p.Ea(n.description):w.Yv?n:p.ej.Sr(n,w.Sg,w.Ae,w.LA,-1,y);if(0>w.La&&h!=1736)return new p.Ea(n.description);if(w.Yv&&p.ba.Ic(h)?(a=p.ej.Sr(n,a,4,NaN,w.bo,y),n=p.cb.Bh(a,w.Sg,w.Kc)):n=p.cb.Bh(n,w.Sg,w.Kc),(n=p.Jh.nj(n,w.Kc)).B())return new p.Ea(n.description);switch(!w.Yv&&p.ba.Ic(h)&&(n=p.ej.kI(w.fc,n)),n=l.GX(n,w.Kc),h){case 1736:a=w.PN(n);break;case 1607:a=w.QN(n);break;case 550:a=w.NN(n);break;case 33:a=w.ON(n);break;default:throw p.i.ga("corrupted_geometry")}return(w=p.cb.Bh(a,w.Kc,w.Sg)).Ll(n.description),w},l.prototype.PN=function(n){var a=new p.Ea;n=new x(this,n,a),n=p.Ih.local().W(n,this.Kc,this.Vb).next(),n=p.kp.pj(n,this.Kc,2);var h=new p.Ed;return h.scale(1/this.fc,1/this.fc),a.Pc(h),a=p.kp.pj(a,this.Kc,2),0<=this.La?p.Ih.local().W(a,n,this.Kc,this.Vb):p.mp.local().W(a,n,this.Kc,this.Vb)},l.prototype.QN=function(n){return n=new x(this,n,null),n=p.Ih.local().W(n,this.Kc,this.Vb).next(),p.kp.pj(n,this.Kc,2)},l.prototype.NN=function(n){return n=new P(this,n),n=p.Ih.local().W(n,this.Kc,this.Vb).next(),p.kp.pj(n,this.Kc,2)},l.prototype.ON=function(n){(n=n.D()).scale(this.fc);var a=new p.Ea;return this.ny(n,!1,a),p.kp.pj(a,this.Kc,2)},l.prototype.sy=function(n,a,h,f,m,y){var w=n[0],I=n[n.length-1],M=w.y>I.y?w.y:I.y,T=p.F.q(this.Ub,this.lc,w.y<I.y?w.y:I.y);if(M=p.F.q(this.Ub,this.lc,M),.001<this.GA-(T+a+this.sb)&&.001<this.GA+(M-a-this.sb))return!1;T=(a=h-1.570796326794897)-3.141592653589793,M=a+3.141592653589793;var $=(h=f+1.570796326794897)+3.141592653589793,F=[NaN],R=[NaN],j=[NaN],H=[NaN];if(f=!1,l.ZI(this.Ub,this.lc,this.sb,w,a,T,I,h,F,R),l.ZI(this.Ub,this.lc,this.sb,I,$,h,w,T,j,H),(h<F[0]&&F[0]<$||h<R[0]&&R[0]<$)&&(f=!0),f||(T<j[0]&&j[0]<a||T<H[0]&&H[0]<a)&&(f=!0),!f&&m)return!1;for(var W=[],V=n.length-1;0<=V;V--)W.push(n[V]);return y.Pa(),y.$k(null,0),V=[0],l.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,n,a,h,m,V,y),l.Jr(this.Ub,this.lc,this.fc,this.sb,I,h,$,this.co,m,V,y,F[0],R[0]),l.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,W,$,M,m,V,y),l.Jr(this.Ub,this.lc,this.fc,this.sb,w,T,a,this.co,m,V,y,j[0],H[0]),n=!1,m||(n=this.DE(this.fc,y)),f||n},l.prototype.ny=function(n,a,h){h.Pa(),h.$k(null,0),l.Jr(this.Ub,this.lc,this.fc,this.sb,n,-this.co,6.283185307179586,this.co,a,[0],h,NaN,NaN),a||this.DE(this.fc,h)},l.prototype.DE=function(n,a){var h=this.qO(n,a);return n=this.rO(n,a),h||n},l.prototype.qO=function(n,a){var h=a.I(),f=!1,m=new p.l;if(a.A(m),!p.s.$(m.H*n,1.570796326794897)&&!p.s.$(m.G*n,-1.570796326794897))return!1;var y=new p.h;for(--h;0<=h;h--)a.D(h,y),(y.y==m.H&&p.s.$(y.y*n,1.570796326794897)||y.y==m.G&&p.s.$(y.y*n,-1.570796326794897))&&(f=!0,this.JI(y,h,a));return f},l.prototype.rO=function(n,a){var h=a.Oa(0),f=a.Oa(a.I()-1);return 3.141592653589793<Math.abs(h.x-f.x)*n?(this.QV(a),!0):this.pO(a)},l.prototype.pO=function(n){return 0>n.He()&&(this.PV(n),!0)},l.prototype.JI=function(n,a,h){var f=h.I(),m=0<a?a-1:f-1;if(f=h.Oa(a<f-1?a+1:0),m=h.Oa(m),!p.s.$(f.y,n.y)&&!p.s.$(f.x,n.x)){var y=new p.h;y.na(f.x,n.y),h.Db(a,y)}p.s.$(m.y,n.y)||p.s.$(m.x,n.x)||((f=new p.h).na(m.x,n.y),h.xf(0,a,f))},l.prototype.QV=function(n){var a=new p.Ea,h=new p.Ea,f=new p.Ed,m=n.Oa(0),y=n.Oa(n.I()-1),w=new p.h;m.x>y.x?(y=this.Bq,f.ig(-this.Ls,0)):(y=-this.Bq,f.ig(this.Ls,0)),a.add(n,!1),n.Pa(),h.add(a,!1),h.Pc(f),m=new p.l,h.A(m),m.X((this.Ls-m.S())/2,0),m.G=-this.Bq,m.H=this.Bq;for(var I=0;I<h.I();I++)h.D(I,w),a.xf(0,-1,w);for(h.Pc(f),I=0;I<h.I();I++)h.D(I,w),a.xf(0,-1,w);h=a.Oa(0),f=a.Oa(a.I()-1),w.na(f.x,y),a.xf(0,-1,w),w.na(.5*(f.x+h.x),y),a.xf(0,-1,w),w.na(h.x,y),a.xf(0,-1,w),a=p.Jh.ms(a,this.Kc,2,!0,m.v),a=p.Jh.ms(a,this.Kc,2,!0,m.C),a=p.Vd.clip(a,m,this.Cq,NaN),n.add(a,!1)},l.prototype.PV=function(n){var a=new p.l;n.A(a),a.X((this.Ls-a.S())/2,0),a.G=-this.Bq,a.H=this.Bq,n.$k(null,0);var h=new p.h;h.na(a.v,a.G),n.xf(1,-1,h),h.na(a.v,a.H),n.xf(1,-1,h),h.na(.5*(a.v+a.C),a.H),n.xf(1,-1,h),h.na(a.C,a.H),n.xf(1,-1,h),h.na(a.C,a.G),n.xf(1,-1,h),h.na(.5*(a.v+a.C),a.G),n.xf(1,-1,h)},l.my=function(n,a,h,f,m,y,w,I,M,T,$){var F=null;M||((F=new p.h).Sc(),0<$.I()&&(F.N($.Oa($.I()-1)),F.scale(h)));var R=new p.ha(0),j=new p.ha(0),H=new p.ha(0),W=new p.h,V=new p.h,Y=y[y.length-1];h=1/h;for(var se=0;se<y.length;se++){var re=y[se];if(se==0)var he=w;else se==y.length-1?he=I:(p.kb.xd(n,a,Y.x,Y.y,re.x,re.y,null,null,R,m),he=R.u-1.570796326794897);p.kb.Ai(n,a,re.x,re.y,f,he,j,H),M?V.na(j.u,H.u):(W.na(j.u,H.u),l.bJ(re.x,W.x,F.x,T),V.na(T[0]+W.x,W.y),F.N(V)),V.scale(h),$.xf(0,-1,V)}},l.Jr=function(n,a,h,f,m,y,w,I,M,T,$,F,R){if(!(w-y<I)){var j=new p.ha(0),H=new p.ha(0),W=new p.h,V=new p.h,Y=null;M||((Y=new p.h).Sc(),0<$.I()&&(Y.N($.Oa($.I()-1)),Y.scale(h)));var se=p.P.truncate(Math.ceil(y/I)),re=se++*I;for(re==y&&(re=se++*I),h=1/h;re<w+I&&(y<F&&F<re?(re=F,se--):y<R&&R<re&&(re=R,se--),!(re>=w));)p.kb.Ai(n,a,m.x,m.y,f,re,j,H),M?V.na(j.u,H.u):(W.na(j.u,H.u),l.bJ(m.x,W.x,Y.x,T),V.na(T[0]+W.x,W.y),Y.N(V)),V.scale(h),$.xf(0,-1,V),y=re,re=se++*I}},l.ZI=function(n,a,h,f,m,y,w,I,M,T){var $=new p.h,F=new p.h,R=new p.ha(0),j=new p.ha(0);for(p.kb.Ai(n,a,f.x,f.y,h,m,R,j),$.na(R.u,j.u),p.kb.Ai(n,a,f.x,f.y,h,y,R,j),F.na(R.u,j.u),h=new p.ha(0),p.kb.Sy(n,a,w.x,w.y,$.x,$.y,h),M[0]=h.u,p.kb.Sy(n,a,w.x,w.y,F.x,F.y,h),T[0]=h.u;M[0]<=T[0];)M[0]+=6.283185307179586;for(;M[0]>T[0];)M[0]-=6.283185307179586;for(;M[0]>=I;)M[0]-=6.283185307179586,T[0]-=6.283185307179586;for(;M[0]<I;)M[0]+=6.283185307179586,T[0]+=6.283185307179586},l.bJ=function(n,a,h,f){if(isNaN(h)){for(;3.141592653589793<f[0]+a-n;)f[0]-=6.283185307179586;for(;3.141592653589793<n-(f[0]+a);)f[0]+=6.283185307179586}else 3.141592653589793<f[0]+a-h?f[0]-=6.283185307179586:3.141592653589793<h-(f[0]+a)&&(f[0]+=6.283185307179586)},l.GX=function(n,a){var h=n.K(),f=p.ba.Ic(h)?n.ea():h==550?n.I():1;if(f==1)return n;var m=new p.ja(0);m.resize(f);for(var y=[],w=new p.l,I=0;I<f;I++){if(m.write(I,I),p.ba.Ic(h)){n.Tj(I,w);var M=w.tf()}else M=n.Oa(I);M=p.SK.WX(a,M),y[I]=M}for(m.Wd(0,m.size,function(T,$){return y[T]<y[$]?-1:y[T]>y[$]?1:0}),a=n.Ja(),I=0;I<f;I++)w=m.read(I),p.ba.Ic(h)?a.addPath(n,w,!0):a.Gd(n,w,w+1);return a},l.prototype.uX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var a=new p.h;a.na(0,10*this.fc);var h=45*this.fc,f=new p.ha(0),m=new p.ha(0),y=new p.ha(0),w=new p.ha(0),I=new p.ha(0),M=new p.ha(0),T=new p.ha(0),$=new p.ha(0),F=new p.h,R=new p.h,j=new p.h,H=new p.h;p.kb.Ai(this.Ub,this.lc,a.x,a.y,n,0,f,m),F.na(f.u,m.u),p.kb.Ai(this.Ub,this.lc,a.x,a.y,n,h,y,w),R.na(y.u,w.u),f=new p.ha(0),m=new p.ha(0);for(var W=new p.ha(0);p.kb.Ai(this.Ub,this.lc,a.x,a.y,n,.5*(0+h),I,M),j.na(I.u,M.u),p.kb.xd(this.Ub,this.lc,F.x,F.y,R.x,R.y,f,m,null,2),p.kb.qj(this.Ub,this.lc,F.x,F.y,.5*f.u,m.u,T,$,2),H.na(T.u,$.u),p.kb.xd(this.Ub,this.lc,j.x,j.y,H.x,H.y,W,null,null,2),!(W.u<=this.bo);)h*=.9,p.kb.Ai(this.Ub,this.lc,a.x,a.y,n,h,y,w),R.na(y.u,w.u);this.co=6.283185307179586/Math.ceil(6.283185307179586/(h-0))},l.prototype.vX=function(){var n=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);n=Math.min(n,.39269908169872414*this.Ub);var a=new p.h,h=new p.h;a.na(0,10*this.fc),h.na(10*this.fc,10*this.fc);var f=new p.ha(0),m=new p.ha(0),y=new p.ha(0);p.kb.xd(this.Ub,this.lc,a.x,a.y,h.x,h.y,y,f,m,this.Ae);var w=new p.ha(0),I=new p.ha(0),M=new p.ha(0),T=new p.ha(0),$=new p.h,F=new p.ha(0),R=new p.ha(0),j=new p.ha(0),H=new p.ha(0),W=new p.ha(0),V=new p.ha(0),Y=new p.ha(0),se=new p.ha(0),re=new p.ha(0),he=new p.h,ue=new p.h,we=new p.h,Te=new p.h,Ee=1;f=f.u,m=m.u+1.570796326794897,y=y.u,p.kb.Ai(this.Ub,this.lc,a.x,a.y,n,f-1.570796326794897,R,j),he.na(R.u,j.u),p.kb.Ai(this.Ub,this.lc,h.x,h.y,n,m,H,W),ue.na(H.u,W.u),R=new p.ha(0),j=new p.ha(0),m=new p.ha(0);for(var He=new p.ha(0);p.kb.qj(this.Ub,this.lc,a.x,a.y,.5*(0+Ee)*y,f,w,I,this.Ae),$.na(w.u,I.u),p.kb.xd(this.Ub,this.lc,a.x,a.y,$.x,$.y,null,null,F,this.Ae),p.kb.Ai(this.Ub,this.lc,$.x,$.y,n,F.u+1.570796326794897,V,Y),we.na(V.u,Y.u),p.kb.xd(this.Ub,this.lc,he.x,he.y,ue.x,ue.y,R,j,null,2),p.kb.qj(this.Ub,this.lc,he.x,he.y,.5*R.u,j.u,se,re,2),Te.na(se.u,re.u),p.kb.xd(this.Ub,this.lc,we.x,we.y,Te.x,Te.y,m,null,null,2),!(m.u<=this.bo);)Ee*=.9,p.kb.qj(this.Ub,this.lc,a.x,a.y,Ee*y,f,M,T,this.Ae),h.na(M.u,T.u),p.kb.xd(this.Ub,this.lc,a.x,a.y,h.x,h.y,null,null,He,this.Ae),p.kb.Ai(this.Ub,this.lc,h.x,h.y,n,He.u+1.570796326794897,H,W),ue.na(H.u,W.u);1e5<(n=Ee*y)&&(n=1e5),this.LA=n},l.prototype.tX=function(){var n=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/n&&(n=this.sb/500),.01>n&&(n=.01),this.bo=n},l}();p.QK=d}(Q||(Q={})),function(p){var P=function(){function x(){}return x.Of=function(d,l){var n=new p.h;n.N(l),d.push(n)},x.wp=function(d,l){d.add(l.x),d.add(l.y)},x.cB=function(d){d.Dh(d.size-2)},x.jB=function(d,l){l.na(d.get(d.size-2),d.get(d.size-1))},x.Sr=function(d,l,n,a,h,f){if(d==null)throw p.i.O();var m=d.K();if(d.B()||p.ba.Tn(m))return d;var y=new x;y.Sg=l,y.Kc=p.cb.tc(l);var w=p.cb.xv(y.Kc);if(y.Vb=f,y.Ub=p.cb.gv(y.Kc),y.lc=w*(2-w),y.fc=y.Kc.Id().ci,y.Cq=y.Kc.Mn(),y.at=y.Cq*y.fc,y.vA=a,y.uA=h,y.Ae=n,m==197?(n=new p.Ea(d.description)).bd(d,!1):p.ba.zd(m)?(n=new p.Ua(d.description)).pc(d,!0):n=d,y.Ae!=4){if((l=y.Sg.Nb(y.Kc)==0?p.cb.Bh(n,y.Sg,y.Kc):p.Jh.nj(n,y.Kc)).B())return l;l=x.kI(y.fc,l),l=y.Uy(l),l=p.kp.pj(l,y.Kc,y.Ae),y=p.cb.Bh(l,y.Kc,y.Sg)}else{if(p.Gg.Tb(l)==2?(d=p.cb.ol(),(l=p.Zj.local().W(n,d,l,f))==d&&(l=new p.Ea,d.copyTo(l))):l=p.Jh.nj(n,y.Kc),l.B())return l;y=y.yX(l)}return y},x.kI=function(d,l){var n=new p.l;if(l.yc(n),3.141592653589793>n.S()*d)return l;var a=!1;n=l.Ha();for(var h=new p.h,f=new p.h;n.ab();)for(;n.Ia();){var m=n.ia();if(h.N(m.bc()),f.N(m.xc()),h.scale(d),f.scale(d),3.141592653589793<Math.abs(h.x-f.x)){var y=x.Nu(h,f);if(!y){a=!0;break}if(6.283185307179586<Math.abs(h.x-f.x)){a=!0;break}}}if(!a)return l;a=l.Ja();var w=1<l.description.Ba,I=new p.h,M=new p.h,T=new p.h,$=new p.h,F=new p.Ta;for(n.aj();n.ab();)for(var R=NaN,j=[0];n.Ia();){if(m=n.ia(),h.N(m.bc()),f.N(m.xc()),h.scale(d),f.scale(d),isNaN(R)?(x.Yi(h.x,NaN,j),M.N(h)):M.N(T),R=M.x,y=x.Nu(h,f)){if(6.283185307179586<f.x-h.x)for(;6.283185307179586<f.x-h.x;)f.x-=6.283185307179586;if(-6.283185307179586>f.x-h.x)for(;-6.283185307179586>f.x-h.x;)f.x+=6.283185307179586;x.Yi(f.x,NaN,j),T.N(f)}else I.N(f),x.vU(I),x.Yi(I.x,R,j),T.na(j[0]+I.x,I.y);.5>Math.abs(T.x-f.x)&&T.N(f),w?(m.Vw(0,F),$.N(M),$.scale(1/d),F.Db($),(y=n.xm())?a.nf(F):a.lineTo(F),n.Sn()&&!l.ec(n.gb)&&(m.Vw(1,F),$.N(T),$.scale(1/d),F.Db($),a.lineTo(F))):((y=n.xm())&&a.Cz(null,0),m=a.ea()-1,$.N(M),$.scale(1/d),a.xf(m,-1,$),n.Sn()&&!l.ec(n.gb)&&($.N(T),$.scale(1/d),a.xf(m,-1,$)))}return a},x.oF=function(d,l,n,a,h,f,m,y,w,I,M,T){var $=new p.h,F=new p.h,R=0<a.compare(h);x.aJ(R,a,h,$,F),x.pF(d,l,n,$,F,f,NaN,m,y,w,I,null,M,T),R&&x.aC(w,I,null,M)},x.prototype.Uy=function(d){var l=d.Ja(),n=d.Ha(),a=[],h=null,f=null,m=1<d.description.Ba;m&&(h=new p.ce(0),f=new p.jg);for(var y=[0],w=new p.h,I=new p.h,M=new p.h,T=new p.h;n.ab();)for(y[0]=0;n.Ia();){var $=n.ia();w.N($.bc()),I.N($.xc()),w.scale(this.fc),I.scale(this.fc);var F=0<w.compare(I);x.aJ(F,w,I,M,T),a.length=0,h!=null&&h.Dh(0),0<this.vA?x.pF(this.Ub,this.lc,this.Ae,M,T,this.vA,this.uA,this.at,null,null,null,m?h:null,a,y):x.WQ(this.Ub,this.lc,this.Ae,M,T,this.uA,this.at,m?h:null,a,y),F&&x.aC(null,null,m?h:null,a),a[0].N($.bc()),a[a.length-1].N($.xc());for(var R=1;R<a.length-1;R++)a[R].scale(1/this.fc);m?(F=x.$I(F,$,f),x.OD(n.xm(),n.Sn()&&!d.ec(n.gb),$,F,h,a,l)):x.ND(n.xm(),n.Sn()&&!d.ec(n.gb),a,l)}return l},x.prototype.yX=function(d){var l=d.Ja(),n=d.Ha(),a=[],h=null,f=new p.jg,m=1<d.description.Ba;for(m&&(h=new p.ce(0));n.ab();)for(;n.Ia();){var y=n.ia(),w=y.bc(),I=y.xc();w=0<w.compare(I),I=x.$I(w,y,f),a.length=0,h!=null&&h.Dh(0),x.xX(this.Ub,this.lc,this.fc,I,this.Sg,this.vA,this.uA,m?h:null,a),w&&x.aC(null,null,m?h:null,a),m?x.OD(n.xm(),n.Sn()&&!d.ec(n.gb),y,I,h,a,l):x.ND(n.xm(),n.Sn()&&!d.ec(n.gb),a,l)}return l},x.ND=function(d,l,n,a){d&&a.Cz(null,0),d=a.ea()-1;var h=n.slice(0);a.lG(d,h,h.length-1),l&&a.xf(d,-1,n[n.length-1])},x.OD=function(d,l,n,a,h,f,m){var y=new p.Ta;if(n.Vo(y),d?m.nf(y):m.lineTo(y),2<f.length){d=a.Rb();for(var w=1;w<f.length-1;w++){var I=a.IG(h.get(w)*d);a.Vw(I,y),y.Db(f[w]),m.lineTo(y)}}l&&(n.Ro(y),m.lineTo(y))},x.pF=function(d,l,n,a,h,f,m,y,w,I,M,T,$,F){var R=new p.ha(0),j=new p.ha(0),H=new p.ha(0);p.kb.xd(d,l,a.x,a.y,h.x,h.y,H,R,j,n),H=H.u;var W=R=R.u;0>W&&(W+=6.283185307179586),0>(j=j.u)&&(j+=6.283185307179586),w!=null&&(w[0]=H),I!=null&&(I[0]=W),M!=null&&(M[0]=j),I=w=NaN,T!=null&&(w=((I=p.F.Ch(d,l))-(M=p.F.q(d,l,a.y)))/H,I=(I+M)/H),M=x.Ou(a,h),j=x.Mu(a,h),W=M||j;var V=x.AE(a,h,y),Y=new p.ha(0),se=new p.ha(0),re=new p.h,he=new p.h,ue=new p.h;x.Yi(a.x,NaN,F);var we=[F[0]];if(H<=f)x.Of($,a),x.Yi(h.x,NaN,F),T!=null&&T.add(0),W?(M&&x.fB(a,h,T,$),j&&x.dB(a,h,T,$)):V?x.eB(a,h,R,w,I,T,$):0<m&&(he.na(a.x-we[0],a.y),re.na(h.x-F[0],h.y),x.Ty(d,l,n,a,H,R,he,re,0,1,m,T,$,we)),x.Of($,h);else{var Te=H/((f=1+p.P.truncate(Math.ceil(H/f)))-1),Ee=new p.h,He=0;x.Of($,a),Ee.N(a),he.na(a.x-F[0],a.y),T!=null&&T.add(0);for(var Pe=1;Pe<f;Pe++){if(Pe<f-1){p.kb.qj(d,l,a.x,a.y,Pe*Te,R,Y,se,n),re.na(Y.u,se.u),x.Yi(re.x,Ee.x,F),ue.na(F[0]+re.x,re.y);var lt=Pe/(f-1)}else x.Yi(h.x,NaN,F),re.na(h.x-F[0],h.y),ue.N(h),lt=1;W?(Pe==1&&M&&x.fB(a,ue,T,$),Pe==f-1&&j&&x.dB(Ee,h,T,$)):V?x.zE(Ee,ue,y)&&(a.x<h.x?Ee.x>ue.x&&(F[0]+=6.283185307179586,ue.na(F[0]+re.x,re.y)):Ee.x<ue.x&&(F[0]-=6.283185307179586,ue.na(F[0]+re.x,re.y)),x.eB(Ee,ue,R,w,I,T,$)):0<m&&x.Ty(d,l,n,a,H,R,he,re,He,lt,m,T,$,we),x.Of($,ue),T!=null&&T.add(lt),Ee.N(ue),he.N(re),we[0]=F[0],He=lt}}},x.WQ=function(d,l,n,a,h,f,m,y,w,I){var M=new p.ha(0),T=new p.ha(0),$=new p.ha(0);p.kb.xd(d,l,a.x,a.y,h.x,h.y,$,M,T,n),T=$.u,M=M.u;var F=$=NaN;if(y!=null){F=p.F.Ch(d,l);var R=p.F.q(d,l,a.y);$=(F-R)/T,F=(F+R)/T}R=x.Ou(a,h);var j=x.Mu(a,h),H=R||j;m=x.AE(a,h,m);var W=x.Nu(a,h);W=H||m||W,x.Yi(a.x,NaN,I);var V=new p.h;x.Of(w,a),V.N(a),y!=null&&y.add(0),W?(H?(R&&x.fB(a,h,y,w),j&&x.dB(a,h,y,w)):m&&x.eB(a,h,M,$,F,y,w),x.Yi(h.x,NaN,I),x.Of(w,h)):T<=f?(x.Yi(h.x,NaN,I),x.Of(w,h)):($=new p.h,m=new p.h,$.N(a),m.N(h),$.x-=I[0],m.x-=I[0],-3.141592653589793>m.x?m.x+=6.283185307179586:3.141592653589793<m.x&&(m.x-=6.283185307179586),x.Ty(d,l,n,a,T,M,$,m,0,1,f,y,w,I),x.Of(w,h),x.Yi(h.x,NaN,I)),y!=null&&y.add(1)},x.Ty=function(d,l,n,a,h,f,m,y,w,I,M,T,$,F){var R=new p.h,j=new p.h;R.na(m.x+F[0],m.y),new p.ha(0),new p.ha(0),new p.ha(0),new p.ha(0);var H=new p.ha(0),W=new p.ha(0),V=new p.ha(0),Y=new p.h,se=new p.h,re=new p.h,he=new p.h;Y.N(m),se.N(y),m=new p.ce(0),y=new p.ce(0),x.wp(m,se),y.add(I);var ue=new p.h,we=new p.zb,Te=[];for(x.TJ(4,Te);0<m.size;){for(var Ee,He=!1,Pe=NaN,lt=0;3>lt;lt++)if(Ee=Te[lt]*I+(1-Te[lt])*w,p.kb.qj(d,l,a.x,a.y,Ee*h,f,H,W,n),re.na(H.u,W.u),lt==0&&(Pe=Ee,he.N(re)),x.RW(Y,re,se,we),we.ic(we.ge(re,!0),ue),p.kb.xd(d,l,re.x,re.y,ue.x,ue.y,V,null,null,2),V.u>M){He=!0;break}He?(se.N(he),I=Pe,x.wp(m,se),y.add(I)):(x.cB(m),y.Gn(y.size-1,1,y.size-1),0<m.size&&(x.Yi(se.x,R.x,F),j.na(F[0]+se.x,se.y),x.Of($,j),R.N(j),T!=null&&T.add(I),Y.N(se),w=I,x.jB(m,se),I=y.get(y.size-1)))}},x.xX=function(d,l,n,a,h,f,m,y,w){var I=new p.h,M=new p.h,T=new p.h,$=new p.h,F=new p.h,R=new p.h,j=new p.h,H=new p.h,W=new p.h,V=new p.h,Y=new p.ha(0),se=new p.ha(0),re=new p.h,he=[[],[]],ue=p.Gg.Tb(h)==1;h=h.Yd(0);var we=a.bc(),Te=a.xc();ue?(R.na(we.x*n,we.y*n),j.na(Te.x*n,Te.y*n)):(he[0][0]=we.x,he[0][1]=we.y,he[1][0]=Te.x,he[1][1]=Te.y,p.cb.wt(),R.x=he[0][0]*n,R.y=he[0][1]*n,j.x=he[1][0]*n,j.y=he[1][1]*n);var Ee=0,He=0,Pe=1,lt=a.Rn();I.N(we),M.N(Te),Te=new p.ce(0);var et=new p.ce(0),Ve=new p.ce(0);x.wp(Te,M),x.wp(et,j),Ve.add(Pe),x.Of(w,I),y!=null&&y.add(He);var Zt=[],Ji=0<m?lt?5:3:lt?5:1;x.TJ(Ji,Zt);for(var ci=new p.ha(0),Pt=new p.ha(0),Ft=new p.ha(0),vt=new p.ha(0),bi=new p.ha(0),ft=new p.ha(0),an=new p.ha(0);0<et.size;){var Mt=!1,Gr=NaN;for(p.kb.xd(d,l,R.x,R.y,j.x,j.y,ci,Pt,null,2),we=0;we<Ji&&!(we==0&&(!lt&&0>=m&&ci.u<=f&&3.141592653589793>Math.abs(R.x-j.x)||a.Tx(He,Pe)<=h));we++){var zt=Zt[we]*Pe+(1-Zt[we])*He;if(a.ic(zt,T),ue?H.na(T.x*n,T.y*n):(he[0][0]=T.x,he[0][1]=T.y,p.cb.wt(),H.x=he[0][0]*n,H.y=he[0][1]*n),we==0&&(Gr=zt,F.N(T),V.N(H),0<f&&(ci.u>f||3.141592653589793<=Math.abs(R.x-j.x)))){Mt=!0;break}if(lt&&0<f){if(p.kb.xd(d,l,R.x,R.y,H.x,H.y,Ft,null,null,2),Ft.u>f||3.141592653589793<=Math.abs(R.x-H.x)){Mt=!0;break}}else if(0<m){if(lt?($.IS(I,M,Zt[we]),ue?W.na($.x*n,$.y*n):(he[0][0]=$.x,he[0][1]=$.y,p.cb.wt(),W.x=he[0][0]*n,W.y=he[0][1]*n)):($.N(T),W.N(H)),p.kb.xd(d,l,R.x,R.y,W.x,W.y,vt,null,null,2),!(vt.u<=ci.u)){Mt=!0;break}if(p.kb.qj(d,l,R.x,R.y,vt.u,Pt.u,Y,se,2),re.na(Y.u,se.u),p.kb.xd(d,l,re.x,re.y,H.x,H.y,bi,null,null,2),bi.u>m){Mt=!0;break}if(lt){if(p.kb.xd(d,l,re.x,re.y,W.x,W.y,ft,null,null,2),ft.u>m){Mt=!0;break}if(p.kb.xd(d,l,W.x,W.y,H.x,H.y,an,null,null,2),an.u>m){Mt=!0;break}}}}Mt?(M.N(F),j.N(V),Pe=Gr,x.wp(Te,M),x.wp(et,j),Ve.add(Pe)):(x.cB(Te),x.cB(et),Ve.Gn(Ve.size-1,1,Ve.size-1),x.Of(w,M),Ee+=ci.u,y!=null&&y.add(Ee),0<et.size&&(I.N(M),R.N(j),He=Pe,x.jB(Te,M),x.jB(et,j),Pe=Ve.get(Ve.size-1)))}if(y!=null)for(d=1/Ee,we=0;we<y.size;we++)y.write(we,y.read(we)*d)},x.aC=function(d,l,n,a){a.reverse(),n!=null&&n.pi(0,n.size,1),n=d!=null?d[0]:NaN,a=l!=null?l[0]:NaN,d!=null&&(d[0]=a),l!=null&&(l[0]=n)},x.aJ=function(d,l,n,a,h){d?(a.N(n),h.N(l)):(a.N(l),h.N(n))},x.$I=function(d,l,n){return d?(n.create(l.K()),l.copyTo(n.get()),n.get().reverse(),n.get()):l},x.Yi=function(d,l,n){if(isNaN(l)){for(;3.141592653589793<n[0]-d;)n[0]-=6.283185307179586;for(;3.141592653589793<d-n[0];)n[0]+=6.283185307179586}else 3.141592653589793<n[0]+d-l?n[0]-=6.283185307179586:3.141592653589793<l-(n[0]+d)&&(n[0]+=6.283185307179586)},x.RW=function(d,l,n,a){3.141592653589793>Math.abs(l.x-d.x)?(a.Ec(d),3.141592653589793<=n.x-d.x?a.Sl(n.x-6.283185307179586,n.y):3.141592653589793<=d.x-n.x?a.Sl(n.x+6.283185307179586,n.y):a.Sl(n.x,n.y)):(a.Ec(n),3.141592653589793<=d.x-n.x?a.Sl(d.x-6.283185307179586,d.y):3.141592653589793<=n.x-d.x?a.Sl(d.x+6.283185307179586,d.y):a.Sl(d.x,d.y))},x.TJ=function(d,l){for(var n=0;n<d;n++){var a=Math.ceil(n/2)/(d+1);n%2!=0&&(a=-a),l[n]=.5+a}},x.Ou=function(d,l){return!!(p.s.$(d.y,1.570796326794897)&&!p.s.$(l.y,1.570796326794897)||p.s.$(d.y,-1.570796326794897)&&!p.s.$(l.y,-1.570796326794897))},x.Mu=function(d,l){return!!(p.s.$(l.y,1.570796326794897)&&!p.s.$(d.y,1.570796326794897)||p.s.$(l.y,-1.570796326794897)&&!p.s.$(d.y,-1.570796326794897))},x.AE=function(d,l,n){return!(!x.zE(d,l,n)||p.s.$(d.y,1.570796326794897)||p.s.$(d.y,-1.570796326794897)||p.s.$(l.y,1.570796326794897)||p.s.$(l.y,-1.570796326794897))},x.zE=function(d,l,n){return Math.abs(Math.abs(d.x-l.x)-3.141592653589793)<=n},x.Nu=function(d,l){return!!(p.s.$(d.y,1.570796326794897)&&p.s.$(l.y,1.570796326794897)||p.s.$(d.y,-1.570796326794897)&&p.s.$(l.y,-1.570796326794897))},x.fB=function(d,l,n,a){if(0<d.y){var h=new p.h;h.na(l.x,1.570796326794897)}else(h=new p.h).na(l.x,-1.570796326794897);p.s.$(d.x,h.x)||p.s.$(l.y,h.y)||(x.Of(a,h),n!=null&&n.add(0))},x.dB=function(d,l,n,a){if(0<l.y){var h=new p.h;h.na(d.x,1.570796326794897)}else(h=new p.h).na(d.x,-1.570796326794897);p.s.$(l.x,h.x)||p.s.$(d.y,h.y)||(x.Of(a,h),n!=null&&n.add(1))},x.eB=function(d,l,n,a,h,f,m){p.s.Dd(n)?(0<1.570796326794897-d.y&&((n=new p.h).na(d.x,1.570796326794897),x.Of(m,n),f!=null&&f.add(a)),0<1.570796326794897-l.y&&((n=new p.h).na(l.x,1.570796326794897),x.Of(m,n),f!=null&&f.add(a))):(0<1.570796326794897+d.y&&((n=new p.h).na(d.x,-1.570796326794897),x.Of(m,n),f!=null&&f.add(h)),0<1.570796326794897+l.y&&((n=new p.h).na(l.x,-1.570796326794897),x.Of(m,n),f!=null&&f.add(h)))},x.vU=function(d){if(-3.141592653589793>d.x)for(;-3.141592653589793>d.x;)d.x+=6.283185307179586;if(3.141592653589793<d.x)for(;3.141592653589793<d.x;)d.x-=6.283185307179586},x}();p.ej=P}(Q||(Q={})),function(p){p.kp=function(){function P(){}return P.pj=function(x,d,l){if(x==null||d==null||!p.cb.Xc(d))throw p.i.O();if(x.B())return x;var n=x,a=n.K();if(p.ba.Ic(a)){n=p.Jh.nj(x,d),x=new p.l,n.A(x),a=p.ua.Xd(d,x,!1);for(var h=p.cb.ih(d),f=Math.floor((x.v-h.v)/h.S())*h.S()+h.v;f<x.C;)f>x.v+a&&f<x.C-a&&(n=p.Jh.ms(n,d,l,!0,f)),f+=h.S()}else{if(a==197)return(x=new p.Ea(n.description)).bd(n,!1),P.pj(x,d,l);if(p.ba.zd(a))return(x=new p.Ua(n.description)).pc(n,!0),P.pj(x,d,l)}return P.Py(n,d)},P.Py=function(x,d){if(x==null||d==null||!p.cb.Xc(d))throw p.i.O();if(x.B())return x;var l=x.K();return l==197?(l=new p.Ea(x.description)).bd(x,!1):p.ba.zd(l)?(l=new p.Ua(x.description)).pc(x,!0):l=x,(l=p.Jh.nj(l,d)).B()?l:p.Gg.Tb(d)==1?p.Jh.Hn(l,d,0,l!=x,0):P.IQ(l,d,l!=x)},P.IQ=function(x,d,l){if(!p.cb.Xc(d))throw p.i.O();if(x.B())return x;var n=p.cb.bf(d),a=-180*n;return n*=360,p.Gg.Tb(d)==2&&(n=(a=p.cb.ih(d)).C,n-=a=a.v),p.Jh.Jp(x,a,n,d,l,0,!0)},P}()}(Q||(Q={})),function(p){p.xY=function(){function P(){}return P.R=function(x){return 0>x?-x:x},P.Mb=function(x,d){return 0<=d?P.R(x):-P.R(x)},P.$=function(x,d){return x==d||P.R(x-d)<=P.EC*(1+(P.R(x)+P.R(d))/2)},P.Dd=function(x){return x==0||P.R(x)<=P.EC},P.Ch=function(x,d){var l=(d=(1-(d=Math.sqrt(1-d)))/(1+d))*d;return x/(1+d)*(1+l*(.25+l*(.015625+1/256*l)))*P.zL},P.zL=1.5707963267948966,P.EC=3552713678800501e-30,P}()}(Q||(Q={})),function(p){var P=function(d){this.Yf=d,this.Mk=this.Yf.getCode(),0>this.Mk&&(this.Mk=0)};p.zY=P;var x=function(){function d(l){l===void 0&&(l=null),this.Ej=null,this.Wn=!1,l!==null&&(this.Ej=new P(l))}return d.prototype.Fc=function(){return this.Ej!=null?this.Ej.Mk:0},d.prototype.Qf=function(){var l=new d;return this.copyTo(l),l},d.prototype.copyTo=function(l){l.Ej=this.Ej,l.Wn=this.Wn},d.prototype.Lz=function(){this.Wn=!this.Wn},d.prototype.sm=function(){return this.Ej!=null?this.Ej.Yf:null},d.prototype.GJ=function(l){if(0>=l)throw p.i.O();if(l!=this.Fc()){if((l=p.qf.geogtran(l))==null)throw p.i.O("Geogtran not found.");this.Ej=new P(l)}},d.prototype.wz=function(){return this.Ej==null?null:this.Ej.Yf.toString()},d.prototype.pX=function(l){if(l==null)throw p.i.O();var n=null;try{n=p.qf.fromString(p.Tc.PE_TYPE_GEOGTRAN,l)}catch{throw p.i.O()}this.Ej=new P(n)},d.prototype.Nb=function(l){return l==this||!(!(l instanceof d)||(0>=this.Fc()||this.Fc()!=l.Fc())&&!this.sm().isEqual(l.sm()))&&this.Wn==l.Wn},d.prototype.toString=function(){var l="GeographicTransformation: "+this.wz();return 200<l.length?l.substring(0,197)+"... ("+l.length.toString()+" characters)":l},d.create=function(l,n){var a=new d;return a.GJ(l),n&&a.Lz(),a},d.pP=function(l,n){var a=new d;return a.pX(l),n&&a.Lz(),a},d}();p.Cx=x}(Q||(Q={})),function(p){var P=function(){function d(){}return d.construct=function(l,n,a,h){var f=new d;return f.jw=l,f.kw=n,f.MY=a,f.NY=h,f},d.zy=function(l,n){return l.jw==n.jw?l.kw==n.kw?0:l.kw<n.kw?-1:1:l.jw<n.jw?-1:1},d}(),x=function(){function d(){this.tT=[],this.uT=[],this.sp()}return d.fz=function(){return d.eK==null&&(d.eK=new d),d.eK},d.prototype.sp=function(){this.dD(this.tT),this.dD(this.uT)},d.prototype.dD=function(l){try{var n=[];n=n.sort(P.zy);for(var a=0;a<n.length;a++)l.push(n[a])}catch{}},d}();p.yY=x}(Q||(Q={})),function(p){var P=function(){function x(){}return x.prototype.tD=function(d){this.Hk=d},x.prototype.RM=function(d){this.Gb=d},x.prototype.sD=function(d){this.Bo=d},x.xE=function(d){return!(d.B()||d.K()!=1607&&d.K()!=1736)},x.vE=function(d){return!(d.B()||d.K()!=1607&&d.K()!=1736||20>d.I())},x.wE=function(d){return!(d.B()||d.K()!=1607&&d.K()!=1736||20>d.I())},x}();p.Wk=P}(Q||(Q={})),function(p){p.ac=function(){function P(){}return P.OT=function(x){var d=new p.Ea;return d.rx(x.gs(),x.js()),d.Aj(x.gs(),x.hs()),d.Aj(x.fs(),x.hs()),d.Aj(x.fs(),x.js()),d},P.Bh=function(x,d){return x===null?null:p.Gx.local().W(x,d,null)},P.fY=function(x,d){var l=p.Ih.local();return x=new p.$c(x),l.W(x,d,null).next()},P.km=function(x,d,l){return p.mp.local().W(x,d,l,null)},P.gp=function(x,d,l){return p.Jx.local().W(x,d,l,null)},P.RX=function(x,d,l){var n=p.Jx.local();for(x=new p.$c(x),d=new p.$c(d),l=n.W(x,d,l,null),n=[];(d=l.next())!=null;)n.push(d);return n},P.Nb=function(x,d,l){return p.fj.local().W(3,x,d,l,null)},P.OP=function(x,d,l){return p.fj.local().W(4,x,d,l,null)},P.MS=function(x,d,l){var n=p.Zj.local();for(x=new p.$c(x),d=new p.$c(d),l=n.W(x,d,l,null),n=[];(d=l.next())!=null;)n.push(d);return n},P.LP=function(x,d,l){var n=p.mp.local();for(x=new p.$c(x),d=new p.$c(d),l=n.W(x,d,l,null),n=[];(d=l.next())!=null;)n.push(d);return n},P.Fa=function(x,d,l){return p.Zj.local().W(x,d,l,null)},P.LS=function(x,d,l){if((x=p.Zj.local().W(x,d,l,null,1))===null)return[];if(x.K()===550){for(d=[],l=0;l<x.xa;l++)d.push(x.FR(l));return d}return x.K()===33?[x]:[]},P.mY=function(x,d,l){return p.fj.local().W(2,x,d,l,null)},P.contains=function(x,d,l){return p.fj.local().W(1,x,d,l,null)},P.wP=function(x,d,l){return p.fj.local().W(16,x,d,l,null)},P.touches=function(x,d,l){return p.fj.local().W(8,x,d,l,null)},P.yU=function(x,d,l){return p.fj.local().W(32,x,d,l,null)},P.OS=function(x,d,l){return p.fj.local().W(1073741824,x,d,l,null)},P.tB=function(x,d,l,n){return p.uL.local().W(x,d,l,n,null)},P.ub=function(x,d,l,n){var a=null;if(l!=null){if(a=l.Id(),n!=null&&a.Fc()!=n.Fc()&&a.pd!=n.pd)throw p.i.Zk()}else if(n!=null)throw p.i.O();return x=p.lL.local().W(x,d,null),a!==null&&n!==null&&(x=p.Uc.Ph(x,a,n)),x},P.clip=function(x,d,l){return p.fL.local().W(x,p.l.construct(d.gs(),d.js(),d.fs(),d.hs()),l,null)},P.fl=function(x,d,l){if(x==null||d==null)return null;for(x=p.hL.local().W(!0,x,d,l,null),d=[];(l=x.next())!=null;)l.B()||d.push(l);return d.slice(0)},P.HN=function(x,d,l,n,a,h,f,m){if(a===!0)return P.IN(x,d,l,n,h,f,m);if(a=l,d!=null){if(f=d.Id(),n!=null&&f.Fc()!=n.Fc()){if(f.pd!=n.pd)throw p.i.Zk();a=[],p.Uc.SE(l,l.length,n,f,a)}}else if(n!=null)throw p.i.O();if(l=p.vC.local(),h){for(x=new p.$c(x),d=l.W(x,d,a,h,null),x=[];(h=d.next())!=null;)x.push(h);h=x.slice(0)}else for(h=[],n=0;n<x.length;n++)h[n]=l.W(x[n],d,a[n],null);return h},P.IN=function(x,d,l,n,a,h,f){if(d===null||(n==null&&(n=d.Fc()!==4326?d.Id():p.Uc.ah(9001)),n.pd!==0))throw p.i.O();if(p.Uc.SE(l,l.length,n,p.Uc.ah(9001),l),n=p.AC.local(),a){for(x=new p.$c(x),d=n.W(x,d,h,l,f,!1,a,null),l=[];(h=d.next())!=null;)l.push(h);a=l.slice(0)}else{a=[];for(var m=0;m<x.length;m++)a[m]=n.W(x[m],d,h,l[m],f,!1,null)}return a},P.buffer=function(x,d,l,n,a,h,f){var m=l;if(a===!1){if(d!=null){if(a=d.Id(),n!=null&&a.Fc()!=n.Fc()){if(a.pd!=n.pd)throw p.i.Zk();m=p.Uc.Ph(l,n,a)}}else if(n!=null)throw p.i.O();x=p.vC.local().W(x,d,m,null)}else{if(d===null||(n==null&&(n=d.Fc()!==4326?d.Id():p.Uc.ah(9001)),n.pd!==0))throw p.i.O();m=p.Uc.Ph(l,n,p.Uc.ah(9001)),x=p.AC.local().W(x,d,h,m,f,!1,null)}return x},P.wU=function(x,d,l,n,a,h,f){if(d!=null){var m=d.Id();if(f!=null&&m.Fc()!=f.Fc()){if(m.pd!=f.pd)throw p.i.Zk();l=p.Uc.Ph(l,f,m)}}else if(f!=null)throw p.i.O();for(x=new p.$c(x),d=p.DC.local().W(x,d,l,n,a,h,null),l=[];(n=d.next())!=null;)l.push(n);return l.slice(0)},P.offset=function(x,d,l,n,a,h,f){if(d!=null){var m=d.Id();if(f!=null&&m.Fc()!=f.Fc()){if(m.pd!=f.pd)throw p.i.Zk();l=p.Uc.Ph(l,f,m)}}else if(f!=null)throw p.i.O();return p.DC.local().W(x,d,l,n,a,h,null)},P.dP=function(x){return p.xC.local().W(x,null)},P.eP=function(x,d){var l=p.xC.local();for(x=new p.$c(x),d=l.W(x,d,null),l=[];(x=d.next())!=null;)l.push(x);return l},P.iz=function(x,d,l){return p.Hx.local().iz(x,d,l)},P.jz=function(x,d){return p.Hx.local().jz(x,d)},P.kz=function(x,d,l,n){return p.Hx.local().kz(x,d,l,n)},P.$B=function(x,d){return p.$l.local().W(x,d,!1,null)},P.ZS=function(x,d){return p.$l.local().ts(x,d,null)},P.LQ=function(x,d,l,n,a){var h=p.zC.local();if(d!=null){if(d=d.Id(),a!=null&&d.Fc()!=a.Fc()){if(d.pd!=a.pd)throw p.i.Zk();l=p.Uc.Ph(l,a,d)}}else if(a!=null)throw p.i.O();return h.W(x,l,n,null)},P.Sr=function(x,d,l,n){var a=p.Zl.local();if(d!=null){if(d=d.Id(),n!=null&&d.Fc()!=n.Fc()){if(d.pd!=n.pd)throw p.i.Zk();l=p.Uc.Ph(l,n,d)}}else if(n!=null)throw p.i.O();return a.W(x,l,null)},P.Ry=function(x,d,l,n,a){a===void 0&&(a=0);var h=p.nL.local();if(a==4||a!==0)throw p.i.Fe();if(n!==null){if(n.pd!==0)throw p.i.O("Unit must be a linear unit type");l=p.Uc.Ph(l,n,p.Uc.ah(9001))}return h.W(x,l,d,a,null)},P.RQ=function(x,d,l,n){if(x===null)return 0;if(n==4||n!==0)throw p.i.Fe();if(x.K()==197)x=P.OT(x);else if(x.K()!=1736)return 0;if(n=p.cb.tc(d),x=p.cb.Bh(x,d,n),x=p.PK.SQ([x])[0],l!==null){if(l.pd!==2)throw p.i.O("Unit must be a area unit type");x=p.Uc.Ph(x,p.Uc.ah(109404),l)}return x},P.UQ=function(x,d,l,n){if(x=p.qL.local().W(x,d,n,null),l!==null){if(l.pd!==0)throw p.i.O("Unit must be a linear unit type");x=p.Uc.Ph(x,p.Uc.ah(9001),l)}return x},P.EU=function(x,d,l){if(x===null)return 0;var n=null;if(d!=null){if((n=d.Id()).pd==0&&(n=p.Uc.WF(n))==null&&l!==null)throw p.i.O();if(l!=null&&n.Fc()!=l.Fc()&&n.pd!=l.pd)throw p.i.Zk()}else if(l!=null)throw p.i.O();return x.K()==1736||x.K()==197?(x=x.He(),l!==null?p.Uc.Ph(x,n,l):x):0},P.FU=function(x,d,l){if(x===null||x.B()||1>x.Eb())return 0;var n=null;if(d!=null){if(n=d.Id(),l!=null&&n.Fc()!=l.Fc()&&n.pd!=l.pd)throw p.i.Zk()}else if(l!=null)throw p.i.O();x.K()==1736||x.K()==197?d=x.ng():p.ba.zd(x.K())?(d=new p.Ua(x.description)).pc(x,!0):d=x,x=0,d=d.Ha();for(var a=new p.h,h=new p.h;d.ab();)for(;d.Ia();){var f=d.ia();f.$p(a),f.Vr(h),x+=p.h.ub(a,h)}return n!==null&&l!==null&&(x=p.Uc.Ph(x,n,l)),x},P.aP=function(x){return x.points!==void 0?P.hS(x,x.hasZ!==void 0&&x.hasZ,x.hasM!==void 0&&x.hasM):x.rings!==void 0?P.gG(x.rings,x.hasZ!==void 0&&x.hasZ,x.hasM!==void 0&&x.hasM,"P"):x.paths!==void 0?P.gG(x.paths,x.hasZ!==void 0&&x.hasZ,x.hasM!==void 0&&x.hasM,"L"):x.x!==void 0?P.iS(x):x.xmin!==void 0?P.gS(x):null},P.iS=function(x){if(x.x==null||x.x=="NaN")return new p.Ta;var d=new p.Ta(x.x,x.y);return x.z!==void 0&&x.z!==null&&d.sX(x.z),x.m!==void 0&&x.m!==null&&d.cX(x.m),d},P.gS=function(x){if(x.xmin==null||x.xmin=="NaN")return new p.Hh;var d=new p.Hh(x.xmin,x.ymin,x.xmax,x.ymax);return x.zmin!==void 0&&x.zmin!==null&&d.setInterval(1,0,x.zmin,x.zmax),x.mmin!==void 0&&x.mmin!==null&&d.setInterval(2,0,x.mmin,x.mmax),d},P.hS=function(x,d,l){var n=0,a=new p.ee,h=3*x.points.length;h%2!=0&&h++,2>h&&(h=2);var f=p.P.truncate(3*x.points.length/2);4>f?f=4:16>f&&(f=16),h=p.Zc.Fn(h,0);var m=p.Zc.Fn(f);f=p.Zc.Fn(f);for(var y=0;y<x.points.length;y++)h.write(2*y,x.points[y][0]),h.write(2*y+1,x.points[y][1]),m.write(y,d||l?x.points[y][2]:NaN),f.write(y,l&&d?x.points[y][3]:NaN),n++;return n!=0&&(a.resize(n),a.kn(0,h)),d&&(a.se(1),a.kn(1,m)),l&&(a.se(2),a.kn(2,d==0?m:f)),a.Qc(16777215),a},P.gG=function(x,d,l,n){var a=0,h=2;if(n=="P"){var f=new p.Ea;a=1,h=3}else f=new p.Ua;for(var m=p.Zc.Qh(0),y=p.Zc.Or(0),w=0,I=0,M=[],T=[],$=0;$<x.length;$++){var F=x[$].length;if(M[$]=!1,n==="P"&&x[$][0][0]===x[$][x[$].length-1][0]&&x[$][0][1]===x[$][x[$].length-1][1]){var R=l==0||x[$][0][3]===x[$][x[$].length-1][3]||x[$][0][3]===void 0&&x[$][x[$].length-1][3]===void 0;(d==0||x[$][0][2]===x[$][x[$].length-1][2]||x[$][0][2]===void 0&&x[$][x[$].length-1][2]===void 0)&&R&&(M[$]=!0,--F)}F>=h?(T[$]=!1,I+=1,m.add(w),y.add(a),w+=F):T[$]=!0}for((n=3*w)%2!=0&&n++,2>n&&(n=2),4>($=p.P.truncate(3*w/2))?$=4:16>$&&($=16),n=p.Zc.Fn(n,0),a=p.Zc.Fn($),h=p.Zc.Fn($),$=F=0;$<x.length;$++)if(T[$]===!1)for(R=0;R<x[$].length;R++){var j=!1;R===x[$].length-1&&M[$]===!0&&(j=!0),j||(n.write(2*F,x[$][R][0]),n.write(2*F+1,x[$][R][1]),a.write(F,d||l?x[$][R][2]:NaN),h.write(F,l&&d?x[$][R][3]:NaN),F++)}return w!=0&&(x=f,m.resize(I),y.resize(I),0<w&&(m.add(w),y.add(0)),x.kn(0,n),x.KJ(y),x.LJ(m)),d&&(f.se(1),f.kn(1,a)),l&&(f.se(2),f.kn(2,d==0?a:h)),f.Qc(16777215),f},P}()}(Q||(Q={})),function(p){p.Dx=function(){function P(){}return P.dr=function(x){var d,l=0,n=x.length,a=x[0];for(d=0;d<n-1;d++){var h=x[d+1];l+=(h[0]-a[0])*(h[1]+a[1]),a=h}return 0<=l},P.rotate=function(x,d,l){d=d*Math.PI/180;var n=Math.cos(d),a=Math.sin(d);if(x.paths!==void 0){d={paths:[]};for(var h=0;h<x.paths.length;h++){for(var f=x.paths[h],m=[],y=0;y<f.length;y++){var w=f[y].slice(0);m.push(w);var I=n*(f[y][0]-l.x)-a*(f[y][1]-l.y)+l.x,M=a*(f[y][0]-l.x)+n*(f[y][1]-l.y)+l.y;w[0]=I,w[1]=M}d.paths.push(m),x.hasZ!==void 0&&(d.hasZ=x.hasZ),x.hasM!==void 0&&(d.hasM=x.hasM)}return d}if(x.rings!==void 0){for(d={rings:[]},h=0;h<x.rings.length;h++){f=x.rings[h],m=[];var T=P.dr(f);for(y=0;y<f.length;y++)w=f[y].slice(0),m.push(w),I=n*(f[y][0]-l.x)-a*(f[y][1]-l.y)+l.x,M=a*(f[y][0]-l.x)+n*(f[y][1]-l.y)+l.y,w[0]=I,w[1]=M;P.dr(m)!==T&&m.reverse(),d.rings.push(m),x.hasZ!==void 0&&(d.hasZ=x.hasZ),x.hasM!==void 0&&(d.hasM=x.hasM)}return d}if(x.x!==void 0)return d={x:n*(x.x-l.x)-a*(x.y-l.y)+l.x,y:a*(x.x-l.x)+n*(x.y-l.y)+l.y},x.z!==void 0&&(d.z=x.z),x.m!==void 0&&(d.m=x.m),x.hasZ!==void 0&&(d.hasZ=x.hasZ),x.hasM!==void 0&&(d.hasM=x.hasM),d;if(x.points!==void 0){for(d={points:[]},h=x.points,y=0;y<h.length;y++)(f=h[y].slice(0))[0]=n*(h[y][0]-l.x)-a*(h[y][1]-l.y)+l.x,f[1]=a*(h[y][0]-l.x)+n*(h[y][1]-l.y)+l.y,d.points.push(f);return x.hasZ!==void 0&&(d.hasZ=x.hasZ),x.hasM!==void 0&&(d.hasM=x.hasM),d}return null},P.EQ=function(x,d){if(x.paths!==void 0){for(var l={paths:[]},n=0;n<x.paths.length;n++){for(var a=x.paths[n],h=[],f=0;f<a.length;f++){var m=a[f].slice(0);h.push(m);var y=d.x-a[f][0];m[0]=a[f][0]+2*y}l.paths.push(h)}return x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l}if(x.rings!==void 0){for(l={rings:[]},n=0;n<x.rings.length;n++){a=x.rings[n];var w=P.dr(a);for(h=[],f=0;f<a.length;f++)m=a[f].slice(0),h.push(m),y=d.x-a[f][0],m[0]=a[f][0]+2*y;P.dr(h)!==w&&h.reverse(),l.rings.push(h)}return x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l}if(x.x!==void 0)return y=d.x-x.x,l={x:x.x+2*y,y:x.y},x.z!==void 0&&(l.z=x.z),x.m!==void 0&&(l.m=x.m),x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l;if(x.points!==void 0){for(l={points:[]},n=x.points,f=0;f<n.length;f++)a=n[f].slice(0),y=d.x-a[0],a[0]+=2*y,l.points.push(a);return x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l}return x.xmin!==void 0?(l={v:x.xmin,G:x.ymin,C:x.xmax,H:x.ymax},x.zmin!==void 0&&(l.zmin=x.zmin,l.zmax=x.zmax),x.mmin!==void 0&&(l.mmin=x.mmin,l.mmax=x.mmax),y=d.x-x.xmin,l.xmax=x.xmin+2*y,y=d.x-x.xmax,l.xmin=x.xmax+2*y,x.zmin!==void 0&&(l.zmin=x.zmin),x.zmax!==void 0&&(l.zmax=x.zmax),x.mmin!==void 0&&(l.mmin=x.mmin),x.mmax!==void 0&&(l.mmax=x.mmax),x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l):null},P.FQ=function(x,d){if(x.paths!==void 0){for(var l={paths:[]},n=0;n<x.paths.length;n++){for(var a=x.paths[n],h=[],f=0;f<a.length;f++){var m=a[f].slice(0);h.push(m);var y=d.y-a[f][1];m[1]=a[f][1]+2*y}l.paths.push(h)}return x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l}if(x.rings!==void 0){for(l={rings:[]},n=0;n<x.rings.length;n++){a=x.rings[n];var w=P.dr(a);for(h=[],f=0;f<a.length;f++)m=a[f].slice(0),h.push(m),y=d.y-a[f][1],m[1]=a[f][1]+2*y;P.dr(h)!==w&&h.reverse(),l.rings.push(h)}return x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l}if(x.x!==void 0)return y=d.y-x.y,l={y:x.y+2*y,x:x.x},x.z!==void 0&&(l.z=x.z),x.m!==void 0&&(l.m=x.m),x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l;if(x.points!==void 0){for(l={points:[]},n=x.points,f=0;f<n.length;f++)a=n[f].slice(0),y=d.y-a[1],a[1]+=2*y,l.points.push(a);return x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l}return x.xmin!==void 0?(l={v:x.xmin,G:x.ymin,C:x.xmax,H:x.ymax},x.zmin!==void 0&&(l.zmin=x.zmin,l.zmax=x.zmax),x.mmin!==void 0&&(l.mmin=x.mmin,l.mmax=x.mmax),y=d.y-x.ymin,l.ymax=x.ymin+2*y,y=d.y-x.ymax,l.ymin=x.ymax+2*y,x.zmin!==void 0&&(l.zmin=x.zmin),x.zmax!==void 0&&(l.zmax=x.zmax),x.mmin!==void 0&&(l.mmin=x.mmin),x.mmax!==void 0&&(l.mmax=x.mmax),x.hasZ!==void 0&&(l.hasZ=x.hasZ),x.hasM!==void 0&&(l.hasM=x.hasM),l):null},P}()}(Q||(Q={})),function(p){p.UK=function(){function P(){}return P.Kg=function(x,d){switch(d==null&&(d=p.fe.pg()),x){case 33:return new p.Ta(d);case 322:return new p.zb(d);case 197:return new p.Hh(d);case 550:return new p.ee(d);case 1607:return new p.Ua(d);case 1736:return new p.Ea(d);default:throw p.i.ga("invalid argument.")}},P}()}(Q||(Q={})),function(p){var P=function(){function x(d,l){this.Qe=p.ja.rf(d,-1),this.va=new p.cu,this.yl=l}return x.prototype.vW=function(d){this.va.Bt(Math.min(this.Qe.size,d)),this.va.hn(d)},x.prototype.addElement=function(d,l){if(l===void 0)return this.$M(d);l=p.P.truncate(l%this.Qe.size);var n=this.Qe.get(l);return n==-1&&(n=this.va.Rh(),this.Qe.set(l,n)),this.va.addElement(n,d)},x.prototype.$M=function(d){var l=this.yl.ez(d);l=p.P.truncate(l%this.Qe.size);var n=this.Qe.get(l);return n==-1&&(n=this.va.Rh(),this.Qe.set(l,n)),this.va.addElement(n,d)},x.prototype.kd=function(d,l){if(l===void 0)this.FP(d);else{l=p.P.truncate(l%this.Qe.size);var n=this.Qe.get(l);if(n==-1)throw p.i.O();for(var a=this.va.sc(n),h=-1;a!=-1;){var f=this.va.lb(a);this.va.ka(a)==d?(this.va.kd(n,h,a),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(l,-1))):h=a,a=f}}},x.prototype.FP=function(d){var l=this.yl.ez(d);l=p.P.truncate(l%this.Qe.size);var n=this.Qe.get(l);if(n==-1)throw p.i.O();for(var a=this.va.sc(n),h=-1;a!=-1;){var f=this.va.lb(a);this.va.ka(a)==d?(this.va.kd(n,h,a),this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(l,-1))):h=a,a=f}},x.prototype.lR=function(d){return d=p.P.truncate(d%this.Qe.size),(d=this.Qe.get(d))==-1?-1:this.va.sc(d)},x.prototype.zR=function(d){return this.va.lb(d)},x.prototype.wd=function(d){var l=this.yl.ez(this.ka(d));l=p.P.truncate(l%this.Qe.size);var n=this.Qe.get(l);if(n==-1)throw p.i.O();for(var a=this.va.sc(n),h=-1;a!=-1;){if(a==d)return this.va.kd(n,h,a),void(this.va.sc(n)==-1&&(this.va.eh(n),this.Qe.set(l,-1)));h=a,a=this.va.lb(a)}throw p.i.O()},x.prototype.ka=function(d){return this.va.ka(d)},x.prototype.clear=function(){this.Qe=p.ja.rf(this.Qe.size,-1),this.va.clear()},x.prototype.size=function(){return this.va.OF()},x}();p.ZK=P}(Q||(Q={})),function(p){var P=function(){function x(){this.Ni=new p.ad(3),this.va=new p.ad(6),this.mT=!1,this.ke=-1}return x.prototype.hl=function(d){this.Ni.kd(d)},x.prototype.Rw=function(){return this.Ni.De()},x.prototype.dv=function(d){this.va.kd(d)},x.prototype.VA=function(){return this.va.De()},x.prototype.RB=function(d,l){this.Ni.T(d,1,l)},x.prototype.fx=function(d,l){this.Ni.T(d,2,l)},x.prototype.bX=function(d,l){this.Ni.T(d,3,l)},x.prototype.PB=function(d,l){this.va.T(d,4,l)},x.prototype.eX=function(d,l){this.va.T(d,3,l)},x.prototype.OJ=function(d,l){this.va.T(d,2,l)},x.prototype.Rh=function(d){var l=this.VA();return this.va.T(l,3,this.ke),this.va.T(l,4,0),this.va.T(l,5,d),this.ke!=-1&&this.OJ(this.ke,l),this.ke=l},x.prototype.eh=function(d){this.GE(d);var l=this.va.U(d,2),n=this.va.U(d,3);return l!=-1?this.eX(l,n):this.ke=n,n!=-1&&this.OJ(n,l),this.dv(d),n},x.prototype.Bt=function(d){this.va.Ee(d)},x.prototype.KF=function(d){return this.va.U(d,5)},x.prototype.aX=function(d,l){this.va.T(d,5,l)},x.prototype.addElement=function(d,l){return this.oS(d,l)},x.prototype.oS=function(d,l){var n=this.Rw();this.fx(n,-1),this.va.U(d,0)==-1&&this.va.T(d,0,n);var a=this.va.U(d,1);return this.RB(n,a),a!=-1&&this.fx(a,n),this.va.T(d,1,n),this.setData(n,l),this.PB(d,this.ds(d)+1),this.mT&&this.bX(n,d),n},x.prototype.kd=function(d,l){var n=this.xe(l),a=this.lb(l);return n!=-1?this.fx(n,a):this.va.T(d,0,a),a!=-1?this.RB(a,n):this.va.T(d,1,n),this.hl(l),this.PB(d,this.ds(d)-1),a},x.prototype.hn=function(d){this.Ni.Ee(d)},x.prototype.getData=function(d){return this.Ni.U(d,0)},x.prototype.setData=function(d,l){this.Ni.T(d,0,l)},x.prototype.lb=function(d){return this.Ni.U(d,2)},x.prototype.xe=function(d){return this.Ni.U(d,1)},x.prototype.sc=function(d){return this.va.U(d,0)},x.prototype.Gc=function(d){return this.va.U(d,1)},x.prototype.clear=function(){for(var d=this.ke;d!=-1;)d=this.eh(d)},x.prototype.GE=function(d){for(var l=this.Gc(d);l!=-1;){var n=l;l=this.xe(n),this.hl(n)}this.va.T(d,0,-1),this.va.T(d,1,-1),this.PB(d,0)},x.prototype.B=function(){return this.Ni.size==0},x.prototype.OF=function(){return this.Ni.size},x.prototype.ds=function(d){return this.va.U(d,4)},x.prototype.lz=function(d){return this.va.U(d,3)},x}();p.lp=P}(Q||(Q={})),function(p){var P=function(){function x(d){d===void 0?(this.vg=new p.ad(2),this.va=new p.ad(4),this.ke=-1,this.Sv=!0):(this.vg=new p.ad(2),this.va=new p.ad(d?4:2),this.ke=-1,this.Sv=d)}return x.prototype.hl=function(d){this.vg.kd(d)},x.prototype.Rw=function(){return this.vg.De()},x.prototype.dv=function(d){this.va.kd(d)},x.prototype.VA=function(){return this.va.De()},x.prototype.Rh=function(){var d=this.VA();return this.Sv&&(this.va.T(d,3,this.ke),this.ke!=-1&&this.va.T(this.ke,2,d),this.ke=d),d},x.prototype.eh=function(d){for(var l=this.sc(d);l!=-1;){var n=l;l=this.lb(l),this.hl(n)}this.Sv&&(l=this.va.U(d,2),n=this.va.U(d,3),l!=-1?this.va.T(l,3,n):this.ke=n,n!=-1&&this.va.T(n,2,l)),this.dv(d)},x.prototype.Bt=function(d){this.va.Ee(d)},x.prototype.addElement=function(d,l){var n=this.va.U(d,1),a=this.Rw();return n!=-1?this.vg.T(n,1,a):this.va.T(d,0,a),this.va.T(d,1,a),this.vg.T(a,0,l),a},x.prototype.hn=function(d){this.vg.Ee(d)},x.prototype.kd=function(d,l,n){l!=-1?(this.vg.T(l,1,this.vg.U(n,1)),this.va.U(d,1)==n&&this.va.T(d,1,l)):(this.va.T(d,0,this.vg.U(n,1)),this.va.U(d,1)==n&&this.va.T(d,1,-1)),this.hl(n)},x.prototype.Cy=function(d,l){var n=this.va.U(d,1),a=this.va.U(l,0);a!=-1&&(n!=-1?this.vg.T(n,1,a):this.va.T(d,0,a),this.va.T(d,1,this.va.U(l,1))),this.Sv&&(d=this.va.U(l,2),n=this.va.U(l,3),d!=-1?this.va.T(d,3,n):this.ke=n,n!=-1&&this.va.T(n,2,d)),this.dv(l)},x.prototype.ka=function(d){return this.vg.U(d,0)},x.prototype.Uj=function(d,l){this.vg.T(d,0,l)},x.prototype.lb=function(d){return this.vg.U(d,1)},x.prototype.sc=function(d){return this.va.U(d,0)},x.prototype.Ln=function(d){return this.ka(this.sc(d))},x.prototype.clear=function(){this.vg.oj(!0),this.va.oj(!0),this.ke=-1},x.prototype.B=function(){return this.vg.size==0},x.prototype.OF=function(){return this.vg.size},x.prototype.lz=function(d){return this.va.U(d,3)},x}();p.cu=P}(Q||(Q={})),function(p){p.ua=function(){function P(){}return P.Xd=function(x,d,l){return d=d.zr(),x=x!=null&&x.Yd!==void 0?x.Yd(0):0,l&&(d*=4,x*=1.1),Math.max(x,d)},P.Gr=function(x){return 2*Math.sqrt(2)*x},P.mN=function(x){return Math.sqrt(2)*x},P.mj=function(x,d,l){var n=new p.l;return d.A(n),P.Xd(x,n,l)},P.rE=function(x,d,l){return d=d.Vg(1,0).zr(),x=x!=null?x.Yd(1):0,l&&(d*=4,x*=1.1),Math.max(x,d)},P.ov=function(x,d){var l=new p.l;return x.yc(l),x=new p.l,d.yc(x),l.$b(x),l},P.TN=function(x){var d=new p.l;if(x.yc(d),d.B())return null;var l=new p.fu(d,8),n=-1,a=new p.l,h=!1;do for(var f=0,m=x.ea();f<m;f++){if(x.Tj(f,a),(n=l.Ez(f,a,n))==-1){if(h)throw p.i.ga("internal error");x.Ap(d,!1),h=!0,l.reset(d,8);break}h=!1}while(h);return l},P.iE=function(x){var d=new p.l;x.yc(d);for(var l=new p.fu(d,8),n=-1,a=x.Ha(),h=new p.l,f=!1;a.ab();)for(;a.Ia();){var m=a.ia(),y=a.xb();if(m.A(h),(n=l.Ez(y,h,n))==-1){if(f)throw p.i.Ra();x.Ap(d,!1),f=!0,l.reset(d,8),a.aj();break}}return l},P.lj=function(x,d){var l=new p.l;x.yc(l);for(var n=new p.fu(l,8),a=-1,h=new p.l,f=x.Ha(),m=!1;f.ab();)for(;f.Ia();){var y=f.ia(),w=f.xb();if(y.A(h),h.isIntersecting(d)&&(a=n.Ez(w,h,a))==-1){if(m)throw p.i.ga("internal error.");x.Ap(l,!1),m=!0,n.reset(l,8),f.aj();break}}return n},P.jE=function(x,d){for(var l=new p.fu(d,8),n=new p.h,a=!1,h=new p.l,f=0;f<x.I();f++)if(x.D(f,n),d.contains(n)&&(h.L(n),l.xj(f,h)==-1)){if(a)throw p.i.Ra();a=!0,f=new p.l,x.Ap(f,!1),l.reset(f,8),f=-1}return l},P.gR=function(x,d,l){var n=new p.l,a=new p.l;x.yc(n),d.yc(a),n.X(l,l),a.X(l,l);var h=new p.l;h.L(n),h.Fa(a),x=x.Ha(),d=d.Ha();var f=new p.sC;f.WB(l);var m=!1;for(f.kK();x.ab();)for(;x.Ia();)x.ia().A(n),n.isIntersecting(h)&&(m=!0,(l=new p.l).L(n),f.DD(x.xb(),l));if(f.dF(),!m)return null;for(n=!1,f.jK();d.ab();)for(;d.Ia();)d.ia().A(a),a.isIntersecting(h)&&(n=!0,(l=new p.l).L(a),f.zD(d.xb(),l));return f.cF(),n?f:null},P.hR=function(x,d,l,n,a){var h=x.K(),f=d.K(),m=new p.l,y=new p.l;x.yc(m),d.yc(y),m.X(l,l),y.X(l,l);var w=new p.l;w.L(m),w.Fa(y);var I=new p.sC;I.WB(l);var M=!1;I.kK();var T=0;for(l=x.ea();T<l;T++)n&&h==1736&&!x.Gv(T)||(x.Tj(T,m),m.isIntersecting(w)&&(M=!0,I.DD(T,m)));if(I.dF(),!M)return null;for(x=!1,I.jK(),n=0,l=d.ea();n<l;n++)a&&f==1736&&!d.Gv(n)||(d.Tj(n,y),y.isIntersecting(w)&&(x=!0,I.zD(n,y)));return I.cF(),x?I:null},P.Tu=function(x,d,l){if(x!=d)for(var n=0;n<l;n++)x[n]==null?x[n]=p.h.cl(d[n]):x[n].N(d[n])},P.Ey=function(x,d,l,n){var a=0;for(n+=0;a<n;l++,a++)x[a]==null&&(x[a]=[0,0]),x[a][0]=d[l].x,x[a][1]=d[l].y},P.Dy=function(x,d,l,n){var a=d,h=0;for(d=n+d;a<d;h++,a++)x[a]==null?x[a]=p.h.construct(l[h][0],l[h][1]):x[a].na(l[h][0],l[h][1])},P.fP=function(x,d,l){if(x!=d)for(var n=0;n<l;n++)x[n]==null?x[n]=new p.Ta(d[n]):d[n].copyTo(x[n])},P.qE=function(x,d,l,n){var a=0;return x!=null&&(a=x.Yd(0),n&&!l||x==null||(a+=1.01*x.pz(0))),l&&(d*=4,a*=1.01),Math.max(a,d)},P.oy=function(x,d,l){return P.qE(x,d.zr(),l,!1)},P.bO=function(x,d){var l=new p.l;return d.A(l),P.oy(x,l,!0)},P.py=function(x,d){return P.qE(x,d.zr(),!1,!0)},P.Ju=function(x,d){var l=new p.l;return d.A(l),P.py(x,l)},P.vG=function(x,d,l,n){n*=n;var a=new p.h;if(a.vc(x,d),(x=new p.h).vc(l,d),d=a.Uk(),l=x.Uk(),d<=n&&l<=n)return!0;var h=p.mc.ox(a.yi(x));return(h<=n*d||h<=n*l)&&0<=a.Sh(x)},P.ZJ=function(x,d,l,n){for(var a=0;a<d;a++){var h=x[a].y,f=p.P.Tk(h,l,n);f!=h&&(x[a].y=f)}},P}()}(Q||(Q={})),function(p){var P,x,d=function(){function h(f){this.Za=f}return h.prototype.compare=function(f,m,y){f=f.ka(y),y=this.Za.qk(m);var w=this.Za.qk(f);return y<w?-1:y==w?a.iq(m)&&a.Iv(f)?-1:a.iq(f)&&a.Iv(m)?1:0:1},h}(),l=function(){function h(f){this.Za=f}return h.prototype.qr=function(f,m,y){this.Za.CX(y,f,m)},h.prototype.bq=function(f){return this.Za.qk(f)},h}();(x=P||(P={}))[x.initialize=0]="initialize",x[x.pIn=1]="pIn",x[x.pL=2]="pL",x[x.pR=3]="pR",x[x.pT=4]="pT",x[x.right=5]="right",x[x.left=6]="left",x[x.all=7]="all";var n=function(){function h(){this.Za=null,this.Si=new p.Oc,this.ji=new p.ja(0),this.tg=[0,0]}return h.prototype.Zi=function(f,m){this.Si.pa=f.pa-m,this.Si.wa=f.wa+m,this.ji.resize(0),this.ie=0,this.tg[0]=0},h.prototype.zB=function(f,m,y){if(f>m)throw p.i.O();this.Si.pa=f-y,this.Si.wa=m+y,this.ji.resize(0),this.ie=0,this.tg[0]=0},h.prototype.Wo=function(f,m){this.Si.pa=f-m,this.Si.wa=f+m,this.ji.resize(0),this.ie=0,this.tg[0]=0},h.prototype.next=function(){if(!this.Za.nq)throw p.i.Hb();if(0>this.ie)return-1;for(var f=!0;f;)switch(this.tg[this.ie]){case 1:f=this.AU();break;case 2:f=this.BU();break;case 3:f=this.CU();break;case 4:f=this.DU();break;case 5:f=this.AW();break;case 6:f=this.fT();break;case 7:f=this.oN();break;case 0:f=this.Bz();break;default:throw p.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},h.construct=function(f){var m=new h;return m.Za=f,m.ji.Jb(20),m.ie=-1,m},h.prototype.Bz=function(){return this.Qg=this.qH=this.Oi=this.Mc=-1,this.Za.ne!=null&&0<this.Za.ne.size?(this.tg[0]=1,this.Oi=this.Za.kf,!0):(this.ie=-1,!1)},h.prototype.AU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.ie=-1,!1;var f=this.Za.Pp(this.Mc);return this.Si.wa<f?(f=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),f!=-1&&(this.gi=this.Za.ml(f),this.tg[++this.ie]=6),!0):f<this.Si.pa?(f=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),f!=-1&&(this.gi=this.Za.bs(f),this.tg[++this.ie]=5),!0):(this.tg[this.ie]=2,this.qH=this.Mc,f=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),f!=-1&&(this.gi=this.Za.ml(f),this.tg[++this.ie]=7),!0)},h.prototype.BU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=3,this.Oi=this.Za.nk(this.qH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var f=this.Za.pk(this.Mc);return this.Oi=this.Za.nk(this.Mc),f!=-1&&(this.gi=this.Za.bs(f),this.tg[++this.ie]=5),!0}return f=this.Za.pk(this.Mc),this.Oi=this.Za.sj(this.Mc),f!=-1&&(this.gi=this.Za.ml(f),this.tg[++this.ie]=7),(f=this.Za.nk(this.Mc))!=-1&&this.ji.add(f),!0},h.prototype.CU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.tg[this.ie]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var f=this.Za.pk(this.Mc);return this.Oi=this.Za.sj(this.Mc),f!=-1&&(this.gi=this.Za.ml(f),this.tg[++this.ie]=6),!0}return f=this.Za.pk(this.Mc),this.Oi=this.Za.nk(this.Mc),f!=-1&&(this.gi=this.Za.ml(f),this.tg[++this.ie]=7),(f=this.Za.sj(this.Mc))!=-1&&this.ji.add(f),!0},h.prototype.DU=function(){if(this.ji.size==0)return this.Qg=this.ie=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var f=this.Za.pk(this.Mc);return f!=-1&&(this.gi=this.Za.ml(f),this.tg[++this.ie]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.nk(this.Mc)!=-1&&this.ji.add(this.Za.nk(this.Mc)),!0},h.prototype.fT=function(){return this.Qg=this.gi,this.Qg!=-1&&a.iq(this.Op())&&this.Za.qk(this.Op())<=this.Si.wa?(this.gi=this.NF(),!1):(this.ie--,!0)},h.prototype.AW=function(){return this.Qg=this.gi,this.Qg!=-1&&a.Iv(this.Op())&&this.Za.qk(this.Op())>=this.Si.pa?(this.gi=this.LR(),!1):(this.ie--,!0)},h.prototype.oN=function(){return this.Qg=this.gi,this.Qg!=-1&&a.iq(this.Op())?(this.gi=this.NF(),!1):(this.ie--,!0)},h.prototype.NF=function(){return this.Za.Uf?this.Za.bg.lb(this.Qg):this.Za.Vi.lb(this.Qg)},h.prototype.LR=function(){return this.Za.Uf?this.Za.bg.xe(this.Qg):this.Za.Vi.xe(this.Qg)},h.prototype.Op=function(){return this.Za.Uf?this.Za.bg.ka(this.Qg):this.Za.Vi.getData(this.Qg)},h}();p.AY=n;var a=function(){function h(f){this.Cm=this.bi=this.bg=this.Vi=this.Mm=this.Gj=this.ne=this.Hj=null,this.Uf=f,this.nq=this.Uv=!1}return h.prototype.mr=function(){this.Pk(!0)},h.prototype.Dr=function(f,m){if(!this.Uv)throw p.i.Hb();this.Hj.push(new p.Oc(f,m))},h.prototype.Hp=function(){if(!this.Uv)throw p.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Uf||(this.qS(),this.aw=this.Hj.length)},h.prototype.xj=function(f){if(!this.Uf||!this.nq)throw p.i.O("invalid call");if(this.kf==-1){var m=this.Hj.length;if(this.dA){var y=new p.ja(0);y.Jb(2*m),this.XI(y),this.bi.Jb(2*m),this.bi.resize(0),this.WI(y),this.Mm.resize(m,-1),this.Mm.Yj(-1,0,m),this.dA=!1}else this.Mm.Yj(-1,0,m);this.kf=this.Vu()}m=this.kG(f<<1,this.kf),y=this.bg.addElement(1+(f<<1),this.rz(m)),this.QJ(m,y),this.Mm.set(f,m),this.aw++},h.prototype.remove=function(f){if(!this.Uf||!this.nq)throw p.i.ga("invalid call");var m=this.Mm.get(f);if(m==-1)throw p.i.O("the interval does not exist in the interval tree");this.Mm.set(f,-1),this.aw--;var y=this.rz(m),w=this.bg.UR(y);this.bg.wd(this.rR(m),y),this.bg.wd(this.OR(m),y),(f=this.bg.size(y))==0&&(this.bg.HP(y),this.UJ(w,-1)),this.Gj.kd(m),y=this.PF(w);var I=this.sj(w),M=this.nk(w);for(m=0;!(0<f||w==this.kf||I!=-1&&M!=-1);)w==this.sj(y)?I!=-1?(this.Qk(y,I),this.Wj(I,y),this.Qk(w,-1)):M!=-1?(this.Qk(y,M),this.Wj(M,y),this.Sk(w,-1)):this.Qk(y,-1):I!=-1?(this.Sk(y,I),this.Wj(I,y),this.Qk(w,-1)):M!=-1?(this.Sk(y,M),this.Wj(M,y),this.Sk(w,-1)):this.Sk(y,-1),this.Wj(w,-1),m++,w=y,f=(y=this.pk(w))!=-1?this.bg.size(y):0,I=this.sj(w),M=this.nk(w),y=this.PF(w)},h.prototype.reset=function(){if(!this.Uf||!this.nq)throw p.i.O("invalid call");this.Pk(!1)},h.prototype.size=function(){return this.aw},h.prototype.getIterator=function(){return n.construct(this)},h.prototype.XI=function(f){for(var m=this.Hj.length,y=0;y<2*m;y++)f.add(y);this.DX(f,2*m)},h.prototype.WI=function(f){for(var m=NaN,y=0;y<f.size;y++){var w=f.get(y),I=this.qk(w);I!=m&&(this.bi.add(w),m=I)}},h.prototype.qS=function(){var f=this.Hj.length,m=new p.ja(0);m.Jb(2*f),this.XI(m),this.bi.Jb(2*f),this.bi.resize(0),this.WI(m),this.Gj.Ee(f),this.Vi.hn(2*f);var y=p.Zc.Qh(f);for(y.Yj(-1,0,f),this.kf=this.Vu(),f=0;f<m.size;f++){var w=m.get(f),I=y.get(w>>1);I!=-1?this.QJ(I,this.Vi.addElement(this.rz(I),w)):(I=this.kG(w,this.kf),y.set(w>>1,I))}},h.prototype.kG=function(f,m){var y=m,w=m,I=-1,M=0,T=this.bi.size-1,$=0,F=f>>1,R=NaN,j=NaN,H=!0,W=this.yR(F);for(F=this.vR(F);H;){M<T?($=M+p.P.truncate((T-M)/2),this.bz(y)==-1&&this.AJ(y,this.bi.get($),this.bi.get($+1))):this.bz(y)==-1&&this.AJ(y,this.bi.get(M),this.bi.get(M));var V=this.Pp(y);if(F<V)m!=-1&&(m==y?(w=y,R=V,j=(m=this.sj(y))!=-1?this.Pp(m):NaN):j>V&&(V<R?this.Qk(w,y):this.Sk(w,y),this.Sk(y,m),this.Uf&&(this.Wj(y,w),this.Wj(m,y)),w=y,R=V,m=-1,j=NaN)),(T=this.sR(y))==-1&&(T=this.Vu(),this.ZW(y,T)),y=T,T=$;else if(W>V)m!=-1&&(m==y?(w=y,R=V,j=(m=this.nk(y))!=-1?this.Pp(m):NaN):j<V&&(V<R?this.Qk(w,y):this.Sk(w,y),this.Qk(y,m),this.Uf&&(this.Wj(y,w),this.Wj(m,y)),w=y,R=V,m=-1,j=NaN)),(M=this.PR(y))==-1&&(M=this.Vu(),this.jX(y,M)),y=M,M=$+1;else{(H=this.pk(y))==-1&&(H=this.uP(y),this.UJ(y,H));var Y=this.aN(H,f);I=this.sP(),this.mX(I,H),this.YW(I,Y),y!=m&&(V<R?this.Qk(w,y):this.Sk(w,y),this.Uf&&this.Wj(y,w),m!=-1&&(j<V?this.Qk(y,m):this.Sk(y,m),this.Uf&&this.Wj(m,y))),H=!1}}return I},h.prototype.Vu=function(){return this.ne.De()},h.prototype.uP=function(f){return this.Uf?this.bg.Rr(f):this.Vi.Rh(f)},h.prototype.sP=function(){return this.Gj.De()},h.prototype.Pk=function(f){f?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=p.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Uf?this.Mm==null?(this.Mm=p.Zc.Qh(0),this.bg=new p.$j,this.bg.Xo(new d(this))):this.bg.clear():this.Vi==null?this.Vi=new p.lp:this.Vi.clear(),this.ne==null?(this.Gj=new p.ad(3),this.ne=new p.ad(this.Uf?8:7)):(this.Gj.oj(!1),this.ne.oj(!1)),this.kf=-1,this.aw=0},h.prototype.AJ=function(f,m,y){this.SW(f,m),this.TW(f,y)},h.prototype.Pp=function(f){var m=this.bz(f);return m==-1?NaN:(m=this.qk(m))==(f=this.qk(this.bR(f)))?m:.5*(m+f)},h.prototype.SW=function(f,m){this.ne.T(f,0,m)},h.prototype.TW=function(f,m){this.ne.T(f,1,m)},h.prototype.ZW=function(f,m){this.ne.T(f,3,m)},h.prototype.jX=function(f,m){this.ne.T(f,4,m)},h.prototype.UJ=function(f,m){this.ne.T(f,2,m)},h.prototype.Qk=function(f,m){this.ne.T(f,5,m)},h.prototype.Sk=function(f,m){this.ne.T(f,6,m)},h.prototype.Wj=function(f,m){this.ne.T(f,7,m)},h.prototype.mX=function(f,m){this.Gj.T(f,0,m)},h.prototype.aN=function(f,m){return this.Uf?this.bg.addElement(m,f):this.Vi.addElement(f,m)},h.prototype.YW=function(f,m){this.Gj.T(f,1,m)},h.prototype.QJ=function(f,m){this.Gj.T(f,2,m)},h.prototype.ml=function(f){return this.Uf?this.bg.sc(f):this.Vi.sc(f)},h.prototype.bs=function(f){return this.Uf?this.bg.Gc(f):this.Vi.Gc(f)},h.iq=function(f){return(1&f)==0},h.Iv=function(f){return(1&f)==1},h.prototype.bz=function(f){return this.ne.U(f,0)},h.prototype.bR=function(f){return this.ne.U(f,1)},h.prototype.pk=function(f){return this.ne.U(f,2)},h.prototype.sR=function(f){return this.ne.U(f,3)},h.prototype.PR=function(f){return this.ne.U(f,4)},h.prototype.sj=function(f){return this.ne.U(f,5)},h.prototype.nk=function(f){return this.ne.U(f,6)},h.prototype.PF=function(f){return this.ne.U(f,7)},h.prototype.rz=function(f){return this.Gj.U(f,0)},h.prototype.rR=function(f){return this.Gj.U(f,1)},h.prototype.OR=function(f){return this.Gj.U(f,2)},h.prototype.yR=function(f){return this.Hj[f].pa},h.prototype.vR=function(f){return this.Hj[f].wa},h.prototype.DX=function(f,m){this.Cm==null&&(this.Cm=new p.Zt);var y=new l(this);this.Cm.sort(f,0,m,y)},h.prototype.CX=function(f,m,y){var w=this;f.Wd(m,y,function(I,M){var T=w.qk(I),$=w.qk(M);return T<$||T==$&&h.iq(I)&&h.Iv(M)?-1:1})},h.prototype.qk=function(f){var m=this.Hj[f>>1];return h.iq(f)?m.pa:m.wa},h}();p.ur=a}(Q||(Q={})),function(p){var P=function(){function x(d){if(d==null)throw p.i.ga("Invalid arguement");this.hf=d;var l=d.iR();l.cS()?d.ef.DG()?this.no=p.ui.PannableFold:this.no=p.ui.Clip:this.no=p.ui.DontClip,l.dS()?d.$f.DG()?this.Sm=p.ui.PannableFold:this.Sm=p.ui.Clip:this.Sm=p.ui.DontClip,this.Dm=l.Lr,this.hH=l.Xu,d=this.hf.nH,this.WG=d.ks(2147483648),this.Wv=d.ks(1073741824)}return x.Bh=function(d,l,n){return l.yw.Bh(d,n)},x.Tt=function(d,l,n,a){return d.yw.Tt(l,n,a)},x.St=function(d,l,n,a){if(n=0>n?l.length:n,(d=d.yw.Tt(l,n,a))==n)return d;for(var h=l=0;h<n;h++){var f=a[h];f.isNaN()||(l<h&&a[l].N(f),l++)}for(;l<n;l++)a[l].Sc();return d},x.transform=function(d,l,n,a,h){if(d.isIdentity())return p.ua.fP(a,l,n),n;for(var f=[],m=0,y=0;y<n;){for(var w=Math.min(f.length,n-y),I=y,M=0;I<w;I++,M++)f[M]==null?f[M]=l[I].D():l[I].D(f[M]);var T=h?x.St(d,f,w,f):x.Tt(d,f,w,f);for(M=I=0;I<T;I++,M++)a[y]==null&&(a[y]=new p.Ta(l[y])),a[y].Db(f[M]);y+=w,m+=T}return m},x.prototype.Tt=function(d,l,n){if(this.hf.isIdentity())return d!=n&&p.ua.Tu(n,d,l),l;var a=this.hf.ef,h=this.hf.$f,f=a.Tb(),m=h.Tb();if(f==0&&f===m){var y=a.Sp();return h=y/(h=h.Sp()),(y=new p.Ed).Jt(h,h),y.aY(d,l,n),l}if(y=p.P.Hu(Math.min(l,64)),f==3){var w=a.Li;f=(a=w.hk()).Tb(),n!=d&&p.ua.Tu(n,d,l),p.Ab.bl(w,n,l,!0),w.St(p.dm.forward,n,l),p.Ab.al(w,n,l,!0)}if(f==3||m===3)throw p.i.ga("image: transform_in_place_");if(f==2)this.no==p.ui.Clip?(n!=d&&p.ua.Tu(n,d,l),d=a.ol(),p.Ab.JS(d,a,n,l)):(n!=d&&p.ua.Tu(n,d,l),a.Xc()&&(f=a.Yd(0),w=a.Le(),p.Ab.AX(n,l,w,f),p.Ab.lF(n,l,a,0))),p.Ab.DL(a,n,l,y);else for(f=a.Yd(0),w=a.Le(),a=0;a<l;a++)p.Ab.BX(d[a],w,f,n[a]);for(p.Ab.BL(this.hf,n,l,y),d=0,(m=m==2)?d=h.Bi():isNaN(this.Dm)||(d=this.Dm),m&&this.Sm!=p.ui.Clip||p.Ab.lF(n,l,h.tc(),d),m&&(p.Ab.tG(n,l,h,this.Sm),p.Ab.CL(h,n,l,y)),d=l,a=0;a<l;++a)n[a].isNaN()&&d--;return d},x.prototype.Bh=function(d,l){if(this.hf.isIdentity()||d.B())return d;if(d.K()==33)return this.SI(d);var n=this.hf.ef,a=this.hf.$f,h=n.Tb(),f=a.Tb();if(h==0&&h==f)return l=n.Sp(),l/=a=a.Sp(),(a=new p.Ed).Jt(l,l),(d=p.ba.kg(d)).Pc(a),d;switch(d.K()){case 1607:case 1736:d=this.QI(d,l);break;case 550:d=this.aW(d,l);break;case 197:d=this.$V(d,l);break;default:throw p.i.ga("")}return d},x.prototype.SI=function(d){var l=d.D(),n=[];return n[0]=l,this.Tt(n,1,n),(d=new p.Ta(d)).Db(n[0]),d},x.prototype.QI=function(d,l){if(d.vm())throw p.i.ga("curves not supported");var n=d.K();if(n==1736)return this.bW(d,l);if(n==1607)return this.cW(d,l);throw p.i.ga("projectMultiPath")},x.prototype.bW=function(d,l){var n=this.hf.ef,a=this.hf.$f,h=n.Tb(),f=a.Tb(),m=p.P.Hu(Math.min(d.I(),64)),y=p.Ea.kg(d);h==3&&(h=(n=(d=n.Li).hk()).Tb(),y=d.bl(y,!0),this.yp(d,p.dm.forward,y),y=d.al(y,!0)),d=null,f==3&&(f=(a=(d=a.Li).hk()).Tb());var w=h==2,I=f==2,M=I?a.tc():a,T=!I&&!this.Wv;f=!1;var $=y;if(w){if(($=p.Ab.OI($,n,this.no,l)).B())return $}else{if(y=new p.l,$.yc(y),h=n.Le(),y.G<h.G||y.H>h.H){var F=p.l.construct(y.v-1,h.G,y.C+1,h.H);if(($=p.ti.Pu($,F,n,NaN,0,l)).B())return $}y.S()>2*h.S()&&($=p.Ab.Jp($,-2*h.S(),2*h.S(),n,!0,0,!0,l))}y=this.hH,(h=!isNaN(y))&&($=p.Zl.local().W($,y,l)),F=I?a.mk():null;var R=NaN;w&&(R=n.Bi());var j=a.Yr()!=null;if(this.WG)w&&(p.Ab.wr(n,R,$,m),h&&(w=n.jh(),y*=(R=n.tc().jh())/w)),p.Ab.vr(this.hf,$,T,m),h&&(w=n.tc().jh(),y*=(R=a.tc().jh())/w),n=$;else{var H=new p.Ua($.description);H.yD($),w&&(p.Ab.wr(n,R,H,m),h&&(w=n.jh(),y*=(R=n.tc().jh())/w)),p.Ab.vr(this.hf,H,T,m),h&&(w=n.tc().rm(),y*=(R=a.tc().rm())/w),T=NaN,I?(F=a.mk(),T=a.Bi()):isNaN(this.Dm)||(T=this.Dm),w=x.vv(n)|x.vv(a),R=10*M.Yd(0),this.Wv&&(w=3,R=0),n=p.Ab.PQ($,n,H,M,T,l,w,R)}return j&&(n=p.Ab.SD(n,a,l)),I&&(f||(I=M.Le().S(),n.Vg(0,0).S()>=I-M.Yd(0)&&(M=F.getNorthPoleLocation(),I=F.getSouthPoleLocation(),$=F.getNorthPoleGeometry(),F=F.getSouthPoleGeometry(),T=0,$==p.Eg.PE_POLE_POINT&&M!=p.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T=1),F==p.Eg.PE_POLE_POINT&&I!=p.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(T|=2),T!==0&&(f=!0))),n=p.Ab.Hz(n,a,this.Sm,l),h&&(n=p.Zl.local().W(n,y,l)),p.Ab.Kx(a,n,m)),n.B()||(f&&(n=p.$l.local().W(n,a,!1,l)),d!=null&&(n=d.al(n,!1),this.yp(d,p.dm.reverse,n),n=d.bl(n,!1))),n},x.vv=function(d){if(d.Tb()!=2)return 0;var l=0,n=d.mk();d=n.getNorthPoleLocation();var a=n.getSouthPoleLocation(),h=n.getNorthPoleGeometry();return n=n.getSouthPoleGeometry(),h==p.Eg.PE_POLE_POINT&&d!=p.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(l=1),n==p.Eg.PE_POLE_POINT&&a!=p.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(l|=2),l},x.prototype.cW=function(d,l){var n=this.hf.ef,a=this.hf.$f,h=n.Tb(),f=a.Tb(),m=p.P.Hu(Math.min(d.I(),64)),y=p.Ua.kg(d);h==3&&(h=(n=(d=n.Li).hk()).Tb(),y=d.bl(y,!0),this.yp(d,p.dm.forward,y),y=d.al(y,!0)),d=null,f==3&&(f=(a=(d=a.Li).hk()).Tb());var w=h==2;h=(f=f==2)?a.tc():a;var I=!f&&!this.Wv;if(w){if((y=p.Ab.OI(y,n,this.no,l)).B())return y}else{var M=new p.l;y.yc(M);var T=n.Le();if((M.G<T.G||M.H>T.H)&&(M=p.l.construct(M.v-1,T.G,M.C+1,T.H),(y=p.ti.Pu(y,M,n,NaN,0,l)).B()))return y}var $=NaN;w&&($=n.Bi()),M=a.Yr()!=null,T=this.hH;var F=!isNaN(T);if(F&&(y=p.Zl.local().W(y,T,l)),this.WG)w&&p.Ab.wr(n,$,y,m),F&&(w=n.jh(),T*=($=n.tc().jh())/w),p.Ab.vr(this.hf,y,I,m),F&&(w=n.tc().jh(),T*=($=a.tc().jh())/w),n=y;else{var R=new p.Ua(y.description);R.yD(y),w&&(p.Ab.wr(n,$,R,m),F&&(w=n.jh(),T*=($=n.tc().jh())/w)),p.Ab.vr(this.hf,R,I,m),F&&(w=n.tc().jh(),T*=($=a.tc().jh())/w),I=NaN,f?I=a.Bi():isNaN(this.Dm)||(I=this.Dm),w=x.vv(n)|x.vv(a),$=10*h.Yd(0),this.Wv&&(w=3,$=0),n=p.Ab.QQ(y,n,R,h,I,l,w,$)}return M&&(n=p.Ab.SD(n,a,l)),f&&(n=p.Ab.Hz(n,a,this.Sm,l),F&&(n=p.Zl.local().W(n,T,l)),p.Ab.Kx(a,n,m)),n.B()||d!=null&&(n=d.al(n,!1),this.yp(d,p.dm.reverse,n),n=d.bl(n,!1)),n},x.prototype.$V=function(d,l){var n=(d.da()+d.S())/400;return n!=0?(n=p.Zl.local().W(d,n,l),n=this.QI(n,l),l=d.Ja(),n.dn(l)):(l=new p.Ta(d.Kp()),n=this.SI(l),l=d.Ja(),n.B()?l.Pa():(d.copyTo(l),d=n.D(),l.L(d.x,d.y,d.x,d.y))),l},x.prototype.aW=function(d,l){d=p.ba.kg(d);var n=this.hf.ef,a=this.hf.$f,h=n.Tb(),f=a.Tb(),m=p.P.Hu(Math.min(d.I(),64));if(h==3){var y=n.Li;h=(n=y.hk()).Tb(),d=y.al(d,!0),this.yp(y,p.dm.forward,d),d=y.bl(d,!0)}if(h==2){if(this.no==p.ui.Clip?d=p.Zj.local().W(d,n.ol(),n,l):n.Xc()&&(h=new p.l,d.yc(h),n.Le().contains(h)||(this.no==p.ui.PannableFold&&(d=p.Ab.nj(d,n)),p.Ab.Lt(d,n.Le(),n.Yd(0),!0),d=p.Ab.Hn(d,n,0,!0,0,l))),d.B())return d;p.Ab.wr(n,0,d,m)}else p.Ab.Lt(d,n.Le(),n.Yd(0),!0);return p.Ab.vr(this.hf,d,!1,m),n=0,h=!1,y=null,f==3&&(h=!0,f=(a=(y=a.Li).hk()).Tb()),(f=f==2)?n=a.Bi():isNaN(this.Dm)||(n=this.Dm),f&&this.Sm!=p.ui.Clip||(d=p.Ab.Hn(d,a.tc(),n,!1,0,l)),f&&(d=p.Ab.Hz(d,a,this.Sm,l),p.Ab.Kx(a,d,m),d.B())||h&&(d=y.al(d,!0),this.yp(y,p.dm.reverse,d),d=y.bl(d,!0)),d},x.prototype.yp=function(d,l,n){var a=n.I();if(a!=0){for(var h=n.vb(0),f=p.P.mg(200,0),m=[],y=0;y<a;){var w=Math.min(100,a-y);h.Xw(2*y,2*w,f,2,!0);for(var I=0;I<w;++I)m[I]=p.h.construct(f[2*y],f[2*y+1]);d.St(l,m,w),y+=w}n.Qc(1993)}},x.Py=function(d,l,n){if(d==null||l==null||!l.Xc())throw p.i.ga("Invalid Arguement");if(d.B())return d;var a=d.K();return a==197?(a=new p.Ea(d.description)).bd(d,!1):p.ba.zd(a)?(a=new p.Ua(d.description)).pc(d,!0):a=d,(a=p.Ab.nj(a,l)).B()?a:p.Ab.Hn(a,l,0,a!=d,0,n)},x.pj=function(d,l,n,a){if(d==null||l==null||!l.Xc())throw p.i.ga("Invalid Arguement");if(d.B())return d;var h=d.K();if(p.ba.Ic(h)){d=p.Ab.nj(d,l),h=new p.l,d.A(h);for(var f=p.ua.oy(l,h,!1),m=l.ih(),y=Math.floor((h.v-m.v)/m.S())*m.S()+m.v;y<h.C;)y>h.v+f&&y<h.C-f&&(d=p.Ab.pS(d,l,n,y)),y+=m.S()}else{if(h==197)return(h=new p.Ea(d.description)).bd(d,!1),x.pj(h,l,n,a);if(p.ba.zd(h))return(h=new p.Ua(d.description)).pc(d,!0),x.pj(h,l,n,a)}return x.Py(d,l,a)},x}();p.du=P}(Q||(Q={})),function(p){var P=function(x){function d(l,n,a,h){var f=x.call(this)||this;return l===void 0?f.description=p.fe.pg():a===void 0?f.description=l:(f.description=p.fe.pg(),f.UB(l,n),f.Sl(a,h)),f}return Et(d,x),d.prototype.K=function(){return 322},d.prototype.Rb=function(){var l=this.ta-this.qa,n=this.oa-this.ma;return Math.sqrt(l*l+n*n)},d.prototype.Di=function(l){var n=this.ta-this.qa,a=this.oa-this.ma;return Math.sqrt(n*n+a*a)<=l},d.prototype.Rn=function(){return!1},d.prototype.lg=function(){var l=new p.h;return l.vc(this.xc(),this.bc()),l},d.YO=function(l,n){return new d(l.x,l.y,n.x,n.y)},d.prototype.dn=function(l){l.Pa(),l.Pf(this.description);var n=new p.l;this.A(n),l.Zo(n),n=1;for(var a=this.description.Ba;n<a;n++)for(var h=this.description.ld(n),f=p.sa.Wa(h);n<f;n++){var m=this.Vg(h,0);l.setInterval(h,0,m)}},d.prototype.A=function(l){l.L(this.ta,this.oa,this.qa,this.ma),l.normalize()},d.prototype.So=function(l){l.Pa(),l.$b(this.ta,this.oa,this.Pd(0,1,0)),l.$b(this.qa,this.ma,this.Pd(1,1,0))},d.prototype.Pc=function(l){if(l instanceof p.Ed){this.wc();var n=new p.h;n.x=this.ta,n.y=this.oa,l.Gh(n,n),this.ta=n.x,this.oa=n.y,n.x=this.qa,n.y=this.ma,l.Gh(n,n),this.qa=n.x,this.ma=n.y}else this.wc(),(n=new p.Od).x=this.ta,n.y=this.oa,n.z=this.Pd(0,1,0),n=l.hp(n),this.ta=n.x,this.oa=n.y,this.vn(0,1,0,n.z),n.x=this.qa,n.y=this.ma,n.z=this.Pd(1,1,0),n=l.hp(n),this.qa=n.x,this.ma=n.y,this.vn(1,1,0,n.z)},d.prototype.Ja=function(){return new d(this.description)},d.prototype.Sx=function(l,n){return(this.qa-l-(this.ta-l))*(this.ma-n+(this.oa-n))*.5},d.prototype.ux=function(l){return l*this.Rb()},d.prototype.IG=function(l){return l/this.Rb()},d.prototype.yF=function(l){return p.mc.jq(this.ta,this.qa,l)},d.prototype.aR=function(l){return p.mc.jq(this.oa,this.ma,l)},d.prototype.fl=function(l,n){var a=new p.jg;return this.dh(l,n,a),a.get()},d.prototype.dh=function(l,n,a){if(a==null)throw p.i.O();a.Qr(),(a=a.get()).Pf(this.description);var h=new p.h;this.ic(l,h),a.UB(h.x,h.y),this.ic(n,h),a.Sl(h.x,h.y),h=1;for(var f=this.description.Ba;h<f;h++)for(var m=this.description.Fd(h),y=p.sa.Wa(m),w=0;w<y;w++){var I=this.Vc(l,m,w);a.TB(m,w,I),I=this.Vc(n,m,w),a.JB(m,w,I)}},d.prototype.Vc=function(l,n,a){if(n==0)return a==0?this.ic(l).x:this.ic(l).y;switch(p.sa.gz(n)){case 0:return .5>l?this.yv(n,a):this.jv(n,a);case 1:var h=this.yv(n,a);return n=this.jv(n,a),p.mc.jq(h,n,l);case 2:throw p.i.ga("not implemented")}throw p.i.Ra()},d.prototype.ge=function(l,n){var a=this.qa-this.ta,h=this.ma-this.oa,f=a*a+h*h;return f==0?.5:(l=((l.x-this.ta)*a+(l.y-this.oa)*h)/f,n||(0>l?l=0:1<l&&(l=1)),l)},d.prototype.fq=function(l,n,a,h){if(l){if((l=this.ma-this.oa)==0)return n==this.ma?-1:0;if(0>(n=(n-this.oa)/l)||1<n)return 0;a!=null&&(a[0]=this.yF(n))}else{if((l=this.qa-this.ta)==0)return n==this.qa?-1:0;if(0>(n=(n-this.ta)/l)||1<n)return 0;a!=null&&(a[0]=this.aR(n))}return h!=null&&(h[0]=n),1},d.prototype.Me=function(l,n){var a=this.ma-this.oa;return a==0?l==this.ma?n:NaN:(l=(l-this.oa)/a,n=this.yF(l),l==1&&(n=this.qa),n)},d.prototype.tu=function(l,n,a){return 0<=this.tp(l.x,l.y,n,a)},d.prototype.xi=function(l,n,a){return 0<=this.tp(l,n,a,!0)},d.prototype.ss=function(l,n){return this.tu(l,n,!1)},d.prototype.mI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.ta){var l=this.ta;this.ta=this.qa,this.qa=l,l=this.oa,this.oa=this.ma,this.ma=l,l=0;for(var n=this.description.Qq-2;l<n;l++){var a=this.la[l];this.la[l]=this.la[l+n],this.la[l+n]=a}}},d.prototype.wu=function(l,n){(n=p.h.construct(l,n)).sub(this.bc());var a=new p.h;return a.vc(this.xc(),this.bc()),(l=a.yi(n))>(n=8881784197001252e-31*(Math.abs(a.x*n.y)+Math.abs(a.y*n.x)))?-1:l<-n?1:0},d.prototype.tp=function(l,n,a,h){var f=this.ta,m=this.oa,y=l-f,w=n-m;if((y=Math.sqrt(y*y+w*w))<=Math.max(a,6661338147750939e-31*y))return h&&y==0?NaN:0;if(y=l-this.qa,w=n-this.ma,(y=Math.sqrt(y*y+w*w))<=Math.max(a,6661338147750939e-31*y))return h&&y==0?NaN:1;if(y=this.qa-this.ta,w=this.ma-this.oa,0<(h=Math.sqrt(y*y+w*w))){var I=1/h,M=l-f,T=n-m,$=M*(y*=I)+T*(w*=I),F=17763568394002505e-31*(Math.abs(M*y)+Math.abs(T*w)),R=y;if(y=-w,w=R,$<-(F=Math.max(a,F))||$>h+F)return NaN;if(Math.abs(M*y+T*w)<=Math.max(a,17763568394002505e-31*(Math.abs(M*y)+Math.abs(T*w)))&&(.5>=(y=p.P.Tk($*I,0,1))?(w=this.ta+(this.qa-this.ta)*y,h=this.oa+(this.ma-this.oa)*y):(w=this.qa-(this.qa-this.ta)*(1-y),h=this.ma-(this.ma-this.oa)*(1-y)),p.h.Jy(w,h,l,n)<=a)){if(.5>y){if(p.h.Jy(w,h,f,m)<=a)return 0}else if(p.h.Jy(w,h,this.qa,this.ma)<=a)return 1;return y}}return NaN},d.prototype.Nb=function(l){return l!=null&&(l==this||l.constructor===this.constructor&&this.AM(l))},d.prototype.mD=function(l,n,a){var h=a?this.ta:this.qa;a=a?this.oa:this.ma;var f=new p.h;return f.x=l.qa-h,f.y=l.ma-a,!(n.Sh(f)>6661338147750939e-31*n.aD(f))||(f.x=l.ta-h,f.y=l.oa-a,n.Sh(f)<=6661338147750939e-31*n.aD(f))},d.prototype.lD=function(l){var n=new p.h;return n.x=this.qa-this.ta,n.y=this.ma-this.oa,!!this.mD(l,n,!1)&&(n.Uq(),!!this.mD(l,n,!0))},d.IM=function(l,n){var a=l.wu(n.ta,n.oa),h=l.wu(n.qa,n.ma);return!(0>a&&0>h||0<a&&0<h)&&(a=n.wu(l.ta,l.oa),h=n.wu(l.qa,l.ma),!(0>a&&0>h||0<a&&0<h)&&((a=l.Rb())>(h=n.Rb())?l.lD(n):n.lD(l)))},d.GM=function(l,n,a){var h=p.h.construct(NaN,NaN),f=l.qa-l.ta,m=l.ma-l.oa,y=n.qa-n.ta,w=n.ma-n.oa,I=y*m-f*w;if(I==0)return h;var M=8881784197001252e-31*(Math.abs(y*m)+Math.abs(f*w)),T=n.ta-l.ta,$=n.oa-l.oa,F=y*$-T*w,R=F/I,j=Math.abs(I);return R<-(y=(8881784197001252e-31*(Math.abs(y*$)+Math.abs(T*w))*j+M*Math.abs(F))/(I*I)+2220446049250313e-31*Math.abs(R))||R>1+y||(y=(w=f*$-T*m)/I)<-(f=(8881784197001252e-31*(Math.abs(f*$)+Math.abs(T*m))*j+M*Math.abs(w))/(I*I)+2220446049250313e-31*Math.abs(y))||y>1+f||(R=p.P.Tk(R,0,1),f=p.P.Tk(y,0,1),m=l.ic(R),I=n.ic(f),(M=new p.h).vc(m,I),M.length()>a&&(M.add(m,I),M.scale(.5),R=l.ge(M,!1),f=n.ge(M,!1),l=l.ic(R),n=n.ic(f),l.sub(n),l.length()>a)||h.na(R,f)),h},d.JM=function(l,n,a,h){var f=0;if((l.ta==n.ta&&l.oa==n.oa||l.ta==n.qa&&l.oa==n.ma)&&(f++,!h))return 1;if(l.qa==n.ta&&l.ma==n.oa||l.qa==n.qa&&l.ma==n.ma){if(++f==2)return 2;if(!h)return 1}return n.xi(l.ta,l.oa,a)||n.xi(l.qa,l.ma,a)||l.xi(n.ta,n.oa,a)||l.xi(n.qa,n.ma,a)?1:h&&f!=0||d.IM(l,n)==0?0:1},d.Yx=function(l,n,a,h,f,m){var y=0,w=l.tp(n.ta,n.oa,m,!1),I=l.tp(n.qa,n.ma,m,!1),M=n.tp(l.ta,l.oa,m,!1),T=n.tp(l.qa,l.ma,m,!1);return isNaN(w)||(h!=null&&(h[y]=w),f!=null&&(f[y]=0),a!=null&&(a[y]=p.h.construct(n.ta,n.oa)),y++),isNaN(I)||(h!=null&&(h[y]=I),f!=null&&(f[y]=1),a!=null&&(a[y]=p.h.construct(n.qa,n.ma)),y++),y==2||isNaN(M)||w==0&&M==0||I==0&&M==1||(h!=null&&(h[y]=0),f!=null&&(f[y]=M),a!=null&&(a[y]=p.h.construct(l.ta,l.oa)),y++),y==2||isNaN(T)||w==1&&T==0||I==1&&T==1||(h!=null&&(h[y]=1),f!=null&&(f[y]=T),a!=null&&(a[y]=p.h.construct(n.qa,n.ma)),y++),0<y?(y==2&&h!=null&&h[0]>h[1]&&(l=h[0],h[0]=h[1],h[1]=l,f!=null&&(h=f[0],f[0]=f[1],f[1]=h),a!=null&&(f=p.h.construct(a[0].x,a[0].y),a[0]=a[1],a[1]=f)),y):(y=d.GM(l,n,m),isNaN(y.x)?0:(a!=null&&(a[0]=l.ic(y.x)),h!=null&&(h[0]=y.x),f!=null&&(f[0]=y.y),1))},d.prototype.$F=function(){return 0},d.prototype.qp=function(){},d.prototype.toString=function(){return"Line: ["+this.ta.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},d}(p.NC);p.zb=P}(Q||(Q={})),function(p){var P=function(){function x(){this.Lm=[],this.za=-1}return x.prototype.Ma=function(){return this.za},x.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var d=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),d}return this.Lm=null},x.prototype.VX=function(d){this.Lm.push(d)},x.prototype.re=function(){},x}();p.bL=P}(Q||(Q={})),function(p){var P;(P=p.NL||(p.NL={}))[P.enumFillRuleOddEven=0]="enumFillRuleOddEven",P[P.enumFillRuleWinding=1]="enumFillRuleWinding";var x=function(d){function l(n,a){var h=d.call(this)||this;if(h.yf=!1,h.Gq=null,h.uq=0,h.tq=0,h.Cj=null,h.Og=!1,h.nb=null,h.mb=null,h.Se=null,h.Nj=null,h.Td=null,h.vq=0,h.gb=0,h.zq=0,a===void 0)h.yf=n,h.Og=!1,h.vq=0,h.uq=0,h.tq=0,h.xa=0,h.description=p.fe.pg();else{if(a==null)throw p.i.O();h.yf=n,h.Og=!1,h.vq=0,h.uq=0,h.tq=0,h.xa=0,h.description=a}return h.Cj=null,h.gb=0,h}return Et(l,d),l.prototype.vm=function(){return 0<this.vq},l.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new p.Ta(this.description):this.Gq.Pf(this.description)},l.prototype.rx=function(n,a){var h=new p.h;h.x=n,h.y=a,this.Nt(h)},l.prototype.Nt=function(n){this.Xx(),this.Gq.Db(n),this.Og=!0},l.prototype.nf=function(n){if(n.B())throw p.i.O();this.Ll(n.description),this.Xx(),n.copyTo(this.Gq),this.Og=!0},l.prototype.Rx=function(){var n=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=p.Zc.Qh(2),this.nb.write(0,0),this.mb=p.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),n++);var a=this.xa;this.nb.write(this.nb.size-1,this.xa+n),this.fm(a+n),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(a,this.Gq),this.Og=!1)},l.prototype.Aj=function(n,a){this.Rx(),this.Db(this.xa-1,n,a)},l.prototype.Ei=function(n){this.Rx(),this.Db(this.xa-1,n)},l.prototype.lineTo=function(n){this.Rx(),this.It(this.xa-1,n)},l.prototype.xU=function(n){if(this.wc(),this.yf)throw p.i.Ra();var a=this.ea();if(n>a)throw p.i.Ra();if(this.ec(n)){if(this.mb==null)throw p.i.Ra();var h=this.xa,f=this.Ca(n),m=this.Wc(n);this.fm(this.xa+1),this.oc();for(var y=0,w=this.description.Ba;y<w;y++)if(this.Aa[y]!=null){var I=p.sa.Wa(this.description.Fd(y));this.Aa[y].On(I*m,this.Aa[y],I*f,I,!0,1,I*h)}for(;a>n;a--)h=this.nb.read(a),this.nb.write(a,h+1);this.mb.FE(n,1)}},l.prototype.Cp=function(){if(this.vx(),n===void 0){this.Og=!1;var n=this.ea()-1}var a=this.mb.read(n);this.mb.write(n,1|a),this.Se!=null&&(n=this.Wc(n)-1,this.Se.write(n,1),this.Nj.write(n,-1))},l.prototype.ec=function(n){return(1&this.mb.read(n))!=0},l.prototype.Pn=function(n){if(this.ec(n))return!0;var a=this.Ca(n);return!(a>(n=this.Wc(n)-1))&&(a=this.Oa(a),n=this.Oa(n),a.rb(n))},l.prototype.Av=function(n){return(2&this.mb.read(n))!=0},l.prototype.pc=function(n,a){if(this.Ll(n.description),n.K()!=322)throw p.i.Ra();var h=new p.Ta;(a||this.B())&&(n.Vo(h),this.nf(h)),n.Ro(h),this.lineTo(h)},l.prototype.vp=function(n){var a=this.xa==0;this.rx(n.v,n.G),this.Aj(n.v,n.H),this.Aj(n.C,n.H),this.Aj(n.C,n.G),this.Cp(),this.Og=!1,a&&this.Nf(256,!1)},l.prototype.bd=function(n,a){if(!n.B()){for(var h=this.xa==0,f=new p.Ta(this.description),m=0;4>m;m++)n.If(a?4-m-1:m,f),m==0?this.nf(f):this.lineTo(f);this.Cp(),this.Og=!1,h&&!a&&this.Nf(256,!1)}},l.prototype.add=function(n,a){for(var h=0;h<n.ea();h++)this.addPath(n,h,!a)},l.prototype.addPath=function(n,a,h){this.wf(-1,n,a,h)},l.prototype.$k=function(n,a){this.Cz(n,a)},l.prototype.Fr=function(n,a,h,f,m){if(m||this.ea()!=0||(m=!0),0>a&&(a=n.ea()-1),a>=n.ea()||0>h||0>f||f>n.tv(a))throw p.i.ga("index out of bounds");if(f!=0){var y=n.ec(a)&&h+f==n.tv(a);if(!y||f!=1){if(this.Og=!1,this.Ll(n.description),h=n.Ca(a)+h+1,m&&(f++,h--),y&&f--,y=this.xa,this.fm(this.xa+f),this.oc(),m){if(f==0)return;this.nb.add(this.xa),m=n.mb.read(a),m&=-5,this.yf&&(m|=1),this.mb.write(this.mb.size-1,m),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);m=0;for(var w=this.description.Ba;m<w;m++){var I=this.description.ld(m),M=p.sa.Wa(I),T=n.description.Rf(I);0>T||n.Aa[T]==null?this.Aa[m].Nn(M*y,p.sa.te(I),f*M,M*y):this.Aa[m].On(M*y,n.Aa[T],M*h,f*M,!0,M,M*y)}if(this.vm()||n.Av(a))throw p.i.Ra();this.Qc(1993)}}},l.prototype.jJ=function(){for(var n=0,a=this.ea();n<a;n++)this.zW(n)},l.prototype.zW=function(n){if(this.oc(),n>=this.ea())throw p.i.O();var a=this.Ca(n),h=this.Ka(n);n=this.ec(n)?1:0;for(var f=0,m=this.description.Ba;f<m;f++)if(this.Aa[f]!=null){var y=p.sa.Wa(this.description.Fd(f));this.Aa[f].pi(y*(a+n),y*(h-n),y)}this.Qc(1993)},l.prototype.ar=function(n){this.oc();var a=this.ea();if(0>n&&(n=a-1),n>=a)throw p.i.O();for(var h=this.Ca(n),f=this.Ka(n),m=0,y=this.description.Ba;m<y;m++)if(this.Aa[m]!=null){var w=p.sa.Wa(this.description.Fd(m));this.Aa[m].Gn(w*h,w*f,w*this.xa)}for(h=n+1;h<=a;h++)m=this.nb.read(h),this.nb.write(h-1,m-f);if(this.mb==null)for(h=n+1;h<=a;h++)n=this.mb.read(h),this.mb.write(h-1,n);this.nb.resize(a),this.mb.resize(a),this.xa-=f,this.Rg-=f,this.Qc(1993)},l.prototype.wf=function(n,a,h,f){if(a==this||h>=a.ea())throw p.i.O();var m=this.ea();if(n>m)throw p.i.O();0>n&&(n=m),0>h&&(h=a.ea()-1),this.Og=!1,this.Ll(a.description),a.oc();var y=a.Ca(h),w=a.Ka(h),I=this.xa,M=a.ec(h)&&!f?1:0;this.fm(this.xa+w),this.oc();for(var T=n<m?this.Ca(n):I,$=0,F=this.description.Ba;$<F;$++){var R=this.description.Fd($),j=a.description.Rf(R),H=p.sa.Wa(R);0<=j&&a.Aa[j]!=null?(M!=0&&this.Aa[$].On(T*H,a.Aa[j],H*y,H,!0,H,H*I),this.Aa[$].On((T+M)*H,a.Aa[j],H*(y+M),H*(w-M),f,H,H*(I+M))):this.Aa[$].Nn(T*H,p.sa.te(R),H*w,H*I)}for(this.nb.add(I+w),f=m;f>=n+1;f--)y=this.nb.read(f-1),this.nb.write(f,y+w);for(a.Av(h),this.mb.add(0),f=m-1;f>=n+1;f--)m=this.mb.read(f),m&=-5,this.mb.write(f+1,m);m=a.ER().read(h),m&=-5,this.yf&&(m|=1),this.mb.write(n,m)},l.prototype.Cz=function(n,a){var h=-1,f=this.ea();if(h>f)throw p.i.O();0>h&&(h=f),this.Og=!1;var m=this.xa;this.fm(this.xa+a),this.oc();var y=h<f?this.Ca(h):m;if(n!=null)this.Aa[0].Dz(2*y,n,0,a,!0,2*m);else{var w=p.sa.te(0);this.Aa[0].Nn(2*y,w,2*a,2*m)}n=1;for(var I=this.description.Ba;n<I;n++){w=this.description.ld(n);var M=p.sa.Wa(w);w=p.sa.te(w),this.Aa[n].Nn(y*M,w,M*a,M*m)}for(this.nb.add(this.xa),m=f;m>=h+1;m--)y=this.nb.read(m-1),this.nb.write(m,y+a);for(this.mb.add(0),m=f-1;m>=h+1;m--)a=this.mb.read(m),a&=-5,this.mb.write(m+1,a);this.yf&&this.mb.write(h,1)},l.prototype.lG=function(n,a,h){var f=-1;if(0>n&&(n=this.ea()),n>this.ea()||f>this.Ka(n)||h>a.length)throw p.i.ga("index out of bounds");if(h!=0){n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>f&&(f=this.Ka(n)),this.oc();var m=this.xa;this.fm(this.xa+h),this.oc();for(var y=0,w=this.description.Ba;y<w;y++){var I=this.description.Fd(y),M=p.sa.Wa(I);this.Aa[y].Wt(M*(this.Ca(n)+f+h),(m-this.Ca(n)-f)*M,this.Aa[y],M*(this.Ca(n)+f),!0,M),y==0?this.Aa[y].qC(M*(this.Ca(n)+f),h,a,0,!0):this.Aa[y].Yj(p.sa.te(I),(this.Ca(n)+f)*M,h*M)}for(this.vm()&&(this.Se.Wt(this.Ca(n)+f+h,m-this.Ca(n)-f,this.Se,this.Ca(n)+f,!0,1),this.Nj.Wt(this.Ca(n)+f+h,m-this.Ca(n)-f,this.Nj,this.Ca(n)+f,!0,1),this.Se.Yj(1,this.Ca(n)+f,h),this.Nj.Yj(-1,this.Ca(n)+f,h)),n+=1,a=this.ea();n<=a;n++)this.nb.write(n,this.nb.read(n)+h)}},l.prototype.xf=function(n,a,h){var f=this.ea();if(0>n&&(n=this.ea()),n>=f||a>this.Ka(n))throw p.i.ga("index out of bounds");n==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>a&&(a=this.Ka(n));var m=this.xa;this.fm(this.xa+1),this.oc();var y=this.Ca(n);this.Aa[0].xj(2*(y+a),h,2*m),h=1;for(var w=this.description.Ba;h<w;h++){var I=this.description.Fd(h),M=p.sa.Wa(I);this.Aa[h].Nn(M*(y+a),p.sa.te(I),M,M*m)}for(n+=1;n<=f;n++)this.nb.write(n,this.nb.read(n)+1)},l.prototype.yB=function(n,a){var h=this.ea();if(0>n&&(n=h-1),n>=h||a>=this.Ka(n))throw p.i.ga("index out of bounds");this.oc();var f=this.Ca(n);0>a&&(a=this.Ka(n)-1),a=f+a,f=0;for(var m=this.description.Ba;f<m;f++)if(this.Aa[f]!=null){var y=p.sa.Wa(this.description.Fd(f));this.Aa[f].Gn(y*a,y,y*this.xa)}for(;h>=n+1;h--)a=this.nb.read(h),this.nb.write(h,a-1);this.xa--,this.Rg--,this.Qc(1993)},l.prototype.pE=function(n,a,h,f){if(n=this.Ca(n)+a,(h=this.Ca(h)+f)<n||0>n||h>this.I()-1)throw p.i.O();a=0,(f=this.Ha()).Wb(n);do{for(;f.Ia()&&(n=f.ia(),f.xb()!=h);)a+=n=n.Rb();if(f.xb()==h)break}while(f.ab());return a},l.prototype.aO=function(n,a,h){if(a=this.Ca(n)+a,h=this.Ca(n)+h,0>a||h>this.I()-1)throw p.i.O();var f=this.Ha();if(a>h){if(!this.ec(n))throw p.i.O("cannot iterate across an open path");f.EB()}var m=n=0;f.Wb(a);do m+=n,n=f.ia().Rb();while(f.xb()!=h);return m},l.prototype.ng=function(){return p.si.im(this,null)},l.prototype.FS=function(n,a,h){for(var f=n;f<h-1;f++)if(this.ec(f))throw p.i.O("cannot interpolate across closed paths");if((f=this.description.Ba)!=1){var m=this.pE(n,a,h,void 0);if(m!=0)for(var y=1;y<f;y++){var w=this.description.ld(y);if(p.sa.gz(w)!=2)for(var I=p.sa.Wa(w),M=0;M<I;M++)this.HS(w,n,a,h,m,M)}}},l.prototype.ES=function(n,a,h){var f=this.description.Ba;if(f!=1){var m=this.aO(n,a,h);if(m!=0)for(var y=1;y<f;y++){var w=this.description.ld(y);if(p.sa.gz(w)!=2)for(var I=p.sa.Wa(w),M=0;M<I;M++)this.GS(w,n,a,h,m,M)}}},l.prototype.HS=function(n,a,h,f,m,y){var w=this.Ha(),I=this.Ca(a)+h;f=this.Ca(f)+void 0,a=this.Vc(n,I,y),h=this.Vc(n,f,y);var M=a,T=0;w.Wb(I);do if(w.Ia()){if(w.ia(),w.xb()==f)break;this.setAttribute(n,w.xb(),y,M),w.ni();do{if(I=w.ia(),w.kk()==f)return;T+=I=I.Rb(),M=p.mc.jq(a,h,T/m),w.Qn()||this.setAttribute(n,w.kk(),y,M)}while(w.Ia())}while(w.ab())},l.prototype.GS=function(n,a,h,f,m,y){var w=this.Ha(),I=this.Ca(a)+h;if((a=this.Ca(a)+f)!=I){f=this.Vc(n,I,y),h=this.Vc(n,a,y);var M=0;w.Wb(I),w.EB(),I=f;do{var T=w.ia();this.setAttribute(n,w.xb(),y,I),M+=I=T.Rb(),I=p.mc.jq(f,h,M/m)}while(w.kk()!=a)}},l.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.rD()},l.prototype.Pc=function(n){n instanceof p.Ed?this.TD(n,-1):this.rN(n)},l.prototype.TD=function(n,a){if(!this.B()&&!n.isIdentity()){this.oc();var h=this.Aa[0],f=new p.h,m=new p.h;if(0>a){var y=this.vm(),w=0;a=this.xa}else y=this.Av(a),w=this.Ca(a),a=this.Wc(a);for(;w<a;w++){if(f.x=h.read(2*w),f.y=h.read(2*w+1),y){var I=this.Nj.read(w);if(0<=I)switch(7&this.Se.read(w)){case 2:m.x=this.Td.read(I),m.y=this.Td.read(I+1),n.Gh(m,m),this.Td.write(I,m.x),this.Td.write(I+1,m.y),m.x=this.Td.read(I+3),m.y=this.Td.read(I+4),n.Gh(m,m),this.Td.write(I+3,m.x),this.Td.write(I+4,m.y);break;case 4:throw p.i.Ra()}}n.Gh(f,f),h.write(2*w,f.x),h.write(2*w+1,f.y)}this.Qc(1993)}},l.prototype.rN=function(n){if(!this.B()){this.se(1),this.oc();for(var a=this.Aa[0],h=this.Aa[1],f=new p.Od,m=new p.Od,y=this.vm(),w=0;w<this.xa;w++){if(f.x=a.read(2*w),f.y=a.read(2*w+1),f.z=h.read(w),y){var I=this.Nj.read(w);if(0<=I)switch(7&this.Se.read(w)){case 2:m.x=this.Td.read(I),m.y=this.Td.read(I+1),m.z=this.Td.read(I+2),m=n.hp(m),this.Td.write(I,m.x),this.Td.write(I+1,m.y),this.Td.write(I+1,m.z),m.x=this.Td.read(I+3),m.y=this.Td.read(I+4),m.z=this.Td.read(I+5),m=n.hp(m),this.Td.write(I+3,m.x),this.Td.write(I+4,m.y),this.Td.write(I+5,m.z);break;case 4:throw p.i.Ra()}}f=n.hp(f),a.write(2*w,f.x),a.write(2*w+1,f.y),h.write(w,f.z)}this.Qc(1993)}},l.prototype.ey=function(){this.nb==null&&(this.nb=p.Zc.Qh(1,0),this.mb=p.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},l.prototype.qp=function(n){n.Og=!1,n.vq=this.vq,n.zq=this.zq,n.nb=this.nb!=null?p.ja.Dn(this.nb):null,n.mb=this.mb!=null?p.rn.Dn(this.mb):null,n.Nj=this.Nj!=null?p.ja.Dn(this.Nj):null,n.Se=this.Se!=null?p.rn.Dn(this.Se):null,n.Td=this.Td!=null?p.ce.Dn(this.Td):null,n.uq=this.uq,n.tq=this.tq,n.Cj=this.ck(1024)?null:this.Cj},l.prototype.Rb=function(){if(!this.ck(512))return this.uq;for(var n=this.Ha(),a=new p.Ex(0);n.ab();)for(;n.Ia();)a.add(n.ia().Rb());return this.uq=a.tm(),this.Nf(512,!1),a.tm()},l.prototype.Nb=function(n){if(n==this)return!0;if(!(n instanceof l&&d.prototype.Nb.call(this,n)))return!1;var a=this.ea();return!(a!=n.ea()||this.nb!=null&&!this.nb.Nb(n.nb,0,a+1)||this.zq!=n.zq||this.mb!=null&&!this.mb.Nb(n.mb,0,a))&&d.prototype.Nb.call(this,n)},l.prototype.Ha=function(){return new p.TL(this)},l.prototype.dy=function(n){if(d.prototype.dy.call(this,n),this.vm())for(n=this.Ha();n.ab();)n.Ia()},l.prototype.Ap=function(n,a){if(d.prototype.Ap.call(this,n,a),this.vm())for(n=this.Ha();n.ab();)n.Ia()},l.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},l.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},l.prototype.Gv=function(n){return!!this.yf&&(this.ck(8)?(this.zu(),0<this.Cj.read(n)):(4&this.mb.read(n))!=0)},l.prototype.Kr=function(n){return this.yf?(this.zu(),this.Cj.read(n)):0},l.prototype.zu=function(){if(this.ck(1024)){var n=this.ea();this.Cj==null?this.Cj=new p.ce(n):this.Cj.size!=n&&this.Cj.resize(n),n=new p.Ex(0);for(var a=new p.Ex(0),h=new p.h,f=0,m=this.Ha();m.ab();){for(a.reset(),this.D(this.Ca(m.gb),h);m.Ia();)a.add(m.ia().Sx(h.x,h.y));n.add(a.tm());var y=f++;this.Cj.write(y,a.tm())}this.tq=n.tm(),this.Nf(1024,!1)}},l.prototype.AR=function(){if(this.yf){this.hm();for(var n=this.ea(),a=0;a<n;a++)4&this.mb.read(a)}},l.prototype.hm=function(){if(this.ck(8)){this.zu();var n=this.ea();(this.mb==null||this.mb.size<n)&&(this.mb=p.Zc.Or(n+1));for(var a=1,h=0;h<n;h++){var f=this.Cj.read(h);h==0&&(a=0<f?1:-1),0<f*a?this.mb.uJ(h,4):this.mb.FE(h,4)}this.Nf(8,!1)}},l.prototype.nz=function(n){var a=this.gb,h=this.ea();if(0<=a&&a<h){if(n<this.Wc(a)){if(n>=this.Ca(a))return a;a--}else a++;if(0<=a&&a<h&&n>=this.Ca(a)&&n<this.Wc(a))return this.gb=a}if(5>h){for(a=0;a<h;a++)if(n<this.Wc(a))return this.gb=a;throw p.i.ga("corrupted geometry")}for(a=0,--h;h>a;){var f=a+(h-a>>1);if(n<this.Ca(f))h=f-1;else{if(!(n>=(a=this.Wc(f))))return this.gb=f;a=f+1}}return this.gb=a},l.prototype.sz=function(){var n=this.I();if(!this.yf){n-=this.ea();for(var a=0,h=this.ea();a<h;a++)this.ec(a)&&n++}return n},l.prototype.tv=function(n){var a=this.Ka(n);return this.ec(n)||a--,a},l.prototype.Ja=function(){return new l(this.yf,this.description)},l.prototype.Eb=function(){return this.yf?2:1},l.prototype.K=function(){return this.yf?1736:1607},l.prototype.LJ=function(n){this.nb=n,this.Qc(16777215)},l.prototype.QR=function(){return this.vx(),this.Se},l.prototype.ER=function(){return this.vx(),this.mb},l.prototype.KJ=function(n){this.mb=n,this.Qc(16777215)},l.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},l.prototype.Wc=function(n){return this.nb.read(n+1)},l.prototype.Ka=function(n){return this.nb.read(n+1)-this.nb.read(n)},l.prototype.Ca=function(n){return this.nb.read(n)},l.prototype.nu=function(n,a){this.Cb==null&&(this.Cb=new p.Wk),a=p.Mx.kW(a);var h=this.Cb.Hk;if(h!=null){if(!(h.Kk<n||a>h.MR()))return!0;this.Cb.tD(null)}return h=p.Mx.create(this,n,a),this.Cb.tD(h),!0},l.prototype.dc=function(){var n=d.prototype.dc.call(this);if(!this.Bc()){var a=this.ea();this.nb!=null&&this.nb.Cn(n,0,a+1),this.mb!=null&&this.mb.Cn(n,0,a)}return n},l.prototype.UF=function(n){return this.Se!=null?this.Se.read(n):1},l.prototype.cc=function(n,a,h){var f=this.nz(n);if(n==this.Wc(f)-1&&!this.ec(f))throw p.i.ga("index out of bounds");this.oc();var m=this.Se,y=1;if(m!=null&&(y=7&m.read(n)),y!==1)throw p.i.Ra();if(a.Qr(),a=a.get(),h?a.Pf(p.fe.pg()):a.Pf(this.description),f=n==this.Wc(f)-1&&this.ec(f)?this.Ca(f):n+1,m=new p.h,this.D(n,m),a.Ec(m),this.D(f,m),a.Rc(m),!h)for(h=1,m=this.description.Ba;h<m;h++){y=this.description.Fd(h);for(var w=p.sa.Wa(y),I=0;I<w;I++){var M=this.Vc(y,n,I);a.TB(y,I,M),M=this.Vc(y,f,I),a.JB(y,I,M)}}},l.prototype.Tj=function(n,a){if(n>=this.ea())throw p.i.O();if(this.B())a.Pa();else{if(this.Av(n))throw p.i.ga("not implemented");var h=this.vb(0),f=new p.h,m=new p.l;m.Pa();var y=this.Ca(n);for(n=this.Wc(n);y<n;y++)h.uc(2*y,f),m.$b(f);a.L(m)}},l.prototype.hj=function(n){return this.Cb==null&&(this.Cb=new p.Wk),!(n==0||16>this.I())&&(n=p.ua.iE(this),this.Cb.RM(n),!0)},l.prototype.cM=function(){if(this.Cb==null&&(this.Cb=new p.Wk),this.Cb.Bo==null){this.Cb.sD(null);var n=p.ua.TN(this);this.Cb.sD(n)}},l.prototype.$o=function(n){this.zq=n},l.prototype.Kn=function(){return this.zq},l.prototype.yD=function(n){if(this==n)throw p.i.ga("MultiPathImpl.add");for(var a=this.ea(),h=0;h<n.ea();h++)this.addPath(n,h,!0),this.xU(a),a++},l.prototype.fO=function(n){var a=this.nz(n),h=this.Ca(a);if(h!=n){if(n>=(a=this.Wc(a))||n<h)throw p.i.ga("change_ring_start_point");for(var f=0,m=this.description.Ba;f<m;f++){var y=this.description.ld(f);y=p.sa.Wa(y),this.Aa[f].rotate(h*y,n*y,a*y)}}},l}(p.Fx);p.Xk=x}(Q||(Q={})),function(p){var P=function(x){function d(l){var n=x.call(this)||this;if(l!==void 0){if(l==null)throw p.i.O();n.description=l}else n.description=p.fe.pg();return n.xa=0,n}return Et(d,x),d.prototype.Ja=function(){return new d(this.description)},d.prototype.add=function(l){this.resize(this.xa+1),this.Fh(this.xa-1,l)},d.prototype.Du=function(l,n){this.resize(this.xa+1);var a=new p.h;a.na(l,n),this.Db(this.xa-1,a)},d.prototype.Gd=function(l,n,a){if(a=0>a?l.I():a,0>n||n>l.I()||a<n)throw p.i.O();if(n!=a){this.Ll(l.description),a-=n;var h=this.xa;this.resize(this.xa+a),this.oc();for(var f=0,m=l.description.Ba;f<m;f++){var y=l.description.Fd(f),w=p.sa.Wa(y),I=this.vb(y);y=l.vb(y),I.On(h*w,y,n*w,a*w,!0,1,h*w)}}},d.prototype.CD=function(l,n){var a=l.length;if(n=0>n?a:n,0>a||0>n)throw p.i.O();if(n!=0){a=n-0,n=this.xa,this.resize(this.xa+a);for(var h=0;h<a;h++)this.Db(n+h,l[0+h])}},d.prototype.yB=function(l){if(0>l||l>=this.I())throw p.i.ga("index out of bounds");this.oc();for(var n=0,a=this.description.Ba;n<a;n++)if(this.Aa[n]!=null){var h=p.sa.Wa(this.description.Fd(n));this.Aa[n].Gn(h*l,h,h*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},d.prototype.resize=function(l){this.fm(l)},d.prototype.qp=function(){},d.prototype.Pa=function(){x.prototype.rD.call(this)},d.prototype.Pc=function(l){if(l instanceof p.Ed){if(this.B())return;this.oc();for(var n=this.Aa[0],a=new p.h,h=0;h<this.xa;h++)a.x=n.read(2*h),a.y=n.read(2*h+1),l.Gh(a,a),n.write(2*h,a.x),n.write(2*h+1,a.y)}else{if(this.B())return;this.oc(),this.se(1),this.oc(),n=this.Aa[0],a=this.Aa[1];var f=new p.Od;for(h=0;h<this.xa;h++){f.x=n.read(2*h),f.y=n.read(2*h+1),f.z=a.read(h);var m=l.hp(f);n.write(2*h,m.x),n.write(2*h+1,m.y),a.write(h,m.z)}}this.Qc(1993)},d.prototype.Eb=function(){return 0},d.prototype.K=function(){return 550},d.prototype.He=function(){return 0},d.prototype.Rb=function(){return 0},d.prototype.Nb=function(l){return l==this||l instanceof d&&x.prototype.Nb.call(this,l)},d.prototype.gW=function(l,n){var a=this.xa;if(a=Math.min(a,n+1e3),0>n||n>=this.xa||a<n||l.length!=1e3)throw p.i.O();var h=a-n,f=[];for(this.vb(0).Xw(2*n,2*h,f,0,!0),n=0;n<h;n++)l[n]=p.h.construct(f[2*n],f[2*n+1]);return a},d.prototype.Zx=function(){},d.prototype.ey=function(){},d.prototype.nu=function(){return!1},d.prototype.hj=function(){return!1},d.prototype.ng=function(){return null},d}(p.Fx);p.ee=P}(Q||(Q={})),function(p){var P;(P=p.dL||(p.dL={}))[P.NotDetermined=0]="NotDetermined",P[P.Structure=1]="Structure",P[P.DegenerateSegments=2]="DegenerateSegments",P[P.Clustering=3]="Clustering",P[P.Cracking=4]="Cracking",P[P.CrossOver=5]="CrossOver",P[P.RingOrientation=6]="RingOrientation",P[P.RingOrder=7]="RingOrder",P[P.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",P[P.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",P[P.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var x=function(){function d(l,n,a){l===void 0?(this.Lj=0,this.Mo=this.Lo=-1):(this.Lj=l,this.Lo=n,this.Mo=a)}return d.prototype.Yt=function(l){this.Lj=l.Lj,this.Lo=l.Lo,this.Mo=l.Mo},d}();p.Nd=x}(Q||(Q={})),function(p){p.P=function(){function P(){}return P.assert=function(x){if(x===!1)throw p.i.BK()},P.XJ=function(x){return isNaN(x)?NaN:x===0?x:0<x?1:-1},P.Hu=function(x){var d;d===void 0&&(d=0);for(var l=[],n=0;n<x;n++)l[n]=P.mg(2,d);return l},P.mg=function(x,d){d===void 0&&(d=0);for(var l=[],n=0;n<x;n++)l[n]=d;return l},P.bv=function(x,d){var l,n;for(l===void 0&&(l=0),n===void 0&&(n=x.length-1);l<=n;l++)x[l]=d},P.Tk=function(x,d,l){return x<d?d:x>l?l:x},P.Vh=function(x,d){var l=5381;return((l=((l=((l=d!==void 0?(d<<5)+d+(255&x):(l<<5)+l+(255&x))<<5)+l+(x>>8&255))<<5)+l+(x>>16&255))<<5)+l+(x>>24&255)&2147483647},P.wj=function(){throw Error("Not Implemented")},P.XA=function(x){return P.WT(x)+12345&2147483647},P.SG=function(x){var d=32,l=x%P.Px|0,n=x/P.Px|0;return(d&=63)==0?x:(32>d?(x=l>>>d|n<<32-d,d=n>>d):(x=n>>d-32,d=0<=n?0:-1),d*P.Px+(x>>>0))},P.WT=function(x){var d=1103515245,l=65535&d;return((d-l)*(x|=0)|0)+(l*x|0)|0},P.truncate=function(x){return 0>x?-1*Math.floor(Math.abs(x)):Math.floor(x)},P.MAX_SAFE_INTEGER=Math.pow(2,53)-1,P.MIN_SAFE_INTEGER=-P.MAX_SAFE_INTEGER,P.QC=65536,P.Px=P.QC*P.QC,P}()}(Q||(Q={})),function(p){var P;(P=p.xL||(p.xL={}))[P.Project=0]="Project",P[P.Union=1]="Union",P[P.Difference=2]="Difference",P[P.Proximity2D=3]="Proximity2D",P[P.Relate=4]="Relate",P[P.Equals=5]="Equals",P[P.Disjoint=6]="Disjoint",P[P.Intersects=7]="Intersects",P[P.Within=8]="Within",P[P.Contains=9]="Contains",P[P.Crosses=10]="Crosses",P[P.Touches=11]="Touches",P[P.Overlaps=12]="Overlaps",P[P.Buffer=13]="Buffer",P[P.Distance=14]="Distance",P[P.Intersection=15]="Intersection",P[P.Clip=16]="Clip",P[P.Cut=17]="Cut",P[P.DensifyByLength=18]="DensifyByLength",P[P.DensifyByAngle=19]="DensifyByAngle",P[P.LabelPoint=20]="LabelPoint",P[P.GeodesicBuffer=21]="GeodesicBuffer",P[P.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",P[P.ShapePreservingDensify=23]="ShapePreservingDensify",P[P.GeodeticLength=24]="GeodeticLength",P[P.GeodeticArea=25]="GeodeticArea",P[P.Simplify=26]="Simplify",P[P.SimplifyOGC=27]="SimplifyOGC",P[P.Offset=28]="Offset",P[P.Generalize=29]="Generalize",P[P.SymmetricDifference=30]="SymmetricDifference",P[P.ConvexHull=31]="ConvexHull",P[P.Boundary=32]="Boundary",P[P.SimpleRelation=33]="SimpleRelation";var x=function(){function d(){}return d.prototype.K=function(){return null},d.prototype.yn=function(){},d.prototype.Ku=function(){return!1},d}();p.Ge=x}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 13},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a,h,f){return l instanceof p.ba?(f=new p.$c(l),this.W(f,n,[a],!1,h).next()):h===!0?(a=new p.wC(l,n,a,!1,f),p.Ih.local().W(a,n,f)):new p.wC(l,n,a,!1,f)},d.instance=null,d}(p.Ge);p.vC=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a,h){this.za=-1,this.Sd=d,this.Vz=l,this.Es=n,this.nT=new p.l,this.nT.Pa(),this.ho=-1,this.Vb=h}return x.prototype.next=function(){for(var d;(d=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.ho+1<this.Es.length&&this.ho++,this.buffer(d,this.Es[this.ho]);return null},x.prototype.Ma=function(){return this.za},x.prototype.buffer=function(d,l){return p.CK.buffer(d,l,this.Vz,NaN,96,this.Vb)},x.prototype.re=function(){},x}();p.wC=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 16},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a,h){return l instanceof p.ba?(l=new p.$c(l),this.W(l,n,a,h).next()):new p.gL(l,n,a,h)},d.instance=null,d}(p.Ge);p.fL=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n){if(this.za=-1,d==null)throw p.i.O();this.aa=l,this.Ak=d,this.ra=p.ua.Xd(n,l,!1)}return x.prototype.next=function(){var d;return(d=this.Ak.next())!=null?(this.za=this.Ak.Ma(),p.Vd.clip(d,this.aa,this.ra,0)):null},x.prototype.Ma=function(){return this.za},x.prototype.re=function(){},x}();p.gL=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 31},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a){return l instanceof p.ba?p.yC.mE(l):new p.yC(n,l,a)},d.instance=null,d}(p.Ge);p.xC=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n){if(this.pA=new p.au,this.za=-1,l==null)throw p.i.O();this.YG=d,this.Jc=!1,this.Ak=l,this.Vb=n}return x.prototype.next=function(){if(this.YG){if(!this.Jc){var d=this.ZN(this.Ak);return this.Jc=!0,d}return null}if(!this.Jc){if((d=this.Ak.next())!=null)return this.za=this.Ak.Ma(),x.mE(d);this.Jc=!0}return null},x.prototype.Ma=function(){return this.za},x.prototype.ZN=function(d){for(var l;(l=d.next())!=null;)this.pA.Ib(l);return this.pA.YQ()},x.prototype.re=function(){if(!this.Jc){if(!this.YG)throw p.i.ga("Invalid call for non merging convex hull.");var d=this.Ak.next();if(d==null)throw p.i.ga("Expects a non-null geometry.");this.pA.Ib(d)}},x.mE=function(d){if(x.QS(d))return d;var l=d.K();if(p.Xk.zd(l))return(l=new p.Ua(d.description)).pc(d,!0),l;if(l==550&&d.I()==2){var n=new p.Ta;return l=new p.Ua(d.description),d.we(0,n),l.nf(n),d.we(1,n),l.lineTo(n),l}return p.au.MO(d)},x.QS=function(d){if(d.B())return!0;var l=d.K();return l==33||l==197||!p.Xk.zd(l)&&(l==550?d.I()==1:l==1607?d.ea()==1&&2>=d.I():d.ea()==1&&(2>=d.I()||p.au.EG(d,0)))},x}();p.yC=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 17},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a,h,f){return new p.iL(l,n,a,h,f)},d.instance=null,d}(p.Ge);p.hL=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a,h){if(this.Vf=null,l==null||n==null)throw p.i.ga("invalid argument");this.kT=d,this.iA=l,this.gH=n,d=p.ua.ov(l,n),this.ra=p.ua.Xd(a,d,!0),this.fH=-1,this.od=h}return x.prototype.Ma=function(){return 0},x.prototype.next=function(){return this.MQ(),++this.fH<this.Vf.length?this.Vf[this.fH]:null},x.prototype.MQ=function(){if(this.Vf==null)switch(this.Vf=[],this.iA.K()){case 1607:this.OQ();break;case 1736:this.NQ()}},x.prototype.OQ=function(){var d=new p.Ua,l=new p.Ua,n=new p.Ua;this.Vf.push(d),this.Vf.push(l);var a=[];p.GK.EK(this.kT,this.iA,this.gH,this.ra,a,this.od);for(var h=0;h<a.length;h++){var f=a[h];if(f.ct==0)d.add(f.Y,!1);else if(f.ct==1||f.ct==2)l.add(f.Y,!1);else if(f.ct==3)this.Vf.push(f.Y);else{if(f.ct!=4)throw p.i.ga("internal");n.add(f.Y,!1)}}n.B()||d.B()&&l.B()&&!(3<=this.Vf.length)||this.Vf.push(n),d.B()&&l.B()&&3>this.Vf.length&&(this.Vf.length=0)},x.prototype.NQ=function(){var d=new p.ja(0),l=new p.hd,n=l.WE(),a=l.Ib(this.iA),h=l.Ib(this.gH),f=new p.Hg;try{f.Gt(l,this.ra,this.od),f.fl(n,a,h,d);var m=l.Ke(a),y=new p.Ea,w=new p.Ea;for(this.Vf.length=0,this.Vf.push(y),this.Vf.push(w),a=0;a<d.size;a++){var I=new p.hd,M=I.Ib(m),T=I.Ib(l.Ke(d.get(a)));f.fr(I,this.od);var $=f.Cv(M,T),F=I.Ke($);if(!F.B()){var R=l.FF(d.get(a),n);R==2?y.add(F,!1):R==1?w.add(F,!1):this.Vf.push(F);var j=new p.hd;M=j.Ib(m),T=j.Ib(l.Ke(d.get(a))),f.fr(j,this.od),m=j.Ke(f.km(M,T))}}!m.B()&&0<d.size&&this.Vf.push(m),y.B()&&w.B()&&(this.Vf.length=0)}finally{f.Wg()}},x.prototype.re=function(){},x}();p.iL=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 18},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a){if(l instanceof p.ba)return l=new p.$c(l),this.W(l,n,a).next();if(0>=n)throw p.i.O();return new p.jL(l,n,a)},d.instance=null,d}(p.Ge);p.Zl=P}(Q||(Q={})),function(p){var P=function(){function x(d,l){this.za=-1,this.Sd=d,this.Rs=l}return x.prototype.Ma=function(){return this.za},x.prototype.next=function(){var d;return(d=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.IP(d)):null},x.prototype.IP=function(d){if(d.B()||1>d.Eb())return d;var l=d.K();if(l==1736||l==1607)return this.Iy(d);if(p.ba.zd(l))return this.KP(d);if(l==197)return this.JP(d);throw p.i.Ra()},x.prototype.KP=function(d){if(d.Rb()<=this.Rs)return d;var l=new p.Ua(d.description);return l.pc(d,!0),this.Iy(l)},x.prototype.JP=function(d){var l=new p.Ea(d.description);l.bd(d,!1);var n=new p.l;return d.A(n),d=n.da(),n.S()<=this.Rs&&d<=this.Rs?l:this.Iy(l)},x.prototype.Iy=function(d){for(var l=d.Ja(),n=d.Ha();n.ab();)for(var a=!0;n.Ia();){var h=n.ia();if(h.K()!=322)throw p.i.ga("not implemented");var f=n.Qn(),m=h.Rb();if(m>this.Rs){var y=Math.ceil(m/this.Rs);m=new p.Ta(d.description),a&&(h.Vo(m),l.nf(m));var w=a=1/y,I=0;for(--y;I<y;I++)h.Vw(w,m),l.lineTo(m),w+=a;f?l.Cp():(h.Ro(m),l.lineTo(m))}else f?l.Cp():l.pc(h,a);a=!1}return l},x.prototype.re=function(){},x}();p.jL=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.K=function(){return 2},d.prototype.W=function(l,n,a,h){return l instanceof p.ba?(l=new p.$c(l),n=new p.$c(n),this.W(l,n,a,h).next()):new p.kL(l,n,a,h)},d.km=function(l,n,a,h){if(l.B()||n.B())return l;var f=l.Eb(),m=n.Eb();if(f>m)return l;var y=l.K(),w=n.K(),I=new p.l,M=new p.l,T=new p.l;l.A(I),n.A(M),T.L(I),T.$b(M);var $=(T=p.ua.Xd(a,T,!0))*Math.sqrt(2)*1.00001,F=new p.l;if(F.L(I),F.X($,$),!F.isIntersecting(M))return l;if(f==1&&m==2)return d.FV(l,n,w,a,h);if(y==33)switch(p.Xk.zd(w)?(a=new p.Ua(n.description),a.pc(n,!0)):a=n,w){case 1736:return d.SU(l,a,T);case 1607:return d.TU(l,a,T);case 550:return d.QU(l,a,T);case 197:return d.PU(l,a,T);case 33:return d.RU(l,a,T);default:throw p.i.O()}else if(y==550)switch(w){case 1736:return d.iU(l,n,T);case 197:return d.gU(l,n,T);case 33:return d.hU(l,n,T)}return p.Hg.km(l,n,a,h)},d.SU=function(l,n,a){return p.jd.FG(n,l,a)==0?l:l.Ja()},d.TU=function(l,n,a){var h=l.D();n=n.Ha();for(var f=a*Math.sqrt(2)*1.00001,m=f*f,y=new p.l;n.ab();)for(;n.Ia();){var w=n.ia();if(w.A(y),y.X(f,f),y.contains(h)){if(w.ss(h,a))return l.Ja();var I=w.bc();if(p.h.zc(h,I)<=m||(I=w.xc(),p.h.zc(h,I)<=m))return l.Ja()}}return l},d.QU=function(l,n,a){var h=n.vb(0);n=n.I();var f=l.D(),m=new p.h;a=a*Math.sqrt(2)*1.00001,a*=a;for(var y=0;y<n;y++)if(h.uc(2*y,m),p.h.zc(m,f)<=a)return l.Ja();return l},d.PU=function(l,n,a){var h=new p.l;return n.A(h),h.X(a,a),n=l.D(),h.contains(n)?l.Ja():l},d.RU=function(l,n,a){a=a*Math.sqrt(2)*1.00001,a*=a;var h=l.D();return n=n.D(),p.h.zc(h,n)<=a?l.Ja():l},d.iU=function(l,n,a){var h=new p.l;n.A(h),h.X(a,a);for(var f=l.I(),m=!1,y=[],w=0;w<f;w++)y[w]=!1;var I=new p.h;for(w=0;w<f;w++)l.D(w,I),h.contains(I)&&p.jd.Zd(n,I,a)!=0&&(m=!0,y[w]=!0);if(!m)return l;for(n=l.Ja(),w=0;w<f;w++)y[w]||n.Gd(l,w,w+1);return n},d.gU=function(l,n,a){var h=new p.l;n.A(h),h.X(a,a),n=l.I();var f=!1;a=[];for(var m=0;m<n;m++)a[m]=!1;var y=new p.h;for(m=0;m<n;m++)l.D(m,y),h.contains(y)&&(f=!0,a[m]=!0);if(!f)return l;for(h=l.Ja(),m=0;m<n;m++)a[m]||h.Gd(l,m,m+1);return h},d.hU=function(l,n,a){var h=l.vb(0),f=l.I(),m=n.D(),y=new p.h,w=!1;n=[];for(var I=0;I<f;I++)n[I]=!1;for(a=(I=a*Math.sqrt(2)*1.00001)*I,I=0;I<f;I++)h.uc(2*I,y),p.h.zc(y,m)<=a&&(w=!0,n[I]=!0);if(!w)return l;for(h=l.Ja(),I=0;I<f;I++)n[I]||h.Gd(l,I,I+1);return h},d.FV=function(l,n,a,h,f){var m=new p.Hh;l.dn(m);var y=new p.l;return n.A(y),m.$b(y),m.X(.1*m.S(),.1*m.da()),(y=new p.Ea).bd(m,!1),a==1736?y.add(n,!0):y.bd(n,!0),p.Zj.local().W(l,y,h,f)},d.instance=null,d}(p.Ge);p.mp=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a){this.vs=l==null,this.za=-1,this.Sd=d,this.Vz=n,this.rT=l.next(),this.Vb=a}return x.prototype.next=function(){return this.vs?null:(d=this.Sd.next())!=null?(this.za=this.Sd.Ma(),p.mp.km(d,this.rT,this.Vz,this.Vb)):null;var d},x.prototype.Ma=function(){return this.za},x.prototype.re=function(){},x}();p.kL=P}(Q||(Q={})),function(p){var P=function(){function d(l){this.od=l,this.Dj=new p.l,this.Dj.Pa(),this.qh=new p.l,this.qh.Pa()}return d.prototype.Pt=function(){var l=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=l,l=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=l,l=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=l,l=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=l},d.prototype.$P=function(l,n){if(this.od!=null&&!this.od.progress(-1,-1))throw p.i.hu("user_canceled");var a=!this.Dj.isIntersecting(this.qh);return p.ba.Ic(l.K())&&p.ba.Ic(n.K())?l.I()>n.I()?this.bE(l,n,a):(this.Pt(),l=this.bE(n,l,a),this.Pt(),l):l.K()==550&&p.ba.Ic(n.K())?(l=this.cE(n,l,a),this.Pt(),l):n.K()==550&&p.ba.Ic(l.K())?this.cE(l,n,a):l.K()==550&&n.K()==550?l.I()>n.I()?this.dE(l,n):(this.Pt(),l=this.dE(n,l),this.Pt(),l):0},d.prototype.bE=function(l,n,a){var h=l.Ha(),f=n.Ha(),m=new p.l,y=new p.l,w=17976931348623157e292;if(!a&&this.lY(l,n,h,f))return 0;for(;h.ab();)for(;h.Ia();)if((l=h.ia()).A(m),!(m.px(this.qh)>w)){for(;f.ab();)for(;f.Ia();)if((n=f.ia()).A(y),m.px(y)<w&&(n=l.ub(n,a),(n*=n)<w)){if(n==0)return 0;w=n}f.aj()}return Math.sqrt(w)},d.prototype.cE=function(l,n,a){var h=l.Ha(),f=new p.l,m=17976931348623157e292,y=new p.h,w=n.I();for(a=!a&&l.K()==1736;h.ab();)for(;h.Ia();){var I=h.ia();if(I.A(f),!(1<w&&f.px(this.qh)>m)){for(var M=0;M<w;M++){if(n.D(M,y),a&&p.jd.Zd(l,y,0)!=0)return 0;var T=I.ge(y,!1);if(y.sub(I.ic(T)),(T=y.Uk())<m){if(T==0)return 0;m=T}}a=!1}}return Math.sqrt(m)},d.prototype.dE=function(l,n){for(var a,h=17976931348623157e292,f=new p.h,m=new p.h,y=l.I(),w=n.I(),I=0;I<y;I++)if(l.D(I,f),!(1<w&&this.qh.dK(f)>h)){for(var M=0;M<w;M++)if(n.D(M,m),(a=p.h.zc(f,m))<h){if(a==0)return 0;h=a}}return Math.sqrt(h)},d.prototype.lY=function(l,n,a,h){if(l.K()==1736){for(;h.ab();)if(h.Ia()){var f=h.ia();if(p.jd.Zd(l,f.xc(),0)!=0)return!0}h.aj()}if(n.K()==1736){for(;a.ab();)if(a.Ia()&&(l=a.ia(),p.jd.Zd(n,l.xc(),0)!=0))return!0;a.aj()}return!1},d.prototype.im=function(l,n){return l.B()||n.B()?NaN:(l.A(this.Dj),n.A(this.qh),this.$P(l,n))},d}(),x=function(d){function l(){return d!==null&&d.apply(this,arguments)||this}return Et(l,d),l.prototype.W=function(n,a,h){if(n==null||a==null)throw p.i.O();if(n.B()||a.B())return NaN;var f=n.K(),m=a.K();if(f==33){if(m==33)return p.h.ub(n.D(),a.D());if(m==197)return h=new p.l,a.A(h),h.ub(n.D());(f=new p.ee).add(n),n=f}else if(f==197){if(m==197)return m=new p.l,n.A(m),h=new p.l,a.A(h),h.ub(m);(f=new p.Ea).bd(n,!1),n=f}return m==33?((m=new p.ee).add(a),a=m):m==197&&((m=new p.Ea).bd(a,!1),a=m),new P(h).im(n,a)},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.K=function(){return 14},l.instance=null,l}(p.Ge);p.lL=x}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a){this.uH=d,this.yH=l,this.od=a,this.VG=n}return x.prototype.next=function(){var d=this.uH.next();return d==null?null:this.uC(d)},x.prototype.Ma=function(){return this.uH.Ma()},x.prototype.uC=function(d){var l=d.K();if(p.ba.Tn(l))return d;if(l==197)return(l=new p.Ea(d.description)).bd(d,!1),this.uC(l);if(d.B())return d;if(d==null)throw p.i.Ra();l=d.Ja();for(var n=new p.zb,a=0,h=d.ea();a<h;a++)this.OK(d,a,l,n);return l},x.prototype.OK=function(d,l,n,a){if(!(2>d.Ka(l))){var h=d.Ca(l),f=d.Wc(l)-1,m=d.vb(0),y=d.ec(l),w=new p.ja(0);w.Jb(d.Ka(l)+1);var I=new p.ja(0);for(I.Jb(d.Ka(l)+1),w.add(y?h:f),w.add(h),h=new p.h;1<w.size;){var M=w.Gc();w.Jf();var T=w.Gc();d.D(M,h),a.Ec(h),d.D(T,h),a.Rc(h),0<=(T=this.NK(a,h,m,M,T,f))?(w.add(T),w.add(M)):I.add(M)}if(y||I.add(w.get(0)),I.size==w.size)n.addPath(d,l,!0);else if(2<=I.size&&(!this.VG||I.size!=2||!(y||p.h.ub(d.Oa(I.get(0)),d.Oa(I.get(1)))<=this.yH))){for(l=new p.Ta,a=0,f=I.size;a<f;a++)d.we(I.get(a),l),a==0?n.nf(l):n.lineTo(l);y&&(this.VG||I.size!=2||n.lineTo(l),n.Cp())}}},x.prototype.NK=function(d,l,n,a,h,f){var m=h-1;for(h<=a&&(m=f),f=h=-1,a+=1;a<=m;a++){n.uc(2*a,l);var y=l.x,w=l.y;d.ic(d.ge(l,!1),l),l.x-=y,l.y-=w,(y=l.length())>this.yH&&y>f&&(h=a,f=y)}return h},x.prototype.re=function(){},x}();p.mL=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 29},d.prototype.W=function(l,n,a,h){return l instanceof p.ba?(l=new p.$c(l),this.W(l,n,a,h).next()):new p.mL(l,n,a,h)},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.instance=null,d}(p.Ge);p.zC=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 21},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a,h,f,m,y,w){return l instanceof p.ba?(w=new p.$c(l),this.W(w,n,a,[h],f,m,!1,y).next()):y===!0?(a=new p.BC(l,n,a,h,f,!1,!1,w),p.Ih.local().W(a,n,w)):new p.BC(l,n,a,h,f,!1,!1,w)},d.instance=null,d}(p.Ge);p.AC=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a,h,f,m,y){if(f)throw p.i.Fe();if(l==null)throw p.i.O();this.za=-1,this.Os=d,this.wg=l,this.Ae=n,this.Es=a,this.bo=h,this.ho=-1,this.Vb=y,this.oT=new p.l,this.oT.Pa()}return x.prototype.next=function(){for(var d;(d=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.ho+1<this.Es.length&&this.ho++,this.VQ(d,this.Es[this.ho]);return null},x.prototype.Ma=function(){return this.za},x.prototype.VQ=function(d,l){return p.QK.buffer(d,this.wg,this.Ae,l,this.bo,this.Vb)},x.prototype.re=function(){},x}();p.BC=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 24},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a){if(n==null)throw p.i.O();if(l.B()||1>l.Eb())return 0;if(a==4)throw p.i.Fe();var h=p.cb.tc(n),f=p.cb.xv(h),m=p.cb.gv(h);f*=2-f;var y=h.Id().ci,w=l.K();if(w==1736||w==197)var I=l.ng();else p.ba.zd(w)?(I=new p.Ua(l.description)).pc(l,!0):I=l;if(h.Nb(n)==0){if(p.cb.Xc(n)){I=p.Jh.nj(I,n),w==1607&&I==l&&(I=p.ba.kg(l)),l=new p.Oc,p.cb.ih(n).en(l),w=0;for(var M=I.I();w<M;w++){var T=I.Oa(w);T.x=p.Jh.an(T.x,l),I.Db(w,T)}}l=I.Ja(),I=p.Jh.RI(n,h,I,l)?l:p.cb.Bh(I,n,h)}return this.cQ(I,a,m,f,y)},d.prototype.cQ=function(l,n,a,h,f){var m=new p.ha(0),y=0;for(l=l.Ha();l.ab();)for(;l.Ia();){var w=l.ia(),I=w.bc();w=w.xc(),I.scale(f),w.scale(f),p.kb.xd(a,h,I.x,I.y,w.x,w.y,m,null,null,n),y+=m.u}return y},d.instance=null,d}(p.Ge);p.qL=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 18},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a,h,f){return l instanceof p.ba?(l=new p.$c(l),this.W(l,n,a,h,f).next()):new p.oL(l,a,h,n,-1,-1,f)},d.instance=null,d}(p.Ge);p.nL=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a,h,f){if(0<f||n!=4&&0<h)throw p.i.Fe();if(l==null)throw p.i.O();this.za=-1,this.Os=d,this.wg=l,this.Ae=n,this.yT=a,this.xT=h}return x.prototype.next=function(){for(var d;(d=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(d);return null},x.prototype.Ma=function(){return this.za},x.prototype.Uy=function(d){return p.ej.Sr(d,this.wg,this.Ae,this.yT,this.xT,this.Vb)},x.prototype.re=function(){},x}();p.oL=P}(Q||(Q={})),function(p){(function(P){P[P.Unknown=0]="Unknown",P[P.Contains=1]="Contains",P[P.Within=2]="Within",P[P.Equals=3]="Equals",P[P.Disjoint=4]="Disjoint",P[P.Touches=8]="Touches",P[P.Crosses=16]="Crosses",P[P.Overlaps=32]="Overlaps",P[P.NoThisRelation=64]="NoThisRelation",P[P.Intersects=1073741824]="Intersects",P[P.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(p.YK||(p.YK={})),p.rL=function(){function P(){}return P.iW=function(x,d){var l=x.K(),n=d.K();if(p.ba.zj(l)){var a=x.Cb;if(a!=null&&(a=a.Hk)!=null){if(n==33){var h=d.D();a=a.Uo(h.x,h.y)}else h=new p.l,d.A(h),a=a.To(h);if(a==1)return 1;if(a==0)return 4}}if(p.ba.zj(n)&&(a=d.Cb)!=null&&(a=a.Hk)!=null){if(l==33?(x=x.D(),a=a.Uo(x.x,x.y)):(d=new p.l,x.A(d),a=a.To(d)),a==1)return 2;if(a==0)return 4}return 0},P}()}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.K=function(){return 15},d.prototype.W=function(l,n,a,h,f){return l instanceof p.ba?(l=new p.$c(l),n=new p.$c(n),this.W(l,n,a,h,f===void 0?-1:f).next()):f===void 0?new p.CC(l,n,a,h,-1):new p.CC(l,n,a,h,f)},d.prototype.yn=function(l,n,a){this.Ku(l)&&(n=p.ua.mj(n,l,!1),l.hj(a)||l.nu(n,a))},d.prototype.Ku=function(l){return p.Mx.uE(l)},d.instance=null,d}(p.Ge);p.Zj=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a,h){if(this.vs=l==null,this.za=-1,this.Sd=d,this.wg=n,this.Pe=l.next(),this.Fj=this.Pe.K(),this.Vb=a,this.Hi=h,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw p.i.O("bad dimension mask")}return x.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var d=this.Bw.next();if(d!=null)return d;this.Bw=null}for(;(d=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?d=this.Fa(d):(this.Bw=this.KS(d),d=this.Bw.next()),d;return null},x.prototype.Ma=function(){return this.za},x.prototype.Fa=function(d){var l=this.uK(d);if(l!=null)return l;l=p.ua.ov(this.Pe,d);var n=p.ua.Xd(this.wg,l,!0);l=new p.l,this.Pe.A(l);var a=new p.l;return d.A(a),l.X(2*n,2*n),l.Fa(a),l.X(100*n,100*n),n=p.Vd.clip(this.Pe,l,0,0),d=p.Vd.clip(d,l,0,0),p.Hg.Cv(d,n,this.wg,this.Vb)},x.prototype.KI=function(d,l,n){var a=0;if((1&l)!=0)n[0]==null&&(n[0]=new p.ee(d)),a++;else for(var h=0;h<n.length-1;h++)n[h]=n[h+1];if((2&l)!=0)n[a]==null&&(n[a]=new p.Ua(d)),a++;else for(h=a;h<n.length-1;h++)n[h]=n[h+1];if((4&l)!=0)n[a]==null&&(n[a]=new p.Ea(d)),a++;else for(h=a;h<n.length-1;h++)n[h]=n[h+1];if(a!=3){for(d=[],h=0;h<a;h++)d[h]=n[h];return new p.$c(d)}return new p.$c(n)},x.prototype.KS=function(d){var l=this.uK(d);if(l!=null){var n=[null,null,null];return n[l.Eb()]=l,this.KI(d.description,this.Hi,n)}l=p.ua.ov(this.Pe,d),n=p.ua.Xd(this.wg,l,!0),l=new p.l,this.Pe.A(l),l.X(2*n,2*n);var a=new p.l;return d.A(a),l.Fa(a),l.X(100*n,100*n),n=p.Vd.clip(this.Pe,l,0,0),l=p.Vd.clip(d,l,0,0),n=p.Hg.Kz(l,n,this.wg,this.Vb),this.KI(d.description,this.Hi,n)},x.prototype.uK=function(d){var l=p.ua.ov(d,this.Pe),n=p.ua.Xd(this.wg,l,!0);l=d.K();var a=d.B(),h=this.Pe.B();if(!(h=a||h)){h=new p.l,d.A(h);var f=new p.l;this.Pe.A(f),f.X(2*n,2*n),h=!h.isIntersecting(f)}if(!h)if((f=p.rL.iW(this.Pe,d))==4)h=!0;else{if((2&f)!=0)return this.Pe;if((1&f)!=0)return d}if(h)return(n=p.ba.uf(l))<(h=p.ba.uf(this.Fj))?x.CB(d,a):n>h||n==0&&l==550&&this.Fj==33?this.iJ():x.CB(d,a);if((this.Hi==-1||this.Hi==4)&&l==197&&this.Fj==197)return n=this.Pe,l=new p.l,d.A(l),a=new p.l,n.A(a),l.Fa(a),n=new p.Hh,d.copyTo(n),n.Zo(l),n;if(l==197&&p.ba.uf(this.Fj)==0||this.Fj==197&&p.ba.uf(l)==0)return a=l==197?d:this.Pe,d=l==197?this.Pe:d,l=new p.l,a.A(l),p.Vd.clip(d,l,n,0);if(p.ba.uf(l)==0&&0<p.ba.uf(this.Fj)||0<p.ba.uf(l)&&p.ba.uf(this.Fj)==0){if(n=p.ua.mj(this.wg,d,!1),l==550||l==33)return p.Hg.uG(d,this.Pe,n);if(this.Fj==550||this.Fj==33)return p.Hg.uG(this.Pe,d,n);throw p.i.Ra()}return this.Hi!=-1&&this.Hi!=2||l!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||l!=1736||this.Fj!=1607?null:this.rK(this.Pe,d):this.rK(d,this.Pe)},x.prototype.rK=function(d,l){var n=d,a=l,h=p.ua.mj(this.wg,l,!1),f=new p.l;a.A(f);var m=new p.l;n.A(m),m.X(2*h,2*h),f.Fa(m),f.X(10*h,10*h),n=d=p.Vd.clip(d,f,0,0),m=new p.ja(0);var y=-1,w=a.Cb;if(w!=null){var I=w.Hk;if(I!=null){y=0,m.Jb(n.I()+n.ea());for(var M=new p.l,T=n.Ha();T.ab();)for(;T.Ia();){T.ia().A(M);var $=I.To(M);$==1?m.add(1):$==0?m.add(0):(m.add(-1),y++)}}}if(5<l.I()&&(w=(a=l=p.Vd.clip(l,f,0,0)).Cb),0>y&&(y=n.sz()),f=n.I()+a.I(),y*a.I()>Math.log(f)*f*4)return null;f=null,y=a.Ha(),w!=null&&w.Gb!=null&&(f=w.Gb),f==null&&20<a.I()&&(f=p.ua.iE(a)),d=d.Ja(),a=null,w=n.Ha(),I=[0,0,0,0,0,0,0,0,0],M=new p.ce(0),T=new p.jg,$=-1;for(var F=0,R=0,j=0<m.size,H=-1;w.ab();){H=w.gb;var W=0;for($=-1,F=0;w.Ia();){var V=j?p.P.truncate(m.get(R)):-1;R++;var Y=w.ia();if(0>V){if(f!=null)for(a==null?a=f.qR(Y,h):a.Wo(Y,h),V=a.next();V!=-1;V=a.next()){y.Wb(f.ka(V)),V=y.ia();var se=Y.Fa(V,null,I,null,h);for(V=0;V<se;V++)M.add(I[V])}else for(y.aj();y.ab();)for(;y.Ia();)for(V=y.ia(),se=Y.Fa(V,null,I,null,h),V=0;V<se;V++)M.add(I[V]);if(0<M.size){M.Wd(0,M.size,function(Te,Ee){return Te-Ee});var re=0;M.add(1),se=-1,V=0;for(var he=M.size;V<he;V++){var ue=M.get(V);if(ue!=re){var we=!1;if(re!=0||ue!=1?(Y.dh(re,ue,T),re=T.get()):(re=Y,we=!0),2<=W){if(d.Fr(n,H,$,F,W==3),this.LD(l,re.bc(),h)!=1&&this.MD(l,re,h)!=1)return null;d.pc(re,!1),W=1,F=0}else switch(se=this.MD(l,re,h),se){case 1:we?2>W?($=w.xb()-n.Ca(H),F=1,W=W==0?3:2):F++:(d.pc(re,W==0),W=1);break;case 0:W=0,$=-1,F=0;break;default:return null}re=ue}}}else{if(0>(V=this.LD(l,Y.bc(),h)))return null;V==1?(2>W&&($=w.xb()-n.Ca(H),W=W==0?3:2),F++):($=-1,F=0)}M.clear(!1)}else V!=0&&V==1&&(W==0?(W=3,$=w.xb()-n.Ca(H)):W==1?(W=2,$=w.xb()-n.Ca(H)):F++)}2<=W&&(d.Fr(n,H,$,F,W==3),$=-1)}return d},x.prototype.LD=function(d,l,n){return p.Fg.ym(d,l,n)},x.prototype.MD=function(d,l,n){var a=l.bc();l=l.xc();var h=p.Fg.ym(d,a,n),f=p.Fg.ym(d,l,n);return h==1&&f==0||h==0&&f==1?-1:h==0||f==0?0:h==1||f==1?1:((h=new p.h).add(a,l),h.scale(.5),(d=p.Fg.ym(d,h,n))==0?0:d==1?1:-1)},x.CB=function(d,l){return l?d:d.Ja()},x.prototype.iJ=function(){return this.tH==null&&(this.tH=this.Pe.Ja()),this.tH},x.prototype.re=function(){},x}();p.CC=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 28},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a,h,f,m,y){return l instanceof p.ba?(l=new p.$c(l),this.W(l,n,a,h,f,m,y).next()):new p.sL(l,n,a,h,f,m,y)},d.instance=null,d}(p.Ge);p.DC=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a,h,f,m){this.za=-1,this.Sd=d,this.Oj=l,this.La=n,this.Mi=a,this.xA=h,this.pH=f,this.od=m}return x.prototype.next=function(){var d=this.Sd.next();return d!=null?(this.za=this.Sd.Ma(),this.eL(d)):null},x.prototype.Ma=function(){return this.za},x.prototype.eL=function(d){var l=0>=this.pH?p.ua.mj(this.Oj,d,!1):this.pH;return p.DK.W(d,this.La,this.Mi,this.xA,l,this.od)},x.prototype.re=function(){},x}();p.sL=P}(Q||(Q={})),function(p){var P;(P=p.IK||(p.IK={}))[P.clipToDomainOnly=1]="clipToDomainOnly",P[P.clipWithHorizon=2]="clipWithHorizon",P[P.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var x=function(d){function l(){return d!==null&&d.apply(this,arguments)||this}return Et(l,d),l.prototype.K=function(){return 0},l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.W=function(n,a,h){return n instanceof p.ba?(n=new p.$c(n),this.W(n,a,h).next()):new p.tL(n,a,h)},l.prototype.transform=function(n,a,h,f){return p.du.transform(n,a,h,f,!0)},l.prototype.St=function(n,a,h,f){return p.du.St(n,a,h,f)},l.instance=null,l}(p.Ge);p.Gx=x}(Q||(Q={})),function(p){var P=function(){function x(d,l,n){this.za=-1,this.Sd=d,this.HT=l,this.od=n}return x.prototype.next=function(){var d=this.Sd.next();return d!=null?(this.za=this.Sd.Ma(),p.du.Bh(d,this.HT,this.od)):null},x.prototype.Ma=function(){return this.za},x.prototype.re=function(){},x}();p.tL=P}(Q||(Q={})),function(p){var P=function(){function d(){}return d.prototype.reset=function(){this.rh=this.zk=-1,this.ws=this.mq=!1},d.prototype.vQ=function(l,n,a){for(l.Wb(n,a);l.Ia();){var h=l.ia();if((h=h.Rb())!=0)return l.xb()}for(l.Wb(n,a);l.zz();)if((h=(h=l.ni()).Rb())!=0)return l.xb();return-1},d.prototype.wQ=function(l,n){for(l.Wb(n,-1);l.zz();)if(l.ni().Rb()!=0)return l.xb();return-1},d.prototype.uQ=function(l,n){for(l.Wb(n,-1),l.ia();l.Ia();)if(l.ia().Rb()!=0)return l.xb();return-1},d.prototype.tQ=function(l,n,a,h){if(this.zk=this.vQ(n,a,h),this.zk!=-1){n.Wb(this.zk,-1);var f=n.ia(),m=f.ic(f.ge(l,!1));if(a=p.h.zc(m,l),(h=new p.h).N(m),h.sub(f.bc()),(m=new p.h).N(l),m.sub(f.bc()),this.mq=0>h.yi(m),this.rh=this.uQ(n,this.zk),this.rh!=-1){n.Wb(this.rh,-1);var y=(f=n.ia()).ge(l,!1);y=f.ic(y);var w=p.h.zc(y,l);w>a?this.rh=-1:(h.N(y),h.sub(f.bc()),m.N(l),m.sub(f.bc()),this.ws=0>h.yi(m))}this.rh==-1&&(this.rh=this.wQ(n,this.zk),this.rh!=-1&&(n.Wb(this.rh,-1),y=(f=n.ia()).ge(l,!1),y=f.ic(y),(w=p.h.zc(y,l))>a?this.rh=-1:(h.N(y),h.sub(f.bc()),m.N(l),m.sub(f.bc()),this.ws=0>h.yi(m),l=this.zk,this.zk=this.rh,this.rh=l,l=this.mq,this.mq=this.ws,this.ws=l)))}},d.prototype.YN=function(l,n,a,h,f){return a=a.Ha(),this.tQ(l,a,h,f),this.zk!=-1&&this.rh==-1?this.mq:this.zk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(a.Wb(this.zk,-1),l=a.ia().lg(),a.Wb(this.rh,-1),n=a.ia().lg(),0<=l.yi(n)):n},d}(),x=function(d){function l(){return d!==null&&d.apply(this,arguments)||this}return Et(l,d),l.local=function(){return l.instance===null&&(l.instance=new l),l.instance},l.prototype.K=function(){return 3},l.prototype.iz=function(n,a,h){var f;if(f===void 0&&(f=!1),n.B())return new p.bm;a=a.D();var m=n,y=n.K();switch(y==197&&((m=new p.Ea).bd(n,!1),y=1736),y){case 33:return this.sI(m,a);case 550:return this.eI(m,a);case 1607:case 1736:return this.XT(m,a,h,f);default:throw p.i.ga("not implemented")}},l.prototype.jz=function(n,a){if(n.B())return new p.bm;a=a.D();var h=n,f=n.K();switch(f==197&&((h=new p.Ea).bd(n,!1),f=1736),f){case 33:return this.sI(h,a);case 550:case 1607:case 1736:return this.eI(h,a);default:throw p.i.ga("not implemented")}},l.prototype.kz=function(n,a,h,f){if(0>f)throw p.i.O();if(n.B())return[];a=a.D();var m=n,y=n.K();switch(y==197&&((m=new p.Ea).bd(n,!1),y=1736),y){case 33:return this.OU(m,a,h,f);case 550:case 1607:case 1736:return this.oU(m,a,h,f);default:throw p.i.ga("not implemented")}},l.prototype.XT=function(n,a,h,f){if(n.K()==1736&&h&&(h=new p.l,n.A(h),h=p.ua.Xd(null,h,!1),(f?p.jd.Zd(n,a,0):p.jd.Zd(n,a,h))!=0)){var m=new p.bm(a,0,0);return f&&m.RJ(!0),m}var y=n.Ha();m=new p.h;for(var w=h=-1,I=17976931348623157e292,M=0;y.ab();)for(;y.Ia();){var T=y.ia();T=T.ic(T.ge(a,!1));var $=p.h.zc(T,a);$<I?(M=1,m=T,h=y.xb(),w=y.gb,I=$):$==I&&M++}return m=new p.bm(m,h,Math.sqrt(I)),f&&(y.Wb(h,w),T=y.ia(),f=0>p.h.Wq(a,T.bc(),T.xc()),1<M&&((M=new P).reset(),f=M.YN(a,f,n,h,w)),m.RJ(f)),m},l.prototype.sI=function(n,a){return n=n.D(),a=p.h.ub(n,a),new p.bm(n,0,a)},l.prototype.eI=function(n,a){for(var h=n.vb(0),f=n.I(),m=n=0,y=0,w=17976931348623157e292,I=0;I<f;I++){var M=new p.h;h.uc(2*I,M);var T=p.h.zc(M,a);T<w&&(m=M.x,y=M.y,n=I,w=T)}return(a=new p.bm).by(m,y,n,Math.sqrt(w)),a},l.prototype.OU=function(n,a,h,f){return f==0?[]:(h*=h,n=n.D(),(a=p.h.zc(n,a))<=h?(h=[],(f=new p.bm).by(n.x,n.y,0,Math.sqrt(a)),h[0]=f):h=[],h)},l.prototype.oU=function(n,a,h,f){if(f==0)return[];var m=n.vb(0),y=n.I();n=[],h*=h;for(var w=0;w<y;w++){var I=m.read(2*w),M=m.read(2*w+1),T=a.x-I,$=a.y-M;(T=T*T+$*$)<=h&&(($=new p.bm).by(I,M,w,Math.sqrt(T)),n.push($))}return a=n.length,n.sort(function(F,R){return F.La<R.La?-1:F.La==R.La?0:1}),f>=a||(n.length=f),n.slice(0)},l.instance=null,l}(p.Ge);p.Hx=x}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 4},d.prototype.W=function(l,n,a,h,f){return p.cm.tB(l,n,a,h,f)},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.Ku=function(l){return p.Xt.ry(l)},d.prototype.yn=function(l,n,a){p.Xt.xD(l,n,a)},d.instance=null,d}(p.Ge);p.uL=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 33},d.prototype.W=function(l,n,a,h,f){return l===1073741824?!p.vd.uB(n,a,h,4,f):p.vd.uB(n,a,h,l,f)},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.Ku=function(l){return p.Xt.ry(l)},d.prototype.yn=function(l,n,a){p.Xt.xD(l,n,a)},d.instance=null,d}(p.Ge);p.fj=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a){if(this.od=a,this.lT=n,this.za=-1,d==null)throw p.i.O();this.Ak=d,this.Oj=l}return x.prototype.next=function(){var d;if((d=this.Ak.next())!=null){if(this.za=this.Ak.Ma(),this.od!=null&&!this.od.progress(-1,-1))throw p.i.hu("user_canceled");return this.$B(d)}return null},x.prototype.Ma=function(){return this.za},x.prototype.$B=function(d){if(d==null)throw p.i.O();return p.Ix.YJ(d,this.Oj,this.lT,this.od)},x.prototype.re=function(){},x}();p.vL=P}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 26},d.prototype.W=function(l,n,a,h){return l instanceof p.ba?(l=new p.$c(l),this.W(l,n,a,h).next()):new p.vL(l,n,a,h)},d.prototype.ts=function(l,n,a,h,f){return 0<(h!==void 0?p.Ix.ts(l,n,a,h,f):p.Ix.ts(l,n,!1,null,a))},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.instance=null,d}(p.Ge);p.$l=P}(Q||(Q={})),function(p){var P=function(){function f(){this.Aq=0}return f.prototype.iX=function(m){this.Aq&=-2,this.Aq|=m?1:0},f.prototype.Yp=function(){return(1&this.Aq)!=0},f.prototype.SF=function(){return this.Yp()?0:1},f}();p.tY=P;var x=function(){},d=function(f,m,y,w){this.x=f,this.y=m,this.Ci=y,this.zm=w},l=function(){function f(m){this.Ce=m}return f.prototype.compare=function(m,y,w){return m=m.ka(w),y=this.Ce.lf.read(2*y),0>(y-=m=this.Ce.lf.read(2*m))?-1:0<y?1:0},f}(),n=function(){function f(m){this.Ce=m}return f.prototype.compare=function(m,y,w){y=this.Ce.hb[y],m=this.Ce.hb[m.ka(w)];var I=y.Yp(),M=m.Yp();w=y.oe.Me(this.Ce.Oo,0);var T=m.oe.Me(this.Ce.Oo,0);return w==T&&((I=.5*((w=Math.min(I?y.oe.oa:y.oe.ma,M?m.oe.oa:m.oe.ma))-this.Ce.Oo)+this.Ce.Oo)==this.Ce.Oo&&(I=w),w=y.oe.Me(I,0),T=m.oe.Me(I,0)),w<T?-1:w>T?1:0},f}(),a=function(){function f(m,y){this.TI=new p.h,this.parent=m,this.ZR=y}return f.prototype.qr=function(m,y,w){var I=this.parent,M=this.ZR;w.Wd(m,y,function(T,$){return I.Oh(T,$,M)})},f.prototype.bq=function(m){return m=this.parent.ii.get(m),this.parent.lf.uc(2*(m>>1),this.TI),this.TI.y+((1&m)!=0?this.parent.Qj:-this.parent.Qj)},f}(),h=function(){function f(m,y,w,I,M){this.iH=m.description,this.Y=m,this.Sg=y,this.Qj=p.ua.mj(this.Sg,m,!1),this.Do=p.ua.mj(this.Sg,m,!0),this.sA=w,this.jT=this.iH.Ba,this.hb=[],this.ro=[],this.oh=new p.lp,this.fb=new p.$j,this.le=new p.Nd,this.UG=this.sl=M}return f.prototype.$S=function(){return this.UG=!0,(!p.ba.Ic(this.Y.K())||this.BE()&&this.yE(!1))&&this.hO()?p.ba.Ic(this.Y.K())?this.kO()?this.Y.K()==1607?this.mO()?2:0:this.nO()?this.oO():0:0:2:0},f.prototype.fC=function(m,y){var w=this.lf.read(2*m);m=this.lf.read(2*m+1);var I=this.lf.read(2*y);y=this.lf.read(2*y+1);var M=!p.$t.Ev(w,m,I,y,this.Qj*this.Qj);return M||this.Y.Eb()!=0&&w==I&&m==y},f.prototype.BE=function(){for(var m=this.Y,y=m.yf?3:2,w=0,I=m.ea();w<I;w++)if(m.Ka(w)<y)return this.le=new p.Nd(1,w,0),!1;return!0},f.prototype.yE=function(m){var y=this.Y,w=y.Ha(),I=y.hasAttribute(1);for(y=I?p.ua.rE(this.Sg,y,!1):0;w.ab();)for(;w.Ia();){var M=w.ia();if(!(M.Rb()>this.Qj)){if(m&&I){var T=M.yv(1,0);if(M=M.yv(1,0),Math.abs(M-T)>y)continue}return this.le=new p.Nd(2,w.xb(),-1),!1}}return!0},f.prototype.hO=function(){var m=this.Y,y=null;p.ba.Ic(this.Y.K())&&(y=this.Y);var w=(this.UG||this.sl)&&y!=null,I=m.I();this.lf=m.vb(0),this.ii=new p.ja(0),this.ii.Jb(2*I),this.hi=new p.ja(0),this.hi.Jb(2*I),w&&(this.Hl==null&&(this.Hl=new p.ja(0)),this.Hl.Jb(I));for(var M=m=0;M<I;M++)if(this.ii.add(2*M),this.ii.add(2*M+1),this.hi.add(2*M),this.hi.add(2*M+1),w){for(;M>=y.Wc(m);)m++;this.Hl.add(m)}for(new p.Zt().sort(this.hi,0,2*I,new a(this,w)),this.fb.clear(),this.fb.Xo(new l(this)),this.fb.Ee(I),y=0,I*=2;y<I;y++)if(w=this.hi.get(y),w=(m=this.ii.get(w))>>1,(1&m)==0){if(m=this.fb.addElement(w,-1),(M=this.fb.xe(m))!=-1&&!this.fC(this.fb.ka(M),w))return this.le=new p.Nd(3,w,this.fb.ka(M)),!1;var T=this.fb.lb(m);if(T!=-1&&!this.fC(this.fb.ka(T),w))return this.le=new p.Nd(3,w,this.fb.ka(T)),!1}else if(m=this.fb.search(w,-1),M=this.fb.xe(m),T=this.fb.lb(m),this.fb.wd(m,-1),M!=-1&&T!=-1&&!this.fC(this.fb.ka(M),this.fb.ka(T)))return this.le=new p.Nd(3,this.fb.ka(M),this.fb.ka(T)),!1;return!0},f.prototype.kO=function(){return 10>this.Y.I()?this.iO():this.jO()},f.prototype.jO=function(){var m=new p.hd;m.Ib(this.Y);var y=new p.Nd;return!p.bu.fI(!1,m,this.Qj,y,this.od)||(y.Lo=m.Va(y.Lo),y.Mo=m.Va(y.Mo),this.le.Yt(y),!1)},f.prototype.iO=function(){var m=this.Y,y=m.Ha();for(m=m.Ha();y.ab();)for(;y.Ia();){var w=y.ia();if(!y.Sn()||!y.VS()){m.wW(y);do for(;m.Ia();){var I=m.ia();if((I=w.Br(I,this.Qj,!0))!=0)return this.le=new p.Nd(I==2?5:4,y.xb(),m.xb()),!1}while(m.ab())}}return!0},f.prototype.nO=function(){var m=this.Y;this.hb.length=0,this.ro.length=0,this.ag=m.Ha(),this.ag.EB();var y=new p.ja(0);y.Jb(10);var w=NaN,I=0,M=0;for(m=2*m.I();M<m;M++){var T=this.hi.get(M);if((1&(T=this.ii.get(T)))==0){T>>=1;var $=this.lf.read(2*T),F=this.lf.read(2*T+1);if(y.size!=0&&($!=w||F!=I)){if(!this.LI(y))return!1;y!=null&&y.clear(!1)}y.add(T),w=$,I=F}}return!!this.LI(y)},f.prototype.mO=function(){for(var m=this.Y,y=Array(m.ea()),w=0,I=m.ea();w<I;w++)y[w]=m.Pn(w);I=new x;var M=new p.h;w=this.hi.get(0);var T=(w=this.ii.get(w))>>1;this.lf.uc(2*T,M);var $=y[w=this.Hl.get(T)],F=m.Ca(w),R=m.Wc(w)-1;I.gl=T==F||T==R,I.jy=this.sl?!$&&I.gl:I.gl,I.Ci=w,I.x=M.x,I.y=M.y,I.zm=T;for(var j=new x,H=1,W=this.hi.size;H<W;H++)if(w=this.hi.get(H),(1&(w=this.ii.get(w)))==0){T=w>>1,this.lf.uc(2*T,M),(w=this.Hl.get(T))!=I.Ci&&($=y[w],F=m.Ca(w),R=m.Wc(w)-1);var V=T==F||T==R,Y=this.sl?!$&&I.gl:I.gl;if(j.x=M.x,j.y=M.y,j.Ci=w,j.zm=T,j.jy=Y,j.gl=V,j.x==I.x&&j.y==I.y){if(this.sl){if(!(j.jy&&I.jy||j.Ci==I.Ci&&(j.gl||I.gl)))return this.le=new p.Nd(8,j.zm,I.zm),!1}else if(!j.gl||!I.gl)return this.le=new p.Nd(5,j.zm,I.zm),!1}w=I,I=j,j=w}return!0},f.prototype.EE=function(){for(var m=this.Y,y=[],w=-1,I=!1,M=0,T=m.ea();M<T;M++)m.Gv(M)&&(I=!1,w++,M<T-1&&(m.Gv(M+1)||(I=!0))),y[M]=I?w:-1;I=new p.h,M=this.hi.get(0);var $=(M=this.ii.get(M))>>1;this.lf.uc(2*$,I),M=this.Hl.get($),w=new d(I.x,I.y,M,$,y[M]),m=[];var F=1;for(T=this.hi.size;F<T;F++)if(M=this.hi.get(F),(1&(M=this.ii.get(M)))==0){if($=M>>1,this.lf.uc(2*$,I),M=this.Hl.get($),(M=new d(I.x,I.y,M,$,y[M])).x==w.x&&M.y==w.y){if(M.Ci==w.Ci)return this.le=new p.Nd(9,M.zm,w.zm),!1;0<=y[M.Ci]&&y[M.Ci]==y[w.Ci]&&(m.length!=0&&m[m.length-1]==w||m.push(w),m.push(M))}w=M}if(m.length==0)return!0;for(M=new p.lp(!0),p.P.bv(y,-1),I=-1,(F=new p.h).Sc(),w=0,T=m.length;w<T;w++){($=m[w]).x==F.x&&$.y==F.y||(I=M.Rh(0),F.x=$.x,F.y=$.y);var R=y[$.Ci];R==-1&&(R=M.Rh(2),y[$.Ci]=R),M.addElement(R,I),M.addElement(I,R)}for((T=new p.ja(0)).Jb(10),w=M.ke;w!=-1;w=M.lz(w))if((1&(m=M.KF(w)))==0&&(2&m)!=0){for(m=-1,T.add(w),T.add(-1);0<T.size;){if(I=T.Gc(),T.Jf(),F=T.Gc(),T.Jf(),(1&($=M.KF(F)))!=0){m=(2&$)==0?I:F;break}for(M.aX(F,1|$),$=M.sc(F);$!=-1;$=M.lb($))(R=M.getData($))!=I&&(T.add(R),T.add(F))}if(m!=-1){for(M=-1,w=0,T=y.length;w<T;w++)if(y[w]==m){M=w;break}return this.le=new p.Nd(10,M,-1),!1}}return!0},f.prototype.oO=function(){var m=this.Y;if(0>=m.He())return this.le=new p.Nd(6,m.ea()==1?1:-1,-1),0;if(m.ea()==1)return this.sl&&!this.EE()?0:2;this.vo=p.ja.rf(m.ea(),0),this.EA=p.ja.rf(m.ea(),-1);for(var y=-1,w=0,I=0,M=m.ea();I<M;I++){var T=m.Kr(I);if(this.vo.write(I,0>T?0:256),0<T)y=I,w=T;else{if(T==0)return this.le=new p.Nd(6,I,-1),0;if((0>y||w<Math.abs(T))&&(this.le=new p.Nd(7,I,-1),this.sl))return 0;this.EA.write(I,y)}}for(this.et=m.ea(),this.Qm=new p.ja(0),this.Qm.Jb(10),M=m.I(),this.Oo=NaN,(m=new p.ja(0)).Jb(10),this.Sq=p.ja.rf(M,-1),this.Jw=p.ja.rf(M,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new p.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Xo(new n(this)),y=0,M*=2;0<this.et&&y<M;y++)if(w=this.hi.get(y),(1&(w=this.ii.get(w)))==0){if(w>>=1,(I=this.lf.read(2*w+1))!=this.Oo&&m.size!=0){if(!this.vt(m))return 0;m!=null&&m.clear(!1)}m.add(w),this.Oo=I}return 0<this.et&&!this.vt(m)?0:this.sl?this.le.Lj==0&&this.EE()?2:0:this.le.Lj==0?2:1},f.prototype.LI=function(m){if(m.size==1)return!0;for(var y=0,w=m.size;y<w;y++){var I=m.get(y);this.ag.Wb(I);var M=this.ag.ni();this.hb.push(this.Uu(M,I,this.ag.gb,!0)),this.ag.ia(),M=this.ag.ia(),this.hb.push(this.Uu(M,I,this.ag.gb,!1))}var T=this;for(this.hb.sort(function(R,j){return T.SP(R,j)}),(I=this.oh.ke)==-1&&(I=this.oh.Rh(0)),this.oh.hn(this.hb.length),y=0,w=this.hb.length;y<w;y++)this.oh.addElement(I,y);y=!0;for(var $=w=-1;y&&(y=!1,(M=this.oh.sc(I))!=-1);)for(var F=this.oh.lb(M);F!=-1;)if(w=this.oh.getData(M),$=this.oh.getData(F),(w=this.hb[w].Ko)!=($=this.hb[$].Ko))M=F,F=this.oh.lb(M);else if(y=!0,this.oh.kd(I,M),M=this.oh.xe(F),(F=this.oh.kd(I,F))==-1||M==-1)break;if(y=this.oh.ds(I),this.oh.GE(I),0<y)return this.le=new p.Nd(5,w,$),!1;for(y=0,w=m.size;y<w;y++)this.qB(this.hb[y]);return this.hb.length=0,!0},f.prototype.vt=function(m){for(var y=0,w=m.size;y<w;y++){var I=m.get(y),M=this.Sq.read(I);if(M!=-1){var T=this.fb.ka(M);this.Bj.add(T),this.fb.wd(M,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Sq.write(I,-1)}(M=this.Jw.read(I))!=-1&&(T=this.fb.ka(M),this.Bj.add(T),this.fb.wd(M,-1),this.qB(this.hb[T]),this.hb[T]=null,this.Jw.write(I,-1))}for(y=0,w=m.size;y<w;y++){if(I=m.get(y),this.ag.Wb(I),(M=this.ag.ni()).oa>M.ma){var $=this.ag.xb(),F=this.Uu(M,I,this.ag.gb,!0);0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=F):(T=this.hb.length,this.hb.push(F)),M=this.fb.addElement(T,-1),this.Sq.read($)==-1?this.Sq.write($,M):this.Jw.write($,M),(3&this.vo.read(this.ag.gb))==0&&this.Qm.add(M)}this.ag.ia(),(M=this.ag.ia()).oa<M.ma&&($=this.ag.kk(),F=this.Uu(M,I,this.ag.gb,!1),0<this.Bj.size?(T=this.Bj.Gc(),this.Bj.Jf(),this.hb[T]=F):(T=this.hb.length,this.hb.push(F)),M=this.fb.addElement(T,-1),this.Sq.read($)==-1?this.Sq.write($,M):this.Jw.write($,M),(3&this.vo.read(this.ag.gb))==0&&this.Qm.add(M))}for(y=0,w=this.Qm.size;y<w&&0<this.et;y++)if(M=this.Qm.get(y),(3&this.vo.read(this.hb[this.fb.ka(M)].DA))==0){m=-1,I=this.fb.xe(M);var R=M;F=null,T=-1;for(var j=0;I!=-1&&(T=this.fb.ka(I),T=(F=this.hb[T]).DA,(3&(j=this.vo.read(T)))==0);)R=I,I=this.fb.xe(I);I==-1?($=1,I=R):(m=(3&j)==1?T:this.EA.read(T),$=F.SF()!=0?0:1,I=this.fb.lb(I));do{if(T=this.fb.ka(I),T=(F=this.hb[T]).DA,(3&(R=this.vo.read(T)))==0){if($!=F.SF())return this.le=new p.Nd(6,T,-1),!1;if(R=252&R|(j=$==0||F.Yp()?2:1),this.vo.write(T,j),j==2&&this.le.Lj==0&&this.EA.read(T)!=m&&(this.le=new p.Nd(7,T,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&R)==1&&(m=T),R=I,I=this.fb.lb(I),$=$!=0?0:1}while(R!=M)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new p.ja(0),!0},f.prototype.Uu=function(m,y,w,I){if(m.K()!=322)throw p.i.Ra();return(m=this.nP(m)).Ko=y,m.DA=w,m.Aq=0,m.iX(I),m},f.prototype.nP=function(m){if(0<this.ro.length){var y=this.ro[this.ro.length-1];--this.ro.length,m.copyTo(y.oe)}else(y=new P).oe=p.NC.kg(m);return y},f.prototype.qB=function(m){m.oe.K()==322&&this.ro.push(m)},f.prototype.fU=function(){for(var m=this.Y.I(),y=new p.ja(0),w=0;w<m;w++)y.add(w);var I=this;for(y.Wd(0,m,function(M,T){return I.Qu(M,T)}),w=1;w<m;w++)if(this.Qu(y.get(w-1),y.get(w))==0)return this.le=new p.Nd(3,y.get(w-1),y.get(w)),0;return 2},f.prototype.EV=function(){return this.BE()&&this.yE(!0)?2:0},f.prototype.jV=function(){return this.$S()},f.prototype.kU=function(){for(var m=this.Y.I(),y=new p.ja(0),w=0;w<m;w++)y.add(w);var I=this;y.Wd(0,m,function(R,j){return I.KO(R,j)});var M=Array(m);for(p.P.bv(M,!1),M[y.get(0)]=!0,w=1;w<m;w++){var T=y.get(w-1),$=y.get(w);this.Qu(T,$)==0?M[$]=!1:M[$]=!0}y=this.Y.Ja(),T=this.Y,$=0;var F=1;for(w=0;w<m;w++)M[w]?F=w+1:($<F&&y.Gd(T,$,F),$=w+1);return $<F&&y.Gd(T,$,F),y.Eh(2,this.Do),y},f.prototype.IV=function(){var m=this.Y,y=m.Ha(),w=m.Ha(),I=this.Y.Ja(),M=this.Y,T=m.hasAttribute(1),$=T?p.ua.rE(this.Sg,m,!0):0,F=new p.ja(0),R=new p.ja(0);for(F.Jb(p.P.truncate(m.I()/2+1)),R.Jb(p.P.truncate(m.I()/2+1));y.ab();)if(w.ab(),!(2>m.Ka(y.gb))){w.yW();for(var j,H,W=!0;y.Ia();){var V=y.ia(),Y=w.ni();if(y.xb()>w.xb())break;W&&(F.add(y.xb()),R.add(w.kk()),W=!1),H=F.Gc();var se=y.kk();if(1<se-H){var re=new p.h;re.vc(m.Oa(H),m.Oa(se)),j=re.length()}else j=V.Rb();H=R.Gc(),1<(se=w.xb())-H?((re=new p.h).vc(m.Oa(H),m.Oa(se)),H=re.length()):H=Y.Rb(),j>this.Do?F.add(y.kk()):T&&(j=m.Vc(1,F.Gc(),0),V=V.jv(1,0),Math.abs(V-j)>$&&F.add(y.kk())),H>this.Do?R.add(w.xb()):T&&(j=m.Vc(1,R.Gc(),0),V=Y.jv(1,0),Math.abs(V-j)>$&&R.add(w.xb()))}if(F.Gc()<R.Gc()?F.size>R.size?F.Jf():R.Jf():(F.Gc()!=R.Gc()&&R.Jf(),R.Jf()),2<=R.size+F.size){for(W=new p.Ta,Y=0,V=F.size;Y<V;Y++)M.we(F.get(Y),W),Y==0?I.nf(W):I.lineTo(W);for(Y=R.size-1;0<Y;Y--)M.we(R.get(Y),W),I.lineTo(W);M.ec(y.gb)?I.Cp():0<R.size&&(M.we(R.get(0),W),I.lineTo(W))}F!=null&&F.clear(!1),R!=null&&R.clear(!1)}return I.Eh(2,this.Do),I},f.prototype.mV=function(){return this.zX()},f.prototype.zX=function(){return this.Y.K()==1736&&this.Y.Kn()==1?p.Hg.Ok(this.Y,this.Do,!0,!1,this.od):(this.Ji=new p.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.sA!=1&&p.Vk.W(this.Ji,this.Do,this.od,!0),this.Y.K()==1736&&p.tn.W(this.Ji,this.Ji.md,this.sA,!1,this.od)),this.Y=this.Ji.Ke(this.Ji.md),this.Y.K()==1736&&(this.Y.hm(),this.Y.$o(0)),this.Y.Eh(2,this.Do),this.Y)},f.ts=function(m,y,w,I,M){if(I!=null&&(I.Lj=0,I.Lo=-1,I.Mo=-1),m.B())return 1;var T=m.K();if(T==33)return 1;var $=p.ua.mj(y,m,!1);if(T==197)return y=new p.l,m.A(y),y.Di($)?(I!=null&&(I.Lj=2,I.Lo=-1,I.Mo=-1),0):1;if(p.ba.zd(T))return($=new p.Ua(m.description)).pc(m,!0),f.ts($,y,w,I,M);var F=m.qm($);if((w=w?-1:F)!=-1)return w;if(y=new f(m,y,w,M,!1),T==550)w=y.fU();else if(T==1607)w=y.EV();else{if(T!=1736)throw p.i.Ra();w=y.jV()}return m.Eh(w,$),I!=null&&w==0&&I.Yt(y.le),w},f.YJ=function(m,y,w,I){if(m.B())return m;var M=m.K();if(M==33)return m;var T=p.ua.mj(y,m,!1);if(M==197)return y=new p.l,m.A(y),y.Di(T)?m.Ja():m;if(p.ba.zd(M))return(M=new p.Ua(m.description)).pc(m,!0),f.YJ(M,y,w,I);if(T=m.qm(T),(w=w?-1:T)==2)return m;if(m=new f(m,y,w,I,!1),M==550)m=m.kU();else if(M==1607)m=m.IV();else{if(M!=1736)throw p.i.Ra();m=m.mV()}return m},f.prototype.Oh=function(m,y,w){if(m==y)return 0;m=this.ii.get(m);var I=this.ii.get(y);y=m>>1;var M=I>>1,T=new p.h,$=new p.h;return this.lf.uc(2*y,T),T.y+=(1&m)!=0?this.Qj:-this.Qj,this.lf.uc(2*M,$),$.y+=(1&I)!=0?this.Qj:-this.Qj,(m=T.compare($))==0&&w?0>(w=this.Hl.get(y)-this.Hl.get(M))?-1:0<w?1:0:m},f.prototype.Qu=function(m,y){if(m==y)return 0;var w=this.Y,I=w.Oa(m),M=w.Oa(y);if(I.x<M.x)return-1;if(I.x>M.x)return 1;if(I.y<M.y)return-1;if(I.y>M.y)return 1;for(I=1;I<this.jT;I++){M=this.iH.ld(I);for(var T=p.sa.Wa(M),$=0;$<T;$++){var F=w.Vc(M,m,$),R=w.Vc(M,y,$);if(F<R)return-1;if(F>R)return 1}}return 0},f.prototype.KO=function(m,y){var w=this.Qu(m,y);return w==0?m<y?-1:1:w},f.prototype.SP=function(m,y){if(m===y)return 0;var w=m.oe.lg();m.Yp()&&w.Uq(),m=y.oe.lg(),y.Yp()&&m.Uq(),y=w.su();var I=m.su();return I==y?(y=w.yi(m),Math.abs(y)<=8881784197001252e-31*(Math.abs(m.x*w.y)+Math.abs(m.y*w.x))&&(y--,y++),0>y?1:0<y?-1:0):y<I?-1:1},f}();p.Ix=h}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 30},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.prototype.W=function(l,n,a,h){return l instanceof p.ba?(l=new p.$c(l),n=new p.$c(n),this.W(l,n,a,h).next()):new p.wL(l,n,a,h)},d.gp=function(l,n,a,h){var f=l.Eb(),m=n.Eb();if(l.B()&&n.B())return f>m?l:n;if(l.B())return n;if(n.B())return l;var y=new p.l,w=new p.l,I=new p.l;return l.A(y),n.A(w),I.L(y),I.$b(w),y=p.ua.Xd(a,I,!0),w=l.K(),I=n.K(),w==33&&I==33?d.WU(l,n,y):w!=I?0<f||0<m?f>m?l:n:w==550?d.dI(l,n,y):d.dI(n,l,y):p.Hg.gp(l,n,a,h)},d.WU=function(l,n,a){a=a*Math.sqrt(2)*1.00001,a*=a;var h=l.D(),f=n.D(),m=new p.ee(l.description);return p.h.zc(h,f)>a&&(m.add(l),m.add(n)),m},d.dI=function(l,n,a){var h=l.vb(0),f=l.I(),m=n.D(),y=l.Ja();a=a*Math.sqrt(2)*1.00001;var w=new p.l;if(l.A(w),w.X(a,a),w.contains(m)){a*=a,w=!1;for(var I=[],M=0;M<f;M++)I[M]=!1;for(M=0;M<f;M++){var T=h.read(2*M),$=h.read(2*M+1);(T-=m.x)*T+($-=m.y)*$<=a&&(w=!0,I[M]=!0)}if(w)for(M=0;M<f;M++)I[M]||y.Gd(l,M,M+1);else y.Gd(l,0,f),y.add(n)}else y.Gd(l,0,f),y.add(n);return y},d.instance=null,d}(p.Ge);p.Jx=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n,a){this.vs=l==null,this.za=-1,this.Sd=d,this.wg=n,this.IT=l.next(),this.Vb=a}return x.prototype.next=function(){return this.vs?null:(d=this.Sd.next())!=null?(this.za=this.Sd.Ma(),p.Jx.gp(d,this.IT,this.wg,this.Vb)):null;var d},x.prototype.Ma=function(){return this.za},x.prototype.re=function(){},x}();p.wL=P}(Q||(Q={})),function(p){var P=function(){function l(){}return l.prototype.Az=function(){this.Vy=null,this.zx=-1,this.vK=!1},l}(),x=function(){function l(){this.Ir=0,this.rj=[]}return l.prototype.kN=function(n){this.Ir+=n.zx,this.rj.push(n)},l.prototype.OV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},l.prototype.iy=function(){return this.rj[this.rj.length-1]},l.prototype.Nb=function(n){return n===this},l}(),d=function(){function l(n,a,h){this.za=-1,this.Jc=!1,this.vH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Bk=-1,this.kq=0,this.eo=-1,this.Fo=[],this.Sd=n,this.wg=a,this.Vb=h}return l.ZD=function(n){var a=[],h=0;for(n=Object.keys(n);h<n.length;h++)a.push(Number(n[h]));return a.sort(function(f,m){return f-m}),a},l.prototype.aG=function(n){var a=this.Fo[n],h=l.ZD(a)[0],f=a[h],m=f.iy().Vy;return f=f.iy().vK,delete a[h],f&&(m=p.$l.local().W(m,this.wg,!1,this.Vb),n==0&&m.K()==33&&(n=new p.ee(m.description),m.B()||n.add(m),m=n)),m},l.prototype.next=function(){if(this.Jc&&this.eo==this.Bk)return null;for(;!this.lK(););if(this.Bk==-1)return null;if(this.eA){for(this.eo++;;){if(this.eo>this.Bk||0>this.eo)throw p.i.Ra();if(this.vH[this.eo])break}return this.za++,this.aG(this.eo)}return this.za=0,this.eo=this.Bk,this.aG(this.Bk)},l.prototype.Ma=function(){return this.za},l.prototype.lK=function(){if(this.Jc)return!0;var n=null;if(this.Sd!=null&&(n=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),p.op.Bp(this.Vb),n!=null){var a=n.Eb();this.vH[a]=!0,a>=this.Bk&&!this.eA&&(this.HD(a,!1,n),a>this.Bk&&!this.eA&&this.uW(a))}if(0<this.kq)for(a=0;a<=this.Bk;a++)for(;1<this.wq[a]&&(n=this.AO(a)).length!=0;)n=p.Hg.QP(n,this.wg,this.Vb),this.HD(a,!0,n);return this.Jc},l.prototype.AO=function(n){for(var a=[],h=[],f=this.Fo[n],m=l.ZD(f),y=0;y<m.length;y++){var w=m[y],I=f[w];if(this.Jc||1e4<I.Ir&&1<I.rj.length){for(this.wq[n]-=I.rj.length,this.kq-=I.rj.length;0<I.rj.length;)a.push(I.iy().Vy),I.OV();h.push(w)}}for(y=0;y<h.length;y++)delete f[h[y]];return a},l.prototype.uW=function(n){for(var a=0;a<n;a++)this.Fo[a]=[],this.kq-=this.wq[a],this.wq[a]=0},l.prototype.HD=function(n,a,h){var f=new P;if(f.Az(),f.Vy=h,h=l.$R(h),f.zx=h,h=l.YR(h),n+1>this.Fo.length)for(var m=0,y=Math.max(2,n+1);m<y;m++)this.Fo.push([]);(m=this.Fo[n][h])===void 0&&(m=new x,this.Fo[n][h]=m),f.vK=a,m.kN(f),this.wq[n]++,this.kq++,this.Bk=Math.max(this.Bk,n)},l.YR=function(n){return 0<n?p.P.truncate(Math.log(n)/Math.log(4)+.5):0},l.$R=function(n){var a=n.K();if(p.ba.zj(a))return n.I();if(a==33)return 1;if(a==197)return 4;if(p.ba.zd(a))return 2;throw p.i.Ra()},l.prototype.re=function(){this.lK()},l}();p.yL=d}(Q||(Q={})),function(p){var P=function(x){function d(){return x!==null&&x.apply(this,arguments)||this}return Et(d,x),d.prototype.K=function(){return 1},d.prototype.W=function(l,n,a,h){return h===void 0?new p.yL(l,n,a):this.bQ(l,n,a,h)},d.prototype.bQ=function(l,n,a,h){return l=new p.$c([l,n]),this.W(l,a,h).next()},d.local=function(){return d.instance===null&&(d.instance=new d),d.instance},d.instance=null,d}(p.Ge);p.Ih=P}(Q||(Q={})),function(p){var P,x;(x=P||(P={}))[x.nextPath=0]="nextPath",x[x.nextSegment=1]="nextSegment",x[x.iterate=2]="iterate",P=function(){function d(l,n,a,h){this.Vs=new p.l,this.BT=l,this.CT=n,this.oq=h,this.wo=-1,this.tl=!1;var f=l.Cb;f!=null&&(f=h?f.Bo:f.Gb)!=null&&(this.Jc=!1,this.ra=a,this.Gb=f,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,h?this.wo=n.ea():this.td=n.Ha()),this.tl||(f=n.Cb)!=null&&(f=h?f.Bo:f.Gb)!=null&&(this.Jc=!1,this.ra=a,this.Gb=f,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,h?this.wo=l.ea():this.td=l.Ha()),this.tl||(this.ei=h?p.ua.hR(l,n,a,1<=l.qm(0),1<=n.qm(0)):p.ua.gR(l,n,a))}return d.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var l=!0;l;)switch(this.Yb){case 0:l=this.sU();break;case 1:l=this.tU();break;case 2:l=this.Pz();break;default:throw p.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},d.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.wo:this.td.xb():this.ei.pl(this.ei.Xf)},d.prototype.jl=function(){return this.tl?this.pq?this.oq?this.wo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},d.prototype.oz=function(){if(!this.oq)throw p.i.ga("internal error");return this.tl?this.pq?this.Gb.BF(this.Hs):this.Vs:this.ei.oz(this.ei.Xf)},d.prototype.Wy=function(){if(!this.oq)throw p.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.BF(this.Hs):this.ei.Wy(this.ei.Bf)},d.prototype.sU=function(){return this.oq?--this.wo==-1?(this.Jc=!0,!1):(this.pq?this.CT.Tj(this.wo,this.Vs):this.BT.Tj(this.wo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},d.prototype.tU=function(){if(!this.td.Ia())return this.Yb=0,!0;var l=this.td.ia();return this.zw.Wo(l,this.ra),this.Yb=2,!0},d.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},d}(),p.am=P}(Q||(Q={})),function(p){(p=p.JL||(p.JL={}))[p.enumClosed=1]="enumClosed",p[p.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",p[p.enumOGCStartPolygon=4]="enumOGCStartPolygon",p[p.enumCalcMask=4]="enumCalcMask"}(Q||(Q={})),function(p){p.LC=function(){function P(){}return P.ub=function(x,d,l,n,a,h,f,m,y){var w=[0,0,0],I=[0,0,0],M=[0,0,0],T=[0,0,0,0],$=new p.ha(0),F=new p.ha(0),R=new p.ha(0);if(f!=null||m!=null||y!=null)if(p.s.vi(d))p.$g.ub(x,l,n,a,h,f,m,y);else{a=p.F.ca(a),l=p.F.ca(l);var j=p.F.ca(a-l);if(p.s.$(n,h)&&(p.s.$(l,a)||p.s.$(p.s.R(n),1.570796326794897)))f!=null&&(f.u=0),m!=null&&(m.u=0),y!=null&&(y.u=0);else{if(p.s.$(n,-h)){if(p.s.$(p.s.R(n),1.570796326794897))return f!=null&&(f.u=2*p.F.Ch(x,d)),m!=null&&(m.u=0<n?p.F.ca(3.141592653589793-p.F.ca(a)):p.F.ca(a)),void(y!=null&&(y.u=0<n?p.F.ca(a):p.F.ca(3.141592653589793-p.F.ca(a))));p.s.$(p.s.R(j),3.141592653589793)&&(f!=null&&(f.u=2*p.F.Ch(x,d)),m!=null&&(m.u=0),y!=null&&(y.u=0))}else if(p.s.$(p.s.R(n),1.570796326794897)||p.s.$(p.s.R(h),1.570796326794897)||p.s.$(l,a)||p.s.$(p.s.R(j),3.141592653589793)||p.s.Dd(n))return void p.Yk.ub(x,d,l,n,a,h,f,m,y);var H=Math.sqrt(1-d);a=p.F.ca(a-l),l=0,p.F.el(1,d,n,l,0,$,F,R),w[0]=$.u,w[1]=F.u,w[2]=R.u,p.F.el(1,d,h,a,0,$,F,R),I[0]=$.u,I[1]=F.u,I[2]=R.u,M[0]=0,M[1]=0,M[2]=-1*d*p.F.n(1,d,n)*Math.sin(n),0>a?p.F.Yq(M,I,w,T,0):p.F.Yq(M,w,I,T,0),F=[0,0,0],R=[0,0,0];var W=[0,0,0];w=[0,0,0],$=[0,0,0];var V=Math.acos(T[2]/1),Y=1-d,se=Math.tan(V),re=1+se*se/Y,he=2*M[2]*se/Y;for(Y=(-he+(se=Math.sqrt(he*he-4*re*(M[2]*M[2]/Y-1))))/(re*=2),he=(-he-se)/re,se=Math.tan(V),V=(Y+he)/2,M=((re=se*Y+M[2])+(se*he+M[2]))/2,se=p.F.ip(Y-V,re-M),Y=M/H*1.570796326794897,he=0;100>he&&(re=(re=p.F.w(d,Y))*re/Math.cos(Y)*(Math.sin(Y)-M*re/(1-d)),!p.s.Dd(re));he++)Y-=re;M=p.F.n(1,d,Y)*Math.cos(Y),se=1-se/(M=Math.sqrt((M-V)*(M+V))),se*=2-se,re=p.F.qn(F),V=p.F.qn(R),Y=p.F.qn(W);var ue=p.F.Ut(W,F);he=p.F.Ut(W,R),p.F.yx(W,F,w),p.F.yx(W,R,$),F=Math.acos(ue/(Y*re)),R=Math.acos(he/(Y*V)),R*=p.s.Mb(1,p.F.Ut(w,$)),(1.570796326794897<=p.s.R(F)&&1.570796326794897<=p.s.R(R)||3.141592653589793<p.s.R(F-R))&&(F=(3.141592653589793-p.s.R(F))*p.s.Mb(1,F),R=(3.141592653589793-p.s.R(R))*p.s.Mb(1,R)),w=p.F.Sj(se,R),$=p.F.q(M,se,p.F.Sj(se,F)),w=p.F.q(M,se,w),w=p.s.R(w-$)*x,F=new p.ha(0),R=new p.ha(0),W=T[1]/1,W*=-p.s.Mb(1,j),$=Math.acos(W)*p.s.Mb(1,j),P.sf(x,d,l,n,w,$,F,R),p.s.$(a,F.u)&&p.s.$(h,R.u)||(se=p.F.ip(p.F.ca(a-F.u),h-R.u),P.sf(x,d,l,n,w,p.F.ca($+3.141592653589793),F,R),(re=p.F.ip(p.F.ca(a-F.u),h-R.u))<se&&($=p.F.ca($+3.141592653589793))),F=[0,0,0,0],R=[0,0,0,0],se=[0,0,0],x=[0,0,0],l=[0,0,0],n=[0,0,0],W=[0,0,0],(M=[0,0,0])[0]=0,M[1]=0,M[2]=H,se[0]=0,se[1]=0,se[2]=0,p.F.Yq(se,M,I,F,0),p.s.Dd(h)?(x[0]=I[0],x[1]=I[1],x[2]=1,l[0]=1*Math.cos(a)-1*Math.sin(a),l[1]=1*Math.sin(a)+1*Math.cos(a)):(d=p.F.n(1,d,h)*Math.cos(h),x[0]=0,x[1]=0,I[2]+=Math.tan(1.570796326794897-p.s.R(h))*d*p.s.Mb(1,h),l[0]=d*Math.cos(a)-d*Math.sin(a),l[1]=d*Math.sin(a)+d*Math.cos(a)),l[2]=I[2],p.F.Yq(I,l,x,R,1),p.F.yx(R,F,n),p.F.yx(R,T,W),W=p.F.Ut(n,W)/(p.F.qn(n)*p.F.qn(W)),W*=p.s.Mb(1,j),a=Math.acos(W)*-p.s.Mb(1,j),(0<$&&0<a||0>$&&0>a)&&(a=p.F.ca(a+3.141592653589793)),f!=null&&(f.u=w),m!=null&&(m.u=$),y!=null&&(y.u=a)}}},P.sf=function(x,d,l,n,a,h,f,m){var y=[0,0,0],w=[0,0,0],I=[0,0,0],M=[0,0,0],T=[0,0,0],$=[0,0,0],F=[0,0,0],R=[0,0,0,0],j=new p.ha(0),H=new p.ha(0),W=new p.ha(0),V=new p.ha(0),Y=new p.ha(0),se=new p.ha(0);if(f!=null&&m!=null)if(p.s.vi(d))p.$g.sf(x,l,n,a,h,f,m);else if(p.s.Dd(a))f!=null&&(f.u=l),m!=null&&(m.u=n);else if(h=p.F.ca(h),0>a&&(a=p.s.R(a),h=p.F.ca(h+3.141592653589793)),l=p.F.ca(l),n=p.F.ca(n),1.570796326794897<p.s.R(n)&&(l=p.F.ca(l+3.141592653589793),n=p.s.Mb(3.141592653589793,n)-n),p.s.$(p.s.R(n),1.570796326794897)||p.s.Dd(n)||p.s.Dd(h)||p.s.$(p.s.R(h),3.141592653589793))p.Yk.sf(x,d,l,n,a,h,f,m);else{var re=Math.sqrt(1-d);for(x=a/x,p.F.el(1,d,n,0,0,V,Y,se),y[0]=V.u,y[1]=Y.u,y[2]=Y.u,F[0]=0,F[1]=0,F[2]=-1*d*p.F.n(1,d,n)*Math.sin(n),V=p.F.n(1,d,n),Y=p.F.ca(1.570796326794897-h),se=Math.sin(Y),a=Math.cos(n),n=Math.sin(n),T[0]=V*a-n*se,T[1]=Math.cos(Y),T[2]=(1-d)*V*n+a*se,0>h?p.F.Yq(F,T,y,R,0):p.F.Yq(F,y,T,R,0),y=Math.acos(R[2]/1),R=Math.atan2(-R[1],-R[0]),n=1-d,Y=1+(T=Math.tan(y))*T/n,n=(-(V=2*F[2]*T/n)+(T=Math.sqrt(V*V-4*Y*(F[2]*F[2]/n-1))))/(Y*=2),V=(-V-T)/Y,T=Math.tan(y),y=(n+V)/2,F=((Y=T*n+F[2])+(T*V+F[2]))/2,T=p.F.ip(n-y,Y-F),re=F/re*1.570796326794897,n=0;100>n&&(V=(V=p.F.w(d,re))*V/Math.cos(re)*(Math.sin(re)-F*V/(1-d)),!p.s.Dd(V));n++)re-=V;re=p.F.n(1,d,re)*Math.cos(re),F=1-T/(re=Math.sqrt((re-y)*(re+y))),F*=2-F,$=Math.acos(p.F.Ut($,w)/(p.F.qn($)*p.F.qn(w))),$*=p.s.Mb(1,w[0]),h=(p.F.q(re,F,p.F.Sj(F,$))+x*p.s.Mb(1,h))/p.F.Ch(re,F),h=p.F.ca(1.570796326794897*h),h=p.F.Tq(F,h),p.F.n(re,F,h),T=p.F.ca(R+l),l=Math.cos(T),h=Math.sin(T),I[0]=M[0]*l+M[1]*-h,I[1]=M[0]*h+M[1]*l,I[2]=M[2],p.F.eO(d,I[0],I[1],I[2],W,H,j),f!=null&&(f.u=H.u),m!=null&&(m.u=W.u)}},P}()}(Q||(Q={})),function(p){var P=function(){function a(h){this.Za=null,this.xt=new p.h,this.yt=new p.h,this.g=h}return a.prototype.compare=function(h,f,m){return this.g.Hc(f,this.xt),this.g.Hc(h.ka(m),this.yt),this.xt.compare(this.yt)},a}(),x=function(){function a(h){this.Cf=new p.h,this.Fk=new p.h,this.g=h}return a.prototype.Fh=function(h){this.Cf.N(h)},a.prototype.compare=function(h,f){return this.g.Hc(h.ka(f),this.Fk),this.Cf.compare(this.Fk)},a}(),d=function(a){function h(f){var m=a.call(this,f.g,f.ra,!1)||this;return m.ib=f,m}return Et(h,a),h.prototype.compare=function(f,m,y){if(this.sg)return-1;var w=this.ib.Rd.Ln(this.ib.Th(m));f=f.ka(y);var I=this.ib.Rd.Ln(this.ib.Th(f));return this.Fm=y,this.ME(m,w,f,I)},h}(p.PC),l=function(a){function h(f){var m=a.call(this,f.g,f.ra)||this;return m.ib=f,m}return Et(h,a),h.prototype.compare=function(f,m){return this.sg?-1:(f=this.ib.Rd.Ln(this.ib.Th(f.ka(m))),this.Fm=m,this.NE(m,f))},h}(p.WL),n=function(){function a(){this.Nc=this.df=this.lo=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.je=this.Ik=this.ph=this.Ck=this.Gf=this.ae=null,this.zh=this.Lq=this.PA=this.ra=0,this.Zv=this.Yn=!1,this.Ao=new p.h,this.Ri=new p.h,this.hb=new p.ad(8),this.Ad=new p.ad(5),this.nh=new p.cu,this.Rd=new p.cu,this.Pg=!1,this.xh=new p.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Yn=!1,this.g=null,this.df=new p.$j,this.Nc=new p.$j,this.ph=new p.ja(0),this.Ik=new p.OC,this.Gf=new p.ja(0),this.Ck=new p.ja(0),this.lo=new p.Ta}return a.prototype.LX=function(h,f){var m=new p.Ed;return m.VB(),h.Pc(m),this.gr(h),this.Yn=!1,this.ra=f,this.PA=f*f,f=this.eC(),h.Pc(m),f||(this.lQ(),f||this.eC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Yn},a.prototype.PX=function(h,f){this.gr(h),this.Yn=!1,this.ra=f,this.PA=f*f,this.Pg=!1,this.eC(),this.Pg||(this.Pg=h.Ip(f,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},a.prototype.qg=function(h,f){return this.hb.U(h,0+f)},a.prototype.GB=function(h,f,m){this.hb.T(h,0+f,m)},a.prototype.Th=function(h){return this.hb.U(h,2)},a.prototype.UW=function(h,f){this.hb.T(h,2,f)},a.prototype.MF=function(h,f){return this.hb.U(h,3+f)},a.prototype.Rp=function(h){return this.hb.U(h,7)},a.prototype.Rl=function(h,f){this.hb.T(h,7,f)},a.prototype.Tp=function(h,f){return this.hb.U(h,3+this.Qp(h,f))},a.prototype.hr=function(h,f,m){this.hb.T(h,3+this.Qp(h,f),m)},a.prototype.IR=function(h,f){return this.hb.U(h,5+this.Qp(h,f))},a.prototype.jr=function(h,f,m){this.hb.T(h,5+this.Qp(h,f),m)},a.prototype.Ur=function(h){return this.Ad.U(h,0)},a.prototype.PW=function(h,f){this.Ad.T(h,0,f)},a.prototype.$y=function(h){return this.Ad.U(h,4)},a.prototype.er=function(h,f){this.Ad.T(h,4,f)},a.prototype.kl=function(h){return this.Ad.U(h,1)},a.prototype.nn=function(h,f){this.Ad.T(h,1,f)},a.prototype.Zy=function(h){return this.Ad.U(h,3)},a.prototype.Ft=function(h,f){this.Ad.T(h,3,f)},a.prototype.$m=function(h){var f=this.Ad.De(),m=this.nh.Rh();return this.PW(f,m),h!=-1?(this.nh.addElement(m,h),this.g.Sa(h,this.zh,f),this.er(f,this.g.Va(h))):this.er(f,-1),f},a.prototype.CP=function(h){this.Ad.kd(h)},a.prototype.FD=function(h,f){this.nh.addElement(this.Ur(h),f),this.g.Sa(f,this.zh,h)},a.prototype.ot=function(h){var f=this.hb.De(),m=this.Rd.Rh();return this.UW(f,m),h!=-1&&this.Rd.addElement(m,h),f},a.prototype.GD=function(h,f){this.Rd.addElement(this.Th(h),f)},a.prototype.Wu=function(h){this.hb.kd(h),0<=(h=this.ph.gF(h))&&this.ph.NV(h)},a.prototype.jj=function(h,f){if(this.qg(h,0)==-1)this.GB(h,0,f);else{if(this.qg(h,1)!=-1)throw p.i.Ra();this.GB(h,1,f)}this.gy(h,f)},a.prototype.gy=function(h,f){var m=this.kl(f);if(m!=-1){var y=this.Tp(m,f);this.jr(y,f,h),this.hr(h,f,y),this.hr(m,f,h),this.jr(h,f,m)}else this.jr(h,f,h),this.hr(h,f,h),this.nn(f,h)},a.prototype.Qp=function(h,f){return this.qg(h,0)==f?0:1},a.prototype.Zm=function(h,f){var m,y=this.Zy(f);if(y!=-1&&(this.df.wd(y,-1),this.Ft(f,-1)),(y=this.kl(f))!=-1){var w=m=y;do{var I=!1,M=this.Qp(m,f),T=this.MF(m,M);if(this.qg(m,M+1&1)==h){if(this.Zu(m),this.Rd.eh(this.Th(m)),this.Wu(m),m==T){y=-1;break}y==m&&(y=this.kl(f),w=T,I=!0)}m=T}while(m!=w||I);if(y!=-1){do M=this.Qp(m,f),T=this.MF(m,M),this.GB(m,M,h),m=T;while(m!=w);(m=this.kl(h))!=-1?(w=this.Tp(m,h),I=this.Tp(y,h),w==m?(this.nn(h,y),this.gy(m,h),this.nn(h,m)):I==y&&this.gy(y,h),this.hr(y,h,w),this.jr(w,h,y),this.hr(m,h,I),this.jr(I,h,m)):this.nn(h,y)}}for(y=this.Ur(h),m=this.Ur(f),w=this.nh.sc(m);w!=-1;w=this.nh.lb(w))this.g.Sa(this.nh.ka(w),this.zh,h);this.nh.Cy(y,m),this.CP(f)},a.prototype.PT=function(h,f){var m=this.qg(h,0),y=this.qg(h,1),w=this.qg(f,0),I=this.qg(f,1);this.Rd.Cy(this.Th(h),this.Th(f)),f==this.kl(m)&&this.nn(m,h),f==this.kl(y)&&this.nn(y,h),this.Zu(f),this.Wu(f),m==w&&y==I||y==w&&m==I||(this.Jn(m,this.Ao),this.Jn(w,this.Ri),this.Ao.rb(this.Ri)?(m!=w&&this.Zm(m,w),y!=I&&this.Zm(y,I)):(y!=w&&this.Zm(y,w),m!=I&&this.Zm(m,I)))},a.prototype.Zu=function(h){var f=this.qg(h,1);this.ZE(h,this.qg(h,0)),this.ZE(h,f)},a.prototype.ZE=function(h,f){var m=this.Tp(h,f),y=this.IR(h,f),w=this.kl(f);m!=h?(this.hr(y,f,m),this.jr(m,f,y),w==h&&this.nn(f,m)):this.nn(f,-1)},a.prototype.RD=function(h,f,m){var y=this.Rd.sc(h),w=this.Rd.ka(y);h=this.Ie(w);var I=this.Ie(this.g.V(w));for(this.g.lr(w,f,m,!0),y=this.Rd.lb(y);y!=-1;y=this.Rd.lb(y)){w=this.Rd.ka(y);var M=this.Ie(w)==h;this.g.lr(w,f,m,M)}y=f.Xp(m,0).bc(),f=f.Xp(m,f.ql(m)-1).xc(),this.wK(h,y),this.wK(I,f)},a.prototype.UE=function(h,f,m){var y=this.Th(h),w=this.qg(h,0),I=this.qg(h,1),M=this.ot(-1);for(this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,w),h=1,f=f.ql(m);h<f;h++)m=this.$m(-1),this.Ck.add(m),this.Gf.add(m),this.jj(M,m),M=this.ot(-1),this.ph.add(M),this.Rl(M,-3),this.Gf.add(M),this.jj(M,m);for(this.jj(M,I),y=this.Rd.sc(y);y!=-1;y=this.Rd.lb(y))if(I=this.Rd.ka(y),this.Ie(I)==w){h=0;do 0<h&&(M=this.Gf.get(h-1),this.FD(M,I),this.$y(M)==-1&&this.er(M,this.g.Va(I))),M=this.Gf.get(h),h+=2,this.GD(M,I),I=this.g.V(I);while(h<this.Gf.size)}else{h=this.Gf.size-1;do h<this.Gf.size-2&&(M=this.Gf.get(h+1),this.FD(M,I),0>this.$y(M)&&this.er(M,this.g.Va(I))),M=this.Gf.get(h),h-=2,this.GD(M,I),I=this.g.V(I);while(0<=h)}this.Gf.clear(!1)},a.prototype.Ie=function(h){return this.g.Qa(h,this.zh)},a.prototype.NI=function(h,f,m){var y=this.qg(f,0),w=new p.h;this.Jn(y,w);var I=new p.h,M=this.qg(f,1);this.Jn(M,I);var T=m.ql(h),$=m.Xp(h,0),F=new p.h;if($.$p(F),!w.rb(F)){if(!this.Pg){var R=w.compare(this.xh);0>R*(F=F.compare(this.xh))&&(this.Pg=!0)}this.qF(y,this.Gf),this.Ck.add(y)}for(!this.Pg&&1<T&&(R=w.compare(I),$=$.xc(),(w.compare($)!=R||$.compare(I)!=R||0>$.compare(this.xh))&&(this.Pg=!0)),h=($=m.Xp(h,T-1)).xc(),I.rb(h)||(this.Pg||0>(R=I.compare(this.xh))*(F=h.compare(this.xh))&&(this.Pg=!0),this.qF(M,this.Gf),this.Ck.add(M)),this.Gf.add(f),I=0,M=this.Gf.size;I<M;I++)h=this.Gf.get(I),m=this.Rp(h),p.ad.GG(m)&&(this.Nc.wd(m,-1),this.Rl(h,-1)),h!=f&&this.Rp(h)!=-3&&(this.ph.add(h),this.Rl(h,-3));this.Gf.clear(!1)},a.prototype.gO=function(h,f){this.ae.compare(this.Nc,this.Nc.ka(h),f),this.ae.sg&&(this.ae.Mr(),this.jF(h,f))},a.prototype.jF=function(h,f){this.Yn=!0,h=this.Nc.ka(h),f=this.Nc.ka(f);var m=this.Rd.Ln(this.Th(h)),y=this.Rd.Ln(this.Th(f)),w=this.g.cc(m);w==null&&(this.je==null&&(this.je=new p.zb),this.g.fd(m,this.je),w=this.je),(m=this.g.cc(y))==null&&(this.Pm==null&&(this.Pm=new p.zb),this.g.fd(y,this.Pm),m=this.Pm),this.Ik.Qo(w),this.Ik.Qo(m),this.Ik.Fa(this.ra,!0)&&(this.Pg=!0),this.cK(h,f,-1,this.Ik),this.Ik.clear()},a.prototype.BQ=function(h,f){this.Yn=!0,f=this.Nc.ka(f);var m=this.Rd.Ln(this.Th(f)),y=this.g.cc(m);y==null&&(this.je==null&&(this.je=new p.zb),this.g.fd(m,this.je),y=this.je),m=this.wF(h),this.Ik.Qo(y),this.g.Xi(m,this.lo),this.Ik.Fz(this.ra,this.lo,!0),this.cK(f,-1,h,this.Ik),this.Ik.clear()},a.prototype.sS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var h=this.ph.Gc();this.ph.Jf(),this.Rl(h,-1),this.RS(h)!=-1&&this.rS(h),this.Xn=!1}},a.prototype.rS=function(h){if(this.Xn){var f=this.Nc.Bu(this.HH,this.BH,h,!0);this.Xn=!1}else f=this.Nc.ED(h);f==-1?this.PT(this.Nc.ka(this.Nc.AF()),h):(this.Rl(h,f),this.ae.sg&&(this.ae.Mr(),this.jF(this.ae.Fm,f)))},a.prototype.RS=function(h){var f=this.qg(h,0);if(h=this.qg(h,1),this.Jn(f,this.Ao),this.Jn(h,this.Ri),p.h.zc(this.Ao,this.Ri)<=this.PA)return this.Pg=!0,-1;var m=this.Ao.compare(this.xh),y=this.Ri.compare(this.xh);return 0>=m&&0<y?h:0>=y&&0<m?f:-1},a.prototype.jQ=function(){var h=new p.ja(0);h.Jb(this.g.gd);for(var f=this.g.$q(),m=f.next();m!=-1;m=f.next())this.g.Qa(m,this.zh)!=-1&&h.add(m);this.g.nx(h,h.size),this.kQ(h)},a.prototype.kQ=function(h){this.df.clear(),this.df.Ee(h.size),this.df.Xo(new P(this.g));var f=new p.h;f.Sc();for(var m=-1,y=new p.h,w=0,I=h.size;w<I;w++){var M=h.get(w);this.g.Hc(M,y),y.rb(f)?(M=this.g.Qa(M,this.zh),this.Zm(m,M)):(m=this.Ie(M),this.g.Hc(M,f),M=this.df.zn(M),this.Ft(m,M))}},a.prototype.lQ=function(){var h=new p.ja(0);h.Jb(this.g.gd);for(var f=this.df.sc(-1);f!=-1;f=this.df.lb(f))h.add(this.df.ka(f));this.df.clear(),this.g.nx(h,h.size),f=0;for(var m=h.size;f<m;f++){var y=h.get(f),w=this.Ie(y);y=this.df.zn(y),this.Ft(w,y)}},a.prototype.qF=function(h,f){var m=this.kl(h);if(m!=-1){var y=m;do p.ad.GG(this.Rp(y))&&f.add(y),y=this.Tp(y,h);while(y!=m)}},a.prototype.wK=function(h,f){for(h=this.nh.sc(this.Ur(h));h!=-1;h=this.nh.lb(h))this.g.mf(this.nh.ka(h),f)},a.prototype.cK=function(h,f,m,y){this.Zu(h),f!=-1&&this.Zu(f),this.NI(0,h,y),f!=-1&&this.NI(1,f,y),m!=-1&&(y.Cf.D(this.Ao),this.Jn(m,this.Ri),this.Ri.rb(this.Ao)||this.Ck.add(m)),m=0;for(var w=this.Ck.size;m<w;m++){var I=this.Ck.get(m),M=this.Zy(I);M!=-1&&(this.df.wd(M,-1),this.Ft(I,-1))}for(m=this.Th(h),w=f!=-1?this.Th(f):-1,this.RD(m,y,0),f!=-1&&this.RD(w,y,1),this.UE(h,y,0),f!=-1&&this.UE(f,y,1),this.Rd.eh(m),this.Wu(h),f!=-1&&(this.Rd.eh(w),this.Wu(f)),m=0,w=this.Ck.size;m<w;m++)(I=this.Ck.get(m))==this.Lq&&(this.Zv=!0),(M=this.Zy(I))==-1&&((M=this.df.ED(this.wF(I)))==-1?(h=this.Ie(this.df.ka(this.df.AF())),this.Zm(h,I)):this.Ft(I,M));this.Ck.clear(!1)},a.prototype.Jn=function(h,f){this.g.ZF(this.$y(h),f)},a.prototype.wF=function(h){return this.nh.Ln(this.Ur(h))},a.prototype.eC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new d(this),this.Nc.ao=this.ae);var h=new p.ja(0),f=null,m=null;this.BH=this.HH=-1,this.Xn=!1;for(var y=this.df.sc(-1);y!=-1;){this.Xn=!1;var w=this.df.ka(y);this.Lq=this.Ie(w),this.g.Hc(w,this.xh),this.ae.VJ(this.xh.y,this.xh.x);var I=this.kl(this.Lq),M=I==-1;if(!M){w=I;do{var T=this.Rp(w);T==-1?(this.ph.add(w),this.Rl(w,-3)):T!=-3&&h.add(T),w=this.Tp(w,this.Lq)}while(w!=I)}if(0<h.size){for(this.Xn=h.size==1&&this.ph.size==1,M=0,I=h.size;M<I;M++)w=this.Nc.ka(h.get(M)),this.Rl(w,-2);var $=-2,F=-2;for(M=0,I=h.size;M<I;M++){if(T=h.get(M),$==-2){var R=this.Nc.xe(T);R!=-1?(w=this.Nc.ka(R),(w=this.Rp(w))!=-2&&($=R)):$=-1}if(F==-2&&((T=this.Nc.lb(T))!=-1?(w=this.Nc.ka(T),(w=this.Rp(w))!=-2&&(F=T)):F=-1),$!=-2&&F!=-2)break}for(M=0,I=h.size;M<I;M++)T=h.get(M),w=this.Nc.ka(T),this.Nc.wd(T,-1),this.Rl(w,-1);h.clear(!1),this.HH=$!=-1?$:-1,this.BH=F!=-1?F:-1,$!=-1&&F!=-1?this.Xn||this.gO($,F):$==-1&&F==-1&&(this.Xn=!1)}else M&&(f==null&&(f=new l(this)),f.Fh(this.xh),this.Nc.pJ(f),f.sg&&(f.Mr(),this.BQ(this.Lq,f.Fm)));this.sS(),this.Zv?(this.Zv=!1,m==null&&(m=new x(this.g)),m.Fh(this.xh),y=this.df.pJ(m)):y=this.df.lb(y)}return this.Yn},a.prototype.gr=function(h){for(this.g=h,this.zh=this.g.Hd(),this.hb.Ee(h.gd+32),this.Ad.Ee(h.gd),this.nh.Bt(h.gd),this.nh.hn(h.gd),this.Rd.Bt(h.gd+32),this.Rd.hn(h.gd+32),h=this.g.md;h!=-1;h=this.g.ve(h))if(p.ba.Ic(this.g.jc(h)))for(T=this.g.Ob(h);T!=-1;T=this.g.Sb(T)){var f=this.g.Ka(T),m=this.g.Ya(T),y=this.$m(m),w=this.ot(m);for(this.jj(w,y),$=this.g.V(m),m=0,f-=2;m<f;m++){var I=this.g.V($),M=this.$m($);this.jj(w,M),w=this.ot($),this.jj(w,M),$=I}this.g.ec(T)?(M=this.$m($),this.jj(w,M),w=this.ot($),this.jj(w,M),this.jj(w,y)):(M=this.$m($),this.jj(w,M))}else for(var T=this.g.Ob(h);T!=-1;T=this.g.Sb(T)){var $=this.g.Ya(T);for(y=0,f=this.g.Ka(T);y<f;y++)this.$m($),$=this.g.V($)}this.jQ()},a}();p.MC=n}(Q||(Q={})),function(p){var P=function(x){function d(l,n,a){var h=x.call(this)||this;if(l!==void 0)if(a!==void 0){h.description=p.fe.pg();var f=new p.Od;f.L(l,n,a),h.ZB(f)}else if(n!==void 0)h.description=p.fe.pg(),h.Db(l,n);else if(l instanceof p.sa)h.description=l;else if(l instanceof p.h)h.description=p.fe.pg(),h.Db(l);else{if(!(l instanceof d))throw p.i.O();h.description=l.description,h.Db(l.Ng(),l.kh()),l.la!==null&&(h.la=l.la.slice(0))}else h.description=p.fe.pg();return h}return Et(d,x),d.prototype.D=function(l){if(l===void 0){if(this.Bc())throw p.i.ga("This operation should not be performed on an empty geometry.");return(l=new p.h).na(this.la[0],this.la[1]),l}if(this.Bc())throw p.i.ga("This operation should not be performed on an empty geometry.");l.na(this.la[0],this.la[1])},d.prototype.Db=function(l,n){typeof l=="number"?(this.wc(),this.la==null&&this.wn(),this.la[0]=l,this.la[1]=n):(this.wc(),this.Db(l.x,l.y))},d.prototype.xz=function(){if(this.Bc())throw p.i.ga("This operation should not be performed on an empty geometry.");var l=new p.Od;return l.x=this.la[0],l.y=this.la[1],l.z=this.description.dG()?this.la[2]:p.sa.te(1),l},d.prototype.ZB=function(l){this.wc();var n=this.hasAttribute(1);n||p.sa.yG(1,l.z)||(this.se(1),n=!0),this.la==null&&this.wn(),this.la[0]=l.x,this.la[1]=l.y,n&&(this.la[2]=l.z)},d.prototype.Ng=function(){if(this.Bc())throw p.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},d.prototype.YB=function(l){this.setAttribute(0,0,l)},d.prototype.kh=function(){if(this.Bc())throw p.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},d.prototype.WJ=function(l){this.setAttribute(0,1,l)},d.prototype.XR=function(){return this.Vc(1,0)},d.prototype.sX=function(l){this.setAttribute(1,0,l)},d.prototype.uR=function(){return this.Vc(2,0)},d.prototype.cX=function(l){this.setAttribute(2,0,l)},d.prototype.Fc=function(){return this.tF(3,0)},d.prototype.GJ=function(l){this.setAttribute(3,0,l)},d.prototype.Vc=function(l,n){var a=this.description.Rf(l);return 0<=a?this.la[this.description.bk(a)+n]:p.sa.te(l)},d.prototype.tF=function(l,n){var a=this.description.Rf(l);return 0<=a?this.la[this.description.bk(a)+n]:p.sa.te(l)},d.prototype.setAttribute=function(l,n,a){this.wc();var h=this.description.Rf(l);0>h&&(this.se(l),h=this.description.Rf(l)),this.la==null&&this.wn(),this.la[this.description.bk(h)+n]=a},d.prototype.K=function(){return 33},d.prototype.Eb=function(){return 0},d.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},d.prototype.un=function(l){if(this.la!=null){for(var n=p.fe.Kw(l,this.description),a=[],h=0,f=0,m=l.Ba;f<m;f++){var y=l.ld(f),w=p.sa.Wa(y);if(n[f]==-1){var I=p.sa.te(y);for(y=0;y<w;y++)a[h]=I,h++}else for(I=this.description.bk(n[f]),y=0;y<w;y++)a[h]=this.la[I],h++,I++}this.la=a}this.description=l},d.prototype.wn=function(){this.gJ(this.description.Be.length),d.YD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},d.prototype.Pc=function(l){if(l instanceof p.Ed){if(!this.Bc()){var n=this.D();l.Gh(n,n),this.Db(n)}}else this.Bc()||(this.se(1),n=this.xz(),this.ZB(l.hp(n)))},d.prototype.copyTo=function(l){if(l.K()!=33)throw p.i.O();l.wc(),this.la==null?(l.Pa(),l.la=null,l.Pf(this.description)):(l.Pf(this.description),l.gJ(this.description.Be.length),d.YD(this.la,l.la,this.description.Be.length))},d.prototype.Ja=function(){return new d(this.description)},d.prototype.B=function(){return this.Bc()},d.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},d.prototype.dn=function(l){l.Pa(),this.description!=l.description&&l.Pf(this.description),l.$b(this)},d.prototype.A=function(l){this.Bc()?l.Pa():(l.v=this.la[0],l.G=this.la[1],l.C=this.la[0],l.H=this.la[1])},d.prototype.So=function(l){if(this.Bc())l.Pa();else{var n=this.xz();l.v=n.x,l.G=n.y,l.Xe=n.z,l.C=n.x,l.H=n.y,l.Dg=n.z}},d.prototype.Vg=function(l,n){var a=new p.Oc;return this.Bc()?(a.Pa(),a):(l=this.Vc(l,n),a.pa=l,a.wa=l,a)},d.prototype.gJ=function(l){if(this.la==null)this.la=p.P.mg(l);else if(this.la.length<l){for(var n=this.la.slice(0),a=this.la.length;a<l;a++)n[a]=0;this.la=n}},d.YD=function(l,n,a){if(0<a)for(a=0;a<l.length;a++)n[a]=l[a]},d.prototype.Nb=function(l){if(l==this)return!0;if(!(l instanceof d)||this.description!=l.description)return!1;if(this.Bc())return!!l.Bc();for(var n=0,a=this.description.Be.length;n<a;n++)if(this.la[n]!=l.la[n])return!1;return!0},d.prototype.dc=function(){var l=this.description.dc();if(!this.Bc())for(var n=0,a=this.description.Be.length;n<a;n++){var h=this.la[n];h=p.P.truncate(h^h>>>32),l=p.P.Vh(h,l)}return l},d.prototype.ng=function(){return null},d}(p.ba);p.Ta=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n){d!==void 0&&(this.x=d,this.y=l,this.z=n)}return x.construct=function(d,l,n){var a=new x;return a.x=d,a.y=l,a.z=n,a},x.prototype.L=function(d,l,n){this.x=d,this.y=l,this.z=n},x.prototype.lx=function(){this.z=this.y=this.x=0},x.prototype.normalize=function(){var d=this.length();d==0&&(this.x/=d,this.y/=d,this.z/=d)},x.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},x.prototype.sub=function(d){return new x(this.x-d.x,this.y-d.y,this.z-d.z)},x.prototype.Bg=function(d){new x(this.x*d,this.y*d,this.z*d)},x.prototype.Sh=function(d){return this.x*d.x+this.y*d.y+this.z*d.z},x}();p.Od=P}(Q||(Q={})),function(p){var P=function(){function x(d,l,n){this.Iw=this.yA=null,this.Zf=l,this.AT=l.y-n,this.zT=l.y+n,this.Gw=0,this.Zz=d,this.ra=n,this.MT=n*n,this.$z=n!=0,this.Nv=!1}return x.prototype.result=function(){return this.Gw!=0?1:0},x.prototype.UM=function(d){return d=d.ic(d.ge(this.Zf,!1)),p.h.zc(d,this.Zf)<=this.MT},x.prototype.aF=function(d){if(!this.$z&&(this.Zz&&this.Zf.rb(d.bc())||this.Zf.rb(d.xc())))this.Nv=!0;else if(d.oa==this.Zf.y&&d.oa==d.ma){if(this.Zz&&!this.$z){var l=Math.max(d.ta,d.qa);this.Zf.x>Math.min(d.ta,d.qa)&&this.Zf.x<l&&(this.Nv=!0)}}else{var n=!1;if(l=Math.max(d.ta,d.qa),this.Zf.x>l?n=!0:this.Zf.x>=Math.min(d.ta,d.qa)&&(n=0<d.fq(!0,this.Zf.y,this.Iw,null)&&this.Iw[0]<=this.Zf.x),n){if(this.Zf.y==d.bc().y){if(this.Zf.y<d.xc().y)return}else if(this.Zf.y==d.xc().y&&this.Zf.y<d.bc().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(d.bc().y>d.xc().y?1:-1)}}},x.prototype.MI=function(d){var l=d.Vg(0,1);if(l.pa>this.zT||l.wa<this.AT)return!1;if(this.$z&&this.UM(d))return!0;if(l.pa>this.Zf.y||l.wa<this.Zf.y)return!1;if(this.yA==null&&(this.yA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(l=d.$F()))for(d=0;d<l;d++){var n=this.yA[d].get();if(this.aF(n),this.Nv)return!0}else if(this.aF(d),this.Nv)return!0;return!1},x.KM=function(d,l,n){for(l=new x(d.Kn()==0,l,n),d=d.Ha();d.ab();)for(;d.Ia();)if(n=d.ia(),l.MI(n))return-1;return l.result()},x.LM=function(d,l,n,a){var h=new p.l;d.yc(h),h.X(a,a);var f=new x(d.Kn()==0,n,a);d=d.Ha();var m=new p.l;for(m.L(h),m.C=n.x+a,m.G=n.y-a,m.H=n.y+a,a=(n=l.HF(m,a)).next();a!=-1;a=n.next())if(d.Wb(l.ka(a)),d.Ia()&&(a=d.ia(),f.MI(a)))return-1;return f.result()},x.ym=function(d,l,n){if(d.B())return 0;var a=new p.l;if(d.yc(a),a.X(n,n),!a.contains(l))return 0;if((a=d.Cb)!=null){var h=a.Hk;if(h!=null){if((h=h.Uo(l.x,l.y))==1)return 1;if(h==0)return 0}if((a=a.Gb)!=null)return x.LM(d,a,l,n)}return x.KM(d,l,n)},x.XS=function(d,l,n){return l.B()?0:x.ym(d,l.D(),n)},x.Ol=function(d,l){return!(16>(d=d.I()))&&2*d+Math.log(d)/Math.log(2)*l<1*d*l},x}();p.Fg=P}(Q||(Q={})),function(p){var P=function(x){function d(l){return x.call(this,!0,l)||this}return Et(d,x),d.prototype.Ja=function(){return new d(this.description)},d.prototype.Eb=function(){return 2},d.prototype.K=function(){return 1736},d.prototype.sG=function(l,n,a){this.ES(l,n,a)},d.prototype.kR=function(){this.AR()},d}(p.Xk);p.Ea=P}(Q||(Q={})),function(p){(function(P){P[P.PiPOutside=0]="PiPOutside",P[P.PiPInside=1]="PiPInside",P[P.PiPBoundary=2]="PiPBoundary"})(p.ML||(p.ML={})),p.jd=function(){function P(){}return P.FG=function(x,d,l){return(x=p.Fg.XS(x,d,l))==0?0:x==1?1:2},P.Zd=function(x,d,l){return(x=p.Fg.ym(x,d,l))==0?0:x==1?1:2},P.SX=function(x,d,l,n,a){if(d.length<l||a.length<l)throw p.i.O();for(var h=0;h<l;h++)a[h]=P.Zd(x,d[h],n)},P.nK=function(x,d,l,n,a){if(x.K()==1736)P.SX(x,d,l,n,a);else{if(x.K()!=197)throw p.i.ga("invalid_call");var h=new p.l;x.A(h),P.VM(h,d,l,n,a)}},P.VM=function(x,d,l,n,a){if(d.length<l||a.length<l)throw p.i.O();if(x.B())for(n=0;n<l;n++)a[n]=0;else for(x.X(.5*-n,.5*-n),x.X(.5*n,.5*n),n=0;n<l;n++)x.contains(d[n])?a[n]=1:x.contains(d[n])?a[n]=2:a[n]=0},P.UX=function(x,d,l,n,a){for(var h=0;h<l;h++)a[h]=x.ss(d[h],n)?2:0},P.TX=function(x,d,l,n,a){var h=x.Cb,f=null;h!=null&&(f=h.Hk),h=l;for(var m=0;m<l;m++)if(a[m]=1,f!=null){var y=d[m];f.Uo(y.x,y.y)==0&&(a[m]=0,h--)}if(h!=0)for(x=x.Ha();x.ab()&&h!=0;)for(;x.Ia()&&h!=0;)for(f=x.ia(),m=0;m<l&&h!=0;m++)a[m]==1&&f.ss(d[m],n)&&(a[m]=2,h--);for(m=0;m<l;m++)a[m]==1&&(a[m]=0)},P.oK=function(x,d,l,n,a){var h=x.K();if(h==1607)P.TX(x,d,l,n,a);else{if(!p.ba.zd(h))throw p.i.ga("Invalid call.");P.UX(x,d,l,n,a)}},P}()}(Q||(Q={})),function(p){var P=function(x){function d(l,n){if(arguments.length==2){var a=x.call(this,!1,l.description)||this;a.nf(l),a.lineTo(n)}else a=x.call(this,!1,l)||this;return a}return Et(d,x),d.prototype.Ja=function(){return new d(this.description)},d.prototype.Eb=function(){return 1},d.prototype.K=function(){return 1607},d.prototype.sG=function(l,n,a){this.FS(l,n,a)},d}(p.Xk);p.Ua=P}(Q||(Q={})),function(p){var P=function(){function x(){}return x.prototype.progress=function(){return!0},x.Bp=function(d){if(d!=null&&!d.progress(-1,-1))throw p.i.RC()},x}();p.op=P}(Q||(Q={})),function(p){var P;(P=p.KK||(p.KK={}))[P.clipWithInputHorizon=1]="clipWithInputHorizon",P[P.clipWithOutputHorizon=2]="clipWithOutputHorizon";var x=function(){function n(){this.Mg=3,this.Xu=this.Lr=NaN}return n.prototype.KW=function(a){this.LB(1,a)},n.prototype.LW=function(a){this.LB(2,a)},n.prototype.cS=function(){return this.ks(1)},n.prototype.dS=function(){return this.ks(2)},n.prototype.LB=function(a,h){this.Mg=h?this.Mg|a:this.Mg&~a},n.prototype.ks=function(a){return(this.Mg&a)!=0},n.prototype.Qf=function(){var a=new n;return a.Lr=this.Lr,a.Xu=this.Xu,a.Mg=this.Mg,a},n}();p.tC=x,function(n){n[n.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",n[n.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(p.LK||(p.LK={}));var d=function(){function n(){this.Mg=0}return n.prototype.LB=function(a,h){this.Mg=h?this.Mg|a:this.Mg&~a},n.prototype.ks=function(a){return(this.Mg&a)!=0},n.kg=function(a){var h=new n;return h.Mg=a.Mg,h},n.prototype.hM=function(a){this.Mg=a.Mg},n}();p.wY=d;var l=function(){function n(a,h,f){this.ef=a,this.$f=h,this.Wf=new p.l,this.Wf.L(f),this.vT=a.dc()+h.dc()+this.Wf.dc().toString()}return n.prototype.dc=function(){return this.vT},n.prototype.Nb=function(a){return this==a||this.ef.Nb(a.ef)&&this.$f.Nb(a.$f)&&this.Wf.Nb(a.Wf)},n}();p.BY=l,l=function(){function n(){this.$f=this.ef=null,this.mH=new x,this.nH=new d,this.yw=this.Yf=null,this.ow=this.Vn=!0}return n.Pr=function(a,h,f,m){var y;m===void 0&&(m=null),y===void 0&&(y=null);var w=new n;return w.sp(a,h,f,m,y),w},n.prototype.sp=function(a,h,f,m,y){if(a==null||h==null)throw p.i.ga("invalidArgument");if(this.ef=a,this.$f=h,this.ow=this.Vn=!1,m!=null&&(this.mH=m.Qf()),y!=null&&this.nH.hM(y),y=!1,h.Tb()==1&&m!=null&&(m=m.Lr,isNaN(m)||m==0||(y=!0)),a==h)this.Vn=!y,this.ow=!0;else{m=a.Tb();var w=h.Tb();if(m==0||w==0){if(f!=null)throw p.i.O();a.Id()!=null&&h.Id()!=null&&(this.Vn=a.Id().Nb(h.Id()))}else m==3||w==3?this.Vn=a.Nb(h):this.ef.fS(this.$f)?this.Vn=!y:this.Vn=!1,this.Yf=f,this.Yf!=null&&this.Yf.ix(),this.ow=(this.Yf==null||this.Yf.count()==0)&&this.ef.tc().Nb(this.$f.tc())}this.kY()},n.prototype.isIdentity=function(){return this.Vn},n.prototype.iR=function(){return this.mH.Qf()},n.prototype.Nb=function(a){return a==this||!!(a instanceof n&&this.ef.Nb(a.ef)&&this.$f.Nb(a.$f))&&(this.Yf==a.Yf||!(this.Yf==null||a.Yf==null||!this.Yf.Nb(a.Yf)))},n.prototype.kY=function(){this.yw=new p.du(this)},n}(),p.xr=l}(Q||(Q={})),function(p){var P=function(){function x(){}return x.Ep=function(d){return d*x.jW},x.mx=function(d,l){return x.bP(l-d)},x.cP=function(d){return-360<=d&&720>d?(0>d?d+=360:360<=d&&(d-=360),d):(0>(d=p.mc.MK(d))&&(d+=360),d)},x.bP=function(d){return 180<(d=x.cP(d))&&(d-=360),d},x.jW=57.29577951308232,x}();p.sr=P,p.Jh=function(){function x(){}return x.nj=function(d,l){var n=new p.l;d.A(n);var a=p.cb.ih(l),h=new p.l;return h.L(a),h.v=n.v,h.C=n.C,h.X(.01*h.da(),0),l=p.ua.Xd(l,n,!1),h.contains(n)?d:p.Vd.clip(d,h,l,0)},x.ms=function(d,l,n,a,h){if(!p.cb.Xc(l))throw p.i.O();var f=p.ua.mj(l,d,!1),m=p.cb.ih(l),y=p.cb.tc(l),w=y.Id().ci,I=p.cb.xv(y);y=p.cb.gv(y),I*=2-I;var M=new p.Oc;m.en(M);var T=[[0,0],[0,0]];if(p.Gg.Tb(l)==2?a?(T[0][0]=x.an(h,M),T[0][1]=m.Lp(),p.cb.wt(),m=T[0][0]*w):(T[0][0]=m.ik(),T[0][1]=h,p.cb.wt(),m=T[0][1]*w):m=h*w,!a&&m!=0)throw p.i.O();var $=new p.ha,F=new p.hd;d=F.Ib(d);for(var R=[0],j=new p.h,H=new p.h,W=new p.h,V=new p.h,Y=new p.h,se=new p.h,re=F.Ob(d);re!=-1;re=F.Sb(re)){var he=F.Ya(re);F.D(he,W);for(var ue=!1,we=he=F.V(he);we!=-1;we=F.V(we)){if(we==he){if(ue)break;ue=!0}if(F.D(we,V),a&&f<h-W.x&&V.x-h>f||f<h-V.x&&W.x-h>f||!a&&f<-W.y&&V.y>f||f<-V.y&&W.y>f)do if(!(Math.abs(W.x-V.x)>=.5*M.S())){if(p.Gg.Tb(l)==2?(T[0][0]=x.an(W.x,M),T[0][1]=W.y,T[1][0]=x.an(V.x,M),T[1][1]=V.y,p.cb.ZV(),Y.x=T[0][0]*w,Y.y=T[0][1]*w,se.x=T[1][0]*w,se.y=T[1][1]*w):(Y.x=W.x*w,Y.y=W.y*w,se.x=V.x*w,se.y=V.y*w),se.x=6.283185307179586*(V.x-W.x)/M.S()+Y.x,a){if(H.x=m,H.y=x.Iz(y,I,Y,se,m,n),isNaN(H.y))break}else{if(H.x=x.Gz(y,I,Y,se,n),isNaN(H.x))break;H.y=0}p.kb.xd(y,I,Y.x,Y.y,se.x,se.y,$,null,null,n);var Te=$.u;p.kb.xd(y,I,Y.x,Y.y,H.x,H.y,$,null,null,n);var Ee=$.u;p.Gg.Tb(l)==2?(T[0][0]=H.x/w,T[0][1]=H.y/w,p.cb.XQ(),a?(j.y=T[0][1],j.x=h):(j.x=x.qs(T[0][0],W.x,V.x,M),j.y=h)):a?(j.x=h,j.y=H.y/w):(j.x=x.qs(H.x/w,W.x,V.x,M),j.y=h),R[0]=0<Te?p.P.Tk(Ee/Te,0,1):.5,R[0]!=0&&R[0]!=1&&(Te=F.Na(we),F.Wl(Te,R,1),F.Db(F.V(Te),j.x,j.y))}while(0);W.N(V)}}return F.Ke(d)},x.Hn=function(d,l,n,a,h){if(d.B())return d;var f=p.cb.bf(l);return x.Jp(d,n-180*f,360*f,l,a,h,!0)},x.Iz=function(d,l,n,a,h,f){if(3.141592653589793<=Math.abs(n.x-a.x)||!x.Un(n.x,a.x,h))return NaN;if(n.x>a.x)var m=a;else m=n,n=a;a=new p.ha(0);var y=new p.ha(0),w=new p.ha(0);p.kb.xd(d,l,m.x,m.y,n.x,n.y,y,a,null,f);var I=y.u,M=0,T=1,$=new p.h;for($.N(m);I*(T-M)>1e-12*d;){var F=.5*(M+T);if(p.kb.qj(d,l,m.x,m.y,I*F,a.u,y,w,f),$.x=y.u,$.y=w.u,$.x==h)break;if(x.Un(m.x,$.x,h))T=F;else{if(!x.Un(n.x,$.x,h))return NaN;M=F}}return $.y},x.Un=function(d,l,n){return d=P.Ep(d),l=P.mx(d,P.Ep(l)),(n=P.mx(d,P.Ep(n)))==0||0<l&&0<n&&n<=l||0>l&&0>n&&n>=l},x.an=function(d,l){var n=l.wa-l.pa;return l.Kt(d-Math.floor((d-l.pa)/n)*n)},x.qs=function(d,l,n,a){var h=new p.Oc;for(h.L(l,n),n=a.S(),d=Math.floor((d-l)/n)*n+d,h=h.tf();Math.abs(d-h)>Math.abs(d+n-h);)d+=n;return d},x.Gz=function(d,l,n,a,h){if(n.y>a.y)var f=a;else f=n,n=a;if((a=new p.Oc).L(f.y,n.y),!a.contains(0)||3.141592653589793<=Math.abs(f.x-n.x))return NaN;if(f.x==n.x)return f.x;var m=new p.ha(0),y=new p.ha(0),w=new p.ha(0);p.kb.xd(d,l,f.x,f.y,n.x,n.y,y,m,null,h);var I=y.u,M=0,T=1,$=new p.h;for($.N(f);I*(T-M)>1e-12*d;){var F=.5*(M+T);if(p.kb.qj(d,l,f.x,f.y,I*F,m.u,y,w,h),$.x=y.u,$.y=w.u,a.L(f.y,$.y),$.y==0)break;if(a.contains(0))T=F;else{if(a.L(n.y,$.y),!a.contains(0))return NaN;M=F}}return $.x},x.Jp=function(d,l,n,a,h,f,m){var y=new p.l;if(d.A(y),y.B())return d;var w=new p.Oc;y.en(w);var I=new p.Oc;if(I.L(l,l+n),I.contains(w)&&I.wa!=w.wa)return d;var M=new p.l;M.L(y);var T=d.K();if(T==33)return((y=(M=h?d:d.Qf()).Ng())<I.pa||y>=I.wa||m&&y==I.wa)&&(y+=Math.ceil((I.pa-y)/n)*n,y=I.Kt(y),M.YB(y)),M;if(T==550){for(a=(M=h?d:d.Qf()).vb(0),T=2*M.I(),d=!1,h=0;h<T;h+=2)((y=a.read(h))<I.pa||y>=I.wa||m&&y==I.wa)&&(d=!0,y+=Math.ceil((I.pa-y)/n)*n,y=I.Kt(y),a.write(h,y));return d&&M.Qc(1993),M}if(I.contains(w))return d;if(T==197)return n=h?d:d.Qf(),y.Fa(M),n.Zo(y),n;var $=.1*Math.max(y.da(),y.S());for(M.X(0,$),m=d,I=a.Yd(0),d=p.Ih.local(),h=new p.Ed;;){var F=Math.floor((w.pa-l)/n),R=Math.ceil((w.wa-l)/n);if(!(3<R-F))break;F=Math.floor(.5*(R+F)),M.v=y.v-$,M.C=l+n*F;var j=p.Vd.clip(m,M,I,f);M.v=M.C,M.C=y.C+$;var H=p.Vd.clip(m,M,I,f);h.ig((F-R)*n,0),H.Pc(h),T==1736?m=d.W(j,H,a,null):(m=j).add(H,!1),m.A(y),y.en(w)}for(M.v=l,M.C=l+n,(l=new p.l).L(M),l.X(I,0),(l=Math.floor((y.v-M.v)/n)*n)!=0?(M.move(l,0),h.ig(-l,0)):h.MB(),l=T==1607?new p.Ua(m.description):new p.Ea(m.description),f=new p.l,w=new p.l;y.C>M.v;)($=p.Vd.clip(m,M,I,0)).A(w),(T==1607?!$.B()&&(w.S()>I||w.da()>I):!$.B()&&(T!=1736||w.S()>I))&&($.Pc(h),$.A(w),l.A(f),f.X(I,I),f.isIntersecting(w)&&T==1736?l=d.W(l,$,a,null):l.add($,!1)),M.move(n,0),h.shift(-n,0);return l},x.RI=function(d,l,n,a){var h=new p.ee(n.description);h.Gd(n,0,-1),h=p.cb.Bh(h,d,l);var f=n.I();if(a.Pa(),!p.cb.Xc(d)||f!=h.I())return!1;var m=new p.l;n.A(m);var y=new p.l;if(h.A(y),m=m.S(),y=y.S(),m!=0&&y!=0){if(y/=m,d=p.cb.ih(l).S()/p.cb.ih(d).S(),1e-10<Math.abs(y/d-1))return!1}else if(m!=0||y!=0)return!1;for(a.add(n,!1),n=0;n<f;n++)d=h.Oa(n),a.Db(n,d);return!0},x.Jz=function(){throw p.i.Fe()},x}()}(Q||(Q={})),function(p){var P,x,d;(x=P=p.ui||(p.ui={}))[x.Clip=0]="Clip",x[x.DontClip=1]="DontClip",x[x.PannableFold=2]="PannableFold",function(l){l[l.Geodesic=0]="Geodesic",l[l.Loxodrome=1]="Loxodrome",l[l.GreatElliptic=2]="GreatElliptic",l[l.NormalSection=3]="NormalSection",l[l.ShapePreserving=4]="ShapePreserving"}(d=p.RK||(p.RK={})),p.Ab=function(){function l(){}return l.zv=function(n,a,h){if(h||0<a){for(n=n.toString(p.Tc.PE_STR_NAME_CANON|p.Tc.PE_STR_AUTH_NONE),a=[],h=0;h<n.length;h++)a[h]="a"<=n[h]&&"z">=n[h]?a[h]=n[h].toUpperCase():n[h];return a.join()}return n.toString(p.Tc.PE_STR_AUTH_TOP)},l.wr=function(n,a,h,f){var m=f.length,y=h.I();if(y!=0){var w=h.vb(0),I=Math.min(y,m),M=0,T=n.gh();isNaN(a)&&(a=0);for(var $=n.Xc(),F=179*(n=$?n.tc().Le().S():0)/360;0<y;){if(w.pB(M<<1,I,f),p.gj.projToGeogCenter(T,I,f,a),$)for(var R=0;R<I;R++){var j=f[R][0]-a,H=p.mc.sign(j),W=w.read(2*(M+R));0>H*p.mc.sign(W)&&Math.abs(j)>F&&(f[R][0]+=-H*n)}w.pC(M<<1,I,f),M+=I,y-=I,I=Math.min(y,m)}h.Qc(1993)}},l.DL=function(n,a,h,f){var m=0,y=n.gh();isNaN(m)&&(m=0);var w=n.Xc(),I=n.bf();n=360*I,I*=179;for(var M=f.length,T=0;T<h;){for(var $=T;$<h&&a[$].isNaN();++$)T++;var F=Math.min(M,h-T);if(0<F){$=1;for(var R=T+1;$<F;++$,++R)if(a[R].isNaN()){F=$;break}if(p.ua.Ey(f,a,T,F),p.gj.projToGeogCenter(y,F,f,m),w)for($=0,R=T;$<F;++$,++R){var j=a[R].x,H=f[$][0]-m,W=p.mc.sign(H);0>W*p.mc.sign(j)&&Math.abs(H)>I&&(f[$][0]-=W*n)}p.ua.Dy(a,T,f,F),T+=F}}},l.Kx=function(n,a,h){var f=h.length,m=a.I();if(!(1>m)){var y=a.vb(0),w=Math.min(m,f),I=0,M=n.gh(),T=n.Xc(),$=T?n.Le().S():0,F=179*$/360,R=0;for(T&&(R=n.Bi());0<m;){if(y.pB(I<<1,w,h),p.gj.geogToProj(M,w,h),T)for(n=0;n<w;n++){var j=h[n][0],H=p.mc.sign(j),W=y.read(2*(I+n))-R;0>H*p.mc.sign(W)&&Math.abs(j)>F&&(h[n][0]+=-H*$)}y.pC(I<<1,w,h),I+=w,m-=w,w=Math.min(m,f)}a.Qc(1993)}},l.CL=function(n,a,h,f){if(h!=0){var m=n.gh(),y=n.Xc(),w=y?n.Le().S():0,I=179*w/360,M=0;for(y&&(M=n.Bi()),n=0;n<h;){for(var T=n;T<h&&a[T].isNaN();++T)n++;var $=Math.min(f.length,h-n);if(0<$){T=1;for(var F=n+1;T<$;++T,++F)if(a[F].isNaN()){$=T;break}if(p.ua.Ey(f,a,n,$),p.gj.geogToProj(m,$,f),y)for(T=0,F=n;T<$;T++){var R=f[T][0],j=p.mc.sign(R);0>j*p.mc.sign(a[F].x-M)&&Math.abs(R)>I&&(f[T][0]-=j*w)}p.ua.Dy(a,n,f,$),n+=$}}}},l.vr=function(n,a,h,f){var m=a.I();if(m!=0){var y=a.vb(0),w=n.ef,I=n.$f,M=w.tc().Sp(),T=I.tc().Sp(),$=w.bf(),F=I.bf();if((n=n.Yf)==null||n.count()==0){for(h=M/T,f=(w.Wp()-I.Wp())*F,T=-90*$,n=90*$,M=!1,F=1,w=2*m;F<w;)$=y.get(F),(I=p.P.Tk($,T,n))!=$&&(y.set(F,I),M=!0),F+=2;if(f!=0||h!=1)for(M=!0,T=new p.h,F=0;F<m;F++)y.uc(2*F,T),T.x*=h,T.x+=f,T.y*=h,y.Vt(2*F,T);M&&a.Qc(1993)}else{w=f.length,I=Math.min(m,w);var R=p.P.mg(I),j=null,H=0,W=NaN,V=NaN,Y=360*F,se=F/$;h&&(V=90*F,W=89.9*$,j=p.P.mg(I));for(var re=!0,he=0;m!=0;){for($=!1,y.pB(H<<1,I,f),F=0;F<I;F++)R[F]=f[F][0];if(h)for(F=0;F<I;F++){var ue=Math.abs(f[F][1])-W;0<ue&&($=f[F][1],f[F][1]=p.mc.En(W,$),j[F]=p.mc.En(ue,$),$=!0)}for(F=f[0][0],n.transform(f,I,M,T),re&&(he=f[0][0]-se*F,re=!1),F=0;F<I;F++)ue=f[F][0]-R[F]*se-he,200<Math.abs(ue)&&(f[F][0]=0<ue?f[F][0]-Y:f[F][0]+Y);if($){for(F=0;F<I;F++)j[F]!=0&&(f[F][1]+=se*j[F],f[F][1]>V?f[F][1]=V:f[F][1]<-V&&(f[F][1]=-V));for($=0;$<I;$++)j[$]=0}y.pC(H<<1,I,f),H+=I,m-=I,I=Math.min(m,w)}a.Qc(1993)}}},l.BL=function(n,a,h,f){if(n.ow)f=90*n.ef.bf(),p.ua.ZJ(a,h,-f,f);else{var m=n.Yf,y=n.ef,w=n.$f;n=y.Zr();var I=w.Zr(),M=y.bf(),T=90*M,$=w.bf();if(m==null||m.count()==0){if(f=n/I,m=(y.Wp()-w.Wp())*$,p.ua.ZJ(a,h,-T,T),m!=0||f!=1)for($=0;$<h;$++)a[$].x*=f,a[$].x+=m,a[$].y*=f}else{y=Math.min(h,f.length),T=p.P.mg(y),w=360*$,M=$/M;for(var F=!0,R=0,j=0;h!=0;){for($=0;$<y;$++)T[$]=a[$+j].x;for($=a[0].x,p.ua.Ey(f,a,j,y),m.transform(f,y,n,I),p.ua.Dy(a,j,f,y),F&&(R=a[0].x-M*$,F=!1),$=0;$<y;$++){var H=a[j+$].x-T[$]*M-R;200<Math.abs(H)&&(a[j+$].x=0<H?a[j+$].x-w:a[j+$].x+w)}j+=y,h-=y,y=Math.min(h,f.length)}}}},l.fv=function(n,a){return n=n.ih(),isNaN(a)||n.Lu(a,0),n},l.PQ=function(n,a,h,f,m,y,w,I){for(var M=l.fv(f,m),T=M.S(),$=T/360,F=l.kE*$,R=n.vb(0),j=a.Xc(),H=j?T/a.Le().S():0,W=!1,V=new p.Ea(h.description),Y=0,se=h.ea();Y<se;++Y){var re=j,he=new p.Ua(h.description);if(he.addPath(h,Y,!0),w!=0){var ue=l.KD(!0,he,M.H-I,M.H,w);(W=W||ue)&&(re=!1)}var we=-1;re&&(we=n.Ca(Y));var Te=he.vb(0),Ee=he.I(),He=0,Pe=Te.read(0),lt=0;ue=3*f.Yd(0);var et=!1,Ve=new p.h;Ve.Sc();var Zt=new p.h;Zt.Sc();for(var Ji=!1,ci=1;ci<Ee;++ci){var Pt=p.h.construct(Te.gg(2*ci),Te.gg(2*ci+1)),Ft=Pt.x,vt=Ft+He,bi=vt-Pe;if(Pt.x=vt,Math.abs(bi)>F){if(re){var ft=we+(ci+1<Ee?ci:0),an=R.read(2*(we+ci-1));ft=(R.read(2*ft)-an)*H,Math.abs(bi-ft)>1*$&&(re=!1)}re||(vt=Ft+(He-=p.mc.En(T,vt-Pe)),++lt,Ji=He!=0,Pt.x=vt)}else et||p.ua.vG(Zt,Ve,Pt,ue)&&(et=!0);Ji&&Te.write(2*ci,vt),Pe=vt,Zt.N(Ve),Ve.N(Pt)}0<lt&&he.Qc(1993),re=he.Oa(0),Ee=he.Oa(Ee-1),he=p.h.ub(re,Ee)<ue?l.pQ(he,f,m,y,et):l.qQ(n,Y,he,f,m),V.add(he,!1)}return m=f.Yd(0),h=M.S()/180,l.Lt(V,M,.1*m,!1),V=V!=(m=p.ti.clip(V,M,m,h,y)),n=n.He(),w=0,0<(I=m.He())&&0>n?w=1:0>=I&&0<n&&(I==0?(I=NaN,a.Tb()==2?I=a.ol().He():a.Tb()==1&&(I=a.Le().rF()),n>.99*I&&(w=-1)):w=-1),w!=0&&((a=new p.Ea(m.description)).vp(M),(a=p.Zl.local().W(a,h,y)).add(m,!1),V=!0,m=a),V&&(m=p.$l.local().W(m,f,!1,y)),m},l.qQ=function(n,a,h,f,m){var y=h.I(),w=h.Oa(0),I=h.Oa(y-1);m=(f=l.fv(f,m)).S(),w=p.mc.sign(I.x-w.x);var M=new p.l;h.yc(M);var T=f.ik();if(I=T-m,T+=m,0<=w){var $=Math.ceil((I-M.v)/m);for($*=m;I>M.v+$;)$+=m;for(;I<M.C+$;)$-=m;var F=$;720<M.S()&&(T=I+360*Math.ceil(M.S()/360))}else{for($=Math.ceil((T-M.C)/m),$*=m;T<M.C+$;)$-=m;for(;T>M.v+$;)$+=m;F=$,720<M.S()&&(I=T-360*Math.ceil(M.S()/360))}$=w*m;var R=p.l.construct(M.v,M.G,M.C,M.H);R.move(F,0);var j=new p.Ed;j.ig(F,0),h.Pc(j),(M=new p.Ua(h.description)).add(h,!1),F=h.Oa(y-1),m=0;for(var H=M.Oa(0).x,W=0;0<w?R.C<T:R.v>I;)1024<=W&&(W=0),R.move($,0),j.Lb=$,h.Pc(j),H+=$,f.v<=H&&f.C>=H&&(m=M.I()-1),h.Db(0,F),F=h.Oa(y-1),M.Fr(h,0,0,y-1,!1);return h=new p.Ea(M.description),y=0<n.Kr(a),h.add(M,!1),n=M.Oa(0),I=M.Oa(M.I()-1),a=h.ea()-1,(0>w?y:!y)?(w=p.h.construct(I.x,f.H),h.Ei(w),w=p.h.construct(f.ik(),f.H),h.Ei(w),f=p.h.construct(n.x,f.H)):(w=p.h.construct(I.x,f.G),h.Ei(w),w=p.h.construct(f.ik(),f.G),h.Ei(w),f=p.h.construct(n.x,f.G)),h.Ei(f),h.sG(0,a,0),h.fO(m),h},l.pQ=function(n,a,h,f,m){var y=new p.Ea(n.description);y.add(n,!1),y.yB(0,y.I()-1);var w=new p.l;y.yc(w);var I=(h=l.fv(a,h)).S(),M=Math.ceil((h.v-w.v)/I);for(M*=I;h.v>w.v+M;)M+=I;for(;h.v<w.C+M;)M-=I;if((M+=I)!=0){w.move(M,0);var T=new p.Ed;T.ig(M,0),y.Pc(T)}if(h.v<=w.v&&h.C>w.C)return m&&(m=y.He(),a=(y=p.$l.local().W(y,a,!0,f)).He(),(a=p.mc.sign(m)!=p.mc.sign(a))&&y.jJ()),y;for((n=new p.Ea(n.description)).add(y,!1),m=m||w.S()>I-a.Yd(0);w.v<h.C;)w.move(I,0),(T=new p.Ed).ig(I,0),y.Pc(T),n.add(y,!1);return m&&(m=n.He(),n.$o(1),a=(n=p.$l.local().W(n,a,!0,f)).He(),(a=p.mc.sign(m)!=p.mc.sign(a))&&n.jJ()),n},l.KD=function(n,a,h,f,m){for(var y=a.vb(0),w=a.I(),I=!1,M=0;M<w;M++){var T=p.h.construct(y.gg(2*M),y.gg(2*M+1));if((1&m)!=0&&T.y>=h){I=!0;break}if((2&m)!=0&&T.y<=-h){I=!0;break}}if(!I)return!1;y=!1,n&&(y=a.Pn(0)),w=(n=new p.hd).Ib(a),I=n.Ob(w);var $=-1,F=!0,R=new p.h;R.Sc(),M=new p.Ta;for(var j=-1,H=n.Ya(I);H!=-1;H=n.V(H)){T=n.Oa(H);var W=(1&m)!=0&&90<=T.y?1:0;if(W|=(2&m)!=0&&T.y<=-h?2:0,0<$&&$!=W){if(R.x!=T.x){R.x=T.x,n.Xi(n.Na(H),M);var V=n.yj(I,H,M);n.mf(V,R)}if(y)for(j=j!=-1?n.V(j):n.Ya(I),V=n.Na(H);j!=V;)j=n.qd(j,!1);j=-1}0<W&&(T.y=p.mc.En(f,T.y),n.mf(H,T),F||$==W||(T.x!=R.x?(n.Xi(H,M),V=n.yj(I,H,M),n.Db(V,R.x,T.y),j=V):j=H)),$=W,R=T,F=!1}if(y){if(j!=-1)for(j=n.V(j);j!=-1;)j=n.qd(j,!1);h=n.Ya(I),n.hq(h,n.tj(I))||(n.Xi(h,M),n.yj(I,-1,M))}return n.Ke(w).copyTo(a),!0},l.Hz=function(n,a,h,f){var m=n;if(m.B()||h==P.DontClip)return m;var y=m.K();if(y==33)return m=[(f=m).D()],l.tG(m,1,a,h),m[0].isNaN()?f.Pa():f.Db(m[0]),n;var w=(n=a.tc()).bf(),I=90*w,M=180*w,T=360*w,$=a.Bi(),F=.5*w,R=new p.l;m.A(R);var j=a.Xr(),H=a.KQ(),W=j.K()==197;if(a=new p.l,j.A(a),h==P.PannableFold&&(h=n.Le().S(),a.v=$-.5*h,a.C=a.v+h),R.G<-I||R.H>I){if(new p.l().L(R.v-w,-I,R.C+w,I),(m=p.ti.Pu(m,a,n,NaN,0,f)).B())return m;m.A(R)}if(H&&(a.H<R.G||a.G>R.H))return m.Ja();if(R.S()>T&&(m=l.Jp(m,$-M,T,n,!0,0,!0,f)).A(R),(I=l.$N(R.v,R.C,a.v,a.C,T))!=0&&R.move(I,0),R.C>a.C||R.v<a.v){if(R.C>a.C)for(;R.v>=a.C;)R.move(-T,0),I-=T;for(;R.v<a.C-T;)R.move(T,0),I+=T}if(h=p.ua.Ju(n,j),I!=0&&((w=new p.Ed).ig(I,0),m.Pc(w)),H){if(W&&a.contains(R))return m;for(H=[null,null],I=0;2>I;I++){if(W?w=p.ba.Ic(y)?p.ti.clip(m,a,h,F,f):p.ti.clip(m,a,h,0,f):(w=p.Zj.local().W(m,j,n,f))==j&&(w=p.ba.kg(w)),a.v<=R.v&&a.C>=R.C||a.v>=R.v&&a.C<=R.C)return w;H[I]=w,I==0&&(R.move(-T,0),(w=new p.Ed).ig(-T,0),m.Pc(w))}if(y==550)H[0].Gd(H[1],0,-1);else if(p.ba.Ic(y))H[0].add(H[1],!1);else{if(y!=33)throw p.i.ga("intersect_with_GCS_horizon: unexpected geometry type");H[0].B()&&(H[0]=H[1])}return H[0]}if(a.H<R.G||a.G>R.H)return m;for(y=0;!m.B()&&R.C>a.v;)y!=0&&((w=new p.Ed).ig(y,0),m.Pc(w)),p.fj.local().W(4,m,j,n,f)||j==(m=p.mp.local().W(m,j,n,f))&&(m=p.ba.kg(m)),y!=0&&((F=new p.Ed).ig(-y,0),m.Pc(F)),y-=T,R.move(-T,0);return m},l.tG=function(n,a,h,f){if(a!=0&&f!=P.DontClip)if(f==P.PannableFold){f=h.CR();for(var m=a,y=0;y<a;y++)(n[y].y>f.H||n[y].y<f.G)&&(n[y].Sc(),m--);m!=0&&l.cv(n,a,f.v,f.S())}else{var w=90*(f=h.bf()),I=180*f;for(f*=360,m=a,y=0;y<a;y++)(n[y].y>w||n[y].y<-w)&&(n[y].Sc(),m--);if(m!=0){(m=new p.l).bx(n,a),w=h.Xr();var M=h.kv();y=w.K()==197;var T=new p.l;if(w.A(T),!M||!(T.H<m.G||T.G>m.H))if(M)if(l.cv(n,a,T.ik()-I,f),m=a,y)for(y=0;y<a;y++)T.contains(n[y])||(n[y].Sc(),m--);else for(h=p.ua.Ju(h.tc(),w),y=0;y<a;y++)(I=p.jd.Zd(w,n[y],h)!=0)||(n[y].Sc(),m--);else for(l.cv(n,a,-I,f),m=a,h=p.ua.Ju(h.tc(),w),y=0;y<a;y++)(I=n[y]).isNaN()&&m--,M=l.oE(I.x,T.v,T.C,f),I.x+=M,(I=p.jd.Zd(w,I,h)!=0)&&(n[y].Sc(),m--)}}},l.Jp=function(n,a,h,f,m,y,w,I){var M=n.K(),T=a+h;if(M===33){var $=(f=m?n:n.Qf()).Ng();return($<a||$>=T||w&&$==T)&&($+=Math.ceil((a-$)/h)*h,$=p.P.Tk($,a,T),f.YB($)),f}if(n.B()||($=new p.l,n.A($),$.B()))return n;var F=new p.Oc;$.en(F);var R=new p.Oc;if(R.L(a,T),R.contains(F))return n;if((T=new p.l).L($),M===550){for(I=(f=m?n:n.Qf()).vb(0),M=2*f.I(),T=!1,a=0;a<M;a+=2)(($=I.read(a))<R.pa||$>=R.wa||w&&$==R.wa)&&(T=!0,$+=Math.ceil((R.pa-$)/h)*h,$=R.Kt($),I.write(a,$));return T&&f.Qc(1993),f}if(M==197)return h=m?n:n.Qf(),$.Fa(T),h.Zo($),h;var j=.1*Math.max($.da(),$.S());for(T.X(0,j),w=n,R=f.Yd(0),n=p.Ih.local(),m=new p.Ed;;){var H=Math.floor((F.pa-a)/h),W=Math.ceil((F.wa-a)/h);if(!(3<W-H))break;H=Math.floor(.5*(W+H)),T.v=$.v-j,T.C=a+h*H;var V=p.ti.clip(w,T,R,y,I);T.v=T.C,T.C=$.C+j;var Y=p.ti.clip(w,T,R,y,I);m.ig((H-W)*h,0),Y.Pc(m),M==1736?w=n.W(V,Y,f,null):(w=V).add(Y,!1),w.A($),$.en(F)}for(T.v=a,T.C=a+h,(a=new p.l).L(T),a.X(R,0),(a=Math.floor(($.v-T.v)/h)*h)!=0?(T.move(a,0),m.ig(-a,0)):m.MB(),a=M==1607?new p.Ua(w.description):new p.Ea(w.description),y=new p.l,F=new p.l;$.C>T.v;)(j=p.ti.clip(w,T,R,0,I)).A(F),(M==1607?!j.B()&&(F.S()>R||F.da()>R):!j.B()&&(M!=1736||F.S()>R))&&(j.Pc(m),j.A(F),a.A(y),y.X(R,R),y.isIntersecting(F)&&M==1736?a=n.W(a,j,f,null):a.add(j,!1)),T.move(h,0),m.shift(-h,0);return a},l.cv=function(n,a,h,f){for(var m=h+f,y=0;y<a;y++){var w=n[y].x;h<=w&&w<m||!(w<h||w>m||w==m)||(w+=Math.ceil((h-w)/f)*f,w=p.P.Tk(w,h,m),n[y].x=w)}},l.Hn=function(n,a,h,f,m,y){if(!a.Xc())throw p.i.ga("fold_into_360_degree_range");if(n.B())return n;if(a.Tb()==2){h=a.rv();var w=a.qv()-h}else{var I=a.bf();w=360*I,h-=180*I}return l.Jp(n,h,w,a,f,m,!0,y)},l.lF=function(n,a,h,f){if(h.Tb()==2)f=h.rv(),h=h.qv()-f;else{var m=h.bf();h=360*m,f-=180*m}l.cv(n,a,f,h)},l.nj=function(n,a){var h=a.Le();if(n.K()==33){var f=n.kh();return h.G<=f&&f<=h.H?n:n.Ja()}f=new p.l,n.A(f);var m=new p.l;return m.L(h),m.v=f.v,m.C=f.C,m.X(.01*m.da(),0),h=p.ua.py(a,f),m.contains(f)?n:p.ti.clip(n,m,h,0,null)},l.kr=function(n,a,h){return n>a.C&&n-a.C<h?a.C:n<a.v&&a.v-n<h?a.v:n},l.BX=function(n,a,h,f){f.x=l.kr(n.x,a,h),f.y=n.y},l.AX=function(n,a,h,f){for(var m=0;m<a;m++)n[m].y<h.G||n[m].y>h.H?n[m].Sc():n[m].x=l.kr(n[m].x,h,f)},l.Lt=function(n,a,h,f){if(!n.B()){var m=n.K();if(!f||m!=1736)if(p.ba.zj(m)){f=n.vb(0),m=0;for(var y=n.I();m<y;m++){var w=f.read(2*m),I=l.kr(w,a,h);I!=w&&f.write(2*m,I)}n.Qc(1993)}else if(m==197)f=new p.l,n.A(f),f.v=l.kr(f.v,a,h),f.C=l.kr(f.C,a,h),n.Zo(f);else{if(m!=33)throw p.i.ga("internal error");n.YB(l.kr(n.Ng(),a,h))}}},l.pS=function(n,a,h,f){var m=new p.hd,y=m.Ib(n);return n=p.ua.Ju(a,n),l.ms(m,y,a,n,h,!0,f),m.Ke(y)},l.ms=function(n,a,h,f,m,y,w){if(!h.Xc())throw p.i.O("invalid call");var I=h.Le(),M=h.tc(),T=M.gh().getDatum().getSpheroid();M=M.Id().ci;var $=T.getFlattening();T=T.getAxis(),$*=2-$;var F=new p.Oc;I.en(F);var R=null,j=[[0,0],[0,0]];if(h.Tb()==2?(R=h.gh(),y?(j[0][0]=l.an(w,F),j[0][1]=I.Lp(),p.gj.projToGeog(R,1,j),I=j[0][0]*M):(j[0][0]=I.ik(),j[0][1]=w,p.gj.projToGeog(R,1,j),I=j[0][1]*M)):I=w*M,!y&&I!=0&&m!=d.GreatElliptic)throw p.i.ga("invalid argument");var H=new p.ha,W=[0],V=new p.h,Y=new p.h,se=new p.h,re=[null,null],he=new p.h,ue=new p.h,we=new p.h,Te=new p.h;for(a=n.Ob(a);a!=-1;a=n.Sb(a)){var Ee=n.Ya(a);n.D(Ee,he);for(var He=!1,Pe=Ee=n.V(Ee);Pe!=-1;Pe=n.V(Pe)){if(Pe==Ee){if(He)break;He=!0}if(n.D(Pe,ue),y&&(f<w-he.x&&ue.x-w>f||f<w-ue.x&&he.x-w>f)||!y&&(w!=0||f<-he.y&&ue.y>f||f<-ue.y&&he.y>f))do if(!(Math.abs(he.x-ue.x)>=.5*F.S())){if(h.Tb()==2?(j[0][0]=l.an(he.x,F),j[0][1]=he.y,j[1][0]=l.an(ue.x,F),j[1][1]=ue.y,p.gj.projToGeogCenter(R,2,j,0),we.x=j[0][0]*M,we.y=j[0][1]*M,Te.y=j[1][1]*M):(we.x=he.x*M,we.y=he.y*M,Te.y=ue.y*M),Te.x=2*(ue.x-he.x)*Math.PI/F.S()+we.x,y){if(Y.x=I,Y.y=l.Iz(T,$,we,Te,I,m),isNaN(Y.y))break;re[0]=Y;var lt=1}else if(m==d.GreatElliptic){var et=[0,0];if((lt=p.Nx.Jz($,we,Te,I,et))==0)break;Y.x=et[0],Y.y=I,re[0]=Y,lt==2&&(se.x=et[1],se.y=I,re[1]=se)}else{if(Y.x=l.Gz(T,$,we,Te,m),isNaN(Y.x))break;Y.y=0,re[0]=Y,lt=1}var Ve=-1;for(et=0;et<lt;et++){p.kb.xd(T,$,we.x,we.y,Te.x,Te.y,H,null,null,m);var Zt=H.u;p.kb.xd(T,$,we.x,we.y,re[et].x,re[et].y,H,null,null,m);var Ji=H.u;if(h.Tb()==2?(j[0][0]=re[et].x/M,j[0][1]=re[et].y/M,p.gj.geogToProj(R,1,j),y?(V.y=j[0][1],V.x=w):(V.x=l.qs(j[0][0],he.x,ue.x,F),V.y=w)):y?(V.x=w,V.y=re[et].y/M):(V.x=l.qs(re[et].x/M,he.x,ue.x,F),V.y=w),W[0]=0<Zt?p.P.Tk(Ji/Zt,0,1):.5,W[0]==0||W[0]==1)break;Ve>W[0]||(Ve=n.Na(Pe),n.Wl(Ve,W,1),n.Db(n.V(Ve),V.x,V.y),Ve=W[0])}}while(0);he.N(ue)}}},l.an=function(n,a){var h=a.wa-a.pa;return a.Kt(n-Math.floor((n-a.pa)/h)*h)},l.qs=function(n,a,h,f){var m=new p.Oc;for(m.L(a,h),h=f.S(),n=Math.floor((n-a)/h)*h+n,m=m.tf();Math.abs(n-m)>Math.abs(n+h-m);)n+=h;return n},l.Un=function(n,a,h){return n=p.sr.Ep(n),a=p.sr.mx(n,p.sr.Ep(a)),(h=p.sr.mx(n,p.sr.Ep(h)))==0||0<a&&0<h&&h<=a||0>a&&0>h&&h>=a},l.Iz=function(n,a,h,f,m,y){if(y==d.GreatElliptic)return p.Nx.NS(a,h,f,m);if(Math.abs(h.x-f.x)>=Math.PI||!l.Un(h.x,f.x,m))return NaN;if(h.x>f.x)var w=f;else w=h,h=f;f=new p.ha;var I=new p.ha,M=new p.ha;p.kb.xd(n,a,w.x,w.y,h.x,h.y,I,f,null,y);var T=I.u,$=0,F=1,R=new p.h;for(R.N(w);T*(F-$)>1e-12*n;){var j=.5*($+F);if(p.kb.qj(n,a,w.x,w.y,T*j,f.u,I,M,y),R.x=I.u,R.y=M.u,R.x==m)break;if(l.Un(w.x,R.x,m))F=j;else{if(!l.Un(h.x,R.x,m))return NaN;$=j}}return R.y},l.Gz=function(n,a,h,f,m){if(m==d.GreatElliptic)return n=[0,0],p.Nx.Jz(a,h,f,0,n),n[0];if(h.y>f.y)var y=f;else y=h,h=f;if((f=new p.Oc).L(y.y,h.y),!f.contains(0)||Math.abs(y.x-h.x)>=Math.PI)return NaN;if(y.x==h.x)return y.x;var w=new p.ha,I=new p.ha,M=new p.ha;p.kb.xd(n,a,y.x,y.y,h.x,h.y,I,w,null,m);var T=I.u,$=0,F=1,R=new p.h;for(R.N(y);T*(F-$)>1e-12*n;){var j=.5*($+F);if(p.kb.qj(n,a,y.x,y.y,T*j,w.u,I,M,m),R.x=I.u,R.y=M.u,f.L(y.y,R.y),R.y==0)break;if(f.contains(0))F=j;else{if(f.L(h.y,R.y),!f.contains(0))return NaN;$=j}}return R.x},l.RI=function(n,a,h,f){if(!n.ef.Xc())return!1;var m=new p.ee(a.description);if(m.Gd(a,0,-1),f=p.Gx.local().W(m,n,f),m=a.I(),h.Pa(),m!=f.I())return!1;var y=new p.l;a.A(y);var w=new p.l;if(f.A(w),y=y.S(),w=w.S(),y!=0&&w!=0){if(w/=y,n=n.$f.ih().S()/n.ef.ih().S(),1e-10<Math.abs(w/n-1))return!1}else if(y!=0||w!=0)return!1;for(h.add(a,!1),a=new p.h,n=0;n<m;n++)f.D(n,a),h.Db(n,a);return!0},l.lN=function(n,a){return(n%=360*a)>=180*a&&(n-=360*a),n},l.OI=function(n,a,h,f){if(h==P.Clip){var m=a.ol();m.K()==197?(h=new p.l,m.A(h),m=p.ua.py(a,h),n=p.ti.clip(n,h,m,5e4*a.rm(),f)):p.fj.local().W(1,m,n,a,f)||(n=p.Zj.local().W(n,m,a,f))==m&&(n=p.Xk.kg(n))}else a.Xc()&&(f=new p.l,n.yc(f),a.Le().contains(f)||(l.Lt(n,a.Le(),a.Yd(0),!0),h==P.PannableFold&&(n=l.nj(n,a)),n=l.Hn(n,a,0,!0,1e5*a.rm(),null)));return n},l.SD=function(n,a,h){var f=a.Yr();if(f==null)return n;var m=(a=a.tc()).Le().S(),y=new p.l;n.yc(y);var w=new p.Oc;y.en(w),y=f.Ha(),f=null;for(var I=new p.Ed;y.ab();)for(;y.Ia();){var M=y.ia(),T=M.Vg(0,0),$=new p.Oc;for($.L(T.pa,T.wa),T=0;$.wa>w.pa;)$.move(-m),--T;for(;$.pa<=w.wa;){if($.isIntersecting(w)){f==null&&(f=new p.Ua);var F=p.zb.YO(M.bc(),M.xc());T!=0&&(I.ig(T*m,0),F.Pc(I)),f.pc(F,!0)}$.move(m),++T}}return f!=null?(a=p.ua.bO(a,f),a=p.ua.Gr(a),p.bu.gP(n,f,a,h)):n},l.$N=function(n,a,h,f,m){return n>=h&&a<=f?0:l.oE(.5*(a+n),h,f,m)},l.oE=function(n,a,h,f){return p.mc.round((.5*(h+a)-n)/f)*f},l.QQ=function(n,a,h,f,m,y,w,I){var M=l.fv(f,m),T=M.S(),$=T/360,F=l.kE*$,R=n.vb(0),j=a.Xc(),H=j?T/a.Le().S():0;a=n.Ja();for(var W=0,V=h.ea();W<V;++W){var Y=j,se=new p.Ua(h.description);se.addPath(h,W,!0);var re=h.ec(W);w!=0&&(re=l.KD(re,se,M.H-I,M.H,w))&&(Y=!1);var he=-1;re=se.I();var ue=!1;Y&&(he=n.Ca(W),ue=n.ec(W));var we=se.vb(0),Te=0,Ee=we.read(0),He=0,Pe=3*f.Yd(0),lt=!1,et=new p.h;et.Sc();var Ve=new p.h;Ve.Sc();for(var Zt=!1,Ji=1;Ji<re;++Ji){var ci=p.h.construct(we.gg(2*Ji),we.gg(2*Ji+1)),Pt=ci.x,Ft=Pt+Te,vt=Ft-Ee;if(ci.x=Ft,Math.abs(vt)>F){if(Y){var bi=he+Ji-1,ft=he;(!ue||Ji+1<re)&&(ft+=Ji),bi=R.read(2*bi),ft=(R.read(2*ft)-bi)*H,Math.abs(vt-ft)>1*$&&(j=!1)}Y||(Ft=Pt+(Te-=p.mc.En(T,Ft-Ee)),++He,Zt=Te!=0,ci.x=Ft)}else lt||p.ua.vG(et,Ve,ci,Pe)&&(lt=!0);Zt&&we.write(2*Ji,Ft),Ee=Ft,et.N(Ve),Ve.N(ci)}He!=0&&se.Qc(1993),Y=se.Oa(0),re=se.Oa(re-1),p.h.ub(Y,re),se=l.rQ(se,f,isNaN(m)?0:m,y),a.add(se,!1)}return n=f.Yd(0),h=M.S()/180,l.Lt(a,M,.1*n,!1),p.ti.clip(a,M,n,h,y)},l.rQ=function(n,a,h,f){return l.Hn(n,a,h,!0,0,f)},l.JS=function(n,a,h,f){var m=n.K();if(m==1736)for(a=a!=null?a.Yd(0):0,m=0;m<f;m++)p.jd.Zd(n,h[m],a)!=1&&h[m].Sc();else{if(m!=197)throw p.i.O();for(m=0;m<f;m++)n.ZO(h[m])||h[m].Sc()}},l.bl=function(n,a,h,f){if(32>h)for(var m=new p.Ta,y=0;y<h;y++)m.Db(a[y]),n.bl(m,f).D(a[y]);else{var w=new p.ee;for(w.se(3),w.CD(a,h),m=w.vb(3),y=0;y<h;y++)m.write(y,y);for(y=n.bl(w,f),n=y.vb(0),m=y.vb(3),f=p.h.construct(NaN,NaN),w=0;w<h;w++)a[w]=f;for(h=y.I(),y=0;y<h;y++)f=m.read(y),n.uc(2*y,a[f])}},l.al=function(n,a,h,f){if(32>h)for(var m=new p.Ta,y=0;y<h;y++)m.Db(a[y]),n.al(m,f).D(a[y]);else{var w=new p.ee;for(w.se(3),w.CD(a,h),m=w.vb(3),y=0;y<h;y++)m.write(y,y);for(y=n.al(w,f),n=y.vb(0),m=y.vb(3),f=p.h.construct(NaN,NaN),w=0;w<h;w++)a[w]=f;for(h=y.I(),y=0;y<h;y++)f=m.read(y),n.uc(2*y,a[f])}},l.kE=210,l}()}(Q||(Q={})),function(p){var P;(P=p.PL||(p.PL={}))[P.rightSide=1]="rightSide";var x=function(){function d(l,n,a){this.Ds=new p.h,l===void 0?this.Ko=-1:(this.Ds.N(l),this.Ko=n,this.La=a,this.pw=0)}return d.prototype.RJ=function(l){this.pw=l?1|this.pw:-2&this.pw},d.prototype.B=function(){return 0>this.Ko},d.prototype.az=function(){if(this.B())throw p.i.ga("invalid call");return new p.Ta(this.Ds.x,this.Ds.y)},d.prototype.Va=function(){if(this.B())throw p.i.ga("invalid call");return this.Ko},d.prototype.cz=function(){if(this.B())throw p.i.ga("invalid call");return this.La},d.prototype.Nz=function(){return(1&this.pw)!=0},d.prototype.by=function(l,n,a,h){this.Ds.x=l,this.Ds.y=n,this.Ko=a,this.La=h},d}();p.bm=x}(Q||(Q={})),function(p){var P=function(){function d(){}return d.prototype.Wo=function(l,n){this.vh.resize(0),this.Ki.length=0,this.vk=-1,l.yc(this.Gk),this.Gk.X(n,n),this.Gk.isIntersecting(this.Gb.Da)?((this.xs=p.ba.zd(l.K()))?(this.OH=l.bc(),this.NH=l.xc(),this.ra=n):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},d.prototype.Zi=function(l,n){this.vh.resize(0),this.Ki.length=0,this.vk=-1,this.Gk.L(l),this.Gk.X(n,n),this.ra=NaN,this.Gk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},d.prototype.next=function(){if(this.vh.size==0)return-1;this.vk=this.Ss;var l=null,n=null,a=null,h=null;this.xs&&(l=new p.h,n=new p.h,a=new p.l);for(var f=!1;!f;){for(;this.vk!=-1;){var m=this.Gb.Xy(this.Gb.hv(this.vk));if(m.isIntersecting(this.Gk)){if(!this.xs){f=!0;break}if(l.N(this.OH),n.N(this.NH),a.L(m),a.X(this.ra,this.ra),0<a.uy(l,n)){f=!0;break}}this.vk=this.Gb.pv(this.vk)}if(this.vk==-1){m=this.vh.Gc();var y=this.Ki[this.Ki.length-1];for(h==null&&((h=[])[0]=new p.l,h[1]=new p.l,h[2]=new p.l,h[3]=new p.l),x.zJ(y,h),this.vh.Jf(),--this.Ki.length,y=0;4>y;y++){var w=this.Gb.Np(m,y);if(w!=-1&&0<this.Gb.RR(w)&&h[y].isIntersecting(this.Gk))if(this.xs){if(l.N(this.OH),n.N(this.NH),a.L(h[y]),a.X(this.ra,this.ra),0<a.uy(l,n)){var I=new p.l;I.L(h[y]),this.vh.add(w),this.Ki.push(I)}}else(I=new p.l).L(h[y]),this.vh.add(w),this.Ki.push(I)}if(this.vh.size==0)return-1;this.vk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.vk),this.vk},d.XO=function(l,n,a){var h=new d;return h.Gb=l,h.Gk=new p.l,h.vh=new p.ja(0),h.Ki=[],h.Wo(n,a),h},d.WO=function(l,n,a){var h=new d;return h.Gb=l,h.Gk=new p.l,h.vh=new p.ja(0),h.Ki=[],h.Zi(n,a),h},d.VO=function(l){var n=new d;return n.Gb=l,n.Gk=new p.l,n.vh=new p.ja(0),n.Ki=[],n},d}();p.CY=P;var x=function(){function d(l,n){this.jf=new p.ad(11),this.ai=new p.ad(5),this.ys=[],this.iw=new p.ja(0),this.Da=new p.l,this.Pk(l,n)}return d.prototype.reset=function(l,n){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Pk(l,n)},d.prototype.xj=function(l,n){return this.Bv(l,n,0,this.Da,this.kf,!1,-1)},d.prototype.Ez=function(l,n,a){a=a==-1?this.kf:this.RF(a);var h=this.da(a),f=this.jR(a);return this.Bv(l,n,h,f,a,!1,-1)},d.prototype.ka=function(l){return this.eR(l)},d.prototype.BF=function(l){return this.Xy(this.hv(l))},d.prototype.da=function(l){return this.lv(l)},d.prototype.jR=function(l){var n=new p.l;n.L(this.Da);var a=this.lv(l);l=this.LF(l);for(var h=0;h<2*a;h+=2){var f=p.P.truncate(3&l>>h);f==0?(n.v=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):f==1?(n.C=.5*(n.v+n.C),n.G=.5*(n.G+n.H)):(f==2?n.C=.5*(n.v+n.C):n.v=.5*(n.v+n.C),n.H=.5*(n.G+n.H))}return n},d.prototype.RR=function(l){return this.vz(l)},d.prototype.qR=function(l,n){return P.XO(this,l,n)},d.prototype.HF=function(l,n){return P.WO(this,l,n)},d.prototype.getIterator=function(){return P.VO(this)},d.prototype.Pk=function(l,n){if(0>n||32<2*n)throw p.i.O("invalid height");this.wT=n,this.Da.L(l),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.IJ(this.kf,0),this.FJ(this.kf,0)},d.prototype.Bv=function(l,n,a,h,f,m,y){if(!h.contains(n))return a==0?-1:this.Bv(l,n,0,this.Da,this.kf,m,y);if(!m)for(var w=f;w!=-1;w=this.DR(w))this.jx(w,this.vz(w)+1);(w=new p.l).L(h),h=f;var I=[];for(I[0]=new p.l,I[1]=new p.l,I[2]=new p.l,I[3]=new p.l;a<this.wT&&this.dO(h);a++){d.zJ(w,I);for(var M=!1,T=0;4>T;T++)if(I[T].contains(n)){M=!0;var $=this.Np(h,T);$==-1&&($=this.mP(h,T)),this.jx($,this.vz($)+1),h=$,w.L(I[T]);break}if(!M)break}return this.nS(l,n,a,w,h,m,f,y)},d.prototype.nS=function(l,n,a,h,f,m,y,w){var I=this.IF(f);if(m){if(f==y)return w;this.NP(w),m=w}else m=this.oP(),this.IB(m,l),this.FW(this.hv(m),n);return this.hX(m,f),I!=-1?(this.hx(m,I),this.ex(I,m)):this.BJ(f,m),this.NB(f,m),this.dx(f,this.nv(f)+1),this.cO(f)&&this.HQ(a,h,f),m},d.prototype.NP=function(l){var n=this.RF(l),a=this.IF(n),h=this.JR(l),f=this.pv(l);this.Wr(n)==l?(f!=-1?this.hx(f,-1):this.NB(n,-1),this.BJ(n,f)):a==l?(this.ex(h,-1),this.NB(n,h)):(this.hx(f,h),this.ex(h,f)),this.hx(l,-1),this.ex(l,-1),this.dx(n,this.nv(n)-1)},d.zJ=function(l,n){var a=.5*(l.v+l.C),h=.5*(l.G+l.H);n[0].L(a,h,l.C,l.H),n[1].L(l.v,h,a,l.H),n[2].L(l.v,l.G,a,h),n[3].L(a,l.G,l.C,h)},d.prototype.cO=function(l){return this.nv(l)==8&&!this.bG(l)},d.prototype.HQ=function(l,n,a){var h=this.Wr(a);do{var f=this.hv(h),m=this.ai.U(h,0);f=this.Xy(f),this.Bv(m,f,l,n,a,!0,h),h=m=this.pv(h)}while(h!=-1)},d.prototype.dO=function(l){return 8<=this.nv(l)||this.bG(l)},d.prototype.bG=function(l){return this.Np(l,0)!=-1||this.Np(l,1)!=-1||this.Np(l,2)!=-1||this.Np(l,3)!=-1},d.prototype.mP=function(l,n){var a=this.jf.De();return this.JW(l,n,a),this.jx(a,0),this.dx(a,0),this.Rk(a,l),this.FJ(a,this.lv(l)+1),this.IJ(a,n<<2*this.lv(l)|this.LF(l)),a},d.prototype.oP=function(){var l=this.ai.De();if(0<this.iw.size){var n=this.iw.Gc();this.iw.Jf()}else n=this.ys.length,this.ys.push(new p.l);return this.GW(l,n),l},d.prototype.Np=function(l,n){return this.jf.U(l,n)},d.prototype.JW=function(l,n,a){this.jf.T(l,n,a)},d.prototype.Wr=function(l){return this.jf.U(l,4)},d.prototype.BJ=function(l,n){this.jf.T(l,4,n)},d.prototype.IF=function(l){return this.jf.U(l,5)},d.prototype.NB=function(l,n){this.jf.T(l,5,n)},d.prototype.LF=function(l){return this.jf.U(l,6)},d.prototype.IJ=function(l,n){this.jf.T(l,6,n)},d.prototype.nv=function(l){return this.jf.U(l,7)},d.prototype.vz=function(l){return this.jf.U(l,8)},d.prototype.dx=function(l,n){this.jf.T(l,7,n)},d.prototype.jx=function(l,n){this.jf.T(l,8,n)},d.prototype.DR=function(l){return this.jf.U(l,9)},d.prototype.Rk=function(l,n){this.jf.T(l,9,n)},d.prototype.lv=function(l){return this.jf.U(l,10)},d.prototype.FJ=function(l,n){this.jf.T(l,10,n)},d.prototype.eR=function(l){return this.ai.U(l,0)},d.prototype.IB=function(l,n){this.ai.T(l,0,n)},d.prototype.JR=function(l){return this.ai.U(l,1)},d.prototype.pv=function(l){return this.ai.U(l,2)},d.prototype.hx=function(l,n){this.ai.T(l,1,n)},d.prototype.ex=function(l,n){this.ai.T(l,2,n)},d.prototype.RF=function(l){return this.ai.U(l,3)},d.prototype.hX=function(l,n){this.ai.T(l,3,n)},d.prototype.hv=function(l){return this.ai.U(l,4)},d.prototype.GW=function(l,n){this.ai.T(l,4,n)},d.prototype.Xy=function(l){return this.ys[l]},d.prototype.FW=function(l,n){this.ys[l].L(n)},d}();p.fu=x}(Q||(Q={})),function(p){var P;(P=p.WK||(p.WK={}))[P.Outside=0]="Outside",P[P.Inside=1]="Inside",P[P.Border=2]="Border";var x=function(){function l(n,a){this.KT=a,this.Xh=n}return l.prototype.ax=function(n,a){this.dH!=a&&n.flush(),this.dH=a},l.prototype.bF=function(n,a){for(var h=0;h<a;)for(var f=n[h++],m=n[h++],y=n[h++]*this.KT;f<m;f++)this.Xh[y+(f>>4)]|=this.dH<<2*(15&f)},l}();p.DY=x;var d=function(){function l(n,a,h){this.Xh=null,this.NA=this.Kk=this.YH=this.WH=this.Gs=this.lH=this.Hf=this.Wm=0,this.Ti=this.Lk=this.xl=null,this.Az(n,a,h)}return l.create=function(n,a,h){if(!l.uE(n))throw p.i.O();return l.rP(n,a,h)},l.kW=function(n){switch(n){case 0:n=1024;break;case 1:n=16384;break;case 2:n=262144;break;default:throw p.i.ga("Internal Error")}return n},l.uE=function(n){return!(n.B()||n.K()!=1607&&n.K()!=1736)},l.prototype.mQ=function(n,a){a=a.Ha();for(var h=new p.h,f=new p.h;a.ab();)for(;a.Ia();){var m=a.ia();if(m.K()!=322)throw p.i.ga("Internal Error");n.Gh(m.bc(),h),n.Gh(m.xc(),f),this.Ti.fy(h.x,h.y,f.x,f.y)}this.Ti.dJ(p.Ox.Bx)},l.prototype.nQ=function(){throw p.i.ga("Internal Error")},l.prototype.My=function(n,a){for(var h=1;4>h;h++)n.fy(a[h-1].x,a[h-1].y,a[h].x,a[h].y);n.fy(a[3].x,a[3].y,a[0].x,a[0].y),this.Ti.dJ(p.Ox.Bx)},l.prototype.mK=function(n,a,h){for(var f=[null,null,null,null],m=0;m<f.length;m++)f[m]=new p.h;a=a.Ha(),h=this.Lk.$X(h)+1.5,m=new p.h;for(var y=new p.h,w=new p.h,I=new p.h,M=new p.h,T=new p.l,$=new p.h;a.ab();){var F=!1,R=!0;for($.na(0,0);a.Ia();){var j=a.ia();if(I.x=j.ta,I.y=j.oa,M.x=j.qa,M.y=j.ma,T.Pa(),T.$b(I.x,I.y),T.Nk(M.x,M.y),this.xl.CG(T)){this.Lk.Gh(M,M),R?(this.Lk.Gh(I,I),$.N(I),R=!1):I.N($),m.vc(M,I);var H=.5>(j=m.length());j==0?m.na(1,0):(H||$.N(M),m.scale(h/j),y.na(-m.y,m.x),w.na(m.y,-m.x),I.sub(m),M.add(m),f[0].add(I,y),f[1].add(I,w),f[2].add(M,w),f[3].add(M,y),H?F=!0:this.My(n,f))}else F&&(this.My(n,f),F=!1),R=!0}F&&this.My(n,f)}},l.prototype.nC=function(n){return p.P.truncate(n*this.lH+this.WH)},l.prototype.oC=function(n){return p.P.truncate(n*this.Gs+this.YH)},l.rP=function(n,a,h){return new l(n,a,h)},l.prototype.Az=function(n,a,h){this.Hf=Math.max(p.P.truncate(2*Math.sqrt(h)+.5),64),this.Wm=p.P.truncate((2*this.Hf+31)/32),this.xl=new p.l,this.Kk=a,h=0;for(var f=this.Hf,m=this.Wm;8<=f;)h+=f*m,f=p.P.truncate(f/2),m=p.P.truncate((2*f+31)/32);this.Xh=p.P.mg(h,0),this.Ti=new p.Ox,h=new x(this.Xh,this.Wm,this),this.Ti.wX(this.Hf,this.Hf,h),n.A(this.xl),this.xl.X(a,a),f=new p.l;var y=a*(m=p.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(a*=m.da(),f.L(this.xl.tf(),Math.max(y,this.xl.S()),Math.max(a,this.xl.da())),this.NA=this.Kk,this.Lk=new p.Ed,this.Lk.kS(f,m),new p.Ed,n.K()){case 550:h.ax(this.Ti,2),this.nQ();break;case 1607:h.ax(this.Ti,2),this.mK(this.Ti,n,this.NA);break;case 1736:h.ax(this.Ti,1),this.mQ(this.Lk,n),h.ax(this.Ti,2),this.mK(this.Ti,n,this.NA)}this.lH=this.Lk.eb,this.Gs=this.Lk.bb,this.WH=this.Lk.Lb,this.YH=this.Lk.Qb,this.SN()},l.prototype.SN=function(){this.Ti.flush();for(var n=0,a=this.Hf*this.Wm,h=this.Hf,f=p.P.truncate(this.Hf/2),m=this.Wm,y=p.P.truncate((2*f+31)/32);8<h;){for(h=0;h<f;h++)for(var w=2*h,I=2*h+1,M=0;M<f;M++){var T=2*M,$=2*M+1,F=T>>4;T=2*(15&T);var R=$>>4;$=2*(15&$);var j=this.Xh[n+m*w+F]>>T&3;j|=this.Xh[n+m*w+R]>>$&3,j|=this.Xh[n+m*I+F]>>T&3,j|=this.Xh[n+m*I+R]>>$&3,this.Xh[a+y*h+(M>>4)]|=j<<2*(15&M)}h=f,m=y,n=a,f=p.P.truncate(h/2),y=p.P.truncate((2*f+31)/32),a=n+m*h}},l.prototype.Uo=function(n,a){return this.xl.contains(n,a)?(n=this.nC(n),a=this.oC(a),0>n||n>=this.Hf||0>a||a>=this.Hf||(a=this.Xh[this.Wm*a+(n>>4)]>>2*(15&n)&3)==0?0:a==1?1:2):0},l.prototype.To=function(n){if(!n.Fa(this.xl))return 0;var a=this.nC(n.v),h=this.nC(n.C),f=this.oC(n.G);if(n=this.oC(n.H),0>a&&(a=0),0>f&&(f=0),h>=this.Hf&&(h=this.Hf-1),n>=this.Hf&&(n=this.Hf-1),a>h||f>n)return 0;for(var m=Math.max(h-a,1)*Math.max(n-f,1),y=0,w=this.Wm,I=this.Hf,M=0;;){if(32>m||16>I){for(m=f;m<=n;m++)for(var T=a;T<=h;T++)if(1<(M=this.Xh[y+w*m+(T>>4)]>>2*(15&T)&3))return 2;if(M==0)return 0;if(M==1)return 1}y+=w*I,I=p.P.truncate(I/2),w=p.P.truncate((2*I+31)/32),a=p.P.truncate(a/2),f=p.P.truncate(f/2),h=p.P.truncate(h/2),n=p.P.truncate(n/2),m=Math.max(h-a,1)*Math.max(n-f,1)}},l.prototype.MR=function(){return this.Hf*this.Wm},l}();p.Mx=d}(Q||(Q={})),function(p){var P;(P=p.QL||(p.QL={}))[P.contains=1]="contains",P[P.within=2]="within",P[P.equals=3]="equals",P[P.disjoint=4]="disjoint",P[P.touches=8]="touches",P[P.crosses=16]="crosses",P[P.overlaps=32]="overlaps",P[P.unknown=0]="unknown",P[P.intersects=1073741824]="intersects";var x=function(){function l(){}return l.construct=function(n,a,h,f,m,y,w,I){var M=new l;return M.rw=n,M.Om=a,M.Mj=h,M.Ui=f,M.wH=m,M.OY=y,M.PY=w,M.QY=I,M},l}();p.Xt=function(){function l(){}return l.xD=function(n,a,h){if(l.ry(n)){var f=p.ua.mj(a,n,!1);a=!1,p.Wk.xE(n)&&(a=a||n.nu(f,h)),(f=n.K())!=1736&&f!=1607||!p.Wk.vE(n)||h==0||(a=a||n.hj(h)),f!=1736&&f!=1607||!p.Wk.wE(n)||h==0||a||n.cM()}},l.ry=function(n){return p.Wk.xE(n)||p.Wk.vE(n)||p.Wk.wE(n)},l}();var d=function(){function l(){this.th=[]}return l.uB=function(n,a,h,f,m){var y=n.K(),w=a.K();if(y==197){if(w==197)return l.oW(n,a,h,f);if(w==33)return f==2?f=1:f==1&&(f=2),l.cJ(a,n,h,f)}else if(y==33){if(w==197)return l.cJ(n,a,h,f);if(w==33)return l.qW(n,a,h,f)}if(n.B()||a.B())return f==4;var I=new p.l;n.A(I);var M=new p.l;a.A(M);var T=new p.l;if(T.L(I),T.$b(M),h=p.ua.Xd(h,T,!1),l.fk(I,M,h))return f==4;switch(I=!1,p.Xk.zd(y)&&((y=new p.Ua(n.description)).pc(n,!0),n=y,y=1607),p.Xk.zd(w)&&((w=new p.Ua(a.description)).pc(a,!0),a=w,w=1607),y!=197&&w!=197?(n.Eb()<a.Eb()||y==33&&w==550)&&(f==2?f=1:f==1&&(f=2)):y!=1736&&w!=197&&(f==2?f=1:f==1&&(f=2)),y){case 1736:switch(w){case 1736:I=l.st(n,a,h,f,m);break;case 1607:I=l.bn(n,a,h,f,m);break;case 33:I=l.rt(n,a,h,f);break;case 550:I=l.qt(n,a,h,f,m);break;case 197:I=l.BI(n,a,h,f,m)}break;case 1607:switch(w){case 1736:I=l.bn(a,n,h,f,m);break;case 1607:I=l.bB(n,a,h,f,m);break;case 33:I=l.ut(n,a,h,f,m);break;case 550:I=l.tt(n,a,h,f,m);break;case 197:I=l.HI(n,a,h,f)}break;case 33:switch(w){case 1736:I=l.rt(a,n,h,f);break;case 1607:I=l.ut(a,n,h,f,m);break;case 550:I=l.mt(a,n,h,f)}break;case 550:switch(w){case 1736:I=l.qt(a,n,h,f,m);break;case 1607:I=l.tt(a,n,h,f,m);break;case 550:I=l.UA(n,a,h,f,m);break;case 33:I=l.mt(n,a,h,f);break;case 197:I=l.cI(n,a,h,f)}break;case 197:switch(w){case 1736:I=l.BI(a,n,h,f,m);break;case 1607:I=l.HI(a,n,h,f);break;case 550:I=l.cI(a,n,h,f)}}return I},l.oW=function(n,a,h,f){if(n.B()||a.B())return f==4;var m=new p.l,y=new p.l,w=new p.l;switch(n.A(m),a.A(y),w.L(m),w.$b(y),n=p.ua.Xd(h,w,!1),f){case 4:return l.fk(m,y,n);case 2:return l.eF(y,m,n);case 1:return l.eF(m,y,n);case 3:return l.gk(m,y,n);case 8:return l.YP(m,y,n);case 32:return l.XP(m,y,n);case 16:return l.WP(m,y,n)}return!1},l.cJ=function(n,a,h,f){if(n.B()||a.B())return f==4;n=n.D();var m=new p.l,y=new p.l;switch(a.A(m),y.L(n),y.$b(m),a=p.ua.Xd(h,y,!1),f){case 4:return l.Tw(n,m,a);case 2:return l.$A(n,m,a);case 1:return l.MU(n,m,a);case 3:return l.qI(n,m,a);case 8:return l.ZA(n,m,a)}return!1},l.qW=function(n,a,h,f){if(n.B()||a.B())return f==4;n=n.D(),a=a.D();var m=new p.l;switch(m.L(n),m.$b(a),h=p.ua.Xd(h,m,!1),f){case 4:return l.NU(n,a,h);case 2:return l.pI(a,n,h);case 1:return l.pI(n,a,h);case 3:return l.rI(n,a,h)}return!1},l.st=function(n,a,h,f,m){switch(f){case 4:return l.fV(n,a,h);case 2:return l.Uw(a,n,h,m);case 1:return l.Uw(n,a,h,m);case 3:return l.iV(n,a,h);case 8:return l.qV(n,a,h);case 32:return l.lV(n,a,h,m)}return!1},l.bn=function(n,a,h,f,m){switch(f){case 4:return l.gV(n,a,h);case 1:return l.aB(n,a,h,m);case 8:return l.rV(n,a,h,m);case 16:return l.bV(n,a,h)}return!1},l.rt=function(n,a,h,f){switch(f){case 4:return l.eV(n,a,h);case 1:return l.ZU(n,a,h);case 8:return l.pV(n,a,h)}return!1},l.qt=function(n,a,h,f){switch(f){case 4:return l.dV(n,a,h);case 1:return l.YU(n,a,h);case 8:return l.oV(n,a,h);case 16:return l.aV(n,a,h)}return!1},l.BI=function(n,a,h,f,m){if(l.cV(n,a,h))return f==4;if(f==4)return!1;switch(f){case 2:return l.sV(n,a,h);case 1:return l.XU(n,a,h);case 3:return l.hV(n,a,h);case 8:return l.nV(n,a,h,m);case 32:return l.kV(n,a,h,m);case 16:return l.$U(n,a,h,m)}return!1},l.bB=function(n,a,h,f){switch(f){case 4:return l.BV(n,a,h);case 2:return l.FI(a,n,h);case 1:return l.FI(n,a,h);case 3:return l.DV(n,a,h);case 8:return l.II(n,a,h);case 32:return l.HV(n,a,h);case 16:return l.GI(n,a,h)}return!1},l.ut=function(n,a,h,f){switch(f){case 4:return l.AV(n,a,h);case 1:return l.vV(n,a,h);case 8:return l.LV(n,a,h)}return!1},l.tt=function(n,a,h,f){switch(f){case 4:return l.zV(n,a,h);case 1:return l.uV(n,a,h);case 8:return l.KV(n,a,h);case 16:return l.xV(n,a,h)}return!1},l.HI=function(n,a,h,f){if(l.yV(n,a,h))return f==4;if(f==4)return!1;switch(f){case 2:return l.MV(n,a,h);case 1:return l.tV(n,a,h);case 3:return l.CV(n,a,h);case 8:return l.JV(n,a,h);case 32:return l.GV(n,a,h);case 16:return l.wV(n,a,h)}return!1},l.UA=function(n,a,h,f){switch(f){case 4:return l.bU(n,a,h);case 2:return l.$H(a,n,h);case 1:return l.$H(n,a,h);case 3:return l.dU(n,a,h);case 32:return l.jU(n,a,h)}return!1},l.mt=function(n,a,h,f){switch(f){case 4:return l.aI(n,a,h);case 2:return l.nU(n,a,h);case 1:return l.ZT(n,a,h);case 3:return l.Pw(n,a,h)}return!1},l.cI=function(n,a,h,f){switch(f){case 4:return l.aU(n,a,h);case 2:return l.mU(n,a,h);case 1:return l.YT(n,a,h);case 3:return l.cU(n,a,h);case 8:return l.lU(n,a,h);case 16:return l.$T(n,a,h)}return!1},l.iV=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!!l.gk(f,m,h)&&(f=l.rc(n,a,!1))!=4&&f!=1&&f!=2&&(!!l.ZH(n,a,h)||(f=n.Rb(),m=a.Rb(),!(Math.abs(f-m)>4*Math.max(n.I(),a.I())*h)&&l.Rz(n,a,h,!0)))},l.fV=function(n,a,h){var f=l.rc(n,a,!0);return f==4||f!=1&&f!=2&&f!=1073741824&&l.zI(n,a,h)},l.qV=function(n,a,h){var f=l.rc(n,a,!1);return f!=4&&f!=1&&f!=2&&l.DI(n,a,h,null)},l.lV=function(n,a,h,f){var m=l.rc(n,a,!1);return m!=4&&m!=1&&m!=2&&l.AI(n,a,h,f)},l.Uw=function(n,a,h,f){var m=new p.l,y=new p.l;return n.A(m),a.A(y),!!l.Ac(m,y,h)&&(m=l.rc(n,a,!1))!=4&&m!=2&&(m==1||l.wI(n,a,h,f))},l.gV=function(n,a,h){var f=l.rc(n,a,!0);return f==4||f!=1&&f!=1073741824&&l.zI(n,a,h)},l.rV=function(n,a,h,f){var m=l.rc(n,a,!1);return m!=4&&m!=1&&l.EI(n,a,h,f)},l.bV=function(n,a,h){var f=l.rc(n,a,!1);return f!=4&&f!=1&&l.yI(n,a,h,null)},l.aB=function(n,a,h,f){var m=new p.l,y=new p.l;return n.A(m),a.A(y),!!l.Ac(m,y,h)&&(m=l.rc(n,a,!1))!=4&&(m==1||l.xI(n,a,h,f))},l.eV=function(n,a,h){return p.jd.FG(n,a,h)==0},l.pV=function(n,a,h){return a=a.D(),l.CI(n,a,h)},l.ZU=function(n,a,h){return a=a.D(),l.vI(n,a,h)},l.dV=function(n,a,h){var f=l.rc(n,a,!1);if(f==4)return!0;if(f==1)return!1;f=new p.l,n.A(f),f.X(h,h);for(var m=new p.h,y=0;y<a.I();y++)if(a.D(y,m),f.contains(m)){var w=p.jd.Zd(n,m,h);if(w==1||w==2)return!1}return!0},l.oV=function(n,a,h){var f=this.rc(n,a,!1);if(f==4||f==1)return!1;f=new p.l,n.A(f),f.X(h,h);for(var m=!1,y=n,w=!1,I=0;I<a.I();I++){var M=a.Oa(I);if(f.contains(M)){if((M=p.jd.Zd(y,M,h))==2)m=!0;else if(M==1)return!1}w||(!p.Fg.Ol(n,a.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?y=n:(y=new p.Ea,n.copyTo(y),y.hj(1)),w=!0)}return!!m},l.aV=function(n,a,h){var f=this.rc(n,a,!1);if(f==4||f==1)return!1;var m=new p.l;f=new p.l;var y=new p.l;n.A(m),a.A(y),f.L(m),f.X(h,h),y=m=!1;for(var w=n,I=!1,M=0;M<a.I();M++){var T=a.Oa(M);if(f.contains(T)?(T=p.jd.Zd(w,T,h))==0?y=!0:T==1&&(m=!0):y=!0,m&&y)return!0;I||(!p.Fg.Ol(n,a.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(w=new p.Ea,n.copyTo(w),w.hj(1)),I=!0)}return!1},l.YU=function(n,a,h){var f=new p.l,m=new p.l;if(n.A(f),a.A(m),!this.Ac(f,m,h)||(m=this.rc(n,a,!1))==4)return!1;if(m==1)return!0;m=!1;for(var y=n,w=!1,I=0;I<a.I();I++){var M=a.Oa(I);if(!f.contains(M))return!1;if((M=p.jd.Zd(y,M,h))==1)m=!0;else if(M==0)return!1;w||(!p.Fg.Ol(n,a.I()-1)||n.Cb!=null&&n.Cb.Gb!=null?y=n:(y=new p.Ea,n.copyTo(y),y.hj(1)),w=!0)}return m},l.hV=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!!l.gk(f,m,h)&&((f=new p.Ea).bd(a,!1),l.Rz(n,f,h,!0))},l.cV=function(n,a,h){var f=l.rc(n,a,!1);if(f==4)return!0;if(f==1||f==2)return!1;var m=new p.l;if(f=new p.l,n.A(m),a.A(f),l.Ac(f,m,h)||(m=new p.h,f.fn(m),(a=p.jd.Zd(n,m,h))!=0)||(f.VI(m),(a=p.jd.Zd(n,m,h))!=0)||(f.gn(m),(a=p.jd.Zd(n,m,h))!=0)||(f.YI(m),(a=p.jd.Zd(n,m,h))!=0))return!1;a=n.vb(0),(m=new p.l).L(f),m.X(h,h);for(var y=0,w=n.I();y<w;y++){var I=a.read(2*y),M=a.read(2*y+1);if(m.contains(I,M))return!1}return!l.NG(n,f,h)},l.nV=function(n,a,h,f){var m=l.rc(n,a,!1);if(m==4||m==1||m==2)return!1;m=new p.l;var y=new p.l;return n.A(m),a.A(y),!l.Ac(y,m,h)&&(y.S()<=h&&y.da()<=h?(a=a.Kp(),l.CI(n,a,h)):y.S()<=h||y.da()<=h?(m=new p.Ua,y=new p.Ta,a.If(0,y),m.nf(y),a.If(2,y),m.lineTo(y),l.EI(n,m,h,f)):((m=new p.Ea).bd(a,!1),l.DI(n,m,h,f)))},l.kV=function(n,a,h,f){var m=l.rc(n,a,!1);if(m==4||m==1||m==2)return!1;m=new p.l;var y=new p.l;return n.A(m),a.A(y),!(l.Ac(y,m,h)||y.S()<=h||y.da()<=h)&&((m=new p.Ea).bd(a,!1),l.AI(n,m,h,f))},l.sV=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),l.Ac(m,f,h)},l.XU=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!!l.Ac(f,m,h)&&(f=l.rc(n,a,!1))!=4&&f!=2&&(f==1||(m.S()<=h&&m.da()<=h?(a=a.Kp(),l.vI(n,a,h)):m.S()<=h||m.da()<=h?(m=new p.Ua,f=new p.Ta,a.If(0,f),m.nf(f),a.If(2,f),m.lineTo(f),l.xI(n,m,h,null)):((m=new p.Ea).bd(a,!1),l.wI(n,m,h,null))))},l.$U=function(n,a,h,f){var m=new p.l,y=new p.l;return n.A(m),a.A(y),!(l.Ac(y,m,h)||y.da()>h&&y.S()>h||y.da()<=h&&y.S()<=h)&&(m=new p.Ua,y=new p.Ta,a.If(0,y),m.nf(y),a.If(2,y),m.lineTo(y),l.yI(n,m,h,f))},l.DV=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!(!l.gk(f,m,h)||l.rc(n,a,!1)==4)&&(!!l.ZH(n,a,h)||l.Rz(n,a,h,!1))},l.BV=function(n,a,h){return this.rc(n,a,!1)==4||!!new p.am(n,a,h,!0).next()&&!this.OG(n,a,h)},l.II=function(n,a,h){if(l.rc(n,a,!1)==4)return!1;var f=new p.ce(0);if(l.Sz(n,a,h,f)!=0)return!1;for(var m=new p.ee,y=0;y<f.size;y+=2){var w=f.read(y),I=f.read(y+1);m.Du(w,I)}return n=n.ng(),a=a.ng(),n.Gd(a,0,a.I()),l.Ow(n,m,h)},l.GI=function(n,a,h){if(l.rc(n,a,!1)==4)return!1;var f=new p.ce(0);if(l.Sz(n,a,h,f)!=0)return!1;for(var m=new p.ee,y=0;y<f.size;y+=2){var w=f.read(y),I=f.read(y+1);m.Du(w,I)}return n=n.ng(),a=a.ng(),n.Gd(a,0,a.I()),!l.Ow(n,m,h)},l.HV=function(n,a,h){return l.rc(n,a,!1)!=4&&l.QG(n,a,h)},l.FI=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!(!l.Ac(f,m,h)||l.rc(n,a,!1)==4)&&l.Am(a,n,h,!1)},l.AV=function(n,a,h){return l.rc(n,a,!1)==4||(a=a.D(),!l.Tz(n,a,h))},l.LV=function(n,a,h){return l.rc(n,a,!1)!=4&&(a=a.D(),l.Uz(n,a,h))},l.vV=function(n,a,h){return l.rc(n,a,!1)!=4&&(a=a.D(),l.MG(n,a,h))},l.zV=function(n,a,h){return l.rc(n,a,!1)==4||!l.PG(n,a,h,!1)},l.KV=function(n,a,h){if(this.rc(n,a,!1)==4)return!1;var f=n.Ha(),m=new p.l,y=new p.l,w=new p.l;n.A(m),a.A(y),m.X(h,h),y.X(h,h),w.L(m),w.Fa(y),m=null;var I=n.Cb;if(I!=null){var M=I.Gb;m=I.Bo,M==null&&(M=I=p.ua.lj(n,w))}else M=I=p.ua.lj(n,w);var T=M.getIterator(),$=null;m!=null&&($=m.getIterator());var F=new p.h,R=new p.h,j=!1,H=h*h;for(m=new p.rn(a.I()),I=0;I<a.I();I++)m.write(I,0);for(I=0;I<a.I();I++)if(a.D(I,F),w.contains(F)){if(y.L(F.x,F.y,F.x,F.y),$!=null&&($.Zi(y,h),$.next()==-1))continue;T.Zi(y,h);for(var W=T.next();W!=-1;W=T.next())if(f.Wb(M.ka(W)),(W=f.ia()).ic(W.ge(F,!1),R),p.h.zc(F,R)<=H){m.write(I,1),j=!0;break}}if(!j)return!1;for(n=n.ng(),f=new p.ee,y=new p.h,I=0;I<a.I();I++)m.read(I)!=0&&(a.D(I,y),f.Du(y.x,y.y));return this.Ow(n,f,h)},l.xV=function(n,a,h){if(this.rc(n,a,!1)==4)return!1;var f=n.Ha(),m=new p.l,y=new p.l,w=new p.l;n.A(m),a.A(y),m.X(h,h),y.X(h,h),w.L(m),w.Fa(y),m=null;var I=n.Cb;if(I!=null){var M=I.Gb;m=I.Bo,M==null&&(M=I=p.ua.lj(n,w))}else M=I=p.ua.lj(n,w);var T=M.getIterator(),$=null;m!=null&&($=m.getIterator());var F=new p.h,R=new p.h,j=!1,H=!1,W=h*h;for(m=new p.rn(a.I()),I=0;I<a.I();I++)m.write(I,0);for(I=0;I<a.I();I++)if(a.D(I,F),w.contains(F)){if(y.L(F.x,F.y,F.x,F.y),$!=null&&($.Zi(y,h),$.next()==-1)){H=!0;continue}T.Zi(y,h);for(var V=!1,Y=T.next();Y!=-1;Y=T.next())if(f.Wb(M.ka(Y)),(Y=f.ia()).ic(Y.ge(F,!1),R),p.h.zc(F,R)<=W){m.write(I,1),V=j=!0;break}V||(H=!0)}else H=!0;if(!j||!H)return!1;for(n=n.ng(),f=new p.ee,y=new p.h,I=0;I<a.I();I++)m.read(I)!=0&&(a.D(I,y),f.Du(y.x,y.y));return!this.Ow(n,f,h)},l.uV=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!(!l.Ac(f,m,h)||l.rc(n,a,!1)==4||!l.PG(n,a,h,!0))&&(n=n.ng(),!l.bI(n,a,h))},l.CV=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!(m.da()>h&&m.S()>h)&&l.gk(f,m,h)},l.yV=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!l.Ac(m,f,h)&&!l.NG(n,m,h)},l.JV=function(n,a,h){var f=new p.l,m=new p.l;if(n.A(f),a.A(m),m.da()<=h&&m.S()<=h)return m=a.Kp(),l.Uz(n,m,h);if(m.da()<=h||m.S()<=h)return m=new p.Ua,f=new p.Ta,a.If(0,f),m.nf(f),a.If(2,f),m.lineTo(f),l.II(n,m,h);n=n.Ha(),a=new p.l,f=new p.l,a.L(m),f.L(m),a.X(-h,-h),f.X(h,h),m=!1;for(var y=new p.l,w=new p.l;n.ab();)for(;n.Ia();){if(n.ia().A(y),w.L(a),w.Fa(y),!w.B()&&(w.da()>h||w.S()>h))return!1;w.L(f),w.Fa(y),w.B()||(m=!0)}return m},l.GV=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!(l.Ac(f,m,h)||l.Ac(m,f,h)||l.Ac(m,f,h)||m.da()>h&&m.S()>h||m.da()<=h&&m.S()<=h)&&(f=new p.Ua,m=new p.Ta,a.If(0,m),f.nf(m),a.If(2,m),f.lineTo(m),l.QG(n,f,h))},l.MV=function(n,a,h){var f=new p.l,m=new p.l;if(n.A(f),a.A(m),!l.Ac(m,f,h)||m.da()<=h&&m.S()<=h)return!1;if(m.da()<=h||m.S()<=h)return l.Ac(m,f,h);n=n.Ha(),(a=new p.l).L(m),a.X(-h,-h),m=!1,f=new p.l;for(var y=new p.l;n.ab();)for(;n.Ia();)n.ia().A(f),a.jm(f)?m=!0:(y.L(a),y.Fa(f),!y.B()&&(y.da()>h||y.S()>h)&&(m=!0));return m},l.tV=function(n,a,h){var f=new p.l,m=new p.l;return a.A(m),n.A(f),!(!l.Ac(f,m,h)||m.da()>h&&m.S()>h)&&(m.da()<=h&&m.S()<=h?(a=a.Kp(),l.MG(n,a,h)):(f=new p.Ua,m=new p.Ta,a.If(0,m),f.nf(m),a.If(2,m),f.lineTo(m),l.Am(f,n,h,!1)))},l.wV=function(n,a,h){var f=new p.l,m=new p.l;if(n.A(f),a.A(m),l.Ac(m,f,h)||m.da()<=h&&m.S()<=h)return!1;if(m.da()<=h||m.S()<=h)return f=new p.Ua,m=new p.Ta,a.If(0,m),f.nf(m),a.If(2,m),f.lineTo(m),l.GI(n,f,h);n=n.Ha(),a=new p.l,(f=new p.l).L(m),a.L(m),f.X(-h,-h),a.X(h,h);for(var y=m=!1,w=new p.l,I=new p.l;n.ab();)for(;n.Ia();)if(n.ia().A(w),y||a.contains(w)||(y=!0),m||(I.L(f),I.Fa(w),!I.B()&&(I.da()>h||I.S()>h)&&(m=!0)),m&&y)return!0;return!1},l.dU=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!!l.gk(f,m,h)&&(!!l.eU(n,a,h)||l.TA(n,a,h,!1,!0,!1))},l.bU=function(n,a,h){return!l.bI(n,a,h)},l.jU=function(n,a,h){return l.TA(n,a,h,!1,!1,!0)},l.$H=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!!l.Ac(f,m,h)&&l.TA(a,n,h,!0,!1,!1)},l.Ow=function(n,a,h){h*=h;for(var f=new p.h,m=new p.h,y=0;y<a.I();y++){a.D(y,m);for(var w=!1,I=0;I<n.I();I++)if(n.D(I,f),p.h.zc(f,m)<=h){w=!0;break}if(!w)return!1}return!0},l.Pw=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),l.gk(f,m,h)},l.aI=function(n,a,h){return a=a.D(),l.lt(n,a,h)},l.nU=function(n,a,h){return l.Pw(n,a,h)},l.ZT=function(n,a,h){return!l.aI(n,a,h)},l.cU=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!(m.da()>h||m.S()>h)&&l.gk(f,m,h)},l.aU=function(n,a,h){var f=new p.l,m=new p.l;if(n.A(f),a.A(m),l.Ac(m,f,h))return!1;for((a=new p.l).L(m),a.X(h,h),h=new p.h,m=0;m<n.I();m++)if(n.D(m,h),a.contains(h))return!1;return!0},l.lU=function(n,a,h){var f=new p.l,m=new p.l,y=new p.l;if(a.A(f),f.da()<=h&&f.S()<=h)return!1;if(f.da()<=h||f.S()<=h){a=new p.h;var w=!1;m.L(f),y.L(f),m.X(h,h),f.da()>h?y.X(0,-h):y.X(-h,0);for(var I=0;I<n.I();I++)if(n.D(I,a),m.contains(a)){if(f.da()>h){if(a.y>y.G&&a.y<y.H)return!1}else if(a.x>y.v&&a.x<y.C)return!1;w=!0}return w}for(m.L(f),y.L(f),m.X(h,h),y.X(-h,-h),a=new p.h,w=!1,I=0;I<n.I();I++)if(n.D(I,a),m.contains(a)){if(y.jm(a))return!1;w=!0}return w},l.mU=function(n,a,h){var f=new p.l,m=new p.l;if(n.A(f),a.A(m),!l.Ac(m,f,h))return!1;if(m.da()<=h&&m.S()<=h)return l.gk(f,m,h);if(m.da()<=h||m.S()<=h){a=!1,f=new p.l;var y=new p.l;f.L(m),y.L(m),m.da()>h?f.X(0,-h):f.X(-h,0),y.X(h,h);for(var w=new p.h,I=0;I<n.I();I++){if(n.D(I,w),!y.contains(w))return!1;m.da()>h?w.y>f.G&&w.y<f.H&&(a=!0):w.x>f.v&&w.x<f.C&&(a=!0)}return a}for(a=!1,f=new p.l,y=new p.l,f.L(m),y.L(m),f.X(-h,-h),y.X(h,h),w=new p.h,I=0;I<n.I();I++){if(n.D(I,w),!y.contains(w))return!1;f.jm(w)&&(a=!0)}return a},l.YT=function(n,a,h){var f=new p.l,m=new p.l;return n.A(f),a.A(m),!(!l.Ac(f,m,h)||m.da()>h||m.S()>h)&&(a=a.Kp(),!l.lt(n,a,h))},l.$T=function(n,a,h){var f=new p.l,m=new p.l;if(n.A(f),a.A(m),l.Ac(m,f,h)||m.da()<=h&&m.S()<=h)return!1;if(m.da()<=h||m.S()<=h){a=new p.l,f=new p.l,a.L(m),m.da()>h?a.X(0,-h):a.X(-h,0),f.L(m),f.X(h,h);for(var y=new p.h,w=!1,I=!1,M=0;M<n.I();M++)if(n.D(M,y),w||(m.da()>h?y.y>a.G&&y.y<a.H&&(w=!0):y.x>a.v&&y.x<a.C&&(w=!0)),I||f.contains(y)||(I=!0),w&&I)return!0;return!1}for(a=new p.l,f=new p.l,a.L(m),a.X(-h,-h),f.L(m),f.X(h,h),y=new p.h,I=w=!1,M=0;M<n.I();M++)if(n.D(M,y),!w&&a.jm(y)&&(w=!0),I||f.contains(y)||(I=!0),w&&I)return!0;return!1},l.rI=function(n,a,h){return p.h.zc(n,a)<=h*h},l.NU=function(n,a,h){return p.h.zc(n,a)>h*h},l.pI=function(n,a,h){return l.rI(n,a,h)},l.qI=function(n,a,h){var f=new p.l;return f.L(n),l.gk(f,a,h)},l.Tw=function(n,a,h){var f=new p.l;return f.L(a),f.X(h,h),!f.contains(n)},l.ZA=function(n,a,h){if(a.da()<=h&&a.S()<=h)return!1;var f=new p.l,m=new p.l;if(f.L(a),f.X(h,h),!f.contains(n))return!1;if(a.da()<=h||a.S()<=h){if(m.L(a),a.da()>h?m.X(0,-h):m.X(-h,0),a.da()>h){if(n.y>m.G&&n.y<m.H)return!1}else if(n.x>m.v&&n.x<m.C)return!1;return!0}return m.L(a),m.X(-h,-h),!m.jm(n)},l.$A=function(n,a,h){if(a.da()<=h&&a.S()<=h)return!0;if(a.da()<=h||a.S()<=h){var f=new p.l;f.L(a),a.da()>h?f.X(0,-h):f.X(-h,0);var m=!1;return a.da()>h?n.y>f.G&&n.y<f.H&&(m=!0):n.x>f.v&&n.x<f.C&&(m=!0),m}return(f=new p.l).L(a),f.X(-h,-h),f.jm(n)},l.MU=function(n,a,h){return l.qI(n,a,h)},l.gk=function(n,a,h){return l.Ac(n,a,h)&&l.Ac(a,n,h)},l.fk=function(n,a,h){var f=new p.l;return f.L(a),f.X(h,h),!n.isIntersecting(f)},l.YP=function(n,a,h){if(n.da()<=h&&n.S()<=h){var f=n.tf();return l.ZA(f,a,h)}if(a.da()<=h&&a.S()<=h)return f=a.tf(),l.ZA(f,n,h);if(n.da()>h&&n.S()>h&&(a.da()<=h||a.S()<=h)?f=a:(f=n,n=a),f.da()<=h||f.S()<=h){if(n.da()<=h||n.S()<=h){a=new p.zb;var m=new p.zb,y=[0,0],w=[0,0],I=new p.h;return f.fn(I),a.Ec(I),f.gn(I),a.Rc(I),n.fn(I),m.Ec(I),n.gn(I),m.Rc(I),a.Fa(m,null,y,w,h),a.Fa(m,null,null,null,h)==1&&(y[0]==0||y[1]==1||w[0]==0||w[1]==1)}return a=new p.l,m=new p.l,a.L(n),a.X(-h,-h),m.L(a),m.Fa(f),!(!m.B()&&(m.da()>h||m.S()>h))}return n.X(h,h),(m=new p.l).L(f),m.Fa(n),!(m.B()||!m.B()&&m.da()>h&&m.S()>h)},l.XP=function(n,a,h){if(l.Ac(n,a,h)||l.Ac(a,n,h)||n.da()<=h&&n.S()<=h||a.da()<=h&&a.S()<=h)return!1;if(n.da()<=h||n.S()<=h){if(a.da()>h&&a.S()>h)return!1;var f=new p.zb,m=new p.zb,y=[0,0],w=[0,0],I=new p.h;return n.fn(I),f.Ec(I),n.gn(I),f.Rc(I),a.fn(I),m.Ec(I),a.gn(I),m.Rc(I),f.Fa(m,null,y,w,h),f.Fa(m,null,null,null,h)==2&&(0<y[0]||1>y[1])&&(0<w[0]||1>w[1])}return!(a.da()<=h||a.S()<=h)&&((f=new p.l).L(n),f.Fa(a),!(f.B()||f.da()<=h||f.S()<=h))},l.eF=function(n,a,h){if(!l.Ac(n,a,h))return!1;if(n.da()<=h&&n.S()<=h)return n=n.tf(),l.$A(n,a,h);if(a.da()<=h&&a.S()<=h)return a=a.tf(),l.$A(a,n,h);if(n.da()<=h||n.S()<=h)return l.Ac(n,a,h);if(a.da()<=h||a.S()<=h){var f=new p.l;return f.L(n),f.X(-h,-h),f.jm(a)?!0:((n=new p.l).L(f),n.Fa(a),!(n.B()||n.da()<=h&&n.S()<=h))}return l.Ac(n,a,h)},l.WP=function(n,a,h){if(l.Ac(n,a,h)||l.Ac(a,n,h)||n.da()<=h&&n.S()<=h||a.da()<=h&&a.S()<=h||a.da()>h&&a.S()>h&&n.da()>h&&n.S()>h)return!1;if(n.da()>h&&n.S()>h)var f=a;else f=n,n=a;if(n.da()>h&&n.S()>h){a=new p.l;var m=new p.l;return m.L(n),m.X(-h,-h),a.L(m),a.Fa(f),!(a.B()||a.da()<=h&&a.S()<=h)}a=new p.zb,m=new p.zb;var y=[0,0],w=[0,0],I=new p.h;return f.fn(I),a.Ec(I),f.gn(I),a.Rc(I),n.fn(I),m.Ec(I),n.gn(I),m.Rc(I),a.Fa(m,null,y,w,h),a.Fa(m,null,null,null,h)==1&&0<y[0]&&1>y[1]&&0<w[0]&&1>w[1]},l.zI=function(n,a,h){var f=new p.l,m=new p.l,y=new p.am(n,a,h,!0);if(!y.next())return!0;if(this.OG(n,a,h))return!1;var w=n,I=null;a.K()==1736&&(I=a);var M=!1,T=!1;do{var $=y.pl(),F=y.jl();if(F=a.Oa(a.Ca(F)),f.L(y.oz()),f.X(h,h),f.contains(F)&&(F=p.jd.Zd(w,F,0))!=0||a.K()==1736&&($=n.Oa(n.Ca($)),m.L(y.Wy()),m.X(h,h),m.contains($)&&(F=p.jd.Zd(I,$,0))!=0))return!1;M||(!p.Fg.Ol(n,a.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?w=n:(w=new p.Ea,n.copyTo(w),w.hj(1)),M=!0),a.K()!=1736||T||(T=a,!p.Fg.Ol(T,n.ea()-1)||a.Cb!=null&&a.Cb.Gb!=null?I=a:(I=new p.Ea,T.copyTo(I),I.hj(1)),T=!0)}while(y.next());return!0},l.Ac=function(n,a,h){var f=new p.l;return f.L(n),f.X(h,h),f.contains(a)},l.ns=function(n,a,h){var f=new p.l;return f.L(a),f.X(h,h),a=new p.h,n.fn(a),!f.contains(a)||(n.VI(a),!f.contains(a)||(n.YI(a),!f.contains(a)||(n.gn(a),!f.contains(a))))},l.ZH=function(n,a,h){if(n.ea()!=a.ea()||n.I()!=a.I())return!1;var f=new p.h,m=new p.h,y=!0;h*=h;for(var w=0;w<n.ea();w++){if(n.Wc(w)!=a.Wc(w)){y=!1;break}for(var I=n.Ca(w);I<a.Wc(w);I++)if(n.D(I,f),a.D(I,m),p.h.zc(f,m)>h){y=!1;break}if(!y)break}return!!y},l.eU=function(n,a,h){if(n.I()!=a.I())return!1;var f=new p.h,m=new p.h,y=!0;h*=h;for(var w=0;w<n.I();w++)if(n.D(w,f),a.D(w,m),p.h.zc(f,m)>h){y=!1;break}return!!y},l.TA=function(n,a,h,f,m,y){var w=!1;if(n.I()>a.I()){f&&(f=!1,w=!0);var I=a}else I=n,n=a;if(a=null,m||y||w){a=new p.rn(n.I());for(var M=0;M<n.I();M++)a.write(M,0)}M=new p.l;var T=new p.l,$=new p.l;I.A(M),n.A(T),M.X(h,h),T.X(h,h),$.L(M),$.Fa(T),T=new p.h;for(var F=new p.h,R=!0,j=p.ua.jE(n,$),H=j.getIterator(),W=h*h,V=0;V<I.I();V++)if(I.D(V,T),$.contains(T)){var Y=!1;M.L(T.x,T.y,T.x,T.y),H.Zi(M,h);for(var se=H.next();se!=-1&&(se=j.ka(se),n.D(se,F),!(p.h.zc(T,F)<=W&&((m||y||w)&&a.write(se,1),Y=!0,f)));se=H.next());if(!Y&&(R=!1,m||f))return!1}else{if(m||f)return!1;R=!1}if(y&&R)return!1;if(f)return!0;for(M=0;M<n.I();M++)if(a.read(M)==1){if(y)return!0}else if(m||w)return!1;return!y},l.bI=function(n,a,h){if(n.I()>a.I())var f=a;else f=n,n=a;a=new p.l;var m=new p.l,y=new p.l;f.A(a),n.A(m),a.X(h,h),m.X(h,h),y.L(a),y.Fa(m),m=new p.h;for(var w=new p.h,I=h*h,M=p.ua.jE(n,y),T=M.getIterator(),$=0;$<f.I();$++)if(f.D($,m),y.contains(m)){a.L(m.x,m.y,m.x,m.y),T.Zi(a,h);for(var F=T.next();F!=-1;F=T.next())if(n.D(M.ka(F),w),p.h.zc(m,w)<=I)return!0}return!1},l.Rz=function(n,a,h,f){return l.Am(n,a,h,f)&&l.Am(a,n,h,f)},l.Am=function(n,a,h,f){function m(He,Pe){return F.LE(He,Pe)}var y,w=!0,I=[0,0],M=[0,0],T=0,$=new p.ja(0),F=new l,R=new p.l,j=new p.l,H=new p.l;n.A(R),a.A(j),R.X(h,h),j.X(h,h),H.L(R),H.Fa(j),n=n.Ha(),j=a.Ha();var W=null,V=W=null,Y=a.Cb;for(Y!=null?(W=Y.Gb,V=Y.Bo,W==null&&(W=p.ua.lj(a,H))):W=p.ua.lj(a,H),a=W.getIterator(),Y=null,V!=null&&(Y=V.getIterator());n.ab();)for(;n.Ia();){var se=!1,re=n.ia();if(re.A(R),!R.isIntersecting(H)||Y!=null&&(Y.Zi(R,h),Y.next()==-1))return!1;for(V=re.Rb(),a.Wo(re,h),y=a.next();y!=-1;y=a.next()){j.Wb(W.ka(y)),y=j.ia();var he=re.Fa(y,null,I,M,h);if(he==2&&(!f||M[0]<=M[1])){he=I[0];var ue=I[1],we=M[0],Te=M[1];if(he*V<=h&&(1-ue)*V<=h){se=!0,T=0,$.resize(0),F.th.length=0;var Ee=n.xb();for(we=!0;we;){if(n.Ia()){if(V=(re=n.ia()).Rb(),(he=re.Fa(y,null,I,M,h))==2&&(!f||M[0]<=M[1])&&(he=I[0],ue=I[1],he*V<=h&&(1-ue)*V<=h)){Ee=n.xb();continue}if(j.Ia()&&(y=j.ia(),(he=re.Fa(y,null,I,M,h))==2&&(!f||M[0]<=M[1])&&(he=I[0],ue=I[1],he*V<=h&&(1-ue)*V<=h))){Ee=n.xb();continue}}we=!1}Ee!=n.xb()&&(n.Wb(Ee),n.ia());break}Ee=n.xb(),y=x.construct(Ee,n.gb,he,ue,j.xb(),j.gb,we,Te),F.th.push(y),$.add($.size)}}if(!se){if(T==F.th.length)return!1;for(1<$.size-T&&$.Wd(T,$.size,m),se=0;T<F.th.length;T++)if(!((y=F.th[$.get(T)]).Mj<se&&y.Ui<se)){if(V*(y.Mj-se)>h)return!1;if(V*(1-(se=y.Ui))<=h||se==1)break}if(V*(1-se)>h)return!1;T=0,$.resize(0),F.th.length=0}}return w},l.QG=function(n,a,h){if(1>l.Sz(n,a,h,null))return!1;var f=new p.l,m=new p.l;n.A(f),a.A(m);var y=l.ns(f,m,h);return f=l.ns(m,f,h),!(!y||!f)||(y&&!f?!l.Am(a,n,h,!1):f&&!y?!l.Am(n,a,h,!1):!l.Am(n,a,h,!1)&&!l.Am(a,n,h,!1))},l.Sz=function(n,a,h,f){function m(Ve,Zt){return R.LE(Ve,Zt)}if(n.sz()>a.sz())var y=a,w=n;else y=n,w=a;n=y.Ha(),a=w.Ha();var I=[0,0],M=[0,0],T=-1,$=0,F=new p.ja(0),R=new l,j=new p.l,H=new p.l,W=new p.l;y.A(j),w.A(H),j.X(h,h),H.X(h,h),W.L(j),W.Fa(H),y=null,f!=null&&(y=new p.h);var V=H=H=null,Y=w.Cb;for(Y!=null?(H=Y.Gb,V=Y.Bo,H==null&&(H=p.ua.lj(w,W))):H=p.ua.lj(w,W),w=H.getIterator(),Y=null,V!=null&&(Y=V.getIterator());n.ab();)for(V=0;n.Ia();){var se=n.ia();if(se.A(j),j.isIntersecting(W)){if(Y!=null&&(Y.Zi(j,h),Y.next()==-1))continue;var re=se.Rb();w.Wo(se,h);for(var he=w.next();he!=-1;he=w.next()){var ue=H.ka(he);a.Wb(ue);var we=a.ia(),Te=we.Rb(),Ee=se.Fa(we,null,I,M,h);if(0<Ee){he=I[0],T=M[0];var He=Ee==2?I[1]:NaN,Pe=Ee==2?M[1]:NaN;if(Ee==2){if(re*(He-he)>h)return 1;var lt=re*(He-he);if(a.Ia()){if(we=a.ia(),(Ee=se.Fa(we,null,I,null,h))==2){Ee=I[0];var et=I[1];if(lt+(Ee=re*(et-Ee))>h)return 1}a.Wb(ue),a.ia()}if(!a.xm()){if(a.ni(),we=a.ni(),(Ee=se.Fa(we,null,I,null,h))==2&&(Ee=I[0],lt+(Ee=re*((et=I[1])-Ee))>h))return 1;a.Wb(ue),a.ia()}if(n.Ia()){if(ue=n.xb(),(Ee=(se=n.ia()).Fa(we,null,I,null,h))==2&&(Ee=I[0],lt+(Ee=re*((et=I[1])-Ee))>h))return 1;n.Wb(ue),n.ia()}if(!n.xm()){if(ue=n.xb(),n.ni(),(Ee=(se=n.ni()).Fa(we,null,I,null,h))==2&&(Ee=I[0],lt+(Ee=Te*((et=I[1])-Ee))>h))return 1;n.Wb(ue),n.ia()}we=x.construct(n.xb(),n.gb,he,He,a.xb(),a.gb,T,Pe),R.th.push(we),F.add(F.size)}T=0,f!=null&&(se.ic(he,y),f.add(y.x),f.add(y.y))}}if($<R.th.length){for(F.Wd($,F.size,m),se=0,he=R.th[F.get($)].Om;$<R.th.length;$++)if(!((we=R.th[F.get($)]).Mj<se&&we.Ui<se))if(re*(we.Mj-se)>h)V=re*(we.Ui-we.Mj),se=we.Ui,he=we.Om;else{if(we.Om!=he?(V=re*(we.Ui-we.Mj),he=we.Om):V+=re*(we.Ui-we.Mj),V>h)return 1;if((se=we.Ui)==1)break}re*(1-se)>h&&(V=0),$=0,F.resize(0),R.th.length=0}}}return T},l.OG=function(n,a,h){var f=n.Ha(),m=a.Ha();for(n=new p.am(n,a,h,!1);n.next();){a=n.pl();var y=n.jl();if(f.Wb(a),m.Wb(y),a=f.ia(),0<m.ia().Fa(a,null,null,null,h))return!0}return!1},l.PG=function(n,a,h,f){var m=n.Ha(),y=new p.l,w=new p.l,I=new p.l;n.A(y),a.A(w),y.X(h,h),y.contains(w),w.X(h,h),I.L(y),I.Fa(w),(y=n.Cb)!=null?(y=y.Gb)==null&&(y=p.ua.lj(n,I)):y=p.ua.lj(n,I),n=y.getIterator();for(var M=new p.h,T=new p.h,$=h*h,F=0;F<a.I();F++)if(a.D(F,M),I.contains(M)){w.L(M.x,M.y,M.x,M.y),n.Zi(w,h);for(var R=!1,j=n.next();j!=-1;j=n.next())if(m.Wb(y.ka(j)),(j=m.ia()).ic(j.ge(M,!1),T),p.h.zc(T,M)<=$){R=!0;break}if(f){if(!R)return!1}else if(R)return!0}return!!f},l.Tz=function(n,a,h){var f=new p.h,m=h*h,y=n.Ha();if((n=n.Cb)!=null&&(n=n.Gb)!=null){var w=new p.l;for(w.L(a),w=(h=n.HF(w,h)).next();w!=-1;w=h.next())if(y.Wb(n.ka(w)),y.Ia()){var I=(w=y.ia()).ge(a,!1);if(w.ic(I,f),p.h.zc(a,f)<=m)return!0}return!1}for(n=new p.l;y.ab();)for(;y.Ia();)if((w=y.ia()).A(n),n.X(h,h),n.contains(a)&&(I=w.ge(a,!1),w.ic(I,f),p.h.zc(a,f)<=m))return!0;return!1},l.MG=function(n,a,h){return l.Tz(n,a,h)&&!l.Uz(n,a,h)},l.Uz=function(n,a,h){return n=n.ng(),!l.lt(n,a,h)},l.NG=function(n,a,h){if(n.vm()){var f=new p.zb(a.v,a.G,a.v,a.H),m=new p.zb(a.v,a.H,a.C,a.H),y=new p.zb(a.C,a.H,a.C,a.G);for(a=new p.zb(a.C,a.G,a.v,a.G),n=n.Ha();n.ab();)for(;n.Ia();){var w=n.ia();if(w.isIntersecting(f,h)||w.isIntersecting(m,h)||w.isIntersecting(y,h)||w.isIntersecting(a,h))return!0}}else{(f=new p.l).L(a),f.X(h,h),h=n.vb(0),m=new p.h,y=new p.h,a=new p.h,w=new p.h;for(var I=0,M=n.ea();I<M;I++)for(var T=!0,$=n.Ca(I),F=n.Wc(I);$<F;$++)if(T)h.uc(2*$,y),T=!1;else{if(h.uc(2*$,m),a.N(y),w.N(m),f.uy(a,w)!=0)return!0;y.N(m)}}return!1},l.rc=function(n,a,h){var f=n.K(),m=a.K();if(p.ba.zj(f)){var y=n.Cb;if(y!=null&&(y=y.Hk)!=null)if(m==33){var w=a.D();if((w=y.Uo(w.x,w.y))==1)return 1;if(w==0)return 4}else{if(w=new p.l,a.A(w),(w=y.To(w))==1)return 1;if(w==0)return 4;if(h&&p.ba.zj(m)&&l.CE(a,y))return 1073741824}}if(p.ba.zj(m)&&(y=a.Cb)!=null&&(y=y.Hk)!=null)if(f==33){if(n=n.D(),(w=y.Uo(n.x,n.y))==1)return 2;if(w==0)return 4}else{if(a=new p.l,n.A(a),(w=y.To(a))==1)return 2;if(w==0)return 4;if(h&&p.ba.zj(f)&&l.CE(n,y))return 1073741824}return 0},l.CE=function(n,a){for(var h=n.I(),f=new p.h,m=0;m<h;m++)if(n.D(m,f),a.Uo(f.x,f.y)==1)return!0;return!1},l.DI=function(n,a,h,f){for(var m=1<=n.qm(0)&&1<=a.qm(0),y=n.Ha(),w=a.Ha(),I=[0,0],M=[0,0],T=new p.am(n,a,h,!1),$=!1;T.next();){var F=T.pl(),R=T.jl();if(y.Wb(F),w.Wb(R),F=y.ia(),(R=w.ia().Fa(F,null,M,I,h))==2){if($=I[0],R=I[1],F=F.Rb(),m&&(R-$)*F>h)return!1;$=!0}else if(R!=0){if($=I[0],F=M[0],0<$&&1>$&&0<F&&1>F)return!1;$=!0}}return!!$&&(y=new p.l,w=new p.l,m=new p.l,n.A(y),a.A(w),y.X(1e3*h,1e3*h),w.X(1e3*h,1e3*h),m.L(y),m.Fa(w),!(10<n.I()&&(n=p.Vd.clip(n,m,h,0),n.B())||10<a.I()&&(a=p.Vd.clip(a,m,h,0),a.B()))&&p.cm.st(n,a,h,"F********",f))},l.AI=function(n,a,h,f){var m=1<=n.qm(0)&&1<=a.qm(0),y=new p.l,w=new p.l,I=new p.l;n.A(y),a.A(w);for(var M=!1,T=l.ns(y,w,h),$=l.ns(w,y,h),F=n.Ha(),R=a.Ha(),j=[0,0],H=[0,0],W=new p.am(n,a,h,!1);W.next();){var V=W.pl(),Y=W.jl();if(F.Wb(V),R.Wb(Y),Y=F.ia(),(V=R.ia().Fa(Y,null,H,j,h))==2){V=j[0];var se=j[1];if(Y=Y.Rb(),m&&(se-V)*Y>h&&(M=!0,T&&$))return!0}else if(V!=0&&(V=j[0],Y=H[0],0<V&&1>V&&0<Y&&1>Y))return!0}if(m=new p.l,F=new p.l,m.L(y),m.X(1e3*h,1e3*h),F.L(w),F.X(1e3*h,1e3*h),I.L(m),I.Fa(F),y="",y=M?y+"**":y+"T*",T){if(10<a.I()&&(a=p.Vd.clip(a,I,h,0)).B())return!1;y+="****"}else y+="T***";if($){if(10<n.I()&&(n=p.Vd.clip(n,I,h,0)).B())return!1;y+="***"}else y+="T**";return p.cm.st(n,a,h,y.toString(),f)},l.wI=function(n,a,h,f){var m=[!1],y=l.uI(n,a,h,m);return m[0]?y:(m=new p.l,a.A(m),m.X(1e3*h,1e3*h),!(10<n.I()&&(n=p.Vd.clip(n,m,h,0),n.B()))&&p.cm.Uw(n,a,h,f))},l.uI=function(n,a,h,f){f[0]=!1;for(var m=n.Ha(),y=a.Ha(),w=[0,0],I=[0,0],M=new p.am(n,a,h,!1),T=!1;M.next();){var $=M.pl(),F=M.jl();if(m.Wb($,-1),y.Wb(F,-1),$=m.ia(),($=y.ia().Fa($,null,I,w,h))!=0&&(T=!0,$==1&&($=w[0],F=I[0],0<$&&1>$&&0<F&&1>F)))return f[0]=!0,!1}if(!T){for(f[0]=!0,w=new p.l,n.A(w),w.X(h,h),M=n,T=!1,I=new p.l,f=0,m=a.ea();f<m;f++)if(0<a.Ka(f)){if(a.Tj(f,I),!w.isIntersecting(I)||(y=a.Oa(a.Ca(f)),(y=p.Fg.ym(M,y,0))==0))return!1;T||(!p.Fg.Ol(n,a.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?M=n:(y=new p.Ea,n.copyTo(y),y.hj(1),M=y),T=!0)}if(n.ea()==1||a.K()==1607)return!0;for(w=new p.l,a.A(w),w.X(h,h),I=a,M=!1,h=new p.l,f=0,m=n.ea();f<m;f++)if(0<n.Ka(f)){if(n.Tj(f,h),w.isIntersecting(h)&&(y=n.Oa(n.Ca(f)),(y=p.Fg.ym(I,y,0))==1))return!1;M||(!p.Fg.Ol(a,n.ea()-1)||a.Cb!=null&&a.Cb.Gb!=null?I=a:(y=new p.Ea,a.copyTo(y),y.hj(1),I=y),M=!0)}return!0}return!1},l.EI=function(n,a,h,f){for(var m=n.Ha(),y=a.Ha(),w=[0,0],I=[0,0],M=new p.am(n,a,h,!1),T=!1;M.next();){var $=M.pl(),F=M.jl();if(m.Wb($),y.Wb(F),$=m.ia(),($=y.ia().Fa($,null,I,w,h))==2)T=!0;else if($!=0){if(T=w[0],$=I[0],0<T&&1>T&&0<$&&1>$)return!1;T=!0}}return!!T&&(y=new p.l,w=new p.l,m=new p.l,n.A(y),a.A(w),y.X(1e3*h,1e3*h),w.X(1e3*h,1e3*h),m.L(y),m.Fa(w),!(10<n.I()&&(n=p.Vd.clip(n,m,h,0),n.B())||10<a.I()&&(a=p.Vd.clip(a,m,h,0),a.B()))&&p.cm.bn(n,a,h,"F********",f))},l.yI=function(n,a,h,f){for(var m=n.Ha(),y=a.Ha(),w=[0,0],I=[0,0],M=new p.am(n,a,h,!1),T=!1;M.next();){var $=M.pl(),F=M.jl();if(m.Wb($),y.Wb(F),$=m.ia(),($=y.ia().Fa($,null,I,w,h))==2)T=!0;else if($!=0){if(T=w[0],$=I[0],0<T&&1>T&&0<$&&1>$)return!0;T=!0}}return!!T&&(y=new p.l,w=new p.l,I=new p.l,M=new p.l,m=new p.l,n.A(y),a.A(w),l.ns(w,y,h)?(I.L(y),I.X(1e3*h,1e3*h),M.L(w),M.X(1e3*h,1e3*h),m.L(I),m.Fa(M),!(10<n.I()&&(n=p.Vd.clip(n,m,h,0),n.B())||10<a.I()&&(a=p.Vd.clip(a,m,h,0),a.B()))&&(h=p.cm.bn(n,a,h,"T********",f))):h=p.cm.bn(n,a,h,"T*****T**",f))},l.xI=function(n,a,h,f){var m=[!1],y=l.uI(n,a,h,m);return m[0]?y:(m=new p.l,a.A(m),m.X(1e3*h,1e3*h),!(10<n.I()&&(n=p.Vd.clip(n,m,h,0),n.B()))&&p.cm.aB(n,a,h,f))},l.vI=function(n,a,h){return p.jd.Zd(n,a,h)==1},l.CI=function(n,a,h){return p.jd.Zd(n,a,h)==2},l.lt=function(n,a,h){var f=new p.h;h*=h;for(var m=0;m<n.I();m++)if(n.D(m,f),p.h.zc(f,a)<=h)return!1;return!0},l.prototype.LE=function(n,a){return n=this.th[n],a=this.th[a],n.Om<a.Om||n.Om==a.Om&&(n.rw<a.rw||n.rw==a.rw&&(n.Mj<a.Mj||n.Mj==a.Mj&&(n.Ui<a.Ui||n.Ui==a.Ui&&n.wH<a.wH)))?-1:1},l}();p.vd=d}(Q||(Q={})),function(p){var P,x,d;(x=P||(P={}))[x.InteriorInterior=0]="InteriorInterior",x[x.InteriorBoundary=1]="InteriorBoundary",x[x.InteriorExterior=2]="InteriorExterior",x[x.BoundaryInterior=3]="BoundaryInterior",x[x.BoundaryBoundary=4]="BoundaryBoundary",x[x.BoundaryExterior=5]="BoundaryExterior",x[x.ExteriorInterior=6]="ExteriorInterior",x[x.ExteriorBoundary=7]="ExteriorBoundary",x[x.ExteriorExterior=8]="ExteriorExterior",function(l){l[l.AreaAreaPredicates=0]="AreaAreaPredicates",l[l.AreaLinePredicates=1]="AreaLinePredicates",l[l.LineLinePredicates=2]="LineLinePredicates",l[l.AreaPointPredicates=3]="AreaPointPredicates",l[l.LinePointPredicates=4]="LinePointPredicates",l[l.PointPointPredicates=5]="PointPointPredicates"}(d||(d={})),P=function(){function l(){this.me=0,this.j=new p.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return l.tB=function(n,a,h,f,m){if(f.length!=9)throw p.i.ga("relation string length has to be 9 characters");for(var y=0;9>y;y++){var w=f.charAt(y);if(w!="*"&&w!="T"&&w!="F"&&w!="0"&&w!="1"&&w!="2")throw p.i.ga("relation string")}if((y=this.HR(f,n.Eb(),a.Eb()))!=0)return p.vd.uB(n,a,h,y,m);y=new p.l,n.A(y),w=new p.l,a.A(w);var I=new p.l;if(I.L(y),I.$b(w),h=p.ua.Xd(h,I,!1),n=this.RE(n,h),a=this.RE(a,h),n.B()||a.B())return this.pW(n,a,f);switch(y=a.K(),w=!1,n.K()){case 1736:switch(y){case 1736:w=this.st(n,a,h,f,m);break;case 1607:w=this.bn(n,a,h,f,m);break;case 33:w=this.rt(n,a,h,f);break;case 550:w=this.qt(n,a,h,f,m)}break;case 1607:switch(y){case 1736:w=this.bn(a,n,h,this.aq(f),m);break;case 1607:w=this.bB(n,a,h,f,m);break;case 33:w=this.ut(n,a,h,f,m);break;case 550:w=this.tt(n,a,h,f,m)}break;case 33:switch(y){case 1736:w=this.rt(a,n,h,this.aq(f));break;case 1607:w=this.ut(a,n,h,this.aq(f),m);break;case 33:w=this.VU(n,a,h,f);break;case 550:w=this.mt(a,n,h,this.aq(f))}break;case 550:switch(y){case 1736:w=this.qt(a,n,h,this.aq(f),m);break;case 1607:w=this.tt(a,n,h,this.aq(f),m);break;case 550:w=this.UA(n,a,h,f,m);break;case 33:w=this.mt(n,a,h,f)}break;default:w=!1}return w},l.st=function(n,a,h,f,m){var y=new l;y.$i(),y.dj(f),y.sJ();var w=new p.l,I=new p.l;return n.A(w),a.A(I),f=!1,p.vd.fk(w,I,h)&&(y.Eu(n,a),f=!0),f||((w=p.vd.rc(n,a,!1))==4?(y.Eu(n,a),f=!0):w==1?(y.hy(a),f=!0):w==2&&(y.UD(n),f=!0)),f||(n=(f=new p.hd).Ib(n),a=f.Ib(a),y.Yo(f,h,m),y.Dp(n,a),y.j.Wg()),l.hg(y.J,y.Yc)},l.Uw=function(n,a,h,f){var m=new l;m.$i(),m.dj("T*****F**"),m.sJ();var y=new p.l,w=new p.l;n.A(y),a.A(w);var I=!1;return p.vd.fk(y,w,h)&&(m.Eu(n,a),I=!0),I||((y=p.vd.rc(n,a,!1))==4?(m.Eu(n,a),I=!0):y==1?(m.hy(a),I=!0):y==2&&(m.UD(n),I=!0)),I?this.hg(m.J,m.Yc):(n=(I=new p.hd).Ib(n),y=I.Ib(a),p.Vk.W(I,h,f,!1),h=I.Ke(y).ng(),I.Ip(0,!0,!0),p.tn.W(I,n,-1,!1,f),I.I(n)!=0&&(p.tn.W(I,y,-1,!1,f),m.gr(I,f),(a=I.I(y)==0)||(m.Dp(n,y),m.j.Wg(),y=this.hg(m.J,m.Yc))?(n=I.Ke(n),n=(I=new p.hd).Ib(n),y=I.Ib(h),m.gr(I,f),m.me=0,m.$i(),m.dj(a?"T*****F**":"******F**"),m.DB(),m.Dp(n,y),m.j.Wg(),this.hg(m.J,m.Yc)):y))},l.bn=function(n,a,h,f,m){var y=new l;y.$i(),y.dj(f),y.DB();var w=new p.l,I=new p.l;return n.A(w),a.A(I),f=!1,p.vd.fk(w,I,h)&&(y.Fu(n,a),f=!0),f||((w=p.vd.rc(n,a,!1))==4?(y.Fu(n,a),f=!0):w==1&&(y.VD(a),f=!0)),f||(n=(f=new p.hd).Ib(n),a=f.Ib(a),y.Yo(f,h,m),y.mh=y.j.Fp(),l.Lw(a,y.j,y.mh),y.Dp(n,a),y.j.Gp(y.mh),y.j.Wg()),l.hg(y.J,y.Yc)},l.aB=function(n,a,h,f){var m=new l;m.$i(),m.dj("T*****F**"),m.DB();var y=new p.l,w=new p.l;n.A(y),a.A(w);var I=!1;return p.vd.fk(y,w,h)&&(m.Fu(n,a),I=!0),I||((y=p.vd.rc(n,a,!1))==4?(m.Fu(n,a),I=!0):y==1&&(m.VD(a),I=!0)),I?this.hg(m.J,m.Yc):(n=(I=new p.hd).Ib(n),a=I.Ib(a),m.Yo(I,h,f),I.I(n)!=0&&(m.Dp(n,a),m.j.Wg(),this.hg(m.J,m.Yc)))},l.qt=function(n,a,h,f,m){var y=new l;y.$i(),y.dj(f),y.tJ();var w=new p.l,I=new p.l;return n.A(w),a.A(I),f=!1,p.vd.fk(w,I,h)&&(y.Gu(n),f=!0),f||((w=p.vd.rc(n,a,!1))==4?(y.Gu(n),f=!0):w==1&&(y.uN(),f=!0)),f||(n=(f=new p.hd).Ib(n),a=f.Ib(a),y.Yo(f,h,m),y.By(n,a),y.j.Wg()),l.hg(y.J,y.Yc)},l.bB=function(n,a,h,f,m){var y=new l;y.$i(),y.dj(f),y.$W(),f=new p.l;var w=new p.l;n.A(f),a.A(w);var I=!1;return p.vd.fk(f,w,h)&&(y.KG(n,a),I=!0),I||p.vd.rc(n,a,!1)!=4||(y.KG(n,a),I=!0),I||(n=(f=new p.hd).Ib(n),a=f.Ib(a),y.Yo(f,h,m),y.$h=y.j.Fp(),y.mh=y.j.Fp(),l.Lw(n,y.j,y.$h),l.Lw(a,y.j,y.mh),y.Dp(n,a),y.j.Gp(y.$h),y.j.Gp(y.mh),y.j.Wg()),l.hg(y.J,y.Yc)},l.tt=function(n,a,h,f,m){var y=new l;y.$i(),y.dj(f),y.HJ(),f=new p.l;var w=new p.l;n.A(f),a.A(w);var I=!1;return p.vd.fk(f,w,h)&&(y.Qz(n),I=!0),I||p.vd.rc(n,a,!1)!=4||(y.Qz(n),I=!0),I||(n=(f=new p.hd).Ib(n),a=f.Ib(a),y.Yo(f,h,m),y.$h=y.j.Fp(),l.Lw(n,y.j,y.$h),y.By(n,a),y.j.Gp(y.$h),y.j.Wg()),l.hg(y.J,y.Yc)},l.UA=function(n,a,h,f,m){var y=new l;y.$i(),y.dj(f),y.MJ(),f=new p.l;var w=new p.l;n.A(f),a.A(w);var I=!1;return p.vd.fk(f,w,h)&&(y.tI(),I=!0),I||(n=(f=new p.hd).Ib(n),a=f.Ib(a),y.Yo(f,h,m),y.By(n,a),y.j.Wg()),l.hg(y.J,y.Yc)},l.rt=function(n,a,h,f){var m=new l;m.$i(),m.dj(f),m.tJ();var y=new p.l;n.A(y),a=a.D();var w=!1;return p.vd.Tw(a,y,h)&&(m.Gu(n),w=!0),w||((h=p.jd.Zd(n,a,h))==1?(m.J[0]=0,m.J[2]=2,m.J[3]=-1,m.J[5]=1,m.J[6]=-1):h==2?(m.J[6]=-1,n.He()!=0?(m.J[0]=-1,m.J[3]=0,m.J[2]=2,m.J[5]=1):(m.J[0]=0,m.J[3]=-1,m.J[5]=-1,h=new p.l,n.A(h),m.J[2]=h.da()==0&&h.S()==0?-1:1)):m.Gu(n)),this.hg(m.J,f)},l.ut=function(n,a,h,f,m){var y=new l;y.$i(),y.dj(f),y.HJ();var w=new p.l;n.A(w),f=a.D();var I=!1;if(p.vd.Tw(f,w,h)&&(y.Qz(n),I=!0),!I){w=null;var M=I=!1;(y.fa[0]||y.fa[6])&&(p.vd.Tz(n,f,h)?(y.fa[0]&&(w=p.si.im(n,m),M=!p.vd.lt(w,f,h),I=!0,y.J[0]=M?-1:0),y.J[6]=-1):(y.J[0]=-1,y.J[6]=0)),y.fa[3]&&(w!=null&&w.B()?y.J[3]=-1:(I||(w==null&&(w=p.si.im(n,m)),M=!p.vd.lt(w,f,h),I=!0),y.J[3]=M?0:-1)),y.fa[5]&&(w!=null&&w.B()?y.J[5]=-1:I&&!M?y.J[5]=0:(w==null&&(w=p.si.im(n,m)),m=p.vd.Pw(w,a,h),y.J[5]=m?-1:0)),y.fa[2]&&(n.Rb()!=0?y.J[2]=1:((m=new p.ee(n.description)).Gd(n,0,n.I()),n=p.vd.Pw(m,a,h),y.J[2]=n?-1:0))}return this.hg(y.J,y.Yc)},l.mt=function(n,a,h,f){var m=new l;m.$i(),m.dj(f),m.MJ();var y=new p.l;n.A(y),a=a.D();var w=!1;if(p.vd.Tw(a,y,h)&&(m.tI(),w=!0),!w){y=!1,w=!0,h*=h;for(var I=0;I<n.I();I++){var M=n.Oa(I);if(p.h.zc(M,a)<=h?y=!0:w=!1,y&&!w)break}y?(m.J[0]=0,m.J[2]=w?-1:0,m.J[6]=-1):(m.J[0]=-1,m.J[2]=0,m.J[6]=0)}return l.hg(m.J,f)},l.VU=function(n,a,h,f){n=n.D(),a=a.D();for(var m=[],y=0;9>y;y++)m[y]=-1;return p.h.zc(n,a)<=h*h?m[0]=0:(m[2]=0,m[6]=0),m[8]=2,l.hg(m,f)},l.hg=function(n,a){for(var h=0;9>h;h++)switch(a.charAt(h)){case"T":if(n[h]==-1)return!1;break;case"F":if(n[h]!=-1)return!1;break;case"0":if(n[h]!=0)return!1;break;case"1":if(n[h]!=1)return!1;break;case"2":if(n[h]!=2)return!1}return!0},l.pW=function(n,a,h){var f=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(n.B()&&a.B()){for(var m=0;9>m;m++)f[m]=-1;return this.hg(f,h)}return m=!1,n.B()&&(n=a,m=!0),f[0]=-1,f[1]=-1,f[3]=-1,f[4]=-1,f[6]=-1,f[7]=-1,f[8]=2,a=n.K(),p.ba.Ic(a)?a==1736?n.He()!=0?(f[2]=2,f[5]=1):(f[5]=-1,a=new p.l,n.A(a),f[2]=a.da()==0&&a.S()==0?0:1):(a=n.Rb()!=0,f[2]=a?1:0,f[5]=p.si.cq(n)?0:-1):(f[2]=0,f[5]=-1),m&&this.qK(f),this.hg(f,h)},l.HR=function(n,a,h){return l.ZP(n)?3:l.PP(n)?4:l.ZX(n,a,h)?8:l.xP(n,a,h)?16:l.$O(n)?1:l.zU(n,a,h)?32:0},l.ZP=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="F"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="F"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},l.PP=function(n){return n.charAt(0)=="F"&&n.charAt(1)=="F"&&n.charAt(2)=="*"&&n.charAt(3)=="F"&&n.charAt(4)=="F"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},l.ZX=function(n,a,h){return(a!=0||h!=0)&&((a!=2||h!=2)&&(n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="T"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"||a==1&&h==1&&n.charAt(0)=="F"&&n.charAt(1)=="T"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")||h!=0&&n.charAt(0)=="F"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="T"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*")},l.xP=function(n,a,h){return a>h?n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*":a==1&&h==1&&n.charAt(0)=="0"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="*"&&n.charAt(7)=="*"&&n.charAt(8)=="*"},l.$O=function(n){return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="*"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="F"&&n.charAt(7)=="F"&&n.charAt(8)=="*"},l.zU=function(n,a,h){if(a==h){if(a!=1)return n.charAt(0)=="T"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*";if(n.charAt(0)=="1"&&n.charAt(1)=="*"&&n.charAt(2)=="T"&&n.charAt(3)=="*"&&n.charAt(4)=="*"&&n.charAt(5)=="*"&&n.charAt(6)=="T"&&n.charAt(7)=="*"&&n.charAt(8)=="*")return!0}return!1},l.Lw=function(n,a,h){n=a.Ma(n);for(var f=a.Oe;f!=-1;f=a.Tf(f))if((a.yd(f)&n)!=0){var m=a.Je(f);if(m==-1)a.pn(f,h,0);else{var y=m,w=0;do(a.fh(y)&n)!=0&&w++,y=a.kc(a.ya(y));while(y!=m);a.pn(f,h,w)}}},l.aq=function(n){var a=""+n.charAt(0);return a+=n.charAt(3),a+=n.charAt(6),a+=n.charAt(1),a+=n.charAt(4),a+=n.charAt(7),a+=n.charAt(2),(a+=n.charAt(5))+n.charAt(8)},l.prototype.$i=function(){for(var n=0;9>n;n++)this.J[n]=-2,this.$a[n]=-2},l.qK=function(n){var a=n[1],h=n[2],f=n[5];n[1]=n[3],n[2]=n[6],n[5]=n[7],n[3]=a,n[6]=h,n[7]=f},l.prototype.dj=function(n){for(this.Yc=n,n=0;9>n;n++)this.Yc.charAt(n)!="*"?(this.fa[n]=!0,this.me++):this.fa[n]=!1},l.prototype.PJ=function(){for(var n=0;9>n;n++)this.fa[n]&&this.J[n]==-2&&(this.J[n]=-1,this.fa[n]=!1)},l.prototype.qc=function(n){return this.J[n]!=-2&&(this.J[n]==-1?(this.fa[n]=!1,this.me--,!0):this.Yc.charAt(n)!="T"&&this.Yc.charAt(n)!="F"?!(this.J[n]<this.$a[n])&&(this.fa[n]=!1,this.me--,!0):(this.fa[n]=!1,this.me--,!0))},l.prototype.sJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},l.prototype.DB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},l.prototype.$W=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},l.prototype.tJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},l.prototype.HJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},l.prototype.MJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.me--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.me--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.me--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.me--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.me--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.me--)},l.prototype.sN=function(n,a,h){var f=!0;return this.fa[0]&&(this.xS(n,a,h),f=f&&this.qc(0)),this.fa[1]&&(this.nG(n,a,1),f=f&&this.qc(1)),this.fa[2]&&(this.oG(n,a,h,2),f=f&&this.qc(2)),this.fa[3]&&(this.nG(n,h,3),f=f&&this.qc(3)),this.fa[4]&&(this.wN(n,a,h),f=f&&this.qc(4)),this.fa[5]&&(this.$D(n,h,5),f=f&&this.qc(5)),this.fa[6]&&(this.oG(n,h,a,6),f=f&&this.qc(6)),this.fa[7]&&(this.$D(n,a,7),f=f&&this.qc(7)),f},l.prototype.Eu=function(n,a){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(a,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},l.prototype.Hr=function(n,a,h,f,m){a==-1&&f==-1||((h!="T"&&h!="F"&&a!=-1||m!="T"&&m!="F"&&f!=-1)&&n.He()==0?(f!=-1&&(this.J[f]=-1),a!=-1&&(h=new p.l,n.A(h),this.J[a]=h.da()==0&&h.S()==0?0:1)):(a!=-1&&(this.J[a]=2),f!=-1&&(this.J[f]=1)))},l.prototype.hy=function(n){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(n,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},l.prototype.UD=function(n){this.hy(n),l.qK(this.J)},l.prototype.Fu=function(n,a){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var h=this.Yc.charAt(6);h=h=="T"||h=="F"||a.Rb()!=0,this.J[6]=h?1:0}this.fa[7]&&(a=p.si.cq(a),this.J[7]=a?0:-1),this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},l.prototype.VD=function(n){if(this.fa[0]){var a=this.Yc.charAt(0);a=a=="T"||a=="F"||n.Rb()!=0,this.J[0]=a?1:0}this.fa[1]&&(n=p.si.cq(n),this.J[1]=n?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},l.prototype.Gu=function(n){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(n,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},l.prototype.uN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},l.prototype.KG=function(n,a){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var h=this.Yc.charAt(2);h=h=="T"||h=="F"||n.Rb()!=0,this.J[2]=h?1:0}this.fa[5]&&(n=p.si.cq(n),this.J[5]=n?0:-1),this.fa[6]&&(h=(h=this.Yc.charAt(6))=="T"||h=="F"||a.Rb()!=0,this.J[6]=h?1:0),this.fa[7]&&(a=p.si.cq(a),this.J[7]=a?0:-1)},l.prototype.Qz=function(n){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var a=this.Yc.charAt(2);a=a=="T"||a=="F"||n.Rb()!=0,this.J[2]=a?1:0}this.fa[5]&&(n=p.si.cq(n),this.J[5]=n?0:-1),this.J[6]=0},l.prototype.tI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},l.prototype.tN=function(n,a,h){var f=!0;return this.fa[0]&&(this.yS(n,a),f=f&&this.qc(0)),this.fa[1]&&(this.uS(n,a,h,this.mh),f=f&&this.qc(1)),this.fa[2]&&(this.vS(n,a),f=f&&this.qc(2)),this.fa[3]&&(this.AN(n,a,h,this.mh),f=f&&this.qc(3)),this.fa[4]&&(this.xN(n,a,h,this.mh),f=f&&this.qc(4)),this.fa[5]&&(this.yN(n,a,h),f=f&&this.qc(5)),this.fa[6]&&(this.gQ(n,a),f=f&&this.qc(6)),this.fa[7]&&(this.fQ(n,a,h,this.mh),f=f&&this.qc(7)),f},l.prototype.hT=function(n,a,h){var f=!0;return this.fa[0]&&(this.BS(n,a,h,this.$h,this.mh),f=f&&this.qc(0)),this.fa[1]&&(this.pG(n,a,h,this.$h,this.mh,1),f=f&&this.qc(1)),this.fa[2]&&(this.qG(n,a,h,2),f=f&&this.qc(2)),this.fa[3]&&(this.pG(n,h,a,this.mh,this.$h,3),f=f&&this.qc(3)),this.fa[4]&&(this.CN(n,a,h,this.$h,this.mh),f=f&&this.qc(4)),this.fa[5]&&(this.aE(n,h,this.$h,5),f=f&&this.qc(5)),this.fa[6]&&(this.qG(n,h,a,6),f=f&&this.qc(6)),this.fa[7]&&(this.aE(n,a,this.mh,7),f=f&&this.qc(7)),f},l.prototype.WD=function(n,a,h){var f=!0;return this.fa[0]&&(this.zS(n,a),f=f&&this.qc(0)),this.fa[2]&&(this.wS(n,a),f=f&&this.qc(2)),this.fa[3]&&(this.BN(n,a,h),f=f&&this.qc(3)),this.fa[5]&&(this.zN(n,a),f=f&&this.qc(5)),this.fa[6]&&(this.hQ(n,a),f=f&&this.qc(6)),f},l.prototype.LG=function(n,a,h){var f=!0;return this.fa[0]&&(this.CS(n,a,h,this.$h),f=f&&this.qc(0)),this.fa[2]&&(this.AS(n,h),f=f&&this.qc(2)),this.fa[3]&&(this.EN(n,a,h,this.$h),f=f&&this.qc(3)),this.fa[5]&&(this.DN(n,a,h,this.$h),f=f&&this.qc(5)),this.fa[6]&&(this.iQ(n,a,h),f=f&&this.qc(6)),f},l.prototype.UU=function(n,a,h){var f=!0;return this.fa[0]&&(this.DS(n,a,h),f=f&&this.qc(0)),this.fa[2]&&(this.rG(n,a,h,2),f=f&&this.qc(2)),this.fa[6]&&(this.rG(n,h,a,6),f=f&&this.qc(6)),f},l.prototype.xS=function(n,a,h){this.J[0]!=2&&((n=this.j.af(n))&a)!=0&&(n&h)!=0&&(this.J[0]=2)},l.prototype.nG=function(n,a,h){if(this.J[h]!=1){var f=this.j.af(this.j.ya(n));(this.j.af(n)&a)!=0&&(f&a)!=0&&(this.J[h]=1)}},l.prototype.oG=function(n,a,h,f){this.J[f]!=2&&((n=this.j.af(n))&a)!=0&&(n&h)==0&&(this.J[f]=2)},l.prototype.wN=function(n,a,h){if(this.J[4]!=1){var f=this.j.fh(n);(f&a)!=0&&(f&h)!=0?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&((n=this.j.yd(this.j.vf(n)))&a)!=0&&(n&h)!=0&&(this.J[4]=0)}},l.prototype.$D=function(n,a,h){if(this.J[h]!=1){var f=this.j.af(this.j.ya(n));(this.j.af(n)&a)==0&&(f&a)==0&&(this.J[h]=1)}},l.prototype.yS=function(n,a){if(this.J[0]!=1){var h=this.j.af(this.j.ya(n));(this.j.af(n)&a)!=0&&(h&a)!=0&&(this.J[0]=1)}},l.prototype.uS=function(n,a,h,f){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var m=this.j.vf(n),y=this.j.yd(m);(y&a)==0&&(this.j.af(n)&a)!=0&&(n=this.j.og(m,f),(y&h)!=0&&n%2!=0&&(this.J[1]=0))}},l.prototype.vS=function(n,a){this.J[2]!=2&&(this.j.fh(n)&a)!=0&&(this.J[2]=2)},l.prototype.AN=function(n,a,h,f){if(this.J[3]!=1){var m=this.j.fh(n);(m&a)!=0&&(m&h)!=0?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(m=this.j.vf(n),((n=this.j.yd(m))&a)!=0&&(a=this.j.og(m,f),(n&h)!=0&&a%2==0&&(this.J[3]=0)))}},l.prototype.xN=function(n,a,h,f){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var m=this.j.vf(n);((n=this.j.yd(m))&a)!=0&&(a=this.j.og(m,f),(n&h)!=0&&a%2!=0&&(this.J[4]=0))}},l.prototype.yN=function(n,a,h){this.J[5]!=1&&((n=this.j.fh(n))&a)!=0&&(n&h)==0&&(this.J[5]=1)},l.prototype.gQ=function(n,a){if(this.J[6]!=1){var h=this.j.af(this.j.ya(n));(this.j.af(n)&a)==0&&(h&a)==0&&(this.J[6]=1)}},l.prototype.fQ=function(n,a,h,f){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){var m=this.j.vf(n),y=this.j.yd(m);(y&a)==0&&(this.j.af(n)&a)==0&&(n=this.j.og(m,f),(y&h)!=0&&n%2!=0&&(this.J[7]=0))}},l.prototype.BS=function(n,a,h,f,m){if(this.J[0]!=1){var y=this.j.fh(n);(y&a)!=0&&(y&h)!=0?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),((y=this.j.yd(n))&a)!=0&&(y&h)!=0&&(a=this.j.og(n,f),m=this.j.og(n,m),a%2==0&&m%2==0&&(this.J[0]=0)))}},l.prototype.pG=function(n,a,h,f,m,y){if(this.J[y]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var w=this.j.yd(n);(w&a)!=0&&(w&h)!=0&&(a=this.j.og(n,f),m=this.j.og(n,m),a%2==0&&m%2!=0&&(this.J[y]=0))}},l.prototype.qG=function(n,a,h,f){this.J[f]!=1&&((n=this.j.fh(n))&a)!=0&&(n&h)==0&&(this.J[f]=1)},l.prototype.CN=function(n,a,h,f,m){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1){n=this.j.vf(n);var y=this.j.yd(n);(y&a)!=0&&(y&h)!=0&&(a=this.j.og(n,f),m=this.j.og(n,m),a%2!=0&&m%2!=0&&(this.J[4]=0))}},l.prototype.aE=function(n,a,h,f){this.J[f]!=0&&this.j.Bb(this.j.ue(this.j.ya(n)),this.Wi)!=1&&(n=this.j.vf(n),(this.j.yd(n)&a)==0&&this.j.og(n,h)%2!=0&&(this.J[f]=0))},l.prototype.zS=function(n,a){this.J[0]!=0&&(this.j.yd(n)&a)==0&&(this.j.jk(this.j.Yy(n))&a)!=0&&(this.J[0]=0)},l.prototype.wS=function(n,a){this.J[2]!=2&&(this.j.yd(n)&a)!=0&&(this.J[2]=2)},l.prototype.BN=function(n,a,h){this.J[3]!=0&&((n=this.j.yd(n))&a)!=0&&(n&h)!=0&&(this.J[3]=0)},l.prototype.zN=function(n,a){this.J[5]!=1&&(this.j.yd(n)&a)!=0&&(this.J[5]=1)},l.prototype.hQ=function(n,a){this.J[6]!=0&&(this.j.yd(n)&a)==0&&(this.j.jk(this.j.Yy(n))&a)==0&&(this.J[6]=0)},l.prototype.CS=function(n,a,h,f){if(this.J[0]!=0){var m=this.j.yd(n);(m&a)!=0&&(m&h)!=0&&this.j.og(n,f)%2==0&&(this.J[0]=0)}},l.prototype.AS=function(n,a){this.J[2]!=1&&(this.j.Je(n)!=-1?this.J[2]=1:this.J[2]!=0&&(this.j.yd(n)&a)==0&&(this.J[2]=0))},l.prototype.EN=function(n,a,h,f){if(this.J[3]!=0){var m=this.j.yd(n);(m&a)!=0&&(m&h)!=0&&this.j.og(n,f)%2!=0&&(this.J[3]=0)}},l.prototype.DN=function(n,a,h,f){if(this.J[5]!=0){var m=this.j.yd(n);(m&a)!=0&&(m&h)==0&&this.j.og(n,f)%2!=0&&(this.J[5]=0)}},l.prototype.iQ=function(n,a,h){this.J[6]!=0&&((n=this.j.yd(n))&a)==0&&(n&h)!=0&&(this.J[6]=0)},l.prototype.DS=function(n,a,h){this.J[0]!=0&&((n=this.j.yd(n))&a)!=0&&(n&h)!=0&&(this.J[0]=0)},l.prototype.rG=function(n,a,h,f){this.J[f]!=0&&((n=this.j.yd(n))&a)!=0&&(n&h)==0&&(this.J[f]=0)},l.prototype.Dp=function(n,a){var h=!1;n=this.j.Ma(n),a=this.j.Ma(a),this.Wi=this.j.bh();for(var f=this.j.Oe;f!=-1;f=this.j.Tf(f)){var m=this.j.Je(f);if(m==-1){if(this.Um!=-1)switch(this.Um){case 3:h=this.WD(f,n,a);break;case 4:h=this.LG(f,n,a);break;default:throw p.i.ga("internal error")}}else{var y=m;do{var w=y;if(this.j.Bb(w,this.Wi)!=1)do{switch(this.xw){case 0:h=this.sN(w,n,a);break;case 1:h=this.tN(w,n,a);break;case 2:h=this.hT(w,n,a);break;default:throw p.i.ga("internal error")}if(h)break;this.j.Kb(w,this.Wi,1),w=this.j.kc(w)}while(w!=y&&!h);if(h)break;y=this.j.kc(this.j.ya(w))}while(y!=m);if(h)break}}h||this.PJ(),this.j.Lg(this.Wi)},l.prototype.By=function(n,a){var h=!1;n=this.j.Ma(n),a=this.j.Ma(a);for(var f=this.j.Oe;f!=-1;f=this.j.Tf(f)){switch(this.Um){case 3:h=this.WD(f,n,a);break;case 4:h=this.LG(f,n,a);break;case 5:h=this.UU(f,n,a);break;default:throw p.i.Ra()}if(h)break}h||this.PJ()},l.prototype.gr=function(n,a){this.j.fr(n,a)},l.prototype.Yo=function(n,a,h){this.TP(n,a,h),this.gr(n,h)},l.prototype.TP=function(n,a,h){for(p.Vk.W(n,a,h,!1),n.Ip(0,!0,!0),a=n.md;a!=-1;a=n.ve(a))n.jc(a)==1736&&p.tn.W(n,a,-1,!1,h)},l.RE=function(n,a){var h=n.K();return p.ba.zd(h)?((a=new p.Ua(n.description)).pc(n,!0),a):h==197?(h=new p.l,n.A(h),h.da()<=a&&h.S()<=a?(a=new p.Ta(n.description),n.tf(a),a):h.da()<=a||h.S()<=a?(a=new p.Ua(n.description),h=new p.Ta,n.If(0,h),a.nf(h),n.If(2,h),a.lineTo(h),a):((a=new p.Ea(n.description)).bd(n,!1),a)):n},l}(),p.cm=P}(Q||(Q={})),function(p){var P=function(){function l(n){this.Gm=new p.ja(0),this.fw=new p.ja(0),this.xt=new p.h,this.yt=new p.h,this.g=n,this.Js=-1}return l.prototype.cc=function(n){return this.g.cc(this.uz(n))},l.prototype.Dv=function(n){var a=this.dz(n);if(n=this.CF(n),this.g.Na(a)==n){var h=a;a=n,n=h}return this.g.Hc(a,this.xt),this.g.Hc(n,this.yt),this.xt.y<this.yt.y},l.prototype.uz=function(n){var a=this.dz(n);return n=this.CF(n),this.g.V(a)==n?a:n},l.prototype.dz=function(n){return this.Gm.get(n)},l.prototype.CF=function(n){return this.fw.get(n)},l.prototype.mF=function(n){this.Gm.set(n,this.Js),this.Js=n},l.prototype.iI=function(n){if(this.Js!=-1){var a=this.Js;return this.Js=this.Gm.get(a),this.Gm.set(a,n),this.fw.set(a,this.g.V(n)),a}return this.Gm==null&&(this.Gm=new p.ja(0),this.fw=new p.ja(0)),a=this.Gm.size,this.Gm.add(n),this.fw.add(this.g.V(n)),a},l.prototype.mz=function(n){return this.g.cd(this.dz(n))},l}();p.uY=P;var x=function(){function l(n){this.Ce=n,this.je=new p.zb,this.Pm=new p.zb,this.xH=0,this.Co=null,this.tA=-1}return l.prototype.compare=function(n,a,h){h=n.ka(h);var f=this.Ce.hb;if(this.tA==a)var m=this.xH;else this.Co=f.cc(a),this.Co==null?((n=f.g).fd(f.uz(a),this.je),this.Co=this.je,m=this.je.Me(this.Ce.Ah,0)):m=this.Co.Me(this.Ce.Ah,0),this.xH=m,this.tA=a;if((n=f.cc(h))==null){(n=f.g).fd(f.uz(h),this.Pm),n=this.Pm;var y=this.Pm.Me(this.Ce.Ah,0)}else y=n.Me(this.Ce.Ah,0);return m==y&&(a=f.Dv(a),h=f.Dv(h),(a=.5*((h=Math.min(a?this.Co.ma:this.Co.oa,h?n.ma:n.oa))+this.Ce.Ah))==this.Ce.Ah&&(a=h),m=this.Co.Me(a,0),y=n.Me(a,0)),m<y?-1:m>y?1:0},l.prototype.reset=function(){this.tA=-1},l}(),d=function(){function l(){this.Ym=this.Il=null,this.fb=new p.$j,this.fb.MP(),this.ae=new x(this),this.fb.Xo(this.ae)}return l.prototype.CQ=function(){var n=!1;if(this.hw&&(n=this.DQ()),this.g.ea(this.Y)==1){var a=this.g.Ob(this.Y);return n=this.g.qz(a),this.g.KB(a,!0),0>n&&(n=this.g.Ya(a),this.g.kJ(n),this.g.Yg(a,this.g.Na(n)),!0)}for(this.Gl=this.g.Fy(),this.yo=this.g.Fy(),a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))this.g.ir(a,this.Gl,0),this.g.ir(a,this.yo,-1);a=new p.ja(0),this.Ah=NaN;var h=new p.h;this.ft=this.g.ea(this.Y),this.to=this.g.Hd(),this.Ts=this.g.Hd();for(var f=this.Il.sc(this.Il.ke);f!=-1;f=this.Il.lb(f)){var m=this.Il.getData(f);if(this.g.Hc(m,h),h.y!=this.Ah&&a.size!=0&&(n=this.vt(a)||n,this.ae.reset(),a.clear(!1)),a.add(m),this.Ah=h.y,this.ft==0)break}for(0<this.ft&&(n=this.vt(a)||n,a.clear(!1)),this.g.Ud(this.to),this.g.Ud(this.Ts),a=this.g.Ob(this.Y);a!=-1;)if(this.g.uj(a,this.Gl)==3){for(this.g.KB(a,!0),h=a,a=this.g.uj(a,this.yo);a!=-1;)f=this.g.uj(a,this.yo),this.g.UT(this.Y,this.g.Sb(h),a),h=a,a=f;a=this.g.Sb(h)}else this.g.KB(a,!1),a=this.g.Sb(a);return this.g.xB(this.Gl),this.g.xB(this.yo),n},l.prototype.vt=function(n){return this.VV(n)},l.prototype.VV=function(n){var a=!1;this.hb==null&&(this.hb=new P(this.g)),this.Ym==null?(this.Ym=new p.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.UV(n);for(var h=0,f=n.size;h<f;h++){var m=n.get(h);m!=-1&&this.jG(m,-1)}for(h=0;h<this.Ym.size&&0<this.ft;h++)if(n=this.Ym.get(h),m=this.hb.mz(this.fb.ka(n)),f=-1,this.g.uj(m,this.Gl)==0){m=this.fb.xe(n);for(var y,w=n;m!=-1;){var I=this.fb.ka(m),M=this.hb.mz(I),T=this.g.uj(M,this.Gl);if(T!=0){f=M;break}w=m,m=this.fb.xe(m)}m==-1?(y=!0,m=w):(I=this.fb.ka(m),y=this.hb.Dv(I),m=this.fb.lb(m),y=!y);do{if(I=this.fb.ka(m),M=this.hb.mz(I),(T=this.g.uj(M,this.Gl))==0&&(y!=this.hb.Dv(I)&&(a=this.g.Ya(M),this.g.kJ(a),this.g.Yg(M,this.g.Na(a)),a=!0),this.g.ir(M,this.Gl,y?3:2),y||(w=this.g.uj(f,this.yo),this.g.ir(f,this.yo,M),this.g.ir(M,this.yo,w)),this.ft--,this.ft==0))return a;f=M,w=m,m=this.fb.lb(m),y=!y}while(w!=n)}return a},l.prototype.UV=function(n){for(var a=0,h=n.size;a<h;a++){var f=n.get(a),m=this.g.Qa(f,this.to),y=this.g.Qa(f,this.Ts);if(m!=-1){var w=this.fb.ka(m);this.hb.mF(w),this.g.Sa(f,this.to,-1)}y!=-1&&(w=this.fb.ka(y),this.hb.mF(w),this.g.Sa(f,this.Ts,-1)),w=-1,m!=-1&&y!=-1?(this.fb.wd(m,-1),this.fb.wd(y,-1),n.set(a,-1)):w=m!=-1?m:y,w!=-1&&(this.jG(f,w)||this.fb.wd(w,-1),n.set(a,-1))}},l.prototype.jG=function(n,a){var h=new p.h,f=new p.h;this.g.Hc(n,h);var m=this.g.V(n);this.g.Hc(m,f);var y=!1;if(h.y<f.y){y=!0;var w=this.hb.iI(n);if(a==-1)var I=this.fb.addElement(w,-1);else I=a,this.fb.Uj(I,w);(w=this.g.Qa(m,this.to))==-1?this.g.Sa(m,this.to,I):this.g.Sa(m,this.Ts,I),m=this.g.cd(n),this.g.uj(m,this.Gl)==0&&this.Ym.add(I)}return m=this.g.Na(n),this.g.Hc(m,f),h.y<f.y&&(y=!0,w=this.hb.iI(m),a==-1?I=this.fb.addElement(w,-1):(I=a,this.fb.Uj(I,w)),(w=this.g.Qa(m,this.to))==-1?this.g.Sa(m,this.to,I):this.g.Sa(m,this.Ts,I),m=this.g.cd(n),this.g.uj(m,this.Gl)==0&&this.Ym.add(I)),y},l.W=function(n,a,h,f){var m=new l;return m.g=n,m.Y=a,m.Il=h,m.hw=f,m.CQ()},l.prototype.DQ=function(){var n=new p.ja(0),a=new p.ja(0),h=-1,f=-1,m=new p.h;m.Sc();for(var y=-1,w=-1,I=-1,M=new p.h,T=this.Il.sc(this.Il.ke);T!=-1;T=this.Il.lb(T)){var $=this.Il.getData(T);this.g.Hc($,M);var F=this.g.cd($);m.rb(M)&&w==F?(f==-1&&(h=this.g.Fy(),f=this.g.Hd()),I==-1&&(I=a.size,this.g.Sa(y,f,I),a.add(1),this.g.uj(F,h)==-1&&(this.g.ir(F,h,y),n.add(F))),this.g.Sa($,f,I),a.XW(a.Gc()+1)):(I=-1,m.N(M)),y=$,w=F}if(n.size==0)return!1;for(m=new p.ja(0),y=new p.ja(0),w=0,I=n.size;w<I;w++){F=n.get(w);var R=this.g.uj(F,h);for($=this.g.Qa(R,f),m.clear(!1),y.clear(!1),m.add(R),y.add($),$=this.g.V(R);$!=R;$=this.g.V($)){var j=$;if((M=this.g.Qa(j,f))!=-1)if(y.size==0)y.add(M),m.add(j);else if(y.Gc()==M){T=m.Gc();var H=this.g.V(T);R=this.g.V(j),this.g.Cc(T,R),this.g.Dc(R,T),this.g.Cc(j,H),this.g.Dc(H,j),j=[!1],H=this.g.iG(this.Y,H,this.g.Ya(F),j),this.g.Sa($,f,-1),j[0]&&this.g.Kf(F,R),$=this.g.Ka(F),$-=R=this.g.Ka(H),this.g.Xj(F,$),a.set(M,a.get(M)-1),a.get(M)==1&&(a.set(M,0),y.Jf(),m.Jf()),$=R=T}else m.add($),y.add(M)}}return this.g.xB(h),this.g.Ud(f),!0},l}();p.RL=d}(Q||(Q={})),function(p){var P=function(){function x(){}return x.prototype.jg=function(){this.KA=this.tb=null},x.prototype.get=function(){return this.KA},x.prototype.set=function(d){if(this.KA=d,d!=null)throw d.K()==322&&(this.tb=d),p.i.Ra()},x.prototype.create=function(d){if(d!=322)throw p.i.ga("Not Implemented");this.Qr()},x.prototype.Qr=function(){this.tb==null&&(this.tb=new p.zb),this.KA=this.tb},x}();p.jg=P}(Q||(Q={})),function(p){(p=p.SL||(p.SL={}))[p.enumLineSeg=1]="enumLineSeg",p[p.enumBezierSeg=2]="enumBezierSeg",p[p.enumArcSeg=4]="enumArcSeg",p[p.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",p[p.enumSegmentMask=7]="enumSegmentMask",p[p.enumDensified=8]="enumDensified"}(Q||(Q={})),function(p){var P=function(d){this.bj=d,this.lC=this.mC=1,this.nB=this.mB=this.oB=0},x=function(){function d(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Dk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new p.Ta,this.ra=this.Ew=0,this.oo=[],this.bt=[],this.Aw=[],this.Kq=[],this.HA=[]}return d.prototype.rB=function(l){if(l!=null){for(var n=0,a=l.length;n<a;n++)this.mW(l[n]);l.length=0}},d.prototype.mW=function(l){l.bj=null,this.Kq.push(l)},d.prototype.Qw=function(l){if(this.Kq.length===0)var n=new P(l);else(n=this.Kq[this.Kq.length-1]).bj=l,--this.Kq.length;return n},d.prototype.NR=function(l,n){return l==0?this.bt[n]:this.Aw[n]},d.prototype.WA=function(){this.Ew>=this.HA.length&&this.HA.push(new p.jg);var l=this.HA[this.Ew];return this.Ew++,l},d.prototype.clear=function(){this.rB(this.oo),this.rB(this.bt),this.rB(this.Aw),this.Ew=0},d.prototype.Qo=function(l){this.oo.push(this.Qw(l))},d.prototype.ql=function(l){return l==0?this.bt.length:this.Aw.length},d.prototype.Xp=function(l,n){return this.NR(l,n).bj},d.prototype.Fa=function(l,n){if(this.oo.length!=2)throw p.i.Ra();this.ra=l;var a=p.mc.ox(.01*l),h=!1,f=this.oo[0],m=this.oo[1];if(n||(5&f.bj.Br(m.bj,l,!0))!=0){if(f.bj.K()==322){var y=f.bj;if(m.bj.K()==322){n=m.bj;var w=p.zb.Yx(y,n,null,this.Hq,this.Dk,l);if(w==0)throw p.zb.Yx(y,n,null,this.Hq,this.Dk,l),p.i.Ra();l=Array(9),p.P.bv(l,null);for(var I=0;I<w;I++){var M=this.Hq[I],T=this.Dk[I],$=f.nB,F=1;M==0?($=f.oB,F=f.mC):M==1&&($=f.mB,F=f.lC);var R=m.nB,j=1;T==0?(R=m.oB,j=m.mC):T==1&&(R=m.mB,j=m.lC);var H=new p.h;$==R?($=new p.h,y.ic(M,$),M=new p.h,n.ic(T,M),j/=T=F+j,p.mc.JG($,M,j,H),p.h.zc(H,$)+p.h.zc(H,M)>a&&(h=!0)):$>R?(y.ic(M,H),M=new p.h,n.ic(T,M),p.h.zc(H,M)>a&&(h=!0)):(n.ic(T,H),$=new p.h,y.ic(M,$),p.h.zc(H,$)>a&&(h=!0)),l[I]=H}for(f=0,m=-1,I=0;I<=w;I++)(j=I<w?this.Hq[I]:1)!=f&&(a=this.WA(),y.dh(f,j,a),m!=-1&&a.get().Ec(l[m]),I!=w&&a.get().Rc(l[I]),f=j,this.bt.push(this.Qw(a.get()))),m=I;for(y=[0,0,0,0,0,0,0,0,0],I=0;I<w;I++)y[I]=I;for(1<w&&this.Dk[0]>this.Dk[1]&&(j=this.Dk[0],this.Dk[0]=this.Dk[1],this.Dk[1]=j,I=y[0],y[0]=y[1],y[1]=I),f=0,m=-1,I=0;I<=w;I++)(j=I<w?this.Dk[I]:1)!=f&&(a=this.WA(),n.dh(f,j,a),m!=-1&&(f=y[m],a.get().Ec(l[f])),I!=w&&(f=y[I],a.get().Rc(l[f])),f=j,this.Aw.push(this.Qw(a.get()))),m=I;return h}}throw p.i.Ra()}return!1},d.prototype.Fz=function(l,n,a){if(n.copyTo(this.Cf),this.oo.length!=1)throw p.i.Ra();this.ra=l;var h=this.oo[0];if(a||h.bj.tu(n.D(),l,!0)){if(h.bj.K()!=322)throw p.i.Ra();var f=(l=h.bj).ge(n.D(),!1);this.Hq[0]=f;var m=h.nB;for(a=1,f==0?(m=h.oB,a=h.mC):f==1&&(m=h.mB,a=h.lC),h=new p.h,m==0?(m=new p.h,l.ic(f,m),n=n.D(),p.mc.JG(m,n,1/(a+1),h)):0<m?(h=new p.h,l.ic(f,h)):h=n.D(),a=0,f=-1,m=0;1>=m;m++){if((n=1>m?this.Hq[m]:1)!=a){var y=this.WA();l.dh(a,n,y),f!=-1&&y.get().Ec(h),m!=1&&y.get().Rc(h),a=n,this.bt.push(this.Qw(y.get()))}f=m}this.Cf.Db(h)}},d}();p.OC=x}(Q||(Q={})),function(p){var P=function(){function x(d){this.Fs=this.tk=this.tb=null,this.cg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=d,this.cg=this.Vx(this.El),this.Bm=!1,this.tk=null,this.Fs=new p.h}return x.prototype.wW=function(d){if(this.ib!=d.ib)throw p.i.Hb();this.Af=d.Af,this.Kd=d.Kd,this.gb=d.gb,this.El=d.El,this.cg=d.cg,this.Bm=d.Bm,this.tk=null},x.prototype.ia=function(){if(this.Af!=this.Kd&&this.wD(),this.Bm)this.Kd=(this.Kd+1)%this.cg;else{if(this.Kd==this.cg)throw p.i.de();this.Kd++}return this.tk},x.prototype.ni=function(){if(this.Bm)this.Kd=(this.cg+this.Kd-1)%this.cg;else{if(this.Kd==0)throw p.i.de();this.Kd--}return this.Kd!=this.Af&&this.wD(),this.tk},x.prototype.xW=function(){this.Af=-1,this.Kd=0},x.prototype.yW=function(){this.Kd=this.cg,this.Af=-1},x.prototype.Wb=function(d,l){if(l===void 0&&(l=-1),0<=this.gb&&this.gb<this.ib.ea()){var n=this.DM();if(d>=n&&d<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=d-n)}l=0<=l&&l<this.ib.ea()&&d>=this.ib.Ca(l)&&d<this.ib.Wc(l)?l:this.ib.nz(d),this.El=l+1,this.gb=l,this.Af=-1,this.Kd=d-this.ib.Ca(l),this.cg=this.Vx(l),this.ib.Ca(this.gb),this.ib.ec(this.gb)},x.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.cg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},x.prototype.aj=function(){this.cg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},x.prototype.Vx=function(d){if(this.ib.Bc())return 0;var l=1;return this.ib.ec(d)&&(l=0),this.ib.Ka(d)-l},x.prototype.Qn=function(){return this.Af==this.cg-1&&this.ib.ec(this.gb)},x.prototype.EB=function(){this.Bm=!0},x.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},x.prototype.DM=function(){return this.ib.Ca(this.gb)},x.prototype.kk=function(){return this.Qn()?this.ib.Ca(this.gb):this.xb()+1},x.prototype.xm=function(){return this.Af==0},x.prototype.Sn=function(){return this.Af==this.cg-1},x.prototype.Ia=function(){return this.Kd<this.cg},x.prototype.zz=function(){return 0<this.Kd},x.prototype.Qf=function(){var d=new x(this.ib);return d.Af=this.Af,d.Kd=this.Kd,d.cg=this.cg,d.gb=this.gb,d.El=this.El,d.ib=this.ib,d.Bm=this.Bm,d},x.prototype.wD=function(){if(0>this.Kd||this.Kd>=this.cg)throw p.i.de();this.Af=this.Kd;var d=this.xb();this.ib.oc();var l=this.ib.Se,n=1;switch(l!=null&&(n=7&l.read(d)),l=this.ib.description,n){case 1:this.tb==null&&(this.tb=new p.zb),this.tk=this.tb;break;case 2:throw p.i.ga("internal error");default:throw p.i.Ra()}this.tk.Pf(l),n=this.kk(),this.ib.Hc(d,this.Fs),this.tk.Ec(this.Fs),this.ib.Hc(n,this.Fs),this.tk.Rc(this.Fs);for(var a=1,h=l.Ba;a<h;a++)for(var f=l.ld(a),m=p.sa.Wa(f),y=0;y<m;y++){var w=this.ib.Vc(f,d,y);this.tk.TB(f,y,w),w=this.ib.Vc(f,n,y),this.tk.JB(f,y,w)}},x.prototype.VS=function(){return this.gb==this.ib.ea()-1},x.prototype.Rn=function(){var d=this.ib.QR();return d!=null&&(7&d.read(this.Af))!=1},x}();p.TL=P}(Q||(Q={})),function(p){var P=function(){function x(d){d instanceof p.ba?(this.sH=d,this.za=-1,this.Gi=1):(this.qT=d.slice(0),this.za=-1,this.Gi=d.length)}return x.prototype.Ma=function(){return this.za},x.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.sH!=null?this.sH:this.qT[this.za]):null},x.prototype.re=function(){},x}();p.$c=P}(Q||(Q={})),function(p){var P=function(){this.next=null},x=function(){function d(){this.Vq=this.Mw=this.Nw=0,this.fF=!1,this.bK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return d.prototype.wX=function(l,n,a){this.ri=l,this.rl=n,this.Lh=this.Yl=null,this.Vq=0,this.qy=a,this.jn==null&&(this.jn=p.P.mg(384,0)),this.iK()},d.prototype.S=function(){return this.ri},d.prototype.da=function(){return this.rl},d.prototype.flush=function(){0<this.Ql&&(this.qy.bF(this.jn,this.Ql),this.Ql=0)},d.prototype.iK=function(){if(0<this.Vq){for(var l=0;l<this.rl;l++){for(var n=this.Yl[l];n!=null;){var a=n;n=n.next,a.next=null}this.Yl[l]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},d.prototype.dJ=function(l){for(this.fF=l==d.Bx,l=this.Nw;l<=this.Mw;l++)this.nN(),this.gN(l),this.UP();this.iK()},d.prototype.fy=function(l,n,a,h){if(n!=h){var f=1;if(n>h&&(f=l,l=a,a=f,f=n,n=h,h=f,f=-1),!(0>h||n>=this.rl)){0>l&&0>a?a=l=-1:l>=this.ri&&a>=this.ri&&(a=l=this.ri);var m=(a-l)/(h-n);h>this.rl&&(a=m*((h=this.rl)-n)+l),0>n&&(l=m*(0-n)+l,n=0);var y=Math.max(this.ri+1,8388607);-8388607>l?(n=(0-l)/m+n,l=0):l>y&&(n=(this.ri-l)/m+n,l=this.ri),-8388607>a?h=(0-l)/m+n:a>y&&(h=(this.ri-l)/m+n),(n=p.P.truncate(n))!=(h=p.P.truncate(h))&&((a=new P).x=p.P.truncate(4294967296*l),a.y=n,a.H=h,a.RP=p.P.truncate(4294967296*m),a.dir=f,this.Yl==null&&(this.Yl=p.P.mg(this.rl,null)),a.next=this.Yl[a.y],this.Yl[a.y]=a,a.y<this.Nw&&(this.Nw=a.y),a.H>this.Mw&&(this.Mw=a.H),this.Vq++)}}},d.prototype.nN=function(){if(this.Lh!=null){for(var l=!1,n=null,a=this.Lh;a!=null;)if(a.y++,a.y==a.H){var h=a;a=a.next,n!=null?n.next=a:this.Lh=a,h.next=null}else a.x+=a.RP,n!=null&&n.x>a.x&&(l=!0),n=a,a=a.next;l&&(this.Lh=this.aK(this.Lh))}},d.prototype.gN=function(l){if(!(l>=this.rl)){var n=this.Yl[l];if(n!=null){this.Yl[l]=null,n=this.aK(n),this.Vq-=this.bK,l=this.Lh;for(var a=!0,h=n,f=null;l!=null&&h!=null;)l.x>h.x?(a&&(this.Lh=h),a=h.next,h.next=l,f!=null&&(f.next=h),f=h,h=a):(a=l.next,l.next=h,f!=null&&(f.next=l),f=l,l=a),a=!1;this.Lh==null&&(this.Lh=n)}}},d.$J=function(l,n){return 0>l?0:l>n?n:l},d.prototype.UP=function(){if(this.Lh!=null){for(var l=0,n=this.Lh,a=p.P.truncate(p.P.SG(n.x)),h=n.next;h!=null;h=h.next)if(l=this.fF?1^l:l+h.dir,h.x>n.x){var f=p.P.truncate(p.P.SG(h.x));l!=0&&(n=d.$J(a,this.ri),(a=d.$J(f,this.ri))>n&&n<this.ri&&(this.jn[this.Ql++]=n,this.jn[this.Ql++]=a,this.jn[this.Ql++]=h.y,this.Ql==this.jn.length&&(this.qy.bF(this.jn,this.Ql),this.Ql=0))),n=h,a=f}}},d.prototype.aK=function(l){for(var n=0,a=l;a!=null;a=a.next)n++;if(this.bK=n,n==1)return l;this.Lf==null?this.Lf=p.P.mg(Math.max(n,16),null):this.Lf.length<n&&(this.Lf=p.P.mg(Math.max(n,2*this.Lf.length),null));var h=0;for(a=l;a!=null;a=a.next)this.Lf[h++]=a;for(n==2?this.Lf[0].x>this.Lf[1].x&&(l=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=l):d.vN(this.Lf,n,function(f,m){return f==m?0:f.x<m.x?-1:f.x>m.x?1:0}),l=this.Lf[0],this.Lf[0]=null,a=l,h=1;h<n;h++)a.next=this.Lf[h],a=this.Lf[h],this.Lf[h]=null;return a.next=null,l},d.vN=function(l,n,a){if(n==l.length)l.sort(a);else{var h=l.slice(0,0),f=l.slice(n);n=l.slice(0,n).sort(a),l.length=0,l.push.apply(l,h.concat(n).concat(f))}},d.Bx=0,d}();p.Ox=x}(Q||(Q={})),function(p){var P=function(){function x(){}return x.prototype.wi=function(d,l){var n=this.g.Qa(d,this.Rq);if(this.Fl==n&&(this.Fl=this.pe.lb(this.Fl)),this.jo==n&&(this.jo=this.pe.lb(this.jo)),this.pe.kd(this.MA,n),this.dk(d),l&&(l=this.g.cd(d))!=-1&&this.g.Ya(l)==d){var a=this.g.V(d);if(a!=d){if((n=this.g.cd(a))==l)return void this.g.Kf(l,a);if((a=this.g.Na(d))!=d&&(n=this.g.cd(a))==l)return void this.g.Kf(l,a)}this.g.Kf(l,-1),this.g.Yg(l,-1)}},x.prototype.kD=function(){for(var d=!1,l=new p.h;;){this.Yh==null?(this.Yh=new p.ja(0),this.Bs=new p.ja(0),this.ye=new p.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var n=this.jo,a=0,h=!0;n!=this.Fl;){var f=this.pe.getData(n),m=new p.h;this.g.Hc(f,m),h&&(this.g.Hc(f,l),h=!1),m=this.g.Na(f);var y=this.g.V(f);this.g.Qa(m,this.Ag)!=-559038737&&(this.Yh.add(m),this.g.Sa(m,this.Ag,-559038737),this.Bs.add(f),this.ye.add(a++)),this.g.Qa(y,this.Ag)!=-559038737&&(this.Yh.add(y),this.g.Sa(y,this.Ag,-559038737),this.Bs.add(f),this.ye.add(a++)),n=this.pe.lb(n)}if(2>this.Yh.size)break;var w=this;for(this.ye.Wd(0,this.ye.size,function(I,M){return w.kM(I,M)}),n=0,a=this.ye.size;n<a;n++)h=this.ye.get(n),h=this.Yh.get(h),this.g.Sa(h,this.Ag,n),m=new p.h,this.g.Hc(h,m);for(m=this.OM(l),n=0,a=this.ye.size;n<a;n++)(h=this.ye.get(n))!=-1&&(h=this.Yh.get(h),this.g.Sa(h,this.Ag,-1));if(!m)break;d=!0}return d},x.prototype.OM=function(d){for(var l=!1,n=!0;n;){n=!1;var a=0;this.ye.get(a)==-1&&(a=this.em(a));for(var h=this.em(a),f=0,m=this.ye.size;f<m&&a!=-1&&h!=-1&&a!=h;f++){var y=this.ye.get(a);h=this.ye.get(h),y=this.Yh.get(y),h=this.Yh.get(h);var w=this.g.V(y);this.g.Fv(w,d)||(w=this.g.Na(y));var I=this.g.V(h);this.g.Fv(I,d)||(I=this.g.Na(h));var M=this.ru(w,y),T=this.ru(I,h),$=M?this.g.Na(w):this.g.V(w),F=T?this.g.Na(I):this.g.V(I),R=!1;(this.up(w)||this.up(I)||this.up(y)||this.up(h)||this.up($)||this.up(F))&&(R=!0),!R&&this.g.hq(y,h)&&(R=!0,this.oD(M,T,w,y,I,h)),!R&&this.g.hq($,F)&&(R=!0,this.oD(!M,!T,w,$,I,F)),R&&(l=!0),n=n||R,a=this.em(a),h=this.em(a)}}if(!l)for(a=0,this.ye.get(a)==-1&&(a=this.em(a)),h=this.em(a),f=0,m=this.ye.size;f<m&&a!=-1&&h!=-1&&a!=h;f++)y=this.ye.get(a),h=this.ye.get(h),y=this.Yh.get(y),h=this.Yh.get(h),w=this.g.V(y),this.g.Fv(w,d)||(w=this.g.Na(y)),I=this.g.V(h),this.g.Fv(I,d)||(I=this.g.Na(h)),M=this.ru(w,y),T=this.ru(I,h),$=M?this.g.Na(w):this.g.V(w),F=T?this.g.Na(I):this.g.V(I),this.yM(M,T,y,w,$,h,I,F)&&(l=!0),a=this.em(a),h=this.em(a);return l},x.prototype.SM=function(){this.g.jc(this.Y)==1736&&this.g.Kn(this.Y)==1&&new p.Hg().HU(this.hw,this.g,this.Y,this.od);var d=!1,l=!0;this.Ag=this.Rq=-1;var n=this.g.I(this.Y),a=new p.ja(0);a.Jb(n);for(var h=this.g.Ob(this.Y);h!=-1;h=this.g.Sb(h))for(var f=this.g.Ya(h),m=0,y=this.g.Ka(h);m<y;m++)a.add(f),f=this.g.V(f);var w=this.g.ud.o,I=this.g.ud.Mf;this.g.wb.oc();var M=this.g.wb.Aa[0].o;for(a.Wd(0,n,function($,F){var R=w[I*$],j=w[I*F],H=M[2*R];R=M[2*R+1];var W=M[2*j];return(H=R<(j=M[2*j+1])?-1:R>j?1:H<W?-1:H>W?1:0)==0&&(H=($=w[I*$+3])<(F=w[I*F+3])?-1:$==F?0:1),H}),this.Rq=this.g.Hd(),this.pe=new p.lp,this.MA=this.pe.Rh(0),this.pe.hn(n),h=0;h<n;h++)f=a.get(h),m=this.pe.addElement(this.MA,f),this.g.Sa(f,this.Rq,m);for(this.Ag=this.g.Hd(),this.Fl=-1,this.YC()&&(d=!0);l;){l=!1,n=0,a=!1;do{a=!1,this.jo=-1,y=0,h=new p.h,m=new p.h;for(var T=this.pe.sc(this.MA);T!=-1;)f=this.pe.getData(T),this.jo!=-1?(this.g.Hc(f,m),h.rb(m)?y++:(h.N(m),this.Fl=T,0<y&&(f=this.kD())&&(a=!0,this.Fl!=-1&&(f=this.pe.getData(this.Fl),this.g.Hc(f,h))),this.jo=T=this.Fl,y=0)):(this.jo=T,this.g.Hc(this.pe.getData(T),h),y=0),T!=-1&&(T=this.pe.lb(T));if(this.Fl=-1,0<y&&(f=this.kD())&&(a=!0),10<n++)throw p.i.Ra();a&&this.BM(),this.YC()&&(a=!0),l=l||a&&!1,d=d||a}while(a)}return this.g.Ud(this.Rq),this.g.Ud(this.Ag),p.RL.W(this.g,this.Y,this.pe,this.hw)||d},x.prototype.ru=function(d,l){return this.g.V(l)!=d},x.prototype.yM=function(d,l,n,a,h,f,m,y){if(a==m)return this.dk(n),this.dk(f),!1;var w=this.g.Qa(n,this.Ag),I=this.g.Qa(h,this.Ag),M=this.g.Qa(f,this.Ag),T=this.g.Qa(y,this.Ag),$=[0,0,0,0];for((n=[0,0,0,0,0,0,0,0])[0]=0,$[0]=w,n[1]=0,$[1]=I,n[2]=1,$[2]=M,n[3]=1,$[3]=T,w=1;4>w;w++){for(I=$[w],M=n[w],T=w-1;0<=T&&$[T]>I;)$[T+1]=$[T],n[T+1]=n[T],T--;$[T+1]=I,n[T+1]=M}return $=0,n[0]!=0&&($|=1),n[1]!=0&&($|=2),n[2]!=0&&($|=4),n[3]!=0&&($|=8),($==5||$==10)&&(d==l?d?(this.g.Cc(y,a),this.g.Dc(a,y),this.g.Cc(h,m),this.g.Dc(m,h)):(this.g.Dc(y,a),this.g.Cc(a,y),this.g.Dc(h,m),this.g.Cc(m,h)):d?(this.g.Dc(a,f),this.g.Cc(f,a),this.g.Dc(m,h),this.g.Cc(h,m)):(this.g.Cc(a,f),this.g.Dc(f,a),this.g.Cc(m,h),this.g.Dc(h,m)),!0)},x.prototype.oD=function(d,l,n,a,h,f){this.IY?this.QM():this.PM(d,l,n,a,h,f)},x.prototype.QM=function(){throw p.i.ga("not implemented.")},x.prototype.PM=function(d,l,n,a,h,f){if(d!=l)d?(this.g.Cc(n,h),this.g.Dc(h,n),this.g.Cc(f,a),this.g.Dc(a,f),this.xn(h,n),this.wi(h,!0),this.g.oi(h,!0),this.dk(n),this.xn(f,a),this.wi(f,!0),this.g.oi(f,!1)):(this.g.Cc(h,n),this.g.Dc(n,h),this.g.Cc(a,f),this.g.Dc(f,a),this.xn(h,n),this.wi(h,!0),this.g.oi(h,!1),this.dk(n),this.xn(f,a),this.wi(f,!0),this.g.oi(f,!0)),this.dk(a);else{var m=d?n:a,y=l?h:f;for(d=d?a:n,l=l?f:h,h=!1,this.g.Cc(m,y),this.g.Cc(y,m),this.g.Dc(d,l),this.g.Dc(l,d),f=l;f!=y;)n=this.g.Na(f),a=this.g.V(f),this.g.Dc(f,a),this.g.Cc(f,n),h=h||f==m,f=a;h||(n=this.g.Na(y),a=this.g.V(y),this.g.Dc(y,a),this.g.Cc(y,n)),this.xn(y,m),this.wi(y,!0),this.g.oi(y,!1),this.dk(m),this.xn(l,d),this.wi(l,!0),this.g.oi(l,!1),this.dk(d)}},x.prototype.YC=function(){for(var d=!1,l=this.g.Ob(this.Y);l!=-1;){for(var n=this.g.Ya(l),a=0,h=this.g.Ka(l);a<h&&1<h;){var f=this.g.Na(n),m=this.g.V(n);this.g.hq(f,m)?(d=!0,this.wi(n,!1),this.g.qd(n,!0),this.wi(m,!1),this.g.qd(m,!0),n=f,a=0,h=this.g.Ka(l)):(n=m,a++)}if(2>this.g.Ka(l)){for(d=this.g.Ya(l),a=0,h=this.g.Ka(l);a<h;a++)this.wi(d,!1),d=this.g.V(d);l=this.g.ar(l),d=!0}else l=this.g.Sb(l)}return d},x.prototype.up=function(d){for(var l=!1;;){var n=this.g.V(d),a=this.g.Na(d);if(n==d)return this.wi(d,!0),this.g.oi(d,!1),!0;if(!this.g.hq(n,a)||(l=!0,this.dk(a),this.dk(n),this.wi(d,!0),this.g.oi(d,!1),this.xn(n,a),this.wi(n,!0),this.g.oi(n,!0),n==a))break;d=a}return l},x.prototype.BM=function(){for(var d=0,l=this.pe.sc(this.pe.ke);l!=-1;l=this.pe.lb(l)){var n=this.pe.getData(l);this.g.cj(n,-1)}for(var a=0,h=this.g.Ob(this.Y);h!=-1;)if((l=this.g.Ya(h))==-1||this.g.cd(l)!=-1)n=h,h=this.g.Sb(h),this.g.br(n);else{this.g.cj(l,h);var f=1;for(n=this.g.V(l);n!=l;n=this.g.V(n))this.g.cj(n,h),f++;this.g.fp(h,!1),this.g.Xj(h,f),this.g.Yg(h,this.g.Na(l)),a+=f,d++,h=this.g.Sb(h)}for(l=this.pe.sc(this.pe.ke);l!=-1;l=this.pe.lb(l))n=this.pe.getData(l),this.g.cd(n)==-1&&(h=this.g.iG(this.Y,n,n,null),a+=this.g.Ka(h),d++);for(this.g.Tl(this.Y,d),this.g.Vj(this.Y,a),d=0,a=this.g.md;a!=-1;a=this.g.ve(a))d+=this.g.I(a);this.g.XB(d)},x.prototype.em=function(d){for(var l=0,n=this.ye.size-1;l<n;l++)if(d=(d+1)%this.ye.size,this.ye.get(d)!=-1)return d;return-1},x.prototype.xn=function(d,l){var n=this.g.Qa(l,this.Rq),a=this.g.Qa(l,this.Ag);this.g.gC(d,l),this.g.Sa(l,this.Rq,n),this.g.Sa(l,this.Ag,a)},x.prototype.dk=function(d){var l=this.g.Qa(d,this.Ag);l!=-1&&(this.ye.set(l,-1),this.g.Sa(d,this.Ag,-1))},x.W=function(d,l,n,a,h){var f=new x;return f.g=d,f.Y=l,f.sA=n,f.hw=a,f.od=h,f.SM()},x.prototype.kM=function(d,l){var n=this.Yh.get(d),a=new p.h;this.g.Hc(n,a),n=new p.h;var h=this.Yh.get(l);return this.g.Hc(h,n),a.rb(n)?0:(h=this.Bs.get(d),d=new p.h,this.g.Hc(h,d),h=this.Bs.get(l),l=new p.h,this.g.Hc(h,l),(h=new p.h).vc(a,d),(a=new p.h).vc(n,l),p.h.pu(h,a))},x}();p.tn=P}(Q||(Q={})),function(p){var P;(P=p.VL||(p.VL={}))[P.Local=0]="Local",P[P.Geographic=1]="Geographic",P[P.Projected=2]="Projected",P[P.Image=3]="Image",P[P.Unknown=4]="Unknown",function(d){d[d.Integer32=0]="Integer32",d[d.Integer64=1]="Integer64",d[d.FloatingPoint=2]="FloatingPoint"}(p.OL||(p.OL={}));var x=function(){function d(){this.hA=null,this.rp="",this.uu=null,this.fg=0,this.UH=this.Jo=-1,this.yh=null}return d.prototype.Fc=function(){return this.fg},d.prototype.QF=function(){return 1},d.prototype.QW=function(l){this.hA=l},d.prototype.Yd=function(){if(this.hA!==null)return this.hA;var l=.001;return this.fg!=0?l=p.yr.xQ(this.fg):this.yh!=null&&(l=p.SC.yQ(this.yh)),l},d.prototype.wz=function(){return this.yh},d.prototype.Id=function(){return this.fg!=0?p.Uc.ah(p.yr.Ny(this.fg)):this.yh!=null?p.SC.zQ(this.yh):void 0},d.Tb=function(l){if(l.fg!=0){if(p.yr.US(l.fg)===!0)return 1;if(p.yr.WS(l.fg)===!0)return 2}return 4},d.prototype.cs=function(){var l=this.Fc();return this.Jo!=-1?this.Jo:(this.Jo=p.yr.AK(l),this.Jo!=-1?this.Jo:l)},d.create=function(l){if(0>=l)throw p.i.O("Invalid or unsupported wkid: "+l);var n=new d;return n.fg=l,n},d.lP=function(l){if(l==null||l.length==0)throw p.i.O("Cannot create SpatialReference from null or empty text.");var n=new d;return n.yh=l,n},d.prototype.Nb=function(l){return this==l||l!=null&&this.constructor==l.constructor&&this.fg==l.fg&&(this.fg!=0||this.yh===l.yh)},d.prototype.toString=function(){return"[ tol: "+this.Mn()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},d.prototype.dc=function(){if(this.rp!=="")return this.rp;var l=this.toString();if(Array.prototype.reduce)return this.rp="S"+l.split("").reduce(function(h,f){return(h=(h<<5)-h+f.charCodeAt(0))&h},0);var n=0;if(l.length===0)return"";for(var a=0;a<l.length;a++)n=(n<<5)-n+l.charCodeAt(a),n&=n;return this.rp="S"+n},d.prototype.Mn=function(){return this.Yd(0)},d.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=p.iu.tP(this)},d.UN=2147483645,d.VN=9007199254740990,d}();p.Gg=x}(Q||(Q={})),function(p){var P=function(x){function d(){var l=x!==null&&x.apply(this,arguments)||this;return l.Li=null,l.NT=null,l.Jq=new p.UL,l.Go=null,l.lw=null,l}return Et(d,x),d.tP=function(l){var n=new d;if(n.fg=l.fg,n.Jo=l.Jo,n.UH=l.UH,n.yh=l.yh,n.yh!==""&&n.yh!==null){l=d.fM(n.yh);var a=d.dM(n.yh);n.Jq.Wx(l,a,p.ju.Integer64),n.ay(l),n.cy(a),n.fg=l.cs()}else l=d.eM(n.fg),n.ay(l),n.cy(null),n.Jq.Wx(l,null,p.ju.Integer64);return n},d.prototype.Yd=function(l){return this.Jq.Mn(l)},d.dM=function(l){if(0>=l.length)throw p.i.O();var n=null;try{n=p.IC.fromString(l)}catch{n=null}return n==null?null:d.XC(n,!0)},d.prototype.ay=function(l){this.Ld=l,this.Go=this.Ld.Id()},d.prototype.cy=function(l){this.FH=l,this.NT=this.FH!=null?this.FH.Go:null},d.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},d.prototype.DG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.hk().Xc():this.Ld.Xc())},d.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},d.prototype.rm=function(){return this.Ld.rm()},d.prototype.bf=function(){return this.Ld.bf()},d.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},d.prototype.Wp=function(){return this.Ld.Wp()},d.prototype.Yr=function(){return this.Ld.Yr()},d.prototype.mk=function(){return this.Ld.mk()},d.prototype.fS=function(l){return p.JC.Ky(this.Ld,l.Ld)},d.prototype.ol=function(){return this.Ld.ol()},d.prototype.Xr=function(){return this.Ld.Xr()},d.prototype.Bi=function(){return this.Tb()==3?this.Li.hk().Bi():this.Ld.Bi()},d.prototype.ih=function(){if(!this.Xc())throw p.i.O("!isPannable()");var l=new p.l;return this.Ld.ih(l),l},d.prototype.Le=function(){if(!this.Xc())throw p.i.O("!isPannable()");return this.Ld.uo},d.prototype.CR=function(){if(!this.Xc())throw p.i.O("!isPannable()");var l=new p.l;return this.Ld.BR(l),l},d.prototype.rv=function(){if(!this.Xc())throw p.i.O("!isPannable()");return this.Ld.rv()},d.prototype.qv=function(){if(!this.Xc())throw p.i.O("!isPannable()");return this.Ld.qv()},d.prototype.Zr=function(){return this.Li!=null?this.Li.hk().Zr():this.Ld.Zr()},d.prototype.KQ=function(){return this.Ld.kv()},d.prototype.Sp=function(){return this.Go.getUnitFactor()},d.prototype.pz=function(l){return this.Jq.pz(l)},d.prototype.tc=function(){var l=this.Tb();if(l==1)return this;if(l==3)return this.Li.hk().tc();if(l==0||l===4)throw p.i.ga("invalid call");if(this.lw!==null)return this.lw;if((l=this.gh().getGeogcs())==null)throw p.i.Ra();return this.lw=d.XE(l,this.Jq.QF())},d.XE=function(l,n){if(l==null)throw p.i.O("null pointer.");var a=new d;return l=d.ou(l,!0),a.Jq.Wx(l,null,n),a.ay(l),a.cy(null),a.fg=l.cs(),a},d.prototype.Tb=function(){var l=this.gh();if(l!=null)switch(l.getType()){case p.Tc.PE_TYPE_GEOGCS:return 1;case p.Tc.PE_TYPE_PROJCS:return 2}return 4},d.prototype.kv=function(){return this.Ld.kv()},d.ou=function(l,n){var a=l.getCode();if(0>=a&&0<(a=p.qf.getCode(l))){if((l=p.qf.coordsys(a))==null)throw p.i.O("Text to wkid mapping had failed: "+a);return d.ou(l,n)}if(n&&0<a&&(n=d.qx[a]))return n;n=p.Ab.zv(l,a,!1);var h=d.gK[n];return h||(l=0>=a?l:p.qf.coordsys(a),l=new p.JC(l),d.gK[n]=l,0<a&&(d.qx[a]=l),l)},d.eM=function(l){if(0>=l)throw p.i.O("Invalid or unsupported wkid: "+l);var n=d.qx[l];if(n!=null)return n;if((n=p.qf.coordsys(l))==null)throw p.i.O("Invalid or unsupported wkid: "+l);return(n=d.ou(n,!1)).cs()!=l&&(d.qx[l]=n),n},d.fM=function(l){if(l==null||l===void 0||l.length==0)throw p.i.O("Cannot create SpatialReference from null or empty text.");var n=null;try{n=p.qf.fromString(p.Tc.PE_TYPE_COORDSYS,l)}catch(a){throw p.i.O("Cannot create SpatialReference from text. "+a.message)}if(n===null)throw p.i.O("Cannot create SpatialReference from text. ");return d.ou(n,!0)},d.XC=function(l,n){var a,h=l.getCode();if(0>=h&&0<(h=p.qf.getCode(l))){if((h=p.qf.vertcs(h))===null)throw p.i.O();return d.XC(h,n)}if(n&&0<h&&(n=d.fK[h])||(l=p.Ab.zv(l,h,!1),n=d.hK[l]))return n;if(0>=h||(a=p.qf.vertcs(h)),a===null)throw p.i.O();return a=new p.KL(a),d.hK[l]=a,0<h&&(d.fK[h]=a),a},d.nI=function(l,n){if(n===null||n.B())return null;var a=new p.l;if(n!==null&&l.Tb()!=1){var h=l.tc(),f=h.gh();l=p.xr.Pr(l,h,null,null),(n=p.Gx.local().W(n,l,null)).A(a)}else f=l.gh(),n.A(a);return n=f.getPrimem().getLongitude(),f=f.getUnit().getUnitFactor(),new p.GC(a.v,a.G,a.C,a.H,n,f)},d.gD=function(l){var n={name:"",steps:[],_pt:null,_entry:null},a=0;for(l=l.getEntries();a<l.length;a++){var h=l[a],f={HY:!1,VY:"",UY:-1,geogtran:null};h.getDirection()===0?f.isInverse=!1:f.isInverse=!0;var m=h.getGeogtran().getCode();-1<m?f.wkid=m:f.wkt=h.getGeogtran().toString(),n.steps.push(f)}return n},d.SR=function(l,n,a,h){return a===void 0&&(a=null),a=d.nI(h,a),l=p.np.getGTlist(l.gh(),n.gh(),2,p.np.PE_GTLIST_OPTS_COMMON,a,1),n=null,l&&0<l.length&&(n=this.gD(l[0]),p.Lx.destroy(l)),a!==null&&a.destroy(),n},d.TR=function(l,n,a,h){var f;if(a===void 0&&(a=null),h===void 0&&(h=null),f===void 0&&(f=30),a=d.nI(h,a),l=p.np.getGTlist(l.gh(),n.gh(),2,p.np.PE_GTLIST_OPTS_COMMON,a,f),n=[],l&&0<l.length){for(f=0;f<l.length;f++)n.push(this.gD(l[f]));p.Lx.destroy(l)}return a!==null&&a.destroy(),n},d.qx={},d.gK={},d.fK={},d.hK={},d}(p.Gg);p.iu=P}(Q||(Q={})),function(p){var P,x;(x=P=p.ju||(p.ju={}))[x.Integer32=0]="Integer32",x[x.Integer64=1]="Integer64",x[x.FloatingPoint=2]="FloatingPoint";var d=function(){function l(){this.sp()}return l.prototype.assign=function(n){this.Hm=n.Hm,this.Im=n.Im,this.Rj=n.Rj,this.nA=n.nA,this.Ho=n.Ho,this.mA=n.mA,this.Kk=n.Kk,this.Oq=n.Oq,this.Nq=n.Nq,this.Tm=n.Tm},l.prototype.QF=function(){return this.Tm},l.prototype.sp=function(){this.Im=this.Hm=0,this.Rj=1,this.nA=0,this.Ho=1,this.mA=0,this.Nq=this.Oq=this.Kk=2220446049250313e-29,this.Tm=P.FloatingPoint},l.prototype.Wx=function(n,a,h){if(this.sp(),this.Tm=h,h!=P.FloatingPoint){var f=new p.l;n.cR(f),this.Hm=f.v,this.Im=f.G}else this.Im=this.Hm=-17976931348623157e292;(f=n.Re.getType())==p.Tc.PE_TYPE_GEOGCS?(f=(h==P.Integer64?1e-9:1/18e5)*n.bf(),this.Rj=1/f):f==p.Tc.PE_TYPE_PROJCS&&(f=(h==P.Integer64?1e-4:.001)*n.rm(),this.Rj=1/f),a!=null?(f=(h==P.Integer32?.001:1e-4)*a.DH,this.Ho=1/f):this.Ho=1e4,this.TM(),this.Kk=n.uw,this.Oq=a!=null?.001*a.DH:.001,this.Nq=2220446049250313e-29},l.prototype.TM=function(){if(this.Tm!=P.FloatingPoint){var n=this.Tm==P.Integer64?p.Gg.VN:p.Gg.UN,a=n/this.Rj,h=this.Hm+a,f=p.P.truncate((h-this.Hm)*this.Rj);f>n&&(this.Rj=n/(h-this.Hm)),a=this.Im+a,(f=p.P.truncate((a-this.Im)*this.Rj))>n&&(this.Rj=n/(a-this.Im))}},l.prototype.WB=function(n){switch(n){case 0:this.Kk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},l.prototype.Mn=function(n){switch(n){case 0:return this.Kk;case 1:return this.Oq;case 2:return this.Nq}return 0},l.prototype.pz=function(n){if(this.Tm==P.FloatingPoint)return 0;switch(n){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Ho;default:return 0}},l.prototype.toString=function(){var n="SRPD [m_toleranceXY: "+this.Kk.toString();return(n=(n=(n=(n=(n=(n=(n=(n=(n=n+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.nA.toString())+";m_unitsZ: "+this.Ho.toString())+";m_falseM: "+this.mA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},l}();p.UL=d}(Q||(Q={})),function(p){function P(h,f){return 89.99999<f?f=89.99999:-89.99999>f&&(f=-89.99999),f*=.017453292519943,[111319.49079327169*h,31890685e-1*Math.log((1+Math.sin(f))/(1-Math.sin(f)))]}function x(h,f,m){return h=h/6378137*57.29577951308232,m?[h,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*f/6378137)))]:[h-360*Math.floor((h+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*f/6378137)))]}function d(h,f,m){var y=h.Qf();if(h.K()===33)f=f(y.Ng(),y.kh()),y.Db(f[0],f[1]);else if(h.K()===197){var w=f(h.gs(),h.js(),m);f=f(h.fs(),h.hs(),m),y.L(w[0],w[1],f[0],f[1])}else for(w=new p.h,h=0;h<y.I();h++){y.D(h,w);var I=f(w.x,w.y,m);w.na(I[0],I[1]),y.Db(h,w)}return y}function l(h){return d(h,x,!0)}function n(h){return d(h,P,!0)}var a=Math.PI/180;p.PK=function(){function h(){}return h.xu=function(f){var m=Math.sqrt(.006694379990197414),y=Math.sin(f.y*a);return p.h.construct(6378137*f.x*a,3.1677196636462314e6*(y/(1-.006694379990197414*y*y)-1/(2*m)*Math.log((1-m*y)/(1+m*y))))},h.Ux=function(f,m,y,w){var I=.0033528106647474805,M=Math.sin(y);y=Math.cos(y);var T=(1-I)*Math.tan(f),$=T*(f=1/Math.sqrt(1+T*T)),F=Math.atan2(T,y),R=(T=f*M)*T,j=1-R,H=27233160610754688e-5*j/4040829998466145e-2,W=1+H/16384*(4096+H*(H*(320-175*H)-768)),V=H/1024*(256+H*(H*(74-47*H)-128));H=w/(635675231424518e-8*W);for(var Y,se,re,he=2*Math.PI;1e-12<Math.abs(H-he);)re=Math.cos(2*F+H),he=H,H=w/(635675231424518e-8*W)+V*(Y=Math.sin(H))*(re+V/4*((se=Math.cos(H))*(2*re*re-1)-V/6*re*(4*Y*Y-3)*(4*re*re-3)));return w=$*Y-f*se*y,j=I/16*j*(4+I*(4-3*j)),p.h.construct((m+(Math.atan2(Y*M,f*se-$*Y*y)-(1-j)*I*T*(H+j*Y*(re+j*se*(2*re*re-1)))))/a,Math.atan2($*se+f*Y*y,(1-I)*Math.sqrt(R+w*w))/a)},h.HM=function(f,m,y,w){var I=.0033528106647474805,M=w-m,T=Math.atan((1-I)*Math.tan(f)),$=Math.atan((1-I)*Math.tan(y)),F=Math.sin(T);T=Math.cos(T);var R=Math.sin($);$=Math.cos($);var j=M,H=1e3;do{var W=Math.sin(j),V=Math.cos(j),Y=Math.sqrt($*W*$*W+(T*R-F*$*V)*(T*R-F*$*V));if(Y===0)return 0;V=F*R+T*$*V;var se=Math.atan2(Y,V),re=T*$*W/Y,he=1-re*re;W=V-2*F*R/he,isNaN(W)&&(W=0);var ue=I/16*he*(4+I*(4-3*he)),we=j;j=M+(1-ue)*I*re*(se+ue*Y*(W+ue*V*(2*W*W-1)))}while(1e-12<Math.abs(j-we)&&0<--H);return H===0?(F=w-m,{azimuth:Math.atan2(Math.sin(F)*Math.cos(y),Math.cos(f)*Math.sin(y)-Math.sin(f)*Math.cos(y)*Math.cos(F)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos(w-m))}):(m=(f=27233160610754688e-5*he/4040829998466145e-2)/1024*(256+f*(f*(74-47*f)-128)),{azimuth:Math.atan2($*Math.sin(j),T*R-F*$*Math.cos(j)),TQ:635675231424518e-8*(1+f/16384*(4096+f*(f*(320-175*f)-768)))*(se-m*Y*(W+m/4*(V*(2*W*W-1)-m/6*W*(4*Y*Y-3)*(4*W*W-3)))),TY:Math.atan2(T*Math.sin(j),T*R*Math.cos(j)-F*$)})},h.eQ=function(f){var m=f.hasAttribute(1),y=f.hasAttribute(2),w=[],I=f.ea(),M=null,T=null;m&&(M=f.vb(1)),y&&(T=f.vb(2));for(var $=new p.h,F=0;F<I;F++){for(var R=f.Ca(F),j=f.Ka(F),H=0,W=0,V=NaN,Y=NaN,se=NaN,re=NaN,he=f.ec(F),ue=[],we=R;we<R+j;we++){f.D(we,$),re=se=NaN;var Te=[$.x,$.y];m&&(se=M.get(we),Te.push(se)),y&&(I=T.get(we),Te.push(re)),we==R&&he&&(H=$.x,W=$.y,V=se,Y=re),ue.push(Te)}!he||H==$.x&&W==$.y&&(!m||isNaN(V)&&isNaN(se)||V==se)&&(!y||isNaN(Y)&&isNaN(re)||Y==re)||ue.push(ue[0].slice(0)),w.push(ue)}return w},h.Ry=function(f,m){f=h.eQ(f),637.100877141506>m&&(m=637.100877141506);for(var y,w=[],I=0;I<f.length;I++){var M,T,$=f[I];w.push(y=[]),y.push([$[0][0],$[0][1]]);var F=$[0][0]*a,R=$[0][1]*a;for(M=0;M<$.length-1;M++){var j=$[M+1][0]*a,H=$[M+1][1]*a;if(F!==j||R!==H){j=(H=h.HM(R,F,H,j)).azimuth;var W=(H=H.TQ)/m;if(1<W){for(T=1;T<=W-1;T++){var V=h.Ux(R,F,j,T*m);y.push([V.x,V.y])}T=h.Ux(R,F,j,(H+Math.floor(W-1)*m)/2),y.push([T.x,T.y])}R=h.Ux(R,F,j,H),y.push([R.x,R.y]),F=R.x*a,R=R.y*a}}}return{lJ:w}},h.SQ=function(f){for(var m=[],y=0;y<f.length;y++){var w=f[y];w=h.Ry(w,1e4),m.push(w)}f=[];for(var I=0;I<m.length;I++){w=m[I];var M=0;for(y=0;y<w.lJ.length;y++){var T,$=w.lJ[y],F=h.xu(p.h.construct($[0][0],$[0][1])),R=h.xu(p.h.construct($[$.length-1][0],$[$.length-1][1])),j=R.x*F.y-F.x*R.y;for(T=0;T<$.length-1;T++)F=h.xu(p.h.construct($[T+1][0],$[T+1][1])),j+=(R=h.xu(p.h.construct($[T][0],$[T][1]))).x*F.y-F.x*R.y;M+=j}M/=1,f.push(M/-2)}return f},h}(),p.cb=function(){function h(){}return h.sB=function(f,m,y,w,I,M,T){h.bD[f.dc()]=m,isNaN(y)==0&&(h.hD[f.dc()]=y),isNaN(w)==0&&(h.uD[f.dc()]=w),isNaN(I)==0&&(h.WC[f.dc()]=I),h.iD[f.dc()]=M,T!==null&&(h.jD[f.dc()]=T)},h.Yw=function(f,m,y){h.nD[f.dc()+"-"+m.dc()]=y},h.tc=function(f){if((f=h.bD[f.dc()])==null)throw p.i.Fe();return f},h.bf=function(f){if((f=h.hD[f.dc()])==null)throw p.i.Fe();return f},h.xv=function(f){if((f=h.uD[f.dc()])==null)throw p.i.Fe();return f},h.gv=function(f){if((f=h.WC[f.dc()])==null)throw p.i.Fe();return f},h.ih=function(f){if((f=h.jD[f.dc()])==null)throw p.i.Fe();return p.l.construct(f[0],f[1],f[2],f[3])},h.Xc=function(f){if((f=h.iD[f.dc()])==null)throw p.i.Fe();return f},h.Bh=function(f,m,y){if(m.Nb(y))return f;var w=h.nD[m.dc()+"-"+y.dc()];if(w!==void 0)return w(f,m,y);throw p.i.Fe()},h.wt=function(){throw p.i.Fe()},h.XQ=function(){throw p.i.Fe()},h.ZV=function(){throw p.i.Fe()},h.ol=function(){throw p.i.Fe()},h.nW=function(){var f=p.Gg.create(102100),m=p.Gg.create(3857),y=p.Gg.create(4326);p.cb.sB(f,y,NaN,NaN,NaN,!1,null),p.cb.sB(y,y,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),p.cb.sB(m,y,NaN,NaN,NaN,!1,null),p.cb.Yw(f,y,l),p.cb.Yw(y,f,n),p.cb.Yw(m,y,l),p.cb.Yw(y,m,n)},h.bD=[],h.hD=[],h.uD=[],h.WC=[],h.iD=[],h.jD=[],h.nD=[],h}()}(Q||(Q={})),Q.cb.nW(),function(p){var P=function(){function x(d){this.o=new Int32Array(0),this.ko=-1,this.Jg=this.size=this.Dl=0,this.Mf=d}return x.prototype.kd=function(d){d<this.Dl?(this.o[d*this.Mf]=this.ko,this.ko=d):this.Dl--,this.size--},x.prototype.U=function(d,l){return this.o[d*this.Mf+l]},x.prototype.T=function(d,l,n){this.o[d*this.Mf+l]=n},x.prototype.De=function(){var d=this.ko;if(d==-1){if(this.Dl==this.Jg){if(2147483647<(d=this.Jg!=0?p.P.truncate(3*(this.Jg+1)/2):1)&&(d=2147483647),d==this.Jg)throw p.i.de();this.yz(d)}d=this.Dl,this.Dl++}else this.ko=this.o[d*this.Mf];this.size++;for(var l=d*this.Mf;l<d*this.Mf+this.Mf;l++)this.o[l]=-1;return d},x.prototype.Nl=function(d){var l=this.ko;if(l==-1){if(this.Dl==this.Jg){if(2147483647<(l=this.Jg!=0?p.P.truncate(3*(this.Jg+1)/2):1)&&(l=2147483647),l==this.Jg)throw p.i.de();this.yz(l)}l=this.Dl,this.Dl++}else this.ko=this.o[l*this.Mf];this.size++;for(var n=l*this.Mf,a=0;a<d.length;a++)this.o[n+a]=d[a];return l},x.prototype.oj=function(d){this.ko=-1,this.size=this.Dl=0,d&&(this.o=null,this.Jg=0)},x.prototype.Ee=function(d){d>this.Jg&&this.yz(d)},x.prototype.sx=function(d,l){d*=this.Mf,l*=this.Mf;for(var n=0;n<this.Mf;n++){var a=this.o[l+n];this.o[l+n]=this.o[d+n],this.o[d+n]=a}},x.prototype.bC=function(d,l,n){var a=this.o[this.Mf*l+n];this.o[this.Mf*l+n]=this.o[this.Mf*d+n],this.o[this.Mf*d+n]=a},x.GG=function(d){return 0<=d},x.prototype.yz=function(d){this.o==null&&(this.o=new Int32Array(0));var l=new Int32Array(this.Mf*d);l.set(this.o,0),this.o=l,this.Jg=d},x}();p.ad=P}(Q||(Q={})),function(p){var P,x;(x=P||(P={}))[x.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",x[x.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",x[x.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",x[x.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var d=function(){function n(a){this.Ce=a,this.Ah=NaN,this.$G=new p.jg,this.aH=new p.jg,this.os=new p.Oc,this.ps=new p.Oc}return n.prototype.compare=function(a,h,f){if(a=a.ka(f),this.Ce.kB(h,this.$G),this.Ce.kB(a,this.aH),h=this.$G.get(),a=this.aH.get(),this.os.L(h.ta,h.qa),this.ps.L(a.ta,a.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;f=h.oa==h.ma;var m=a.oa==a.ma;if(f||m){if(f&&m)return 0;if(h.oa==a.oa&&h.ta==a.ta)return f?1:-1;if(h.ma==a.ma&&h.qa==a.qa)return f?-1:1}return(f=h.Me(this.Ah,this.os.pa))==(m=a.Me(this.Ah,this.ps.pa))&&((m=.5*((f=Math.min(h.ma,a.ma))+this.Ah))==this.Ah&&(m=f),f=h.Me(m,this.os.pa),m=a.Me(m,this.ps.pa)),f<m?-1:f>m?1:0},n.prototype.WJ=function(a){this.Ah=a},n}(),l=function(){function n(a){this.ib=a,this.RH=new p.jg,this.Cf=new p.h,this.rA=new p.Oc}return n.prototype.fX=function(a){this.Cf.N(a)},n.prototype.compare=function(a,h){return this.ib.kB(a.ka(h),this.RH),a=this.RH.get(),this.rA.L(a.ta,a.qa),this.Cf.x<this.rA.pa?-1:this.Cf.x>this.rA.wa?1:(a=a.Me(this.Cf.y,this.Cf.x),this.Cf.x<a?-1:this.Cf.x>a?1:0)},n}();P=function(){function n(){this.cH=this.Fi=this.Ii=this.fA=this.$n=this.ze=this.Lc=this.lh=this.he=null,this.Io=this.yg=-1,this.bH=!0,this.kA=!1,this.gA=NaN,this.Pi=new p.Nd,this.XN=2147483647,this.WN=p.P.truncate(-2147483648),this.eg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return n.prototype.ty=function(a){this.gA=a},n.prototype.$m=function(){this.he==null&&(this.he=new p.ad(8));var a=this.he.De();return this.he.T(a,1,0),a},n.prototype.qU=function(){this.Lc==null&&(this.Lc=new p.ad(8));var a=this.Lc.De();this.Lc.T(a,2,0),this.Lc.T(a,3,0);var h=this.Lc.De();return this.Lc.T(h,2,0),this.Lc.T(h,3,0),this.EJ(a,h),this.EJ(h,a),a},n.prototype.hI=function(){this.ze==null&&(this.ze=new p.ad(8));var a=this.ze.De();return this.ze.T(a,2,0),a},n.prototype.OW=function(a,h){this.he.T(a,7,h)},n.prototype.on=function(a,h){this.he.T(a,2,h)},n.prototype.NW=function(a,h){this.he.T(a,1,h)},n.prototype.gX=function(a,h){this.he.T(a,3,h)},n.prototype.dX=function(a,h){this.he.T(a,4,h)},n.prototype.er=function(a,h){this.he.T(a,5,h)},n.prototype.$Q=function(a){return this.he.U(a,5)},n.prototype.MW=function(a,h){this.he.T(a,6,h)},n.prototype.YM=function(a,h){this.MW(h,a)},n.prototype.DJ=function(a,h){this.Lc.T(a,1,h)},n.prototype.EJ=function(a,h){this.Lc.T(a,4,h)},n.prototype.Vl=function(a,h){this.Lc.T(a,5,h)},n.prototype.Ul=function(a,h){this.Lc.T(a,6,h)},n.prototype.VW=function(a,h){this.Lc.T(a,2,h)},n.prototype.cx=function(a,h){this.Lc.T(a,3,h)},n.prototype.GF=function(a){return this.Lc.U(a,3)},n.prototype.Ht=function(a,h){this.Lc.T(a,7,h)},n.prototype.zK=function(a,h){if(this.om(a)!=-1)for(h=h?-1:a,a=this.om(a);a!=-1;a=this.ls(a))this.g.Sa(this.vj(a),this.Eq,h)},n.prototype.xx=function(a,h){a!=-1&&(this.zK(a,h),this.zK(this.ya(a),h))},n.prototype.Et=function(a,h){this.ze.T(a,1,h)},n.prototype.Xg=function(a,h){this.ze.T(a,2,h)},n.prototype.ln=function(a,h){this.ze.T(a,3,h),this.IW(a,this.ZQ(h)),this.HW(h,a)},n.prototype.HW=function(a,h){this.ze.T(a,4,h)},n.prototype.IW=function(a,h){this.ze.T(a,5,h)},n.prototype.yJ=function(a,h){this.ze.T(a,6,h)},n.prototype.wJ=function(a,h){this.ze.T(a,7,h)},n.prototype.vJ=function(a,h){this.$n.write(a,h)},n.prototype.xJ=function(a,h){this.fA.write(a,h)},n.prototype.gY=function(a){var h=0,f=0,m=this.vF(a),y=new p.h,w=new p.h,I=new p.h;this.$r(m,y),w.N(y);var M=m;do this.nm(M,I),f+=p.h.ub(w,I),this.$e(this.ya(M))!=a&&(h+=(I.x-y.x-(w.x-y.x))*(I.y-y.y+(w.y-y.y))*.5),w.N(I),M=this.kc(M);while(M!=m);this.$n.write(a,h),this.fA.write(a,f)},n.prototype.KU=function(a,h){var f=new d(this),m=new p.$j;m.Ee(p.P.truncate(this.xa/2)),m.Xo(f);for(var y=new p.ja(0),w=this.bh(),I=null,M=0,T=new p.h,$=this.Oe;$!=-1;$=this.Tf($)){if((255&++M)==0&&h!=null&&!h.progress(-1,-1))throw p.i.RC();var F=this.Je($);if(F!=-1){if(y.Dh(0),!this.cY(m,w,y,F)){this.D($,T),f.WJ(T.y);var R=F;do{var j=this.Bb(R,w);j!=-1&&(m.wd(j,-1),this.Kb(R,w,-2)),R=this.kc(this.ya(R))}while(F!=R);R=F;do(j=this.Bb(R,w))==-1&&(j=m.addElement(R,-1),y.add(j)),R=this.kc(this.ya(R));while(F!=R)}for(F=y.size-1;0<=F;F--)j=y.get(F),R=m.ka(j),this.Kb(this.ya(R),w,j),this.JU(m,j,a)}else this.Yy($)==-1&&(I==null&&(I=new l(this)),this.D($,T),I.fX(T),R=m.DW(I),F=this.Jl,R!=-1&&(j=m.ka(R),this.$e(j)==this.$e(this.ya(j))&&(j=this.JF(m,R)),j!=-1&&(F=this.$e(j))),this.YM(F,$))}this.Lg(w)},n.prototype.JU=function(a,h,f){var m=a.ka(h),y=this.$e(m);if(this.In(y)==-1){var w=this.JF(a,h),I=this.ya(m),M=this.$e(I);this.Mp(y),this.Mp(M);var T=this.In(y),$=this.In(M);if(w==-1&&T==-1&&(M==y?(this.ln(M,this.Jl),T=$=this.Jl):($==-1&&(this.ln(M,this.Jl),$=this.Jl),this.ln(y,M),T=M)),w!=-1){var F=this.$e(w);$==-1&&(0>=this.Mp(F)?($=this.In(F),this.ln(M,$)):(this.ln(M,F),$=F),M==y&&(T=$))}T==-1&&this.dY(y,M),f==0?this.eW(a,h,m,w,y,M):f==5?this.fW(a,h,m,I,y,M):f==4&&this.dW(m,w,y,M)}},n.prototype.eW=function(a,h,f,m,y,w){var I=this.jk(y);if(m!=-1){var M=this.jk(w),T=this.jk(this.$e(m));m=I&M&T,T^=T&this.fh(f),(T|=m)!=0&&(this.Xg(w,M|T),this.Xg(y,T|I),I=I||T)}for(h=a.lb(h);h!=-1&&(m=a.ka(h),f=this.$e(this.ya(m)),y=this.jk(f),w=this.fh(m),M=this.$e(m),m=y&(T=this.jk(M))&I,I^=I&w,(I|=m)!=0);h=a.lb(h))this.Xg(f,y|I),this.Xg(M,T|I)},n.prototype.fW=function(a,h,f,m,y,w){if(y!=w){f=this.Bb(f,this.eg),f+=this.Bb(m,this.eg),m=0;var I=new p.ja(0),M=new p.ja(0);M.add(0);for(var T=a.sc(-1);T!=h;T=a.lb(T)){var $=a.ka(T),F=this.ya($),R=this.$e($),j=this.$e(F);if(R!=j){if($=this.Bb($,this.eg),m+=$+=this.Bb(F,this.eg),F=!1,I.size!=0&&I.Gc()==j&&(M.Jf(),I.Jf(),F=!0),this.In(j)==-1)throw p.i.Ra();F&&this.In(j)==R||(M.add(m),I.add(R))}}m+=f,I.size!=0&&I.Gc()==w&&(M.Jf(),I.Jf()),m!=0?M.Gc()==0&&(a=this.g.md,a=this.Ma(a),this.Xg(y,a)):M.Gc()!=0&&(a=this.g.md,a=this.Ma(a),this.Xg(y,a))}},n.prototype.dW=function(a,h,f,m){var y=this.Ma(this.g.md);if(h==-1)this.Xg(m,this.Io),(1&(a=this.Bb(a,this.yg)))!=0?this.Xg(f,y):this.Xg(f,this.Io);else{var w=this.jk(m);w==0?(w=this.jk(this.$e(h)),this.Xg(m,w),(1&(a=this.Bb(a,this.yg)))!=0?this.Xg(f,w==y?this.Io:y):this.Xg(f,w)):(1&(a=this.Bb(a,this.yg)))!=0?this.Xg(f,w==y?this.Io:y):this.Xg(f,w)}},n.prototype.cY=function(a,h,f,m){var y=m,w=-1,I=-1,M=0;do{if(M==2)return!1;var T=this.Bb(y,h);if(T!=-1){if(w!=-1)return!1;w=T}else{if(I!=-1)return!1;I=y}M++,y=this.kc(this.ya(y))}while(m!=y);return I!=-1&&w!=-1&&(this.Kb(a.ka(w),h,-2),a.Uj(w,I),f.add(w),!0)},n.prototype.dY=function(a,h){var f=this.Mp(a);if(f!=0){var m=this.Mp(h);0<f&&0>m||0>f&&0<m?this.ln(a,h):(h=this.In(h))!=-1&&this.ln(a,h)}},n.prototype.qP=function(a,h){this.Eq=this.g.Hd();for(var f=0,m=h.size;f<m;f++){var y=h.get(f),w=this.g.Qa(y,this.Em),I=this.g.Sf(this.g.cd(y)),M=this.g.jc(I);if(p.ba.Ic(M)){var T=this.g.V(y);if(T!=-1){var $=this.g.Qa(T,this.Em);if(w!=$){var F=this.qU(),R=this.ya(F),j=this.lh.De();this.lh.T(j,0,y),this.lh.T(j,1,-1),this.Ht(F,j),this.DJ(F,w),(j=this.Je(w))==-1?(this.on(w,F),this.Vl(F,R),this.Ul(R,F)):(w=this.ue(j),this.Vl(j,R),this.Ul(R,j),this.Ul(w,F),this.Vl(F,w)),this.DJ(R,$),(w=this.Je($))==-1?(this.on($,R),this.Ul(F,R),this.Vl(R,F)):($=this.ue(w),this.Vl(w,F),this.Ul(F,w),this.Ul($,R),this.Vl(R,$)),I=this.Ma(I),a==0?(this.Kb(R,this.be,0),this.Kb(F,this.be,M==1736?I:0)):a==5?($=new p.h,this.g.D(y,$),y=new p.h,this.g.D(T,y),w=T=0,0>$.compare(y)?T=1:w=-1,this.Kb(R,this.be,0),this.Kb(F,this.be,0),this.Kb(F,this.eg,T),this.Kb(R,this.eg,w)):a==7?(this.Kb(R,this.be,this.Io),this.Kb(F,this.be,M==1736?I:0)):a==4&&(this.Kb(R,this.be,0),this.Kb(F,this.be,0),this.Kb(F,this.yg,1),this.Kb(R,this.yg,1)),M=M==1736?this.WN:0,this.cx(F,I|M),this.cx(R,I|M)}}}}},n.prototype.QT=function(a,h){var f=this.om(h);if(f!=-1){var m=this.om(a);this.lh.T(f,1,m),this.Ht(a,f),this.Ht(h,-1)}a=this.ya(a),h=this.ya(h),(f=this.om(h))!=-1&&(m=this.om(a),this.lh.T(f,1,m),this.Ht(a,f),this.Ht(h,-1))},n.prototype.EX=function(a){function h(se,re){return m.CO(se,re)}var f=new p.ja(0);f.Jb(10);for(var m=this,y=this.Oe;y!=-1;y=this.Tf(y)){f.clear(!1);var w=this.Je(y);if(w!=-1){var I=w;do f.add(I),I=this.kc(this.ya(I));while(I!=w);if(1<f.size){if(I=!0,2<f.size)f.Wd(0,f.size,h),f.add(f.get(0));else if(0<this.BO(f.get(0),f.get(1))){var M=f.get(0);f.set(0,f.get(1)),f.set(1,M)}else I=!1;for(var T=M=f.get(0),$=this.vf(T),F=this.ya(T),R=-1,j=1,H=f.size;j<H;j++){var W=f.get(j),V=this.ya(W),Y=this.lk(V);if(Y==$&&W!=T){if(a==0)R=this.GF(T)|this.GF(W),this.cx(T,R),this.cx(F,R),this.Kb(T,this.be,this.Bb(T,this.be)|this.Bb(W,this.be)),this.Kb(F,this.be,this.Bb(F,this.be)|this.Bb(V,this.be));else if(this.eg!=-1)R=this.Bb(T,this.eg)+this.Bb(W,this.eg),V=this.Bb(F,this.eg)+this.Bb(V,this.eg),this.Kb(T,this.eg,R),this.Kb(F,this.eg,V);else{if(a==7)return void(this.Pi=new p.Nd(5,y,-1));this.yg!=-1&&(R=this.Bb(T,this.yg)+this.Bb(W,this.yg),V=this.Bb(F,this.yg)+this.Bb(V,this.yg),this.Kb(T,this.yg,R),this.Kb(F,this.yg,V))}this.QT(T,W),this.Gy(W),R=T,f.set(j,-1),W==M&&(f.set(0,-1),M=-1)}else this.xx(R,!1),R=-1,T=W,$=Y,F=V}if(this.xx(R,!1),R=-1,I){for(M=-1,j=0,H=f.size;j<H;j++)if((W=f.get(j))!=-1){if(M==-1)T=M=W,$=this.vf(T),F=this.ya(T);else if(W!=T&&(V=this.ya(W),Y=this.lk(V),this.Ul(F,W),this.Vl(W,F),T=W,$=Y,F=V,a==7&&(this.Bb(W,this.be)|this.Bb(this.ue(W),this.be))==(1|this.Io)))return void(this.Pi=new p.Nd(5,y,-1))}this.on(y,M)}else{for(M=-1,j=0,H=f.size;j<H;j++)if((W=f.get(j))!=-1){M=W;break}w!=M&&this.on(y,M)}}}}},n.prototype.RN=function(){for(var a=-1,h=this.bh(),f=this.Oe;f!=-1;f=this.Tf(f)){var m=this.Je(f);if(m!=-1){var y=m;do{if(this.Bb(y,h)!=1){var w=this.hI();this.Et(w,y),this.wJ(w,a),a!=-1&&this.yJ(a,w),a=w;var I=0,M=y;do I|=this.Bb(M,this.be),this.VW(M,w),this.Kb(M,h,1),M=this.kc(M);while(M!=y);this.Xg(w,I)}y=this.kc(this.ya(y))}while(y!=m)}}w=this.hI(),this.Et(w,-1),this.wJ(w,a),a!=-1&&this.yJ(a,w),this.Jl=w,this.$n=p.ce.rf(this.ze.size,NaN),this.fA=p.ce.rf(this.ze.size,NaN),this.vJ(this.Jl,1/0),this.xJ(this.Jl,1/0),this.Lg(h)},n.prototype.mR=function(a,h,f){if((h=h!=-1?h:this.Je(a))==-1)return-1;for(a=h;;){if(this.Bb(h,f)!=1)return h;if((h=this.kc(this.ya(h)))==a)return-1}},n.prototype.tW=function(){for(var a=this.bh(),h=this.Oe;h!=-1;h=this.Tf(h))for(var f=-1;;){var m=this.mR(h,f,a);if(m==-1)break;f=this.kc(this.ya(m));for(var y=m;;){var w=this.kc(y),I=this.ue(y),M=this.ya(y);if(I==M){if(this.DP(y),f!=y&&f!=M||(f=-1),y==m||I==m){if(y==(m=w)||I==m)break;y=w;continue}}else this.Kb(y,a,1);if((y=w)==m)break}}this.Lg(a)},n.prototype.HB=function(a,h,f,m,y){this.Wg(),this.bH=y,this.g=a,this.Dq=this.g.WE(),(a=new p.ja(0)).Jb(f!=null?this.g.I(f.get(0)):this.g.gd);var w=0,I=1,M=f!=null?f.get(0):this.g.md;for(y=1;M!=-1;){this.g.CJ(M,this.Dq,I),I<<=1;for(var T=this.g.Ob(M);T!=-1;T=this.g.Sb(T))for(var $=this.g.Ya(T),F=0,R=this.g.Ka(T);F<R;F++)a.add($),$=this.g.V($);p.ba.Tn(this.g.jc(M))||(w+=this.g.ea(M)),f!=null?(M=y<f.size?f.get(y):-1,y++):M=this.g.ve(M)}for(this.Io=I,this.xa=a.size,this.g.nx(a,this.xa),this.lh==null&&(this.lh=new p.ad(2),this.he=new p.ad(8),this.Lc=new p.ad(8),this.ze=new p.ad(8)),this.lh.Ee(this.xa),p.op.Bp(m),this.he.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,w)),this.Em=this.g.Hd(),f=new p.h,y=0,w=new p.h,f.Sc(),I=0;I<=this.xa;I++)if(I<this.xa?($=a.get(I),this.g.D($,w)):w.Sc(),!f.rb(w)){if(y<I){for($=this.$m(),R=F=-1;y<I;y++)R=a.get(y),this.g.Sa(R,this.Em,$),M=this.lh.De(),this.lh.T(M,0,R),this.lh.T(M,1,F),F=M,T=this.g.cd(R),M=this.g.Sf(T),M=this.Ma(M),this.NW($,this.yd($)|M);this.OW($,F),this.er($,this.g.Va(R)),this.Qs!=-1&&this.dX(this.Qs,$),this.gX($,this.Qs),this.Qs=$,this.Oe==-1&&(this.Oe=$)}y=I,f.N(w)}p.op.Bp(m),this.be=this.bh(),h==5&&(this.eg=this.bh()),h==4&&(this.yg=this.bh()),this.qP(h,a),this.Pi.Lj==0&&(this.EX(h),this.Pi.Lj==0&&(isNaN(this.gA)||this.sO()?(this.RN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.bH&&this.KU(h,m))):this.kA=!0))},n.prototype.Gy=function(a){var h=this.kc(a),f=this.ue(a),m=this.ya(a),y=this.kc(m),w=this.ue(m);h!=m&&(this.Ul(w,h),this.Vl(h,w)),f!=m&&(this.Ul(f,y),this.Vl(y,f)),f=this.lk(a),this.Je(f)==a&&(y!=a?this.on(f,y):this.on(f,-1)),y=this.lk(m),this.Je(y)==m&&(h!=m?this.on(y,h):this.on(y,-1)),this.Lc.kd(a),this.Lc.kd(m)},n.prototype.JF=function(a,h){for(;;){if((h=a.xe(h))==-1)return-1;var f=a.ka(h);if(this.$e(f)!=this.$e(this.ya(f)))return f}},n.prototype.fr=function(a,h){var f;f===void 0&&(f=!0),this.HB(a,0,null,h,f)},n.prototype.qJ=function(a,h,f){var m=new p.ja(0);m.add(h),this.HB(a,4,m,f,a.jc(h)==1736)},n.prototype.rJ=function(a,h,f){var m=new p.ja(0);m.add(h),this.HB(a,5,m,f,!0)},n.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.sW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.eg!=-1&&(this.Lg(this.eg),this.eg=-1),this.yg!=-1&&(this.Lg(this.yg),this.yg=-1),this.g=null,this.he.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.cH!=null&&(this.cH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.$n=null)},n.prototype.Je=function(a){return this.he.U(a,2)},n.prototype.D=function(a,h){this.g.ZF(this.$Q(a),h)},n.prototype.yd=function(a){return this.he.U(a,1)},n.prototype.Tf=function(a){return this.he.U(a,4)},n.prototype.Yy=function(a){return this.he.U(a,6)},n.prototype.mm=function(a){return this.he.U(a,7)},n.prototype.ls=function(a){return this.lh.U(a,1)},n.prototype.vj=function(a){return this.lh.U(a,0)},n.prototype.og=function(a,h){return(h=this.Fi[h]).size<=a?-1:h.read(a)},n.prototype.pn=function(a,h,f){(h=this.Fi[h]).size<=a&&h.resize(this.he.size,-1),h.write(a,f)},n.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var a=p.ja.rf(this.he.Jg,-1),h=0,f=this.Fi.length;h<f;h++)if(this.Fi[h]==null)return this.Fi[h]=a,h;return this.Fi.push(a),this.Fi.length-1},n.prototype.Gp=function(a){this.Fi[a]=null},n.prototype.lk=function(a){return this.Lc.U(a,1)},n.prototype.vf=function(a){return this.lk(this.ya(a))},n.prototype.ya=function(a){return this.Lc.U(a,4)},n.prototype.ue=function(a){return this.Lc.U(a,5)},n.prototype.kc=function(a){return this.Lc.U(a,6)},n.prototype.$e=function(a){return this.Lc.U(a,2)},n.prototype.af=function(a){return this.jk(this.Lc.U(a,2))},n.prototype.om=function(a){return this.Lc.U(a,7)},n.prototype.$r=function(a,h){this.D(this.lk(a),h)},n.prototype.nm=function(a,h){this.D(this.vf(a),h)},n.prototype.fh=function(a){return this.Lc.U(a,3)&this.XN},n.prototype.Bb=function(a,h){return(h=this.Ii[h]).size<=a?-1:h.read(a)},n.prototype.Kb=function(a,h,f){(h=this.Ii[h]).size<=a&&h.resize(this.Lc.size,-1),h.write(a,f)},n.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var a=p.ja.rf(this.Lc.Jg,-1),h=0,f=this.Ii.length;h<f;h++)if(this.Ii[h]==null)return this.Ii[h]=a,h;return this.Ii.push(a),this.Ii.length-1},n.prototype.Lg=function(a){this.Ii[a]=null},n.prototype.DP=function(a){var h=this.$e(a),f=this.ya(a),m=this.kc(a);m==f&&(m=this.kc(m))==a&&(m=-1);var y=this.vF(h);y!==a&&y!=f||this.Et(h,m),f=this.$n.read(h),isNaN(f)||(this.vJ(h,NaN),this.xJ(h,NaN)),this.xx(a,!0),this.Gy(a)},n.prototype.EP=function(a){for(var h=0,f=a.size;h<f;h++){var m=a.get(h),y=this.$e(this.ya(m));this.Et(this.$e(m),-1),this.Et(y,-1),this.xx(m,!0),this.Gy(m)}},n.prototype.vF=function(a){return this.ze.U(a,1)},n.prototype.jk=function(a){return this.ze.U(a,2)},n.prototype.In=function(a){return this.ze.U(a,3)},n.prototype.ZQ=function(a){return this.ze.U(a,4)},n.prototype.Mp=function(a){var h=this.$n.read(a);return isNaN(h)&&(this.gY(a),h=this.$n.read(a)),h},n.prototype.Ma=function(a){return this.g.FF(a,this.Dq)},n.prototype.Ie=function(a){return this.g.Qa(a,this.Em)},n.prototype.oR=function(a){return this.g.Qa(a,this.Eq)},n.prototype.nR=function(a,h){var f=this.Je(a);if(f==-1)return-1;var m=f,y=-1,w=-1;do{if(this.vf(m)==h)return m;if(y==-1){if((y=this.Je(h))==-1)break;w=y}if(this.vf(w)==a)return this.ya(w);m=this.kc(this.ya(m)),w=this.kc(this.ya(w))}while(m!=f&&w!=y);return-1},n.prototype.kB=function(a,h){h.Qr(),h=h.get();var f=new p.h;this.$r(a,f),h.Ec(f),this.nm(a,f),h.Rc(f)},n.prototype.CO=function(a,h){if(a==h)return 0;var f=new p.h;this.nm(a,f);var m=new p.h;return this.nm(h,m),f.rb(m)?0:(h=new p.h,this.$r(a,h),(a=new p.h).vc(f,h),(f=new p.h).vc(m,h),p.h.pu(a,f))},n.prototype.BO=function(a,h){if(a==h)return 0;var f=new p.h;this.nm(a,f);var m=new p.h;return this.nm(h,m),f.rb(m)?0:(h=new p.h,this.$r(a,h),(a=new p.h).vc(f,h),(f=new p.h).vc(m,h),0<=f.y&&0<a.y?p.h.pu(a,f):0)},n.prototype.sO=function(){for(var a=p.mc.ox(this.gA),h=new p.h,f=new p.h,m=new p.h,y=new p.h,w=new p.h,I=this.Oe;I!=-1;I=this.Tf(I)){var M=this.Je(I);if(M!=-1){var T=M;this.$r(T,h),this.nm(T,f),w.vc(f,h);var $=w.Uk();do{var F=T;if((T=this.kc(this.ya(T)))!=F){this.nm(T,m),y.vc(m,h),F=y.Uk();var R=y.yi(w);if(R*R/(F*$)*Math.min(F,$)<=a)return!1;w.N(y),$=F,f.N(m)}}while(T!=M)}}return!0},n}(),p.ku=P}(Q||(Q={})),function(p){var P=function(){function x(){this.j=null,this.jH=new p.h,this.kH=new p.h,this.Ij=null,this.Ov=!1,this.vl=-1}return x.prototype.cf=function(d){return d<this.Ij.length&&this.Ij[d]},x.prototype.fl=function(d,l,n,a){var h=p.ba.uf(this.j.g.jc(n));if(p.ba.uf(this.j.g.jc(l))!=2||h!=1)throw p.i.Ra();this.AP(d,l,n,a)},x.prototype.fr=function(d,l){this.j==null&&(this.j=new p.ku),this.j.fr(d,l)},x.prototype.Gt=function(d,l,n){for(p.Vk.W(d,l,n,!0),l=d.md;l!=-1;l=d.ve(l))d.jc(l)==1736&&p.tn.W(d,l,-1,this.Ov,n);this.fr(d,n)},x.prototype.HE=function(d,l,n,a,h){var f=this.j.g;if(f.jc(d)==1736)for(d=f.Ob(d);d!=-1;d=f.Sb(d)){var m=f.Ya(d);this.j.Ie(m),this.j.Ie(f.V(m));var y=this.j.oR(m);if(y!=-1){var w=this.j.Bb(y,n);if(w!=1&&w!=2)if(this.cf(this.j.af(y))){this.j.Kb(y,n,1),w=f.wf(l,-1);var I=y,M=this.j.Ie(m),T=1;do{var $=this.um(m,h);f.kj(w,$),a!=-1&&this.j.pn(M,a,1),this.j.Kb(I,n,1),I=this.j.kc(I);do var F=($=T==1?f.V(m):f.Na(m))!=-1?this.j.Ie($):-1;while(F==M);var R=this.j.lk(I);if(R!=F){do F=($=T==1?f.Na(m):f.V(m))!=-1?this.j.Ie($):-1;while(F==M);R!=F?(F=R,$=this.j.vj(this.j.mm(F))):T=-T}M=F,m=$}while(I!=y);f.mn(w,!0)}else this.j.Kb(y,n,2)}}},x.prototype.$E=function(){for(var d=this.j.bh(),l=new p.ja(0),n=this.j.Oe;n!=-1;n=this.j.Tf(n)){var a=this.j.Je(n),h=a;if(a!=-1)do{if(this.j.Bb(h,d)!=1){var f=this.j.ya(h);this.j.Kb(f,d,1),this.j.Kb(h,d,1),this.cf(this.j.af(h))&&this.cf(this.j.af(f))&&l.add(h)}h=this.j.kc(this.j.ya(h))}while(h!=a)}this.j.Lg(d),this.j.EP(l)},x.prototype.um=function(d,l){return l==-1?d:this.WR(d,l)},x.prototype.WR=function(d,l){var n=this.j.g,a=this.j.mm(this.j.Ie(d));do{var h=this.j.vj(a);if(n.Sf(n.cd(h))==l)return h;a=this.j.ls(a)}while(a!=-1);return d},x.prototype.Qt=function(d,l,n){this.$E();var a=this.j.g,h=a.Kg(1736),f=this.j.bh();return this.pK(d,l,h,n,f,-1),this.j.Lg(f),p.tn.W(a,h,1,this.Ov,null),h},x.prototype.pK=function(d,l,n,a,h,f){for(this.HE(d,n,h,f,a),l!=-1&&this.HE(l,n,h,f,a),d=this.j.g,l=this.j.Oe;l!=-1;l=this.j.Tf(l)){var m=this.j.Je(l);if(m!=-1){var y=m;do{var w=this.j.Bb(y,h);if(w!=1&&w!=2)if(this.cf(this.j.af(y))){w=d.wf(n,-1);var I=y;do{var M=this.j.om(I);M!=-1?M=this.j.vj(M):(M=this.j.vj(this.j.om(this.j.ya(I))),M=this.j.g.V(M)),M=this.um(M,a),d.kj(w,M),this.j.Kb(I,h,1),f!=-1&&(M=this.j.Ie(M),this.j.pn(M,f,1)),I=this.j.kc(I)}while(I!=y);d.mn(w,!0)}else this.j.Kb(y,h,2);y=this.j.kc(this.j.ya(y))}while(y!=m)}}},x.prototype.XX=function(d,l,n){var a=this.j.g,h=a.Kg(1736),f=a.Kg(1607),m=a.Kg(550);this.$E();var y=-1,w=this.j.bh(),I=this.j.Fp();for(this.pK(d,l,h,n,w,I),d=this.j.Oe;d!=-1;d=this.j.Tf(d))if((l=this.j.Je(d))!=-1){var M=l;do{var T=this.j.Bb(M,w),$=this.j.Bb(this.j.ya(M),w);if((T|=$)==2)if(T=this.j.fh(M),this.cf(T)){var F=a.wf(f,-1),R=M;T=this.$w(d,a),T=this.um(T,n),a.kj(F,T),this.j.pn(d,I,1);do{if(T=this.j.vf(R),$=this.$w(T,a),$=this.um($,n),a.kj(F,$),this.j.Kb(R,w,1),this.j.Kb(this.j.ya(R),w,1),this.j.pn(T,I,1),R=this.j.kc(R),T=this.j.Bb(R,w),(T|=$=this.j.Bb(this.j.ya(R),w))!=2)break;if(T=this.j.fh(R),!this.cf(T)){this.j.Kb(R,w,1),this.j.Kb(this.j.ya(R),w,1);break}}while(R!=M)}else this.j.Kb(M,w,1),this.j.Kb(this.j.ya(M),w,1);M=this.j.kc(this.j.ya(M))}while(M!=l)}for(d=this.j.Oe;d!=-1;d=this.j.Tf(d))(T=this.j.og(d,I))!=1&&(T=this.j.yd(d),this.cf(T)&&(y==-1&&(y=a.wf(m,-1)),(l=this.j.mm(d))!=-1&&(l=this.j.vj(l),T=this.um(l,n),a.kj(y,T))));return this.j.Gp(I),this.j.Lg(w),p.tn.W(a,h,1,this.Ov,null),(n=[])[0]=m,n[1]=f,n[2]=h,n},x.prototype.$w=function(d,l){var n=-1;for(d=this.j.mm(d);d!=-1;d=this.j.ls(d)){var a=this.j.vj(d);n==-1&&(n=a);var h=this.j.Ma(l.Sf(l.cd(a)));if(this.cf(h)){n=a;break}}return n},x.prototype.gB=function(d,l){for(var n=this.ll(l),a=this.j.lk(l),h=this.j.vf(l),f=0,m=0,y=this.j.mm(a);y!=-1;y=this.j.ls(y)){var w=this.j.vj(y),I=d.cd(w),M=this.j.Ma(d.Sf(I));I=d.Ya(I),(M=(M&n)!=0)&&I==w&&(this.vl=l);var T=d.V(w);T!=-1&&this.j.Ie(T)==h?(f++,M&&(this.vl===-1&&I==T&&(w=this.j.kc(l),this.cf(this.ll(w))&&(this.vl=w)),m++)):(w=d.Na(w))!=-1&&this.j.Ie(w)==h&&(f--,M&&(this.vl===-1&&I===w&&(w=this.j.kc(l),this.cf(this.ll(w))&&(this.vl=w)),m--))}return this.j.D(a,this.jH),this.j.D(h,this.kH),(m!=0?m:f)*(d=p.h.ub(this.jH,this.kH))},x.prototype.ll=function(d){return this.j.fh(d)|this.j.af(d)|this.j.af(this.j.ya(d))},x.prototype.sK=function(d){for(var l=this.j.ya(this.j.ue(d)),n=-1;l!=d;){if(this.cf(this.ll(l))){if(n!=-1)return-1;n=l}l=this.j.ya(this.j.ue(l))}return n!=-1?this.j.ya(n):-1},x.prototype.tK=function(d){for(var l=this.j.ya(this.j.kc(d)),n=-1;l!=d;){if(this.cf(this.ll(l))){if(n!=-1)return-1;n=l}l=this.j.ya(this.j.kc(l))}return n!=-1?this.j.ya(n):-1},x.prototype.hJ=function(d,l,n,a,h){var f=this.j.g,m=d,y=this.j.ya(m);this.j.Kb(m,n,1),this.j.Kb(y,n,1),this.vl=-1;for(var w=this.gB(f,m),I=m,M=-1,T=!1,$=1;;){var F=this.j.ue(m);if(F==y)break;if(y=this.j.kc(y),this.j.ya(F)!=y){if((m=this.sK(m))==-1){T=!0;break}y=this.j.ya(m)}else m=F;if(m==d){M=d;break}if(F=this.ll(m),!this.cf(F))break;this.j.Kb(m,n,1),this.j.Kb(y,n,1),I=m,w+=this.gB(f,m),$++}if(M==-1)for(m=d,y=this.j.ya(m),M=m;(d=this.j.kc(m))!=y;){if(y=this.j.ue(y),this.j.ya(d)!=y){if((m=this.tK(m))==-1){T=!0;break}y=this.j.ya(m)}else m=d;if(F=this.ll(m),!this.cf(F))break;this.j.Kb(m,n,1),this.j.Kb(y,n,1),M=m,w+=this.gB(f,m),$++}else if(this.vl!=-1&&(I=this.vl,M=this.j.ue(this.vl),this.j.ya(M)!=this.j.kc(this.j.ya(I))&&(M=this.sK(I))==-1))throw p.i.Ra();for(0<=w||(m=M,M=this.j.ya(I),I=this.j.ya(m)),n=f.wf(l,-1),m=I,I=this.j.lk(I),T=this.j.vf(M)==I&&T,w=this.$w(I,f),w=this.um(w,h),f.kj(n,w),a!=-1&&this.j.pn(I,a,1),I=0,$=T?p.P.truncate(($+1)/2):-1;d=this.j.vf(m),w=this.$w(d,f),w=this.um(w,h),f.kj(n,w),I++,a!=-1&&this.j.pn(d,a,1),T&&I==$&&(n=f.wf(l,-1),f.kj(n,w)),m!=M;)if(d=this.j.kc(m),this.j.ue(this.j.ya(m))!=this.j.ya(d)){if((m=this.tK(m))==-1)throw p.i.Ra()}else m=d},x.prototype.Rt=function(d){for(var l=this.j.g.Kg(1607),n=this.j.bh(),a=this.j.Oe;a!=-1;a=this.j.Tf(a)){var h=this.j.Je(a),f=h;do this.j.Bb(f,n)!=1&&this.cf(this.ll(f))&&this.hJ(f,l,n,-1,d),f=this.j.kc(this.j.ya(f));while(f!=h)}return this.j.Lg(n),l},x.prototype.YX=function(d){for(var l=this.j.g,n=l.Kg(1607),a=l.Kg(550),h=this.j.bh(),f=this.j.Fp(),m=-1,y=this.j.Oe;y!=-1;y=this.j.Tf(y)){var w=this.j.Je(y),I=w;do{var M=this.j.Bb(I,h);M!=1&&(M=this.ll(I),this.cf(M)&&this.hJ(I,n,h,f,d)),I=this.j.kc(this.j.ya(I))}while(I!=w)}for(y=this.j.Oe;y!=-1;y=this.j.Tf(y))(M=this.j.og(y,f))!=1&&(M=this.j.yd(y),this.cf(M)&&(m==-1&&(m=l.wf(a,-1)),(w=this.j.mm(y))!=-1&&(w=this.j.vj(w),w=this.um(w,d),l.kj(m,w))));return this.j.Lg(h),this.j.Gp(f),(d=[])[0]=a,d[1]=n,d},x.prototype.pr=function(){for(var d=this.j.g,l=d.Kg(550),n=d.wf(l,-1),a=this.j.Oe;a!=-1;a=this.j.Tf(a))if(this.cf(this.j.yd(a))){for(var h=-1,f=this.j.mm(a);f!=-1;f=this.j.ls(f)){var m=this.j.vj(f);h==-1&&(h=m);var y=this.j.Ma(d.Sf(d.cd(m)));if(this.cf(y)){h=m;break}}d.kj(n,h)}return l},x.prototype.eq=function(d){this.Ij=[];for(var l=0;l<d;l++)this.Ij[l]=!1},x.WV=function(d,l,n){var a=d.Ja(),h=Array(1e3);p.P.bv(h,null);var f=p.P.mg(1e3,0),m=d.I(),y=!0,w=l.Eb()==2;if(l.Eb()!=1&&l.Eb()!=2)throw p.i.Ra();for(var I=0;I<m;){var M=p.P.truncate(d.gW(h,I)-I);w?p.jd.nK(l,h,M,n,f):p.jd.oK(l,h,M,n,f);for(var T=0,$=0;$<M;$++)f[$]==0&&(y&&(y=!1,a.Gd(d,0,I)),T!=$&&a.Gd(d,I+T,I+$),T=$+1);y||T==M||a.Gd(d,I+T,I+M),I+=M}return y?d:a},x.uG=function(d,l,n){return d instanceof p.ee?x.WV(d,l,n):l instanceof p.Ta?d.B()||l.B()?d.Ja():p.Vk.uU(n,d,l)?p.Vk.xO(d,l):d.Ja():x.XV(d,l,n)},x.Cv=function(d,l,n,a){var h=new p.l;d.A(h);var f=new p.l;l.A(f);var m=new p.l;if(m.L(h),m.$b(f),n=p.ua.Xd(n,m,!0),(m=new p.l).L(f),f=p.ua.Gr(n),m.X(f,f),!h.isIntersecting(m)){if(d.Eb()<=l.Eb())return x.mi(x.Ue(d.Ja()),d,"&");if(d.Eb()>l.Eb())return x.mi(x.Ue(l.Ja()),d,"&")}return f=new x,m=(h=new p.hd).Ib(x.Ue(d)),l=h.Ib(x.Ue(l)),f.Gt(h,n,a),a=f.Cv(m,l),d=x.mi(h.Ke(a),d,"&"),p.ba.Ic(d.K())&&(d.Eh(2,n),d.K()==1736&&d.hm()),d},x.XV=function(d,l,n){if(d.B()||l.B())return d.Ja();var a=[null],h=[0],f=l.Eb()==2;if(l.Eb()!=1&&l.Eb()!=2)throw p.i.Ra();return a[0]=d.D(),f?p.jd.nK(l,a,1,n,h):p.jd.oK(l,a,1,n,h),h[0]==0?d.Ja():d},x.prototype.GU=function(d,l,n,a,h){if(d.B())return d;var f=new p.hd;return d=f.Ib(d),this.Ok(f,d,l,n,a,h)},x.prototype.IU=function(d,l,n,a,h,f){if(h&&d.jc(l)!=550){var m=new p.MC;m.PX(d,n),m.Pg?(p.Vk.W(d,n,f,!0),h=!1):this.j.ty(n)}else p.Vk.W(d,n,f,!0),h=!1;if(a&&d.jc(l)!=550?this.j.rJ(d,l,f):this.j.qJ(d,l,f),this.j.kA)return this.j.Wg(),this.j=null,this.Ok(d,l,n,a,!1,f);if(this.j.ty(NaN),f=this.j.Ma(l),this.eq(f+1),this.Ij[f]=!0,d.jc(l)==1736||a&&d.jc(l)!=550)return d.$o(l,0),l=this.Qt(l,-1,-1),(d=d.Ke(l)).$o(0),h?d.Eh(1,0):(d.Eh(2,n),d.hm()),d;if(d.jc(l)==1607)return l=this.Rt(-1),d=d.Ke(l),h||d.Eh(2,n),d;if(d.jc(l)==550)return l=this.pr(),d=d.Ke(l),h||d.Eh(2,n),d;throw p.i.Ra()},x.prototype.Ok=function(d,l,n,a,h,f){this.j=new p.ku;try{return this.IU(d,l,n,a,h,f)}finally{this.j.Wg()}},x.Ok=function(d,l,n,a,h){return new x().GU(d,l,n,a,h)},x.prototype.HU=function(d,l,n,a){this.Ov=d,this.j=new p.ku,d=l.Kn(n);var h=l.jc(n);if(d!=1||h==550?this.j.qJ(l,n,a):this.j.rJ(l,n,a),!this.j.kA)if(this.j.ty(NaN),a=this.j.Ma(n),this.eq(a+1),this.Ij[a]=!0,l.jc(n)==1736||d==1&&l.jc(n)!=550)l.$o(n,0),a=this.Qt(n,-1,-1),l.cC(a,n),l.wB(a);else if(l.jc(n)==1607)a=this.Rt(-1),l.cC(a,n),l.wB(a);else{if(l.jc(n)!=550)throw p.i.ga("internal error");a=this.pr(),l.cC(a,n),l.wB(a)}},x.prototype.km=function(d,l){var n=p.ba.uf(this.j.g.jc(d)),a=p.ba.uf(this.j.g.jc(l));if(n>a)return d;var h=this.j.Ma(d),f=this.j.Ma(l);if(this.eq(1+(h|f)),this.Ij[this.j.Ma(d)]=!0,n==2&&a==2)return this.Qt(d,l,-1);if(n==1&&a==2||n==1&&a==1)return this.Rt(-1);if(n==0)return this.pr();throw p.i.Ra()},x.prototype.Cv=function(d,l){var n=p.ba.uf(this.j.g.jc(d)),a=p.ba.uf(this.j.g.jc(l)),h=this.j.Ma(d),f=this.j.Ma(l);if(this.eq(1+(h|f)),this.Ij[this.j.Ma(d)|this.j.Ma(l)]=!0,h=-1,1<this.j.g.it.Ba&&(h=d),n==2&&a==2)return this.Qt(d,l,h);if(n==1&&0<a||a==1&&0<n)return this.Rt(h);if(n==0||a==0)return this.pr();throw p.i.Ra()},x.prototype.Kz=function(d,l){var n=p.ba.uf(this.j.g.jc(d)),a=p.ba.uf(this.j.g.jc(l)),h=this.j.Ma(d),f=this.j.Ma(l);if(this.eq(1+(h|f)),this.Ij[this.j.Ma(d)|this.j.Ma(l)]=!0,h=-1,1<this.j.g.it.Ba&&(h=d),n==2&&a==2)return this.XX(d,l,h);if(n==1&&0<a||a==1&&0<n)return this.YX(h);if(n==0||a==0)return(d=[])[0]=this.pr(),d;throw p.i.Ra()},x.prototype.gp=function(d,l){var n=p.ba.uf(this.j.g.jc(d)),a=p.ba.uf(this.j.g.jc(l)),h=this.j.Ma(d),f=this.j.Ma(l);if(this.eq(1+(h|f)),this.Ij[this.j.Ma(d)]=!0,this.Ij[this.j.Ma(l)]=!0,n==2&&a==2)return this.Qt(d,l,-1);if(n==1&&a==1)return this.Rt(-1);if(n==0&&a==0)return this.pr();throw p.i.Ra()},x.Ue=function(d){var l=d.K();return l==197?(l=new p.Ea(d.description),d.B()||l.bd(d,!1),l):l==33?(l=new p.ee(d.description),d.B()||l.add(d),l):l==322?(l=new p.Ua(d.description),d.B()||l.pc(d,!0),l):d},x.mi=function(d,l,n){var a=d.K();return a==197?(l=new p.Ea(d.description),d.B()||l.bd(d,!1),l):a!=33||n!="|"&&n!="^"?a==322?(l=new p.Ua(d.description),d.B()||l.pc(d,!0),l):a==33&&n=="-"&&l.K()==33||a==550&&n=="&"&&l.K()==33?(l=new p.Ta(d.description),d.B()||d.we(0,l),l):d:(l=new p.ee(d.description),d.B()||l.add(d),l)},x.km=function(d,l,n,a){if(d.B()||l.B()||d.Eb()>l.Eb())return x.mi(x.Ue(d),d,"-");var h=new p.l;d.A(h);var f=new p.l;if(l.A(f),!h.isIntersecting(f))return x.mi(x.Ue(d),d,"-");var m=new p.l;return m.L(h),m.$b(f),n=p.ua.Xd(n,m,!0),f=new x,m=(h=new p.hd).Ib(x.Ue(d)),l=h.Ib(x.Ue(l)),f.Gt(h,n,a),a=f.km(m,l),a=h.Ke(a),d=x.mi(a,d,"-"),p.ba.Ic(d.K())&&(d.Eh(2,n),d.K()==1736&&d.hm()),d},x.QP=function(d,l,n){if(2>d.length)throw p.i.O("not enough geometries to dissolve");for(var a=0,h=0,f=d.length;h<f;h++)a=Math.max(d[h].Eb(),a);var m=new p.l;m.Pa();var y=new p.hd,w=-1,I=0,M=-1;for(h=0,f=d.length;h<f;h++)if(d[h].Eb()==a)if(d[h].B())M==-1&&(M=h);else{M=h,w==-1?w=y.Ib(x.Ue(d[h])):y.pN(w,x.Ue(d[h]));var T=new p.l;d[h].yc(T),m.$b(T),I++}return 2>I?x.Ue(d[M]):(d=a==2,l=p.ua.Xd(a==0?l:null,m,!0),new x().Ok(y,w,l,d,!0,n))},x.Kz=function(d,l,n,a){var h=[null,null,null],f=new p.l;d.A(f);var m=new p.l;l.A(m);var y=new p.l;if(y.L(f),y.$b(m),n=p.ua.Xd(n,y,!0),(y=new p.l).L(m),m=p.ua.Gr(n),y.X(m,m),!f.isIntersecting(y)){if(d.Eb()<=l.Eb())return h[(d=x.mi(x.Ue(d.Ja()),d,"&")).Eb()]=d,h;if(d.Eb()>l.Eb())return h[(d=x.mi(x.Ue(l.Ja()),d,"&")).Eb()]=d,h}for(m=new x,y=(f=new p.hd).Ib(x.Ue(d)),l=f.Ib(x.Ue(l)),m.Gt(f,n,a),a=m.Kz(y,l),l=0;l<a.length;l++)m=x.mi(f.Ke(a[l]),d,"&"),p.ba.Ic(m.K())&&(m.Eh(2,n),m.K()==1736&&m.hm()),h[m.Eb()]=m;return h},x.gp=function(d,l,n,a){if(d.Eb()>l.Eb())return x.mi(x.Ue(d),d,"^");if(d.Eb()<l.Eb()||d.B())return x.mi(x.Ue(l),d,"^");if(l.B())return x.mi(x.Ue(d),d,"^");var h=new p.l;d.A(h);var f=new p.l;l.A(f);var m=new p.l;return m.L(h),m.$b(f),n=p.ua.Xd(n,m,!0),f=new x,m=(h=new p.hd).Ib(x.Ue(d)),l=h.Ib(x.Ue(l)),f.Gt(h,n,a),a=f.gp(m,l),d=x.mi(h.Ke(a),d,"^"),p.ba.Ic(d.K())&&(d.Eh(2,n),d.K()==1736&&d.hm()),d},x.prototype.GQ=function(d,l){var n=this.j.g;d=n.wf(d,-1);for(var a=l.size,h=0;h<a;h++){var f=l.get(h);n.kj(d,f)}n.mn(d,!0)},x.prototype.WW=function(d,l){for(var n=this.j.g,a=n.md;a!=-1;a=n.ve(a))if(a==l)for(var h=n.Ob(a);h!=-1;h=n.Sb(h)){var f=n.Ya(h);if(f!=-1)for(var m=n.V(f);m!=-1;){f=this.j.Ie(f);var y=this.j.Ie(m);(f=this.j.nR(f,y))!=-1&&(y=this.j.ya(f),this.j.Kb(f,d,1),this.j.Kb(y,d,2)),f=m,m=n.V(f)}}},x.prototype.YV=function(d,l,n,a){n=this.j.Ma(n),a=this.j.Ma(a);var h=new p.ja(0);h.Jb(256);for(var f=this.j.g,m=this.j.bh(),y=this.j.Oe;y!=-1;y=this.j.Tf(y)){var w=this.j.Je(y);if(w!=-1){var I=w;do{if(this.j.Bb(I,m)!=1){var M=I,T=I,$=!1,F=0;do{if(this.j.Kb(M,m,1),!$){var R=this.j.fh(M);(R&a)!=0&&(this.j.af(M)&n)!=0&&(T=M,$=!0)}$&&(h.add(this.j.vj(this.j.mm(this.j.lk(M)))),d!=-1&&((R=this.j.fh(M))&a)!=0&&(F|=R=this.j.Bb(M,d))),M=this.j.kc(M)}while(M!=T);$&&0<this.j.Mp(this.j.$e(T))&&(M=f.Kg(1736),this.GQ(M,h),l!=-1&&f.CJ(M,l,F)),h.clear(!1)}I=this.j.kc(this.j.ya(I))}while(I!=w)}}this.j.Lg(m)},x.prototype.AP=function(d,l,n,a){this.j.tW();var h=-1;d!=-1&&(h=this.j.bh(),this.WW(h,n)),this.YV(h,d,l,n),h!=-1&&(this.j.Lg(h),h=-1);var f=this.j.g;for(d=0,h=f.md;h!=-1;h=f.ve(h))h!=l&&h!=n&&(a.add(h),d++);a.Wd(0,d,function(m,y){return(m=f.qz(f.Ob(m)))<(y=f.qz(f.Ob(y)))?-1:m==y?0:1})},x.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},x}();p.Hg=P}(Q||(Q={})),function(p){var P=function(){function x(d){d!==void 0?this.Jt(d):this.MB()}return x.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},x.prototype.Nb=function(d){return this==d||d instanceof x&&this.eb==d.eb&&this.jb==d.jb&&this.Lb==d.Lb&&this.qb==d.qb&&this.bb==d.bb&&this.Qb==d.Qb},x.prototype.dc=function(){return p.P.wj(),p.P.wj(),p.P.wj(),p.P.wj(),p.P.wj(),p.P.wj()},x.prototype.Gh=function(d,l){var n=this.qb*d.x+this.bb*d.y+this.Qb;l.x=this.eb*d.x+this.jb*d.y+this.Lb,l.y=n},x.prototype.aY=function(d,l,n){for(var a=0;a<l;a++){var h=d[a].x,f=d[a].y,m=this.eb*h+this.jb*f+this.Lb;h=this.qb*h+this.bb*f+this.Qb,n[a]!=null?n[a].na(m,h):n[a]=p.h.construct(m,h)}},x.prototype.multiply=function(d){x.multiply(this,d,this)},x.multiply=function(d,l,n){var a=d.eb*l.eb+d.qb*l.jb,h=d.jb*l.eb+d.bb*l.jb,f=d.Lb*l.eb+d.Qb*l.jb+l.Lb,m=d.eb*l.qb+d.qb*l.bb,y=d.jb*l.qb+d.bb*l.bb;d=d.Lb*l.qb+d.Qb*l.bb+l.Qb,n.eb=a,n.jb=h,n.Lb=f,n.qb=m,n.bb=y,n.Qb=d},x.prototype.Qf=function(){var d=new x;return d.eb=this.eb,d.jb=this.jb,d.Lb=this.Lb,d.qb=this.qb,d.bb=this.bb,d.Qb=this.Qb,d},x.prototype.hC=function(d){if(!d.B()){for(var l=[],n=0;4>n;n++)l[n]=new p.h;d.iB(l),this.bY(l,l),d.bx(l,4)}},x.prototype.bY=function(d,l){for(var n=0;n<d.length;n++){var a=new p.h,h=d[n];a.x=this.eb*h.x+this.jb*h.y+this.Lb,a.y=this.qb*h.x+this.bb*h.y+this.Qb,l[n]=a}},x.prototype.kS=function(d,l){d.B()||l.B()||d.S()==0||d.da()==0?this.lx():(this.jb=this.qb=0,this.eb=l.S()/d.S(),this.bb=l.da()/d.da(),this.Lb=l.v-d.v*this.eb,this.Qb=l.G-d.G*this.bb)},x.prototype.$X=function(d){var l=new p.h,n=new p.h;l.na(this.eb,this.qb),n.na(this.jb,this.bb),l.sub(l);var a=.5*l.Uk();return l.na(this.eb,this.qb),n.na(this.jb,this.bb),l.add(n),d*(a>(l=.5*l.Uk())?Math.sqrt(a):Math.sqrt(l))},x.prototype.MB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},x.prototype.isIdentity=function(d){if(d!==void 0){var l=p.h.construct(0,1);return this.Gh(l,l),l.sub(p.h.construct(0,1)),l.Uk()>d*d?!1:(l.na(0,0),this.Gh(l,l),!(l.Uk()>d*d)&&(l.na(1,0),this.Gh(l,l),l.sub(p.h.construct(1,0)),l.Uk()<=d*d))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},x.prototype.Di=function(d){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*d*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},x.prototype.ig=function(d,l){this.eb=1,this.jb=0,this.Lb=d,this.qb=0,this.bb=1,this.Qb=l},x.prototype.Jt=function(d,l){l!==void 0?(this.eb=d,this.qb=this.Lb=this.jb=0,this.bb=l,this.Qb=0):this.Jt(d,d)},x.prototype.VB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},x.prototype.kX=function(d){this.lX(Math.cos(d),Math.sin(d))},x.prototype.lX=function(d,l){this.eb=d,this.jb=-l,this.Lb=0,this.qb=l,this.bb=d,this.Qb=0},x.prototype.shift=function(d,l){this.Lb+=d,this.Qb+=l},x.prototype.scale=function(d,l){this.eb*=d,this.jb*=d,this.Lb*=d,this.qb*=l,this.bb*=l,this.Qb*=l},x.prototype.flipX=function(d,l){this.eb=-this.eb,this.jb=-this.jb,this.Lb=d+l-this.Lb},x.prototype.flipY=function(d,l){this.qb=-this.qb,this.bb=-this.bb,this.Qb=d+l-this.Qb},x.prototype.rotate=function(d){var l=new x;l.kX(d),this.multiply(l)},x.prototype.inverse=function(d){if(d!==void 0){var l=this.eb*this.bb-this.jb*this.qb;l==0?d.lx():(l=1/l,d.Lb=(this.jb*this.Qb-this.Lb*this.bb)*l,d.Qb=(this.Lb*this.qb-this.eb*this.Qb)*l,d.eb=this.bb*l,d.jb=-this.jb*l,d.qb=-this.qb*l,d.bb=this.eb*l)}else this.inverse(this)},x}();p.Ed=P}(Q||(Q={})),function(p){var P=function(){function x(){}return x.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},x.prototype.Jt=function(d,l){this.eb=d,this.jb=this.pf=this.qb=0,this.bb=l,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},x.prototype.translate=function(d,l,n){this.Lb+=d,this.Qb+=l,this.Cg+=n},x.prototype.hC=function(d){if(!d.B()){for(var l=new p.Od[8],n=0;8>n;n++)l[n]=new p.Od;d.iB(l),this.transform(l,8,l),d.bx(l)}},x.prototype.transform=function(d,l,n){for(var a=0;a<l;a++){var h=new p.Od,f=d[a];h.x=this.eb*f.x+this.jb*f.y+this.Ve*f.z+this.Lb,h.y=this.qb*f.x+this.bb*f.y+this.We*f.z+this.Qb,h.z=this.pf*f.x+this.Ye*f.y+this.Ze*f.z+this.Cg,n[a]=h}},x.prototype.hp=function(d){var l=new p.Od;return l.x=this.eb*d.x+this.jb*d.y+this.Ve*d.z+this.Lb,l.y=this.qb*d.x+this.bb*d.y+this.We*d.z+this.Qb,l.z=this.pf*d.x+this.Ye*d.y+this.Ze*d.z+this.Cg,l},x.prototype.Bg=function(d){x.multiply(this,d,this)},x.multiply=function(d,l,n){var a=d.eb*l.eb+d.qb*l.jb+d.pf*l.Ve,h=d.eb*l.qb+d.qb*l.bb+d.pf*l.We,f=d.eb*l.pf+d.qb*l.Ye+d.pf*l.Ze,m=d.jb*l.eb+d.bb*l.jb+d.Ye*l.Ve,y=d.jb*l.qb+d.bb*l.bb+d.Ye*l.We,w=d.jb*l.pf+d.bb*l.Ye+d.Ye*l.Ze,I=d.Ve*l.eb+d.We*l.jb+d.Ze*l.Ve,M=d.Ve*l.qb+d.We*l.bb+d.Ze*l.We,T=d.Ve*l.pf+d.We*l.Ye+d.Ze*l.Ze,$=d.Lb*l.eb+d.Qb*l.jb+d.Cg*l.Ve+l.Lb,F=d.Lb*l.qb+d.Qb*l.bb+d.Cg*l.We+l.Qb;d=d.Lb*l.pf+d.Qb*l.Ye+d.Cg*l.Ze+l.Cg,n.eb=a,n.qb=h,n.pf=f,n.jb=m,n.bb=y,n.Ye=w,n.Ve=I,n.We=M,n.Ze=T,n.Lb=$,n.Qb=F,n.Cg=d},x.inverse=function(d,l){var n=d.eb*(d.bb*d.Ze-d.Ye*d.We)-d.qb*(d.jb*d.Ze-d.Ye*d.Ve)+d.pf*(d.jb*d.We-d.bb*d.Ve);if(n==0)throw p.i.ga("math singularity");var a=1/n;n=(d.bb*d.Ze-d.Ye*d.We)*a;var h=-(d.jb*d.Ze-d.Ye*d.Ve)*a,f=(d.jb*d.We-d.bb*d.Ve)*a,m=-(d.qb*d.Ze-d.We*d.pf)*a,y=(d.eb*d.Ze-d.pf*d.Ve)*a,w=-(d.eb*d.We-d.qb*d.Ve)*a,I=(d.qb*d.Ye-d.pf*d.bb)*a,M=-(d.eb*d.Ye-d.pf*d.jb)*a;a*=d.eb*d.bb-d.qb*d.jb;var T=-(d.Lb*n+d.Qb*h+d.Cg*f),$=-(d.Lb*m+d.Qb*y+d.Cg*w);d=-(d.Lb*I+d.Qb*M+d.Cg*a),l.eb=n,l.qb=m,l.pf=I,l.jb=h,l.bb=y,l.Ye=M,l.Ve=f,l.We=w,l.Ze=a,l.Lb=T,l.Qb=$,l.Cg=d},x.prototype.Qf=function(){var d=new x;return d.eb=this.eb,d.qb=this.qb,d.pf=this.pf,d.jb=this.jb,d.bb=this.bb,d.Ye=this.Ye,d.Ve=this.Ve,d.We=this.We,d.Ze=this.Ze,d.Lb=this.Lb,d.Qb=this.Qb,d.Cg=this.Cg,d},x}();p.FY=P}(Q||(Q={})),function(p){var P=function(d){function l(n){if(n!==void 0)n=d.call(this,n.dc(),n)||this;else{(n=d.call(this)||this).dg=[],n.dg[0]=0,n.Ba=1,n.wh=[];for(var a=0;10>a;a++)n.wh[a]=-1;n.wh[n.dg[0]]=0}return n.lq=!0,n}return Et(l,d),l.prototype.se=function(n){this.hasAttribute(n)||(this.wh[n]=0,this.eD())},l.prototype.removeAttribute=function(n){if(n==0)throw p.i.O("Position attribue cannot be removed");this.hasAttribute(n)&&(this.wh[n]=-1,this.eD())},l.prototype.reset=function(){this.dg[0]=0,this.Ba=1;for(var n=0;n<this.wh.length;n++)this.wh[n]=-1;this.wh[this.dg[0]]=0,this.lq=!0},l.prototype.zF=function(){return x.fz().add(this)},l.pg=function(){return x.fz().VR()},l.prototype.oM=function(){var n=this.dc();return new p.sa(n,this)},l.prototype.eD=function(){for(var n=this.Ba=0,a=0;10>n;n++)0<=this.wh[n]&&(this.dg[a]=n,this.wh[n]=a,a++,this.Ba++);this.lq=!0},l.prototype.dc=function(){return this.lq&&(this.yl=this.Cn(),this.lq=!1),this.yl},l.prototype.Nb=function(n){if(n==null)return!1;if(n==this)return!0;if(!(n instanceof l)||n.Ba!=this.Ba)return!1;for(var a=0;a<this.Ba;a++)if(this.dg[a]!=n.dg[a])return!1;return this.lq==n.lq},l.prototype.BG=function(n){if(n.Ba!=this.Ba)return!1;for(var a=0;a<this.Ba;a++)if(this.dg[a]!=n.dg[a])return!1;return!0},l.Kw=function(n,a){for(var h=[],f=0;f<n.Ba;f++)h[f]=-1;f=0;for(var m=n.Ba;f<m;f++)h[f]=a.Rf(n.ld(f));return h},l.wR=function(n,a){return(n=new l(n)).se(a),n.zF()},l.xR=function(n,a){for(var h=null,f=0;10>f;f++)!n.hasAttribute(f)&&a.hasAttribute(f)&&(h==null&&(h=new l(n)),h.se(f));return h!=null?h.zF():n},l}(p.sa);p.fe=P;var x=function(){function d(){this.map=[];var l=new P;this.add(l),(l=new P).se(1),this.add(l)}return d.fz=function(){return d.XK},d.prototype.VR=function(){return d.gt},d.prototype.add=function(l){var n=l.dc();if(d.gt!=null&&d.gt.dc()==n&&l.BG(d.gt))return d.gt;if(d.Fw!=null&&d.Fw.dc()==n&&l.BG(d.Fw))return d.Fw;var a=null;return this.map[n]!==void 0&&(a=this.map[n]),a==null&&((a=l.oM()).Ba==1?d.gt=a:a.Ba==2&&a.ld(1)==1?d.Fw=a:this.map[n]=a),a},d.XK=new d,d}()}(Q||(Q={}));var Rs={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},gu={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},xa=new(function(){function p(){this.MM=50,this.pp=new Map,this.ij=[]}return p.prototype.clear=function(){this.ij.length=0,this.pp.clear()},p.prototype.delete=function(P){return!!this.pp.delete(P)&&(this.ij.splice(this.ij.indexOf(P),1),!0)},p.prototype.get=function(P){var x=this.pp.get(P);if(x!==void 0)return this.ij[0]!==P&&(this.ij.splice(this.ij.indexOf(P),1),this.ij.unshift(P)),x},p.prototype.has=function(P){return this.pp.has(P)},p.prototype.set=function(P,x){return this.get(P)!==void 0&&this.delete(P),this.ij.unshift(P),this.pp.set(P,x),this.jM(),this},p.prototype.jM=function(){for(;this.ij.length&&this.ij.length>this.MM;){var P=this.ij.pop();this.pp.delete(P)}},p}()),Le=((Wi={}).convertJSONToGeometry=function(p){return Q.ac.aP(p)},Wi.hasM=function(p){return p.hasAttribute(Q.Kh.M)},Wi.hasZ=function(p){return p.hasAttribute(Q.Kh.Z)},Wi.getPointX=function(p){return p.Ng()},Wi.getPointY=function(p){return p.kh()},Wi.getPointZ=function(p){return p.XR()},Wi.getPointM=function(p){return p.uR()},Wi.getXMin=function(p){return p.gs()},Wi.getYMin=function(p){return p.js()},Wi.getXMax=function(p){return p.fs()},Wi.getYMax=function(p){return p.hs()},Wi.getZExtent=function(p){return p.Vg(Q.Kh.Z,0)},Wi.getMExtent=function(p){return p.Vg(Q.Kh.M,0)},Wi.exportPaths=function(p){var P=[],x=p.ea(),d=null,l=null,n=p.hasAttribute(Q.Kh.Z),a=p.hasAttribute(Q.Kh.M);n&&(d=p.vb(Q.Kh.Z)),a&&(l=p.vb(Q.Kh.M));for(var h=new Q.h,f=0;f<x;f++){for(var m=p.Ca(f),y=p.Ka(f),w=0,I=0,M=NaN,T=NaN,$=NaN,F=NaN,R=p.ec(f),j=[],H=m;H<m+y;H++){p.D(H,h),F=$=NaN;var W=[h.x,h.y];n&&($=d.get(H),W.push($)),a&&(F=l.get(H),W.push(F)),H==m&&R&&(w=h.x,I=h.y,M=$,T=F),j.push(W)}!R||w==h.x&&I==h.y&&(!n||isNaN(M)&&isNaN($)||M==$)&&(!a||isNaN(T)&&isNaN(F)||T==F)||j.push(j[0].slice(0)),P.push(j)}return P},Wi.exportPathsFlat=function(){},Wi.exportPoints=function(p){var P=p.hasAttribute(Q.Kh.Z),x=p.hasAttribute(Q.Kh.M),d=null,l=null;P&&(d=p.vb(Q.Kh.Z)),x&&(l=p.vb(Q.Kh.M));for(var n=new Q.h,a=p.I(),h=[],f=0;f<a;f++){p.D(f,n);var m=[n.x,n.y];P&&m.push(d.get(f)),x&&m.push(l.get(f)),h.push(m)}return h},Wi.exportPointsFlat=function(){},Wi),wl=new Map;return function(){function p(){}return p.buffer=mt,p.clip=A,p.contains=L,p.convexHull=_e,p.crosses=N,p.cut=O,p.densify=oo,p.difference=Ae,p.disjoint=ne,p.distance=z,p.equals=q,p.extendedSpatialReferenceInfo=E,p.generalize=ks,p.geodesicArea=_a,p.geodesicBuffer=ct,p.geodesicDensify=$n,p.geodesicLength=ao,p.intersect=je,p.intersects=Z,p.isSimple=fe,p.nearestCoordinate=Nt,p.nearestVertex=Mr,p.nearestVertices=nn,p.offset=nt,p.overlaps=oe,p.planarArea=Os,p.planarLength=wa,p.relate=me,p.simplify=Ce,p.symmetricDifference=Oe,p.touches=ee,p.union=De,p.within=ie,p.rotate=Q.Dx.rotate,p.flipHorizontal=Q.Dx.EQ,p.flipVertical=Q.Dx.FQ,p.intersectLinesToPoints=zc,p.ExtendedParams=Q.tC,p.clearDefaultSpatialReferenceTolerance=Xd,p.changeDefaultSpatialReferenceTolerance=Zd,p._enableProjection=fu,p._project=Kd,p._getTransformation=Yd,p._getTransformationBySuitability=mu,p}()}var r=i();r!==void 0&&(e.exports=r)})({get exports(){return MS},set exports(e){MS=e}});const $t=MS,FCe=PCe({__proto__:null,default:$t},[MS]);var LCe=Object.freeze(Object.defineProperty({__proto__:null,G:$t,g:FCe},Symbol.toStringTag,{value:"Module"}));const Kt={convertToGEGeometry:RCe,exportPoint:NCe,exportPolygon:DCe,exportPolyline:jCe,exportMultipoint:zCe,exportExtent:VCe};function RCe(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function NCe(e,t,i){const r=e.hasZ(t),s=e.hasM(t),o=new pt({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(o.z=e.getPointZ(t)),s&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o}function DCe(e,t,i){const r=new Qn({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function jCe(e,t,i){const r=new Eo({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function zCe(e,t,i){const r=new Ew({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function VCe(e,t,i){const r=e.hasZ(t),s=e.hasM(t),o=new vi({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const c=e.getZExtent(t);o.zmin=c.vmin,o.zmax=c.vmax}if(s){const c=e.getMExtent(t);o.mmin=c.vmin,o.mmax=c.vmax}return o.cache._geVersion=t,o}var GCe=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:Kt},Symbol.toStringTag,{value:"Module"}));function ii(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function UCe(e){return $t.extendedSpatialReferenceInfo(e)}function qCe(e,t){return $t.clip(Kt,ii(e),e,t)}function BCe(e,t){return $t.cut(Kt,ii(e),e,t)}function HCe(e,t){return $t.contains(Kt,ii(e),e,t)}function WCe(e,t){return $t.crosses(Kt,ii(e),e,t)}function JCe(e,t,i){return $t.distance(Kt,ii(e),e,t,i)}function YCe(e,t){return $t.equals(Kt,ii(e),e,t)}function KCe(e,t){return $t.intersects(Kt,ii(e),e,t)}function ZCe(e,t){return $t.touches(Kt,ii(e),e,t)}function XCe(e,t){return $t.within(Kt,ii(e),e,t)}function QCe(e,t){return $t.disjoint(Kt,ii(e),e,t)}function eAe(e,t){return $t.overlaps(Kt,ii(e),e,t)}function tAe(e,t,i){return $t.relate(Kt,ii(e),e,t,i)}function iAe(e){return $t.isSimple(Kt,ii(e),e)}function rAe(e){return $t.simplify(Kt,ii(e),e)}function sAe(e,t=!1){return $t.convexHull(Kt,ii(e),e,t)}function nAe(e,t){return $t.difference(Kt,ii(e),e,t)}function oAe(e,t){return $t.symmetricDifference(Kt,ii(e),e,t)}function aAe(e,t){return $t.intersect(Kt,ii(e),e,t)}function lAe(e,t=null){return $t.union(Kt,ii(e),e,t)}function uAe(e,t,i,r,s,o){return $t.offset(Kt,ii(e),e,t,i,r,s,o)}function cAe(e,t,i,r=!1){return $t.buffer(Kt,ii(e),e,t,i,r)}function c8(e,t,i,r,s,o){return $t.geodesicBuffer(Kt,ii(e),e,t,i,r,s,o)}function hAe(e,t,i=!0){return $t.nearestCoordinate(Kt,ii(e),e,t,i)}function dAe(e,t){return $t.nearestVertex(Kt,ii(e),e,t)}function pAe(e,t,i,r){return $t.nearestVertices(Kt,ii(e),e,t,i,r)}function h8(e){var t,i;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e&&(i=(t=e.extent)==null?void 0:t.center)!=null?i:null}function fAe(e,t,i){if(e==null)throw new Ky;const r=e.spatialReference;if((i=i!=null?i:h8(e))==null)throw new Ky;const s=e.constructor.fromJSON($t.rotate(e,t,i));return s.spatialReference=r,s}function mAe(e,t){if(e==null)throw new Ky;const i=e.spatialReference;if((t=t!=null?t:h8(e))==null)throw new Ky;const r=e.constructor.fromJSON($t.flipHorizontal(e,t));return r.spatialReference=i,r}function yAe(e,t){if(e==null)throw new Ky;const i=e.spatialReference;if((t=t!=null?t:h8(e))==null)throw new Ky;const r=e.constructor.fromJSON($t.flipVertical(e,t));return r.spatialReference=i,r}function gAe(e,t,i,r){return $t.generalize(Kt,ii(e),e,t,i,r)}function vAe(e,t,i){return $t.densify(Kt,ii(e),e,t,i)}function bAe(e,t,i,r=0){return $t.geodesicDensify(Kt,ii(e),e,t,i,r)}function wAe(e,t){return $t.planarArea(Kt,ii(e),e,t)}function _Ae(e,t){return $t.planarLength(Kt,ii(e),e,t)}function xAe(e,t,i){return $t.geodesicArea(Kt,ii(e),e,t,i)}function SAe(e,t,i){return $t.geodesicLength(Kt,ii(e),e,t,i)}function IAe(e,t){return $t.intersectLinesToPoints(Kt,ii(e),e,t)}function EAe(e,t){$t.changeDefaultSpatialReferenceTolerance(e,t)}function MAe(e){$t.clearDefaultSpatialReferenceTolerance(e)}class Ky extends Error{constructor(){super("Illegal Argument Exception")}}var rVe=Object.freeze(Object.defineProperty({__proto__:null,buffer:cAe,changeDefaultSpatialReferenceTolerance:EAe,clearDefaultSpatialReferenceTolerance:MAe,clip:qCe,contains:HCe,convexHull:sAe,crosses:WCe,cut:BCe,densify:vAe,difference:nAe,disjoint:QCe,distance:JCe,equals:YCe,extendedSpatialReferenceInfo:UCe,flipHorizontal:mAe,flipVertical:yAe,generalize:gAe,geodesicArea:xAe,geodesicBuffer:c8,geodesicDensify:bAe,geodesicLength:SAe,intersect:aAe,intersectLinesToPoints:IAe,intersects:KCe,isSimple:iAe,nearestCoordinate:hAe,nearestVertex:dAe,nearestVertices:pAe,offset:uAe,overlaps:eAe,planarArea:wAe,planarLength:_Ae,relate:tAe,rotate:fAe,simplify:rAe,symmetricDifference:oAe,touches:ZCe,union:lAe,within:XCe},Symbol.toStringTag,{value:"Module"})),Q3;let Xo=Q3=class extends Re{constructor(e){super(e),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(e){return e?e.map(t=>t instanceof Q3?t:new Q3(t)):null}};v([_()],Xo.prototype,"autoCloseMenu",void 0),v([_()],Xo.prototype,"iconClass",void 0),v([_()],Xo.prototype,"items",void 0),v([_t("items")],Xo.prototype,"castItems",null),v([_()],Xo.prototype,"label",void 0),v([_()],Xo.prototype,"open",void 0),v([_()],Xo.prototype,"selected",void 0),v([_()],Xo.prototype,"selectionEnabled",void 0),v([_()],Xo.prototype,"clickFunction",void 0),Xo=Q3=v([K("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],Xo);const Hl=Xo;let Nm=class extends Re{constructor(e){super(e),this.items=null,this.open=!1}castItems(e){return e?e.map(t=>t instanceof Hl?t:new Hl(t)):null}};v([_()],Nm.prototype,"items",void 0),v([_t("items")],Nm.prototype,"castItems",null),v([_()],Nm.prototype,"open",void 0),Nm=v([K("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],Nm);const TAe=Nm;function ba(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function v0(e){var t=ba(e).Element;return e instanceof t||e instanceof Element}function ha(e){var t=ba(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function d8(e){if(typeof ShadowRoot=="undefined")return!1;var t=ba(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var e0=Math.max,TS=Math.min,Zy=Math.round;function d$(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function vX(){return!/^((?!chrome|android).)*safari/i.test(d$())}function Xy(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=e.getBoundingClientRect(),s=1,o=1;t&&ha(e)&&(s=e.offsetWidth>0&&Zy(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Zy(r.height)/e.offsetHeight||1);var c=v0(e)?ba(e):window,u=c.visualViewport,g=!vX()&&i,b=(r.left+(g&&u?u.offsetLeft:0))/s,S=(r.top+(g&&u?u.offsetTop:0))/o,E=r.width/s,A=r.height/o;return{width:E,height:A,top:S,right:b+E,bottom:S+A,left:b,x:b,y:S}}function p8(e){var t=ba(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function CAe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function AAe(e){return e===ba(e)||!ha(e)?p8(e):CAe(e)}function hu(e){return e?(e.nodeName||"").toLowerCase():null}function Jd(e){return((v0(e)?e.ownerDocument:e.document)||window.document).documentElement}function f8(e){return Xy(Jd(e)).left+p8(e).scrollLeft}function Fc(e){return ba(e).getComputedStyle(e)}function m8(e){var t=Fc(e),i=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function $Ae(e){var t=e.getBoundingClientRect(),i=Zy(t.width)/e.offsetWidth||1,r=Zy(t.height)/e.offsetHeight||1;return i!==1||r!==1}function kAe(e,t,i){i===void 0&&(i=!1);var r=ha(t),s=ha(t)&&$Ae(t),o=Jd(t),c=Xy(e,s,i),u={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(r||!r&&!i)&&((hu(t)!=="body"||m8(o))&&(u=AAe(t)),ha(t)?(g=Xy(t,!0),g.x+=t.clientLeft,g.y+=t.clientTop):o&&(g.x=f8(o))),{x:c.left+u.scrollLeft-g.x,y:c.top+u.scrollTop-g.y,width:c.width,height:c.height}}function y8(e){var t=Xy(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function E9(e){return hu(e)==="html"?e:e.assignedSlot||e.parentNode||(d8(e)?e.host:null)||Jd(e)}function bX(e){return["html","body","#document"].indexOf(hu(e))>=0?e.ownerDocument.body:ha(e)&&m8(e)?e:bX(E9(e))}function ob(e,t){var i;t===void 0&&(t=[]);var r=bX(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),o=ba(r),c=s?[o].concat(o.visualViewport||[],m8(r)?r:[]):r,u=t.concat(c);return s?u:u.concat(ob(E9(c)))}function OAe(e){return["table","td","th"].indexOf(hu(e))>=0}function VD(e){return!ha(e)||Fc(e).position==="fixed"?null:e.offsetParent}function PAe(e){var t=/firefox/i.test(d$()),i=/Trident/i.test(d$());if(i&&ha(e)){var r=Fc(e);if(r.position==="fixed")return null}var s=E9(e);for(d8(s)&&(s=s.host);ha(s)&&["html","body"].indexOf(hu(s))<0;){var o=Fc(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function i_(e){for(var t=ba(e),i=VD(e);i&&OAe(i)&&Fc(i).position==="static";)i=VD(i);return i&&(hu(i)==="html"||hu(i)==="body"&&Fc(i).position==="static")?t:i||PAe(e)||t}var to="top",fa="bottom",ma="right",io="left",g8="auto",r_=[to,fa,ma,io],Qy="start",Qb="end",FAe="clippingParents",wX="viewport",p1="popper",LAe="reference",GD=r_.reduce(function(e,t){return e.concat([t+"-"+Qy,t+"-"+Qb])},[]),_X=[].concat(r_,[g8]).reduce(function(e,t){return e.concat([t,t+"-"+Qy,t+"-"+Qb])},[]),RAe="beforeRead",NAe="read",DAe="afterRead",jAe="beforeMain",zAe="main",VAe="afterMain",GAe="beforeWrite",UAe="write",qAe="afterWrite",BAe=[RAe,NAe,DAe,jAe,zAe,VAe,GAe,UAe,qAe];function HAe(e){var t=new Map,i=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function s(o){i.add(o.name);var c=[].concat(o.requires||[],o.requiresIfExists||[]);c.forEach(function(u){if(!i.has(u)){var g=t.get(u);g&&s(g)}}),r.push(o)}return e.forEach(function(o){i.has(o.name)||s(o)}),r}function WAe(e){var t=HAe(e);return BAe.reduce(function(i,r){return i.concat(t.filter(function(s){return s.phase===r}))},[])}function JAe(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function Ql(e){return e.split("-")[0]}function YAe(e){var t=e.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}function KAe(e,t){var i=ba(e),r=Jd(e),s=i.visualViewport,o=r.clientWidth,c=r.clientHeight,u=0,g=0;if(s){o=s.width,c=s.height;var b=vX();(b||!b&&t==="fixed")&&(u=s.offsetLeft,g=s.offsetTop)}return{width:o,height:c,x:u+f8(e),y:g}}function ZAe(e){var t,i=Jd(e),r=p8(e),s=(t=e.ownerDocument)==null?void 0:t.body,o=e0(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),c=e0(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),u=-r.scrollLeft+f8(e),g=-r.scrollTop;return Fc(s||i).direction==="rtl"&&(u+=e0(i.clientWidth,s?s.clientWidth:0)-o),{width:o,height:c,x:u,y:g}}function xX(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&d8(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function p$(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function XAe(e,t){var i=Xy(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function UD(e,t,i){return t===wX?p$(KAe(e,i)):v0(t)?XAe(t,i):p$(ZAe(Jd(e)))}function QAe(e){var t=ob(E9(e)),i=["absolute","fixed"].indexOf(Fc(e).position)>=0,r=i&&ha(e)?i_(e):e;return v0(r)?t.filter(function(s){return v0(s)&&xX(s,r)&&hu(s)!=="body"}):[]}function e$e(e,t,i,r){var s=t==="clippingParents"?QAe(e):[].concat(t),o=[].concat(s,[i]),c=o[0],u=o.reduce(function(g,b){var S=UD(e,b,r);return g.top=e0(S.top,g.top),g.right=TS(S.right,g.right),g.bottom=TS(S.bottom,g.bottom),g.left=e0(S.left,g.left),g},UD(e,c,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function eg(e){return e.split("-")[1]}function v8(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function SX(e){var t=e.reference,i=e.element,r=e.placement,s=r?Ql(r):null,o=r?eg(r):null,c=t.x+t.width/2-i.width/2,u=t.y+t.height/2-i.height/2,g;switch(s){case to:g={x:c,y:t.y-i.height};break;case fa:g={x:c,y:t.y+t.height};break;case ma:g={x:t.x+t.width,y:u};break;case io:g={x:t.x-i.width,y:u};break;default:g={x:t.x,y:t.y}}var b=s?v8(s):null;if(b!=null){var S=b==="y"?"height":"width";switch(o){case Qy:g[b]=g[b]-(t[S]/2-i[S]/2);break;case Qb:g[b]=g[b]+(t[S]/2-i[S]/2);break}}return g}function IX(){return{top:0,right:0,bottom:0,left:0}}function EX(e){return Object.assign({},IX(),e)}function MX(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}function ew(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=r===void 0?e.placement:r,o=i.strategy,c=o===void 0?e.strategy:o,u=i.boundary,g=u===void 0?FAe:u,b=i.rootBoundary,S=b===void 0?wX:b,E=i.elementContext,A=E===void 0?p1:E,O=i.altBoundary,L=O===void 0?!1:O,N=i.padding,z=N===void 0?0:N,q=EX(typeof z!="number"?z:MX(z,r_)),Z=A===p1?LAe:p1,ee=e.rects.popper,ie=e.elements[L?Z:A],ne=e$e(v0(ie)?ie:ie.contextElement||Jd(e.elements.popper),g,S,c),oe=Xy(e.elements.reference),me=SX({reference:oe,element:ee,strategy:"absolute",placement:s}),fe=p$(Object.assign({},ee,me)),Ce=A===p1?fe:oe,_e={top:ne.top-Ce.top+q.top,bottom:Ce.bottom-ne.bottom+q.bottom,left:ne.left-Ce.left+q.left,right:Ce.right-ne.right+q.right},Ae=e.modifiersData.offset;if(A===p1&&Ae){var Oe=Ae[s];Object.keys(_e).forEach(function(je){var De=[ma,fa].indexOf(je)>=0?1:-1,nt=[to,fa].indexOf(je)>=0?"y":"x";_e[je]+=Oe[nt]*De})}return _e}var qD={placement:"bottom",modifiers:[],strategy:"absolute"};function BD(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function t$e(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,s=t.defaultOptions,o=s===void 0?qD:s;return function(u,g,b){b===void 0&&(b=o);var S={placement:"bottom",orderedModifiers:[],options:Object.assign({},qD,o),modifiersData:{},elements:{reference:u,popper:g},attributes:{},styles:{}},E=[],A=!1,O={state:S,setOptions:function(q){var Z=typeof q=="function"?q(S.options):q;N(),S.options=Object.assign({},o,S.options,Z),S.scrollParents={reference:v0(u)?ob(u):u.contextElement?ob(u.contextElement):[],popper:ob(g)};var ee=WAe(YAe([].concat(r,S.options.modifiers)));return S.orderedModifiers=ee.filter(function(ie){return ie.enabled}),L(),O.update()},forceUpdate:function(){if(!A){var q=S.elements,Z=q.reference,ee=q.popper;if(!!BD(Z,ee)){S.rects={reference:kAe(Z,i_(ee),S.options.strategy==="fixed"),popper:y8(ee)},S.reset=!1,S.placement=S.options.placement,S.orderedModifiers.forEach(function(_e){return S.modifiersData[_e.name]=Object.assign({},_e.data)});for(var ie=0;ie<S.orderedModifiers.length;ie++){if(S.reset===!0){S.reset=!1,ie=-1;continue}var ne=S.orderedModifiers[ie],oe=ne.fn,me=ne.options,fe=me===void 0?{}:me,Ce=ne.name;typeof oe=="function"&&(S=oe({state:S,options:fe,name:Ce,instance:O})||S)}}}},update:JAe(function(){return new Promise(function(z){O.forceUpdate(),z(S)})}),destroy:function(){N(),A=!0}};if(!BD(u,g))return O;O.setOptions(b).then(function(z){!A&&b.onFirstUpdate&&b.onFirstUpdate(z)});function L(){S.orderedModifiers.forEach(function(z){var q=z.name,Z=z.options,ee=Z===void 0?{}:Z,ie=z.effect;if(typeof ie=="function"){var ne=ie({state:S,name:q,instance:O,options:ee}),oe=function(){};E.push(ne||oe)}})}function N(){E.forEach(function(z){return z()}),E=[]}return O}}var g2={passive:!0};function i$e(e){var t=e.state,i=e.instance,r=e.options,s=r.scroll,o=s===void 0?!0:s,c=r.resize,u=c===void 0?!0:c,g=ba(t.elements.popper),b=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&b.forEach(function(S){S.addEventListener("scroll",i.update,g2)}),u&&g.addEventListener("resize",i.update,g2),function(){o&&b.forEach(function(S){S.removeEventListener("scroll",i.update,g2)}),u&&g.removeEventListener("resize",i.update,g2)}}var r$e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:i$e,data:{}};function s$e(e){var t=e.state,i=e.name;t.modifiersData[i]=SX({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var n$e={name:"popperOffsets",enabled:!0,phase:"read",fn:s$e,data:{}},o$e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function a$e(e){var t=e.x,i=e.y,r=window,s=r.devicePixelRatio||1;return{x:Zy(t*s)/s||0,y:Zy(i*s)/s||0}}function HD(e){var t,i=e.popper,r=e.popperRect,s=e.placement,o=e.variation,c=e.offsets,u=e.position,g=e.gpuAcceleration,b=e.adaptive,S=e.roundOffsets,E=e.isFixed,A=c.x,O=A===void 0?0:A,L=c.y,N=L===void 0?0:L,z=typeof S=="function"?S({x:O,y:N}):{x:O,y:N};O=z.x,N=z.y;var q=c.hasOwnProperty("x"),Z=c.hasOwnProperty("y"),ee=io,ie=to,ne=window;if(b){var oe=i_(i),me="clientHeight",fe="clientWidth";if(oe===ba(i)&&(oe=Jd(i),Fc(oe).position!=="static"&&u==="absolute"&&(me="scrollHeight",fe="scrollWidth")),oe=oe,s===to||(s===io||s===ma)&&o===Qb){ie=fa;var Ce=E&&oe===ne&&ne.visualViewport?ne.visualViewport.height:oe[me];N-=Ce-r.height,N*=g?1:-1}if(s===io||(s===to||s===fa)&&o===Qb){ee=ma;var _e=E&&oe===ne&&ne.visualViewport?ne.visualViewport.width:oe[fe];O-=_e-r.width,O*=g?1:-1}}var Ae=Object.assign({position:u},b&&o$e),Oe=S===!0?a$e({x:O,y:N}):{x:O,y:N};if(O=Oe.x,N=Oe.y,g){var je;return Object.assign({},Ae,(je={},je[ie]=Z?"0":"",je[ee]=q?"0":"",je.transform=(ne.devicePixelRatio||1)<=1?"translate("+O+"px, "+N+"px)":"translate3d("+O+"px, "+N+"px, 0)",je))}return Object.assign({},Ae,(t={},t[ie]=Z?N+"px":"",t[ee]=q?O+"px":"",t.transform="",t))}function l$e(e){var t=e.state,i=e.options,r=i.gpuAcceleration,s=r===void 0?!0:r,o=i.adaptive,c=o===void 0?!0:o,u=i.roundOffsets,g=u===void 0?!0:u,b={placement:Ql(t.placement),variation:eg(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,HD(Object.assign({},b,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:g})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,HD(Object.assign({},b,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:g})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var u$e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:l$e,data:{}};function c$e(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},s=t.attributes[i]||{},o=t.elements[i];!ha(o)||!hu(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(c){var u=s[c];u===!1?o.removeAttribute(c):o.setAttribute(c,u===!0?"":u)}))})}function h$e(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],o=t.attributes[r]||{},c=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),u=c.reduce(function(g,b){return g[b]="",g},{});!ha(s)||!hu(s)||(Object.assign(s.style,u),Object.keys(o).forEach(function(g){s.removeAttribute(g)}))})}}var d$e={name:"applyStyles",enabled:!0,phase:"write",fn:c$e,effect:h$e,requires:["computeStyles"]};function p$e(e,t,i){var r=Ql(e),s=[io,to].indexOf(r)>=0?-1:1,o=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,c=o[0],u=o[1];return c=c||0,u=(u||0)*s,[io,ma].indexOf(r)>=0?{x:u,y:c}:{x:c,y:u}}function f$e(e){var t=e.state,i=e.options,r=e.name,s=i.offset,o=s===void 0?[0,0]:s,c=_X.reduce(function(S,E){return S[E]=p$e(E,t.rects,o),S},{}),u=c[t.placement],g=u.x,b=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=g,t.modifiersData.popperOffsets.y+=b),t.modifiersData[r]=c}var m$e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:f$e},y$e={left:"right",right:"left",bottom:"top",top:"bottom"};function ex(e){return e.replace(/left|right|bottom|top/g,function(t){return y$e[t]})}var g$e={start:"end",end:"start"};function WD(e){return e.replace(/start|end/g,function(t){return g$e[t]})}function v$e(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=i.boundary,o=i.rootBoundary,c=i.padding,u=i.flipVariations,g=i.allowedAutoPlacements,b=g===void 0?_X:g,S=eg(r),E=S?u?GD:GD.filter(function(L){return eg(L)===S}):r_,A=E.filter(function(L){return b.indexOf(L)>=0});A.length===0&&(A=E);var O=A.reduce(function(L,N){return L[N]=ew(e,{placement:N,boundary:s,rootBoundary:o,padding:c})[Ql(N)],L},{});return Object.keys(O).sort(function(L,N){return O[L]-O[N]})}function b$e(e){if(Ql(e)===g8)return[];var t=ex(e);return[WD(e),t,WD(t)]}function w$e(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=i.mainAxis,o=s===void 0?!0:s,c=i.altAxis,u=c===void 0?!0:c,g=i.fallbackPlacements,b=i.padding,S=i.boundary,E=i.rootBoundary,A=i.altBoundary,O=i.flipVariations,L=O===void 0?!0:O,N=i.allowedAutoPlacements,z=t.options.placement,q=Ql(z),Z=q===z,ee=g||(Z||!L?[ex(z)]:b$e(z)),ie=[z].concat(ee).reduce(function($n,Os){return $n.concat(Ql(Os)===g8?v$e(t,{placement:Os,boundary:S,rootBoundary:E,padding:b,flipVariations:L,allowedAutoPlacements:N}):Os)},[]),ne=t.rects.reference,oe=t.rects.popper,me=new Map,fe=!0,Ce=ie[0],_e=0;_e<ie.length;_e++){var Ae=ie[_e],Oe=Ql(Ae),je=eg(Ae)===Qy,De=[to,fa].indexOf(Oe)>=0,nt=De?"width":"height",mt=ew(t,{placement:Ae,boundary:S,rootBoundary:E,altBoundary:A,padding:b}),ct=De?je?ma:io:je?fa:to;ne[nt]>oe[nt]&&(ct=ex(ct));var dt=ex(ct),Nt=[];if(o&&Nt.push(mt[Oe]<=0),u&&Nt.push(mt[ct]<=0,mt[dt]<=0),Nt.every(function($n){return $n})){Ce=Ae,fe=!1;break}me.set(Ae,Nt)}if(fe)for(var Mr=L?3:1,nn=function(Os){var wa=ie.find(function(_a){var ao=me.get(_a);if(ao)return ao.slice(0,Os).every(function(fu){return fu})});if(wa)return Ce=wa,"break"},ks=Mr;ks>0;ks--){var oo=nn(ks);if(oo==="break")break}t.placement!==Ce&&(t.modifiersData[r]._skip=!0,t.placement=Ce,t.reset=!0)}}var _$e={name:"flip",enabled:!0,phase:"main",fn:w$e,requiresIfExists:["offset"],data:{_skip:!1}};function x$e(e){return e==="x"?"y":"x"}function ab(e,t,i){return e0(e,TS(t,i))}function S$e(e,t,i){var r=ab(e,t,i);return r>i?i:r}function I$e(e){var t=e.state,i=e.options,r=e.name,s=i.mainAxis,o=s===void 0?!0:s,c=i.altAxis,u=c===void 0?!1:c,g=i.boundary,b=i.rootBoundary,S=i.altBoundary,E=i.padding,A=i.tether,O=A===void 0?!0:A,L=i.tetherOffset,N=L===void 0?0:L,z=ew(t,{boundary:g,rootBoundary:b,padding:E,altBoundary:S}),q=Ql(t.placement),Z=eg(t.placement),ee=!Z,ie=v8(q),ne=x$e(ie),oe=t.modifiersData.popperOffsets,me=t.rects.reference,fe=t.rects.popper,Ce=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,_e=typeof Ce=="number"?{mainAxis:Ce,altAxis:Ce}:Object.assign({mainAxis:0,altAxis:0},Ce),Ae=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Oe={x:0,y:0};if(!!oe){if(o){var je,De=ie==="y"?to:io,nt=ie==="y"?fa:ma,mt=ie==="y"?"height":"width",ct=oe[ie],dt=ct+z[De],Nt=ct-z[nt],Mr=O?-fe[mt]/2:0,nn=Z===Qy?me[mt]:fe[mt],ks=Z===Qy?-fe[mt]:-me[mt],oo=t.elements.arrow,$n=O&&oo?y8(oo):{width:0,height:0},Os=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:IX(),wa=Os[De],_a=Os[nt],ao=ab(0,me[mt],$n[mt]),fu=ee?me[mt]/2-Mr-ao-wa-_e.mainAxis:nn-ao-wa-_e.mainAxis,Yd=ee?-me[mt]/2+Mr+ao+_a+_e.mainAxis:ks+ao+_a+_e.mainAxis,mu=t.elements.arrow&&i_(t.elements.arrow),Kd=mu?ie==="y"?mu.clientTop||0:mu.clientLeft||0:0,yu=(je=Ae==null?void 0:Ae[ie])!=null?je:0,Zd=ct+fu-yu-Kd,Xd=ct+Yd-yu,zc=ab(O?TS(dt,Zd):dt,ct,O?e0(Nt,Xd):Nt);oe[ie]=zc,Oe[ie]=zc-ct}if(u){var Wi,Q=ie==="x"?to:io,Tr=ie==="x"?fa:ma,kn=oe[ne],Et=ne==="y"?"height":"width",Ci=kn+z[Q],Ps=kn-z[Tr],Fs=[to,io].indexOf(q)!==-1,Ls=(Wi=Ae==null?void 0:Ae[ne])!=null?Wi:0,on=Fs?Ci:kn-me[Et]-fe[Et]-Ls+_e.altAxis,Rs=Fs?kn+me[Et]+fe[Et]-Ls-_e.altAxis:Ps,gu=O&&Fs?S$e(on,kn,Rs):ab(O?on:Ci,kn,O?Rs:Ps);oe[ne]=gu,Oe[ne]=gu-kn}t.modifiersData[r]=Oe}}var E$e={name:"preventOverflow",enabled:!0,phase:"main",fn:I$e,requiresIfExists:["offset"]},M$e=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,EX(typeof t!="number"?t:MX(t,r_))};function T$e(e){var t,i=e.state,r=e.name,s=e.options,o=i.elements.arrow,c=i.modifiersData.popperOffsets,u=Ql(i.placement),g=v8(u),b=[io,ma].indexOf(u)>=0,S=b?"height":"width";if(!(!o||!c)){var E=M$e(s.padding,i),A=y8(o),O=g==="y"?to:io,L=g==="y"?fa:ma,N=i.rects.reference[S]+i.rects.reference[g]-c[g]-i.rects.popper[S],z=c[g]-i.rects.reference[g],q=i_(o),Z=q?g==="y"?q.clientHeight||0:q.clientWidth||0:0,ee=N/2-z/2,ie=E[O],ne=Z-A[S]-E[L],oe=Z/2-A[S]/2+ee,me=ab(ie,oe,ne),fe=g;i.modifiersData[r]=(t={},t[fe]=me,t.centerOffset=me-oe,t)}}function C$e(e){var t=e.state,i=e.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||!xX(t.elements.popper,s)||(t.elements.arrow=s))}var A$e={name:"arrow",enabled:!0,phase:"main",fn:T$e,effect:C$e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function JD(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function YD(e){return[to,ma,fa,io].some(function(t){return e[t]>=0})}function $$e(e){var t=e.state,i=e.name,r=t.rects.reference,s=t.rects.popper,o=t.modifiersData.preventOverflow,c=ew(t,{elementContext:"reference"}),u=ew(t,{altBoundary:!0}),g=JD(c,r),b=JD(u,s,o),S=YD(g),E=YD(b);t.modifiersData[i]={referenceClippingOffsets:g,popperEscapeOffsets:b,isReferenceHidden:S,hasPopperEscaped:E},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":S,"data-popper-escaped":E})}var k$e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:$$e},O$e=[r$e,n$e,u$e,d$e,m$e,_$e,E$e,A$e,k$e],P$e=t$e({defaultModifiers:O$e});const F$e=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],KD={base:"esri-popover",open:"esri-popover--open"},L$e={position:"fixed","z-index":"1000"};let Ul=class extends ki{constructor(e,t){super(e,t),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=i=>{this._rootNode=i},this._afterContentCreate=i=>{this._contentNode=i},this._updatePosition=()=>{U(this._popper)&&this._popper.update()}}initialize(){this.when(()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=!0)}),this.addHandles([ge(()=>[this.open,this.anchorElement],()=>this._buildPopper(),rt),ge(()=>[this.placement,this.offset],()=>this._setPopperOptions(),rt)])}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),U(this._rootNode)&&(nme(this._rootNode),this._rootNode=null),this._contentNode=null,U(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(e){}set owner(e){this._set("owner",e)}get placement(){return"top"}set placement(e){F$e.includes(e)?this._override("placement",e):this._clearOverride("placement")}get test(){return{rootNode:this._rootNode}}render(){var r;const{open:e,owner:t,renderContentFunction:i}=this;return J("div",{afterCreate:this._afterRootCreate,class:this.classes(KD.base,e?KD.open:null),styles:L$e,lang:Dr()},J("div",{dir:sye((r=this.owner)==null?void 0:r.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},e&&(i==null?void 0:i.call(t))))}_buildPopper(){U(this._popper)&&(this._popper.destroy(),this._popper=null);const e=this._contentNode;if(ae(e)||!this.open||!this.renderContentFunction)return;const t=this._getAnchor();t&&(this._popper=P$e(t,e),this._setPopperOptions())}_setPopperOptions(){const{placement:e,offset:t,_popper:i}=this;ae(i)||(i.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:t}}]}),i.forceUpdate())}_getAnchor(){const{anchorElement:e}=this;return F5(typeof e=="function"?e():e)}};v([_()],Ul.prototype,"anchorElement",void 0),v([_()],Ul.prototype,"container",null),v([_()],Ul.prototype,"offset",void 0),v([_()],Ul.prototype,"open",void 0),v([_()],Ul.prototype,"owner",null),v([_()],Ul.prototype,"placement",null),v([_()],Ul.prototype,"renderContentFunction",void 0),Ul=v([K("esri.widgets.support.Popover")],Ul);const TX=Ul,dn="esri-button-menu",Vs={base:dn,content:`${dn}__content`,contentWrapper:`${dn}__content-wrapper`,itemWrapper:`${dn}__item-wrapper`,label:`${dn}__label`,icon:`${dn}__icon`,item:`${dn}__item`,itemLabel:`${dn}__item-label`,itemLabelContent:`${dn}__item-label-content`,selectableMenuItem:`${dn}__item--selectable`,selectedMenuItem:`${dn}__item--selected`,checkbox:`${dn}__checkbox`,embeddedContentWrapper:`${dn}__embedded-content-wrapper`,button:`${dn}__button`,buttonSelected:`${dn}__button--selected`,defaultIconClass:"esri-icon-menu",widget:"esri-widget"};let Lh=class extends ar(ki){constructor(e,t){super(e,t),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.disabled=!1,this.iconClass="",this.viewModel=new TAe,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new TX({owner:this,open:!!this.open,placement:Zn(this.container)?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add(ge(()=>this.open,e=>{var t;return(t=this._popover)==null?void 0:t.set("open",e)})),document.addEventListener("click",this._handleOutsideClick)}destroy(){var e;(e=this._popover)==null||e.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(e){var i,r;if(!this.open||!this._rootNode||!this._menuContentNode)return;const t=e.target;((i=this._menuContentNode)==null?void 0:i.contains(t))||((r=this._rootNode)==null?void 0:r.contains(t))||(this.open=!1)}get items(){return this.viewModel.items}set items(e){this.viewModel.items=e}get open(){return this.viewModel.open}set open(e){this.viewModel.open=e}render(){return J("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes(Vs.base,Vs.widget),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:e,id:t,label:i,open:r}=this,s=this.classes(Vs.button,e!=null?e:Vs.defaultIconClass,r?Vs.buttonSelected:null);return J("button",{"aria-pressed":r.toString(),"aria-controls":`${t}-menu`,"aria-expanded":r.toString(),"aria-haspopup":"true","aria-label":i,bind:this,class:s,disabled:this.disabled,id:`${t}-button`,title:i!=null?i:"",selected:r,onclick:this._toggleOpen,tabindex:this.disabled?-1:0,type:"button"})}renderMenuContent(){var i;const{id:e,open:t}=this;return J("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:Vs.content,"data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!t},J("ul",{"aria-labelledby":`${e}-button`,bind:this,class:Vs.itemWrapper,id:`${e}-menu`,role:"menu"},((i=this.items)==null?void 0:i.length)&&this.renderItems()))}renderItems(){var e;return(e=this.items)==null?void 0:e.map((t,i)=>this.renderItem(t,i))}renderItem(e,t,i){var c;const r=U(i)?`${this.id}-menu-item-${t}-${i}`:`${this.id}-menu-item-${t}`,s=`${r}-label`,o=this.classes(Vs.item,e.selectionEnabled?Vs.selectableMenuItem:null,e.selectionEnabled&&e.selected?Vs.selectedMenuItem:null);return J("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:o,"data-item-index":t,"data-item-subIndex":i,for:r,key:r,onkeydown:u=>this._handleMenuItemKeydown(u,e),onclick:u=>this._handleMenuItemInteraction(u,e),role:"menuitem",tabindex:this.disabled?-1:0},J("input",{disabled:!0,checked:e.selected,class:Vs.checkbox,id:r,name:r,tabindex:"-1",type:"checkbox"}),J("label",{bind:this,class:this.classes(Vs.button,Vs.itemLabel),for:r,id:s},J("span",{class:this.classes(Vs.icon,e.iconClass),"aria-hidden":"true"}),J("span",{class:Vs.itemLabelContent},f0.sanitize(e.label))),J("ul",{"aria-labelledby":s,class:Vs.embeddedContentWrapper,id:`${this.id}-submenu`,role:"menu"},(c=e==null?void 0:e.items)==null?void 0:c.map((u,g)=>this.renderItem(u,t,g))))}_afterRootNodeCreate(e){var t;this._rootNode=e,(t=this._popover)==null||t.set("anchorElement",()=>e)}_handleMenuItemInteraction(e,t){t.selected=!t.selected,t.open=!(!t.selected||!t.items),t.autoCloseMenu&&this.set("open",!1),t.clickFunction&&t.clickFunction({event:e,item:t}),e.stopPropagation()}_handleMenuItemKeydown(e,t){const i=el(e);Nf(i)&&this._handleMenuItemInteraction(e,t),i==="Escape"&&(this.open=!1,e.preventDefault(),e.stopPropagation())}_afterMenuContentNodeCreate(e){this._menuContentNode=e,e.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(e){e["data-item-index"]===0&&e.focus()}};v([_()],Lh.prototype,"disabled",void 0),v([_()],Lh.prototype,"iconClass",void 0),v([_()],Lh.prototype,"items",null),v([_()],Lh.prototype,"open",null),v([_()],Lh.prototype,"viewModel",void 0),Lh=v([K("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],Lh);const CX=Lh,v2="esri-column",cp={sortAscIcon:"esri-icon-arrow-up",sortDescIcon:"esri-icon-arrow-down",menuContainer:`${v2}__menu-container`,menuIcon:"esri-icon-handle-horizontal",sorter:`${v2}__sorter`,headerContent:`${v2}__header-content`,headerLabel:`${v2}__header-label`},ZD={keyboardSort1:"Enter",keyboardSort2:"Spacebar"};let di=class extends ar(ss.EventedAccessor){constructor(e){super(e),this._menuContainer=document.createElement("div"),this.activeRowIndex=null,this.autoWidth=!1,this.cellValueFormatFunction=({value:t})=>f0.sanitize(t),this.flexGrow=1,this.footerRenderFunction=null,this.frozen=!1,this.grid=null,this.header=null,this.headerRenderFunction=t=>{const{root:i}=t;if(this.removeCellContent(i),i.classList.add(cp.headerContent),this.sortable)this.headerSorterRenderFunction(t);else{const r=document.createElement("div");r.classList.add(cp.headerLabel),r.textContent=this.label,i.appendChild(r)}this.headerMenuEnabled&&this.headerMenuRenderFunction(t)},this.headerMenuRenderFunction=({root:t})=>{var i,r;(r=(i=this.menu)==null?void 0:i.items)!=null&&r.length&&t.appendChild(this._menuContainer)},this.headerSorterRenderFunction=({root:t})=>{var c;const{label:i,sortElement:r}=this;if(!r)return void(t.textContent=i);r.textContent!==i&&r.setAttribute("textContent",i),t.appendChild(r);const s=(c=this.grid)==null?void 0:c.getSlotElementByName(t.slot),o=s==null?void 0:s.parentElement;o&&!o.onkeydown&&(o.onkeydown=({key:u})=>{u!==ZD.keyboardSort1&&u!==ZD.keyboardSort2||r.click()})},this.hidden=!1,this.headerMenuEnabled=!0,this.initialSortPriority=null,this.menu=null,this.menuConfig=null,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.path=null,this.renderFunction=({root:t,column:i,rowData:r})=>{const s=this.getCellValue(i,r),o=this.cellValueFormatFunction({column:i,rowData:r,value:s});t.innerHTML!==o&&(t.innerHTML=o)},this.resizable=!0,this.sortable=!0,this.textAlign="start",this.width=200}initialize(){const{messages:e,path:t}=this;this._set("sortElement",this.createSortElement()),this.sortElement.setAttribute("path",t!=null?t:""),this._menuContainer.classList.add(cp.menuContainer),this.menu=new CX({label:e==null?void 0:e.options,iconClass:cp.menuIcon,...this.menuConfig}),this.menu.container=this._menuContainer,this.menu.set("items",this.getMenuItems()),this.handles.add(ge(()=>this.hidden,()=>{var i;return(i=this.menu)==null?void 0:i.set("open",!1)}),ge(()=>this.path,i=>{this.sortElement&&this.sortElement.path!==i&&this.sortElement.setAttribute("path",i!=null?i:"")}))}destroy(){var e;(e=this.menu)==null||e.destroy()}set direction(e){this.sortable&&(this.sortElement&&(e?this.sortElement.direction!==e&&this.sortElement.setAttribute("direction",e):this.sortElement.removeAttribute("direction")),this._set("direction",e))}get direction(){return this._get("direction")||null}get label(){var e,t;return f0.sanitize((t=(e=this.header)!=null?e:this.path)!=null?t:"")}getMenuItems(){const{menuConfig:e,sortable:t}=this,i=e==null?void 0:e.items,r=this.getSortMenuItems(),s=[];return t&&s.push(...r),i!=null&&i.length&&s.push(...i),s.length?s:null}getSortMenuItems(){const{messages:e}=this;return[{selected:this.direction==="asc",iconClass:cp.sortAscIcon,label:e==null?void 0:e.sortAsc,autoCloseMenu:!0,clickFunction:()=>this.set("direction",this.direction!=="asc"?"asc":null)},{selected:this.direction==="desc",iconClass:cp.sortDescIcon,label:e==null?void 0:e.sortDesc,autoCloseMenu:!0,clickFunction:()=>this.set("direction",this.direction!=="desc"?"desc":null)}]}getCellValue(e,t){var i;return(i=t==null?void 0:t.item[e==null?void 0:e.path])!=null?i:""}createSortElement(){const{direction:e,label:t,path:i,initialSortPriority:r}=this,s=document.createElement("vaadin-grid-sorter");return s.classList.add(cp.sorter),s.setAttribute("path",i!=null?i:""),s.setAttribute("title",t),s.textContent=t,e&&s.setAttribute("direction",e),U(r)&&(s._initialOrder=r),s.addEventListener("direction-changed",()=>{this.direction!==s.direction&&this._set("direction",s.direction)}),s}removeCellContent(e){if(e)for(;e.firstChild;)try{e.removeChild(e.firstChild)}catch{}}};v([_()],di.prototype,"activeRowIndex",void 0),v([_()],di.prototype,"autoWidth",void 0),v([_()],di.prototype,"cellValueFormatFunction",void 0),v([_()],di.prototype,"direction",null),v([_()],di.prototype,"flexGrow",void 0),v([_()],di.prototype,"footerRenderFunction",void 0),v([_()],di.prototype,"frozen",void 0),v([_()],di.prototype,"grid",void 0),v([_()],di.prototype,"header",void 0),v([_()],di.prototype,"headerRenderFunction",void 0),v([_()],di.prototype,"headerMenuRenderFunction",void 0),v([_()],di.prototype,"headerSorterRenderFunction",void 0),v([_()],di.prototype,"hidden",void 0),v([_()],di.prototype,"headerMenuEnabled",void 0),v([_({constructOnly:!0})],di.prototype,"initialSortPriority",void 0),v([_({readOnly:!0})],di.prototype,"label",null),v([_()],di.prototype,"menu",void 0),v([_()],di.prototype,"menuConfig",void 0),v([_()],di.prototype,"messages",void 0),v([_()],di.prototype,"messagesCommon",void 0),v([_()],di.prototype,"messagesURIUtils",void 0),v([_()],di.prototype,"path",void 0),v([_()],di.prototype,"renderFunction",void 0),v([_()],di.prototype,"resizable",void 0),v([_()],di.prototype,"sortable",void 0),v([_({readOnly:!0})],di.prototype,"sortElement",void 0),v([_()],di.prototype,"textAlign",void 0),v([_()],di.prototype,"width",void 0),di=v([K("esri.widgets.FeatureTable.Grid.Column")],di);const M9=di,R$e={attachmentsColumn:"esri-feature-table__column--attachments"};let Rh=class extends M9{constructor(e){super(e),this.header="",this.path="EsriFeatureTableAttachmentsColumn",this.renderFunction=({root:t,rowData:i})=>{const r=this._countFromItem(i.item).toString();t.innerHTML=`<div class="${R$e.attachmentsColumn}">${r}</div>`},this.sortable=!1,this.textAlign="center"}_countFromItem(e){return e.attachments&&e.attachments.length||0}};v([_({constructOnly:!0})],Rh.prototype,"header",void 0),v([_({readOnly:!0})],Rh.prototype,"path",void 0),v([_()],Rh.prototype,"renderFunction",void 0),v([_({readOnly:!0})],Rh.prototype,"sortable",void 0),v([_({readOnly:!0})],Rh.prototype,"textAlign",void 0),Rh=v([K("esri.widgets.FeatureTable.AttachmentsColumn")],Rh);const N$e=Rh,_d=e=>!!e.inputFields,ec=(e,t)=>{var i;return U(e)&&((i=e.input)==null?void 0:i.type)===t},XD={typeFieldName:null,types:[]};function QD(e,t,i){const r=Object.keys(t).filter(c=>z4(e,c)),s=r.map(c=>t[c]),o=r.map(c=>i.get(c)).filter(U);return j$e(e,D$e(s,o))}function D$e(e,t){const i=t.map((r,s)=>{let o=e[s];if(r.domain&&r.domain.type==="coded-value"){const c=r.domain.codedValues.find(u=>u.code===o);c!=null&&c.name&&(o=c.name)}return[r.name,o]});return Object.fromEntries(i)}function j$e(e,t){return pa(pa(e,i=>`{${i.toLowerCase()}}`),Object.fromEntries(Object.entries(t).map(([i,r])=>[i.toLowerCase(),r])))}const f$=e=>{var t,i;return e?e.type==="subtype-sublayer"?{typeFieldName:(t=e.parent)==null?void 0:t.subtypeField,types:(i=e.parent)==null?void 0:i.subtypes}:"types"in e&&e.types?{typeFieldName:e.typeIdField,types:e.types.map(({id:r,name:s,domains:o})=>({code:r,name:s,domains:o}))}:XD:XD};var tc,CS;(function(e){e.Text="text",e.Number="number",e.Date="date",e.Unsupported="unsupported"})(tc||(tc={})),function(e){e.TOO_SHORT="length-validation-error::too-short"}(CS||(CS={}));const ej={type:"number"},tj={type:"number",intlOptions:{notation:"scientific"}},ij={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}},z$e="__internal-type-based-coded-value-domain__";function rj(e){return e>=1e7||e<=-1e7}let Tt=class extends ar(Re){constructor(e){super(e),this._storedValue=null,this.arcadeEditType="NA",this.editableExpressionExecutor=null,this.id=Bf().toString(),this.requiredExpressionExecutor=null,this.valueExpressionExecutor=null,this.visibilityExpressionExecutor=null,this.feature=null,this.field=null,this.fieldElement=null,this.layer=null,this.error=null,this.group=null,this.messages=null}get _configAllowsEdits(){var r,s,o,c;const{fieldElement:e,layer:t,name:i}=this;return U(e)?e.editableExpression?this.evaluatedEditableExpression:e.editable!==!1:t.userHasUpdateItemPrivileges?!0:(c=(o="popupTemplate"in t?(s=(r=t==null?void 0:t.popupTemplate)==null?void 0:r.fieldInfos)==null?void 0:s.find(({fieldName:u})=>u===i):null)==null?void 0:o.isEditable)!=null?c:!0}get _layerFieldAllowsEdits(){const{field:e,layer:t}=this;if(!t||!e)return!1;const i=Tn(t),r=i==null?void 0:i.operations.supportsEditing,s=e.editable,o=V$e(i,this.arcadeEditType);return!!(r&&s&&o)}get isUsingValueExpression(){return this._shouldUseValueExpression()}get evaluatedEditableExpression(){const{editableExpressionExecutor:e}=this;return U(e)?!!e.lastEvaluatedValue:null}get evaluatedRequiredExpression(){const{requiredExpressionExecutor:e}=this;return U(e)?!!e.lastEvaluatedValue:null}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return U(e)?!!e.lastEvaluatedValue:null}get evaluatedValueExpression(){const{valueExpressionExecutor:e}=this;return U(e)?e.lastEvaluatedValue:null}set initialFeature(e){this._set("initialFeature",e),this.notifyChange("valid")}get description(){var e;return(e=this.fieldElement)==null?void 0:e.description}get domain(){const{layer:e}=this,{typeFieldName:t,types:i}=f$(e);if(t===this.name&&ae(this.field.domain))return new X5({name:z$e,codedValues:i.map(({code:c,name:u})=>new Ym({code:c,name:u}))});const{feature:r}=this,s=e.getFieldDomain(this.name,{feature:r}),o=Cy(this.fieldElement,"domain");return U(o)&&this._isDomainCompatible(o)?o:s}get editable(){var e;return!!this._layerFieldAllowsEdits&&((e=this.evaluatedEditableExpression)!=null?e:this._configAllowsEdits)}get inputType(){var e,t;return(t=(e=this.fieldElement)==null?void 0:e.input)==null?void 0:t.type}get errorMessage(){return this._toErrorMessage()}get hint(){var e;return(e=this.fieldElement)==null?void 0:e.hint}get includeTime(){var i;const{fieldElement:e}=this,t=U(e)&&((i=e.input)==null?void 0:i.type)==="datetime-picker"?e.input.includeTime:void 0;return t===void 0||t}get label(){return U(this.fieldElement)&&this.fieldElement.label||this.field.alias||this.field.name}get maxLength(){if(this.type===tc.Date)return-1;const{field:t,fieldElement:i}=this,r=t==null?void 0:t.length,s=sj(i)?i.input.maxLength:NaN;return!isNaN(s)&&s>=-1&&(r===-1||s<=r)?s:r}get minLength(){if(this.type===tc.Date)return-1;const{field:t,fieldElement:i}=this,r=t==null?void 0:t.length,s=sj(i)?i.input.minLength:NaN;return!isNaN(s)&&s>=-1&&(r===-1||s<=r)?s:-1}get name(){var e;return(e=this.field)==null?void 0:e.name}get required(){const{editable:e,evaluatedRequiredExpression:t,field:i,visible:r}=this;return!!e&&((i==null?void 0:i.nullable)===!1||!(!r||!U(t))&&t)}set required(e){this._overrideIfSome("required",e)}get submittable(){const{field:e,required:t,valid:i,value:r}=this;return(!t||!ae(r))&&(!!i||this.initialFeature.getAttribute(e.name)===r)}get type(){const{field:e}=this;return rl(e)?tc.Number:Ab(e)?tc.Text:nF(e)?tc.Date:tc.Unsupported}get updating(){const{editableExpressionExecutor:e,valueExpressionExecutor:t}=this;return U(t)&&t.updating||U(e)&&e.updating}get valid(){const e=this.editable?this._validate():null;return this._set("error",e),e===null}get value(){if(this._shouldUseValueExpression()){const e=this.evaluatedValueExpression;if(this.type===tc.Date){if(e instanceof Date)return e.getTime();if(typeof e!="number")return parseInt(e,10)}return U(e)&&typeof e=="object"?e.toString():e}return this.get("_storedValue")}set value(e){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",e)}get visible(){return!this._isEditorField()&&(U(this.evaluatedVisibilityExpression)?this.evaluatedVisibilityExpression:!!U(this.fieldElement)||this._isVisibleByDefault())}_isDomainCompatible(e){const{field:t}=this;if((e==null?void 0:e.type)==="coded-value"){const i=typeof e.codedValues[0].code;if(i==="string"&&Ab(t)||i==="number"&&rl(t))return!0}return!!((e==null?void 0:e.type)==="range"&&rl(t)||nF(t))}_validate(){const{domain:e,field:t,initialFeature:i,minLength:r,required:s,type:o,valid:c,value:u}=this,g=s&&u===null,b=c!==void 0;return!g&&i.getAttribute(t.name)===u&&b?null:g?Ly.INVALID_TYPE:o==="text"&&r>-1&&typeof u=="string"&&u.length<r?CS.TOO_SHORT:e?u!==null||s?bq(e,u):null:Cde(t,u)}_isVisibleByDefault(){var t,i;const e=(t=this.field)==null?void 0:t.type;return((i=this.field)==null?void 0:i.visible)&&e!=="oid"&&e!=="global-id"&&!this._isGeometryField()}_isEditorField(){return vde(this.layer).includes(this.name)}_isGeometryField(){return bde(this.layer).includes(this.name)}_shouldUseValueExpression(){return this._layerFieldAllowsEdits&&!this._configAllowsEdits&&U(this.valueExpressionExecutor)}_toErrorMessage(){const{domain:e,field:t,messages:i,minLength:r,value:s,required:o,type:c}=this,u=this.error;if(o&&s===null)return i.validationErrors.cannotBeNull;if(u===Pd.VALUE_OUT_OF_RANGE||u===$b.OUT_OF_RANGE){const g=c7(e)||Mq(t);return es(i.validationErrors.outsideRange,g,{format:{max:c==="date"?ij:rj(g.max)?tj:ej,min:c==="date"?ij:rj(g.min)?tj:ej}})}return u===Pd.INVALID_CODED_VALUE?i.validationErrors.invalidCodedValue:u===Ly.INVALID_TYPE?i.validationErrors.invalidType:u===CS.TOO_SHORT?es(i.validationErrors.tooShort,{min:r}):null}};v([_()],Tt.prototype,"_storedValue",void 0),v([_()],Tt.prototype,"_configAllowsEdits",null),v([_()],Tt.prototype,"_layerFieldAllowsEdits",null),v([_()],Tt.prototype,"arcadeEditType",void 0),v([_()],Tt.prototype,"editableExpressionExecutor",void 0),v([_()],Tt.prototype,"requiredExpressionExecutor",void 0),v([_()],Tt.prototype,"valueExpressionExecutor",void 0),v([_()],Tt.prototype,"isUsingValueExpression",null),v([_()],Tt.prototype,"visibilityExpressionExecutor",void 0),v([_()],Tt.prototype,"evaluatedEditableExpression",null),v([_()],Tt.prototype,"evaluatedRequiredExpression",null),v([_()],Tt.prototype,"evaluatedVisibilityExpression",null),v([_()],Tt.prototype,"evaluatedValueExpression",null),v([_()],Tt.prototype,"feature",void 0),v([_()],Tt.prototype,"field",void 0),v([_({constructOnly:!0})],Tt.prototype,"fieldElement",void 0),v([_()],Tt.prototype,"initialFeature",null),v([_()],Tt.prototype,"layer",void 0),v([_({readOnly:!0})],Tt.prototype,"description",null),v([_()],Tt.prototype,"domain",null),v([_()],Tt.prototype,"editable",null),v([_({readOnly:!0})],Tt.prototype,"inputType",null),v([_({readOnly:!0})],Tt.prototype,"error",void 0),v([_({dependsOn:["error","messages","value"]})],Tt.prototype,"errorMessage",null),v([_()],Tt.prototype,"group",void 0),v([_({readOnly:!0})],Tt.prototype,"hint",null),v([_()],Tt.prototype,"includeTime",null),v([_()],Tt.prototype,"label",null),v([_()],Tt.prototype,"maxLength",null),v([_()],Tt.prototype,"minLength",null),v([_()],Tt.prototype,"messages",void 0),v([_({readOnly:!0})],Tt.prototype,"name",null),v([_()],Tt.prototype,"required",null),v([_()],Tt.prototype,"submittable",null),v([_()],Tt.prototype,"type",null),v([_()],Tt.prototype,"updating",null),v([_()],Tt.prototype,"valid",null),v([_({value:null})],Tt.prototype,"value",null),v([_()],Tt.prototype,"visible",null),Tt=v([K("esri.widgets.FeatureForm.InputField")],Tt);const V$e=(e,t)=>{if(!e)return!0;const{operations:i}=e;switch(t){case"INSERT":return i.supportsAdd;case"UPDATE":case"DELETE":return i.supportsUpdate;default:return!0}},sj=e=>U(e)&&(ec(e,"text-box")||ec(e,"text-area")),m$=Tt,nj="esri-editor-column__cell-input",oj={input:nj,inputContainer:`${nj}--container`},aj={showInput:"Enter",hideInput:"Escape"};let Hs=class extends M9{constructor(e){super(e),this.activeEditInfo=null,this.cellValueValidatorFunction=({oldValue:t,value:i})=>t!==i,this.editable=!1,this.inputRenderFunction=({root:t,column:i,rowData:r})=>{var u,g;if((u=this.activeEditInfo)!=null&&u.updating||!this.editable)return;const s=this.getCellValue(i,r),o=this.createInputElement({root:t,column:i,rowData:r,value:s});this._set("activeEditInfo",{column:i,input:o,root:t,rowData:r,updating:!0,oldValue:s});const c=this.createInputContainer();c.appendChild(o),this.removeCellContent(t),t.appendChild(c),o.focus(),o instanceof HTMLInputElement&&o.select(),(g=this.grid)==null||g.notifyResize()},this.loadingMessage="",this.inputType="text",this.maxLength=null,this.parseInputValueFunction=({input:t})=>t.value,this.renderFunction=t=>{var E;const{root:i,column:r,rowData:s}=t,{activeEditInfo:o}=this;if(o&&o.updating)return;const c=this.getCellValue(r,s),u=this.cellValueFormatFunction({column:r,rowData:s,value:c});i.onclick=()=>i.focus(),i.ondblclick=()=>this.inputRenderFunction(t),i.ontouchend=()=>this.inputRenderFunction(t);const g=(E=this.grid)==null?void 0:E.getSlotElementByName(i.slot),b=g==null?void 0:g.parentElement;b&&!b.onkeydown&&(b.onkeydown=A=>{A.key!==aj.showInput||this.activeEditInfo||this.inputRenderFunction(t),A.key===aj.hideInput&&this.activeEditInfo&&this.cancel()}),U(c)&&U(u)?i.title=u.toString():i.title&&i.removeAttribute("title");const S=w3(this.messagesURIUtils,u);(u==null?void 0:u.toString())!==i.innerHTML&&S!==i.innerHTML&&(i.innerHTML=S)},this.required=!1,this.store=null,this.updateRowItemFunction=({rowData:t,column:i,value:r})=>{eu(t),t.item[i.path]=r},this.updateStoreItemFunction=async({rowData:t,column:i,value:r})=>{var s;eu(t),await((s=this.store)==null?void 0:s.updateItem({index:t.index,name:i.path,value:r}))}}cancel(){var u;const{activeEditInfo:e}=this;if(!e)return;const{column:t,root:i,rowData:r,oldValue:s}=e;this._set("activeEditInfo",null);const o=this.cellValueFormatFunction({column:t,rowData:r,value:s}),c=w3(this.messagesURIUtils,o);i.innerHTML=c,(u=this.grid)==null||u.notifyResize()}createInputContainer(){const e=document.createElement("div");return e.classList.add(oj.inputContainer),e}createInputElement({value:e}){const t=document.createElement("input");return t.classList.add(oj.input),this.maxLength!=null&&(t.maxLength=this.maxLength),t.type=this.inputType,t.value=e,t.onblur=()=>{t.onblur=null,this.submit()},t}async submit(){var u,g;const{activeEditInfo:e}=this;if(!e)return;const{column:t,input:i,root:r,rowData:s,oldValue:o}=e,c=this.parseInputValueFunction({input:i,column:t,rowData:s});if(!this.cellValueValidatorFunction({value:c,oldValue:o,column:t,rowData:s}))this.cancel();else{r.innerHTML=this.loadingMessage,(u=this.grid)==null||u.notifyResize();try{await this.updateStoreItemFunction({rowData:s,column:t,value:c}),this.updateRowItemFunction({rowData:s,column:t,value:c});const b=this.getCellValue(t,s),S=this.cellValueFormatFunction({column:t,rowData:s,value:b});U(b)&&U(S)?r.title=S.toString():r.title&&r.removeAttribute("title");const E=w3(this.messagesURIUtils,S);r.innerHTML=E,this.emit("value-change",{column:t,rowData:s,value:b}),this._set("activeEditInfo",null),(g=this.grid)==null||g.notifyResize()}catch{this.cancel()}}}};v([_({readOnly:!0})],Hs.prototype,"activeEditInfo",void 0),v([_()],Hs.prototype,"cellValueValidatorFunction",void 0),v([_()],Hs.prototype,"editable",void 0),v([_()],Hs.prototype,"inputRenderFunction",void 0),v([_({constructOnly:!0})],Hs.prototype,"loadingMessage",void 0),v([_()],Hs.prototype,"inputType",void 0),v([_()],Hs.prototype,"maxLength",void 0),v([_()],Hs.prototype,"parseInputValueFunction",void 0),v([_()],Hs.prototype,"renderFunction",void 0),v([_()],Hs.prototype,"required",void 0),v([_()],Hs.prototype,"store",void 0),v([_()],Hs.prototype,"updateRowItemFunction",void 0),v([_()],Hs.prototype,"updateStoreItemFunction",void 0),Hs=v([K("esri.widgets.FeatureTable.Grid.EditorColumn")],Hs);const G$e=Hs;function U$e(e,t){const i=$q(t),r=Date.now(),s=i.formatToParts(r),o=new Set;s.filter(({type:b})=>b==="literal").forEach(({value:b})=>o.add(b));let c=0;const u={};for(;s.length>0;){const{type:b,value:S}=s.shift();for(let E=0;E<S.length;E++,c++){const A=e.charAt(c);if(o.has(A)){c++;break}if(b==="literal")break;u[b]||(u[b]=[]),u[b].push(A)}}const g={};try{g.day=JE(u.day.join("")),g.month=JE(u.month.join("")),g.year=JE((u.year||u.relatedYear).join(""))}catch{throw lj(t)}if(isNaN(g.day)||isNaN(g.month)||isNaN(g.year))throw lj(t);return g}function JE(e){const t=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];for(let i=0;i<10;i++)e=e.replace(t[i],i.toString());return Number(e)}function lj(e){return new de(`could not parse date input, expecting the following format: ${nr(Date.now(),e)}`)}const f1={ar:6,"ar-dz":6,"ar-kw":6,"ar-ly":6,"ar-ma":1,"ar-sa":7,"ar-tn":1,bg:1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":7,"en-gb":1,"en-ie":1,"en-il":7,"en-in":7,"en-nz":1,"en-sg":7,es:1,"es-do":7,"es-mx":7,"es-us":7,et:1,fi:1,fr:1,"fr-ca":7,"fr-ch":1,he:7,hr:1,hu:1,id:7,it:1,"it-ch":1,ja:7,ko:7,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:7,"pt-br":7,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:7,tr:1,uk:1,vi:1,"zh-cn":7,"zh-hk":7,"zh-mo":7,"zh-tw":7},q$e="Locale"in Intl&&"weekInfo"in Intl.Locale.prototype;function AX(e){if(e=e.toLowerCase(),f1[e])return f1[e];if(q$e)try{const i=new Intl.Locale(e).weekInfo.firstDay;return f1[e]=i,i}catch{}const t=kue(e);return f1[t]?f1[t]:7}function B$e(e,t){return(t+7-AX(e))%7}let Sv=class extends Re{constructor(){super(...arguments),this.state="ready",this.value=new Date}};v([_()],Sv.prototype,"state",void 0),v([_()],Sv.prototype,"value",void 0),Sv=v([K("esri.widgets.support.DateTimeElementViewModel")],Sv);const $X=Sv;let y$=class extends $X{constructor(e){super(e)}};y$=v([K("esri.widgets.support.DatePickerViewModel")],y$);const kX=y$,Cr="esri-date-picker",Rt={base:Cr,datePicker:`${Cr}__calendar`,monthPicker:`${Cr}__month-picker`,dayPicker:`${Cr}__day-picker`,week:`${Cr}__week-item`,nearbyMonth:`${Cr}__day-item--nearby-month`,activeDay:`${Cr}__day-item--active`,today:`${Cr}__day-item--today`,selectedDay:`${Cr}__day-item--selected`,day:`${Cr}__day-item`,dayHeader:`${Cr}__day-item--header`,yearPicker:`${Cr}__year-picker`,selectedYear:`${Cr}__year-picker-item--selected`,year:`${Cr}__year-picker-item`,monthDropdown:`${Cr}__month-dropdown`,date:`${Cr}__date`,datePickerToggle:`${Cr}__calendar-toggle`,dateInput:`${Cr}__input`,dateTextInput:`${Cr}__text-input`,leadingIcon:`${Cr}__icon--leading`,previousIcon:"esri-icon-left",nextIcon:"esri-icon-right",calendarIcon:"esri-icon-calendar",widget:"esri-widget",button:"esri-widget--button",input:"esri-input",select:"esri-select"},H0={year:"numeric",month:"2-digit",day:"2-digit"},H$e=[" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"];let xs=class extends ki{constructor(e,t){super(e,t),this._calendarNode=null,this._inputOrButtonNode=null,this._rootNode=null,this._pageClickHandler=null,this._requestDayPickerFocusOnCreate=!1,this._activeDate=null,this._calendarPopover=new TX({owner:this,placement:"bottom-start",anchorElement:()=>this._rootNode,renderContentFunction:this._renderCalendar}),this._isOpen=!1,this.dateInputEnabled=!1,this.messages=null,this.commitOnMonthChange=!1,this.viewModel=new kX,this.disabled=!1,this.toggle=this.toggle.bind(this)}initialize(){this.addHandles(ge(()=>{var e;return{viewModel:this.viewModel,value:(e=this.viewModel)==null?void 0:e.value}},({viewModel:e,value:t})=>{this.destroyed||!e||ae(this.onChange)||this.onChange(t)},au))}destroy(){this._calendarPopover.destroy()}get value(){return this.viewModel.value}set value(e){this.viewModel.value=e}get isOpen(){return this._isOpen}render(){return J("div",{afterCreate:gd,bind:this,class:this.classes(Rt.base,Rt.widget),"data-node-ref":"_rootNode"},this.dateInputEnabled?this._renderInputAndButtonMode():this._renderButtonOnlyMode())}toggle(){this._isOpen?this.close():this.open()}open(e=!0){this._activeDate=Ke.fromJSDate(this.viewModel.value),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=e,this._pageClickHandler||(this._pageClickHandler=boe(document,"click",({target:t})=>{var i,r;((i=this._calendarNode)==null?void 0:i.contains(t))||((r=this._rootNode)==null?void 0:r.contains(t))||this.close()}),this.addHandles(this._pageClickHandler)),this._pageClickHandler.resume()}close(e=!0){var t,i;this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1,(t=this._pageClickHandler)==null||t.pause(),e&&((i=this._inputOrButtonNode)==null||i.focus())}_renderButtonOnlyMode(){const e=nr(this.viewModel.value,H0),{disabled:t,_isOpen:i,messages:r}=this;return J("div",{key:`date-button-${t}`,afterCreate:gd,"aria-controls":i?this._getCalendarId():null,"aria-expanded":i.toString(),"aria-haspopup":"true","aria-label":r.setDate,"aria-pressed":i.toString(),bind:this,class:this.classes(Rt.button,Rt.select,Rt.datePickerToggle),"data-node-ref":"_inputOrButtonNode",onclick:this.toggle,onkeydown:this._handleDateButtonKeyDown,role:"button",tabIndex:t?void 0:0},J("span",{class:Rt.date},e))}_renderInputAndButtonMode(){const e=nr(this.viewModel.value,H0),{_isOpen:t,messages:i}=this;return J("div",{class:this.classes(Rt.dateInput)},J("input",{afterCreate:gd,"data-node-ref":"_inputOrButtonNode","aria-controls":t?this._getCalendarId():null,"aria-haspopup":"true","aria-label":i.setDate,bind:this,class:this.classes(Rt.dateTextInput,Rt.input),key:"date-input",onblur:this._handleDateInputBlur,onclick:this._handleDateInputClick,onkeydown:this._handleDateInputKeyDown,type:"text",value:e}),J("span",{"aria-hidden":"true",class:this.classes(Rt.leadingIcon,Rt.calendarIcon)}))}_handleDateInputClick(){this.open(!1)}_handleDateInputKeyDown(e){const{key:t}=e;this._isOpen?t==="Enter"?this._handleDateText(e):t==="Escape"&&this.close():t==="ArrowDown"&&(this.open(),e.preventDefault())}_handleDateButtonKeyDown(e){const{key:t,shiftKey:i}=e;this._isOpen&&t==="Tab"&&i?this.close():Nf(t)&&this.toggle()}_handleDateInputBlur(e){this._isOpen||this._handleDateText(e)}_handleDateText(e){const t=e.currentTarget;let i;try{i=U$e(t.value,H0)}catch(s){return Ie.getLogger(this.declaredClass).warn(s),void(t.value=nr(this.viewModel.value,H0))}const r=Ke.fromObject(i);r.isValid?(this.viewModel.value=r.toJSDate(),this._activeDate=r):t.value=nr(this.viewModel.value,H0)}_handleDatePickerKeydown(e){el(e)==="Escape"&&(this.close(),e.preventDefault(),e.stopPropagation())}_renderCalendar(){const e=this._activeDate;if(!e)return null;const t=Ke.fromJSDate(this.viewModel.value);return J("div",{afterCreate:gd,bind:this,class:this.classes(Rt.datePicker,Rt.widget),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",onkeydown:this._handleDatePickerKeydown},this._renderMonthPicker(e),this._renderDayPicker(e,t),this._renderYearPicker(e))}_getCalendarId(){return`date-picker__calendar--${this.id}`}_renderMonthPicker(e){const t=Zn(this.container),i=t?Rt.nextIcon:Rt.previousIcon,r=t?Rt.previousIcon:Rt.nextIcon,s=cv.months("long",{locale:Dr()}).map((u,g)=>{const b=e.month-1===g;return J("option",{selected:b,value:g.toString()},u)}),{disabled:o,messages:c}=this;return J("div",{class:Rt.monthPicker},J("div",{key:`previous-month-${o}`,"aria-label":c.goToPreviousMonth,bind:this,class:Rt.button,onclick:this._setPreviousMonth,onkeydown:this._handlePreviousMonthKeyDown,role:"button",tabIndex:o?void 0:0,title:c.goToPreviousMonth},J("span",{"aria-hidden":"true",class:i})),J("select",{"aria-live":"assertive","aria-label":c.selectMonth,bind:this,class:this.classes(Rt.monthDropdown,Rt.select),disabled:o,id:`${this.id}__month-picker`,onchange:this._setMonth,onkeydown:this._setMonth,title:c.selectMonth},s),J("div",{key:`next-month-${o}`,"aria-label":c.goToNextMonth,bind:this,class:Rt.button,onclick:this._setNextMonth,onkeydown:this._setNextMonth,role:"button",tabIndex:o?void 0:0,title:c.goToNextMonth},J("span",{"aria-hidden":"true",class:r})))}_renderDayPicker(e,t){const i=this._getWeekLabels(),r=this._getDayId(e),s=this._renderMonth(e,t),{id:o,disabled:c}=this;return J("div",{key:`day-picker-${c}`,afterCreate:this._handleDayPickerCreate,"aria-activedescendant":r,"aria-labelledby":`${o}__month-picker ${o}__selected-year`,bind:this,class:Rt.dayPicker,id:`${o}__day-picker`,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:c?void 0:0},J("div",{class:Rt.week,role:"row"},i.map(u=>J("div",{"aria-label":u.name,class:this.classes(Rt.day,Rt.dayHeader),role:"columnheader",title:u.name},u.abbr))),s)}_getDayId(e){return`${this.id}__${nr(e.valueOf(),H0)}`}_handleDayPickerCreate(e){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,e.focus())}_getWeekLabels(){const e=[],t={weekday:"long"},i={weekday:"narrow"};let r=Ke.now().set({weekday:AX(Dr())});for(let s=0;s<7;s++)e.push({name:nr(r.valueOf(),t),abbr:nr(r.valueOf(),i)}),r=r.plus({day:1});return e}_handleDayPickerKeydown(e){const{ctrlKey:t,shiftKey:i}=e,r=el(e);if(!H$e.includes(r))return;let s=this._activeDate;if(s){if(r==="ArrowLeft")s=s.minus({day:1});else if(r==="ArrowRight")s=s.plus({day:1});else if(r==="ArrowUp")s=s.minus({week:1});else if(r==="ArrowDown")s=s.plus({week:1});else if(r==="PageUp"){const o=i?"year":"month";s=s.minus({[o]:1})}else if(r==="PageDown"){const o=i?"year":"month";s=s.plus({[o]:1})}else if(r==="Home"){const o=t?"year":"month";s=s.startOf(o)}else if(r==="End"){const o=t?"year":"month";s=s.endOf(o)}else Nf(r)&&(this.viewModel.value=s.toJSDate(),this.close());this._activeDate=s,e.preventDefault(),e.stopPropagation()}}_renderMonth(e,t){const i=Ke.now(),r=e.startOf("month"),s=e.endOf("month"),o=6,c=7;let u=r.minus({day:B$e(Dr(),r.weekday)});const g=[];for(let b=0;b<o;b++){const S=[];for(let E=0;E<c;E++){const A=u.day,O=u.hasSame(e,"day"),L=u.hasSame(t,"day"),N=this._getDayId(u),z=cr.fromDateTimes(r,s),q={[Rt.nearbyMonth]:!z.contains(u),[Rt.today]:u.hasSame(i,"day"),[Rt.activeDay]:O,[Rt.selectedDay]:L};S.push(J("div",{"aria-label":A.toString(),"aria-selected":O.toString(),bind:this,class:this.classes(Rt.day,q),"data-iso-date":u.toISO(),id:N,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},A)),u=u.plus({day:1})}g.push(J("div",{class:Rt.week,role:"row"},S))}return g}_renderYearPicker(e){const t={year:"numeric"},i=e,r=nr(i.valueOf(),t),s=nr(i.plus({year:1}).valueOf(),t),o=nr(i.minus({year:1}).valueOf(),t),{disabled:c,messages:u}=this;return J("div",{class:Rt.yearPicker},J("div",{key:`previous-year-${c}`,"aria-label":u.goToPreviousYear,bind:this,class:Rt.year,onclick:this._setPreviousYear,onkeydown:this._setPreviousYear,tabIndex:c?void 0:0,title:u.goToPreviousYear},o),J("div",{class:this.classes(Rt.year,Rt.selectedYear),id:`${this.id}__selected-year`},r),J("div",{key:`next-year-${c}`,"aria-label":u.goToNextYear,bind:this,class:Rt.year,onclick:this._setNextYear,onkeydown:this._handleNextYearKeyDown,tabIndex:c?void 0:0,title:u.goToNextYear},s))}_setMonth(e){const t=e.target,i=Number(t.value)+1;this._activeDate&&(this._activeDate=this._activeDate.set({month:i}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousMonth(){this._activeDate&&(this._activeDate=this._activeDate.minus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_handlePreviousMonthKeyDown(e){if(e.key==="Tab"&&e.shiftKey)return e.preventDefault(),void this.close();Nf(e.key)&&this._setPreviousMonth()}_setNextMonth(){this._activeDate&&(this._activeDate=this._activeDate.plus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousYear(){var e,t;this._activeDate=(t=(e=this._activeDate)==null?void 0:e.minus({year:1}))!=null?t:null}_setNextYear(){var e,t;this._activeDate=(t=(e=this._activeDate)==null?void 0:e.plus({year:1}))!=null?t:null}_handleNextYearKeyDown(e){if(e.key==="Tab"&&!e.shiftKey)return e.preventDefault(),void this.close();Nf(e.key)&&this._setNextYear()}_handleSelectedDate(e){const t=e.target;this.viewModel.value=Ke.fromISO(t.getAttribute("data-iso-date")).toJSDate(),this.close()}};v([_()],xs.prototype,"_activeDate",void 0),v([_()],xs.prototype,"_calendarPopover",void 0),v([_()],xs.prototype,"_isOpen",void 0),v([_()],xs.prototype,"dateInputEnabled",void 0),v([_(),ui("esri/widgets/support/t9n/DatePicker")],xs.prototype,"messages",void 0),v([_()],xs.prototype,"value",null),v([_()],xs.prototype,"commitOnMonthChange",void 0),v([_({type:kX})],xs.prototype,"viewModel",void 0),v([_()],xs.prototype,"onChange",void 0),v([_()],xs.prototype,"disabled",void 0),v([_()],xs.prototype,"isOpen",null),v([vr()],xs.prototype,"_setNextMonth",null),v([vr()],xs.prototype,"_setPreviousYear",null),v([vr()],xs.prototype,"_handleSelectedDate",null),xs=v([K("esri.widgets.support.DatePicker")],xs);const W$e=xs;let g$=class extends $X{constructor(e){super(e)}};g$=v([K("esri.widgets.support.TimePickerViewModel")],g$);const OX=g$,YE="esri-time-picker",KE={base:`${YE} esri-widget`,timePicker:`${YE}__date-picker`,timePickerInput:`${YE}__input`,input:"esri-input",button:"esri-widget--button"},v$={hour:"numeric",minute:"numeric"},uj="t",J$e=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Tab"];function cj(e){return e!=null&&nr(e.valueOf(),v$).includes(" ")}let Dm=class extends ki{constructor(e,t){super(e,t),this._activePart=null,this._activeTime=null,this.messages=null,this.viewModel=new OX}get value(){return this.viewModel.value}set value(e){this.viewModel.value=e}render(){const e=this._activeTime||this.viewModel.value;return J("div",{class:KE.base},J("input",{afterUpdate:this._handleInputUpdate,"aria-label":this.messages.inputTitle,bind:this,class:this.classes(KE.timePickerInput,KE.input),onblur:this._handleInputBlur,onfocus:this._handleInputFocus,onkeydown:this._handleInputKeydown,oninput:this._handleInputKeydown,onclick:this._handleInputClick,onpaste:this._handleInputPaste,onwheel:this._handleInputWheel,value:nr(e.valueOf(),v$)}))}_handleInputBlur(){var e;(e=this._activeTime)!=null&&e.isValid&&(this.viewModel.value=this._activeTime.toJSDate()),this._activeTime=null,this._activePart=null}_handleInputUpdate(e){this._selectPart(e,this._activePart)}_selectPart(e,t){const i=this._activeTime;if(!i||!e)return;const r=nr(i.valueOf(),v$),s=0,o=r.indexOf(":");if(t==="hours")return void e.setSelectionRange(s,o);const c=o+1,u=c+2;if(t==="minutes")return void e.setSelectionRange(c,u);const g=u+1,b=r.length;t!=="meridiem"||e.setSelectionRange(g,b)}_handleInputFocus(e){this._activePart="hours",this._activeTime=Ke.fromJSDate(this.viewModel.value).startOf("minute"),this._selectPart(e.target,"hours")}_caretIndexToPartName(e){var s;const t=(s=this._activeTime)==null?void 0:s.toFormat(uj,{locale:Dr(),numberingSystem:"latn"});if(!t)return null;const i=t.indexOf(":"),r=t.indexOf(" ");return e<=i?"hours":e>i&&e<=r?"minutes":"meridiem"}_handleInputKeydown(e){const{ctrlKey:t,metaKey:i,shiftKey:r}=e,s=el(e),o=this._activeTime,c=this._activePart,u=/\d/.test(s),g=/^a|p$/i.test(s),b=i||t;if((J$e.includes(s)||u||c==="meridiem"&&g&&!b)&&o!=null){if(s==="ArrowLeft")this._activePart=this._prevPart();else if(s==="ArrowRight")this._activePart=this._nextPart();else if(s==="Tab"){const S=r?this._prevPart():this._nextPart();if(S===this._activePart)return;this._activePart=S}else if(s==="ArrowUp")this._shift("up",c);else if(s==="ArrowDown")this._shift("down",c);else if(u)this._setTime(o,c,Number(s));else if(g){const S=s.toLowerCase(),E=o.hour;(S==="a"&&E>=12||S==="p"&&E<12)&&this._shift("up",c)}e.preventDefault(),e.stopImmediatePropagation()}else b||(e.preventDefault(),e.stopImmediatePropagation())}_handleInputClick(e){var i;const t=e.target;this._activePart=null,this.renderNow(),this._activePart=this._caretIndexToPartName((i=t.selectionStart)!=null?i:0)}_getOrderedParts(){return cj(this._activeTime)?["hours","minutes","meridiem"]:["hours","minutes"]}_prevPart(){const e=this._getOrderedParts(),t=this._activePart?e.indexOf(this._activePart)-1:0;return e[Math.max(t,0)]}_nextPart(){const e=this._getOrderedParts(),t=this._activePart?e.indexOf(this._activePart)+1:0;return e[Math.min(t,e.length-1)]}_setTime(e,t,i){if(t==="hours"){const r=cj(e)?12:24,s=""+e.hour%r,o=i,c=Number(`${s}${i}`);s.length===2||c>r?this._activeTime=e.set({hour:o}):c<=r&&(this._activeTime=e.set({hour:c}))}else if(t==="minutes"){const s=`${e.minute}`,o=i,c=Number(`${s}${i}`);s.length===2||c>59?this._activeTime=e.set({minute:o}):c<59&&(this._activeTime=e.set({minute:c}))}}_parseTime(e){if(!e)return null;const t={locale:Dr(),numberingSystem:"latn"};let i=Ke.fromFormat(e,uj,t);return i.isValid?i:(i=Ke.fromISO(e,t),i.isValid?i:(i=Ke.fromRFC2822(e,t),i.isValid?i:(i=Ke.fromJSDate(new Date(e)),i.isValid?i:null)))}_handleInputPaste(e){var r;const t=(r=e.clipboardData)==null?void 0:r.getData("text/plain"),i=this._parseTime(t);i&&(this._activeTime=i),e.preventDefault(),e.stopImmediatePropagation()}_handleInputWheel(e){const t=e.deltaY<0?"up":"down";this._shift(t,this._activePart)}_shift(e,t){var o,c;if(!t)return;const i=e==="up"?"plus":"minus",r=t==="meridiem"?12:1,s=t==="hours"?"hour":t==="minutes"?"minute":"hours";this._activeTime=(c=(o=this._activeTime)==null?void 0:o[i]({[s]:r}))!=null?c:null}};v([_(),ui("esri/widgets/support/t9n/TimePicker")],Dm.prototype,"messages",void 0),v([_()],Dm.prototype,"value",null),v([_({type:OX})],Dm.prototype,"viewModel",void 0),Dm=v([K("esri.widgets.support.TimePicker")],Dm);const Y$e=Dm,K$e={cancelEdit:"Escape"},hp="esri-field-column",$a={headerContent:`${hp}__header-content`,headerLabel:`${hp}__header-label`,input:`${hp}__cell-input`,inputContainer:`${hp}__cell__input-container`,dateInputContainer:`${hp}__cell__date-input-container`,dateInputWrapper:`${hp}__cell__date-input-wrapper`,button:`${hp}__button`,saveIcon:"esri-icon-save",trashIcon:"esri-icon-trash",locked:"esri-icon-locked"},Z$e=pg("short-date-short-time"),X$e=pg("short-date"),Q$e={useGrouping:!0,maximumFractionDigits:20};let ni=class extends G$e{constructor(e){super(e),this._inputField=null,this.cellValueFormatFunction=({rowData:t,value:i})=>{var u;if(this.formatFunction){const{config:g,field:b}=this;return this.formatFunction({config:g,field:b,value:f0.sanitize(i)})}if(i===null)return"&nbsp;";const{config:r,field:s}=this,{item:{feature:o}}=t,c=this._getDomainForFeature(o);if(c)return this._getComputedDomain(i,c);if(s.type==="date"){const g=this._getDateFormatOptions(),b=((u=this.layer)==null?void 0:u.type)==="feature"&&this.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null;return i?nr(i,{...g,...b}):null}if(rl(s)){const g=r!=null&&r.format?m7(r.format):Q$e;return Lo(parseFloat(i),g)}return f0.sanitize(i)},this.cellValueValidatorFunction=({oldValue:t,value:i})=>!(this._inputField&&!this._inputField.valid)&&!(this.required&&(!U(i)||i===""))&&t!==i,this.config=null,this.editingEnabled=!1,this.expressionInfos=null,this.field=null,this.formatFunction=null,this.headerRenderFunction=t=>{const{root:i}=t,{editable:r,editingEnabled:s,headerMenuEnabled:o,sortable:c}=this;if(this.removeCellContent(i),i.classList.add($a.headerContent),s&&!r&&i.appendChild(this.createLockedElement()),c)this.headerSorterRenderFunction(t);else{const u=document.createElement("div");u.classList.add($a.headerLabel),u.textContent=this.label,i.appendChild(u)}o&&this.headerMenuRenderFunction(t)},this.inputRenderFunction=({root:t,column:i,rowData:r})=>{var u,g;if((u=this.activeEditInfo)!=null&&u.updating||!this.editable)return;const s=this.getCellValue(i,r),o=this.createInputElement({root:t,column:i,rowData:r,value:s});if(this._set("activeEditInfo",{column:i,input:o,root:t,rowData:r,updating:!0,oldValue:s}),this.field.type==="date")return void this._renderDateEditors(s,t,o);const c=this.createInputContainer();c.appendChild(o),this.removeCellContent(t),t.appendChild(c),o.focus(),o instanceof HTMLInputElement&&o.select(),(g=this.grid)==null||g.notifyResize()},this.layer=null,this.parseInputValueFunction=({input:t})=>{const i=this._inputField,r=t.value,{required:s,type:o}=i;return s||r!==""?o==="number"||o==="date"?parseFloat(r):o==="text"?r.trim():r:null},this.store=null,this.template=null,this.updateRowItemFunction=({rowData:t,column:i,value:r})=>{t.item.feature.attributes[i.path]=r},this.updateStoreItemFunction=async({rowData:t,column:i,value:r})=>{var c;if(!t||!this.store)return;const s=t.item.objectId,o=(c=this.store.getObjectIdIndex(s))!=null?c:t.index;await this.store.updateItem({index:o,name:i.path,value:r})}}get alias(){var e;return(e=this.field)==null?void 0:e.alias}get defaultValue(){var e;return(e=this.field)==null?void 0:e.defaultValue}get description(){var e,t,i,r,s,o;return(o=(s=(i=(e=this.template)==null?void 0:e.description)!=null?i:(t=this.config)==null?void 0:t.description)!=null?s:(r=this.field)==null?void 0:r.description)!=null?o:null}get editable(){var u;const{config:e,editingEnabled:t,field:i,layer:r,template:s}=this;if(ae(i)||ae(r))return!1;const o=r7(r),c=(u=Tn(r))==null?void 0:u.operations.supportsUpdate;return!!(i.editable&&o&&c)&&(t?!((s==null?void 0:s.editable)===!1||(e==null?void 0:e.editable)===!1):!(!(s!=null&&s.editable)&&!(e!=null&&e.editable)))}get header(){var e,t;return((e=this.template)==null?void 0:e.label)||((t=this.config)==null?void 0:t.label)||this.alias||this.path||null}get hidden(){const{config:e}=this;return(e==null?void 0:e.visible)===!1||this._get("hidden")||!1}set hidden(e){this._set("hidden",e)}get loadingMessage(){var e;return((e=this.messages)==null?void 0:e.loading)||"..."}get maxLength(){const{field:e,config:t,template:i}=this,r=e==null?void 0:e.length,s=(i==null?void 0:i.input)&&"maxLength"in i.input?i.input.maxLength:t==null?void 0:t.maxLength;return!isNaN(s)&&s>=-1&&(r===-1||s<=r)?s:r}get minLength(){const{config:e,template:t,maxLength:i}=this,r=(t==null?void 0:t.input)&&"minLength"in t.input?t.input.minLength:(e==null?void 0:e.minLength)||null;return i&&r<=i?r:null}get name(){var e;return(e=this.field)==null?void 0:e.name}get nullable(){var e,t;return(t=(e=this.field)==null?void 0:e.nullable)!=null?t:!1}get path(){var e;return(e=this.field)==null?void 0:e.name}get required(){const{config:e,field:t,template:i}=this,r=t==null?void 0:t.nullable,s=e==null?void 0:e.required,o=i==null?void 0:i.required;return this.editable&&(!r||s===!0||o===!0)}get sortable(){var e,t;return this.template?((e=this.template)==null?void 0:e.sortable)!==!1:((t=this.config)==null?void 0:t.sortable)!==!1}createInputElement({rowData:e,value:t}){const{item:i}=e;if(!i||!i.feature)return null;this._inputField=this._setUpInputField(i.feature,t);const{field:r,maxLength:s,minLength:o,required:c}=this,{domain:u}=this._inputField;let g=null;(u==null?void 0:u.type)==="coded-value"?(g=this._createSelectElement(t,u.codedValues.map(({code:E,name:A})=>({value:E,name:A})),this._inputField),g.onchange=()=>{g.onblur=null,S()}):(g=document.createElement("input"),g.type=rl(r)?"number":"text",s>-1&&(g.maxLength=s),o>0&&(g.minLength=o)),g.classList.add($a.input),g.value=t,g.required=c;let b=!1;g.onkeydown=E=>{b=E.key===K$e.cancelEdit},g.onblur=()=>{g.onblur=null,S()};const S=()=>{b?this.cancel():this.submit(),this._inputField=null};return g}createInputContainer(){const e=document.createElement("div");return e.classList.add($a.inputContainer),e}createLockedElement(){const e=document.createElement("div");return e.classList.add($a.locked),e}getCellValue({path:e},{item:t}){var i,r,s;return(s=(r=(i=t==null?void 0:t.feature)==null?void 0:i.attributes)==null?void 0:r[e])!=null?s:null}_renderDateEditors(e,t,i){var ee;const{config:r,messagesCommon:s,template:o}=this,c=e?new Date(e):new Date(Date.now()),u=new W$e({dateInputEnabled:!0,value:c}),g=new Y$e({value:c});i.value=c.getTime().toString();let b=!e;const S=()=>{b=!0;const ie=this._getCombinedDateTime(u.value,g.value);i.value=ie.getTime().toString()},E=()=>{b?this.submit():this.cancel()},A=()=>{i.value=null,this.submit()};ge(()=>[u.value,g.value],()=>S());const O=document.createElement("div"),L=document.createElement("div");u.container=O,g.container=L;const N=document.createElement("button");N.classList.add($a.button,$a.saveIcon),N.onclick=()=>E(),N.title=s==null?void 0:s.save;const z=document.createElement("button");z.classList.add($a.button,$a.trashIcon),z.onclick=()=>A(),z.title=s==null?void 0:s.clear;const q=document.createElement("div");q.classList.add($a.dateInputWrapper),q.appendChild(O),(o&&o.input&&o.input.type==="datetime-picker"&&o.input.includeTime!==!1||r&&r.includeTime!==!1)&&q.appendChild(L);const Z=document.createElement("div");Z.classList.add($a.dateInputContainer),Z.appendChild(q),Z.appendChild(N),Z.appendChild(z),u.when(()=>{var ie;return(ie=this.grid)==null?void 0:ie.notifyResize()}),g.when(()=>{var ie;return(ie=this.grid)==null?void 0:ie.notifyResize()}),this.removeCellContent(t),t.appendChild(Z),(ee=this.grid)==null||ee.notifyResize()}_createSelectElement(e,t,i){let r=!1;const s=t.map(c=>{c.value===e&&(r=!0);const u=document.createElement("option");return u.text=c.name,u.value=c.value,u});if(e!=null&&e!==""&&!r){const c=document.createElement("option");c.text=e,c.value=e,s.unshift(c)}if(!i.required&&i.value==null){const c=document.createElement("option");c.value="",s.unshift(c)}const o=document.createElement("select");return s.forEach(c=>o.add(c)),o.value=e,o}_setUpInputField(e,t){const{config:i,field:r,layer:s}=this,o=new m$({config:i,feature:e,initialFeature:e.clone(),field:r,layer:s,group:null,messages:null});return o.set("value",t),o}_isDomainCompatible(e){const{field:t}=this;if(e&&e.type==="coded-value"){const i=typeof e.codedValues[0].code;if(i==="string"&&Ab(t)||i==="number"&&rl(t))return!0}return!(!e||e.type!=="range"||!rl(t))}_getDomainForFeature(e){const{config:t,layer:i,name:r,template:s}=this;if(i.type==="wfs"||i.type==="geojson"||i.type==="csv")return null;if((s==null?void 0:s.domain)&&this._isDomainCompatible(s.domain))return s.domain;const{typeIdField:o}=i,c=o===r,u=this.field.domain;if(c&&!u)return new X5({name:"__internal-type-based-coded-value-domain__",codedValues:i.types.map(({id:S,name:E})=>({code:S,name:E}))});const g=o&&i.getFieldDomain(r,{feature:e})||u,b=t==null?void 0:t.domain;return this._isDomainCompatible(b)?b:g}_getComputedDomain(e,t){if(!t)return null;if(t.type==="range")return e;if(t.type==="coded-value"){const i=t.codedValues.filter(r=>r.hasOwnProperty("code")&&r.code===e);return i&&i.length?i[0].name:e}return null}_getCombinedDateTime(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}_getDateFormatOptions(){var r,s;const{config:e,template:t}=this,i=((r=t==null?void 0:t.format)==null?void 0:r.dateFormat)||((s=e==null?void 0:e.format)==null?void 0:s.dateFormat);return i?pg(i):t&&t.input&&!("includeTime"in t.input)||(e==null?void 0:e.includeTime)===!1?X$e:Z$e}};v([_({readOnly:!0})],ni.prototype,"alias",null),v([_()],ni.prototype,"cellValueFormatFunction",void 0),v([_()],ni.prototype,"cellValueValidatorFunction",void 0),v([_()],ni.prototype,"config",void 0),v([_({readOnly:!0})],ni.prototype,"defaultValue",null),v([_({readOnly:!0})],ni.prototype,"description",null),v([_({readOnly:!0})],ni.prototype,"editable",null),v([_()],ni.prototype,"editingEnabled",void 0),v([_()],ni.prototype,"expressionInfos",void 0),v([_()],ni.prototype,"field",void 0),v([_()],ni.prototype,"formatFunction",void 0),v([_({readOnly:!0})],ni.prototype,"header",null),v([_()],ni.prototype,"hidden",null),v([_()],ni.prototype,"headerRenderFunction",void 0),v([_()],ni.prototype,"inputRenderFunction",void 0),v([_()],ni.prototype,"layer",void 0),v([_({readOnly:!0})],ni.prototype,"loadingMessage",null),v([_()],ni.prototype,"maxLength",null),v([_()],ni.prototype,"minLength",null),v([_({readOnly:!0})],ni.prototype,"name",null),v([_({readOnly:!0})],ni.prototype,"nullable",null),v([_()],ni.prototype,"parseInputValueFunction",void 0),v([_({readOnly:!0})],ni.prototype,"path",null),v([_({readOnly:!0})],ni.prototype,"required",null),v([_()],ni.prototype,"sortable",null),v([_()],ni.prototype,"store",void 0),v([_()],ni.prototype,"template",void 0),v([_()],ni.prototype,"updateRowItemFunction",void 0),v([_()],ni.prototype,"updateStoreItemFunction",void 0),ni=v([K("esri.widgets.FeatureTable.FieldColumn")],ni);const ZE=ni;let Gn=class extends Re{constructor(e){super(e),this.cellClassNameGenerator=null,this.columnReorderingEnabled=!0,this.columns=new Be,this.dataProvider=async({page:t,pageSize:i},r)=>{const{store:s}=this;r&&(s?r(await s.fetchItems({page:t,pageSize:i})):r&&r([]))},this.multiSortEnabled=!1,this.pageSize=50,this.rowDetailsRenderer=null,this.store=null}get highlightIds(){return this._get("highlightIds")||new Be}set highlightIds(e){Array.isArray(e)?this._set("highlightIds",new Be(e)):this._set("highlightIds",e)}get size(){return this.store&&this.store.count||0}get state(){const{store:e}=this;return e&&e.state!=="disabled"?e.state==="loading"?"loading":e.state==="loaded"?"loaded":"ready":"disabled"}closeColumnMenus(){var e;(e=this.columns)==null||e.forEach(t=>{t.menu&&t.menu.open&&t.menu.set("open",!1)})}sortColumn(e,t){const i=this.findColumn(e);i&&(i.direction=t)}hideColumn(e){const t=this.findColumn(e);t&&t.hidden===!1&&(t.hidden=!0)}showColumn(e){const t=this.findColumn(e);t&&t.hidden&&(t.hidden=!1)}showAllColumns(){var e;(e=this.columns)==null||e.forEach(t=>{t.hidden&&(t.hidden=!1)})}findColumn(e){const t=[];return this.columns.forEach(i=>{var r;t.push(i),"columns"in i&&((r=i.columns)==null||r.forEach(s=>t.push(s)))}),t.find(i=>i.path===e)}getRowItemAt(e){var t;return(t=this.store)==null?void 0:t.getLocalItemAt(e)}refresh(){this.store&&(this.store.reset(),this.store.load())}};v([_()],Gn.prototype,"cellClassNameGenerator",void 0),v([_()],Gn.prototype,"columnReorderingEnabled",void 0),v([_()],Gn.prototype,"columns",void 0),v([_()],Gn.prototype,"dataProvider",void 0),v([_()],Gn.prototype,"highlightIds",null),v([_()],Gn.prototype,"multiSortEnabled",void 0),v([_()],Gn.prototype,"pageSize",void 0),v([_()],Gn.prototype,"rowDetailsRenderer",void 0),v([_({readOnly:!0})],Gn.prototype,"size",null),v([_()],Gn.prototype,"store",void 0),v([_({readOnly:!0})],Gn.prototype,"state",null),Gn=v([K("esri.widgets.FeatureTable.Grid.GridViewModel")],Gn);const PX=Gn;class e6e extends HTMLElement{static get version(){return"1.6.1"}}customElements.define("vaadin-lumo-styles",e6e);let XE,QE=null,hj=window.HTMLImports&&window.HTMLImports.whenReady||null;function dj(e){requestAnimationFrame(function(){hj?hj(e):(QE||(QE=new Promise(t=>{XE=t}),document.readyState==="complete"?XE():document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&XE()})),QE.then(function(){e&&e()}))})}const pj="__seenByShadyCSS",b2="__shadyCSSCachedStyle";let AS=null,lb=null;class Nh{constructor(){this.customStyles=[],this.enqueued=!1,dj(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){!this.enqueued&&lb&&(this.enqueued=!0,dj(lb))}addCustomStyle(t){t[pj]||(t[pj]=!0,this.customStyles.push(t),this.enqueueDocumentValidation())}getStyleForCustomStyle(t){if(t[b2])return t[b2];let i;return i=t.getStyle?t.getStyle():t,i}processStyles(){const t=this.customStyles;for(let i=0;i<t.length;i++){const r=t[i];if(r[b2])continue;const s=this.getStyleForCustomStyle(r);if(s){const o=s.__appliedElement||s;AS&&AS(o),r[b2]=o}}return t}}Nh.prototype.addCustomStyle=Nh.prototype.addCustomStyle,Nh.prototype.getStyleForCustomStyle=Nh.prototype.getStyleForCustomStyle,Nh.prototype.processStyles=Nh.prototype.processStyles,Object.defineProperties(Nh.prototype,{transformCallback:{get:()=>AS,set(e){AS=e}},validateCallback:{get:()=>lb,set(e){let t=!1;lb||(t=!0),lb=e,t&&this.enqueueDocumentValidation()}}});const b$=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,$S=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,t6e=/@media\s(.*)/;function w$(e,t){for(let i in t)i===null?e.style.removeProperty(i):e.style.setProperty(i,t[i])}function FX(e,t){const i=window.getComputedStyle(e).getPropertyValue(t);return i?i.trim():""}function i6e(e){const t=$S.test(e)||b$.test(e);return $S.lastIndex=0,b$.lastIndex=0,t}const T9=!(window.ShadyDOM&&window.ShadyDOM.inUse);let b8,tw;function fj(e){b8=(!e||!e.shimcssproperties)&&(T9||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&window.ShadyCSS.cssBuild!==void 0&&(tw=window.ShadyCSS.cssBuild);const LX=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&window.ShadyCSS.nativeCss!==void 0?b8=window.ShadyCSS.nativeCss:window.ShadyCSS?(fj(window.ShadyCSS),window.ShadyCSS=void 0):fj(window.WebComponents&&window.WebComponents.flags);const w8=b8,w2=new Nh;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(e,t,i){},prepareTemplateDom(e,t){},prepareTemplateStyles(e,t,i){},styleSubtree(e,t){w2.processStyles(),w$(e,t)},styleElement(e){w2.processStyles()},styleDocument(e){w2.processStyles(),w$(document.body,e)},getComputedStyleValue:(e,t)=>FX(e,t),flushCustomStyles(){},nativeCss:w8,nativeShadow:T9,cssBuild:tw,disableRuntime:LX}),window.ShadyCSS.CustomStyleInterface=w2,window.JSCompiler_renameProperty=function(e,t){return e};let _2,co,r6e=/(url\()([^)]*)(\))/g,s6e=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function ub(e,t){if(e&&s6e.test(e)||e==="//")return e;if(_2===void 0){_2=!1;try{const i=new URL("b","http://a");i.pathname="c%20d",_2=i.href==="http://a/c%20d"}catch{}}if(t||(t=document.baseURI||window.location.href),_2)try{return new URL(e,t).href}catch{return e}return co||(co=document.implementation.createHTMLDocument("temp"),co.base=co.createElement("base"),co.head.appendChild(co.base),co.anchor=co.createElement("a"),co.body.appendChild(co.anchor)),co.base.href=t,co.anchor.href=e,co.anchor.href||e}function _8(e,t){return e.replace(r6e,function(i,r,s,o){return r+"'"+ub(s.replace(/["']/g,""),t)+"'"+o})}function x8(e){return e.substring(0,e.lastIndexOf("/")+1)}const S8=!window.ShadyDOM||!window.ShadyDOM.inUse;Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss);const n6e=S8&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const e=new CSSStyleSheet;e.replaceSync("");const t=document.createElement("div");return t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[e],t.shadowRoot.adoptedStyleSheets[0]===e}catch{return!1}})();let o6e=window.Polymer&&window.Polymer.rootPath||x8(document.baseURI||window.location.href),kS=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,a6e=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,tg=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,l6e=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,iw=window.Polymer&&window.Polymer.legacyOptimizations||!1,RX=window.Polymer&&window.Polymer.legacyWarnings||!1,u6e=window.Polymer&&window.Polymer.syncInitialRender||!1,_$=window.Polymer&&window.Polymer.legacyUndefined||!1,c6e=window.Polymer&&window.Polymer.orderedComputed||!1,mj=window.Polymer&&window.Polymer.removeNestedTemplates||!1,NX=window.Polymer&&window.Polymer.fastDomIf||!1,x$=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,x2=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,h6e=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,I8={},DX={};function yj(e,t){I8[e]=DX[e.toLowerCase()]=t}function gj(e){return I8[e]||DX[e.toLowerCase()]}function d6e(e){e.querySelector("style")&&console.warn("dom-module %s has style outside template",e.id)}class ig extends HTMLElement{static get observedAttributes(){return["id"]}static import(t,i){if(t){let r=gj(t);return r&&i?r.querySelector(i):r}return null}attributeChangedCallback(t,i,r,s){i!==r&&this.register()}get assetpath(){if(!this.__assetpath){const t=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,i=ub(this.getAttribute("assetpath")||"",t.baseURI);this.__assetpath=x8(i)}return this.__assetpath}register(t){if(t=t||this.id){if(tg&&gj(t)!==void 0)throw yj(t,null),new Error(`strictTemplatePolicy: dom-module ${t} re-registered`);this.id=t,yj(t,this),d6e(this)}}}ig.prototype.modules=I8,customElements.define("dom-module",ig);const p6e="link[rel=import][type~=css]",f6e="include",vj="shady-unscoped";function E8(e){return ig.import(e)}function bj(e){const t=_8((e.body?e.body:e).textContent,e.baseURI),i=document.createElement("style");return i.textContent=t,i}function m6e(e){const t=e.trim().split(/\s+/),i=[];for(let r=0;r<t.length;r++)i.push(...y6e(t[r]));return i}function y6e(e){const t=E8(e);if(!t)return console.warn("Could not find style data in module named",e),[];if(t._styles===void 0){const i=[];i.push(...T8(t));const r=t.querySelector("template");r&&i.push(...M8(r,t.assetpath)),t._styles=i}return t._styles}function M8(e,t){if(!e._styles){const i=[],r=e.content.querySelectorAll("style");for(let s=0;s<r.length;s++){let o=r[s],c=o.getAttribute(f6e);c&&i.push(...m6e(c).filter(function(u,g,b){return b.indexOf(u)===g})),t&&(o.textContent=_8(o.textContent,t)),i.push(o)}e._styles=i}return e._styles}function g6e(e){let t=E8(e);return t?T8(t):[]}function T8(e){const t=[],i=e.querySelectorAll(p6e);for(let r=0;r<i.length;r++){let s=i[r];if(s.import){const o=s.import,c=s.hasAttribute(vj);if(c&&!o._unscopedStyle){const u=bj(o);u.setAttribute(vj,""),o._unscopedStyle=u}else o._style||(o._style=bj(o));t.push(c?o._unscopedStyle:o._style)}}return t}function v6e(e){let t=e.trim().split(/\s+/),i="";for(let r=0;r<t.length;r++)i+=b6e(t[r]);return i}function b6e(e){let t=E8(e);if(t&&t._cssText===void 0){let i=_6e(t),r=t.querySelector("template");r&&(i+=w6e(r,t.assetpath)),t._cssText=i||null}return t||console.warn("Could not find style data in module named",e),t&&t._cssText||""}function w6e(e,t){let i="";const r=M8(e,t);for(let s=0;s<r.length;s++){let o=r[s];o.parentNode&&o.parentNode.removeChild(o),i+=o.textContent}return i}function _6e(e){let t="",i=T8(e);for(let r=0;r<i.length;r++)t+=i[r].textContent;return t}const wj="include",x6e=window.ShadyCSS.CustomStyleInterface;class S6e extends HTMLElement{constructor(){super(),this._style=null,x6e.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const t=this.querySelector("style");if(!t)return null;this._style=t;const i=t.getAttribute(wj);return i&&(t.removeAttribute(wj),t.textContent=v6e(i)+t.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",S6e);const _j=document.createElement("template");_j.innerHTML=`<custom-style>
  <style>
    html {
      /* Base (background) */
      --lumo-base-color: #FFF;

      /* Tint */
      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);
      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);
      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);
      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);
      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);
      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);
      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);
      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);
      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);
      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);
      --lumo-tint: #FFF;

      /* Shade */
      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);
      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);
      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);
      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);
      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);
      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);
      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);
      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);
      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);
      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);
      --lumo-shade: hsl(214, 35%, 15%);

      /* Contrast */
      --lumo-contrast-5pct: var(--lumo-shade-5pct);
      --lumo-contrast-10pct: var(--lumo-shade-10pct);
      --lumo-contrast-20pct: var(--lumo-shade-20pct);
      --lumo-contrast-30pct: var(--lumo-shade-30pct);
      --lumo-contrast-40pct: var(--lumo-shade-40pct);
      --lumo-contrast-50pct: var(--lumo-shade-50pct);
      --lumo-contrast-60pct: var(--lumo-shade-60pct);
      --lumo-contrast-70pct: var(--lumo-shade-70pct);
      --lumo-contrast-80pct: var(--lumo-shade-80pct);
      --lumo-contrast-90pct: var(--lumo-shade-90pct);
      --lumo-contrast: var(--lumo-shade);

      /* Text */
      --lumo-header-text-color: var(--lumo-contrast);
      --lumo-body-text-color: var(--lumo-contrast-90pct);
      --lumo-secondary-text-color: var(--lumo-contrast-70pct);
      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);
      --lumo-disabled-text-color: var(--lumo-contrast-30pct);

      /* Primary */
      --lumo-primary-color: hsl(214, 90%, 52%);
      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);
      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);
      --lumo-primary-text-color: var(--lumo-primary-color);
      --lumo-primary-contrast-color: #FFF;

      /* Error */
      --lumo-error-color: hsl(3, 100%, 61%);
      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);
      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);
      --lumo-error-text-color: hsl(3, 92%, 53%);
      --lumo-error-contrast-color: #FFF;

      /* Success */
      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */
      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);
      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);
      --lumo-success-text-color: hsl(145, 100%, 32%);
      --lumo-success-contrast-color: #FFF;
    }
  </style>
</custom-style><dom-module id="lumo-color">
  <template>
    <style>
      [theme~="dark"] {
        /* Base (background) */
        --lumo-base-color: hsl(214, 35%, 21%);

        /* Tint */
        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);
        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);
        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);
        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);
        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);
        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);
        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);
        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);
        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);
        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);
        --lumo-tint: hsl(214, 100%, 98%);

        /* Shade */
        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);
        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);
        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);
        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);
        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);
        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);
        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);
        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);
        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);
        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);
        --lumo-shade: hsl(214, 33%, 13%);

        /* Contrast */
        --lumo-contrast-5pct: var(--lumo-tint-5pct);
        --lumo-contrast-10pct: var(--lumo-tint-10pct);
        --lumo-contrast-20pct: var(--lumo-tint-20pct);
        --lumo-contrast-30pct: var(--lumo-tint-30pct);
        --lumo-contrast-40pct: var(--lumo-tint-40pct);
        --lumo-contrast-50pct: var(--lumo-tint-50pct);
        --lumo-contrast-60pct: var(--lumo-tint-60pct);
        --lumo-contrast-70pct: var(--lumo-tint-70pct);
        --lumo-contrast-80pct: var(--lumo-tint-80pct);
        --lumo-contrast-90pct: var(--lumo-tint-90pct);
        --lumo-contrast: var(--lumo-tint);

        /* Text */
        --lumo-header-text-color: var(--lumo-contrast);
        --lumo-body-text-color: var(--lumo-contrast-90pct);
        --lumo-secondary-text-color: var(--lumo-contrast-70pct);
        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);
        --lumo-disabled-text-color: var(--lumo-contrast-30pct);

        /* Primary */
        --lumo-primary-color: hsl(214, 86%, 55%);
        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);
        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);
        --lumo-primary-text-color: hsl(214, 100%, 70%);
        --lumo-primary-contrast-color: #FFF;

        /* Error */
        --lumo-error-color: hsl(3, 90%, 63%);
        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);
        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);
        --lumo-error-text-color: hsl(3, 100%, 67%);

        /* Success */
        --lumo-success-color: hsl(145, 65%, 42%);
        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);
        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);
        --lumo-success-text-color: hsl(145, 85%, 47%);
      }

      html {
        color: var(--lumo-body-text-color);
        background-color: var(--lumo-base-color);
      }

      [theme~="dark"] {
        color: var(--lumo-body-text-color);
        background-color: var(--lumo-base-color);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        color: var(--lumo-header-text-color);
      }

      a {
        color: var(--lumo-primary-text-color);
      }

      blockquote {
        color: var(--lumo-secondary-text-color);
      }

      code,
      pre {
        background-color: var(--lumo-contrast-10pct);
        border-radius: var(--lumo-border-radius-m);
      }
    </style>
  </template>
</dom-module><dom-module id="lumo-color-legacy">
  <template>
    <style include="lumo-color">
      :host {
        color: var(--lumo-body-text-color) !important;
        background-color: var(--lumo-base-color) !important;
      }
    </style>
  </template>
</dom-module>`,document.head.appendChild(_j.content);const xj=document.createElement("template");xj.innerHTML=`<custom-style>
  <style>
    @font-face {
      font-family: 'lumo-icons';
      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format('woff');
      font-weight: normal;
      font-style: normal;
    }

    html {
      --lumo-icons-align-center: "\\ea01";
      --lumo-icons-align-left: "\\ea02";
      --lumo-icons-align-right: "\\ea03";
      --lumo-icons-angle-down: "\\ea04";
      --lumo-icons-angle-left: "\\ea05";
      --lumo-icons-angle-right: "\\ea06";
      --lumo-icons-angle-up: "\\ea07";
      --lumo-icons-arrow-down: "\\ea08";
      --lumo-icons-arrow-left: "\\ea09";
      --lumo-icons-arrow-right: "\\ea0a";
      --lumo-icons-arrow-up: "\\ea0b";
      --lumo-icons-bar-chart: "\\ea0c";
      --lumo-icons-bell: "\\ea0d";
      --lumo-icons-calendar: "\\ea0e";
      --lumo-icons-checkmark: "\\ea0f";
      --lumo-icons-chevron-down: "\\ea10";
      --lumo-icons-chevron-left: "\\ea11";
      --lumo-icons-chevron-right: "\\ea12";
      --lumo-icons-chevron-up: "\\ea13";
      --lumo-icons-clock: "\\ea14";
      --lumo-icons-cog: "\\ea15";
      --lumo-icons-cross: "\\ea16";
      --lumo-icons-download: "\\ea17";
      --lumo-icons-dropdown: "\\ea18";
      --lumo-icons-edit: "\\ea19";
      --lumo-icons-error: "\\ea1a";
      --lumo-icons-eye: "\\ea1b";
      --lumo-icons-eye-disabled: "\\ea1c";
      --lumo-icons-menu: "\\ea1d";
      --lumo-icons-minus: "\\ea1e";
      --lumo-icons-ordered-list: "\\ea1f";
      --lumo-icons-phone: "\\ea20";
      --lumo-icons-photo: "\\ea21";
      --lumo-icons-play: "\\ea22";
      --lumo-icons-plus: "\\ea23";
      --lumo-icons-redo: "\\ea24";
      --lumo-icons-reload: "\\ea25";
      --lumo-icons-search: "\\ea26";
      --lumo-icons-undo: "\\ea27";
      --lumo-icons-unordered-list: "\\ea28";
      --lumo-icons-upload: "\\ea29";
      --lumo-icons-user: "\\ea2a";
    }
  </style>
</custom-style>`,document.head.appendChild(xj.content);const Sj=document.createElement("template");Sj.innerHTML=`<custom-style>
  <style>
    html {
      --lumo-size-xs: 1.625rem;
      --lumo-size-s: 1.875rem;
      --lumo-size-m: 2.25rem;
      --lumo-size-l: 2.75rem;
      --lumo-size-xl: 3.5rem;

      /* Icons */
      --lumo-icon-size-s: 1.25em;
      --lumo-icon-size-m: 1.5em;
      --lumo-icon-size-l: 2.25em;
      /* For backwards compatibility */
      --lumo-icon-size: var(--lumo-icon-size-m);
    }
  </style>
</custom-style>`,document.head.appendChild(Sj.content);const Ij=document.createElement("template");Ij.innerHTML=`<custom-style>
  <style>
    html {
      /* Square */
      --lumo-space-xs: 0.25rem;
      --lumo-space-s: 0.5rem;
      --lumo-space-m: 1rem;
      --lumo-space-l: 1.5rem;
      --lumo-space-xl: 2.5rem;

      /* Wide */
      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);
      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);
      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);
      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);
      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);

      /* Tall */
      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);
      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);
      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);
      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);
      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);
    }
  </style>
</custom-style>`,document.head.appendChild(Ij.content);const Ej=document.createElement("template");Ej.innerHTML=`<custom-style>
  <style>
    html {
      /* Border radius */
      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */
      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */
      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */
      --lumo-border-radius: 0.25em; /* Deprecated */

      /* Shadow */
      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);
      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);
      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);
      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);
      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);

      /* Clickable element cursor */
      --lumo-clickable-cursor: default;
    }
  </style>
</custom-style>`,document.head.appendChild(Ej.content);const Mj=document.createElement("template");Mj.innerHTML=`<custom-style>
  <style>
    html {
      /* Font families */
      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

      /* Font sizes */
      --lumo-font-size-xxs: .75rem;
      --lumo-font-size-xs: .8125rem;
      --lumo-font-size-s: .875rem;
      --lumo-font-size-m: 1rem;
      --lumo-font-size-l: 1.125rem;
      --lumo-font-size-xl: 1.375rem;
      --lumo-font-size-xxl: 1.75rem;
      --lumo-font-size-xxxl: 2.5rem;

      /* Line heights */
      --lumo-line-height-xs: 1.25;
      --lumo-line-height-s: 1.375;
      --lumo-line-height-m: 1.625;
    }

  </style>
</custom-style><dom-module id="lumo-typography">
  <template>
    <style>
      html {
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size, var(--lumo-font-size-m));
        line-height: var(--lumo-line-height-m);
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Can\u2019t combine with the above selector because that doesn\u2019t work in browsers without native shadow dom */
      :host {
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size, var(--lumo-font-size-m));
        line-height: var(--lumo-line-height-m);
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      small,
      [theme~="font-size-s"] {
        font-size: var(--lumo-font-size-s);
        line-height: var(--lumo-line-height-s);
      }

      [theme~="font-size-xs"] {
        font-size: var(--lumo-font-size-xs);
        line-height: var(--lumo-line-height-xs);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 600;
        line-height: var(--lumo-line-height-xs);
        margin-top: 1.25em;
      }

      h1 {
        font-size: var(--lumo-font-size-xxxl);
        margin-bottom: 0.75em;
      }

      h2 {
        font-size: var(--lumo-font-size-xxl);
        margin-bottom: 0.5em;
      }

      h3 {
        font-size: var(--lumo-font-size-xl);
        margin-bottom: 0.5em;
      }

      h4 {
        font-size: var(--lumo-font-size-l);
        margin-bottom: 0.5em;
      }

      h5 {
        font-size: var(--lumo-font-size-m);
        margin-bottom: 0.25em;
      }

      h6 {
        font-size: var(--lumo-font-size-xs);
        margin-bottom: 0;
        text-transform: uppercase;
        letter-spacing: 0.03em;
      }

      p,
      blockquote {
        margin-top: 0.5em;
        margin-bottom: 0.75em;
      }

      a {
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      hr {
        display: block;
        align-self: stretch;
        height: 1px;
        border: 0;
        padding: 0;
        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);
        background-color: var(--lumo-contrast-10pct);
      }

      blockquote {
        border-left: 2px solid var(--lumo-contrast-30pct);
      }

      b,
      strong {
        font-weight: 600;
      }

      /* RTL specific styles */

      blockquote[dir="rtl"] {
        border-left: none;
        border-right: 2px solid var(--lumo-contrast-30pct);
      }

    </style>
  </template>
</dom-module>`,document.head.appendChild(Mj.content);const Tj=typeof window!="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,C8=(e,t,i=null)=>{for(;t!==i;){const r=t.nextSibling;e.removeChild(t),t=r}},Sc=`{{lit-${String(Math.random()).slice(2)}}}`,jX=`<!--${Sc}-->`,Cj=new RegExp(`${Sc}|${jX}`),Iv="$lit$";class zX{constructor(t,i){this.parts=[],this.element=i;const r=[],s=[],o=document.createTreeWalker(i.content,133,null,!1);let c=0,u=-1,g=0;const{strings:b,values:{length:S}}=t;for(;g<S;){const E=o.nextNode();if(E!==null){if(u++,E.nodeType===1){if(E.hasAttributes()){const A=E.attributes,{length:O}=A;let L=0;for(let N=0;N<O;N++)Aj(A[N].name,Iv)&&L++;for(;L-- >0;){const N=b[g],z=S$.exec(N)[2],q=z.toLowerCase()+Iv,Z=E.getAttribute(q);E.removeAttribute(q);const ee=Z.split(Cj);this.parts.push({type:"attribute",index:u,name:z,strings:ee}),g+=ee.length-1}}E.tagName==="TEMPLATE"&&(s.push(E),o.currentNode=E.content)}else if(E.nodeType===3){const A=E.data;if(A.indexOf(Sc)>=0){const O=E.parentNode,L=A.split(Cj),N=L.length-1;for(let z=0;z<N;z++){let q,Z=L[z];if(Z==="")q=ld();else{const ee=S$.exec(Z);ee!==null&&Aj(ee[2],Iv)&&(Z=Z.slice(0,ee.index)+ee[1]+ee[2].slice(0,-Iv.length)+ee[3]),q=document.createTextNode(Z)}O.insertBefore(q,E),this.parts.push({type:"node",index:++u})}L[N]===""?(O.insertBefore(ld(),E),r.push(E)):E.data=L[N],g+=N}}else if(E.nodeType===8)if(E.data===Sc){const A=E.parentNode;E.previousSibling!==null&&u!==c||(u++,A.insertBefore(ld(),E)),c=u,this.parts.push({type:"node",index:u}),E.nextSibling===null?E.data="":(r.push(E),u--),g++}else{let A=-1;for(;(A=E.data.indexOf(Sc,A+1))!==-1;)this.parts.push({type:"node",index:-1}),g++}}else o.currentNode=s.pop()}for(const E of r)E.parentNode.removeChild(E)}}const Aj=(e,t)=>{const i=e.length-t.length;return i>=0&&e.slice(i)===t},VX=e=>e.index!==-1,ld=()=>document.createComment(""),S$=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,A8=133;function GX(e,t){const{element:{content:i},parts:r}=e,s=document.createTreeWalker(i,A8,null,!1);let o=cb(r),c=r[o],u=-1,g=0;const b=[];let S=null;for(;s.nextNode();){u++;const E=s.currentNode;for(E.previousSibling===S&&(S=null),t.has(E)&&(b.push(E),S===null&&(S=E)),S!==null&&g++;c!==void 0&&c.index===u;)c.index=S!==null?-1:c.index-g,o=cb(r,o),c=r[o]}b.forEach(E=>E.parentNode.removeChild(E))}const I6e=e=>{let t=e.nodeType===11?0:1;const i=document.createTreeWalker(e,A8,null,!1);for(;i.nextNode();)t++;return t},cb=(e,t=-1)=>{for(let i=t+1;i<e.length;i++){const r=e[i];if(VX(r))return i}return-1};function E6e(e,t,i=null){const{element:{content:r},parts:s}=e;if(i==null)return void r.appendChild(t);const o=document.createTreeWalker(r,A8,null,!1);let c=cb(s),u=0,g=-1;for(;o.nextNode();)for(g++,o.currentNode===i&&(u=I6e(t),i.parentNode.insertBefore(t,i));c!==-1&&s[c].index===g;){if(u>0){for(;c!==-1;)s[c].index+=u,c=cb(s,c);return}c=cb(s,c)}}const M6e=new WeakMap,T6e=e=>typeof e=="function"&&M6e.has(e),$j={},kj={};class I${constructor(t,i,r){this.__parts=[],this.template=t,this.processor=i,this.options=r}update(t){let i=0;for(const r of this.__parts)r!==void 0&&r.setValue(t[i]),i++;for(const r of this.__parts)r!==void 0&&r.commit()}_clone(){const t=Tj?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),i=[],r=this.template.parts,s=document.createTreeWalker(t,133,null,!1);let o,c=0,u=0,g=s.nextNode();for(;c<r.length;)if(o=r[c],VX(o)){for(;u<o.index;)u++,g.nodeName==="TEMPLATE"&&(i.push(g),s.currentNode=g.content),(g=s.nextNode())===null&&(s.currentNode=i.pop(),g=s.nextNode());if(o.type==="node"){const b=this.processor.handleTextExpression(this.options);b.insertAfterNode(g.previousSibling),this.__parts.push(b)}else this.__parts.push(...this.processor.handleAttributeExpressions(g,o.name,o.strings,this.options));c++}else this.__parts.push(void 0),c++;return Tj&&(document.adoptNode(t),customElements.upgrade(t)),t}}const Oj=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),C6e=` ${Sc} `;class A6e{constructor(t,i,r,s){this.strings=t,this.values=i,this.type=r,this.processor=s}getHTML(){const t=this.strings.length-1;let i="",r=!1;for(let s=0;s<t;s++){const o=this.strings[s],c=o.lastIndexOf("<!--");r=(c>-1||r)&&o.indexOf("-->",c+1)===-1;const u=S$.exec(o);i+=u===null?o+(r?C6e:jX):o.substr(0,u.index)+u[1]+u[2]+Iv+u[3]+Sc}return i+=this.strings[t],i}getTemplateElement(){const t=document.createElement("template");let i=this.getHTML();return Oj!==void 0&&(i=Oj.createHTML(i)),t.innerHTML=i,t}}const $6e=e=>e===null||!(typeof e=="object"||typeof e=="function"),k6e=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class $8{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(ld()),this.endNode=t.appendChild(ld())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=ld()),t.__insert(this.endNode=ld())}insertAfterPart(t){t.__insert(this.startNode=ld()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(this.startNode.parentNode===null)return;for(;T6e(this.__pendingValue);){const i=this.__pendingValue;this.__pendingValue=$j,i(this)}const t=this.__pendingValue;t!==$j&&($6e(t)?t!==this.value&&this.__commitText(t):t instanceof A6e?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):k6e(t)?this.__commitIterable(t):t===kj?(this.value=kj,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const i=this.startNode.nextSibling,r=typeof(t=t!=null?t:"")=="string"?t:String(t);i===this.endNode.previousSibling&&i.nodeType===3?i.data=r:this.__commitNode(document.createTextNode(r)),this.value=t}__commitTemplateResult(t){const i=this.options.templateFactory(t);if(this.value instanceof I$&&this.value.template===i)this.value.update(t.values);else{const r=new I$(i,t.processor,this.options),s=r._clone();r.update(t.values),this.__commitNode(s),this.value=r}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const i=this.value;let r,s=0;for(const o of t)r=i[s],r===void 0&&(r=new $8(this.options),i.push(r),s===0?r.appendIntoPart(this):r.insertAfterPart(i[s-1])),r.setValue(o),r.commit(),s++;s<i.length&&(i.length=s,this.clear(r&&r.endNode))}clear(t=this.startNode){C8(this.startNode.parentNode,t.nextSibling,this.endNode)}}let O6e=!1;function P6e(e){let t=rw.get(e.type);t===void 0&&(t={stringsArray:new WeakMap,keyString:new Map},rw.set(e.type,t));let i=t.stringsArray.get(e.strings);if(i!==void 0)return i;const r=e.strings.join(Sc);return i=t.keyString.get(r),i===void 0&&(i=new zX(e,e.getTemplateElement()),t.keyString.set(r,i)),t.stringsArray.set(e.strings,i),i}(()=>{try{const e={get capture(){return O6e=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{}})();const rw=new Map,ty=new WeakMap,F6e=(e,t,i)=>{let r=ty.get(t);r===void 0&&(C8(t,t.firstChild),ty.set(t,r=new $8(Object.assign({templateFactory:P6e},i))),r.appendInto(t)),r.setValue(e),r.commit()};typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const UX=(e,t)=>`${e}--${t}`;let OS=!0;window.ShadyCSS===void 0?OS=!1:window.ShadyCSS.prepareTemplateDom===void 0&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),OS=!1);const L6e=e=>t=>{const i=UX(t.type,e);let r=rw.get(i);r===void 0&&(r={stringsArray:new WeakMap,keyString:new Map},rw.set(i,r));let s=r.stringsArray.get(t.strings);if(s!==void 0)return s;const o=t.strings.join(Sc);if(s=r.keyString.get(o),s===void 0){const c=t.getTemplateElement();OS&&window.ShadyCSS.prepareTemplateDom(c,e),s=new zX(t,c),r.keyString.set(o,s)}return r.stringsArray.set(t.strings,s),s},R6e=["html","svg"],N6e=e=>{R6e.forEach(t=>{const i=rw.get(UX(t,e));i!==void 0&&i.keyString.forEach(r=>{const{element:{content:s}}=r,o=new Set;Array.from(s.querySelectorAll("style")).forEach(c=>{o.add(c)}),GX(r,o)})})},qX=new Set,D6e=(e,t,i)=>{qX.add(e);const r=i?i.element:document.createElement("template"),s=t.querySelectorAll("style"),{length:o}=s;if(o===0)return void window.ShadyCSS.prepareTemplateStyles(r,e);const c=document.createElement("style");for(let b=0;b<o;b++){const S=s[b];S.parentNode.removeChild(S),c.textContent+=S.textContent}N6e(e);const u=r.content;i?E6e(i,c,u.firstChild):u.insertBefore(c,u.firstChild),window.ShadyCSS.prepareTemplateStyles(r,e);const g=u.querySelector("style");if(window.ShadyCSS.nativeShadow&&g!==null)t.insertBefore(g.cloneNode(!0),t.firstChild);else if(i){u.insertBefore(c,u.firstChild);const b=new Set;b.add(c),GX(i,b)}},j6e=(e,t,i)=>{if(!i||typeof i!="object"||!i.scopeName)throw new Error("The `scopeName` option is required.");const r=i.scopeName,s=ty.has(t),o=OS&&t.nodeType===11&&!!t.host,c=o&&!qX.has(r),u=c?document.createDocumentFragment():t;if(F6e(e,u,Object.assign({templateFactory:L6e(r)},i)),c){const g=ty.get(u);ty.delete(u);const b=g.value instanceof I$?g.value.template:void 0;D6e(r,u,b),C8(t,t.firstChild),t.appendChild(u),ty.set(t,g)}!s&&o&&window.ShadyCSS.styleElement(t.host)};window.JSCompiler_renameProperty=(e,t)=>e;const E$={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return e!==null;case Number:return e===null?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},BX=(e,t)=>t!==e&&(t==t||e==e),e4={attribute:!0,type:String,converter:E$,reflect:!1,hasChanged:BX},t4=1,i4=4,r4=8,s4=16,M$="finalized";class HX extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((i,r)=>{const s=this._attributeNameForProperty(r,i);s!==void 0&&(this._attributeToPropertyMap.set(s,r),t.push(s))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;t!==void 0&&t.forEach((i,r)=>this._classProperties.set(r,i))}}static createProperty(t,i=e4){if(this._ensureClassProperties(),this._classProperties.set(t,i),i.noAccessor||this.prototype.hasOwnProperty(t))return;const r=typeof t=="symbol"?Symbol():`__${t}`,s=this.getPropertyDescriptor(t,r,i);s!==void 0&&Object.defineProperty(this.prototype,t,s)}static getPropertyDescriptor(t,i,r){return{get(){return this[i]},set(s){const o=this[t];this[i]=s,this.requestUpdateInternal(t,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||e4}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(M$)||t.finalize(),this[M$]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const i=this.properties,r=[...Object.getOwnPropertyNames(i),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(i):[]];for(const s of r)this.createProperty(s,i[s])}}static _attributeNameForProperty(t,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}static _valueHasChanged(t,i,r=BX){return r(t,i)}static _propertyValueFromAttribute(t,i){const r=i.type,s=i.converter||E$,o=typeof s=="function"?s:s.fromAttribute;return o?o(t,r):t}static _propertyValueToAttribute(t,i){if(i.reflect===void 0)return;const r=i.type,s=i.converter;return(s&&s.toAttribute||E$.toAttribute)(t,r)}initialize(){this._updateState=0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,i)=>{if(this.hasOwnProperty(i)){const r=this[i];delete this[i],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(i,r)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,i)=>this[i]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,i,r){i!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,i,r=e4){const s=this.constructor,o=s._attributeNameForProperty(t,r);if(o!==void 0){const c=s._propertyValueToAttribute(i,r);if(c===void 0)return;this._updateState=this._updateState|r4,c==null?this.removeAttribute(o):this.setAttribute(o,c),this._updateState=this._updateState&~r4}}_attributeToProperty(t,i){if(this._updateState&r4)return;const r=this.constructor,s=r._attributeToPropertyMap.get(t);if(s!==void 0){const o=r.getPropertyOptions(s);this._updateState=this._updateState|s4,this[s]=r._propertyValueFromAttribute(i,o),this._updateState=this._updateState&~s4}}requestUpdateInternal(t,i,r){let s=!0;if(t!==void 0){const o=this.constructor;r=r||o.getPropertyOptions(t),o._valueHasChanged(this[t],i,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,i),r.reflect!==!0||this._updateState&s4||(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):s=!1}!this._hasRequestedUpdate&&s&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,i){return this.requestUpdateInternal(t,i),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|i4;try{await this._updatePromise}catch{}const t=this.performUpdate();return t!=null&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&i4}get hasUpdated(){return this._updateState&t4}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const i=this._changedProperties;try{t=this.shouldUpdate(i),t?this.update(i):this._markUpdated()}catch(r){throw t=!1,this._markUpdated(),r}t&&(this._updateState&t4||(this._updateState=this._updateState|t4,this.firstUpdated(i)),this.updated(i))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~i4}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((i,r)=>this._propertyToAttribute(r,this[r],i)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}HX[M$]=!0;const T$=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,k8=Symbol();class C9{constructor(t,i){if(i!==k8)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return this._styleSheet===void 0&&(T$?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const z6e=e=>new C9(String(e),k8),V6e=e=>{if(e instanceof C9)return e.cssText;if(typeof e=="number")return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)},sw=(e,...t)=>{const i=t.reduce((r,s,o)=>r+V6e(s)+e[o+1],e[0]);return new C9(i,k8)};(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const Pj={};class n4 extends HX{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const i=(o,c)=>o.reduceRight((u,g)=>Array.isArray(g)?i(g,u):(u.add(g),u),c),r=i(t,new Set),s=[];r.forEach(o=>s.unshift(o)),this._styles=s}else this._styles=t===void 0?[]:[t];this._styles=this._styles.map(i=>{if(i instanceof CSSStyleSheet&&!T$){const r=Array.prototype.slice.call(i.cssRules).reduce((s,o)=>s+o.cssText,"");return z6e(r)}return i})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const t=this.constructor._styles;t.length!==0&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow?T$?this.renderRoot.adoptedStyleSheets=t.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(i=>i.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(t){const i=this.render();super.update(t),i!==Pj&&this.constructor.render(i,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(r=>{const s=document.createElement("style");s.textContent=r.cssText,this.renderRoot.appendChild(s)}))}render(){return Pj}}n4.finalized=!0,n4.render=j6e,n4.shadowRootOptions={mode:"open"};let Fj=0;const o4={},nw=(e,t,i)=>{const r=i&&i.moduleId||"custom-style-module-"+Fj++;Array.isArray(t)||(t=t?[t]:[]),t.forEach(c=>{if(!(c instanceof C9))throw new Error("An item in styles is not of type CSSResult. Use `unsafeCSS` or `css`.");if(!o4[c]){const u=document.createElement("dom-module");u.innerHTML=`
        <template>
          <style>${c.toString()}</style>
        </template>
      `;const g="custom-style-module-"+Fj++;u.register(g),o4[c]=g}});const s=document.createElement("dom-module");if(e){const c=window.customElements&&window.customElements.get(e);c&&c.hasOwnProperty("__finalized")&&console.warn(`The custom element definition for "${e}"
      was finalized before a style module was registered.
      Make sure to add component specific style modules before
      importing the corresponding custom element.`),s.setAttribute("theme-for",e)}const o=i&&i.include||[];s.innerHTML=`
    <template>
      ${o.map(c=>`<style include=${c}></style>`)}
      ${t.map(c=>`<style include=${o4[c]}></style>`)}
    </template>
  `,s.register(r)};nw("vaadin-checkbox",sw`
    :host {
      -webkit-tap-highlight-color: transparent;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      cursor: default;
      outline: none;
    }

    [part='label']:not([empty]) {
      margin: 0.1875em 0.875em 0.1875em 0.375em;
    }

    [part='checkbox'] {
      width: calc(1em + 2px);
      height: calc(1em + 2px);
      margin: 0.1875em;
      position: relative;
      border-radius: var(--lumo-border-radius-s);
      background-color: var(--lumo-contrast-20pct);
      transition: transform 0.2s cubic-bezier(0.12, 0.32, 0.54, 2), background-color 0.15s;
      pointer-events: none;
      line-height: 1.2;
    }

    :host([indeterminate]) [part='checkbox'],
    :host([checked]) [part='checkbox'] {
      background-color: var(--lumo-primary-color);
    }

    /* Needed to align the checkbox nicely on the baseline */
    [part='checkbox']::before {
      content: '\\2003';
    }

    /* Checkmark */
    [part='checkbox']::after {
      content: '';
      display: inline-block;
      width: 0;
      height: 0;
      border: 0 solid var(--lumo-primary-contrast-color);
      border-width: 0.1875em 0 0 0.1875em;
      box-sizing: border-box;
      transform-origin: 0 0;
      position: absolute;
      top: 0.8125em;
      left: 0.5em;
      transform: scale(0.55) rotate(-135deg);
      opacity: 0;
    }

    :host([checked]) [part='checkbox']::after {
      opacity: 1;
      width: 0.625em;
      height: 1.0625em;
    }

    /* Indeterminate checkmark */
    :host([indeterminate]) [part='checkbox']::after {
      transform: none;
      opacity: 1;
      top: 45%;
      height: 10%;
      left: 22%;
      right: 22%;
      width: auto;
      border: 0;
      background-color: var(--lumo-primary-contrast-color);
      transition: opacity 0.25s;
    }

    /* Focus ring */
    :host([focus-ring]) [part='checkbox'] {
      box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);
    }

    /* Disabled */
    :host([disabled]) {
      pointer-events: none;
      color: var(--lumo-disabled-text-color);
    }

    :host([disabled]) [part='label'] ::slotted(*) {
      color: inherit;
    }

    :host([disabled]) [part='checkbox'] {
      background-color: var(--lumo-contrast-10pct);
    }

    :host([disabled]) [part='checkbox']::after {
      border-color: var(--lumo-contrast-30pct);
    }

    :host([indeterminate][disabled]) [part='checkbox']::after {
      background-color: var(--lumo-contrast-30pct);
    }

    /* RTL specific styles */
    :host([dir='rtl']) [part='label']:not([empty]) {
      margin: 0.1875em 0.375em 0.1875em 0.875em;
    }

    /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */
    :host(:hover) [part='checkbox']::after {
      transition: width 0.1s, height 0.25s;
    }

    /* Used for activation "halo" */
    [part='checkbox']::before {
      color: transparent;
      display: inline-block;
      width: 100%;
      height: 100%;
      border-radius: inherit;
      background-color: inherit;
      transform: scale(1.4);
      opacity: 0;
      transition: transform 0.1s, opacity 0.8s;
    }

    /* Hover */
    :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
      background-color: var(--lumo-contrast-30pct);
    }

    /* Disable hover for touch devices */
    @media (pointer: coarse) {
      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
        background-color: var(--lumo-contrast-20pct);
      }
    }

    /* Active */
    :host([active]) [part='checkbox'] {
      transform: scale(0.9);
      transition-duration: 0.05s;
    }

    :host([active][checked]) [part='checkbox'] {
      transform: scale(1.1);
    }

    :host([active]:not([checked])) [part='checkbox']::before {
      transition-duration: 0.01s, 0.01s;
      transform: scale(0);
      opacity: 0.4;
    }
  `,{moduleId:"lumo-checkbox"});let G6e=0;const No=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let i=G6e++;function r(s){let o=s.__mixinSet;if(o&&o[i])return s;let c=t,u=c.get(s);if(!u){u=e(s),c.set(s,u);let g=Object.create(u.__mixinSet||o||null);g[i]=!0,u.__mixinSet=g}return u}return r},st=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e;function C$(e){return e.indexOf(".")>=0}function Dc(e){let t=e.indexOf(".");return t===-1?e:e.slice(0,t)}function WX(e,t){return e.indexOf(t+".")===0}function ow(e,t){return t.indexOf(e+".")===0}function aw(e,t,i){return t+i.slice(e.length)}function U6e(e,t){return e===t||WX(e,t)||ow(e,t)}function Ev(e){if(Array.isArray(e)){let t=[];for(let i=0;i<e.length;i++){let r=e[i].toString().split(".");for(let s=0;s<r.length;s++)t.push(r[s])}return t.join(".")}return e}function JX(e){return Array.isArray(e)?Ev(e).split("."):e.toString().split(".")}function Sn(e,t,i){let r=e,s=JX(t);for(let o=0;o<s.length;o++){if(!r)return;r=r[s[o]]}return i&&(i.path=s.join(".")),r}function Lj(e,t,i){let r=e,s=JX(t),o=s[s.length-1];if(s.length>1){for(let c=0;c<s.length-1;c++)if(r=r[s[c]],!r)return;r[o]=i}else r[t]=i;return s.join(".")}const PS={},q6e=/-[a-z]/g,B6e=/([A-Z])/g;function YX(e){return PS[e]||(PS[e]=e.indexOf("-")<0?e:e.replace(q6e,t=>t[1].toUpperCase()))}function A9(e){return PS[e]||(PS[e]=e.replace(B6e,"-$1").toLowerCase())}let H6e=0,KX=0,Ey=[],W6e=0,A$=!1,ZX=document.createTextNode("");function J6e(){A$=!1;const e=Ey.length;for(let t=0;t<e;t++){let i=Ey[t];if(i)try{i()}catch(r){setTimeout(()=>{throw r})}}Ey.splice(0,e),KX+=e}new window.MutationObserver(J6e).observe(ZX,{characterData:!0});const hl={after:e=>({run:t=>window.setTimeout(t,e),cancel(t){window.clearTimeout(t)}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}},Ic={run:e=>window.requestAnimationFrame(e),cancel(e){window.cancelAnimationFrame(e)}},XX={run:e=>window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,16),cancel(e){window.cancelIdleCallback?window.cancelIdleCallback(e):window.clearTimeout(e)}},da={run:e=>(A$||(A$=!0,ZX.textContent=W6e++),Ey.push(e),H6e++),cancel(e){const t=e-KX;if(t>=0){if(!Ey[t])throw new Error("invalid async handle: "+e);Ey[t]=null}}},Y6e=da,QX=No(e=>{class t extends e{static createProperties(r){const s=this.prototype;for(let o in r)o in s||s._createPropertyAccessor(o)}static attributeNameForProperty(r){return r.toLowerCase()}static typeForProperty(r){}_createPropertyAccessor(r,s){this._addPropertyToAttributeMap(r),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[r]||(this.__dataHasAccessor[r]=!0,this._definePropertyAccessor(r,s))}_addPropertyToAttributeMap(r){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let s=this.__dataAttributes[r];return s||(s=this.constructor.attributeNameForProperty(r),this.__dataAttributes[s]=r),s}_definePropertyAccessor(r,s){Object.defineProperty(this,r,{get(){return this.__data[r]},set:s?function(){}:function(o){this._setPendingProperty(r,o,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let r in this.__dataHasAccessor)this.hasOwnProperty(r)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[r]=this[r],delete this[r])}_initializeInstanceProperties(r){Object.assign(this,r)}_setProperty(r,s){this._setPendingProperty(r,s)&&this._invalidateProperties()}_getProperty(r){return this.__data[r]}_setPendingProperty(r,s,o){let c=this.__data[r],u=this._shouldPropertyChange(r,s,c);return u&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(r in this.__dataOld)&&(this.__dataOld[r]=c),this.__data[r]=s,this.__dataPending[r]=s),u}_isPropertyPending(r){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(r))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,Y6e.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const r=this.__data,s=this.__dataPending,o=this.__dataOld;this._shouldPropertiesChange(r,s,o)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(r,s,o)),this.__dataCounter--}_shouldPropertiesChange(r,s,o){return Boolean(s)}_propertiesChanged(r,s,o){}_shouldPropertyChange(r,s,o){return o!==s&&(o==o||s==s)}attributeChangedCallback(r,s,o,c){s!==o&&this._attributeToProperty(r,o),super.attributeChangedCallback&&super.attributeChangedCallback(r,s,o,c)}_attributeToProperty(r,s,o){if(!this.__serializing){const c=this.__dataAttributes,u=c&&c[r]||r;this[u]=this._deserializeValue(s,o||this.constructor.typeForProperty(u))}}_propertyToAttribute(r,s,o){this.__serializing=!0,o=arguments.length<3?this[r]:o,this._valueToNodeAttribute(this,o,s||this.constructor.attributeNameForProperty(r)),this.__serializing=!1}_valueToNodeAttribute(r,s,o){const c=this._serializeValue(s);o!=="class"&&o!=="name"&&o!=="slot"||(r=st(r)),c===void 0?r.removeAttribute(o):r.setAttribute(o,c)}_serializeValue(r){return typeof r=="boolean"?r?"":void 0:r!=null?r.toString():void 0}_deserializeValue(r,s){switch(s){case Boolean:return r!==null;case Number:return Number(r);default:return r}}}return t}),eQ={};let S2=HTMLElement.prototype;for(;S2;){let e=Object.getOwnPropertyNames(S2);for(let t=0;t<e.length;t++)eQ[e[t]]=!0;S2=Object.getPrototypeOf(S2)}function K6e(e,t){if(!eQ[t]){let i=e[t];i!==void 0&&(e.__data?e._setPendingProperty(t,i):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=i))}}const tQ=No(e=>{const t=QX(e);class i extends t{static createPropertiesForAttributes(){let s=this.observedAttributes;for(let o=0;o<s.length;o++)this.prototype._createPropertyAccessor(YX(s[o]))}static attributeNameForProperty(s){return A9(s)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(s){for(let o in s)this._setProperty(o,s[o])}_ensureAttribute(s,o){const c=this;c.hasAttribute(s)||this._valueToNodeAttribute(c,o,s)}_serializeValue(s){if(typeof s=="object"){if(s instanceof Date)return s.toString();if(s)try{return JSON.stringify(s)}catch{return""}}return super._serializeValue(s)}_deserializeValue(s,o){let c;switch(o){case Object:try{c=JSON.parse(s)}catch{c=s}break;case Array:try{c=JSON.parse(s)}catch{c=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${s}`)}break;case Date:c=isNaN(s)?String(s):Number(s),c=new Date(c);break;default:c=super._deserializeValue(s,o)}return c}_definePropertyAccessor(s,o){K6e(this,s),super._definePropertyAccessor(s,o)}_hasAccessor(s){return this.__dataHasAccessor&&this.__dataHasAccessor[s]}_isPropertyPending(s){return Boolean(this.__dataPending&&s in this.__dataPending)}}return i}),Z6e={"dom-if":!0,"dom-repeat":!0};let Rj=!1,Nj=!1;function X6e(){if(!Rj){Rj=!0;const e=document.createElement("textarea");e.placeholder="a",Nj=e.placeholder===e.textContent}return Nj}function Q6e(e){X6e()&&e.localName==="textarea"&&e.placeholder&&e.placeholder===e.textContent&&(e.textContent=null)}function e7e(e){let t=e.getAttribute("is");if(t&&Z6e[t]){let i=e;for(i.removeAttribute("is"),e=i.ownerDocument.createElement(t),i.parentNode.replaceChild(e,i),e.appendChild(i);i.attributes.length;)e.setAttribute(i.attributes[0].name,i.attributes[0].value),i.removeAttribute(i.attributes[0].name)}return e}function iQ(e,t){let i=t.parentInfo&&iQ(e,t.parentInfo);if(!i)return e;for(let r=i.firstChild,s=0;r;r=r.nextSibling)if(t.parentIndex===s++)return r}function t7e(e,t,i,r){r.id&&(t[r.id]=i)}function i7e(e,t,i){if(i.events&&i.events.length)for(let r,s=0,o=i.events;s<o.length&&(r=o[s]);s++)e._addMethodEventListenerToNode(t,r.name,r.value,e)}function r7e(e,t,i,r){i.templateInfo&&(t._templateInfo=i.templateInfo,t._parentTemplateInfo=r)}function s7e(e,t,i){return e=e._methodHost||e,function(r){e[i]?e[i](r,r.detail):console.warn("listener method `"+i+"` not defined")}}const n7e=No(e=>{class t extends e{static _parseTemplate(r,s){if(!r._templateInfo){let o=r._templateInfo={};o.nodeInfoList=[],o.nestedTemplate=Boolean(s),o.stripWhiteSpace=s&&s.stripWhiteSpace||r.hasAttribute("strip-whitespace"),this._parseTemplateContent(r,o,{parent:null})}return r._templateInfo}static _parseTemplateContent(r,s,o){return this._parseTemplateNode(r.content,s,o)}static _parseTemplateNode(r,s,o){let c=!1,u=r;return u.localName!="template"||u.hasAttribute("preserve-content")?u.localName==="slot"&&(s.hasInsertionPoint=!0):c=this._parseTemplateNestedTemplate(u,s,o)||c,Q6e(u),u.firstChild&&this._parseTemplateChildNodes(u,s,o),u.hasAttributes&&u.hasAttributes()&&(c=this._parseTemplateNodeAttributes(u,s,o)||c),c||o.noted}static _parseTemplateChildNodes(r,s,o){if(r.localName!=="script"&&r.localName!=="style")for(let c,u=r.firstChild,g=0;u;u=c){if(u.localName=="template"&&(u=e7e(u)),c=u.nextSibling,u.nodeType===Node.TEXT_NODE){let S=c;for(;S&&S.nodeType===Node.TEXT_NODE;)u.textContent+=S.textContent,c=S.nextSibling,r.removeChild(S),S=c;if(s.stripWhiteSpace&&!u.textContent.trim()){r.removeChild(u);continue}}let b={parentIndex:g,parentInfo:o};this._parseTemplateNode(u,s,b)&&(b.infoIndex=s.nodeInfoList.push(b)-1),u.parentNode&&g++}}static _parseTemplateNestedTemplate(r,s,o){let c=r,u=this._parseTemplate(c,s);return(u.content=c.content.ownerDocument.createDocumentFragment()).appendChild(c.content),o.templateInfo=u,!0}static _parseTemplateNodeAttributes(r,s,o){let c=!1,u=Array.from(r.attributes);for(let g,b=u.length-1;g=u[b];b--)c=this._parseTemplateNodeAttribute(r,s,o,g.name,g.value)||c;return c}static _parseTemplateNodeAttribute(r,s,o,c,u){return c.slice(0,3)==="on-"?(r.removeAttribute(c),o.events=o.events||[],o.events.push({name:c.slice(3),value:u}),!0):c==="id"&&(o.id=u,!0)}static _contentForTemplate(r){let s=r._templateInfo;return s&&s.content||r.content}_stampTemplate(r,s){r&&!r.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(r);let o=(s=s||this.constructor._parseTemplate(r)).nodeInfoList,c=s.content||r.content,u=document.importNode(c,!0);u.__noInsertionPoint=!s.hasInsertionPoint;let g=u.nodeList=new Array(o.length);u.$={};for(let b,S=0,E=o.length;S<E&&(b=o[S]);S++){let A=g[S]=iQ(u,b);t7e(this,u.$,A,b),r7e(this,A,b,s),i7e(this,A,b)}return u}_addMethodEventListenerToNode(r,s,o,c){let u=s7e(c=c||r,s,o);return this._addEventListenerToNode(r,s,u),u}_addEventListenerToNode(r,s,o){r.addEventListener(s,o)}_removeEventListenerFromNode(r,s,o){r.removeEventListener(s,o)}}return t});let lw=0;const uw=[],li={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},rQ="__computeInfo",o7e=/[A-Z]/;function a4(e,t,i){let r=e[t];if(r){if(!e.hasOwnProperty(t)&&(r=e[t]=Object.create(e[t]),i))for(let s in r){let o=r[s],c=r[s]=Array(o.length);for(let u=0;u<o.length;u++)c[u]=o[u]}}else r=e[t]={};return r}function Mv(e,t,i,r,s,o){if(t){let c=!1;const u=lw++;for(let g in i){let b=t[s?Dc(g):g];if(b)for(let S,E=0,A=b.length;E<A&&(S=b[E]);E++)S.info&&S.info.lastRun===u||s&&!O8(g,S.trigger)||(S.info&&(S.info.lastRun=u),S.fn(e,g,i,r,S.info,s,o),c=!0)}return c}return!1}function a7e(e,t,i,r,s,o,c,u){let g=!1,b=t[c?Dc(r):r];if(b)for(let S,E=0,A=b.length;E<A&&(S=b[E]);E++)S.info&&S.info.lastRun===i||c&&!O8(r,S.trigger)||(S.info&&(S.info.lastRun=i),S.fn(e,r,s,o,S.info,c,u),g=!0);return g}function O8(e,t){if(t){let i=t.name;return i==e||!(!t.structured||!WX(i,e))||!(!t.wildcard||!ow(i,e))}return!0}function Dj(e,t,i,r,s){let o=typeof s.method=="string"?e[s.method]:s.method,c=s.property;o?o.call(e,e.__data[c],r[c]):s.dynamicFn||console.warn("observer method `"+s.method+"` not defined")}function l7e(e,t,i,r,s){let o,c,u=e[li.NOTIFY],g=lw++;for(let b in t)t[b]&&(u&&a7e(e,u,g,b,i,r,s)||s&&u7e(e,b,i))&&(o=!0);o&&(c=e.__dataHost)&&c._invalidateProperties&&c._invalidateProperties()}function u7e(e,t,i){let r=Dc(t);return r!==t?(sQ(e,A9(r)+"-changed",i[t],t),!0):!1}function sQ(e,t,i,r){let s={value:i,queueProperty:!0};r&&(s.path=r),st(e).dispatchEvent(new CustomEvent(t,{detail:s}))}function c7e(e,t,i,r,s,o){let c=(o?Dc(t):t)!=t?t:null,u=c?Sn(e,c):e.__data[t];c&&u===void 0&&(u=i[t]),sQ(e,s.eventName,u,c)}function h7e(e,t,i,r,s){let o,c=e.detail,u=c&&c.path;u?(r=aw(i,r,u),o=c&&c.value):o=e.currentTarget[i],o=s?!o:o,t[li.READ_ONLY]&&t[li.READ_ONLY][r]||!t._setPendingPropertyOrPath(r,o,!0,Boolean(u))||c&&c.queueProperty||t._invalidateProperties()}function d7e(e,t,i,r,s){let o=e.__data[t];kS&&(o=kS(o,s.attrName,"attribute",e)),e._propertyToAttribute(t,s.attrName,o)}function p7e(e,t,i,r){let s=e[li.COMPUTE];if(s)if(c6e){lw++;const o=m7e(e),c=[];for(let g in t)jj(g,s,c,o,r);let u;for(;u=c.shift();)nQ(e,"",t,i,u)&&jj(u.methodInfo,s,c,o,r);Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),e.__dataPending=null}else{let o=t;for(;Mv(e,s,o,i,r);)Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),o=e.__dataPending,e.__dataPending=null}}const f7e=(e,t,i)=>{let r=0,s=t.length-1,o=-1;for(;r<=s;){const c=r+s>>1,u=i.get(t[c].methodInfo)-i.get(e.methodInfo);if(u<0)r=c+1;else{if(!(u>0)){o=c;break}s=c-1}}o<0&&(o=s+1),t.splice(o,0,e)},jj=(e,t,i,r,s)=>{const o=t[s?Dc(e):e];if(o)for(let c=0;c<o.length;c++){const u=o[c];u.info.lastRun===lw||s&&!O8(e,u.trigger)||(u.info.lastRun=lw,f7e(u.info,i,r))}};function m7e(e){let t=e.constructor.__orderedComputedDeps;if(!t){t=new Map;const i=e[li.COMPUTE];let r,{counts:s,ready:o,total:c}=y7e(e);for(;r=o.shift();){t.set(r,t.size);const u=i[r];u&&u.forEach(g=>{const b=g.info.methodInfo;--c,--s[b]==0&&o.push(b)})}c!==0&&console.warn(`Computed graph for ${e.localName} incomplete; circular?`),e.constructor.__orderedComputedDeps=t}return t}function y7e(e){const t=e[rQ],i={},r=e[li.COMPUTE],s=[];let o=0;for(let c in t){const u=t[c];o+=i[c]=u.args.filter(g=>!g.literal).length+(u.dynamicFn?1:0)}for(let c in r)t[c]||s.push(c);return{counts:i,ready:s,total:o}}function nQ(e,t,i,r,s){let o=$$(e,t,i,r,s);if(o===uw)return!1;let c=s.methodInfo;return e.__dataHasAccessor&&e.__dataHasAccessor[c]?e._setPendingProperty(c,o,!0):(e[c]=o,!1)}function g7e(e,t,i){let r=e.__dataLinkedPaths;if(r){let s;for(let o in r){let c=r[o];ow(o,t)?(s=aw(o,c,t),e._setPendingPropertyOrPath(s,i,!0,!0)):ow(c,t)&&(s=aw(c,o,t),e._setPendingPropertyOrPath(s,i,!0,!0))}}}function l4(e,t,i,r,s,o,c){i.bindings=i.bindings||[];let u={kind:r,target:s,parts:o,literal:c,isCompound:o.length!==1};if(i.bindings.push(u),x7e(u)){let{event:b,negate:S}=u.parts[0];u.listenerEvent=b||A9(s)+"-changed",u.listenerNegate=S}let g=t.nodeInfoList.length;for(let b=0;b<u.parts.length;b++){let S=u.parts[b];S.compoundIndex=b,v7e(e,t,u,S,g)}}function v7e(e,t,i,r,s){if(!r.literal)if(i.kind==="attribute"&&i.target[0]==="-")console.warn("Cannot set attribute "+i.target+' because "-" is not a valid attribute starting character');else{let o=r.dependencies,c={index:s,binding:i,part:r,evaluator:e};for(let u=0;u<o.length;u++){let g=o[u];typeof g=="string"&&(g=aQ(g),g.wildcard=!0),e._addTemplatePropertyEffect(t,g.rootProperty,{fn:b7e,info:c,trigger:g})}}}function b7e(e,t,i,r,s,o,c){let u=c[s.index],g=s.binding,b=s.part;if(o&&b.source&&t.length>b.source.length&&g.kind=="property"&&!g.isCompound&&u.__isPropertyEffectsClient&&u.__dataHasAccessor&&u.__dataHasAccessor[g.target]){let S=i[t];t=aw(b.source,g.target,t),u._setPendingPropertyOrPath(t,S,!1,!0)&&e._enqueueClient(u)}else{let S=s.evaluator._evaluateBinding(e,b,t,i,r,o);S!==uw&&w7e(e,u,g,b,S)}}function w7e(e,t,i,r,s){if(s=_7e(t,s,i,r),kS&&(s=kS(s,i.target,i.kind,t)),i.kind=="attribute")e._valueToNodeAttribute(t,s,i.target);else{let o=i.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[o]?t[li.READ_ONLY]&&t[li.READ_ONLY][o]||t._setPendingProperty(o,s)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,o,s)}}function _7e(e,t,i,r){if(i.isCompound){let s=e.__dataCompoundStorage[i.target];s[r.compoundIndex]=t,t=s.join("")}return i.kind!=="attribute"&&(i.target!=="textContent"&&(i.target!=="value"||e.localName!=="input"&&e.localName!=="textarea")||(t=t!=null?t:"")),t}function x7e(e){return Boolean(e.target)&&e.kind!="attribute"&&e.kind!="text"&&!e.isCompound&&e.parts[0].mode==="{"}function S7e(e,t){let{nodeList:i,nodeInfoList:r}=t;if(r.length)for(let s=0;s<r.length;s++){let o=r[s],c=i[s],u=o.bindings;if(u)for(let g=0;g<u.length;g++){let b=u[g];I7e(c,b),E7e(c,e,b)}c.__dataHost=e}}function I7e(e,t){if(t.isCompound){let i=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),r=t.parts,s=new Array(r.length);for(let c=0;c<r.length;c++)s[c]=r[c].literal;let o=t.target;i[o]=s,t.literal&&t.kind=="property"&&(o==="className"&&(e=st(e)),e[o]=t.literal)}}function E7e(e,t,i){if(i.listenerEvent){let r=i.parts[0];e.addEventListener(i.listenerEvent,function(s){h7e(s,t,i.target,r.source,r.negate)})}}function zj(e,t,i,r,s,o){o=t.static||o&&(typeof o!="object"||o[t.methodName]);let c={methodName:t.methodName,args:t.args,methodInfo:s,dynamicFn:o};for(let u,g=0;g<t.args.length&&(u=t.args[g]);g++)u.literal||e._addPropertyEffect(u.rootProperty,i,{fn:r,info:c,trigger:u});return o&&e._addPropertyEffect(t.methodName,i,{fn:r,info:c}),c}function $$(e,t,i,r,s){let o=e._methodHost||e,c=o[s.methodName];if(c){let u=e._marshalArgs(s.args,t,i);return u===uw?uw:c.apply(o,u)}s.dynamicFn||console.warn("method `"+s.methodName+"` not defined")}const M7e=[],oQ="(?:[a-zA-Z_$][\\w.:$\\-*]*)",Vj="(?:("+oQ+`|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:"(?:[^"\\\\]|\\\\.)*")))\\s*)`,Gj=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?"+("("+oQ+"\\s*"+("(?:\\(\\s*(?:"+("(?:"+Vj+"(?:,\\s*"+Vj+")*)")+"?)\\)\\s*)")+"?)")+"(?:]]|}})","g");function Uj(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].literal||"";return t}function u4(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let i={methodName:t[1],static:!0,args:M7e};return t[2].trim()?T7e(t[2].replace(/\\,/g,"&comma;").split(","),i):i}return null}function T7e(e,t){return t.args=e.map(function(i){let r=aQ(i);return r.literal||(t.static=!1),r},this),t}function aQ(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),i={name:t,value:"",literal:!1},r=t[0];switch(r==="-"&&(r=t[1]),r>="0"&&r<="9"&&(r="#"),r){case"'":case'"':i.value=t.slice(1,-1),i.literal=!0;break;case"#":i.value=Number(t),i.literal=!0}return i.literal||(i.rootProperty=Dc(t),i.structured=C$(t),i.structured&&(i.wildcard=t.slice(-2)==".*",i.wildcard&&(i.name=t.slice(0,-2)))),i}function qj(e,t,i){let r=Sn(e,i);return r===void 0&&(r=t[i]),r}function lQ(e,t,i,r){const s={indexSplices:r};_$&&!e._overrideLegacyUndefined&&(t.splices=s),e.notifyPath(i+".splices",s),e.notifyPath(i+".length",t.length),_$&&!e._overrideLegacyUndefined&&(s.indexSplices=[])}function m1(e,t,i,r,s,o){lQ(e,t,i,[{index:r,addedCount:s,removed:o,object:t,type:"splice"}])}function C7e(e){return e[0].toUpperCase()+e.substring(1)}const $9=No(e=>{const t=n7e(tQ(e));class i extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return li}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(y1.length){let s=y1[y1.length-1];s._enqueueClient(this),this.__dataHost=s}}_initializeProtoProperties(s){this.__data=Object.create(s),this.__dataPending=Object.create(s),this.__dataOld={}}_initializeInstanceProperties(s){let o=this[li.READ_ONLY];for(let c in s)o&&o[c]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[c]=this.__dataPending[c]=s[c])}_addPropertyEffect(s,o,c){this._createPropertyAccessor(s,o==li.READ_ONLY);let u=a4(this,o,!0)[s];u||(u=this[o][s]=[]),u.push(c)}_removePropertyEffect(s,o,c){let u=a4(this,o,!0)[s],g=u.indexOf(c);g>=0&&u.splice(g,1)}_hasPropertyEffect(s,o){let c=this[o];return Boolean(c&&c[s])}_hasReadOnlyEffect(s){return this._hasPropertyEffect(s,li.READ_ONLY)}_hasNotifyEffect(s){return this._hasPropertyEffect(s,li.NOTIFY)}_hasReflectEffect(s){return this._hasPropertyEffect(s,li.REFLECT)}_hasComputedEffect(s){return this._hasPropertyEffect(s,li.COMPUTE)}_setPendingPropertyOrPath(s,o,c,u){if(u||Dc(Array.isArray(s)?s[0]:s)!==s){if(!u){let g=Sn(this,s);if(!(s=Lj(this,s,o))||!super._shouldPropertyChange(s,o,g))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(s,o,c))return g7e(this,s,o),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[s])return this._setPendingProperty(s,o,c);this[s]=o}return!1}_setUnmanagedPropertyToNode(s,o,c){c===s[o]&&typeof c!="object"||(o==="className"&&(s=st(s)),s[o]=c)}_setPendingProperty(s,o,c){let u=this.__dataHasPaths&&C$(s),g=u?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(s,o,g[s])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),s in this.__dataOld||(this.__dataOld[s]=this.__data[s]),u?this.__dataTemp[s]=o:this.__data[s]=o,this.__dataPending[s]=o,(u||this[li.NOTIFY]&&this[li.NOTIFY][s])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[s]=c),!0)}_setProperty(s,o){this._setPendingProperty(s,o,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(s){this.__dataPendingClients=this.__dataPendingClients||[],s!==this&&this.__dataPendingClients.push(s)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let s=this.__dataPendingClients;if(s){this.__dataPendingClients=null;for(let o=0;o<s.length;o++){let c=s[o];c.__dataEnabled?c.__dataPending&&c._flushProperties():c._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(s,o){for(let c in s)!o&&this[li.READ_ONLY]&&this[li.READ_ONLY][c]||this._setPendingPropertyOrPath(c,s[c],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(s,o,c){let u,g=this.__dataHasPaths;this.__dataHasPaths=!1,p7e(this,o,c,g),u=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(o,c,g),this._flushClients(),Mv(this,this[li.REFLECT],o,c,g),Mv(this,this[li.OBSERVE],o,c,g),u&&l7e(this,u,o,c,g),this.__dataCounter==1&&(this.__dataTemp={})}_propagatePropertyChanges(s,o,c){this[li.PROPAGATE]&&Mv(this,this[li.PROPAGATE],s,o,c),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,s,o,c)}_runEffectsForTemplate(s,o,c,u){const g=(b,S)=>{Mv(this,s.propertyEffects,b,c,S,s.nodeList);for(let E=s.firstChild;E;E=E.nextSibling)this._runEffectsForTemplate(E,b,c,S)};s.runEffects?s.runEffects(g,o,u):g(o,u)}linkPaths(s,o){s=Ev(s),o=Ev(o),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[s]=o}unlinkPaths(s){s=Ev(s),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[s]}notifySplices(s,o){let c={path:""};lQ(this,Sn(this,s,c),c.path,o)}get(s,o){return Sn(o||this,s)}set(s,o,c){c?Lj(c,s,o):this[li.READ_ONLY]&&this[li.READ_ONLY][s]||this._setPendingPropertyOrPath(s,o,!0)&&this._invalidateProperties()}push(s,...o){let c={path:""},u=Sn(this,s,c),g=u.length,b=u.push(...o);return o.length&&m1(this,u,c.path,g,o.length,[]),b}pop(s){let o={path:""},c=Sn(this,s,o),u=Boolean(c.length),g=c.pop();return u&&m1(this,c,o.path,c.length,0,[g]),g}splice(s,o,c,...u){let g,b={path:""},S=Sn(this,s,b);return o<0?o=S.length-Math.floor(-o):o&&(o=Math.floor(o)),g=arguments.length===2?S.splice(o):S.splice(o,c,...u),(u.length||g.length)&&m1(this,S,b.path,o,u.length,g),g}shift(s){let o={path:""},c=Sn(this,s,o),u=Boolean(c.length),g=c.shift();return u&&m1(this,c,o.path,0,0,[g]),g}unshift(s,...o){let c={path:""},u=Sn(this,s,c),g=u.unshift(...o);return o.length&&m1(this,u,c.path,0,o.length,[]),g}notifyPath(s,o){let c;if(arguments.length==1){let u={path:""};o=Sn(this,s,u),c=u.path}else c=Array.isArray(s)?Ev(s):s;this._setPendingPropertyOrPath(c,o,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(s,o){this._addPropertyEffect(s,li.READ_ONLY),o&&(this["_set"+C7e(s)]=function(c){this._setProperty(s,c)})}_createPropertyObserver(s,o,c){let u={property:s,method:o,dynamicFn:Boolean(c)};this._addPropertyEffect(s,li.OBSERVE,{fn:Dj,info:u,trigger:{name:s}}),c&&this._addPropertyEffect(o,li.OBSERVE,{fn:Dj,info:u,trigger:{name:o}})}_createMethodObserver(s,o){let c=u4(s);if(!c)throw new Error("Malformed observer expression '"+s+"'");zj(this,c,li.OBSERVE,$$,null,o)}_createNotifyingProperty(s){this._addPropertyEffect(s,li.NOTIFY,{fn:c7e,info:{eventName:A9(s)+"-changed",property:s}})}_createReflectedProperty(s){let o=this.constructor.attributeNameForProperty(s);o[0]==="-"?console.warn("Property "+s+" cannot be reflected to attribute "+o+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(s,li.REFLECT,{fn:d7e,info:{attrName:o}})}_createComputedProperty(s,o,c){let u=u4(o);if(!u)throw new Error("Malformed computed expression '"+o+"'");const g=zj(this,u,li.COMPUTE,nQ,s,c);a4(this,rQ)[s]=g}_marshalArgs(s,o,c){const u=this.__data,g=[];for(let b=0,S=s.length;b<S;b++){let{name:E,structured:A,wildcard:O,value:L,literal:N}=s[b];if(!N)if(O){const z=ow(E,o),q=qj(u,c,z?o:E);L={path:z?o:E,value:q,base:z?Sn(u,E):q}}else L=A?qj(u,c,E):u[E];if(_$&&!this._overrideLegacyUndefined&&L===void 0&&s.length>1)return uw;g[b]=L}return g}static addPropertyEffect(s,o,c){this.prototype._addPropertyEffect(s,o,c)}static createPropertyObserver(s,o,c){this.prototype._createPropertyObserver(s,o,c)}static createMethodObserver(s,o){this.prototype._createMethodObserver(s,o)}static createNotifyingProperty(s){this.prototype._createNotifyingProperty(s)}static createReadOnlyProperty(s,o){this.prototype._createReadOnlyProperty(s,o)}static createReflectedProperty(s){this.prototype._createReflectedProperty(s)}static createComputedProperty(s,o,c){this.prototype._createComputedProperty(s,o,c)}static bindTemplate(s){return this.prototype._bindTemplate(s)}_bindTemplate(s,o){let c=this.constructor._parseTemplate(s),u=this.__preBoundTemplateInfo==c;if(!u)for(let g in c.propertyEffects)this._createPropertyAccessor(g);if(o)if(c=Object.create(c),c.wasPreBound=u,this.__templateInfo){const g=s._parentTemplateInfo||this.__templateInfo,b=g.lastChild;c.parent=g,g.lastChild=c,c.previousSibling=b,b?b.nextSibling=c:g.firstChild=c}else this.__templateInfo=c;else this.__preBoundTemplateInfo=c;return c}static _addTemplatePropertyEffect(s,o,c){(s.hostProps=s.hostProps||{})[o]=!0;let u=s.propertyEffects=s.propertyEffects||{};(u[o]=u[o]||[]).push(c)}_stampTemplate(s,o){o=o||this._bindTemplate(s,!0),y1.push(this);let c=super._stampTemplate(s,o);if(y1.pop(),o.nodeList=c.nodeList,!o.wasPreBound){let u=o.childNodes=[];for(let g=c.firstChild;g;g=g.nextSibling)u.push(g)}return c.templateInfo=o,S7e(this,o),this.__dataClientsReady&&(this._runEffectsForTemplate(o,this.__data,null,!1),this._flushClients()),c}_removeBoundDom(s){const o=s.templateInfo,{previousSibling:c,nextSibling:u,parent:g}=o;c?c.nextSibling=u:g&&(g.firstChild=u),u?u.previousSibling=c:g&&(g.lastChild=c),o.nextSibling=o.previousSibling=null;let b=o.childNodes;for(let S=0;S<b.length;S++){let E=b[S];st(st(E).parentNode).removeChild(E)}}static _parseTemplateNode(s,o,c){let u=t._parseTemplateNode.call(this,s,o,c);if(s.nodeType===Node.TEXT_NODE){let g=this._parseBindings(s.textContent,o);g&&(s.textContent=Uj(g)||" ",l4(this,o,c,"text","textContent",g),u=!0)}return u}static _parseTemplateNodeAttribute(s,o,c,u,g){let b=this._parseBindings(g,o);if(b){let S=u,E="property";o7e.test(u)?E="attribute":u[u.length-1]=="$"&&(u=u.slice(0,-1),E="attribute");let A=Uj(b);return A&&E=="attribute"&&(u=="class"&&s.hasAttribute("class")&&(A+=" "+s.getAttribute(u)),s.setAttribute(u,A)),E=="attribute"&&S=="disable-upgrade$"&&s.setAttribute(u,""),s.localName==="input"&&S==="value"&&s.setAttribute(S,""),s.removeAttribute(S),E==="property"&&(u=YX(u)),l4(this,o,c,E,u,b,A),!0}return t._parseTemplateNodeAttribute.call(this,s,o,c,u,g)}static _parseTemplateNestedTemplate(s,o,c){let u=t._parseTemplateNestedTemplate.call(this,s,o,c);const g=s.parentNode,b=c.templateInfo,S=g.localName==="dom-if",E=g.localName==="dom-repeat";mj&&(S||E)&&(g.removeChild(s),(c=c.parentInfo).templateInfo=b,c.noted=!0,u=!1);let A=b.hostProps;if(NX&&S)A&&(o.hostProps=Object.assign(o.hostProps||{},A),mj||(c.parentInfo.noted=!0));else{let O="{";for(let L in A)l4(this,o,c,"property","_host_"+L,[{mode:O,source:L,dependencies:[L],hostProp:!0}])}return u}static _parseBindings(s,o){let c,u=[],g=0;for(;(c=Gj.exec(s))!==null;){c.index>g&&u.push({literal:s.slice(g,c.index)});let b=c[1][0],S=Boolean(c[2]),E=c[3].trim(),A=!1,O="",L=-1;b=="{"&&(L=E.indexOf("::"))>0&&(O=E.substring(L+2),E=E.substring(0,L),A=!0);let N=u4(E),z=[];if(N){let{args:q,methodName:Z}=N;for(let ie=0;ie<q.length;ie++){let ne=q[ie];ne.literal||z.push(ne)}let ee=o.dynamicFns;(ee&&ee[Z]||N.static)&&(z.push(Z),N.dynamicFn=!0)}else z.push(E);u.push({source:E,mode:b,negate:S,customEvent:A,signature:N,dependencies:z,event:O}),g=Gj.lastIndex}if(g&&g<s.length){let b=s.substring(g);b&&u.push({literal:b})}return u.length?u:null}static _evaluateBinding(s,o,c,u,g,b){let S;return S=o.signature?$$(s,c,u,g,o.signature):c!=o.source?Sn(s,o.source):b&&C$(c)?Sn(s,c):s.__data[c],o.negate&&(S=!S),S}}return i}),y1=[];function A7e(e){const t={};for(let i in e){const r=e[i];t[i]=typeof r=="function"?{type:r}:r}return t}const $7e=No(e=>{const t=QX(e);function i(o){const c=Object.getPrototypeOf(o);return c.prototype instanceof s?c:null}function r(o){if(!o.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",o))){let c=null;if(o.hasOwnProperty(JSCompiler_renameProperty("properties",o))){const u=o.properties;u&&(c=A7e(u))}o.__ownProperties=c}return o.__ownProperties}class s extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const c=this._properties;this.__observedAttributes=c?Object.keys(c).map(u=>this.prototype._addPropertyToAttributeMap(u)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const c=i(this);c&&c.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const c=r(this);c&&this.createProperties(c)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const c=i(this);this.__properties=Object.assign({},c&&c._properties,r(this))}return this.__properties}static typeForProperty(c){const u=this._properties[c];return u&&u.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return s}),k7e="3.4.1",k$=window.ShadyCSS&&window.ShadyCSS.cssBuild,k9=No(e=>{const t=$7e($9(e));function i(g){if(!g.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",g))){g.__propertyDefaults=null;let b=g._properties;for(let S in b){let E=b[S];"value"in E&&(g.__propertyDefaults=g.__propertyDefaults||{},g.__propertyDefaults[S]=E)}}return g.__propertyDefaults}function r(g){return g.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",g))||(g.__ownObservers=g.hasOwnProperty(JSCompiler_renameProperty("observers",g))?g.observers:null),g.__ownObservers}function s(g,b,S,E){S.computed&&(S.readOnly=!0),S.computed&&(g._hasReadOnlyEffect(b)?console.warn(`Cannot redefine computed property '${b}'.`):g._createComputedProperty(b,S.computed,E)),S.readOnly&&!g._hasReadOnlyEffect(b)?g._createReadOnlyProperty(b,!S.computed):S.readOnly===!1&&g._hasReadOnlyEffect(b)&&console.warn(`Cannot make readOnly property '${b}' non-readOnly.`),S.reflectToAttribute&&!g._hasReflectEffect(b)?g._createReflectedProperty(b):S.reflectToAttribute===!1&&g._hasReflectEffect(b)&&console.warn(`Cannot make reflected property '${b}' non-reflected.`),S.notify&&!g._hasNotifyEffect(b)?g._createNotifyingProperty(b):S.notify===!1&&g._hasNotifyEffect(b)&&console.warn(`Cannot make notify property '${b}' non-notify.`),S.observer&&g._createPropertyObserver(b,S.observer,E[S.observer]),g._addPropertyToAttributeMap(b)}function o(g,b,S,E){if(!k$){const A=b.content.querySelectorAll("style"),O=M8(b),L=g6e(S),N=b.content.firstElementChild;for(let q=0;q<L.length;q++){let Z=L[q];Z.textContent=g._processStyleText(Z.textContent,E),b.content.insertBefore(Z,N)}let z=0;for(let q=0;q<O.length;q++){let Z=O[q],ee=A[z];ee!==Z?(Z=Z.cloneNode(!0),ee.parentNode.insertBefore(Z,ee)):z++,Z.textContent=g._processStyleText(Z.textContent,E)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(b,S),h6e&&k$&&n6e){const A=b.content.querySelectorAll("style");if(A){let O="";Array.from(A).forEach(L=>{O+=L.textContent,L.parentNode.removeChild(L)}),g._styleSheet=new CSSStyleSheet,g._styleSheet.replaceSync(O)}}}function c(g){let b=null;if(g&&(!tg||l6e)&&(b=ig.import(g,"template"),tg&&!b))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${g}`);return b}class u extends t{static get polymerElementVersion(){return k7e}static _finalizeClass(){t._finalizeClass.call(this);const b=r(this);b&&this.createObservers(b,this._properties),this._prepareTemplate()}static _prepareTemplate(){let b=this.template;b&&(typeof b=="string"?(console.error("template getter must return HTMLTemplateElement"),b=null):iw||(b=b.cloneNode(!0))),this.prototype._template=b}static createProperties(b){for(let S in b)s(this.prototype,S,b[S],b)}static createObservers(b,S){const E=this.prototype;for(let A=0;A<b.length;A++)E._createMethodObserver(b[A],S)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const b=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=b!==void 0?b:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&c(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(b){this._template=b}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const b=this.importMeta;if(b)this._importPath=x8(b.url);else{const S=ig.import(this.is);this._importPath=S&&S.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=o6e,this.importPath=this.constructor.importPath;let b=i(this.constructor);if(b)for(let S in b){let E=b[S];if(this._canApplyPropertyDefault(S)){let A=typeof E.value=="function"?E.value.call(this):E.value;this._hasAccessor(S)?this._setPendingProperty(S,A,!0):this[S]=A}}}_canApplyPropertyDefault(b){return!this.hasOwnProperty(b)}static _processStyleText(b,S){return _8(b,S)}static _finalizeTemplate(b){const S=this.prototype._template;if(S&&!S.__polymerFinalized){S.__polymerFinalized=!0;const E=this.importPath;o(this,S,b,E?ub(E):""),this.prototype._bindTemplate(S)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(b){const S=st(this);if(S.attachShadow)return b?(S.shadowRoot||(S.attachShadow({mode:"open",shadyUpgradeFragment:b}),S.shadowRoot.appendChild(b),this.constructor._styleSheet&&(S.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),u6e&&window.ShadyDOM&&window.ShadyDOM.flushInitial(S.shadowRoot),S.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(b){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,b)}resolveUrl(b,S){return!S&&this.importPath&&(S=ub(this.importPath)),ub(b,S)}static _parseTemplateContent(b,S,E){return S.dynamicFns=S.dynamicFns||this._properties,t._parseTemplateContent.call(this,b,S,E)}static _addTemplatePropertyEffect(b,S,E){return!RX||S in this._properties||E.info.part.signature&&E.info.part.signature.static||E.info.part.hostProp||b.nestedTemplate||console.warn(`Property '${S}' used in template but not declared in 'properties'; attribute will not be observed.`),t._addTemplatePropertyEffect.call(this,b,S,E)}}return u});class uQ{constructor(t){this.value=t.toString()}toString(){return this.value}}function O7e(e){if(e instanceof uQ)return e.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${e}`)}function P7e(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof uQ)return O7e(e);throw new Error(`non-template value passed to Polymer's html function: ${e}`)}const s_=function(e,...t){const i=document.createElement("template");return i.innerHTML=t.reduce((r,s,o)=>r+P7e(s)+e[o+1],e[0]),i},jc=k9(HTMLElement);class br{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(t,i){this._asyncModule=t,this._callback=i,this._timer=this._asyncModule.run(()=>{this._timer=null,cw.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),cw.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return this._timer!=null}static debounce(t,i,r){return t instanceof br?t._cancelAsync():t=new br,t.setConfig(i,r),t}}let cw=new Set;const O9=function(e){cw.add(e)},F7e=function(){const e=Boolean(cw.size);return cw.forEach(t=>{try{t.flush()}catch(i){setTimeout(()=>{throw i})}}),e};let P8=typeof document.head.style.touchAction=="string",FS="__polymerGestures",tx="__polymerGesturesHandled",O$="__polymerGesturesTouchAction",Bj=25,Hj=5,L7e=2,R7e=2500,cQ=["mousedown","mousemove","mouseup","click"],N7e=[0,1,4,2],D7e=function(){try{return new MouseEvent("test",{buttons:1}).buttons===1}catch{return!1}}();function F8(e){return cQ.indexOf(e)>-1}let L8=!1;function hQ(e){if(!F8(e)&&e!=="touchend")return P8&&L8&&a6e?{passive:!0}:void 0}(function(){try{let e=Object.defineProperty({},"passive",{get(){L8=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}})();let dQ=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const P$=[],j7e={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},z7e={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function V7e(e){return j7e[e.localName]||!1}function G7e(e){let t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];let i=e.getRootNode();if(e.id){let r=i.querySelectorAll(`label[for = ${e.id}]`);for(let s=0;s<r.length;s++)t.push(r[s])}}return t}let Wj=function(e){let t=e.sourceCapabilities;if((!t||t.firesTouchEvents)&&(e[tx]={skip:!0},e.type==="click")){let i=!1,r=P9(e);for(let s=0;s<r.length;s++){if(r[s].nodeType===Node.ELEMENT_NODE){if(r[s].localName==="label")P$.push(r[s]);else if(V7e(r[s])){let o=G7e(r[s]);for(let c=0;c<o.length;c++)i=i||P$.indexOf(o[c])>-1}}if(r[s]===Ys.mouse.target)return}if(i)return;e.preventDefault(),e.stopPropagation()}};function Jj(e){let t=dQ?["click"]:cQ;for(let i,r=0;r<t.length;r++)i=t[r],e?(P$.length=0,document.addEventListener(i,Wj,!0)):document.removeEventListener(i,Wj,!0)}function U7e(e){Ys.mouse.mouseIgnoreJob||Jj(!0);let t=function(){Jj(),Ys.mouse.target=null,Ys.mouse.mouseIgnoreJob=null};Ys.mouse.target=P9(e)[0],Ys.mouse.mouseIgnoreJob=br.debounce(Ys.mouse.mouseIgnoreJob,hl.after(R7e),t)}function dp(e){let t=e.type;if(!F8(t))return!1;if(t==="mousemove"){let i=e.buttons===void 0?1:e.buttons;return e instanceof window.MouseEvent&&!D7e&&(i=N7e[e.which]||0),Boolean(1&i)}return(e.button===void 0?0:e.button)===0}function q7e(e){if(e.type==="click"){if(e.detail===0)return!0;let t=rd(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let i=t.getBoundingClientRect(),r=e.pageX,s=e.pageY;return!(r>=i.left&&r<=i.right&&s>=i.top&&s<=i.bottom)}return!1}let Ys={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function B7e(e){let t="auto",i=P9(e);for(let r,s=0;s<i.length;s++)if(r=i[s],r[O$]){t=r[O$];break}return t}function Yj(e,t,i){e.movefn=t,e.upfn=i,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}function W0(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",U7e,!!L8&&{passive:!0});const P9=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:e=>e.composedPath&&e.composedPath()||[],n_={},Gf=[];function H7e(e,t){let i=document.elementFromPoint(e,t),r=i;for(;r&&r.shadowRoot&&!window.ShadyDOM;){let s=r;if(r=r.shadowRoot.elementFromPoint(e,t),s===r)break;r&&(i=r)}return i}function rd(e){const t=P9(e);return t.length>0?t[0]:e.target}function pQ(e){let t,i=e.type,r=e.currentTarget[FS];if(!r)return;let s=r[i];if(s){if(!e[tx]&&(e[tx]={},i.slice(0,5)==="touch")){let o=e.changedTouches[0];if(i==="touchstart"&&e.touches.length===1&&(Ys.touch.id=o.identifier),Ys.touch.id!==o.identifier)return;P8||i!=="touchstart"&&i!=="touchmove"||W7e(e)}if(t=e[tx],!t.skip){for(let o,c=0;c<Gf.length;c++)o=Gf[c],s[o.name]&&!t[o.name]&&o.flow&&o.flow.start.indexOf(e.type)>-1&&o.reset&&o.reset();for(let o,c=0;c<Gf.length;c++)o=Gf[c],s[o.name]&&!t[o.name]&&(t[o.name]=!0,o[i](e))}}}function W7e(e){let t=e.changedTouches[0],i=e.type;if(i==="touchstart")Ys.touch.x=t.clientX,Ys.touch.y=t.clientY,Ys.touch.scrollDecided=!1;else if(i==="touchmove"){if(Ys.touch.scrollDecided)return;Ys.touch.scrollDecided=!0;let r=B7e(e),s=!1,o=Math.abs(Ys.touch.x-t.clientX),c=Math.abs(Ys.touch.y-t.clientY);e.cancelable&&(r==="none"?s=!0:r==="pan-x"?s=c>o:r==="pan-y"&&(s=o>c)),s?e.preventDefault():LS("track")}}function R8(e,t,i){return!!n_[t]&&(Y7e(e,t,i),!0)}function J7e(e,t,i){return!!n_[t]&&(K7e(e,t,i),!0)}function Y7e(e,t,i){let r=n_[t],s=r.deps,o=r.name,c=e[FS];c||(e[FS]=c={});for(let u,g,b=0;b<s.length;b++)u=s[b],dQ&&F8(u)&&u!=="click"||(g=c[u],g||(c[u]=g={_count:0}),g._count===0&&e.addEventListener(u,pQ,hQ(u)),g[o]=(g[o]||0)+1,g._count=(g._count||0)+1);e.addEventListener(t,i),r.touchAction&&fQ(e,r.touchAction)}function K7e(e,t,i){let r=n_[t],s=r.deps,o=r.name,c=e[FS];if(c)for(let u,g,b=0;b<s.length;b++)u=s[b],g=c[u],g&&g[o]&&(g[o]=(g[o]||1)-1,g._count=(g._count||1)-1,g._count===0&&e.removeEventListener(u,pQ,hQ(u)));e.removeEventListener(t,i)}function c4(e){Gf.push(e);for(let t=0;t<e.emits.length;t++)n_[e.emits[t]]=e}function Z7e(e){for(let t,i=0;i<Gf.length;i++){t=Gf[i];for(let r,s=0;s<t.emits.length;s++)if(r=t.emits[s],r===e)return t}return null}function fQ(e,t){P8&&e instanceof HTMLElement&&da.run(()=>{e.style.touchAction=t}),e[O$]=t}function N8(e,t,i){let r=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(r.detail=i,st(e).dispatchEvent(r),r.defaultPrevented){let s=i.preventer||i.sourceEvent;s&&s.preventDefault&&s.preventDefault()}}function LS(e){let t=Z7e(e);t.info&&(t.info.prevent=!0)}function g1(e,t,i,r){t&&N8(t,e,{x:i.clientX,y:i.clientY,sourceEvent:i,preventer:r,prevent:function(s){return LS(s)}})}function Kj(e,t,i){if(e.prevent)return!1;if(e.started)return!0;let r=Math.abs(e.x-t),s=Math.abs(e.y-i);return r>=Hj||s>=Hj}function h4(e,t,i){if(!t)return;let r,s=e.moves[e.moves.length-2],o=e.moves[e.moves.length-1],c=o.x-e.x,u=o.y-e.y,g=0;s&&(r=o.x-s.x,g=o.y-s.y),N8(t,"track",{state:e.state,x:i.clientX,y:i.clientY,dx:c,dy:u,ddx:r,ddy:g,sourceEvent:i,hover:function(){return H7e(i.clientX,i.clientY)}})}function Zj(e,t,i){let r=Math.abs(t.clientX-e.x),s=Math.abs(t.clientY-e.y),o=rd(i||t);!o||z7e[o.localName]&&o.hasAttribute("disabled")||(isNaN(r)||isNaN(s)||r<=Bj&&s<=Bj||q7e(t))&&(e.prevent||N8(o,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:i}))}c4({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){W0(this.info)},mousedown:function(e){if(!dp(e))return;let t=rd(e),i=this,r=function(o){dp(o)||(g1("up",t,o),W0(i.info))},s=function(o){dp(o)&&g1("up",t,o),W0(i.info)};Yj(this.info,r,s),g1("down",t,e)},touchstart:function(e){g1("down",rd(e),e.changedTouches[0],e)},touchend:function(e){g1("up",rd(e),e.changedTouches[0],e)}}),c4({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>L7e&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,W0(this.info)},mousedown:function(e){if(!dp(e))return;let t=rd(e),i=this,r=function(o){let c=o.clientX,u=o.clientY;Kj(i.info,c,u)&&(i.info.state=i.info.started?o.type==="mouseup"?"end":"track":"start",i.info.state==="start"&&LS("tap"),i.info.addMove({x:c,y:u}),dp(o)||(i.info.state="end",W0(i.info)),t&&h4(i.info,t,o),i.info.started=!0)},s=function(o){i.info.started&&r(o),W0(i.info)};Yj(this.info,r,s),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=rd(e),i=e.changedTouches[0],r=i.clientX,s=i.clientY;Kj(this.info,r,s)&&(this.info.state==="start"&&LS("tap"),this.info.addMove({x:r,y:s}),h4(this.info,t,i),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=rd(e),i=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:i.clientX,y:i.clientY}),h4(this.info,t,i))}}),c4({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(e){dp(e)&&(this.info.x=e.clientX,this.info.y=e.clientY)},click:function(e){dp(e)&&Zj(this.info,e)},touchstart:function(e){const t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(e){Zj(this.info,e.changedTouches[0],e)}});const o_=No(e=>{class t extends e{_addEventListenerToNode(r,s,o){R8(r,s,o)||super._addEventListenerToNode(r,s,o)}_removeEventListenerFromNode(r,s,o){J7e(r,s,o)||super._removeEventListenerFromNode(r,s,o)}}return t}),X7e=e=>class extends e{static get properties(){return{theme:{type:String,readOnly:!0}}}attributeChangedCallback(t,i,r){super.attributeChangedCallback(t,i,r),t==="theme"&&this._setTheme(r)}},D8=e=>class extends X7e(e){static finalize(){super.finalize();const t=this.prototype._template,i=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,r=Object.getPrototypeOf(this.prototype)._template;r&&!i&&Array.from(r.content.querySelectorAll("style[include]")).forEach(s=>{this._includeStyle(s.getAttribute("include"),t)}),this._includeMatchingThemes(t)}static _includeMatchingThemes(t){const i=ig.prototype.modules;let r=!1;const s=this.is+"-default-theme";Object.keys(i).sort((o,c)=>{const u=o.indexOf("vaadin-")===0,g=c.indexOf("vaadin-")===0,b=["lumo-","material-"],S=b.filter(A=>o.indexOf(A)===0).length>0,E=b.filter(A=>c.indexOf(A)===0).length>0;return u!==g?u?-1:1:S!==E?S?-1:1:0}).forEach(o=>{if(o!==s){const c=i[o].getAttribute("theme-for");c&&c.split(" ").forEach(u=>{new RegExp("^"+u.split("*").join(".*")+"$").test(this.is)&&(r=!0,this._includeStyle(o,t))})}}),!r&&i[s]&&this._includeStyle(s,t)}static _includeStyle(t,i){if(i&&!i.content.querySelector(`style[include="${t}"]`)){const r=document.createElement("style");r.setAttribute("include",t),i.content.appendChild(r)}}};let RS=!1;window.addEventListener("keydown",()=>{RS=!0},{capture:!0}),window.addEventListener("mousedown",()=>{RS=!1},{capture:!0});const Q7e=e=>class extends e{static get properties(){var t={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(t.tabIndex=t.tabindex),t}},eke=e=>class extends Q7e(e){static get properties(){return{autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}get _keyboardActive(){return RS}ready(){this.addEventListener("focusin",i=>{i.composedPath()[0]===this?this.contains(i.relatedTarget)||this._focus():i.composedPath().indexOf(this.focusElement)===-1||this.disabled||this._setFocused(!0)}),this.addEventListener("focusout",i=>this._setFocused(!1)),super.ready();const t=i=>{i.composed||i.target.dispatchEvent(new CustomEvent(i.type,{bubbles:!0,composed:!0,cancelable:!1}))};this.shadowRoot.addEventListener("focusin",t),this.shadowRoot.addEventListener("focusout",t),this.addEventListener("keydown",i=>{if(!i.defaultPrevented&&i.keyCode===9)if(i.shiftKey)this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout(()=>this._isShiftTabbing=!1,0);else{const r=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(r&&parseFloat(r[1])>=63&&parseFloat(r[1])<66&&this.parentNode&&this.nextSibling){const s=document.createElement("input");s.style.position="absolute",s.style.opacity="0",s.tabIndex=this.tabIndex,this.parentNode.insertBefore(s,this.nextSibling),s.focus(),s.addEventListener("focusout",()=>this.parentNode.removeChild(s))}}}),this.autofocus&&!this.disabled&&window.requestAnimationFrame(()=>{this._focus(),this._setFocused(!0),this.setAttribute("focus-ring","")})}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("focused")&&this._setFocused(!1)}_setFocused(t){t?this.setAttribute("focused",""):this.removeAttribute("focused"),t&&RS?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring")}get focusElement(){return window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`),this}_focus(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0))}focus(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0))}blur(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1))}_disabledChanged(t){this.focusElement.disabled=t,t?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(this._previousTabIndex!==void 0&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"))}_tabindexChanged(t){t!==void 0&&(this.focusElement.tabIndex=t),this.disabled&&this.tabindex&&(this.tabindex!==-1&&(this._previousTabIndex=this.tabindex),this.tabindex=t=void 0),window.ShadyDOM&&this.setProperties({tabIndex:t,tabindex:t})}click(){this.disabled||super.click()}},rg=function(){let e,t;do e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=F7e();while(e||t)};class d4{static detectScrollType(){const t=document.createElement("div");t.textContent="ABCD",t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t);let i="reverse";return t.scrollLeft>0?i="default":(t.scrollLeft=2,t.scrollLeft<2&&(i="negative")),document.body.removeChild(t),i}static getNormalizedScrollLeft(t,i,r){const{scrollLeft:s}=r;if(i!=="rtl"||!t)return s;switch(t){case"negative":return r.scrollWidth-r.clientWidth+s;case"reverse":return r.scrollWidth-r.clientWidth-s}return s}static setNormalizedScrollLeft(t,i,r,s){if(i==="rtl"&&t)switch(t){case"negative":r.scrollLeft=r.clientWidth-r.scrollWidth+s;break;case"reverse":r.scrollLeft=r.scrollWidth-r.clientWidth-s;break;default:r.scrollLeft=s}else r.scrollLeft=s}}const Dh=[],tke=function(){const e=jm();Dh.forEach(t=>{F$(t,e)})};let I2;new MutationObserver(tke).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const F$=function(e,t){t?e.setAttribute("dir",t):e.removeAttribute("dir")},jm=function(){return document.documentElement.getAttribute("dir")},j8=e=>class extends e{static get properties(){return{dir:{type:String,readOnly:!0}}}static finalize(){super.finalize(),I2||(I2=d4.detectScrollType())}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),F$(this,jm()))}attributeChangedCallback(t,i,r){if(super.attributeChangedCallback(t,i,r),t!=="dir")return;const s=r===jm()&&Dh.indexOf(this)===-1,o=!r&&i&&Dh.indexOf(this)===-1,c=r!==jm()&&i===jm();s||o?(this.__subscribe(),F$(this,jm())):c&&this.__subscribe(!1)}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir")}__subscribe(t=!0){t?Dh.indexOf(this)===-1&&Dh.push(this):Dh.indexOf(this)>-1&&Dh.splice(Dh.indexOf(this),1)}__getNormalizedScrollLeft(t){return d4.getNormalizedScrollLeft(I2,this.getAttribute("dir")||"ltr",t)}__setNormalizedScrollLeft(t,i){return d4.setNormalizedScrollLeft(I2,this.getAttribute("dir")||"ltr",t,i)}},ike=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,ix=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function rke(){function e(){return!0}return mQ(e)}function ske(){try{return!!nke()||!!oke()&&(ix?!ake():!rke())}catch{return!1}}function nke(){return localStorage.getItem("vaadin.developmentmode.force")}function oke(){return["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0}function ake(){return!!(ix&&Object.keys(ix).map(e=>ix[e]).filter(e=>e.productionMode).length>0)}function mQ(e,t){if(typeof e!="function")return;const i=ike.exec(e.toString());if(i)try{e=new Function(i[1])}catch(r){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",r)}return e(t)}window.Vaadin=window.Vaadin||{};const Xj=function(e,t){if(window.Vaadin.developmentMode)return mQ(e,t)};function lke(){}window.Vaadin.developmentMode===void 0&&(window.Vaadin.developmentMode=ske());const Qj=function(){if(typeof Xj=="function")return Xj(lke)};let p4;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){Qj&&Qj()};const ez=new Set,yQ=e=>class extends j8(e){static finalize(){super.finalize();const{is:t}=this;t&&!ez.has(t)&&(window.Vaadin.registrations.push(this),ez.add(t),window.Vaadin.developmentModeCallback&&(p4=br.debounce(p4,XX,()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()}),O9(p4)))}constructor(){super(),document.doctype===null&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')}};class tz extends yQ(eke(D8(o_(jc)))){static get template(){return s_`
      <style>
        :host {
          display: inline-block;
        }

        :host([hidden]) {
          display: none !important;
        }

        label {
          display: inline-flex;
          align-items: baseline;
          outline: none;
        }

        [part='checkbox'] {
          position: relative;
          display: inline-block;
          flex: none;
        }

        input[type='checkbox'] {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: 100%;
          opacity: 0;
          cursor: inherit;
          margin: 0;
        }

        :host([disabled]) {
          -webkit-tap-highlight-color: transparent;
        }
      </style>

      <label>
        <span part="checkbox">
          <input
            type="checkbox"
            checked="{{checked::change}}"
            disabled$="[[disabled]]"
            indeterminate="{{indeterminate::change}}"
            role="presentation"
            tabindex="-1"
          />
        </span>

        <span part="label">
          <slot></slot>
        </span>
      </label>
    `}static get is(){return"vaadin-checkbox"}static get version(){return"3.0.0"}static get properties(){return{checked:{type:Boolean,value:!1,notify:!0,observer:"_checkedChanged",reflectToAttribute:!0},indeterminate:{type:Boolean,notify:!0,observer:"_indeterminateChanged",reflectToAttribute:!0,value:!1},value:{type:String,value:"on"},_nativeCheckbox:{type:Object}}}constructor(){super(),this.name}get name(){return this.checked?this._storedName:""}set name(t){this._storedName=t}ready(){super.ready(),this.setAttribute("role","checkbox"),this._nativeCheckbox=this.shadowRoot.querySelector('input[type="checkbox"]'),this.addEventListener("click",this._handleClick.bind(this)),this._addActiveListeners();const t=this.getAttribute("name");t&&(this.name=t),this.shadowRoot.querySelector('[part~="label"]').querySelector("slot").addEventListener("slotchange",this._updateLabelAttribute.bind(this)),this._updateLabelAttribute()}_updateLabelAttribute(){const t=this.shadowRoot.querySelector('[part~="label"]'),i=t.firstElementChild.assignedNodes();this._isAssignedNodesEmpty(i)?t.setAttribute("empty",""):t.removeAttribute("empty")}_isAssignedNodesEmpty(t){return t.length===0||t.length==1&&t[0].nodeType==Node.TEXT_NODE&&t[0].textContent.trim()===""}_checkedChanged(t){this.indeterminate?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",Boolean(t))}_indeterminateChanged(t){t?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",this.checked)}_addActiveListeners(){this._addEventListenerToNode(this,"down",t=>{this.__interactionsAllowed(t)&&this.setAttribute("active","")}),this._addEventListenerToNode(this,"up",()=>this.removeAttribute("active")),this.addEventListener("keydown",t=>{this.__interactionsAllowed(t)&&t.keyCode===32&&(t.preventDefault(),this.setAttribute("active",""))}),this.addEventListener("keyup",t=>{this.__interactionsAllowed(t)&&t.keyCode===32&&(t.preventDefault(),this._toggleChecked(),this.removeAttribute("active"),this.indeterminate&&(this.indeterminate=!1))})}get focusElement(){return this.shadowRoot.querySelector("input")}__interactionsAllowed(t){return!this.disabled&&t.target.localName!=="a"}_handleClick(t){this.__interactionsAllowed(t)&&(this.indeterminate?(this.indeterminate=!1,t.preventDefault(),this._toggleChecked()):t.composedPath()[0]!==this._nativeCheckbox&&(t.preventDefault(),this._toggleChecked()))}_toggleChecked(){this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{composed:!1,bubbles:!0}))}}customElements.define(tz.is,tz),nw("vaadin-grid",sw`
    :host {
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-m);
      line-height: var(--lumo-line-height-s);
      color: var(--lumo-body-text-color);
      background-color: var(--lumo-base-color);
      box-sizing: border-box;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;

      /* For internal use only */
      --_lumo-grid-border-color: var(--lumo-contrast-20pct);
      --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);
      --_lumo-grid-border-width: 1px;
      --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);
    }

    /* No (outer) border */

    :host(:not([theme~='no-border'])) {
      border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);
    }

    /* Cell styles */

    [part~='cell'] {
      min-height: var(--lumo-size-m);
      background-color: var(--lumo-base-color);
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      cursor: default;
      padding: var(--lumo-space-xs) var(--lumo-space-m);
    }

    /* Apply row borders by default and introduce the "no-row-borders" variant */
    :host(:not([theme~='no-row-borders'])) [part~='cell']:not([part~='details-cell']) {
      border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Hide first body row top border */
    :host(:not([theme~='no-row-borders'])) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      border-top: 0;
      min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));
    }

    /* Focus-ring */

    [part~='cell']:focus {
      outline: none;
    }

    :host([navigating]) [part~='cell']:focus::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    /* Drag and Drop styles */
    :host([dragover])::after {
      content: '';
      position: absolute;
      z-index: 100;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    [part~='row'][dragover] {
      z-index: 100 !important;
    }

    [part~='row'][dragover] [part~='cell'] {
      overflow: visible;
    }

    [part~='row'][dragover] [part~='cell']::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      height: calc(var(--_lumo-grid-border-width) + 2px);
      pointer-events: none;
      background: var(--lumo-primary-color-50pct);
    }

    :host([theme~='no-row-borders']) [dragover] [part~='cell']::after {
      height: 2px;
    }

    [part~='row'][dragover='below'] [part~='cell']::after {
      top: 100%;
      bottom: auto;
      margin-top: -1px;
    }

    [part~='row'][dragover='above'] [part~='cell']::after {
      top: auto;
      bottom: 100%;
      margin-bottom: -1px;
    }

    [part~='row'][details-opened][dragover='below'] [part~='cell']:not([part~='details-cell'])::after,
    [part~='row'][details-opened][dragover='above'] [part~='details-cell']::after {
      display: none;
    }

    [part~='row'][dragover][dragover='on-top'] [part~='cell']::after {
      height: 100%;
    }

    [part~='row'][dragstart] {
      /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */
      border-bottom: 100px solid transparent;
      z-index: 100 !important;
      opacity: 0.9;
    }

    [part~='row'][dragstart] [part~='cell'] {
      border: none !important;
      box-shadow: none !important;
    }

    [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    [ios] [part~='row'][dragstart] [part~='cell'] {
      background: var(--lumo-primary-color-50pct);
    }

    #scroller:not([ios]) [part~='row'][dragstart]:not([dragstart=''])::after {
      display: block;
      position: absolute;
      left: var(--_grid-drag-start-x);
      top: var(--_grid-drag-start-y);
      z-index: 100;
      content: attr(dragstart);
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      padding: calc(var(--lumo-space-xs) * 0.8);
      color: var(--lumo-error-contrast-color);
      background-color: var(--lumo-error-color);
      border-radius: var(--lumo-border-radius-m);
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
      font-weight: 500;
      text-transform: initial;
      letter-spacing: initial;
      min-width: calc(var(--lumo-size-s) * 0.7);
      text-align: center;
    }

    /* Headers and footers */

    [part~='header-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='reorder-ghost'] {
      font-size: var(--lumo-font-size-s);
      font-weight: 500;
    }

    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content) {
      font-weight: 400;
    }

    [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-xl);
    }

    /* Header borders */

    /* Hide first header row top border */
    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='header-cell'] {
      border-top: 0;
    }

    [part='row']:last-child [part~='header-cell'] {
      border-bottom: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='top']) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-border-color);
    }

    /* Footer borders */

    [part='row']:first-child [part~='footer-cell'] {
      border-top: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='bottom']) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-border-color);
    }

    /* Column reordering */

    :host([reordering]) [part~='cell'] {
      background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='allowed'] {
      background: var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='dragging'] {
      background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);
    }

    [part~='reorder-ghost'] {
      opacity: 0.85;
      box-shadow: var(--lumo-box-shadow-s);
      /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */
      padding: var(--lumo-space-s) var(--lumo-space-m) !important;
    }

    /* Column resizing */

    [part='resize-handle'] {
      width: 3px;
      background-color: var(--lumo-primary-color-50pct);
      opacity: 0;
      transition: opacity 0.2s;
    }

    :host(:not([reordering])) *:not([column-resizing]) [part~='cell']:hover [part='resize-handle'],
    [part='resize-handle']:active {
      opacity: 1;
      transition-delay: 0.15s;
    }

    /* Column borders */

    :host([theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Frozen columns */

    [last-frozen] {
      border-right: var(--_lumo-grid-border-width) solid transparent;
      overflow: hidden;
    }

    :host([overflow~='left']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-right-color: var(--_lumo-grid-border-color);
    }

    /* Row stripes */

    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='body-cell'],
    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='details-cell'] {
      background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));
      background-repeat: repeat-x;
    }

    /* Selected row */

    /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */
    :host(:not([reordering])) [part~='row'][selected] {
      z-index: 1;
    }

    :host(:not([reordering])) [part~='row'][selected] [part~='body-cell']:not([part~='details-cell']) {
      background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));
      background-repeat: repeat;
    }

    /* Cover the border of an unselected row */
    :host(:not([theme~='no-row-borders'])) [part~='row'][selected] [part~='cell']:not([part~='details-cell']) {
      box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);
    }

    /* Compact */

    :host([theme~='compact']) [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-m);
    }

    :host([theme~='compact']) [part~='cell'] {
      min-height: var(--lumo-size-s);
    }

    :host([theme~='compact']) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));
    }

    :host([theme~='compact']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      padding: var(--lumo-space-xs) var(--lumo-space-s);
    }

    /* Wrap cell contents */

    :host([theme~='wrap-cell-content']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      white-space: normal;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    :host([dir='rtl'][theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    :host([dir='rtl']) [last-frozen] {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid transparent;
    }

    :host([dir='rtl'][overflow~='right']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-left-color: var(--_lumo-grid-border-color);
    }
  `,{moduleId:"lumo-grid"}),nw("vaadin-checkbox",sw`
    :host(.vaadin-grid-select-all-checkbox) {
      font-size: var(--lumo-font-size-m);
    }
  `,{moduleId:"vaadin-grid-select-all-checkbox-lumo"});let NS=!1,gQ=[],vQ=[];function bQ(){NS=!0,requestAnimationFrame(function(){NS=!1,uke(gQ),setTimeout(function(){cke(vQ)})})}function uke(e){for(;e.length;)wQ(e.shift())}function cke(e){for(let t=0,i=e.length;t<i;t++)wQ(e.shift())}function wQ(e){const t=e[0],i=e[1],r=e[2];try{i.apply(t,r)}catch(s){setTimeout(()=>{throw s})}}function hke(e,t,i){NS||bQ(),gQ.push([e,t,i])}function dke(e,t,i){NS||bQ(),vQ.push([e,t,i])}class iz{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function _Q(e){return xQ(fke(e=pke(e)),e)}function pke(e){return e.replace(Ec.comments,"").replace(Ec.port,"")}function fke(e){let t=new iz;t.start=0,t.end=e.length;let i=t;for(let r=0,s=e.length;r<s;r++)if(e[r]===IQ){i.rules||(i.rules=[]);let o=i,c=o.rules[o.rules.length-1]||null;i=new iz,i.start=r+1,i.parent=o,i.previous=c,o.rules.push(i)}else e[r]===EQ&&(i.end=r+1,i=i.parent||t);return t}function xQ(e,t){let i=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=i.trim(),e.parent){let s=e.previous?e.previous.end:e.parent.start;i=t.substring(s,e.start-1),i=mke(i),i=i.replace(Ec.multipleSpaces," "),i=i.substring(i.lastIndexOf(";")+1);let o=e.parsedSelector=e.selector=i.trim();e.atRule=o.indexOf(_ke)===0,e.atRule?o.indexOf(wke)===0?e.type=xd.MEDIA_RULE:o.match(Ec.keyframesRule)&&(e.type=xd.KEYFRAMES_RULE,e.keyframesName=e.selector.split(Ec.multipleSpaces).pop()):o.indexOf(MQ)===0?e.type=xd.MIXIN_RULE:e.type=xd.STYLE_RULE}let r=e.rules;if(r)for(let s,o=0,c=r.length;o<c&&(s=r[o]);o++)xQ(s,t);return e}function mke(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,function(){let t=arguments[1],i=6-t.length;for(;i--;)t="0"+t;return"\\"+t})}function SQ(e,t,i=""){let r="";if(e.cssText||e.rules){let s=e.rules;if(s&&!yke(s))for(let o,c=0,u=s.length;c<u&&(o=s[c]);c++)r=SQ(o,t,r);else r=t?e.cssText:gke(e.cssText),r=r.trim(),r&&(r="  "+r+`
`)}return r&&(e.selector&&(i+=e.selector+" "+IQ+`
`),i+=r,e.selector&&(i+=EQ+`

`)),i}function yke(e){let t=e[0];return Boolean(t)&&Boolean(t.selector)&&t.selector.indexOf(MQ)===0}function gke(e){return bke(e=vke(e))}function vke(e){return e.replace(Ec.customProp,"").replace(Ec.mixinProp,"")}function bke(e){return e.replace(Ec.mixinApply,"").replace(Ec.varApply,"")}const xd={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},IQ="{",EQ="}",Ec={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},MQ="--",wke="@media",_ke="@",rz=new Set,xke="shady-unscoped";function Ske(e){const t=e.textContent;if(!rz.has(t)){rz.add(t);const i=document.createElement("style");i.setAttribute("shady-unscoped",""),i.textContent=t,document.head.appendChild(i)}}function Ike(e){return e.hasAttribute(xke)}function L$(e,t){return e?(typeof e=="string"&&(e=_Q(e)),t&&hb(e,t),SQ(e,w8)):""}function sz(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=_Q(e.textContent)),e.__cssRules||null}function hb(e,t,i,r){if(!e)return;let s=!1,o=e.type;if(r&&o===xd.MEDIA_RULE){let u=e.selector.match(t6e);u&&(window.matchMedia(u[1]).matches||(s=!0))}o===xd.STYLE_RULE?t(e):i&&o===xd.KEYFRAMES_RULE?i(e):o===xd.MIXIN_RULE&&(s=!0);let c=e.rules;if(c&&!s)for(let u,g=0,b=c.length;g<b&&(u=c[g]);g++)hb(u,t,i,r)}function Eke(e,t){let i=0;for(let r=t,s=e.length;r<s;r++)if(e[r]==="(")i++;else if(e[r]===")"&&--i==0)return r;return-1}function TQ(e,t){let i=e.indexOf("var(");if(i===-1)return t(e,"","","");let r=Eke(e,i+3),s=e.substring(i+4,r),o=e.substring(0,i),c=TQ(e.substring(r+1),t),u=s.indexOf(",");return u===-1?t(o,s.trim(),"",c):t(o,s.substring(0,u).trim(),s.substring(u+1).trim(),c)}function Mke(e){let t=e.localName,i="",r="";return t?t.indexOf("-")>-1?i=t:(r=t,i=e.getAttribute&&e.getAttribute("is")||""):(i=e.is,r=e.extends),{is:i,typeExtension:r}}function Tke(e){const t=[],i=e.querySelectorAll("style");for(let r=0;r<i.length;r++){const s=i[r];Ike(s)?T9||(Ske(s),s.parentNode.removeChild(s)):(t.push(s.textContent),s.parentNode.removeChild(s))}return t.join("").trim()}window.ShadyDOM&&window.ShadyDOM.wrap;const CQ="css-build";function Cke(e){if(tw!==void 0)return tw;if(e.__cssBuild===void 0){const t=e.getAttribute(CQ);if(t)e.__cssBuild=t;else{const i=Ake(e);i!==""&&$ke(e),e.__cssBuild=i}}return e.__cssBuild||""}function nz(e){return Cke(e)!==""}function Ake(e){const t=e.localName==="template"?e.content.firstChild:e.firstChild;if(t instanceof Comment){const i=t.textContent.trim().split(":");if(i[0]===CQ)return i[1]}return""}function $ke(e){const t=e.localName==="template"?e.content.firstChild:e.firstChild;t.parentNode.removeChild(t)}const kke=/;\s*/m,Oke=/^\s*(initial)|(inherit)\s*$/,oz=/\s*!important/,R$="_-_";class Pke{constructor(){this._map={}}set(t,i){t=t.trim(),this._map[t]={properties:i,dependants:{}}}get(t){return t=t.trim(),this._map[t]||null}}let DS=null;class vn{constructor(){this._currentElement=null,this._measureElement=null,this._map=new Pke}detectMixin(t){return i6e(t)}gatherStyles(t){const i=Tke(t.content);if(i){const r=document.createElement("style");return r.textContent=i,t.content.insertBefore(r,t.content.firstChild),r}return null}transformTemplate(t,i){t._gatheredStyle===void 0&&(t._gatheredStyle=this.gatherStyles(t));const r=t._gatheredStyle;return r?this.transformStyle(r,i):null}transformStyle(t,i=""){let r=sz(t);return this.transformRules(r,i),t.textContent=L$(r),r}transformCustomStyle(t){let i=sz(t);return hb(i,r=>{r.selector===":root"&&(r.selector="html"),this.transformRule(r)}),t.textContent=L$(i),i}transformRules(t,i){this._currentElement=i,hb(t,r=>{this.transformRule(r)}),this._currentElement=null}transformRule(t){t.cssText=this.transformCssText(t.parsedCssText,t),t.selector===":root"&&(t.selector=":host > *")}transformCssText(t,i){return t=t.replace(b$,(r,s,o,c)=>this._produceCssProperties(r,s,o,c,i)),this._consumeCssProperties(t,i)}_getInitialValueForProperty(t){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(t)}_fallbacksFromPreviousRules(t){let i=t;for(;i.parent;)i=i.parent;const r={};let s=!1;return hb(i,o=>{s=s||o===t,s||o.selector===t.selector&&Object.assign(r,this._cssTextToMap(o.parsedCssText))}),r}_consumeCssProperties(t,i){let r=null;for(;r=$S.exec(t);){let s=r[0],o=r[1],c=r.index,u=c+s.indexOf("@apply"),g=c+s.length,b=t.slice(0,u),S=t.slice(g),E=i?this._fallbacksFromPreviousRules(i):{};Object.assign(E,this._cssTextToMap(b));let A=this._atApplyToCssProperties(o,E);t=`${b}${A}${S}`,$S.lastIndex=c+A.length}return t}_atApplyToCssProperties(t,i){t=t.replace(kke,"");let r=[],s=this._map.get(t);if(s||(this._map.set(t,{}),s=this._map.get(t)),s){let o,c,u;this._currentElement&&(s.dependants[this._currentElement]=!0);const g=s.properties;for(o in g)u=i&&i[o],c=[o,": var(",t,R$,o],u&&c.push(",",u.replace(oz,"")),c.push(")"),oz.test(g[o])&&c.push(" !important"),r.push(c.join(""))}return r.join("; ")}_replaceInitialOrInherit(t,i){let r=Oke.exec(i);return r&&(i=r[1]?this._getInitialValueForProperty(t):"apply-shim-inherit"),i}_cssTextToMap(t,i=!1){let r,s,o=t.split(";"),c={};for(let u,g,b=0;b<o.length;b++)u=o[b],u&&(g=u.split(":"),g.length>1&&(r=g[0].trim(),s=g.slice(1).join(":"),i&&(s=this._replaceInitialOrInherit(r,s)),c[r]=s));return c}_invalidateMixinEntry(t){if(DS)for(let i in t.dependants)i!==this._currentElement&&DS(i)}_produceCssProperties(t,i,r,s,o){if(r&&TQ(r,(z,q)=>{q&&this._map.get(q)&&(s=`@apply ${q};`)}),!s)return t;let c=this._consumeCssProperties(""+s,o),u=t.slice(0,t.indexOf("--")),g=this._cssTextToMap(c,!0),b=g,S=this._map.get(i),E=S&&S.properties;E?b=Object.assign(Object.create(E),g):this._map.set(i,b);let A,O,L=[],N=!1;for(A in b)O=g[A],O===void 0&&(O="initial"),E&&!(A in E)&&(N=!0),L.push(`${i}${R$}${A}: ${O}`);return N&&this._invalidateMixinEntry(S),S&&(S.properties=b),r&&(u=`${t};${u}`),`${u}${L.join("; ")};`}}vn.prototype.detectMixin=vn.prototype.detectMixin,vn.prototype.transformStyle=vn.prototype.transformStyle,vn.prototype.transformCustomStyle=vn.prototype.transformCustomStyle,vn.prototype.transformRules=vn.prototype.transformRules,vn.prototype.transformRule=vn.prototype.transformRule,vn.prototype.transformTemplate=vn.prototype.transformTemplate,vn.prototype._separator=R$,Object.defineProperty(vn.prototype,"invalidCallback",{get:()=>DS,set(e){DS=e}});const N$={},jS="_applyShimCurrentVersion",sg="_applyShimNextVersion",zS="_applyShimValidatingVersion",Fke=Promise.resolve();function Lke(e){let t=N$[e];t&&Rke(t)}function Rke(e){e[jS]=e[jS]||0,e[zS]=e[zS]||0,e[sg]=(e[sg]||0)+1}function AQ(e){return e[jS]===e[sg]}function Nke(e){return!AQ(e)&&e[zS]===e[sg]}function Dke(e){e[zS]=e[sg],e._validating||(e._validating=!0,Fke.then(function(){e[jS]=e[sg],e._validating=!1}))}const Tv=new vn;class jke{constructor(){this.customStyleInterface=null,Tv.invalidCallback=Lke}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=t=>{Tv.transformCustomStyle(t)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame(()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()})})}prepareTemplate(t,i){if(this.ensure(),nz(t))return;N$[i]=t;let r=Tv.transformTemplate(t,i);t._styleAst=r}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let t=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let i=0;i<t.length;i++){let r=t[i],s=this.customStyleInterface.getStyleForCustomStyle(r);s&&Tv.transformCustomStyle(s)}this.customStyleInterface.enqueued=!1}}styleSubtree(t,i){if(this.ensure(),i&&w$(t,i),t.shadowRoot){this.styleElement(t);let r=t.shadowRoot.children||t.shadowRoot.childNodes;for(let s=0;s<r.length;s++)this.styleSubtree(r[s])}else{let r=t.children||t.childNodes;for(let s=0;s<r.length;s++)this.styleSubtree(r[s])}}styleElement(t){this.ensure();let{is:i}=Mke(t),r=N$[i];if((!r||!nz(r))&&r&&!AQ(r)){Nke(r)||(this.prepareTemplate(r,i),Dke(r));let s=t.shadowRoot;if(s){let o=s.querySelector("style");o&&(o.__cssRules=r._styleAst,o.textContent=L$(r._styleAst))}}}styleDocument(t){this.ensure(),this.styleSubtree(document.body,t)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const e=new jke;let t=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(i,r,s){e.flushCustomStyles(),e.prepareTemplate(i,r)},prepareTemplateStyles(i,r,s){window.ShadyCSS.prepareTemplate(i,r,s)},prepareTemplateDom(i,r){},styleSubtree(i,r){e.flushCustomStyles(),e.styleSubtree(i,r)},styleElement(i){e.flushCustomStyles(),e.styleElement(i)},styleDocument(i){e.flushCustomStyles(),e.styleDocument(i)},getComputedStyleValue:(i,r)=>FX(i,r),flushCustomStyles(){e.flushCustomStyles()},nativeCss:w8,nativeShadow:T9,cssBuild:tw,disableRuntime:LX},t&&(window.ShadyCSS.CustomStyleInterface=t)}window.ShadyCSS.ApplyShim=Tv;const zke=/:host\(:dir\((ltr|rtl)\)\)/g,Vke=':host([dir="$1"])',Gke=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,Uke=':host([dir="$2"]) $1',qke=/:dir\((?:ltr|rtl)\)/,az=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),db=[];let pb=null,z8="";function $Q(){z8=document.documentElement.getAttribute("dir")}function kQ(e){e.__autoDirOptOut||e.setAttribute("dir",z8)}function OQ(){$Q(),z8=document.documentElement.getAttribute("dir");for(let e=0;e<db.length;e++)kQ(db[e])}function Bke(){pb&&pb.takeRecords().length&&OQ()}const Hke=No(e=>{az||pb||($Q(),pb=new MutationObserver(OQ),pb.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const t=tQ(e);class i extends t{static _processStyleText(s,o){return s=t._processStyleText.call(this,s,o),!az&&qke.test(s)&&(s=this._replaceDirInCssText(s),this.__activateDir=!0),s}static _replaceDirInCssText(s){let o=s;return o=o.replace(zke,Vke),o=o.replace(Gke,Uke),o}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){t.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(Bke(),db.push(this),kQ(this))}disconnectedCallback(){if(t.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const s=db.indexOf(this);s>-1&&db.splice(s,1)}}}return i.__activateDir=!1,i});function lz(){document.body.removeAttribute("unresolved")}function v1(e,t,i){return{index:e,removed:t,addedCount:i}}document.readyState==="interactive"||document.readyState==="complete"?lz():window.addEventListener("DOMContentLoaded",lz);const PQ=0,FQ=1,D$=2,j$=3;function Wke(e,t,i,r,s,o){let c=o-s+1,u=i-t+1,g=new Array(c);for(let b=0;b<c;b++)g[b]=new Array(u),g[b][0]=b;for(let b=0;b<u;b++)g[0][b]=b;for(let b=1;b<c;b++)for(let S=1;S<u;S++)if(V8(e[t+S-1],r[s+b-1]))g[b][S]=g[b-1][S-1];else{let E=g[b-1][S]+1,A=g[b][S-1]+1;g[b][S]=E<A?E:A}return g}function Jke(e){let t=e.length-1,i=e[0].length-1,r=e[t][i],s=[];for(;t>0||i>0;){if(t==0){s.push(D$),i--;continue}if(i==0){s.push(j$),t--;continue}let o,c=e[t-1][i-1],u=e[t-1][i],g=e[t][i-1];o=u<g?u<c?u:c:g<c?g:c,o==c?(c==r?s.push(PQ):(s.push(FQ),r=c),t--,i--):o==u?(s.push(j$),t--,r=u):(s.push(D$),i--,r=g)}return s.reverse(),s}function Yke(e,t,i,r,s,o){let c,u=0,g=0,b=Math.min(i-t,o-s);if(t==0&&s==0&&(u=Kke(e,r,b)),i==e.length&&o==r.length&&(g=Zke(e,r,b-u)),s+=u,o-=g,(i-=g)-(t+=u)==0&&o-s==0)return[];if(t==i){for(c=v1(t,[],0);s<o;)c.removed.push(r[s++]);return[c]}if(s==o)return[v1(t,[],i-t)];let S=Jke(Wke(e,t,i,r,s,o));c=void 0;let E=[],A=t,O=s;for(let L=0;L<S.length;L++)switch(S[L]){case PQ:c&&(E.push(c),c=void 0),A++,O++;break;case FQ:c||(c=v1(A,[],0)),c.addedCount++,A++,c.removed.push(r[O]),O++;break;case D$:c||(c=v1(A,[],0)),c.addedCount++,A++;break;case j$:c||(c=v1(A,[],0)),c.removed.push(r[O]),O++}return c&&E.push(c),E}function Kke(e,t,i){for(let r=0;r<i;r++)if(!V8(e[r],t[r]))return r;return i}function Zke(e,t,i){let r=e.length,s=t.length,o=0;for(;o<i&&V8(e[--r],t[--s]);)o++;return o}function LQ(e,t){return Yke(e,0,e.length,t,0,t.length)}function V8(e,t){return e===t}function J0(e){return e.localName==="slot"}let Mc=class{static getFlattenedNodes(e){const t=st(e);return J0(e)?t.assignedNodes({flatten:!0}):Array.from(t.childNodes).map(i=>J0(i)?st(i).assignedNodes({flatten:!0}):[i]).reduce((i,r)=>i.concat(r),[])}constructor(e,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=e,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){J0(this._target)?this._listenSlots([this._target]):st(this._target).children&&(this._listenSlots(st(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,e=>{this._processMutations(e)}):(this._nativeChildrenObserver=new MutationObserver(e=>{this._processMutations(e)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){J0(this._target)?this._unlistenSlots([this._target]):st(this._target).children&&(this._unlistenSlots(st(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,da.run(()=>this.flush()))}_processMutations(e){this._processSlotMutations(e),this.flush()}_processSlotMutations(e){if(e)for(let t=0;t<e.length;t++){let i=e[t];i.addedNodes&&this._listenSlots(i.addedNodes),i.removedNodes&&this._unlistenSlots(i.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let e={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),i=LQ(t,this._effectiveNodes);for(let s,o=0;o<i.length&&(s=i[o]);o++)for(let c,u=0;u<s.removed.length&&(c=s.removed[u]);u++)e.removedNodes.push(c);for(let s,o=0;o<i.length&&(s=i[o]);o++)for(let c=s.index;c<s.index+s.addedCount;c++)e.addedNodes.push(t[c]);this._effectiveNodes=t;let r=!1;return(e.addedNodes.length||e.removedNodes.length)&&(r=!0,this.callback.call(this._target,e)),r}_listenSlots(e){for(let t=0;t<e.length;t++){let i=e[t];J0(i)&&i.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(e){for(let t=0;t<e.length;t++){let i=e[t];J0(i)&&i.removeEventListener("slotchange",this._boundSchedule)}}};const Y0=Element.prototype,Xke=Y0.matches||Y0.matchesSelector||Y0.mozMatchesSelector||Y0.msMatchesSelector||Y0.oMatchesSelector||Y0.webkitMatchesSelector,RQ=function(e,t){return Xke.call(e,t)};class Mi{constructor(t){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(t),this.node=t}observeNodes(t){return new Mc(this.node,t)}unobserveNodes(t){t.disconnect()}notifyObserver(){}deepContains(t){if(st(this.node).contains(t))return!0;let i=t,r=t.ownerDocument;for(;i&&i!==r&&i!==this.node;)i=st(i).parentNode||st(i).host;return i===this.node}getOwnerRoot(){return st(this.node).getRootNode()}getDistributedNodes(){return this.node.localName==="slot"?st(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let t=[],i=st(this.node).assignedSlot;for(;i;)t.push(i),i=st(i).assignedSlot;return t}importNode(t,i){let r=this.node instanceof Document?this.node:this.node.ownerDocument;return st(r).importNode(t,i)}getEffectiveChildNodes(){return Mc.getFlattenedNodes(this.node)}queryDistributedElements(t){let i=this.getEffectiveChildNodes(),r=[];for(let s,o=0,c=i.length;o<c&&(s=i[o]);o++)s.nodeType===Node.ELEMENT_NODE&&RQ(s,t)&&r.push(s);return r}get activeElement(){let t=this.node;return t._activeElement!==void 0?t._activeElement:t.activeElement}}function Qke(e,t){for(let i=0;i<t.length;i++){let r=t[i];e[r]=function(){return this.node[r].apply(this.node,arguments)}}}function uz(e,t){for(let i=0;i<t.length;i++){let r=t[i];Object.defineProperty(e,r,{get:function(){return this.node[r]},configurable:!0})}}function e8e(e,t){for(let i=0;i<t.length;i++){let r=t[i];Object.defineProperty(e,r,{get:function(){return this.node[r]},set:function(s){this.node[r]=s},configurable:!0})}}class z${constructor(t){this.event=t}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}Mi.prototype.cloneNode,Mi.prototype.appendChild,Mi.prototype.insertBefore,Mi.prototype.removeChild,Mi.prototype.replaceChild,Mi.prototype.setAttribute,Mi.prototype.removeAttribute,Mi.prototype.querySelector,Mi.prototype.querySelectorAll,Mi.prototype.parentNode,Mi.prototype.firstChild,Mi.prototype.lastChild,Mi.prototype.nextSibling,Mi.prototype.previousSibling,Mi.prototype.firstElementChild,Mi.prototype.lastElementChild,Mi.prototype.nextElementSibling,Mi.prototype.previousElementSibling,Mi.prototype.childNodes,Mi.prototype.children,Mi.prototype.classList,Mi.prototype.textContent,Mi.prototype.innerHTML;let V$=Mi;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class e extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(Mi.prototype).forEach(t=>{t!="activeElement"&&(e.prototype[t]=Mi.prototype[t])}),uz(e.prototype,["classList"]),V$=e,Object.defineProperties(z$.prototype,{localTarget:{get(){const t=this.event.currentTarget,i=t&&Sd(t).getOwnerRoot(),r=this.path;for(let s=0;s<r.length;s++){const o=r[s];if(Sd(o).getOwnerRoot()===i)return o}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else Qke(Mi.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),uz(Mi.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),e8e(Mi.prototype,["textContent","innerHTML","className"]);const Sd=function(e){if((e=e||document)instanceof V$||e instanceof z$)return e;let t=e.__domApi;return t||(t=e instanceof Event?new z$(e):new V$(e),e.__domApi=t),t},f4=window.ShadyDOM,cz=window.ShadyCSS;function hz(e,t){return st(e).getRootNode()===t}function t8e(e,t=!1){if(!f4||!cz||!f4.handlesDynamicScoping)return null;const i=cz.ScopingShim;if(!i)return null;const r=i.scopeForNode(e),s=st(e).getRootNode(),o=c=>{if(!hz(c,s))return;const u=Array.from(f4.nativeMethods.querySelectorAll.call(c,"*"));u.push(c);for(let g=0;g<u.length;g++){const b=u[g];if(!hz(b,s))continue;const S=i.currentScopeForNode(b);S!==r&&(S!==""&&i.unscopeNode(b,S),i.scopeNode(b,r))}};if(o(e),t){const c=new MutationObserver(u=>{for(let g=0;g<u.length;g++){const b=u[g];for(let S=0;S<b.addedNodes.length;S++){const E=b.addedNodes[S];E.nodeType===Node.ELEMENT_NODE&&o(E)}}});return c.observe(e,{childList:!0,subtree:!0}),c}return null}const m4="disable-upgrade",NQ=e=>{for(;e;){const t=Object.getOwnPropertyDescriptor(e,"observedAttributes");if(t)return t.get;e=Object.getPrototypeOf(e.prototype).constructor}return()=>[]};No(e=>{const t=k9(e);let i=NQ(t);class r extends t{constructor(){super(),this.__isUpgradeDisabled}static get observedAttributes(){return i.call(this).concat(m4)}_initializeProperties(){this.hasAttribute(m4)?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(o){return super._canApplyPropertyDefault(o)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(o))}attributeChangedCallback(o,c,u,g){o==m4?this.__isUpgradeDisabled&&u==null&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,st(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(o,c,u,g)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}return r});const E2="disable-upgrade";let i8e=window.ShadyCSS;const DQ=No(e=>{const t=o_(k9(e)),i=k$?t:Hke(t),r=NQ(i),s={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class o extends i{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this.__isUpgradeDisabled,this.__needsAttributesAtConnected,this._legacyForceObservedAttributes}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(u,g,b){(this.__dataAttributes&&this.__dataAttributes[u]||u===E2)&&this.attributeChangedCallback(u,g,b,null)}setAttribute(u,g){if(x2&&!this._legacyForceObservedAttributes){const b=this.getAttribute(u);super.setAttribute(u,g),this.__attributeReaction(u,b,String(g))}else super.setAttribute(u,g)}removeAttribute(u){if(x2&&!this._legacyForceObservedAttributes){const g=this.getAttribute(u);super.removeAttribute(u),this.__attributeReaction(u,g,null)}else super.removeAttribute(u)}static get observedAttributes(){return x2&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],this.prototype,void 0),this.__observedAttributes):r.call(this).concat(E2)}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(u){return super._canApplyPropertyDefault(u)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(u))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(u,g,b,S){g!==b&&(u==E2?this.__isUpgradeDisabled&&b==null&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,st(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(u,g,b,S),this.attributeChanged(u,g,b)))}attributeChanged(u,g,b){}_initializeProperties(){if(iw&&this.hasAttribute(E2))this.__isUpgradeDisabled=!0;else{let u=Object.getPrototypeOf(this);u.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",u))||(this._registered(),u.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),x2&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){const u=this.attributes;for(let g=0,b=u.length;g<b;g++){const S=u[g];this.__attributeReaction(S.name,null,S.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(u){return this._serializeValue(u)}deserialize(u,g){return this._deserializeValue(u,g)}reflectPropertyToAttribute(u,g,b){this._propertyToAttribute(u,g,b)}serializeValueToAttribute(u,g,b){this._valueToNodeAttribute(b||this,u,g)}extend(u,g){if(!u||!g)return u||g;let b=Object.getOwnPropertyNames(g);for(let S,E=0;E<b.length&&(S=b[E]);E++){let A=Object.getOwnPropertyDescriptor(g,S);A&&Object.defineProperty(u,S,A)}return u}mixin(u,g){for(let b in g)u[b]=g[b];return u}chainObject(u,g){return u&&g&&u!==g&&(u.__proto__=g),u}instanceTemplate(u){let g=this.constructor._contentForTemplate(u);return document.importNode(g,!0)}fire(u,g,b){b=b||{},g=g!=null?g:{};let S=new Event(u,{bubbles:b.bubbles===void 0||b.bubbles,cancelable:Boolean(b.cancelable),composed:b.composed===void 0||b.composed});S.detail=g;let E=b.node||this;return st(E).dispatchEvent(S),S}listen(u,g,b){u=u||this;let S=this.__boundListeners||(this.__boundListeners=new WeakMap),E=S.get(u);E||(E={},S.set(u,E));let A=g+b;E[A]||(E[A]=this._addMethodEventListenerToNode(u,g,b,this))}unlisten(u,g,b){u=u||this;let S=this.__boundListeners&&this.__boundListeners.get(u),E=g+b,A=S&&S[E];A&&(this._removeEventListenerFromNode(u,g,A),S[E]=null)}setScrollDirection(u,g){fQ(g||this,s[u]||"auto")}$$(u){return this.root.querySelector(u)}get domHost(){let u=st(this).getRootNode();return u instanceof DocumentFragment?u.host:u}distributeContent(){const u=Sd(this);window.ShadyDOM&&u.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return Sd(this).getEffectiveChildNodes()}queryDistributedElements(u){return Sd(this).queryDistributedElements(u)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter(function(u){return u.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let u=this.getEffectiveChildNodes(),g=[];for(let b,S=0;b=u[S];S++)b.nodeType!==Node.COMMENT_NODE&&g.push(b.textContent);return g.join("")}queryEffectiveChildren(u){let g=this.queryDistributedElements(u);return g&&g[0]}queryAllEffectiveChildren(u){return this.queryDistributedElements(u)}getContentChildNodes(u){let g=this.root.querySelector(u||"slot");return g?Sd(g).getDistributedNodes():[]}getContentChildren(u){return this.getContentChildNodes(u).filter(function(g){return g.nodeType===Node.ELEMENT_NODE})}isLightDescendant(u){const g=this;return g!==u&&st(g).contains(u)&&st(g).getRootNode()===st(u).getRootNode()}isLocalDescendant(u){return this.root===st(u).getRootNode()}scopeSubtree(u,g=!1){return t8e(u,g)}getComputedStyleValue(u){return i8e.getComputedStyleValue(this,u)}debounce(u,g,b){return this._debouncers=this._debouncers||{},this._debouncers[u]=br.debounce(this._debouncers[u],b>0?hl.after(b):da,g.bind(this))}isDebouncerActive(u){this._debouncers=this._debouncers||{};let g=this._debouncers[u];return!(!g||!g.isActive())}flushDebouncer(u){this._debouncers=this._debouncers||{};let g=this._debouncers[u];g&&g.flush()}cancelDebouncer(u){this._debouncers=this._debouncers||{};let g=this._debouncers[u];g&&g.cancel()}async(u,g){return g>0?hl.run(u.bind(this),g):~da.run(u.bind(this))}cancelAsync(u){u<0?da.cancel(~u):hl.cancel(u)}create(u,g){let b=document.createElement(u);if(g)if(b.setProperties)b.setProperties(g);else for(let S in g)b[S]=g[S];return b}elementMatches(u,g){return RQ(g||this,u)}toggleAttribute(u,g){let b=this;return arguments.length===3&&(b=arguments[2]),arguments.length==1&&(g=!b.hasAttribute(u)),g?(st(b).setAttribute(u,""),!0):(st(b).removeAttribute(u),!1)}toggleClass(u,g,b){b=b||this,arguments.length==1&&(g=!b.classList.contains(u)),g?b.classList.add(u):b.classList.remove(u)}transform(u,g){(g=g||this).style.webkitTransform=u,g.style.transform=u}translate3d(u,g,b,S){S=S||this,this.transform("translate3d("+u+","+g+","+b+")",S)}arrayDelete(u,g){let b;if(Array.isArray(u)){if(b=u.indexOf(g),b>=0)return u.splice(b,1)}else if(b=Sn(this,u).indexOf(g),b>=0)return this.splice(u,b,1);return null}_logger(u,g){switch(Array.isArray(g)&&g.length===1&&Array.isArray(g[0])&&(g=g[0]),u){case"log":case"warn":case"error":console[u](...g)}}_log(...u){this._logger("log",u)}_warn(...u){this._logger("warn",u)}_error(...u){this._logger("error",u)}_logf(u,...g){return["[%s::%s]",this.is,u,...g]}}return o.prototype.is="",o}),r8e={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},jQ={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},s8e=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},jQ);function n8e(e,t,i){const r=e._noAccessors,s=Object.getOwnPropertyNames(e);for(let o=0;o<s.length;o++){let c=s[o];if(!(c in i))if(r)t[c]=e[c];else{let u=Object.getOwnPropertyDescriptor(e,c);u&&(u.configurable=!0,Object.defineProperty(t,c,u))}}}function o8e(e,t,i){for(let r=0;r<t.length;r++)zQ(e,t[r],i,s8e)}function zQ(e,t,i,r){n8e(t,e,r);for(let s in r8e)t[s]&&(i[s]=i[s]||[],i[s].push(t[s]))}function VQ(e,t,i){t=t||[];for(let r=e.length-1;r>=0;r--){let s=e[r];s?Array.isArray(s)?VQ(s,t):t.indexOf(s)<0&&(!i||i.indexOf(s)<0)&&t.unshift(s):console.warn("behavior is null, check for missing or 404 import")}return t}function dz(e,t){for(const i in t){const r=e[i],s=t[i];e[i]=!("value"in s)&&r&&"value"in r?Object.assign({value:r.value},s):s}}const pz=DQ(HTMLElement);function a8e(e,t,i){let r;const s={};class o extends t{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(r)for(let g,b=0;b<r.length;b++)g=r[b],g.properties&&this.createProperties(g.properties),g.observers&&this.createObservers(g.observers,g.properties);e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties),this._prepareTemplate()}else t._finalizeClass.call(this)}static get properties(){const g={};if(r)for(let b=0;b<r.length;b++)dz(g,r[b].properties);return dz(g,e.properties),g}static get observers(){let g=[];if(r)for(let b,S=0;S<r.length;S++)b=r[S],b.observers&&(g=g.concat(b.observers));return e.observers&&(g=g.concat(e.observers)),g}created(){super.created();const g=s.created;if(g)for(let b=0;b<g.length;b++)g[b].call(this)}_registered(){const g=o.prototype;if(!g.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",g))){g.__hasRegisterFinished=!0,super._registered(),iw&&c(g);const b=Object.getPrototypeOf(this);let S=s.beforeRegister;if(S)for(let E=0;E<S.length;E++)S[E].call(b);if(S=s.registered,S)for(let E=0;E<S.length;E++)S[E].call(b)}}_applyListeners(){super._applyListeners();const g=s.listeners;if(g)for(let b=0;b<g.length;b++){const S=g[b];if(S)for(let E in S)this._addMethodEventListenerToNode(this,E,S[E])}}_ensureAttributes(){const g=s.hostAttributes;if(g)for(let b=g.length-1;b>=0;b--){const S=g[b];for(let E in S)this._ensureAttribute(E,S[E])}super._ensureAttributes()}ready(){super.ready();let g=s.ready;if(g)for(let b=0;b<g.length;b++)g[b].call(this)}attached(){super.attached();let g=s.attached;if(g)for(let b=0;b<g.length;b++)g[b].call(this)}detached(){super.detached();let g=s.detached;if(g)for(let b=0;b<g.length;b++)g[b].call(this)}attributeChanged(g,b,S){super.attributeChanged();let E=s.attributeChanged;if(E)for(let A=0;A<E.length;A++)E[A].call(this,g,b,S)}}if(i){Array.isArray(i)||(i=[i]);let u=t.prototype.behaviors;r=VQ(i,null,u),o.prototype.behaviors=u?u.concat(i):r}const c=u=>{r&&o8e(u,r,s),zQ(u,e,s,jQ)};return iw||c(o.prototype),o.generatedFrom=e,o}const l8e=function(e,t){e||console.warn("Polymer.Class requires `info` argument");let i=t?t(pz):pz;return i=a8e(e,i,e.behaviors),i.is=i.prototype.is=e.is,i};function G8(e,t,i,r,s){let o;s&&(o=typeof i=="object"&&i!==null,o&&(r=e.__dataTemp[t]));let c=r!==i&&(r==r||i==i);return o&&c&&(e.__dataTemp[t]=i),c}const U8=No(e=>{class t extends e{_shouldPropertyChange(r,s,o){return G8(this,r,s,o,!0)}}return t}),GQ=No(e=>{class t extends e{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(r,s,o){return G8(this,r,s,o,this.mutableData)}}return t});U8._mutablePropertyChange=G8;let G$=null;function U$(){return G$}U$.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:U$,writable:!0}});const UQ=$9(U$),u8e=U8(UQ);function c8e(e,t){G$=e,Object.setPrototypeOf(e,t.prototype),new t,G$=null}const h8e=$9(class{});function qQ(e,t){for(let i=0;i<t.length;i++){let r=t[i];if(Boolean(e)!=Boolean(r.__hideTemplateChildren__))if(r.nodeType===Node.TEXT_NODE)e?(r.__polymerTextContent__=r.textContent,r.textContent=""):r.textContent=r.__polymerTextContent__;else if(r.localName==="slot")if(e)r.__polymerReplaced__=document.createComment("hidden-slot"),st(st(r).parentNode).replaceChild(r.__polymerReplaced__,r);else{const s=r.__polymerReplaced__;s&&st(st(s).parentNode).replaceChild(r,s)}else r.style&&(e?(r.__polymerDisplay__=r.style.display,r.style.display="none"):r.style.display=r.__polymerDisplay__);r.__hideTemplateChildren__=e,r._showHideChildren&&r._showHideChildren(e)}}class ud extends h8e{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let i=[];this.children=i;for(let s=this.root.firstChild;s;s=s.nextSibling)i.push(s),s.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let r=this.__templatizeOptions;(t&&r.instanceProps||!r.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let i in this.__hostProps)this._setPendingProperty(i,this.__dataHost["_host_"+i]);for(let i in t)this._setPendingProperty(i,t[i])}forwardHostProp(t,i){this._setPendingPropertyOrPath(t,i,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,i,r){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,i,s=>{s.model=this,r(s)});else{let s=this.__dataHost.__dataHost;s&&s._addEventListenerToNode(t,i,r)}}_showHideChildren(t){qQ(t,this.children)}_setUnmanagedPropertyToNode(t,i,r){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&i=="textContent"?t.__polymerTextContent__=r:super._setUnmanagedPropertyToNode(t,i,r)}get parentModel(){let t=this.__parentModel;if(!t){let i;t=this;do t=t.__dataHost.__dataHost;while((i=t.__templatizeOptions)&&!i.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}ud.prototype.__dataHost,ud.prototype.__templatizeOptions,ud.prototype._methodHost,ud.prototype.__templatizeOwner,ud.prototype.__hostProps;const d8e=U8(ud);function fz(e){let t=e.__dataHost;return t&&t._methodHost||t}function p8e(e,t,i){let r=i.mutableData?d8e:ud;hw.mixin&&(r=hw.mixin(r));let s=class extends r{};return s.prototype.__templatizeOptions=i,s.prototype._bindTemplate(e),y8e(s,e,t,i),s}function f8e(e,t,i,r){let s=i.forwardHostProp;if(s&&t.hasHostProps){const o=e.localName=="template";let c=t.templatizeTemplateClass;if(!c){if(o){let g=i.mutableData?u8e:UQ;class b extends g{}c=t.templatizeTemplateClass=b}else{const g=e.constructor;class b extends g{}c=t.templatizeTemplateClass=b}let u=t.hostProps;for(let g in u)c.prototype._addPropertyEffect("_host_"+g,c.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:m8e(g,s)}),c.prototype._createNotifyingProperty("_host_"+g);RX&&r&&b8e(t,i,r)}if(e.__dataProto&&Object.assign(e.__data,e.__dataProto),o)c8e(e,c),e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties();else{Object.setPrototypeOf(e,c.prototype);const u=t.hostProps;for(let g in u)if(g="_host_"+g,g in e){const b=e[g];delete e[g],e.__data[g]=b}}}}function m8e(e,t){return function(i,r,s){t.call(i.__templatizeOwner,r.substring(6),s[r])}}function y8e(e,t,i,r){let s=i.hostProps||{};for(let o in r.instanceProps){delete s[o];let c=r.notifyInstanceProp;c&&e.prototype._addPropertyEffect(o,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:g8e(o,c)})}if(r.forwardHostProp&&t.__dataHost)for(let o in s)i.hasHostProps||(i.hasHostProps=!0),e.prototype._addPropertyEffect(o,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:v8e()})}function g8e(e,t){return function(i,r,s){t.call(i.__templatizeOwner,i,r,s[r])}}function v8e(){return function(e,t,i){e.__dataHost._setPendingPropertyOrPath("_host_"+t,i[t],!0,!0)}}function hw(e,t,i){if(tg&&!fz(e))throw new Error("strictTemplatePolicy: template owner not trusted");if(i=i||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let r=(t?t.constructor:ud)._parseTemplate(e),s=r.templatizeInstanceClass;s||(s=p8e(e,r,i),r.templatizeInstanceClass=s);const o=fz(e);f8e(e,r,i,o);let c=class extends s{};return c.prototype._methodHost=o,c.prototype.__dataHost=e,c.prototype.__templatizeOwner=t,c.prototype.__hostProps=r.hostProps,c}function b8e(e,t,i){const r=i.constructor._properties,{propertyEffects:s}=e,{instanceProps:o}=t;for(let c in s)if(!(r[c]||o&&o[c])){const u=s[c];for(let g=0;g<u.length;g++){const{part:b}=u[g].info;if(!b.signature||!b.signature.static){console.warn(`Property '${c}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}function w8e(e,t){let i;for(;t;)if(i=t.__dataHost?t:t.__templatizeInstance){if(i.__dataHost==e)return i;t=i.__dataHost}else t=st(t).parentNode;return null}let mz=!1;function q8(){if(iw&&!S8){if(!mz){mz=!0;const e=document.createElement("style");e.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(e)}return!0}return!1}const _8e=o_(GQ($9(HTMLElement)));class x8e extends _8e{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),tg)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(t,i,r,s){this.mutableData=!0}connectedCallback(){q8()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){st(st(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let t=0;t<this.__children.length;t++)this.root.appendChild(this.__children[t])}render(){let t;if(!this.__children){if(t=t||this.querySelector("template"),!t){let i=new MutationObserver(()=>{if(t=this.querySelector("template"),!t)throw new Error("dom-bind requires a <template> child");i.disconnect(),this.render()});return void i.observe(this,{childList:!0})}this.root=this._stampTemplate(t),this.$=this.root.$,this.__children=[];for(let i=this.root.firstChild;i;i=i.nextSibling)this.__children[this.__children.length]=i;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}}customElements.define("dom-bind",x8e);const S8e=GQ(jc);class yz extends S8e{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!x$,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let t=0;t<this.__instances.length;t++)this.__detachInstance(t)}connectedCallback(){if(super.connectedCallback(),q8()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let t=st(st(this).parentNode);for(let i=0;i<this.__instances.length;i++)this.__attachInstance(i,t)}}__ensureTemplatized(){if(!this.__ctor){const t=this;let i=this.template=t._templateInfo?t:this.querySelector("template");if(!i){let s=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");s.disconnect(),this.__render()});return s.observe(this,{childList:!0}),!1}let r={};r[this.as]=!0,r[this.indexAs]=!0,r[this.itemsIndexAs]=!0,this.__ctor=hw(i,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:r,forwardHostProp:function(s,o){let c=this.__instances;for(let u,g=0;g<c.length&&(u=c[g]);g++)u.forwardHostProp(s,o)},notifyInstanceProp:function(s,o,c){if(U6e(this.as,o)){let u=s[this.itemsIndexAs];o==this.as&&(this.items[u]=c);let g=aw(this.as,`${JSCompiler_renameProperty("items",this)}.${u}`,o);this.notifyPath(g,c)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(t){if(typeof t=="string"){let i=t,r=this.__getMethodHost();return function(){return r[i].apply(r,arguments)}}return t}__sortChanged(t){this.__sortFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__filterChanged(t){this.__filterFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(t){return Math.ceil(1e3/t)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(t){if(this.__sortFn||this.__filterFn)if(t){if(this.__observePaths){let i=this.__observePaths;for(let r=0;r<i.length;r++)t.indexOf(i[r])===0&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(t){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(t.path,t.value)||(t.path==="items"&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(t,i=0){this.__renderDebouncer=br.debounce(this.__renderDebouncer,i>0?hl.after(i):da,t.bind(this)),O9(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),rg()}__render(){if(!this.__ensureTemplatized())return;let t=this.items||[];const i=this.__sortAndFilterItems(t),r=this.__calculateLimit(i.length);this.__updateInstances(t,r,i),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame(()=>this.__continueChunking())),this._setRenderedItemCount(this.__instances.length),x$&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(t){let i=new Array(t.length);for(let r=0;r<t.length;r++)i[r]=r;return this.__filterFn&&(i=i.filter((r,s,o)=>this.__filterFn(t[r],s,o))),this.__sortFn&&i.sort((r,s)=>this.__sortFn(t[r],t[s])),i}__calculateLimit(t){let i=t;const r=this.__instances.length;if(this.initialCount){let s;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(i=Math.min(t,this.initialCount),s=Math.max(i-r,0),this.__chunkCount=s||1):(s=Math.min(Math.max(t-r,0),this.__chunkCount),i=Math.min(r+s,t)),this.__shouldMeasureChunk=s===this.__chunkCount,this.__shouldContinueChunking=i<t,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,i}__continueChunking(){if(this.__shouldMeasureChunk){const t=performance.now()-this.__renderStartTime,i=this._targetFrameTime/t;this.__chunkCount=Math.round(this.__chunkCount*i)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(t,i,r){const s=this.__itemsIdxToInstIdx={};let o;for(o=0;o<i;o++){let c=this.__instances[o],u=r[o],g=t[u];s[u]=o,c?(c._setPendingProperty(this.as,g),c._setPendingProperty(this.indexAs,o),c._setPendingProperty(this.itemsIndexAs,u),c._flushProperties()):this.__insertInstance(g,o,u)}for(let c=this.__instances.length-1;c>=o;c--)this.__detachAndRemoveInstance(c)}__detachInstance(t){let i=this.__instances[t];const r=st(i.root);for(let s=0;s<i.children.length;s++){let o=i.children[s];r.appendChild(o)}return i}__attachInstance(t,i){let r=this.__instances[t];i.insertBefore(r.root,this)}__detachAndRemoveInstance(t){this.__detachInstance(t),this.__instances.splice(t,1)}__stampInstance(t,i,r){let s={};return s[this.as]=t,s[this.indexAs]=i,s[this.itemsIndexAs]=r,new this.__ctor(s)}__insertInstance(t,i,r){const s=this.__stampInstance(t,i,r);let o=this.__instances[i+1],c=o?o.children[0]:this;return st(st(this).parentNode).insertBefore(s.root,c),this.__instances[i]=s,s}_showHideChildren(t){for(let i=0;i<this.__instances.length;i++)this.__instances[i]._showHideChildren(t)}__handleItemPath(t,i){let r=t.slice(6),s=r.indexOf("."),o=s<0?r:r.substring(0,s);if(o==parseInt(o,10)){let c=s<0?"":r.substring(s+1);this.__handleObservedPaths(c);let u=this.__itemsIdxToInstIdx[o],g=this.__instances[u];if(g){let b=this.as+(c?"."+c:"");g._setPendingPropertyOrPath(b,i,!1,!0),g._flushProperties()}return!0}}itemForElement(t){let i=this.modelForElement(t);return i&&i[this.as]}indexForElement(t){let i=this.modelForElement(t);return i&&i[this.indexAs]}modelForElement(t){return w8e(this.template,t)}}customElements.define(yz.is,yz);class BQ extends jc{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=br.debounce(this.__renderDebouncer,da,()=>this.__render()),O9(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const t=st(this).parentNode;t&&(t.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||st(t).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),q8()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const t=this;let i=t._templateInfo?t:st(t).querySelector("template");if(!i){let r=new MutationObserver(()=>{if(!st(this).querySelector("template"))throw new Error("dom-if requires a <template> child");r.disconnect(),this.__render()});return r.observe(this,{childList:!0}),!1}this.__template=i}return!0}__ensureInstance(){let t=st(this).parentNode;if(this.__hasInstance()){let i=this.__getInstanceNodes();if(i&&i.length&&st(this).previousSibling!==i[i.length-1])for(let r,s=0;s<i.length&&(r=i[s]);s++)st(t).insertBefore(r,this)}else{if(!t||!this.__ensureTemplate())return!1;this.__createAndInsertInstance(t)}return!0}render(){rg()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),x$&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(t){}__teardownInstance(){}_showHideChildren(){}}class I8e extends BQ{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(t){const i=this.__dataHost||this;if(tg&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const r=i._bindTemplate(this.__template,!0);r.runEffects=(s,o,c)=>{let u=this.__syncInfo;if(this.if)u&&(this.__syncInfo=null,this._showHideChildren(),o=Object.assign(u.changedProps,o)),s(o,c);else if(this.__instance)if(u||(u=this.__syncInfo={runEffects:s,changedProps:{}}),c)for(const g in o){const b=Dc(g);u.changedProps[b]=this.__dataHost[b]}else Object.assign(u.changedProps,o)},this.__instance=i._stampTemplate(this.__template,r),st(t).insertBefore(this.__instance,this)}__syncHostProperties(){const t=this.__syncInfo;t&&(this.__syncInfo=null,t.runEffects(t.changedProps,!1))}__teardownInstance(){const t=this.__dataHost||this;this.__instance&&(t._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==t&&(this.__instance.__hidden=t,qQ(t,this.__instance.templateInfo.childNodes)),t||this.__syncHostProperties()}}class E8e extends BQ{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(t){this.__ctor||(this.__ctor=hw(this.__template,this,{mutableData:!0,forwardHostProp:function(i,r){this.__instance&&(this.if?this.__instance.forwardHostProp(i,r):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Dc(i)]=!0))}})),this.__instance=new this.__ctor,st(t).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let t=this.__instance.children;if(t&&t.length){let i=st(t[0]).parentNode;if(i){i=st(i);for(let r,s=0;s<t.length&&(r=t[s]);s++)i.removeChild(r)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let t=this.__invalidProps;if(t){this.__invalidProps=null;for(let i in t)this.__instance._setPendingProperty(i,this.__dataHost[i]);this.__instance._flushProperties()}}_showHideChildren(){const t=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==t&&(this.__instance.__hidden=t,this.__instance._showHideChildren(t)),t||this.__syncHostProperties()}}const gz=NX?I8e:E8e;customElements.define(gz.is,gz);let M8e=No(e=>{let t=k9(e);class i extends t{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(s,o){let c=o.path;if(c==JSCompiler_renameProperty("items",this)){let u=o.base||[],g=this.__lastItems;if(s!==this.__lastMulti&&this.clearSelection(),g){let b=LQ(u,g);this.__applySplices(b)}this.__lastItems=u,this.__lastMulti=s}else if(o.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(o.value.indexSplices);else{let u=c.slice(`${JSCompiler_renameProperty("items",this)}.`.length),g=parseInt(u,10);u.indexOf(".")<0&&u==g&&this.__deselectChangedIdx(g)}}__applySplices(s){let o=this.__selectedMap;for(let u=0;u<s.length;u++){let g=s[u];o.forEach((b,S)=>{b<g.index||(b>=g.index+g.removed.length?o.set(S,b+g.addedCount-g.removed.length):o.set(S,-1))});for(let b=0;b<g.addedCount;b++){let S=g.index+b;o.has(this.items[S])&&o.set(this.items[S],S)}}this.__updateLinks();let c=0;o.forEach((u,g)=>{u<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),c,1):this.selected=this.selectedItem=null,o.delete(g)):c++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let s=0;this.__selectedMap.forEach(o=>{o>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${o}`,`${JSCompiler_renameProperty("selected",this)}.${s++}`)})}else this.__selectedMap.forEach(s=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${s}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${s}`)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(s){return this.__selectedMap.has(s)}isIndexSelected(s){return this.isSelected(this.items[s])}__deselectChangedIdx(s){let o=this.__selectedIndexForItemIndex(s);if(o>=0){let c=0;this.__selectedMap.forEach((u,g)=>{o==c++&&this.deselect(g)})}}__selectedIndexForItemIndex(s){let o=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${s}`];if(o)return parseInt(o.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(s){let o=this.__selectedMap.get(s);if(o>=0){let c;this.__selectedMap.delete(s),this.multi&&(c=this.__selectedIndexForItemIndex(o)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),c,1):this.selected=this.selectedItem=null}}deselectIndex(s){this.deselect(this.items[s])}select(s){this.selectIndex(this.items.indexOf(s))}selectIndex(s){let o=this.items[s];this.isSelected(o)?this.toggle&&this.deselectIndex(s):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(o,s),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),o):this.selected=this.selectedItem=o)}}return i})(jc);class vz extends M8e{static get is(){return"array-selector"}static get template(){return null}}customElements.define(vz.is,vz);const K0=DQ(HTMLElement).prototype;var M2=new Set;const T8e={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(M2.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(e){this.resizerShouldNotify(e)&&this._notifyDescendant(e)},this),this._fireResize())},assignParentResizable:function(e){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=e,e&&e._interestedResizables.indexOf(this)===-1&&(e._interestedResizables.push(this),e._subscribeIronResize(this))},stopResizeNotificationsFor:function(e){var t=this._interestedResizables.indexOf(e);t>-1&&(this._interestedResizables.splice(t,1),this._unsubscribeIronResize(e))},_subscribeIronResize:function(e){e.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(e){e.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(e){return!0},_onDescendantIronResize:function(e){this._notifyingDescendant?e.stopPropagation():S8||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(e){var t=Sd(e).rootTarget;t!==this&&(t.assignParentResizable(this),this._notifyDescendant(t),e.stopPropagation())},_parentResizableChanged:function(e){e&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(e){this.isAttached&&(this._notifyingDescendant=!0,e.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if(document.readyState==="loading"){var e=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function t(){document.removeEventListener("readystatechange",t),e()})}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach(function(t){t!==this&&t._findParent()},this):(M2.forEach(function(t){t!==this&&t._findParent()},this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?M2.delete(this):M2.add(this)}},C8e={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:["_scrollTargetChanged(scrollTarget, isAttached)"],_shouldHaveListener:!0,_scrollTargetChanged:function(e,t){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),t)if(e==="document")this.scrollTarget=this._doc;else if(typeof e=="string"){var i=this.domHost;this.scrollTarget=i&&i.$?i.$[e]:Sd(this.ownerDocument).querySelector("#"+e)}else this._isValidScrollTarget()&&(this._oldScrollTarget=e,this._toggleScrollListener(this._shouldHaveListener,e))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(e){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,e):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=e)},set _scrollLeft(e){this.scrollTarget===this._doc?window.scrollTo(e,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=e)},scroll:function(e,t){var i;typeof e=="object"?(i=e.left,t=e.top):i=e,i=i||0,t=t||0,this.scrollTarget===this._doc?window.scrollTo(i,t):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=i,this.scrollTarget.scrollTop=t)},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(e,t){var i=t===this._doc?window:t;e?this._boundScrollHandler||(this._boundScrollHandler=this._scrollHandler.bind(this),i.addEventListener("scroll",this._boundScrollHandler)):this._boundScrollHandler&&(i.removeEventListener("scroll",this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(e){this._shouldHaveListener=e,this._toggleScrollListener(e,this.scrollTarget)}},bz=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),A8e=bz&&bz[1]>=8,wz=3,$8e=l8e({behaviors:[T8e,C8e],_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedVirtualIndex:-1,_templateCost:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},set _virtualStart(e){e=this._clamp(e,0,this._maxVirtualStart),this._virtualStartVal=e},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(e){(e%=this._physicalCount)<0&&(e=this._physicalCount+e),this._physicalStartVal=e},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(e){this._physicalCountVal=e},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this._viewportHeight===0?1/0:this._viewportHeight*this._maxPages},get _isVisible(){return Boolean(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){let e=this._firstVisibleIndexVal;if(e==null){let t=this._physicalTop+this._scrollOffset;e=this._iterateItems(function(i,r){if(t+=this._physicalSizes[i],t>this._scrollPosition)return r})||0,this._firstVisibleIndexVal=e}return e},get lastVisibleIndex(){let e=this._lastVisibleIndexVal;if(e==null){let t=this._physicalTop+this._scrollOffset;this._iterateItems(function(i,r){t<this._scrollBottom&&(e=r),t+=this._physicalSizes[i]}),this._lastVisibleIndexVal=e}return e},get _scrollOffset(){return this._scrollerPaddingTop},attached:function(){this._debounce("_render",this._render,Ic),this.listen(this,"iron-resize","_resizeHandler")},detached:function(){this.unlisten(this,"iron-resize","_resizeHandler")},updateViewportBoundaries:function(){const e=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(e["padding-top"],10),this._isRTL=Boolean(e.direction==="rtl"),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight},_scrollHandler:function(){const e=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop));let t=e-this._scrollPosition;const i=t>=0;if(this._scrollPosition=e,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(t)>this._physicalSize&&this._physicalSize>0){t-=this._scrollOffset;const r=Math.round(t/this._physicalAverage);this._virtualStart=this._virtualStart+r,this._physicalStart=this._physicalStart+r,this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage,this._update()}else if(this._physicalCount>0){const{physicalTop:r,indexes:s}=this._getReusables(i);i?(this._physicalTop=r,this._virtualStart=this._virtualStart+s.length,this._physicalStart=this._physicalStart+s.length):(this._virtualStart=this._virtualStart-s.length,this._physicalStart=this._physicalStart-s.length),this._update(s,i?null:s),this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,0),da)}},_getReusables:function(e){let t,i,r;const s=[],o=this._hiddenContentSize*this._ratio,c=this._virtualStart,u=this._virtualEnd,g=this._physicalCount;let b=this._physicalTop+this._scrollOffset;const S=this._physicalBottom+this._scrollOffset,E=this._scrollTop,A=this._scrollBottom;for(e?(t=this._physicalStart,i=E-b):(t=this._physicalEnd,i=S-A);r=this._physicalSizes[t],i-=r,!(s.length>=g||i<=o);)if(e){if(u+s.length+1>=this._virtualCount||b+r>=E-this._scrollOffset)break;s.push(t),b+=r,t=(t+1)%g}else{if(c-s.length<=0||b+this._physicalSize-r<=A)break;s.push(t),b-=r,t=t===0?g-1:t-1}return{indexes:s,physicalTop:b-this._scrollOffset}},_update:function(e,t){if(!(e&&e.length===0||this._physicalCount===0)){if(this._assignModels(e),this._updateMetrics(e),t)for(;t.length;){const i=t.pop();this._physicalTop-=this._physicalSizes[i]}this._positionItems(),this._updateScrollerSize()}},_isClientFull:function(){return this._scrollBottom!=0&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(e){const t=this._clamp(this._physicalCount+e,wz,this._virtualCount-this._virtualStart)-this._physicalCount;let i=Math.round(.5*this._physicalCount);if(!(t<0)){if(t>0){const r=window.performance.now();[].push.apply(this._physicalItems,this._createPool(t));for(let s=0;s<t;s++)this._physicalSizes.push(0);this._physicalCount=this._physicalCount+t,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart=this._physicalStart+t),this._update(),this._templateCost=(window.performance.now()-r)/t,i=Math.round(.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||i===0||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,i)),XX):this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,i),da))}},_render:function(){if(this.isAttached&&this._isVisible)if(this._physicalCount!==0){const{physicalTop:e,indexes:t}=this._getReusables(!0);this._physicalTop=e,this._virtualStart=this._virtualStart+t.length,this._physicalStart=this._physicalStart+t.length,this._update(t),this._update(),this._increasePoolIfNeeded(0)}else this._virtualCount>0&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(wz))},_itemsChanged:function(e){e.path==="items"&&(this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._debounce("_render",this._render,Ic))},_iterateItems:function(e,t){let i,r,s,o;if(arguments.length===2&&t){for(o=0;o<t.length;o++)if(i=t[o],r=this._computeVidx(i),(s=e.call(this,i,r))!=null)return s}else{for(i=this._physicalStart,r=this._virtualStart;i<this._physicalCount;i++,r++)if((s=e.call(this,i,r))!=null)return s;for(i=0;i<this._physicalStart;i++,r++)if((s=e.call(this,i,r))!=null)return s}},_computeVidx:function(e){return e>=this._physicalStart?this._virtualStart+(e-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+e},_updateMetrics:function(e){rg();let t=0,i=0;const r=this._physicalAverageCount,s=this._physicalAverage;this._iterateItems(function(o){i+=this._physicalSizes[o],this._physicalSizes[o]=this._physicalItems[o].offsetHeight,t+=this._physicalSizes[o],this._physicalAverageCount+=this._physicalSizes[o]?1:0},e),this._physicalSize=this._physicalSize+t-i,this._physicalAverageCount!==r&&(this._physicalAverage=Math.round((s*r+t)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();let e=this._physicalTop;this._iterateItems(function(t){this.translate3d(0,e+"px",0,this._physicalItems[t]),e+=this._physicalSizes[t]})},_adjustScrollPosition:function(){const e=this._virtualStart===0?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(e!==0){this._physicalTop=this._physicalTop-e;const t=this._scrollTop;!A8e&&t>0&&this._resetScrollPosition(t-e)}},_resetScrollPosition:function(e){this.scrollTarget&&e>=0&&(this._scrollTop=e,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(e){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,((e=(e=e||this._scrollHeight===0)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight)},scrollToIndex:function(e){if(typeof e!="number"||e<0||e>this.items.length-1||(rg(),this._physicalCount===0))return;e=this._clamp(e,0,this._virtualCount-1),(!this._isIndexRendered(e)||e>=this._maxVirtualStart)&&(this._virtualStart=e-1),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage;let t=this._physicalStart,i=this._virtualStart,r=0;const s=this._hiddenContentSize;for(;i<e&&r<=s;)r+=this._physicalSizes[t],t=(t+1)%this._physicalCount,i++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+r),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounce("_render",function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},Ic)},_isIndexRendered:function(e){return e>=this._virtualStart&&e<=this._virtualEnd},_getPhysicalIndex:function(e){return(this._physicalStart+(e-this._virtualStart))%this._physicalCount},_clamp:function(e,t,i){return Math.min(i,Math.max(t,e))},_debounce:function(e,t,i){this._debouncers=this._debouncers||{},this._debouncers[e]=br.debounce(this._debouncers[e],i,t.bind(this)),O9(this._debouncers[e])}});class k8e extends $8e{static get properties(){return{size:{type:Number,notify:!0},_vidxOffset:{type:Number,value:0}}}static get observers(){return["_effectiveSizeChanged(_effectiveSize)"]}connectedCallback(){super.connectedCallback(),this._scrollHandler()}_updateScrollerItem(){}_afterScroll(){}_getRowTarget(){}_createScrollerRows(){}_canPopulate(){}scrollToIndex(t){this._warnPrivateAPIAccess("scrollToIndex"),this._scrollingToIndex=!0,t=Math.min(Math.max(t,0),this._effectiveSize-1),this.$.table.scrollTop=t/this._effectiveSize*(this.$.table.scrollHeight-this.$.table.offsetHeight),this._scrollHandler(),this._accessIronListAPI(()=>this._maxScrollTop)&&this._virtualCount<this._effectiveSize&&this._adjustVirtualIndexOffset(1e6),this._accessIronListAPI(()=>super.scrollToIndex(t-this._vidxOffset)),this._scrollHandler();const i=Array.from(this.$.items.children).filter(r=>r.index===t)[0];if(i){const r=i.getBoundingClientRect().top-this.$.header.getBoundingClientRect().bottom;Math.abs(r)>1&&(this.$.table.scrollTop+=r,this._scrollHandler())}this._scrollingToIndex=!1}_effectiveSizeChanged(t){let i,r=0;this._iterateItems((s,o)=>{if(o===this._firstVisibleIndex){const c=this._physicalItems[s];i=c.index,r=c.getBoundingClientRect().top}}),this.items&&t<this.items.length&&(this._scrollTop=0),!Array.isArray(this.items)&&(this.items={length:Math.min(t,1e5)}),this._accessIronListAPI(()=>super._itemsChanged({path:"items"})),this._virtualCount=Math.min(this.items.length,t)||0,this._scrollTop===0&&(this._accessIronListAPI(()=>this._scrollToIndex(Math.min(t-1,i))),this._iterateItems(s=>{const o=this._physicalItems[s];if(o.index===i&&(this.$.table.scrollTop+=Math.round(o.getBoundingClientRect().top-r)),o.index===this._focusedItemIndex&&this._itemsFocusable&&this.$.items.contains(this.shadowRoot.activeElement)){const c=Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);o.children[c].focus()}})),this._assignModels(),requestAnimationFrame(()=>this._update()),this.__updateFooterPositioning()}_positionItems(){let t;this._adjustScrollPosition(),isNaN(this._physicalTop)&&(t=!0,this._physicalTop=0);let i=this._physicalTop;this._iterateItems(r=>{this._physicalItems[r].style.transform=`translateY(${i}px)`,i+=this._physicalSizes[r]}),t&&this._scrollToIndex(0)}_increasePoolIfNeeded(t){t===0&&this._scrollingToIndex||!this._canPopulate()||!this._effectiveSize||(this._initialPoolCreated?this._optPhysicalSize!==1/0&&(this._debounceIncreasePool=br.debounce(this._debounceIncreasePool,Ic,()=>{this._updateMetrics();const i=this._optPhysicalSize-this._physicalSize;let r=Math.ceil(i/this._physicalAverage);this._physicalCount+r>this._effectiveSize&&(r=Math.max(0,this._effectiveSize-this._physicalCount)),this._physicalSize&&r>0&&this._optPhysicalSize!==1/0&&(super._increasePoolIfNeeded(r),this.__reorderChildNodes())})):(this._initialPoolCreated=!0,super._increasePoolIfNeeded(25)))}__reorderChildNodes(){const t=Array.from(this.$.items.childNodes);t.reduce((i,r,s,o)=>{if(s===0||o[s-1].index===r.index-1)return i},!0)||t.sort((i,r)=>i.index-r.index).forEach(i=>this.$.items.appendChild(i))}_createPool(t){const i=document.createDocumentFragment(),r=this._createScrollerRows(t);r.forEach(o=>i.appendChild(o)),this._getRowTarget().appendChild(i);const s=this.querySelector("[slot]");if(s){const o=s.getAttribute("slot");s.setAttribute("slot","foo-bar"),s.setAttribute("slot",o)}return dke(this,()=>this.notifyResize()),r}_assignModels(t){this._iterateItems((i,r)=>{const s=this._physicalItems[i];this._toggleAttribute("hidden",r>=this._effectiveSize,s),this._updateScrollerItem(s,r+(this._vidxOffset||0))},t)}_scrollHandler(){const t=this.$.table.scrollTop-this._scrollPosition;this._accessIronListAPI(super._scrollHandler);const i=this._vidxOffset;this._accessIronListAPI(()=>this._maxScrollTop)&&this._virtualCount<this._effectiveSize?this._adjustVirtualIndexOffset(t):this._vidxOffset=0,this._vidxOffset!==i&&this._update(),this._afterScroll()}_adjustVirtualIndexOffset(t){if(Math.abs(t)>1e4){if(this._noScale)return void(this._noScale=!1);const i=this.$.table.scrollTop/(this.$.table.scrollHeight-this.$.table.offsetHeight),r=i*this._effectiveSize;this._vidxOffset=Math.round(r-i*this._virtualCount)}else{const i=this._vidxOffset||0,r=1e3,s=100;this._scrollTop===0?(this._vidxOffset=0,i!==this._vidxOffset&&super.scrollToIndex(0)):this.firstVisibleIndex<r&&this._vidxOffset>0&&(this._vidxOffset-=Math.min(this._vidxOffset,s),i!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex+(i-this._vidxOffset)),this._noScale=!0);const o=this._effectiveSize-this._virtualCount;this._scrollTop>=this._maxScrollTop&&this._maxScrollTop>0?(this._vidxOffset=o,i!==this._vidxOffset&&super.scrollToIndex(this._virtualCount)):this.firstVisibleIndex>this._virtualCount-r&&this._vidxOffset<o&&(this._vidxOffset+=Math.min(o-this._vidxOffset,s),i!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex-(this._vidxOffset-i)),this._noScale=!0)}}_accessIronListAPI(t){this._warnPrivateAPIAccessAsyncEnabled=!1;const i=t.apply(this);return this._debouncerWarnPrivateAPIAccess=br.debounce(this._debouncerWarnPrivateAPIAccess,Ic,()=>this._warnPrivateAPIAccessAsyncEnabled=!0),i}_debounceRender(t,i){super._debounceRender(()=>this._accessIronListAPI(t),i)}_warnPrivateAPIAccess(t){this._warnPrivateAPIAccessAsyncEnabled&&console.warn(`Accessing private API (${t})!`)}_render(){this._accessIronListAPI(super._render)}_itemsChanged(){}get _firstVisibleIndex(){return this._accessIronListAPI(()=>super.firstVisibleIndex)}get _lastVisibleIndex(){return this._accessIronListAPI(()=>super.lastVisibleIndex)}_scrollToIndex(t){this._accessIronListAPI(()=>this.scrollToIndex(t))}get firstVisibleIndex(){return this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex}set firstVisibleIndex(t){this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex=t}get lastVisibleIndex(){return this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex}set lastVisibleIndex(t){this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex=t}updateViewportBoundaries(){this._warnPrivateAPIAccess("updateViewportBoundaries"),super.updateViewportBoundaries.apply(this,arguments)}_resizeHandler(){super._resizeHandler(),rg()}}const O8e=e=>class extends e{static get observers(){return["_a11yUpdateGridSize(size, _columnTree, _columnTree.*)"]}_a11yGetHeaderRowCount(t){return t.filter(i=>i.some(r=>r._headerTemplate||r.headerRenderer||r.path||r.header)).length}_a11yGetFooterRowCount(t){return t.filter(i=>i.some(r=>r._headerTemplate||r.headerRenderer)).length}_a11yUpdateGridSize(t,i){if(t===void 0||i===void 0)return;const r=i[i.length-1];this.$.table.setAttribute("aria-rowcount",t+this._a11yGetHeaderRowCount(i)+this._a11yGetFooterRowCount(i)),this.$.table.setAttribute("aria-colcount",r&&r.length||0),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows()}_a11yUpdateHeaderRows(){Array.from(this.$.header.children).forEach((t,i)=>t.setAttribute("aria-rowindex",i+1))}_a11yUpdateFooterRows(){Array.from(this.$.footer.children).forEach((t,i)=>t.setAttribute("aria-rowindex",this._a11yGetHeaderRowCount(this._columnTree)+this.size+i+1))}_a11yUpdateRowRowindex(t,i){t.setAttribute("aria-rowindex",i+this._a11yGetHeaderRowCount(this._columnTree)+1)}_a11yUpdateRowSelected(t,i){t.setAttribute("aria-selected",Boolean(i)),Array.from(t.children).forEach(r=>r.setAttribute("aria-selected",Boolean(i)))}_a11yUpdateRowLevel(t,i){t.setAttribute("aria-level",i+1)}_a11yUpdateRowDetailsOpened(t,i){Array.from(t.children).forEach(r=>{typeof i=="boolean"?r.setAttribute("aria-expanded",i):r.hasAttribute("aria-expanded")&&r.removeAttribute("aria-expanded")})}_a11ySetRowDetailsCell(t,i){Array.from(t.children).forEach(r=>{r!==i&&r.setAttribute("aria-controls",i.id)})}_a11yUpdateCellColspan(t,i){t.setAttribute("aria-colspan",Number(i))}_a11yUpdateSorters(){Array.from(this.querySelectorAll("vaadin-grid-sorter")).forEach(t=>{let i=t.parentNode;for(;i&&i.localName!=="vaadin-grid-cell-content";)i=i.parentNode;i&&i.assignedSlot&&i.assignedSlot.parentNode.setAttribute("aria-sort",{asc:"ascending",desc:"descending"}[String(t.direction)]||"none")})}},P8e=e=>class extends e{static get properties(){return{activeItem:{type:Object,notify:!0,value:null}}}ready(){super.ready(),this.$.scroller.addEventListener("click",this._onClick.bind(this)),this.addEventListener("cell-activate",this._activateItem.bind(this))}_activateItem(t){const i=t.detail.model,r=i?i.item:null;r&&(this.activeItem=this._itemsEqual(this.activeItem,r)?null:r)}_onClick(t){if(t.defaultPrevented)return;const i=t.composedPath(),r=i[i.indexOf(this.$.table)-3];if(!r||r.getAttribute("part").indexOf("details-cell")>-1)return;const s=r._content,o=this.getRootNode().activeElement;s.contains(o)||this._isFocusable(t.target)||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(r.parentElement)}}))}_isFocusable(t){return F8e(t)}},F8e=e=>{if(!e.parentNode)return!1;const t=Array.from(e.parentNode.querySelectorAll("[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]")).filter(i=>i.getAttribute("part")!=="cell body-cell").indexOf(e)!==-1;return!e.disabled&&t},L8e=e=>class extends e{static get properties(){return{items:Array}}static get observers(){return["_itemsChanged(items, items.*, isAttached)"]}_itemsChanged(t,i,r){if(r){if(!Array.isArray(t))return t==null&&(this.size=0),void(this.dataProvider===this._arrayDataProvider&&(this.dataProvider=void 0));this.size=t.length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache(),this._ensureFirstPageLoaded()}}_arrayDataProvider(t,i){let r=(Array.isArray(this.items)?this.items:[]).slice(0);this._filters&&this._checkPaths(this._filters,"filtering",r)&&(r=this._filter(r)),this.size=r.length,t.sortOrders.length&&this._checkPaths(this._sorters,"sorting",r)&&(r=r.sort(this._multiSort.bind(this)));const s=t.page*t.pageSize,o=s+t.pageSize;i(r.slice(s,o),r.length)}_checkPaths(t,i,r){if(!r.length)return!1;let s=!0;for(let o in t){const c=t[o].path;if(!c||c.indexOf(".")===-1)continue;const u=c.replace(/\.[^.]*$/,"");K0.get(u,r[0])===void 0&&(console.warn(`Path "${c}" used for ${i} does not exist in all of the items, ${i} is disabled.`),s=!1)}return s}_multiSort(t,i){return this._sorters.map(r=>r.direction==="asc"?this._compare(K0.get(r.path,t),K0.get(r.path,i)):r.direction==="desc"?this._compare(K0.get(r.path,i),K0.get(r.path,t)):0).reduce((r,s)=>r||s,0)}_normalizeEmptyValue(t){return[void 0,null].indexOf(t)>=0?"":isNaN(t)?t.toString():t}_compare(t,i){return(t=this._normalizeEmptyValue(t))<(i=this._normalizeEmptyValue(i))?-1:t>i?1:0}_filter(t){return t.filter(i=>this._filters.filter(r=>{const s=this._normalizeEmptyValue(K0.get(r.path,i)),o=this._normalizeEmptyValue(r.value).toString().toLowerCase();return s.toString().toLowerCase().indexOf(o)===-1}).length===0)}},R8e=e=>class extends o_(e){ready(){super.ready();const t=this.$.scroller;R8(t,"track",this._onHeaderTrack.bind(this)),t.addEventListener("touchmove",i=>t.hasAttribute("column-resizing")&&i.preventDefault()),t.addEventListener("contextmenu",i=>i.target.getAttribute("part")=="resize-handle"&&i.preventDefault()),t.addEventListener("mousedown",i=>i.target.getAttribute("part")==="resize-handle"&&i.preventDefault())}_onHeaderTrack(t){const i=t.target;if(i.getAttribute("part")==="resize-handle"){let r=i.parentElement._column;for(this._toggleAttribute("column-resizing",!0,this.$.scroller);r.localName==="vaadin-grid-column-group";)r=Array.prototype.slice.call(r._childColumns,0).sort(function(c,u){return c._order-u._order}).filter(function(c){return!c.hidden}).pop();const s=Array.from(this.$.header.querySelectorAll('[part~="row"]:last-child [part~="cell"]')),o=s.filter(c=>c._column===r)[0];if(o.offsetWidth){const c=window.getComputedStyle(o),u=10+parseInt(c.paddingLeft)+parseInt(c.paddingRight)+parseInt(c.borderLeftWidth)+parseInt(c.borderRightWidth)+parseInt(c.marginLeft)+parseInt(c.marginRight),g=o.offsetWidth+(this.__isRTL?o.getBoundingClientRect().left-t.detail.x:t.detail.x-o.getBoundingClientRect().right);r.width=Math.max(u,g)+"px",r.flexGrow=0}s.sort(function(c,u){return c._column._order-u._column._order}).forEach(function(c,u,g){u<g.indexOf(o)&&(c._column.width=c.offsetWidth+"px",c._column.flexGrow=0)}),t.detail.state==="end"&&(this._toggleAttribute("column-resizing",!1,this.$.scroller),this.dispatchEvent(new CustomEvent("column-resize",{detail:{resizedColumn:r}}))),this._resizeHandler()}}},_z=class HQ{constructor(t,i,r){this.grid=t,this.parentCache=i,this.parentItem=r,this.itemCaches={},this.items={},this.effectiveSize=0,this.size=0,this.pendingRequests={}}isLoading(){return Boolean(Object.keys(this.pendingRequests).length||Object.keys(this.itemCaches).filter(t=>this.itemCaches[t].isLoading())[0])}getItemForIndex(t){const{cache:i,scaledIndex:r}=this.getCacheAndIndex(t);return i.items[r]}updateSize(){this.effectiveSize=!this.parentItem||this.grid._isExpanded(this.parentItem)?this.size+Object.keys(this.itemCaches).reduce((t,i)=>{const r=this.itemCaches[i];return r.updateSize(),t+r.effectiveSize},0):0}ensureSubCacheForScaledIndex(t){if(!this.itemCaches[t]){const i=new HQ(this.grid,this,this.items[t]);this.itemCaches[t]=i,this.grid._loadPage(0,i)}}getCacheAndIndex(t){let i=t;const r=Object.keys(this.itemCaches);for(let s=0;s<r.length;s++){const o=Number(r[s]),c=this.itemCaches[o];if(i<=o)return{cache:this,scaledIndex:i};if(i<=o+c.effectiveSize)return c.getCacheAndIndex(i-o-1);i-=c.effectiveSize}return{cache:this,scaledIndex:i}}},N8e=e=>class extends e{static get properties(){return{pageSize:{type:Number,value:50,observer:"_pageSizeChanged"},dataProvider:{type:Object,notify:!0,observer:"_dataProviderChanged"},loading:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0},_cache:{type:Object,value:function(){return new _z(this)}},itemIdPath:{type:String,value:null},expandedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_sizeChanged(size)","_itemIdPathChanged(itemIdPath)","_expandedItemsChanged(expandedItems.*)"]}_sizeChanged(t){const i=t-this._cache.size;this._cache.size+=i,this._cache.effectiveSize+=i,this._effectiveSize=this._cache.effectiveSize,this._increasePoolIfNeeded(0),this._debounceIncreasePool&&this._debounceIncreasePool.flush()}_getItem(t,i){if(t>=this._effectiveSize)return;i.index=t;const{cache:r,scaledIndex:s}=this._cache.getCacheAndIndex(t),o=r.items[s];o?(this._toggleAttribute("loading",!1,i),this._updateItem(i,o),this._isExpanded(o)&&r.ensureSubCacheForScaledIndex(s)):(this._toggleAttribute("loading",!0,i),this._loadPage(this._getPageForIndex(s),r))}_expandedInstanceChangedCallback(t,i){t.item!==void 0&&(i?this.expandItem(t.item):this.collapseItem(t.item))}getItemId(t){return this.itemIdPath?this.get(this.itemIdPath,t):t}_isExpanded(t){return this.__expandedKeys.has(this.getItemId(t))}_expandedItemsChanged(){this.__cacheExpandedKeys(),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,this._assignModels()}_itemIdPathChanged(){this.__cacheExpandedKeys()}__cacheExpandedKeys(){this.expandedItems&&(this.__expandedKeys=new Set,this.expandedItems.forEach(t=>{this.__expandedKeys.add(this.getItemId(t))}))}expandItem(t){this._isExpanded(t)||this.push("expandedItems",t)}collapseItem(t){this._isExpanded(t)&&this.splice("expandedItems",this._getItemIndexInArray(t,this.expandedItems),1)}_getIndexLevel(t){let{cache:i}=this._cache.getCacheAndIndex(t),r=0;for(;i.parentCache;)i=i.parentCache,r++;return r}_canPopulate(){return Boolean(this._hasData&&this._columnTree)}_loadPage(t,i){if(!i.pendingRequests[t]&&this.dataProvider){this._setLoading(!0),i.pendingRequests[t]=!0;const r={page:t,pageSize:this.pageSize,sortOrders:this._mapSorters(),filters:this._mapFilters(),parentItem:i.parentItem};this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.dataProvider(r,(s,o)=>{o!==void 0?i.size=o:r.parentItem&&(i.size=s.length);const c=Array.from(this.$.items.children).map(u=>u._item);s.forEach((u,g)=>{const b=t*this.pageSize+g;i.items[b]=u,this._isExpanded(u)&&c.indexOf(u)>-1&&i.ensureSubCacheForScaledIndex(b)}),this._hasData=!0,delete i.pendingRequests[t],this._debouncerApplyCachedData=br.debounce(this._debouncerApplyCachedData,hl.after(0),()=>{this._setLoading(!1),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,Array.from(this.$.items.children).filter(u=>!u.hidden).forEach(u=>{this._cache.getItemForIndex(u.index)&&this._getItem(u.index,u)}),this._increasePoolIfNeeded(0),this.__scrollToPendingIndex()}),this._cache.isLoading()||this._debouncerApplyCachedData.flush(),this.__itemsReceived()})}}_getPageForIndex(t){return Math.floor(t/this.pageSize)}clearCache(){this._cache=new _z(this),Array.from(this.$.items.children).forEach(t=>{Array.from(t.children).forEach(i=>{i._instance&&i._instance._setPendingProperty("item",{},!1)})}),this._cache.size=this.size||0,this._cache.updateSize(),this._hasData=!1,this._assignModels(),this._effectiveSize&&this._initialPoolCreated||this._loadPage(0,this._cache)}_pageSizeChanged(t,i){i!==void 0&&t!==i&&this.clearCache()}_checkSize(){this.size===void 0&&this._effectiveSize===0&&console.warn("The <vaadin-grid> needs the total number of items in order to display rows. Set the total number of items to the `size` property, or provide the total number of items in the second argument of the `dataProvider`\u2019s `callback` call.")}_dataProviderChanged(t,i){i!==void 0&&this.clearCache(),t&&this.items&&this.items.length&&this._scrollToIndex(this._firstVisibleIndex),this._ensureFirstPageLoaded(),this._debouncerCheckSize=br.debounce(this._debouncerCheckSize,hl.after(2e3),this._checkSize.bind(this)),this._scrollHandler()}_ensureFirstPageLoaded(){this._hasData||this._loadPage(0,this._cache)}_itemsEqual(t,i){return this.getItemId(t)===this.getItemId(i)}_getItemIndexInArray(t,i){let r=-1;return i.forEach((s,o)=>{this._itemsEqual(s,t)&&(r=o)}),r}scrollToIndex(t){super.scrollToIndex(t),isNaN(t)||!this._cache.isLoading()&&this.clientHeight||(this.__pendingScrollToIndex=t)}__scrollToPendingIndex(){if(this.__pendingScrollToIndex&&this.$.items.children.length){const t=this.__pendingScrollToIndex;delete this.__pendingScrollToIndex,this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.scrollToIndex(t)}}},D8e=e=>class extends e{ready(){super.ready(),this._addNodeObserver()}_hasColumnGroups(t){for(let i=0;i<t.length;i++)if(t[i].localName==="vaadin-grid-column-group")return!0;return!1}_getChildColumns(t){return Mc.getFlattenedNodes(t).filter(this._isColumnElement)}_flattenColumnGroups(t){return t.map(i=>i.localName==="vaadin-grid-column-group"?this._getChildColumns(i):[i]).reduce((i,r)=>i.concat(r),[])}_getColumnTree(){const t=[];for(let i=Mc.getFlattenedNodes(this).filter(this._isColumnElement);t.push(i),this._hasColumnGroups(i);)i=this._flattenColumnGroups(i);return t}_updateColumnTree(){const t=this._getColumnTree();this._arrayEquals(t,this._columnTree)||(this._columnTree=t)}_addNodeObserver(){this._observer=new Mc(this,t=>{const i=t.addedNodes.filter(s=>s.localName==="template"&&s.classList.contains("row-details"))[0];i&&this._rowDetailsTemplate!==i&&(this._rowDetailsTemplate=i);const r=s=>s.filter(this._isColumnElement).length>0;if(r(t.addedNodes)||r(t.removedNodes)){const s=t.removedNodes.flatMap(c=>c._allCells),o=c=>s.filter(u=>u._content.contains(c)).length;this.__removeSorters(this._sorters.filter(o)),this.__removeFilters(this._filters.filter(o)),this._updateColumnTree()}this._debouncerCheckImports=br.debounce(this._debouncerCheckImports,hl.after(2e3),this._checkImports.bind(this)),this._ensureFirstPageLoaded()})}_arrayEquals(t,i){if(!t||!i||t.length!=i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(t[r]instanceof Array&&i[r]instanceof Array){if(!this._arrayEquals(t[r],i[r]))return!1}else if(t[r]!=i[r])return!1;return!0}_checkImports(){["vaadin-grid-column-group","vaadin-grid-filter","vaadin-grid-filter-column","vaadin-grid-tree-toggle","vaadin-grid-selection-column","vaadin-grid-sort-column","vaadin-grid-sorter"].forEach(t=>{const i=this.querySelector(t);!i||i instanceof jc||console.warn(`Make sure you have imported the required module for <${t}> element.`)})}_updateFirstAndLastColumn(){Array.from(this.shadowRoot.querySelectorAll("tr")).forEach(t=>this._updateFirstAndLastColumnForRow(t))}_updateFirstAndLastColumnForRow(t){Array.from(t.querySelectorAll('[part~="cell"]:not([part~="details-cell"])')).sort((i,r)=>i._column._order-r._column._order).forEach((i,r,s)=>{this._toggleAttribute("first-column",r===0,i),this._toggleAttribute("last-column",r===s.length-1,i)})}_isColumnElement(t){return t.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(t.localName)}},j8e=e=>class extends e{getEventContext(t){const i={},r=t.composedPath(),s=r[r.indexOf(this.$.table)-3];return s&&(i.section=["body","header","footer","details"].filter(o=>s.getAttribute("part").indexOf(o)>-1)[0],s._column&&(i.column=s._column),i.section!=="body"&&i.section!=="details"||Object.assign(i,this.__getRowModel(s.parentElement))),i}},z8e=e=>class extends e{static get properties(){return{_filters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("filter-changed",this._filterChanged.bind(this))}_filterChanged(t){t.stopPropagation(),this.__addFilter(t.target),this.__applyFilters()}__removeFilters(t){t.length!=0&&(this._filters=this._filters.filter(i=>t.indexOf(i)<0),this.__applyFilters())}__addFilter(t){this._filters.indexOf(t)===-1&&this._filters.push(t)}__applyFilters(){this.dataProvider&&this.isAttached&&this.clearCache()}_mapFilters(){return this._filters.map(t=>({path:t.path,value:t.value}))}};class VS extends jc{static get is(){return"vaadin-grid-templatizer"}static get properties(){return{dataHost:Object,template:Object,_templateInstances:{type:Array,value:function(){return[]}},_parentPathValues:{value:function(){return{}}},_grid:Object}}static get observers(){return["_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)"]}constructor(){super(),this._instanceProps={detailsOpened:!0,index:!0,item:!0,selected:!0,expanded:!0,level:!0}}createInstance(){this._ensureTemplatized();const t=new this._TemplateClass({});return this.addInstance(t),t}addInstance(t){this._templateInstances.indexOf(t)===-1&&(this._templateInstances.push(t),requestAnimationFrame(()=>this.notifyPath("_templateInstances.*",this._templateInstances)))}removeInstance(t){const i=this._templateInstances.indexOf(t);this.splice("_templateInstances",i,1)}_ensureTemplatized(){this._TemplateClass||(this._TemplateClass=hw(this.template,this,{instanceProps:this._instanceProps,parentModel:!0,forwardHostProp:function(t,i){this._forwardParentProp(t,i),this._templateInstances&&this._templateInstances.forEach(r=>r.notifyPath(t,i))},notifyInstanceProp:function(t,i,r){if(i==="index"||i==="item")return;const s=`__${i}__`;if(t[s]===r)return;t[s]=r;const o=Array.from(this._grid.$.items.children).filter(g=>this._grid._itemsEqual(g._item,t.item))[0];o&&Array.from(o.children).forEach(g=>{g._instance&&(g._instance[s]=r,g._instance.notifyPath(i,r))});const c="item.";if(Array.isArray(this._grid.items)&&i.indexOf(c)===0){const g=this._grid.items.indexOf(t.item),b=i.slice(c.length);this._grid.notifyPath(`items.${g}.${b}`,r)}const u=`_${i}InstanceChangedCallback`;this._grid&&this._grid[u]&&this._grid[u](t,r)}}))}_forwardParentProp(t,i){this._parentPathValues[t]=i,this._templateInstances.forEach(r=>r.notifyPath(t,i))}_templateInstancesChanged(t){let i,r;if(t.path==="_templateInstances")i=0,r=this._templateInstances.length;else{if(t.path!=="_templateInstances.splices")return;i=t.value.index,r=t.value.addedCount}Object.keys(this._parentPathValues||{}).forEach(s=>{for(let o=i;o<i+r;o++)this._templateInstances[o].set(s,this._parentPathValues[s])})}}customElements.define(VS.is,VS);const V8e=e=>class extends e{static get properties(){return{detailsOpenedItems:{type:Array,value:function(){return[]}},_rowDetailsTemplate:Object,rowDetailsRenderer:Function,_detailsCells:{type:Array}}}static get observers(){return["_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)","_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)"]}_rowDetailsTemplateOrRendererChanged(t,i){if(t&&i)throw new Error("You should only use either a renderer or a template for row details");if(t||i){if(t&&!t.templatizer){const r=new VS;r._grid=this,r.dataHost=this.dataHost,r.template=t,t.templatizer=r}this._columnTree&&Array.from(this.$.items.children).forEach(r=>{r.querySelector("[part~=details-cell]")||(this._updateRow(r,this._columnTree[this._columnTree.length-1]),this._a11yUpdateRowDetailsOpened(r,!1)),delete r.querySelector("[part~=details-cell]")._instance}),this.detailsOpenedItems.length&&(Array.from(this.$.items.children).forEach(this._toggleDetailsCell,this),this._update())}}_detailsOpenedItemsChanged(t){t.path!=="detailsOpenedItems.length"&&t.value&&Array.from(this.$.items.children).forEach(i=>{this._toggleDetailsCell(i,i._item),this._a11yUpdateRowDetailsOpened(i,this._isDetailsOpened(i._item)),this._toggleAttribute("details-opened",this._isDetailsOpened(i._item),i)})}_configureDetailsCell(t){t.setAttribute("part","cell details-cell"),this._toggleAttribute("frozen",!0,t)}_toggleDetailsCell(t,i){const r=t.querySelector('[part~="details-cell"]');if(!r)return;const s=!this._isDetailsOpened(i),o=!!r.hidden!==s;(r._instance||r._renderer)&&r.hidden===s||(r.hidden=s,s?t.style.removeProperty("padding-bottom"):(this.rowDetailsRenderer?(r._renderer=this.rowDetailsRenderer,r._renderer.call(this,r._content,this,{index:t.index,item:i})):this._rowDetailsTemplate&&!r._instance&&(r._instance=this._rowDetailsTemplate.templatizer.createInstance(),r._content.innerHTML="",r._content.appendChild(r._instance.root),this._updateItem(t,i)),rg(),t.style.setProperty("padding-bottom",`${r.offsetHeight}px`),requestAnimationFrame(()=>this.notifyResize()))),o&&(this._updateMetrics(),this._positionItems())}_updateDetailsCellHeights(){Array.from(this.$.items.querySelectorAll('[part~="details-cell"]:not([hidden])')).forEach(t=>{t.parentElement.style.setProperty("padding-bottom",`${t.offsetHeight}px`)})}_isDetailsOpened(t){return this.detailsOpenedItems&&this._getItemIndexInArray(t,this.detailsOpenedItems)!==-1}openItemDetails(t){this._isDetailsOpened(t)||this.push("detailsOpenedItems",t)}closeItemDetails(t){this._isDetailsOpened(t)&&this.splice("detailsOpenedItems",this._getItemIndexInArray(t,this.detailsOpenedItems),1)}_detailsOpenedInstanceChangedCallback(t,i){i?this.openItemDetails(t.item):this.closeItemDetails(t.item)}},y4={SCROLLING:500,IGNORE_WHEEL:500},G8e=e=>class extends e{static get properties(){return{_frozenCells:{type:Array,value:()=>[]},_rowWithFocusedElement:Element,_deltaYAcc:{type:Number,value:0},_useSticky:{type:Boolean,value:window.CSS&&window.CSS.supports&&(window.CSS.supports("position","sticky")||window.CSS.supports("position","-webkit-sticky"))}}}static get observers(){return["_scrollViewportHeightUpdated(_viewportHeight)"]}set _scrollTop(t){this.$.table.scrollTop=t}get _scrollTop(){return this.$.table.scrollTop}constructor(){super(),this._scrollLineHeight=this._getScrollLineHeight()}_getScrollLineHeight(){const t=document.createElement("div");t.style.fontSize="initial",t.style.display="none",document.body.appendChild(t);const i=window.getComputedStyle(t).fontSize;return document.body.removeChild(t),i?window.parseInt(i):void 0}_scrollViewportHeightUpdated(t){this._scrollPageHeight=t-this.$.header.clientHeight-this.$.footer.clientHeight-this._scrollLineHeight}ready(){super.ready(),this.$.outerscroller=document.createElement("div"),this.scrollTarget=this.$.table,this.addEventListener("wheel",this._onWheel),this.$.items.addEventListener("focusin",t=>{const i=t.composedPath().indexOf(this.$.items);this._rowWithFocusedElement=t.composedPath()[i-1]}),this.$.items.addEventListener("focusout",()=>this._rowWithFocusedElement=void 0),this.scrollTarget.addEventListener("mousedown",()=>this.__mouseDown=!0),this.scrollTarget.addEventListener("mouseup",()=>{this.__mouseDown=!1,this.__pendingReorder&&(this.__pendingReorder=!1,setTimeout(()=>this._reorderRows(),y4.SCROLLING))})}scrollToIndex(t){this._accessIronListAPI(()=>super.scrollToIndex(t))}_onWheel(t){if(t.ctrlKey||this._hasScrolledAncestor(t.target,t.deltaX,t.deltaY))return;const i=this.$.table;let r=t.deltaY;if(t.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._scrollLineHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._scrollPageHeight),this._wheelAnimationFrame)return this._deltaYAcc+=r,void t.preventDefault();r+=this._deltaYAcc,this._deltaYAcc=0,this._wheelAnimationFrame=!0,this._debouncerWheelAnimationFrame=br.debounce(this._debouncerWheelAnimationFrame,Ic,()=>this._wheelAnimationFrame=!1);const s=Math.abs(t.deltaX)+Math.abs(r);this._canScroll(i,t.deltaX,r)?(t.preventDefault(),i.scrollTop+=r,i.scrollLeft+=t.deltaX,this._scrollHandler(),this._hasResidualMomentum=!0,this._ignoreNewWheel=!0,this._debouncerIgnoreNewWheel=br.debounce(this._debouncerIgnoreNewWheel,hl.after(y4.IGNORE_WHEEL),()=>this._ignoreNewWheel=!1)):this._hasResidualMomentum&&s<=this._previousMomentum||this._ignoreNewWheel?t.preventDefault():s>this._previousMomentum&&(this._hasResidualMomentum=!1),this._previousMomentum=s}_hasScrolledAncestor(t,i,r){return t.localName!=="vaadin-grid-cell-content"&&(!(!this._canScroll(t,i,r)||["auto","scroll"].indexOf(getComputedStyle(t).overflow)===-1)||(t!==this&&t.parentElement?this._hasScrolledAncestor(t.parentElement,i,r):void 0))}_canScroll(t,i,r){return r>0&&t.scrollTop<t.scrollHeight-t.offsetHeight||r<0&&t.scrollTop>0||i>0&&t.scrollLeft<t.scrollWidth-t.offsetWidth||i<0&&t.scrollLeft>0}_scheduleScrolling(){this._scrollingFrame||(this._scrollingFrame=requestAnimationFrame(()=>this._toggleAttribute("scrolling",!0,this.$.scroller))),this._debounceScrolling=br.debounce(this._debounceScrolling,hl.after(y4.SCROLLING),()=>{cancelAnimationFrame(this._scrollingFrame),delete this._scrollingFrame,this._toggleAttribute("scrolling",!1,this.$.scroller),this._reorderRows()})}_afterScroll(){this._translateStationaryElements(),this.hasAttribute("reordering")||this._scheduleScrolling(),this._updateOverflow()}_updateOverflow(){let t="";const i=this.$.table;i.scrollTop<i.scrollHeight-i.clientHeight&&(t+=" bottom"),i.scrollTop>0&&(t+=" top"),i.scrollLeft<i.scrollWidth-i.clientWidth&&(t+=" right"),i.scrollLeft>0&&(t+=" left"),this._debounceOverflow=br.debounce(this._debounceOverflow,Ic,()=>{const r=t.trim();r.length>0&&this.getAttribute("overflow")!==r?this.setAttribute("overflow",r):r.length==0&&this.hasAttribute("overflow")&&this.removeAttribute("overflow")})}_reorderRows(){if(this.__mouseDown)return void(this.__pendingReorder=!0);const t=this.$.items,i=t.querySelectorAll("tr");if(!i.length)return;const r=this._virtualStart+this._vidxOffset,s=this._rowWithFocusedElement||Array.from(i).filter(u=>!u.hidden)[0];if(!s)return;const o=s.index-r,c=Array.from(i).indexOf(s)-o;if(c>0)for(let u=0;u<c;u++)t.appendChild(i[u]);else if(c<0)for(let u=i.length+c;u<i.length;u++)t.insertBefore(i[u],i[0]);if(this._safari){const{transform:u}=this.$.header.style;this.$.header.style.transform="",setTimeout(()=>this.$.header.style.transform=u)}}_frozenCellsChanged(){this._debouncerCacheElements=br.debounce(this._debouncerCacheElements,da,()=>{Array.from(this.shadowRoot.querySelectorAll('[part~="cell"]')).forEach(function(t){t.style.transform=""}),this._frozenCells=Array.prototype.slice.call(this.$.table.querySelectorAll("[frozen]")),this._updateScrollerMeasurements(),this._translateStationaryElements()}),this._updateLastFrozen()}_updateScrollerMeasurements(){this._frozenCells.length>0&&this.__isRTL&&(this.__scrollerMetrics={scrollWidth:this.$.table.scrollWidth,clientWidth:this.$.table.clientWidth})}_updateLastFrozen(){if(!this._columnTree)return;const t=this._columnTree[this._columnTree.length-1].slice(0);t.sort((r,s)=>r._order-s._order);const i=t.reduce((r,s,o)=>(s._lastFrozen=!1,s.frozen&&!s.hidden?o:r),void 0);i!==void 0&&(t[i]._lastFrozen=!0)}_translateStationaryElements(){const t=Math.max(0,this._scrollLeft),i=Math.max(0,this._scrollTop);let r=0,s=0,o=0;if(this._useSticky||(r=t,s=i,o=this.$.table.clientHeight-this.$.footer.offsetHeight-this.$.footer.offsetTop),this.$.header.style.transform=this._getTranslate(-t+r,s),this.$.footer.style.transform=this._getTranslate(-t+r,s+o),this.$.items.style.transform=this._getTranslate(-t+r,0),this._frozenCells.length>0){const c=this.__isRTL?this.__getNormalizedScrollLeft(this.$.table)+this.__scrollerMetrics.clientWidth-this.__scrollerMetrics.scrollWidth:this._scrollLeft,u=this._getTranslate(c,0);for(let g=0;g<this._frozenCells.length;g++)this._frozenCells[g].style.transform=u}}_getTranslate(t,i){return`translate(${t}px, ${i}px)`}},U8e=e=>class extends e{static get properties(){return{selectedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_selectedItemsChanged(selectedItems.*)"]}_isSelected(t){return this.selectedItems&&this._getItemIndexInArray(t,this.selectedItems)>-1}selectItem(t){this._isSelected(t)||this.push("selectedItems",t)}deselectItem(t){const i=this._getItemIndexInArray(t,this.selectedItems);i>-1&&this.splice("selectedItems",i,1)}_toggleItem(t){this._getItemIndexInArray(t,this.selectedItems)===-1?this.selectItem(t):this.deselectItem(t)}_selectedItemsChanged(t){!this.$.items.children.length||t.path!=="selectedItems"&&t.path!=="selectedItems.splices"||Array.from(this.$.items.children).forEach(i=>{this._updateItem(i,i._item)})}_selectedInstanceChangedCallback(t,i){i?this.selectItem(t.item):this.deselectItem(t.item)}},q8e=e=>class extends e{static get properties(){return{multiSort:{type:Boolean,value:!1},_sorters:{type:Array,value:function(){return[]}},_previousSorters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("sorter-changed",this._onSorterChanged)}_onSorterChanged(t){const i=t.target;t.stopPropagation(),this.__updateSorter(i),this.__applySorters()}__removeSorters(t){t.length!=0&&(this._sorters=this._sorters.filter(i=>t.indexOf(i)<0),this.multiSort&&this.__updateSortOrders(),this.__applySorters())}__updateSortOrders(){this._sorters.forEach((t,i)=>t._order=this._sorters.length>1?i:null,this)}__updateSorter(t){if(t.direction||this._sorters.indexOf(t)!==-1){if(t._order=null,this.multiSort)this._removeArrayItem(this._sorters,t),t.direction&&this._sorters.unshift(t),this.__updateSortOrders();else if(t.direction){const i=this._sorters.filter(r=>r!=t);this._sorters=[t],i.forEach(r=>{r._order=null,r.direction=null})}}}__applySorters(){this.dataProvider&&this.isAttached&&JSON.stringify(this._previousSorters)!==JSON.stringify(this._mapSorters())&&this.clearCache(),this._a11yUpdateSorters(),this._previousSorters=this._mapSorters()}_mapSorters(){return this._sorters.map(t=>({path:t.path,direction:t.direction}))}_removeArrayItem(t,i){const r=t.indexOf(i);r>-1&&t.splice(r,1)}},B8e=e=>class extends e{static get properties(){return{cellClassNameGenerator:Function}}static get observers(){return["__cellClassNameGeneratorChanged(cellClassNameGenerator)"]}__cellClassNameGeneratorChanged(){this.generateCellClassNames()}generateCellClassNames(){Array.from(this.$.items.children).filter(t=>!t.hidden).forEach(t=>this._generateCellClassNames(t,this.__getRowModel(t)))}_generateCellClassNames(t,i){Array.from(t.children).forEach(r=>{if(r.__generatedClasses&&r.__generatedClasses.forEach(s=>r.classList.remove(s)),this.cellClassNameGenerator){const s=this.cellClassNameGenerator(r._column,i);r.__generatedClasses=s&&s.split(" ").filter(o=>o.length>0),r.__generatedClasses&&r.__generatedClasses.forEach(o=>r.classList.add(o))}})}},b1={BETWEEN:"between",ON_TOP:"on-top",ON_TOP_OR_BETWEEN:"on-top-or-between",ON_GRID:"on-grid"},ah={ON_TOP:"on-top",ABOVE:"above",BELOW:"below",EMPTY:"empty"},H8e=e=>class extends e{static get properties(){return{dropMode:String,rowsDraggable:Boolean,dragFilter:Function,dropFilter:Function,__dndAutoScrollThreshold:{value:50}}}static get observers(){return["_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)"]}ready(){super.ready(),this.$.table.addEventListener("dragstart",this._onDragStart.bind(this)),this.$.table.addEventListener("dragend",this._onDragEnd.bind(this)),this.$.table.addEventListener("dragover",this._onDragOver.bind(this)),this.$.table.addEventListener("dragleave",this._onDragLeave.bind(this)),this.$.table.addEventListener("drop",this._onDrop.bind(this)),this.$.table.addEventListener("dragenter",t=>{this.dropMode&&(t.preventDefault(),t.stopPropagation())})}_onDragStart(t){if(this.rowsDraggable){let i=t.target;if(i.localName==="vaadin-grid-cell-content"&&(i=i.assignedSlot.parentNode.parentNode),i.parentNode!==this.$.items)return;if(t.stopPropagation(),this._toggleAttribute("dragging-rows",!0,this),this._safari){const c=i.style.transform;i.style.top=/translateY\((.*)\)/.exec(c)[1],i.style.transform="none",requestAnimationFrame(()=>{i.style.top="",i.style.transform=c})}const r=i.getBoundingClientRect();this._ios?t.dataTransfer.setDragImage(i):t.dataTransfer.setDragImage(i,t.clientX-r.left,t.clientY-r.top);let s=[i];this._isSelected(i._item)&&(s=this.__getViewportRows().filter(c=>this._isSelected(c._item)).filter(c=>!this.dragFilter||this.dragFilter(this.__getRowModel(c)))),t.dataTransfer.setData("text",this.__formatDefaultTransferData(s)),i.setAttribute("dragstart",s.length>1?s.length:""),this.updateStyles({"--_grid-drag-start-x":t.clientX-r.left+20+"px","--_grid-drag-start-y":t.clientY-r.top+10+"px"}),requestAnimationFrame(()=>{i.removeAttribute("dragstart"),this.updateStyles({"--_grid-drag-start-x":"","--_grid-drag-start-y":""})});const o=new CustomEvent("grid-dragstart",{detail:{draggedItems:s.map(c=>c._item),setDragData:(c,u)=>t.dataTransfer.setData(c,u),setDraggedItemsCount:c=>i.setAttribute("dragstart",c)}});o.originalEvent=t,this.dispatchEvent(o)}}_onDragEnd(t){this._toggleAttribute("dragging-rows",!1,this),t.stopPropagation();const i=new CustomEvent("grid-dragend");i.originalEvent=t,this.dispatchEvent(i)}_onDragLeave(t){t.stopPropagation(),this._clearDragStyles()}_onDragOver(t){if(this.dropMode){if(this._dropLocation=void 0,this._dragOverItem=void 0,this.__dndAutoScroll(t.clientY))return void this._clearDragStyles();let i=t.composedPath().filter(r=>r.localName==="tr")[0];if(this._effectiveSize&&this.dropMode!==b1.ON_GRID)if(i&&i.parentNode===this.$.items){const r=i.getBoundingClientRect();if(this._dropLocation=ah.ON_TOP,this.dropMode===b1.BETWEEN){const s=t.clientY-r.top<r.bottom-t.clientY;this._dropLocation=s?ah.ABOVE:ah.BELOW}else this.dropMode===b1.ON_TOP_OR_BETWEEN&&(t.clientY-r.top<r.height/3?this._dropLocation=ah.ABOVE:t.clientY-r.top>r.height/3*2&&(this._dropLocation=ah.BELOW))}else{if(i||this.dropMode!==b1.BETWEEN&&this.dropMode!==b1.ON_TOP_OR_BETWEEN)return;i=Array.from(this.$.items.children).filter(r=>!r.hidden).pop(),this._dropLocation=ah.BELOW}else this._dropLocation=ah.EMPTY;if(i&&i.hasAttribute("drop-disabled"))return void(this._dropLocation=void 0);t.stopPropagation(),t.preventDefault(),this._dropLocation===ah.EMPTY?this._toggleAttribute("dragover",!0,this):i?(this._dragOverItem=i._item,i.getAttribute("dragover")!==this._dropLocation&&i.setAttribute("dragover",this._dropLocation)):this._clearDragStyles()}}__dndAutoScroll(t){if(this.__dndAutoScrolling)return!0;const i=this.$.header.getBoundingClientRect().bottom,r=this.$.footer.getBoundingClientRect().top,s=i-t+this.__dndAutoScrollThreshold,o=t-r+this.__dndAutoScrollThreshold;let c=0;if(o>0?c=2*o:s>0&&(c=2*-s),c){const u=this.$.table.scrollTop;if(this.$.table.scrollTop+=c,u!==this.$.table.scrollTop)return this.__dndAutoScrolling=!0,setTimeout(()=>this.__dndAutoScrolling=!1,20),this._scrollHandler(),!0}}__getViewportRows(){const t=this.$.header.getBoundingClientRect().bottom,i=this.$.footer.getBoundingClientRect().top;return Array.from(this.$.items.children).filter(r=>{const s=r.getBoundingClientRect();return s.bottom>t&&s.top<i})}_clearDragStyles(){this.removeAttribute("dragover"),Array.from(this.$.items.children).forEach(t=>t.removeAttribute("dragover"))}_onDrop(t){if(this.dropMode){t.stopPropagation(),t.preventDefault();const i=t.dataTransfer.types&&Array.from(t.dataTransfer.types).map(s=>({type:s,data:t.dataTransfer.getData(s)}));this._clearDragStyles();const r=new CustomEvent("grid-drop",{bubbles:t.bubbles,cancelable:t.cancelable,detail:{dropTargetItem:this._dragOverItem,dropLocation:this._dropLocation,dragData:i}});r.originalEvent=t,this.dispatchEvent(r)}}__formatDefaultTransferData(t){return t.map(i=>Array.from(i.children).filter(r=>!r.hidden&&r.getAttribute("part").indexOf("details-cell")===-1).sort((r,s)=>r._column._order>s._column._order?1:-1).map(r=>r._content.textContent.trim()).filter(r=>r).join("	")).join(`
`)}_dragDropAccessChanged(){this.filterDragAndDrop()}filterDragAndDrop(){Array.from(this.$.items.children).filter(t=>!t.hidden).forEach(t=>{this._filterDragAndDrop(t,this.__getRowModel(t))})}_filterDragAndDrop(t,i){const r=!this.rowsDraggable||this.dragFilter&&!this.dragFilter(i),s=!this.dropMode||this.dropFilter&&!this.dropFilter(i);Array.from(t.children).map(o=>o._content).forEach(o=>{r?o.removeAttribute("draggable"):o.setAttribute("draggable",!0)}),this._toggleAttribute("drag-disabled",r,t),this._toggleAttribute("drop-disabled",s,t)}},W8e=e=>class extends e{static get properties(){return{_headerFocusable:{type:Object,observer:"_focusableChanged"},_itemsFocusable:{type:Object,observer:"_focusableChanged"},_footerFocusable:{type:Object,observer:"_focusableChanged"},_navigatingIsHidden:Boolean,_focusedItemIndex:{type:Number,value:0},_focusedColumnOrder:Number}}ready(){super.ready(),this._ios||this._android||(this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp),this.addEventListener("focusin",this._onFocusIn),this.addEventListener("focusout",this._onFocusOut),this.$.table.addEventListener("focusin",this._onCellFocusIn.bind(this)),this.$.table.addEventListener("focusout",this._onCellFocusOut.bind(this)),this.addEventListener("mousedown",()=>{this._toggleAttribute("navigating",!1,this),this._isMousedown=!0}),this.addEventListener("mouseup",()=>this._isMousedown=!1))}_focusableChanged(t,i){i&&i.setAttribute("tabindex","-1"),t&&t.setAttribute("tabindex","0")}_onKeyDown(t){const i=t.key;let r;switch(i){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":case"Home":case"End":r="Navigation";break;case"Enter":case"Escape":case"F2":r="Interaction";break;case"Tab":r="Tab";break;case" ":r="Space"}this._detectInteracting(t),this.hasAttribute("interacting")&&r!=="Interaction"&&(r=void 0),r&&this[`_on${r}KeyDown`](t,i)}_ensureScrolledToIndex(t){Array.from(this.$.items.children).filter(i=>i.index===t)[0]||this._scrollToIndex(t)}_onNavigationKeyDown(t,i){function r(fe){return Array.prototype.indexOf.call(fe.parentNode.children,fe)}this._scrollHandler(),t.preventDefault();const s=this._lastVisibleIndex-this._firstVisibleIndex-1;let o=0,c=0;switch(i){case"ArrowRight":o=this.__isRTL?-1:1;break;case"ArrowLeft":o=this.__isRTL?1:-1;break;case"Home":o=-1/0,t.ctrlKey&&(c=-1/0);break;case"End":o=1/0,t.ctrlKey&&(c=1/0);break;case"ArrowDown":c=1;break;case"ArrowUp":c=-1;break;case"PageDown":c=s;break;case"PageUp":c=-s}const u=t.composedPath()[0],g=r(u),b=this._elementMatches(u,'[part~="details-cell"]'),S=u.parentNode,E=S.parentNode,A=(E===this.$.items?this._effectiveSize:E.children.length)-1,O=E===this.$.items?this._focusedItemIndex!==void 0?this._focusedItemIndex:S.index:r(S);let L=Math.max(0,Math.min(O+c,A)),N=!1;if(E===this.$.items){const fe=S._item,Ce=this._cache.getItemForIndex(L);N=b?c===0:c===1&&this._isDetailsOpened(fe)||c===-1&&L!==O&&this._isDetailsOpened(Ce),N!==b&&(c===1&&N||c===-1&&!N)&&(L=O)}if(E!==this.$.items){if(L>O)for(;L<A&&E.children[L].hidden;)L++;else if(L<O)for(;L>0&&E.children[L].hidden;)L--}this._focusedColumnOrder===void 0&&(this._focusedColumnOrder=b?0:this._getColumns(E,O).filter(fe=>!fe.hidden)[g]._order);const z=this._getColumns(E,L).filter(fe=>!fe.hidden),q=z.map(fe=>fe._order).sort((fe,Ce)=>fe-Ce),Z=q.length-1,ee=q.indexOf(q.slice(0).sort((fe,Ce)=>Math.abs(fe-this._focusedColumnOrder)-Math.abs(Ce-this._focusedColumnOrder))[0]),ie=c===0&&b?ee:Math.max(0,Math.min(ee+o,Z));ie!==ee&&(this._focusedColumnOrder=void 0),E===this.$.items&&this._ensureScrolledToIndex(L),this._toggleAttribute("navigating",!0,this);const ne=z.reduce((fe,Ce,_e)=>(fe[Ce._order]=_e,fe),{})[q[ie]],oe=E===this.$.items?Array.from(E.children).filter(fe=>fe.index===L)[0]:E.children[L];if(!oe)return;const me=N?Array.from(oe.children).filter(fe=>this._elementMatches(fe,'[part~="details-cell"]'))[0]:oe.children[ne];if(this._scrollHorizontallyToCell(me),E===this.$.items&&(this._focusedItemIndex=L),E===this.$.items){const fe=me.getBoundingClientRect(),Ce=this.$.footer.getBoundingClientRect().top,_e=this.$.header.getBoundingClientRect().bottom;fe.bottom>Ce?(this.$.table.scrollTop+=fe.bottom-Ce,this._scrollHandler()):fe.top<_e&&(this.$.table.scrollTop-=_e-fe.top,this._scrollHandler())}me.focus()}_parseEventPath(t){const i=t.indexOf(this.$.table);return{rowGroup:t[i-1],row:t[i-2],cell:t[i-3]}}_onInteractionKeyDown(t,i){const r=t.composedPath()[0],s=r.localName==="input"&&!/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(r.type);let o;switch(i){case"Enter":o=!this.hasAttribute("interacting")||!s;break;case"Escape":o=!1;break;case"F2":o=!this.hasAttribute("interacting")}const{cell:c}=this._parseEventPath(t.composedPath());if(this.hasAttribute("interacting")!==o)if(o){const u=c._content.querySelector("[focus-target]")||c._content.firstElementChild;u&&(t.preventDefault(),u.focus(),this._toggleAttribute("interacting",!0,this),this._toggleAttribute("navigating",!1,this))}else t.preventDefault(),this._focusedColumnOrder=void 0,c.focus(),this._toggleAttribute("interacting",!1,this),this._toggleAttribute("navigating",!0,this)}_predictFocusStepTarget(t,i){const r=[this.$.table,this._headerFocusable,this._itemsFocusable,this._footerFocusable,this.$.focusexit];let s=r.indexOf(t);for(s+=i;s>=0&&s<=r.length-1&&(!r[s]||r[s].parentNode.hidden);)s+=i;return r[s]}_onTabKeyDown(t){const i=this._predictFocusStepTarget(t.composedPath()[0],t.shiftKey?-1:1);if(i===this.$.table)this.$.table.focus();else if(i===this.$.focusexit)this.$.focusexit.focus();else if(i===this._itemsFocusable){let r=i;const s=this._itemsFocusable.parentNode;if(this._ensureScrolledToIndex(this._focusedItemIndex),s.index!==this._focusedItemIndex){const o=Array.from(s.children).indexOf(this._itemsFocusable),c=Array.from(this.$.items.children).filter(u=>u.index===this._focusedItemIndex)[0];c&&(r=c.children[o])}t.preventDefault(),r.focus()}else t.preventDefault(),i.focus();this._toggleAttribute("navigating",!0,this)}_onSpaceKeyDown(t){t.preventDefault();const i=t.composedPath()[0];i._content&&i._content.firstElementChild||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(i.parentElement)}}))}_onKeyUp(t){if(!/^( |SpaceBar)$/.test(t.key))return;t.preventDefault();const i=t.composedPath()[0];if(i._content&&i._content.firstElementChild){const r=this.hasAttribute("navigating");i._content.firstElementChild.click(),this._toggleAttribute("navigating",r,this)}}_onFocusIn(t){this._isMousedown||this._toggleAttribute("navigating",!0,this);const i=t.composedPath()[0];i===this.$.table||i===this.$.focusexit?(this._predictFocusStepTarget(i,i===this.$.table?1:-1).focus(),this._toggleAttribute("interacting",!1,this)):this._detectInteracting(t)}_onFocusOut(t){this._toggleAttribute("navigating",!1,this),this._detectInteracting(t)}_onCellFocusIn(t){if(this._detectInteracting(t),t.composedPath().indexOf(this.$.table)===3){const i=t.composedPath()[0];this._activeRowGroup=i.parentNode.parentNode,this._activeRowGroup===this.$.header?this._headerFocusable=i:this._activeRowGroup===this.$.items?this._itemsFocusable=i:this._activeRowGroup===this.$.footer&&(this._footerFocusable=i),i._content.dispatchEvent(new CustomEvent("cell-focusin",{bubbles:!1}))}this._detectFocusedItemIndex(t)}_onCellFocusOut(t){t.composedPath().indexOf(this.$.table)===3&&t.composedPath()[0]._content.dispatchEvent(new CustomEvent("cell-focusout",{bubbles:!1}))}_detectInteracting(t){this._toggleAttribute("interacting",t.composedPath().some(i=>i.localName==="vaadin-grid-cell-content"),this)}_detectFocusedItemIndex(t){const{rowGroup:i,row:r}=this._parseEventPath(t.composedPath());i===this.$.items&&(this._focusedItemIndex=r.index)}_preventScrollerRotatingCellFocus(t,i){t.index===this._focusedItemIndex&&this.hasAttribute("navigating")&&this._activeRowGroup===this.$.items&&(this._navigatingIsHidden=!0,this._toggleAttribute("navigating",!1,this)),i===this._focusedItemIndex&&this._navigatingIsHidden&&(this._navigatingIsHidden=!1,this._toggleAttribute("navigating",!0,this))}_getColumns(t,i){let r=this._columnTree.length-1;return t===this.$.header?r=i:t===this.$.footer&&(r=this._columnTree.length-1-i),this._columnTree[r]}_resetKeyboardNavigation(){if(this.$.header.firstElementChild&&(this._headerFocusable=Array.from(this.$.header.firstElementChild.children).filter(t=>!t.hidden)[0]),this.$.items.firstElementChild){const t=this._iterateItems((i,r)=>{if(this._firstVisibleIndex===r)return this.$.items.children[i]});t&&(this._itemsFocusable=Array.from(t.children).filter(i=>!i.hidden)[0])}this.$.footer.firstElementChild&&(this._footerFocusable=Array.from(this.$.footer.firstElementChild.children).filter(t=>!t.hidden)[0])}_scrollHorizontallyToCell(t){if(t.hasAttribute("frozen")||this._elementMatches(t,'[part~="details-cell"]'))return;const i=t.getBoundingClientRect(),r=t.parentNode,s=Array.from(r.children).indexOf(t),o=this.$.table.getBoundingClientRect();let c=o.left,u=o.right;for(let g=s-1;g>=0;g--){const b=r.children[g];if(!b.hasAttribute("hidden")&&!this._elementMatches(b,'[part~="details-cell"]')&&b.hasAttribute("frozen")){c=b.getBoundingClientRect().right;break}}for(let g=s+1;g<r.children.length;g++){const b=r.children[g];if(!b.hasAttribute("hidden")&&!this._elementMatches(b,'[part~="details-cell"]')&&b.hasAttribute("frozen")){u=b.getBoundingClientRect().left;break}}i.left<c&&(this.$.table.scrollLeft+=Math.round(i.left-c)),i.right>u&&(this.$.table.scrollLeft+=Math.round(i.right-u))}_elementMatches(t,i){return t.matches?t.matches(i):Array.from(t.parentNode.querySelectorAll(i)).indexOf(t)!==-1}},J8e=e=>class extends o_(e){static get properties(){return{columnReorderingAllowed:{type:Boolean,value:!1},_orderBaseScope:{type:Number,value:1e7}}}static get observers(){return["_updateOrders(_columnTree, _columnTree.*)"]}ready(){super.ready(),R8(this,"track",this._onTrackEvent),this._reorderGhost=this.shadowRoot.querySelector('[part="reorder-ghost"]'),this.addEventListener("touchstart",this._onTouchStart.bind(this)),this.addEventListener("touchmove",this._onTouchMove.bind(this)),this.addEventListener("touchend",this._onTouchEnd.bind(this)),this.addEventListener("contextmenu",this._onContextMenu.bind(this))}_onContextMenu(t){this.hasAttribute("reordering")&&t.preventDefault()}_onTouchStart(t){this._startTouchReorderTimeout=setTimeout(()=>{this._onTrackStart({detail:{x:t.touches[0].clientX,y:t.touches[0].clientY}})},100)}_onTouchMove(t){this._draggedColumn&&t.preventDefault(),clearTimeout(this._startTouchReorderTimeout)}_onTouchEnd(){clearTimeout(this._startTouchReorderTimeout),this._onTrackEnd()}_onTrackEvent(t){if(t.detail.state==="start"){const i=t.composedPath(),r=i[i.indexOf(this.$.header)-2];if(!r||!r._content||r._content.contains(this.getRootNode().activeElement)||this.$.scroller.hasAttribute("column-resizing"))return;this._touchDevice||this._onTrackStart(t)}else t.detail.state==="track"?this._onTrack(t):t.detail.state==="end"&&this._onTrackEnd(t)}_onTrackStart(t){if(!this.columnReorderingAllowed)return;const i=t.composedPath&&t.composedPath();if(i&&i.filter(s=>s.hasAttribute&&s.hasAttribute("draggable"))[0])return;const r=this._cellFromPoint(t.detail.x,t.detail.y);if(r&&r.getAttribute("part").indexOf("header-cell")!==-1){for(this._toggleAttribute("reordering",!0,this),this._draggedColumn=r._column;this._draggedColumn.parentElement.childElementCount===1;)this._draggedColumn=this._draggedColumn.parentElement;this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",this._updateGhost(r),this._reorderGhost.style.visibility="visible",this._updateGhostPosition(t.detail.x,this._touchDevice?t.detail.y-50:t.detail.y),this._autoScroller()}}_onTrack(t){if(!this._draggedColumn)return;const i=this._cellFromPoint(t.detail.x,t.detail.y);if(!i)return;const r=this._getTargetColumn(i,this._draggedColumn);this._isSwapAllowed(this._draggedColumn,r)&&this._isSwappableByPosition(r,t.detail.x)&&this._swapColumnOrders(this._draggedColumn,r),this._updateGhostPosition(t.detail.x,this._touchDevice?t.detail.y-50:t.detail.y),this._lastDragClientX=t.detail.x}_onTrackEnd(){this._draggedColumn&&(this._toggleAttribute("reordering",!1,this),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._draggedColumn=null,this._lastDragClientX=null,this._reorderGhost.style.visibility="hidden",this.dispatchEvent(new CustomEvent("column-reorder",{detail:{columns:this._getColumnsInOrder()}})))}_getColumnsInOrder(){return this._columnTree.slice(0).pop().filter(t=>!t.hidden).sort((t,i)=>t._order-i._order)}_cellFromPoint(t,i){t=t||0,i=i||0,this._draggedColumn||this._toggleAttribute("no-content-pointer-events",!0,this.$.scroller);const r=this.shadowRoot.elementFromPoint(t,i);if(this._toggleAttribute("no-content-pointer-events",!1,this.$.scroller),r&&r._column)return r}_updateGhostPosition(t,i){const r=this._reorderGhost.getBoundingClientRect(),s=t-r.width/2,o=i-r.height/2,c=parseInt(this._reorderGhost._left||0),u=parseInt(this._reorderGhost._top||0);this._reorderGhost._left=c-(r.left-s),this._reorderGhost._top=u-(r.top-o),this._reorderGhost.style.transform=`translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`}_updateGhost(t){const i=this._reorderGhost;i.textContent=t._content.innerText;const r=window.getComputedStyle(t);return["boxSizing","display","width","height","background","alignItems","padding","border","flex-direction","overflow"].forEach(s=>i.style[s]=r[s]),i}_updateOrders(t,i){t!==void 0&&i!==void 0&&(t[0].forEach(r=>r._order=0),t[0].forEach((r,s)=>r._order=(s+1)*this._orderBaseScope))}_setSiblingsReorderStatus(t,i){Array.from(t.parentNode.children).filter(r=>/column/.test(r.localName)&&this._isSwapAllowed(r,t)).forEach(r=>r._reorderStatus=i)}_autoScroller(){if(this._lastDragClientX){const t=this._lastDragClientX-this.getBoundingClientRect().right+50,i=this.getBoundingClientRect().left-this._lastDragClientX+50;t>0?this.$.table.scrollLeft+=t/10:i>0&&(this.$.table.scrollLeft-=i/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)}_isSwapAllowed(t,i){if(t&&i){const r=t!==i,s=t.parentElement===i.parentElement,o=t.frozen===i.frozen;return r&&s&&o}}_isSwappableByPosition(t,i){const r=Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~="cell"]')).filter(c=>t.contains(c._column))[0],s=this.$.header.querySelector("tr:not([hidden]) [reorder-status=dragging]").getBoundingClientRect(),o=r.getBoundingClientRect();return o.left>s.left?i>o.right-s.width:i<o.left+s.width}_swapColumnOrders(t,i){const r=t._order;t._order=i._order,i._order=r,this._updateLastFrozen(),this._updateFirstAndLastColumn()}_getTargetColumn(t,i){if(t&&i){let r=t._column;for(;r.parentElement!==i.parentElement&&r!==this;)r=r.parentElement;return r.parentElement===i.parentElement?r:t._column}}},WQ=e=>class extends e{static get properties(){return{resizable:{type:Boolean,value:function(){if(this.localName==="vaadin-grid-column-group")return;const t=this.parentNode;return t&&t.localName==="vaadin-grid-column-group"&&t.resizable||!1}},_headerTemplate:{type:Object},_footerTemplate:{type:Object},frozen:{type:Boolean,value:!1},hidden:{type:Boolean},header:{type:String},textAlign:{type:String},_lastFrozen:{type:Boolean,value:!1},_order:Number,_reorderStatus:Boolean,_emptyCells:Array,_headerCell:Object,_footerCell:Object,_grid:Object,headerRenderer:Function,footerRenderer:Function}}static get observers(){return["_widthChanged(width, _headerCell, _footerCell, _cells.*)","_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)","_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)","_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)","_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)","_orderChanged(_order, _headerCell, _footerCell, _cells.*)","_lastFrozenChanged(_lastFrozen)","_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)","_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)","_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)","_resizableChanged(resizable, _headerCell)","_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)","_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)"]}connectedCallback(){super.connectedCallback(),this._bodyTemplate&&(this._bodyTemplate.templatizer._grid=this._grid),this._headerTemplate&&(this._headerTemplate.templatizer._grid=this._grid),this._footerTemplate&&(this._footerTemplate.templatizer._grid=this._grid),this._templateObserver.flush(),this._bodyTemplate||this._templateObserver.callback(),requestAnimationFrame(()=>{this._allCells.forEach(t=>{t._content.parentNode||this._grid&&this._grid.appendChild(t._content)})})}disconnectedCallback(){super.disconnectedCallback(),requestAnimationFrame(()=>{this._findHostGrid()||this._allCells.forEach(t=>{t._content.parentNode&&t._content.parentNode.removeChild(t._content)})}),this._gridValue=void 0}_findHostGrid(){let t=this;for(;t&&!/^vaadin.*grid(-pro)?$/.test(t.localName);)t=t.assignedSlot?t.assignedSlot.parentNode:t.parentNode;return t||void 0}get _grid(){return this._gridValue||(this._gridValue=this._findHostGrid()),this._gridValue}get _allCells(){return[].concat(this._cells||[]).concat(this._emptyCells||[]).concat(this._headerCell).concat(this._footerCell).filter(t=>t)}constructor(){super(),this._templateObserver=new Mc(this,()=>{this._headerTemplate=this._prepareHeaderTemplate(),this._footerTemplate=this._prepareFooterTemplate(),this._bodyTemplate=this._prepareBodyTemplate()})}_prepareHeaderTemplate(){return this._prepareTemplatizer(this._findTemplate(!0)||null,{})}_prepareFooterTemplate(){return this._prepareTemplatizer(this._findTemplate(!1,!0)||null,{})}_prepareBodyTemplate(){return this._prepareTemplatizer(this._findTemplate()||null)}_prepareTemplatizer(t,i){if(t&&!t.templatizer){const r=new VS;r._grid=this._grid,r.dataHost=this.dataHost,r._instanceProps=i||r._instanceProps,r.template=t,t.templatizer=r}return t}_renderHeaderAndFooter(){this.headerRenderer&&this._headerCell&&this.__runRenderer(this.headerRenderer,this._headerCell),this.footerRenderer&&this._footerCell&&this.__runRenderer(this.footerRenderer,this._footerCell)}__runRenderer(t,i,r){const s=[i._content,this];r&&r.item&&s.push(r),t.apply(this,s)}__setColumnTemplateOrRenderer(t,i,r){if(!this.hidden){if(t&&i)throw new Error("You should only use either a renderer or a template");r.forEach(s=>{const o=this._grid.__getRowModel(s.parentElement);if(i)s._renderer=i,(o.item||i===this.headerRenderer||i===this.footerRenderer)&&this.__runRenderer(i,s,o);else if(s._template!==t){s._template=t,s._content.innerHTML="",t.templatizer._grid=t.templatizer._grid||this._grid;const c=t.templatizer.createInstance();s._content.appendChild(c.root),s._instance=c,o.item&&s._instance.setProperties(o)}})}}_setBodyTemplateOrRenderer(t,i,r){(t||i)&&r&&this.__setColumnTemplateOrRenderer(t,i,r)}_setHeaderTemplateOrRenderer(t,i,r){(t||i)&&r&&this.__setColumnTemplateOrRenderer(t,i,[r])}_setFooterTemplateOrRenderer(t,i,r){(t||i)&&r&&(this.__setColumnTemplateOrRenderer(t,i,[r]),this._grid.__updateHeaderFooterRowVisibility(r.parentElement))}_selectFirstTemplate(t=!1,i=!1){return Mc.getFlattenedNodes(this).filter(r=>r.localName==="template"&&r.classList.contains("header")===t&&r.classList.contains("footer")===i)[0]}_findTemplate(t,i){const r=this._selectFirstTemplate(t,i);return r&&this.dataHost&&(r._rootDataHost=this.dataHost._rootDataHost||this.dataHost),r}_flexGrowChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("flexGrow"),this._allCells.forEach(i=>i.style.flexGrow=t)}_orderChanged(t){this._allCells.forEach(i=>i.style.order=t)}_widthChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("width"),this._allCells.forEach(i=>i.style.width=t),this._grid&&this._grid.__forceReflow&&this._grid.__forceReflow()}_frozenChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("frozen",t),this._allCells.forEach(i=>this._toggleAttribute("frozen",t,i)),this._grid&&this._grid._frozenCellsChanged&&this._grid._frozenCellsChanged()}_lastFrozenChanged(t){this._allCells.forEach(i=>this._toggleAttribute("last-frozen",t,i)),this.parentElement&&this.parentElement._columnPropChanged&&(this.parentElement._lastFrozen=t)}_pathOrHeaderChanged(t,i,r,s,o,c,u,g,b){const S=i!==void 0;if(!u&&!b&&S&&r&&this.__setTextContent(r._content,i),t&&o.value){if(!c&&!g){const E=(A,O,{item:L})=>this.__setTextContent(A,this.get(t,L));this.__setColumnTemplateOrRenderer(void 0,E,o.value)}u||b||S||!r||i===null||this.__setTextContent(r._content,this._generateHeader(t))}r&&this._grid.__updateHeaderFooterRowVisibility(r.parentElement)}__setTextContent(t,i){t.textContent!==i&&(t.textContent=i)}_generateHeader(t){return t.substr(t.lastIndexOf(".")+1).replace(/([A-Z])/g,"-$1").toLowerCase().replace(/-/g," ").replace(/^./,i=>i.toUpperCase())}_toggleAttribute(t,i,r){r.hasAttribute(t)===!i&&(i?r.setAttribute(t,""):r.removeAttribute(t))}_reorderStatusChanged(t){this._allCells.forEach(i=>i.setAttribute("reorder-status",t))}_resizableChanged(t,i){t!==void 0&&i!==void 0&&i&&[i].concat(this._emptyCells).forEach(r=>{if(r){const s=r.querySelector('[part~="resize-handle"]');if(s&&r.removeChild(s),t){const o=document.createElement("div");o.setAttribute("part","resize-handle"),r.appendChild(o)}}})}_textAlignChanged(t){if(t===void 0)return;if(["start","end","center"].indexOf(t)===-1)return void console.warn('textAlign can only be set as "start", "end" or "center"');let i;getComputedStyle(this._grid).direction==="ltr"?t==="start"?i="left":t==="end"&&(i="right"):t==="start"?i="right":t==="end"&&(i="left"),this._allCells.forEach(r=>{r._content.style.textAlign=t,getComputedStyle(r._content).textAlign!==t&&(r._content.style.textAlign=i)})}_hiddenChanged(t){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("hidden",t),!!t!=!!this._previousHidden&&this._grid&&(t===!0&&this._allCells.forEach(i=>{i._content.parentNode&&i._content.parentNode.removeChild(i._content)}),this._grid._debouncerHiddenChanged=br.debounce(this._grid._debouncerHiddenChanged,Ic,()=>{this._grid&&this._grid._renderColumnTree&&this._grid._renderColumnTree(this._grid._columnTree)}),this._grid._updateLastFrozen&&this._grid._updateLastFrozen(),this._grid.notifyResize&&this._grid.notifyResize(),this._grid._resetKeyboardNavigation&&this._grid._resetKeyboardNavigation()),this._previousHidden=t}};class GS extends WQ(j8(jc)){static get is(){return"vaadin-grid-column"}static get properties(){return{width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},renderer:Function,path:{type:String},autoWidth:{type:Boolean,value:!1},_bodyTemplate:{type:Object},_cells:Array}}}customElements.define(GS.is,GS),nw("vaadin-grid",sw`
    @keyframes vaadin-grid-appear {
      to {
        opacity: 1;
      }
    }

    :host {
      display: block;
      animation: 1ms vaadin-grid-appear;
      height: 400px;
      flex: 1 1 auto;
      align-self: stretch;
      position: relative;
    }

    :host([hidden]) {
      display: none !important;
    }

    #scroller {
      display: block;
      transform: translateY(0);
      width: auto;
      height: auto;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    :host([height-by-rows]) {
      height: auto;
      align-self: flex-start;
      flex-grow: 0;
      width: 100%;
    }

    :host([height-by-rows]) #scroller {
      width: 100%;
      height: 100%;
      position: relative;
    }

    #table {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: auto;
      position: relative;
      outline: none;
      /* Workaround for a Desktop Safari bug: new stacking context here prevents the scrollbar from getting hidden */
      z-index: 0;
    }

    #header,
    #footer {
      display: block;
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      overflow: visible;
      width: 100%;
      z-index: 1;
    }

    #header {
      top: 0;
    }

    th {
      text-align: inherit;
    }

    /* Safari doesn't work with "inherit" */
    [safari] th {
      text-align: initial;
    }

    #footer {
      bottom: 0;
    }

    #items {
      flex-grow: 1;
      flex-shrink: 0;
      display: block;
      position: -webkit-sticky;
      position: sticky;
      width: 100%;
      left: 0;
      overflow: visible;
    }

    [part~='row'] {
      display: flex;
      width: 100%;
      box-sizing: border-box;
      margin: 0;
    }

    [part~='row'][loading] [part~='body-cell'] ::slotted(vaadin-grid-cell-content) {
      opacity: 0;
    }

    #items [part~='row'] {
      position: absolute;
    }

    #items [part~='row']:empty {
      height: 1em;
    }

    [part~='cell']:not([part~='details-cell']) {
      flex-shrink: 0;
      flex-grow: 1;
      box-sizing: border-box;
      display: flex;
      width: 100%;
      position: relative;
      align-items: center;
      padding: 0;
      white-space: nowrap;
    }

    [part~='details-cell'] {
      position: absolute;
      bottom: 0;
      width: 100%;
      box-sizing: border-box;
      padding: 0;
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: block;
      width: 100%;
      box-sizing: border-box;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [hidden] {
      display: none !important;
    }

    [frozen] {
      z-index: 2;
      will-change: transform;
    }

    [no-scrollbars][safari] #table,
    [no-scrollbars][firefox] #table {
      overflow: hidden;
    }

    /* Reordering styles */
    :host([reordering]) [part~='cell'] ::slotted(vaadin-grid-cell-content),
    :host([reordering]) [part~='resize-handle'],
    #scroller[no-content-pointer-events] [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      pointer-events: none;
    }

    [part~='reorder-ghost'] {
      visibility: hidden;
      position: fixed;
      pointer-events: none;
      opacity: 0.5;

      /* Prevent overflowing the grid in Firefox */
      top: 0;
      left: 0;
    }

    :host([reordering]) {
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Resizing styles */
    [part~='resize-handle'] {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      cursor: col-resize;
      z-index: 1;
    }

    [part~='resize-handle']::before {
      position: absolute;
      content: '';
      height: 100%;
      width: 35px;
      transform: translateX(-50%);
    }

    [last-column] [part~='resize-handle']::before,
    [last-frozen] [part~='resize-handle']::before {
      width: 18px;
      transform: none;
      right: 0;
    }

    #scroller[column-resizing] {
      -ms-user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Sizer styles */
    #sizer {
      display: flex;
      position: absolute;
      visibility: hidden;
    }

    #sizer [part~='details-cell'] {
      display: none !important;
    }

    #sizer [part~='cell'][hidden] {
      display: none !important;
    }

    #sizer [part~='cell'] {
      display: block;
      flex-shrink: 0;
      line-height: 0;
      height: 0 !important;
      min-height: 0 !important;
      max-height: 0 !important;
      padding: 0 !important;
      border: none !important;
    }

    #sizer [part~='cell']::before {
      content: '-';
    }

    #sizer [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: none !important;
    }

    /* RTL specific styles */

    :host([dir='rtl']) #items,
    :host([dir='rtl']) #header,
    :host([dir='rtl']) #footer {
      left: auto;
    }

    :host([dir='rtl']) [part~='reorder-ghost'] {
      left: auto;
      right: 0;
    }

    :host([dir='rtl']) [part~='resize-handle'] {
      left: 0;
      right: auto;
    }

    :host([dir='rtl']) [part~='resize-handle']::before {
      transform: translateX(50%);
    }

    :host([dir='rtl']) [last-column] [part~='resize-handle']::before,
    :host([dir='rtl']) [last-frozen] [part~='resize-handle']::before {
      left: 0;
      right: auto;
    }
  `,{moduleId:"vaadin-grid-styles"});const Y8e=(()=>{try{return document.createEvent("TouchEvent"),!0}catch{return!1}})();class xz extends yQ(D8(N8e(L8e(D8e(P8e(G8e(U8e(q8e(V8e(W8e(O8e(z8e(J8e(R8e(j8e(H8e(B8e(k8e)))))))))))))))))){static get template(){return s_`
      <div
        id="scroller"
        safari$="[[_safari]]"
        ios$="[[_ios]]"
        loading$="[[loading]]"
        column-reordering-allowed$="[[columnReorderingAllowed]]"
      >
        <table id="table" role="grid" aria-multiselectable="true" tabindex="0">
          <caption id="sizer" part="row"></caption>
          <thead id="header" role="rowgroup"></thead>
          <tbody id="items" role="rowgroup"></tbody>
          <tfoot id="footer" role="rowgroup"></tfoot>
        </table>

        <div part="reorder-ghost"></div>
      </div>

      <div id="focusexit" tabindex="0"></div>
    `}static get is(){return"vaadin-grid"}static get version(){return"6.0.2"}static get observers(){return["_columnTreeChanged(_columnTree, _columnTree.*)"]}static get properties(){return{_safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},_ios:{type:Boolean,value:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1},_firefox:{type:Boolean,value:navigator.userAgent.toLowerCase().indexOf("firefox")>-1},_android:{type:Boolean,value:/android/i.test(navigator.userAgent)},_touchDevice:{type:Boolean,value:Y8e},heightByRows:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_heightByRowsChanged"},_recalculateColumnWidthOnceLoadingFinished:{type:Boolean,value:!0}}}constructor(){super(),this.addEventListener("animationend",this._onAnimationEnd)}connectedCallback(){super.connectedCallback(),this.recalculateColumnWidths()}attributeChangedCallback(t,i,r){super.attributeChangedCallback(t,i,r),t==="dir"&&(this.__isRTL=r==="rtl",this._updateScrollerMeasurements())}__hasRowsWithClientHeight(){return!!Array.from(this.$.items.children).filter(t=>t.clientHeight).length}__itemsReceived(){this._recalculateColumnWidthOnceLoadingFinished&&!this._cache.isLoading()&&this.__hasRowsWithClientHeight()&&(this._recalculateColumnWidthOnceLoadingFinished=!1,this.recalculateColumnWidths())}_recalculateColumnWidths(t){t.forEach(i=>{i.width="auto",i._origFlexGrow=i.flexGrow,i.flexGrow=0}),t.forEach(i=>{i._currentWidth=0,i._allCells.forEach(r=>{const s=r.offsetWidth+1;i._currentWidth=Math.max(i._currentWidth,s)})}),t.forEach(i=>{i.width=`${i._currentWidth}px`,i.flexGrow=i._origFlexGrow,i._currentWidth=void 0,i._origFlexGrow=void 0})}recalculateColumnWidths(){if(this._columnTree)if(this._cache.isLoading())this._recalculateColumnWidthOnceLoadingFinished=!0;else{const t=this._getColumns().filter(i=>!i.hidden&&i.autoWidth);this._recalculateColumnWidths(t)}}_createScrollerRows(t){const i=[];for(let r=0;r<t;r++){const s=document.createElement("tr");s.setAttribute("part","row"),s.setAttribute("role","row"),this._columnTree&&this._updateRow(s,this._columnTree[this._columnTree.length-1],"body",!1,!0),i.push(s)}return this._columnTree&&this._columnTree[this._columnTree.length-1].forEach(r=>r.isConnected&&r.notifyPath&&r.notifyPath("_cells.*",r._cells)),hke(this,()=>{this._updateFirstAndLastColumn(),this._resetKeyboardNavigation()}),i}_getRowTarget(){return this.$.items}_createCell(t){const i="vaadin-grid-cell-content-"+(this._contentIndex=this._contentIndex+1||0),r=document.createElement("vaadin-grid-cell-content");r.setAttribute("slot",i);const s=document.createElement(t);s.id=i.replace("-content-","-"),s.setAttribute("tabindex","-1"),s.setAttribute("role",t==="td"?"gridcell":"columnheader");const o=document.createElement("slot");return o.setAttribute("name",i),s.appendChild(o),s._content=r,r.addEventListener("mousedown",()=>{if(window.chrome){const c=()=>{r.contains(this.getRootNode().activeElement)||s.focus(),document.removeEventListener("mouseup",c,!0)};document.addEventListener("mouseup",c,!0)}else setTimeout(()=>{r.contains(this.getRootNode().activeElement)||s.focus()})}),s}_updateRow(t,i,r,s,o){r=r||"body";const c=document.createDocumentFragment();Array.from(t.children).forEach(u=>u._vacant=!0),t.innerHTML="",t.id!=="sizer"&&(t.hidden=!0),i.filter(u=>!u.hidden).forEach((u,g,b)=>{let S;if(r==="body"){if(u._cells=u._cells||[],S=u._cells.filter(E=>E._vacant)[0],S||(S=this._createCell("td"),u._cells.push(S)),S.setAttribute("part","cell body-cell"),t.appendChild(S),g===b.length-1&&(this._rowDetailsTemplate||this.rowDetailsRenderer)){this._detailsCells=this._detailsCells||[];const E=this._detailsCells.filter(A=>A._vacant)[0]||this._createCell("td");this._detailsCells.indexOf(E)===-1&&this._detailsCells.push(E),E._content.parentElement||c.appendChild(E._content),this._configureDetailsCell(E),t.appendChild(E),this._a11ySetRowDetailsCell(t,E),E._vacant=!1}u.notifyPath&&!o&&u.notifyPath("_cells.*",u._cells)}else{const E=r==="header"?"th":"td";s||u.localName==="vaadin-grid-column-group"?(S=u[`_${r}Cell`]||this._createCell(E),S._column=u,t.appendChild(S),u[`_${r}Cell`]=S):(u._emptyCells=u._emptyCells||[],S=u._emptyCells.filter(A=>A._vacant)[0]||this._createCell(E),S._column=u,t.appendChild(S),u._emptyCells.indexOf(S)===-1&&u._emptyCells.push(S)),S.setAttribute("part",`cell ${r}-cell`),this.__updateHeaderFooterRowVisibility(t)}S._content.parentElement||c.appendChild(S._content),S._vacant=!1,S._column=u}),this.appendChild(c),this._frozenCellsChanged(),this._updateFirstAndLastColumnForRow(t)}__updateHeaderFooterRowVisibility(t){if(!t)return;const i=Array.from(t.children).filter(r=>{const s=r._column;if(s._emptyCells&&s._emptyCells.indexOf(r)>-1)return!1;if(t.parentElement===this.$.header){if(s.headerRenderer||s._headerTemplate)return!0;if(s.header===null)return!1;if(s.path||s.header!==void 0)return!0}else if(s.footerRenderer||s._footerTemplate)return!0});t.hidden!==!i.length&&(t.hidden=!i.length,this.notifyResize())}_updateScrollerItem(t,i){this._preventScrollerRotatingCellFocus(t,i),this._columnTree&&(this._toggleAttribute("first",i===0,t),this._toggleAttribute("odd",i%2,t),this._a11yUpdateRowRowindex(t,i),this._getItem(i,t))}_columnTreeChanged(t){this._renderColumnTree(t),this.recalculateColumnWidths()}_renderColumnTree(t){for(Array.from(this.$.items.children).forEach(i=>this._updateRow(i,t[t.length-1],null,!1,!0));this.$.header.children.length<t.length;){const i=document.createElement("tr");i.setAttribute("part","row"),i.setAttribute("role","row"),this.$.header.appendChild(i);const r=document.createElement("tr");r.setAttribute("part","row"),r.setAttribute("role","row"),this.$.footer.appendChild(r)}for(;this.$.header.children.length>t.length;)this.$.header.removeChild(this.$.header.firstElementChild),this.$.footer.removeChild(this.$.footer.firstElementChild);Array.from(this.$.header.children).forEach((i,r)=>this._updateRow(i,t[r],"header",r===t.length-1)),Array.from(this.$.footer.children).forEach((i,r)=>this._updateRow(i,t[t.length-1-r],"footer",r===0)),this._updateRow(this.$.sizer,t[t.length-1]),this._resizeHandler(),this._frozenCellsChanged(),this._updateFirstAndLastColumn(),this._resetKeyboardNavigation(),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows(),this.__updateFooterPositioning()}__updateFooterPositioning(){this._firefox&&(this.$.items.style.paddingBottom=0,this.heightByRows||(this.$.items.style.paddingBottom=`${this.$.footer.offsetHeight}px`)),this._ios&&!window.CSS.supports("position","sticky")&&(this.$.table.style.height="",this.$.table.style.minHeight="100%",this.$.table.style.maxHeight="100%",setTimeout(()=>this.$.table.style.height=`${this.$.scroller.offsetHeight}px`))}_updateItem(t,i){t._item=i;const r=this.__getRowModel(t);this._toggleAttribute("selected",r.selected,t),this._a11yUpdateRowSelected(t,r.selected),this._a11yUpdateRowLevel(t,r.level),this._toggleAttribute("expanded",r.expanded,t),this._toggleAttribute("details-opened",this._isDetailsOpened(i),t),(this._rowDetailsTemplate||this.rowDetailsRenderer)&&this._toggleDetailsCell(t,i),this._generateCellClassNames(t,r),this._filterDragAndDrop(t,r),Array.from(t.children).forEach(s=>{if(s._renderer){const o=s._column||this;s._renderer.call(o,s._content,o,r)}else s._instance&&(s._instance.__detailsOpened__=r.detailsOpened,s._instance.__selected__=r.selected,s._instance.__level__=r.level,s._instance.__expanded__=r.expanded,s._instance.setProperties(r))}),this._debouncerUpdateHeights=br.debounce(this._debouncerUpdateHeights,hl.after(1),()=>{this._updateMetrics(),this._positionItems(),this._updateScrollerSize()})}_resizeHandler(){this._updateDetailsCellHeights(),this._accessIronListAPI(super._resizeHandler,!0),this._updateScrollerMeasurements(),this.__updateFooterPositioning()}_onAnimationEnd(t){t.animationName.indexOf("vaadin-grid-appear")===0&&(this._render(),t.stopPropagation(),this.notifyResize(),this.__itemsReceived(),requestAnimationFrame(()=>{this.__scrollToPendingIndex(),this.$.table.style.webkitOverflowScrolling="touch"}))}_toggleAttribute(t,i,r){r.hasAttribute(t)===!i&&(i?r.setAttribute(t,""):r.removeAttribute(t))}__getRowModel(t){return{index:t.index,item:t._item,level:this._getIndexLevel(t.index),expanded:this._isExpanded(t._item),selected:this._isSelected(t._item),detailsOpened:!(!this._rowDetailsTemplate&&!this.rowDetailsRenderer)&&this._isDetailsOpened(t._item)}}render(){this._columnTree&&(this._columnTree.forEach(t=>{t.forEach(i=>i._renderHeaderAndFooter())}),this._update())}notifyResize(){super.notifyResize()}_heightByRowsChanged(t,i){(t||i)&&this.notifyResize()}__forceReflow(){this._debouncerForceReflow=br.debounce(this._debouncerForceReflow,Ic,()=>{this.$.scroller.style.overflow="hidden",setTimeout(()=>this.$.scroller.style.overflow="")})}}customElements.define(xz.is,xz);class Sz extends WQ(jc){static get is(){return"vaadin-grid-column-group"}static get properties(){return{_childColumns:{value:function(){return this._getChildColumns(this)}},flexGrow:{type:Number,readOnly:!0},width:{type:String,readOnly:!0},_visibleChildColumns:Array,_colSpan:Number,_rootColumns:Array}}static get observers(){return["_updateVisibleChildColumns(_childColumns)","_childColumnsChanged(_childColumns)","_groupFrozenChanged(frozen, _rootColumns)","_groupHiddenChanged(hidden, _rootColumns)","_visibleChildColumnsChanged(_visibleChildColumns)","_colSpanChanged(_colSpan, _headerCell, _footerCell)","_groupOrderChanged(_order, _rootColumns)","_groupReorderStatusChanged(_reorderStatus, _rootColumns)","_groupResizableChanged(resizable, _rootColumns)"]}connectedCallback(){super.connectedCallback(),this._addNodeObserver(),this._updateFlexAndWidth()}disconnectedCallback(){super.disconnectedCallback(),this._observer&&this._observer.disconnect()}_columnPropChanged(t,i){t==="hidden"&&(this._preventHiddenCascade=!0,this._updateVisibleChildColumns(this._childColumns),this._preventHiddenCascade=!1),/flexGrow|width|hidden|_childColumns/.test(t)&&this._updateFlexAndWidth(),t==="frozen"&&(this.frozen=this.frozen||i),t==="lastFrozen"&&(this._lastFrozen=this._lastFrozen||i)}_groupOrderChanged(t,i){if(i){const r=i.slice(0);if(!t)return void r.forEach(u=>u._order=0);const s=/(0+)$/.exec(t).pop().length,o=1+~~(Math.log(i.length)/Math.log(Math.LN10)),c=Math.pow(10,s-o);r[0]&&r[0]._order&&r.sort((u,g)=>u._order-g._order),r.forEach((u,g)=>u._order=t+(g+1)*c)}}_groupReorderStatusChanged(t,i){t!==void 0&&i!==void 0&&i.forEach(r=>r._reorderStatus=t)}_groupResizableChanged(t,i){t!==void 0&&i!==void 0&&i.forEach(r=>r.resizable=t)}_updateVisibleChildColumns(t){this._visibleChildColumns=Array.prototype.filter.call(t,i=>!i.hidden)}_childColumnsChanged(t){!this._autoHidden&&this.hidden&&(Array.prototype.forEach.call(t,i=>i.hidden=!0),this._updateVisibleChildColumns(t))}_updateFlexAndWidth(){this._visibleChildColumns&&(this._visibleChildColumns.length?this._setWidth("calc("+Array.prototype.reduce.call(this._visibleChildColumns,(t,i)=>t+" + "+(i.width||"0px").replace("calc",""),"").substring(3)+")"):this._setWidth("0px"),this._setFlexGrow(Array.prototype.reduce.call(this._visibleChildColumns,(t,i)=>t+i.flexGrow,0)))}_groupFrozenChanged(t,i){i!==void 0&&t!==void 0&&t!==!1&&Array.from(i).forEach(r=>r.frozen=t)}_groupHiddenChanged(t,i){i&&!this._preventHiddenCascade&&(this._ignoreVisibleChildColumns=!0,i.forEach(r=>r.hidden=t),this._ignoreVisibleChildColumns=!1),this._columnPropChanged("hidden")}_visibleChildColumnsChanged(t){this._colSpan=t.length,this._ignoreVisibleChildColumns||(t.length===0?this._autoHidden=this.hidden=!0:this.hidden&&this._autoHidden&&(this._autoHidden=this.hidden=!1))}_colSpanChanged(t,i,r){i&&(i.setAttribute("colspan",t),this._grid&&this._grid._a11yUpdateCellColspan(i,t)),r&&(r.setAttribute("colspan",t),this._grid&&this._grid._a11yUpdateCellColspan(r,t))}_getChildColumns(t){return Mc.getFlattenedNodes(t).filter(this._isColumnElement)}_addNodeObserver(){this._observer=new Mc(this,t=>{(t.addedNodes.filter(this._isColumnElement).length>0||t.removedNodes.filter(this._isColumnElement).length>0)&&(this._preventHiddenCascade=!0,this._rootColumns=this._getChildColumns(this),this._childColumns=this._rootColumns,this._preventHiddenCascade=!1,da.run(()=>{this._grid&&this._grid._updateColumnTree&&this._grid._updateColumnTree()}))}),this._observer.flush()}_isColumnElement(t){return t.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(t.localName)}}customElements.define(Sz.is,Sz);class Iz extends GS{static get template(){return s_`
      <template class="header" id="defaultHeaderTemplate">
        <vaadin-checkbox
          class="vaadin-grid-select-all-checkbox"
          aria-label="Select All"
          hidden$="[[_selectAllHidden]]"
          on-checked-changed="_onSelectAllCheckedChanged"
          checked="[[_isChecked(selectAll, _indeterminate)]]"
          indeterminate="[[_indeterminate]]"
        ></vaadin-checkbox>
      </template>
      <template id="defaultBodyTemplate">
        <vaadin-checkbox aria-label="Select Row" checked="{{selected}}"></vaadin-checkbox>
      </template>
    `}static get is(){return"vaadin-grid-selection-column"}static get properties(){return{width:{type:String,value:"58px"},flexGrow:{type:Number,value:0},selectAll:{type:Boolean,value:!1,notify:!0},autoSelect:{type:Boolean,value:!1},_indeterminate:Boolean,_previousActiveItem:Object,_selectAllHidden:Boolean}}static get observers(){return["_onSelectAllChanged(selectAll)"]}_pathOrHeaderChanged(t,i,r,s,o,c,u,g,b){!o.value||t===void 0&&c===void 0||(this._bodyTemplate=g=void 0,this.__cleanCellsOfTemplateProperties(o.value)),!r||i===void 0&&u===void 0||(this._headerTemplate=b=void 0,this.__cleanCellsOfTemplateProperties([r])),super._pathOrHeaderChanged(t,i,r,s,o,c,u,g,b)}__cleanCellsOfTemplateProperties(t){t.forEach(i=>{i._content.innerHTML="",delete i._instance,delete i._template})}_prepareHeaderTemplate(){const t=this._prepareTemplatizer(this._findTemplate(!0)||this.$.defaultHeaderTemplate);return t.templatizer.dataHost=t===this.$.defaultHeaderTemplate?this:this.dataHost,t}_prepareBodyTemplate(){const t=this._prepareTemplatizer(this._findTemplate()||this.$.defaultBodyTemplate);return t.templatizer.dataHost=t===this.$.defaultBodyTemplate?this:this.dataHost,t}constructor(){super(),this._boundOnActiveItemChanged=this._onActiveItemChanged.bind(this),this._boundOnDataProviderChanged=this._onDataProviderChanged.bind(this),this._boundOnSelectedItemsChanged=this._onSelectedItemsChanged.bind(this)}disconnectedCallback(){this._grid.removeEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.removeEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.removeEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.removeEventListener("selected-items-changed",this._boundOnSelectedItemsChanged),super.disconnectedCallback()}connectedCallback(){super.connectedCallback(),this._grid&&(this._grid.addEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.addEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.addEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.addEventListener("selected-items-changed",this._boundOnSelectedItemsChanged))}_onSelectAllChanged(t){t!==void 0&&this._grid&&(this._selectAllChangeLock||(this._grid.selectedItems=t&&Array.isArray(this._grid.items)?this._grid._filter(this._grid.items):[]))}_arrayContains(t,i){for(var r=0;t&&i&&i[r]&&t.indexOf(i[r])>=0;r++);return r==i.length}_onSelectAllCheckedChanged(t){this.selectAll=this._indeterminate||t.target.checked}_isChecked(t,i){return i||t}_onActiveItemChanged(t){const i=t.detail.value;if(this.autoSelect){const r=i||this._previousActiveItem;r&&this._grid._toggleItem(r)}this._previousActiveItem=i}_onSelectedItemsChanged(){this._selectAllChangeLock=!0,Array.isArray(this._grid.items)&&(this._grid.selectedItems.length?this._arrayContains(this._grid.selectedItems,this._grid._filter(this._grid.items))?(this.selectAll=!0,this._indeterminate=!1):(this.selectAll=!1,this._indeterminate=!0):(this.selectAll=!1,this._indeterminate=!1)),this._selectAllChangeLock=!1}_onDataProviderChanged(){this._selectAllHidden=!Array.isArray(this._grid.items)}}customElements.define(Iz.is,Iz),nw("vaadin-grid-sorter",sw`
    :host {
      justify-content: flex-start;
      align-items: baseline;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    [part='content'] {
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [part='indicators'] {
      margin-left: var(--lumo-space-s);
    }

    :host(:not([direction])) [part='indicators']::before {
      opacity: 0.2;
    }

    :host([direction]) {
      color: var(--lumo-primary-text-color);
    }

    [part='order'] {
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part='indicators'] {
      margin-right: var(--lumo-space-s);
      margin-left: 0;
    }
  `,{moduleId:"lumo-grid-sorter"});const Ez=document.createElement("template");Ez.innerHTML=`
  <style>
    @font-face {
      font-family: 'vaadin-grid-sorter-icons';
      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAA0AAAAABuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEFAAAABkAAAAcfep+mUdERUYAAAP4AAAAHAAAAB4AJwAOT1MvMgAAAZgAAAA/AAAAYA8TBPpjbWFwAAAB7AAAAFUAAAFeF1fZ4mdhc3AAAAPwAAAACAAAAAgAAAAQZ2x5ZgAAAlgAAABcAAAAnMvguMloZWFkAAABMAAAAC8AAAA2C5Ap72hoZWEAAAFgAAAAHQAAACQGbQPHaG10eAAAAdgAAAAUAAAAHAoAAABsb2NhAAACRAAAABIAAAASAIwAYG1heHAAAAGAAAAAFgAAACAACwAKbmFtZQAAArQAAAECAAACZxWCgKhwb3N0AAADuAAAADUAAABZCrApUXicY2BkYGAA4rDECVrx/DZfGbhZGEDgyqNPOxH0/wNMq5kPALkcDEwgUQBWRA0dAHicY2BkYGA+8P8AAwMLAwgwrWZgZEAFbABY4QM8AAAAeJxjYGRgYOAAQiYGEICQSAAAAi8AFgAAeJxjYGY6yziBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKoAkwODAwvmRiPvD/AIMDMxCD1CDJKjAwAgBktQsXAHicY2GAAMZQCM0EwqshbAALxAEKeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCi+Z/v/9/x+sSuElA4T9/4k4K1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAJd4NIQAAAAAAAAAACAAIABAAGAAmAEAATgAAeJyNjLENgDAMBP9tIURJwQCMQccSZgk2i5fIYBDAidJjycXr7x5EPwE2wY8si7jmyBNXGo/bNBerxJNrpxhbO3/fEFpx8ZICpV+ghxJ74fAMe+h7Ox14AbrsHB14nK2QQWrDMBRER4mTkhQK3ZRQKOgCNk7oGQqhhEIX2WSlWEI1BAlkJ5CDdNsj5Ey9Rncdi38ES+jzNJo/HwTgATcoDEthhY3wBHc4CE+pfwsX5F/hGe7Vo/AcK/UhvMSz+mGXKhZU6pww8ISz3oWn1BvhgnwTnuEJf8Jz1OpFeIlX9YULDLdFi4ASHolkSR0iuYdjLak1vAequBhj21D61Nqyi6l3qWybGPjySbPHGScGJl6dP58MYcQRI0bts7mjebBqrFENH7t3qWtj0OuqHnXcW7b0HOTZFnKryRGW2hFX1m0O2vEM3opNMfTau+CS6Z3Vx6veNnEXY6jwDxhsc2gAAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSrpYEBlIbxjQDrzgsuAAAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKyoz1cD0o087YTQATOcIewAAAA==) format('woff');
      font-weight: normal;
      font-style: normal;
    }
  </style>
`,document.head.appendChild(Ez.content);class Mz extends D8(j8(jc)){static get template(){return s_`
      <style>
        :host {
          display: inline-flex;
          cursor: pointer;
          max-width: 100%;
        }

        [part='content'] {
          flex: 1 1 auto;
        }

        [part='indicators'] {
          position: relative;
          align-self: center;
          flex: none;
        }

        [part='order'] {
          display: inline;
          vertical-align: super;
        }

        [part='indicators']::before {
          font-family: 'vaadin-grid-sorter-icons';
          display: inline-block;
        }

        :host(:not([direction])) [part='indicators']::before {
          content: '\\e901';
        }

        :host([direction='asc']) [part='indicators']::before {
          content: '\\e900';
        }

        :host([direction='desc']) [part='indicators']::before {
          content: '\\e902';
        }
      </style>

      <div part="content">
        <slot></slot>
      </div>
      <div part="indicators">
        <span part="order">[[_getDisplayOrder(_order)]]</span>
      </div>
    `}static get is(){return"vaadin-grid-sorter"}static get properties(){return{path:String,direction:{type:String,reflectToAttribute:!0,notify:!0,value:null},_order:{type:Number,value:null},_isConnected:{type:Boolean,observer:"__isConnectedChanged"}}}static get observers(){return["_pathOrDirectionChanged(path, direction)"]}ready(){super.ready(),this.addEventListener("click",this._onClick.bind(this))}connectedCallback(){super.connectedCallback(),this._isConnected=!0}disconnectedCallback(){super.disconnectedCallback(),this._isConnected=!1}_pathOrDirectionChanged(){this.__dispatchSorterChangedEvenIfPossible()}__isConnectedChanged(t,i){i!==!1&&this.__dispatchSorterChangedEvenIfPossible()}__dispatchSorterChangedEvenIfPossible(){this.path!==void 0&&this.direction!==void 0&&this._isConnected&&this.dispatchEvent(new CustomEvent("sorter-changed",{bubbles:!0,composed:!0}))}_getDisplayOrder(t){return t===null?"":t+1}_onClick(t){const i=this.getRootNode().activeElement;this!==i&&this.contains(i)||(t.preventDefault(),this.direction==="asc"?this.direction="desc":this.direction==="desc"?this.direction=null:this.direction="asc")}}customElements.define(Mz.is,Mz);class Tz extends GS{static get template(){return s_`
      <template class="header" id="headerTemplate">
        <vaadin-grid-sorter path="[[path]]" direction="{{direction}}">[[_getHeader(header, path)]]</vaadin-grid-sorter>
      </template>
    `}static get is(){return"vaadin-grid-sort-column"}static get properties(){return{path:String,direction:{type:String,notify:!0}}}_prepareHeaderTemplate(){const t=this._prepareTemplatizer(this.$.headerTemplate);return t.templatizer.dataHost=this,t}_getHeader(t,i){return t||this._generateHeader(i)}}customElements.define(Tz.is,Tz);const Cz={selectionColumn:!0,columnMenus:!0},T2="esri-grid",K8e="compact column-borders",w1={base:T2,content:`${T2}__content`,grid:`${T2}__grid`,noColumnMenu:`${T2}--no-column-menu`,widget:"esri-widget"};let mr=class extends ar(ki){constructor(e,t){super(e,t),this._grid=null,this._columnElements=[],this._isDataLoaded=!1,this.itemIdPath=null,this.messages=null,this.viewModel=new PX,this.visibleElements={...Cz}}initialize(){this.handles.add([this.columns.on("change",()=>this.onColumnChange()),ge(()=>{var e;return(e=this.viewModel)==null?void 0:e.size},()=>this._updateGridSize()),ge(()=>{var e;return(e=this.store)==null?void 0:e.state},(e,t)=>{e!=="ready"||t!=="loaded"&&t!=="error"||this.refreshPageCache()}),$i(()=>this.highlightIds,"change",e=>{const{added:t,removed:i}=e,r=t.map(o=>{var c;return((c=this.store)==null?void 0:c.getLocalItemByKey(o))||{objectId:o}}),s=i.map(o=>{var c;return((c=this.store)==null?void 0:c.getLocalItemByKey(o))||{objectId:o}});this._deselectRows(s),this._selectRows(r)}),$i(()=>{var e,t;return(t=(e=this._grid)==null?void 0:e.$)==null?void 0:t.table},"scroll",()=>{var e;return(e=this.viewModel)==null?void 0:e.closeColumnMenus()})])}destroy(){var e;this.handles.removeAll(),this.resetColumns(),(e=this.columns)==null||e.destroy()}resetColumns(){this.columns.items.forEach(e=>e.destroy()),this.columns.removeAll()}get cellClassNameGenerator(){return this.viewModel.cellClassNameGenerator}set cellClassNameGenerator(e){this.viewModel.cellClassNameGenerator=e}get columns(){return this.viewModel.columns}set columns(e){this.viewModel.columns=e}get columnReorderingEnabled(){return this.viewModel.columnReorderingEnabled}set columnReorderingEnabled(e){this.viewModel.columnReorderingEnabled=e}get dataProvider(){return this.viewModel.dataProvider}set dataProvider(e){this.viewModel.dataProvider=e}get highlightIds(){return this.viewModel.highlightIds}set highlightIds(e){this.viewModel.highlightIds=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get multiSortEnabled(){return this.viewModel.multiSortEnabled}set multiSortEnabled(e){this.viewModel.multiSortEnabled=e}get pageSize(){return this.viewModel.pageSize}set pageSize(e){this.viewModel.pageSize=e}get rowDetailsRenderer(){return this.viewModel.rowDetailsRenderer}set rowDetailsRenderer(e){this.viewModel.rowDetailsRenderer=e}get size(){return this.viewModel.size}get sortOrders(){var e;return(e=this._grid)!=null&&e._sorters?this._grid._sorters.filter(t=>!!t).map(({direction:t,path:i})=>({direction:t,path:i})):[]}get store(){return this.viewModel.store}set store(e){this.viewModel.store=e}castVisibleElements(e){return{...Cz,...e}}render(){const{columnMenus:e}=this.visibleElements;return J("div",{bind:this,class:this.classes(w1.base,w1.widget,{[w1.noColumnMenu]:!e})},J("div",{bind:this,class:w1.content},this.renderGrid()))}renderGrid(){return J("vaadin-grid",{_safari:!1,afterCreate:this._afterGridCreate,afterUpdate:this._afterGridUpdate,bind:this,cellClassNameGenerator:this.cellClassNameGenerator,class:w1.grid,columnReorderingAllowed:this.columnReorderingEnabled,dataProvider:this.dataProvider,id:`${this.id}_grid`,itemIdPath:this.itemIdPath,multiSort:this.multiSortEnabled,pageSize:this.pageSize,ref:"grid",rowDetailsRenderer:this.rowDetailsRenderer,size:this.size},this.renderAllColumns())}renderAllColumns(){var e;return this.viewModel.state!=="disabled"&&((e=this.columns)==null?void 0:e.length)?[this.renderSelectionColumn(),this.renderColumns()]:null}renderSelectionColumn(){return J("vaadin-grid-selection-column",{_selectAllHidden:!0,selectAll:!1,bind:this,hidden:!this.visibleElements.selectionColumn,sortable:!1,frozen:!Zn(this.container)})}renderColumns(){return this.columns.items.map((e,t)=>"columns"in e?this.renderGroupColumn(e,t):J("vaadin-grid-column",{...this.getColumnProps(e,t)})).filter(U)}renderGroupColumn(e,t){const i=this.getColumnProps(e,t);if(i.hidden||!e.columns)return null;const r=e.columns.filter(({hidden:s})=>!s);return r.length?J("vaadin-grid-column-group",{...i},r.map(s=>J("vaadin-grid-column",{...this.getColumnProps(s,t)}))):null}getColumnProps(e,t){const{id:i}=this,{autoWidth:r,direction:s,flexGrow:o,frozen:c,header:u,hidden:g,path:b,resizable:S,textAlign:E,width:A}=e;return{autoWidth:r,direction:s,flexGrow:o,frozen:c,header:u,hidden:g,key:`${i}_${u}_${U(t)?t:b}`,path:b,resizable:S,"text-align":E,width:typeof A=="number"?`${A}px`:A,bind:this,afterCreate:this._afterColumnCreate,afterRemoved:this._afterColumnRemoved}}clearSelection(){this._clearSelection(),this.scheduleRender()}clearSort(){var t,i;let e=!1;this._grid&&((t=this._grid._sorters)!=null&&t.length&&(this._grid._sorters.forEach(r=>{r._order=null,r.direction=null}),e=!0),((i=this.columns)==null?void 0:i.length)&&this.columns.some(r=>!!r.direction)&&(this.columns.forEach(r=>r.direction=null),e=!0),e&&(this.notifyChange("sortOrders"),this.scheduleRender()))}findColumn(e){this.viewModel.findColumn(e)}generateCellClassNames(){var e;(e=this._grid)==null||e.generateCellClassNames()}getSlotElementByName(e){var t,i,r;return(r=(i=(t=this._grid)==null?void 0:t.shadowRoot)==null?void 0:i.querySelector(`slot[name='${e}']`))!=null?r:null}hideColumn(e){var t;(t=this.viewModel)==null||t.hideColumn(e),this.scheduleRender()}notifyResize(){var e;(e=this._grid)==null||e.notifyResize()}recalculateColumnWidths(){var e;(e=this._grid)==null||e.recalculateColumnWidths()}async reset(){var e;this._isDataLoaded=!1,this._clearSelection(),await((e=this.store)==null?void 0:e.reset()),this.scrollToTop()}refreshPageCache(){var e;(e=this._grid)==null||e.clearCache()}selectRows(e){const t=e==null?void 0:e.filter(r=>!this.highlightIds.includes(r.objectId)),i=t.map(r=>r.objectId);i.length&&(this.highlightIds.addMany(i),this._selectRows(t))}deselectRows(e){const t=(e==null?void 0:e.map(i=>i.objectId))||[];t.length&&(this.highlightIds.removeMany(t),this._deselectRows(e))}showColumn(e){var t;(t=this.viewModel)==null||t.showColumn(e),this.scheduleRender()}sort({path:e,direction:t}){var i;(i=this.viewModel)==null||i.sortColumn(e,t),this.notifyChange("sortOrders")}scrollToIndex(e){var t;(t=this._grid)==null||t.scrollToIndex(e)}scrollToTop(){var e;(e=this._grid)==null||e.scrollToIndex(0)}isEditingActive(){return!!this._getActiveEditInfo().length}onColumnChange(){this._syncColumnRenderers()}_afterGridCreate(e){const t=this._grid=e;t.setAttribute("theme",K8e),customElements.whenDefined("vaadin-grid").then(()=>this._addGridEventListeners()),t.__updateSorter=i=>{const r=t._sorters,s=!r.includes(i);if(i.direction||!s){if(i._order=null,t.multiSort)t._removeArrayItem(r,i),i.direction&&(U(i._initialOrder)?(s?r[i._initialOrder]=i:r.splice(i._initialOrder,0,i),i._initialOrder=null):r.unshift(i)),t.__updateSortOrders();else if(i.direction){const o=r.filter(c=>c!==i);t._sorters=[i],o.forEach(c=>{c._order=null,c.direction=null})}}}}_afterGridUpdate(e){this._grid||(this._grid=e)}_afterColumnCreate(e){this._applyRenderersToColumnElement(e),this._columnElements.push(e)}_afterColumnRemoved(e){const t=this._columnElements.indexOf(e,0);t>-1&&this._columnElements.splice(t,1)}_syncColumnRenderers(){this._columnElements.forEach(e=>{this._applyRenderersToColumnElement(e)})}_updateGridSize(){this._grid&&(this._grid.size=this.size||0,this.scheduleRender())}_getActiveEditInfo(){return!this.columns||this.columns.length?[]:this.columns.filter(e=>"activeEditInfo"in e).map(e=>e.activeEditInfo).items}_addGridEventListeners(){const e=this._grid;eu(e),this.handles.add([hc(e,"click",t=>this._onRowClick(t)),hc(e,"selected-items-changed",t=>this._onSelectionChange(t)),hc(e,"sorter-changed",()=>this.notifyChange("sortOrders")),hc(e,"loading-changed",t=>{this._isDataLoaded||t.detail.value===!1&&(this._isDataLoaded=!0,this._selectRowsOnLoad())})])}_onRowClick(e){const t=this._grid;eu(t);const i=t.getEventContext(e),{item:r,section:s}=i;r&&s&&s!=="details"&&s!=="header"&&this.emit("row-click",{context:i,native:e})}_clearSelection(){this._grid&&(this.highlightIds.removeAll(),this._grid.selectedItems=[],this._grid.render())}_selectRowsOnLoad(){var r;const e=this._grid;if(!e)return;const t=e.selectedItems.slice();((r=this.highlightIds)==null?void 0:r.filter(s=>t.findIndex(o=>o.objectId===s)<0)).forEach(s=>{var o;return e.selectedItems.push(((o=this.store)==null?void 0:o.getLocalItemByKey(s))||{objectId:s})}),e.render()}_selectRows(e){const t=this._grid;if(!t)return;const i=t.selectedItems.slice();e.filter(r=>i.findIndex(s=>s.objectId===r.objectId)<0).forEach(r=>t.selectedItems.push(r)),t.render()}_deselectRows(e){const t=this._grid;if(!t)return;const i=t.selectedItems.slice();e.forEach(r=>{const s=i.findIndex(o=>o.objectId===r.objectId);s>-1&&i.splice(s,1)}),t.selectedItems=i,t.render()}_onSelectionChange(e){const t=e;if(t.detail.path==="selectedItems.splices"){const{removed:i,object:r}=t.detail.value.indexSplices[0],s=r.filter(c=>!this.highlightIds.includes(c.objectId)).map(c=>c.objectId),o=i.filter(c=>this.highlightIds.includes(c.objectId)).map(c=>c.objectId);this.highlightIds.removeMany(o),this.highlightIds.addMany(s)}}_applyRenderersToColumnElement(e){const t=e.path,i=this.viewModel.findColumn(t);if(i)try{const{renderFunction:r,footerRenderFunction:s,headerRenderFunction:o}=i;r&&"renderer"in e&&(e.renderer=(c,u,g)=>r({root:c,column:u,rowData:g})),s&&(e.footerRenderer=(c,u)=>s({root:c,column:u})),o&&(e.headerRenderer=(c,u)=>o({root:c,column:u}))}catch{}}};v([_()],mr.prototype,"_grid",void 0),v([_()],mr.prototype,"_isDataLoaded",void 0),v([_()],mr.prototype,"cellClassNameGenerator",null),v([_()],mr.prototype,"columns",null),v([_()],mr.prototype,"columnReorderingEnabled",null),v([_()],mr.prototype,"dataProvider",null),v([_()],mr.prototype,"highlightIds",null),v([_()],mr.prototype,"itemIdPath",void 0),v([_()],mr.prototype,"label",null),v([_(),ui("esri/widgets/FeatureTable/t9n/FeatureTable")],mr.prototype,"messages",void 0),v([_()],mr.prototype,"multiSortEnabled",null),v([_()],mr.prototype,"pageSize",null),v([_()],mr.prototype,"rowDetailsRenderer",null),v([_()],mr.prototype,"size",null),v([_({readOnly:!0})],mr.prototype,"sortOrders",null),v([_()],mr.prototype,"store",null),v([_()],mr.prototype,"viewModel",void 0),v([_()],mr.prototype,"visibleElements",void 0),v([_t("visibleElements")],mr.prototype,"castVisibleElements",null),mr=v([K("esri.widgets.FeatureTable.Grid.Grid")],mr);const Z8e=mr;let zm=class extends M9{constructor(e){super(e),this.columns=null,this.sortable=!1}get path(){return this.header}set path(e){this.header=e}};v([_()],zm.prototype,"columns",void 0),v([_()],zm.prototype,"path",null),v([_({readOnly:!0})],zm.prototype,"sortable",void 0),zm=v([K("esri.widgets.FeatureTable.Grid.GroupColumn")],zm);const X8e=zm,JQ="esri.widgets.FeatureTable.support.FeatureStore",Q8e=Ie.getLogger(JQ);function g4(e,t,i){Q8e.error(new de(e,t,i))}let cs=class extends Re{constructor(e){super(e),this._loaded=!1,this._loadError=!1,this._loading=!1,this._editOperationQueue=[],this._queryOperationQueue=[],this._objectIdCache=new Be,this._hasStaleCache=!1,this.count=0,this.failures=new Be,this.itemCache=new Be,this.relatedRecordsEnabled=!1}destroy(){this.layer=null,this.itemCache&&this.itemCache.destroy(),this.failures&&this.failures.destroy(),this._set("itemCache",null)}set attachmentsEnabled(e){this._reset(),this._set("attachmentsEnabled",e),this.notifyChange("state")}set filterGeometry(e){this._reset(),this._set("filterGeometry",e),this.notifyChange("state")}set layer(e){this._reset(),this._set("layer",e),this.notifyChange("state")}set objectIds(e){this._reset(),this._set("objectIds",e||null),this.notifyChange("state")}get orderByFields(){return this._get("orderByFields")||[]}set orderByFields(e){const t=this.orderByFields;yw(e,t)||(this.itemCache.removeAll(),this._hasStaleCache=!0,this._set("orderByFields",e))}get querying(){return this._queryOperationQueue.length>0}set returnGeometry(e){this._reset(),this._set("returnGeometry",e),this.notifyChange("state")}get state(){const{layer:e,_loaded:t,_loadError:i,_loading:r}=this;return i?"error":!e||this.get("layer.loadError")?"disabled":r?"loading":this.get("layer.loadStatus")==="loaded"&&t?"loaded":"ready"}get syncing(){return this._editOperationQueue.length>0}set timeExtent(e){this._reset(),this._set("timeExtent",e),this.notifyChange("state")}get where(){return this._get("where")||null}set where(e){this._reset(),this._set("where",e),this.notifyChange("state")}async load(){this._reset();const{layer:e}=this;if(e){this._loading=!0,this.notifyChange("state");try{await e.when(),await this._syncLayerInfo(),this._loading=!1,this._loaded=!0,this.notifyChange("state")}catch(t){throw this._reset(),this._loadError=!0,this.notifyChange("state"),g4("store:load-error","An error ocurred.",{error:t}),t}}}async refreshLayerInfo(){return this._syncLayerInfo()}async addItems(e){}async fetchItems(e){const{page:t,pageSize:i}=e,r=t*i,s=r+i,{layer:o,state:c}=this;if(!o||c!=="loaded")return[];this.notifyChange("querying");const u=await this._query({start:r,num:s,page:t,pageSize:i});return this.notifyChange("state"),u}async verifyFeaturesByObjectId(e){const{layer:t,state:i}=this;if(!t||i!=="loaded")return[];const{features:r}=await this._verifyFeaturesByObjectId(e);return e.map(s=>r.some(o=>(o==null?void 0:o.getObjectId())===s))}async query(e){const{layer:t,state:i}=this;if(!t||i!=="loaded")return[];this.notifyChange("querying");const r=await this._query(e);return this.notifyChange("state"),r}async removeItemAt(e){}async reset(){this._reset()}async updateItem(e){return this._update(e).then(()=>{})}async deleteRowsByObjectId(e){return this._delete({objectIds:e})}getLocalItemByKey(e){return this.getItemByObjectId(e)}getItemByObjectId(e){const{itemCache:t,layer:{objectIdField:i}}=this;return t.find(r=>r.feature.attributes[i]===e)}getLocalItemAt(e){return this.itemCache.getItemAt(e)}getItemAt(e){return Promise.resolve(this.itemCache.getItemAt(e))}getObjectIdIndex(e){const{itemCache:t,layer:{objectIdField:i}}=this;return t.findIndex(r=>r.feature.attributes[i]===e)}_reset(){this.itemCache.removeAll(),this.failures.removeAll(),this._editOperationQueue=[],this._queryOperationQueue=[],this._hasStaleCache=!1,this._loading=!1,this._loaded=!1,this._loadError=!1,this._set("count",0),this._objectIdCache.removeAll(),this.notifyChange("querying"),this.notifyChange("syncing"),this.notifyChange("state")}_getIdsFromFeatures(e){return e.map(t=>t.attributes[this.layer.objectIdField])}_toFeatureData(e,t){const{layer:{objectIdField:i}}=this;return e.map(r=>{const{attributes:s}=r,o=s[i];return{objectId:o,feature:r,attachments:t?t[o]:null,relatedRecords:null}})}async _update(e){const{layer:t}=this,{operations:i}=Tn(t);if(!i.supportsUpdate||!("applyEdits"in t))throw new de("store:update-error","Update is not supported.");const{index:r,name:s,value:o}=e,c=await this.getItemAt(r);if(!c||!c.feature)throw new de("store:update-error","Feature with provided 'objectId' not found.");const{feature:u}=c,g=ve(u.attributes);g[s]=o;const b=new wr({attributes:g}),S=t.applyEdits({updateFeatures:[b]}).then(E=>{const{updateFeatureResults:A}=E,O=A.find(L=>!!L.error);if(O)throw O.error;return A.length&&(u.attributes=g),E});return this._queueEditOperation(()=>S)}async _delete(e){const{layer:t}=this,{operations:i}=Tn(t);if(!i.supportsDelete||!("applyEdits"in t))throw new de("store:delete-error","Delete is not supported.");const{objectIds:r}=e,s=r.map(o=>this.getItemByObjectId(o).feature);return this._queueEditOperation(()=>t.applyEdits({deleteFeatures:s}))}async _query(e){const{refresh:t}=e;return t===!0?(this.itemCache.removeAll(),this._syncLayerInfo().then(()=>this._queryFeatureData(e))):(this._hasStaleCache&&(await this._updateIds(),this._hasStaleCache=!1),this._queryFeatureData(e))}async _queryFeatureData(e){return this._queueQueryOperation(async()=>{const{features:t}=await this._queryFeatures(e),i=this._getIdsFromFeatures(t),r=await this._queryAttachments(i);return this._toFeatureData(t,r)||[]})}async _syncLayerInfo(){await this._updateCount(),await this._updateIds()}async _updateCount(){await this._queryCount().then(e=>this._set("count",e))}async _updateIds(){var e,t,i;(i=(t=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:t.query)!=null&&i.supportsPagination||(this._objectIdCache.removeAll(),await this._queryForObjectIds().then(r=>this._objectIdCache.addMany(r)))}_queryCount(){const{filterGeometry:e,layer:t}=this,{capabilities:{query:{supportsCacheHint:i}}}=t,r=t.createQuery();return r.geometry=e,r.returnGeometry=!1,r.where=this._getWhere(),r.timeExtent=this._getTimeExtent(),r.objectIds=this.objectIds,i&&(r.cacheHint=!0),t.queryFeatureCount(r)}_queryForObjectIds(){const{filterGeometry:e,layer:t,orderByFields:i}=this,{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s}}}=t,o=t.createQuery();return o.geometry=e,o.outFields=[t.objectIdField],o.returnGeometry=!1,o.where=this._getWhere(),o.timeExtent=this._getTimeExtent(),o.objectIds=this.objectIds,s&&(o.orderByFields=i),r&&(o.cacheHint=!0),t.queryObjectIds(o)}async _queryFeatures(e){var E;const{layer:t}=this;if(!((E=Tn(t))!=null&&E.operations.supportsQuery))throw new de("store:query-error","Layer does not support query operation.");const{filterGeometry:i,layer:{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s,supportsPagination:o}}},orderByFields:c,returnGeometry:u}=this,{start:g,pageSize:b}=e,S=t.createQuery();return S.returnGeometry=u,o?(S.start=g,S.num=b,S.where=this._getWhere(),S.timeExtent=this._getTimeExtent(),S.objectIds=this.objectIds):S.objectIds=this.objectIds||this._getObjectIdsForPage(g,b),s&&(S.orderByFields=c),i&&(S.geometry=i),r&&(S.cacheHint=!0),t.queryFeatures(S)}async _verifyFeaturesByObjectId(e){var u;const{layer:t}=this;if(!((u=Tn(t))!=null&&u.operations.supportsQuery))throw new de("store:query-error","Layer does not support query operation.");const{filterGeometry:i,layer:{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s}}},orderByFields:o}=this,c=t.createQuery();return c.where=this._getWhere(),c.timeExtent=this._getTimeExtent(),c.returnGeometry=!1,c.objectIds=e,c.outFields=[t.objectIdField],s&&(c.orderByFields=o),i&&(c.geometry=i),r&&(c.cacheHint=!0),t.queryFeatures(c)}_getObjectIdsForPage(e,t){const i=this._objectIdCache.toArray();return i.length>=e+t?i.slice(e,e+t):i.slice(e)}_queryAttachments(e){const{attachmentsEnabled:t,layer:i}=this,{capabilities:{data:{supportsAttachment:r},operations:{supportsQueryAttachments:s}}}=i;return t&&r&&s&&"queryAttachments"in i?i.queryAttachments(new eS({objectIds:e,where:this._getWhere()})):Promise.resolve(null)}_queueQueryOperation(e){return this._queryOperationQueue.push(e),this.notifyChange("querying"),e().then(t=>this._queryOperationQueue.includes(e)?(this.itemCache.addMany(t),t):[]).catch(t=>{g4("store:query-error","An error ocurred.",{error:t});const i={error:t,retry:()=>{this.failures.remove(i),this._queueQueryOperation(e)},cancel:()=>this.failures.remove(i)};return this.failures.add(i),[]}).then(t=>(ny(this._queryOperationQueue,e),this.notifyChange("querying"),t))}_queueEditOperation(e){return this._editOperationQueue.push(e),this.notifyChange("syncing"),e().then(t=>(ny(this._editOperationQueue,e),this.notifyChange("syncing"),t)).catch(t=>{g4("store:edit-error","An error ocurred.",{error:t});const i={error:t,retry:()=>{this.failures.remove(i),this._queueEditOperation(e)},cancel:()=>this.failures.remove(i)};throw this.failures.add(i),ny(this._editOperationQueue,e),this.notifyChange("syncing"),t})}_getWhere(){var e;return this.where||((e=this.layer)==null?void 0:e.definitionExpression)||"1=1"}_getTimeExtent(){const e=this.layer;return this.timeExtent||e&&"timeExtent"in e&&e.timeExtent||null}};v([_()],cs.prototype,"attachmentsEnabled",null),v([_({readOnly:!0})],cs.prototype,"count",void 0),v([_({readOnly:!0})],cs.prototype,"failures",void 0),v([_()],cs.prototype,"filterGeometry",null),v([_({readOnly:!0})],cs.prototype,"itemCache",void 0),v([_({value:null})],cs.prototype,"layer",null),v([_({value:null})],cs.prototype,"objectIds",null),v([_()],cs.prototype,"orderByFields",null),v([_({readOnly:!0})],cs.prototype,"querying",null),v([_()],cs.prototype,"relatedRecordsEnabled",void 0),v([_({value:!1})],cs.prototype,"returnGeometry",null),v([_({readOnly:!0})],cs.prototype,"state",null),v([_({readOnly:!0})],cs.prototype,"syncing",null),v([_()],cs.prototype,"timeExtent",null),v([_()],cs.prototype,"where",null),cs=v([K(JQ)],cs);const YQ=cs;let yi=class extends ar(PX){constructor(e){super(e),this._debounceRefresh=o5(()=>this._refresh()),this._defaultHiddenFields=["CreationDate","Creator","EditDate","Editor","GlobalID"],this._highlights=new Vr,this.activeFilters=new Be,this.autoRefreshEnabled=!0,this.cellClassNameGenerator=(r,s)=>r.path||null,this.columns=new Be,this.dataProvider=async(r,s)=>{const{store:o}=this,{page:c,pageSize:u,sortOrders:g}=r,b=this._sortOrdersToLayerOrderByFields(g);s&&(o?(await o.set({orderByFields:b}),o.state!=="loaded"&&o.state!=="loading"&&await o.load(),s&&s(await o.fetchItems({page:c,pageSize:u}))):s&&s([]))},this.editingEnabled=!1,this.fieldConfigs=null,this.grid=null,this.highlightEnabled=!0,this.itemIdPath="objectId",this.messagesCommon=null,this.messagesURIUtils=null,this.relatedRecordsEnabled=!1,this.store=null,this.tableTemplate=null,this.view=null;const{hiddenFields:t,itemIdPath:i}=this;t.addMany(this._defaultHiddenFields),this._onLayerRefresh=this._onLayerRefresh.bind(this),this._set("store",new YQ),this._set("grid",new Z8e({itemIdPath:i,viewModel:this}))}initialize(){const e=async()=>{this.messages=await py("esri/widgets/FeatureTable/t9n/FeatureTable"),this.messagesCommon=await py("esri/t9n/common"),this.messagesURIUtils=await py("esri/widgets/support/t9n/uriUtils")};e(),this.handles.add([m5(()=>{e(),this._generateColumns()}),$i(()=>this.highlightIds,"change",t=>this._onHighlightIdsChange(t),{onListenerAdd:()=>{this.highlightIds.forEach(t=>this._highlight(t))},onListenerRemove:()=>{this.highlightIds.forEach(t=>this._unhighlight(t))}}),ge(()=>this.layerView,()=>{var t;this._highlights.removeAll(),this.layerView&&this.highlightEnabled&&((t=this.highlightIds)==null||t.forEach(i=>this._highlight(i)))}),ge(()=>this.highlightEnabled,()=>{var t;this._highlights.removeAll(),this.highlightEnabled&&((t=this.highlightIds)==null||t.forEach(i=>this._highlight(i)))}),ge(()=>this.relatedRecordsEnabled,t=>this.store.relatedRecordsEnabled=t),ge(()=>{var t;return(t=this.layer)==null?void 0:t.loaded},t=>t&&this._onLayerLoad()),ge(()=>this.store.state,t=>{var i;t==="loaded"&&((i=this.grid)==null||i.scrollToTop())}),ge(()=>[this.messages,this.tableTemplate,this.fieldConfigs],()=>{var t;return((t=this.layer)==null?void 0:t.loaded)&&this._generateColumns()}),ge(()=>this.editingEnabled,t=>{var i;this.columns.forEach(r=>{"editingEnabled"in r&&(r.editingEnabled=t)}),(i=this.grid)==null||i.onColumnChange()}),ge(()=>{var t;return(t=this.layer)==null?void 0:t.definitionExpression},(t,i)=>(t||i)&&this.store.state==="loaded"&&this.reset()),ge(()=>this.layer&&"timeExtent"in this.layer&&this.layer.timeExtent,(t,i)=>(t||i)&&!this.timeExtent&&this.store.state==="loaded"&&this.reset()),$i(()=>this.layer,"refresh",t=>this._onLayerRefresh(t))])}destroy(){var e,t;this._resetColumns(),this.handles.removeAll(),this._highlights.removeAll(),this._highlights.destroy(),(e=this.grid)==null||e.destroy(),(t=this.columns)==null||t.destroy(),this.layer=null,this.view=null}get activeSortOrders(){var e;return(e=this.grid)!=null&&e.sortOrders?this.grid.sortOrders.map(({path:t,direction:i})=>({fieldName:t,direction:i})):[]}set attachmentsEnabled(e){this.attachmentsEnabled!==e&&(this._set("attachmentsEnabled",e),this._generateColumns(),this.store.attachmentsEnabled=e)}set filterGeometry(e){if(!this.filterGeometry&&!e)return;const t=this.activeFilters.find(i=>i.type==="geometry");t&&this.activeFilters.remove(t),this._set("filterGeometry",e),this.store.filterGeometry=e,e&&this.activeFilters.add({type:"geometry",geometry:e})}get hiddenFields(){return this._get("hiddenFields")||new Be}set hiddenFields(e){Array.isArray(e)?this._set("hiddenFields",new Be(e)):this._set("hiddenFields",e)}get highlightOnRowSelectEnabled(){return this.highlightEnabled}set highlightOnRowSelectEnabled(e){this.highlightEnabled=e}set layer(e){var t;this._set("layer",e),(t=this.grid)==null||t.clearSort(),this._resetColumns(),this.store.layer=e,e&&(e.loaded?this._onLayerLoad():e.load()),this.notifyChange("state")}get layerView(){var e;return((e=this.view)==null?void 0:e.allLayerViews.find(t=>t.layer===this.layer))||null}set messages(e){var t;(t=this.grid)==null||t.set("messages",e),this._set("messages",e)}get state(){const{store:e}=this;return e&&e.state!=="disabled"?e.state==="loading"?"loading":e.state==="loaded"?"loaded":"ready":"disabled"}set timeExtent(e){this._set("timeExtent",e),this.store.timeExtent=e}clearHighlights(){this._highlights.removeAll()}clearSelection(){var e;(e=this.grid)==null||e.clearSelection()}async deleteSelection(){const e=this.highlightIds.toArray();if(!(e!=null&&e.length))return;const{deleteFeatureResults:t}=await this.store.deleteRowsByObjectId(e),i=t.filter(r=>!r.error).map(r=>r.objectId);i.length&&(this.deselectRows(i),await this.refresh())}deselectRows(e){const t=this._getStoreItemsFromSelectionParams(e);this.grid.deselectRows(t)}filterBySelection(){const e=this.highlightIds.toArray();e.length&&(this.clearSelectionFilter(),this.store.objectIds=e,this.activeFilters.add({type:"selection",objectIds:e}))}getObjectIdIndex(e){var t;return(t=this.store)==null?void 0:t.getObjectIdIndex(e)}getValue(e,t){var i,r;return(r=(i=this.store.getItemByObjectId(e))==null?void 0:i.feature)==null?void 0:r.attributes[t]}get highlightIds(){return this._get("highlightIds")||new Be}set highlightIds(e){Array.isArray(e)?this._set("highlightIds",new Be(e)):this._set("highlightIds",e)}async refresh(){return qf(this._debounceRefresh())}reset(){this.grid.reset()}selectRows(e){const t=this._getStoreItemsFromSelectionParams(e);return this.grid.selectRows(t)}scrollToIndex(e){var t;(t=this.grid)==null||t.scrollToIndex(e)}clearSelectionFilter(){this.store.objectIds=null;const e=this.activeFilters.find(t=>t.type==="selection");e&&this.activeFilters.remove(e)}zoomToSelection(){const{layer:e,view:t}=this,i=this.highlightIds.toArray();if(!e||!t||!i.length)return;const r=e.createQuery();r.objectIds=i,r.returnGeometry=!0,e.queryFeatures(r).then(s=>{t.goTo(s.features).catch(o=>{o.name!=="AbortError"&&console.error(o)})})}async _refresh(){await this.store.refreshLayerInfo();const e=this.highlightIds.toArray();e.length&&(await this.store.verifyFeaturesByObjectId(e)).forEach((t,i)=>{t||this.deselectRows(e[i])}),this.grid.refreshPageCache()}_onLayerLoad(){const e=this.layer.capabilities.query.maxRecordCount;e&&e<this.pageSize&&this.grid&&(this.grid.pageSize=e),this._generateColumns()}_onLayerRefresh(e){this.autoRefreshEnabled&&e.dataChanged&&this.refresh()}_generateColumns(){var i,r;this._resetColumns();const e=[],t=(i=this.tableTemplate)!=null&&i.columnTemplates?this._generateColumnsFromTemplates(this.tableTemplate.columnTemplates):(r=this.fieldConfigs)!=null&&r.length?this._generateColumnsFromConfigs():this._generateDefaultFieldColumns();e.push(...t),this.attachmentsEnabled&&e.push(this._generateDefaultAttachmentColumn()),this.columns.addMany([...e])}_generateColumnsFromTemplates(e){var E,A;const{editingEnabled:t,grid:i,hiddenFields:r,layer:s,messages:o,messagesCommon:c,messagesURIUtils:u,store:g,tableTemplate:b}=this,S=(A=(E=this.layer)==null?void 0:E.fields)!=null?A:[];return e.filter(O=>(S||[]).find(L=>"fieldName"in O&&O.fieldName===L.name)||O.type==="group"&&"columnTemplates"in O).map(O=>{if("fieldName"in O){const L=(S||[]).find(oe=>O.fieldName===oe.name),N=O.visible===!1||O.visible!==!0&&r.includes(L.name),{direction:z,formatFunction:q,initialSortPriority:Z,menuConfig:ee,textAlign:ie}=O,ne=b.expressionInfos||null;return new ZE({direction:z,editingEnabled:t,expressionInfos:ne,field:L,formatFunction:q,grid:i,hidden:N,initialSortPriority:Z,layer:s,messages:o,messagesCommon:c,messagesURIUtils:u,menuConfig:ee,store:g,template:O,textAlign:ie})}if(O.type==="group"&&"columnTemplates"in O){const L=this._generateColumnsFromTemplates(O.columnTemplates),N=O.visible===!1||O.visible!==!0&&r.includes(O.label),{label:z}=O;return new X8e({header:z,columns:L,hidden:N})}return new M9({...O})})}_generateColumnsFromConfigs(){var S,E;const{editingEnabled:e,fieldConfigs:t,grid:i,hiddenFields:r,layer:s,messages:o,messagesCommon:c,messagesURIUtils:u,store:g}=this,b=(E=(S=this.layer)==null?void 0:S.fields)!=null?E:[];return t.filter(A=>(b||[]).find(O=>A.name===O.name)).map(A=>{const O=A.direction||null,L=A.formatFunction||null,N=A.textAlign||null,z=U(A.initialSortPriority)?A.initialSortPriority:null,q=(b||[]).find(ie=>A.name===ie.name),Z=A.visible===!1||A.visible!==!0&&r.includes(q.name),ee=A.menuConfig||null;return new ZE({config:A,direction:O,editingEnabled:e,field:q,formatFunction:L,grid:i,hidden:Z,layer:s,store:g,messages:o,messagesCommon:c,messagesURIUtils:u,menuConfig:ee,textAlign:N,initialSortPriority:z})})}_generateDefaultFieldColumns(){var g,b;const{editingEnabled:e,grid:t,hiddenFields:i,layer:r,messages:s,messagesCommon:o,messagesURIUtils:c,store:u}=this;return((b=(g=this.layer)==null?void 0:g.fields)!=null?b:[]).map(S=>{const E=i.includes(S.name);return new ZE({editingEnabled:e,field:S,grid:t,hidden:E,layer:r,store:u,messages:s,messagesCommon:o,messagesURIUtils:c})})}_generateDefaultAttachmentColumn(){var e;return new N$e({header:(e=this.messages)==null?void 0:e.attachments})}_sortOrdersToLayerOrderByFields(e){return e&&e.length?e.filter((t,i,r)=>r.map(s=>s.path).indexOf(t.path)===i).filter(({direction:t})=>!!t).map(({direction:t,path:i})=>i+" "+t.toUpperCase()):[]}_highlight(e){this.layerView&&wS(this.layerView)&&this._highlights.add(this.layerView.highlight(e),e)}_unhighlight(e){this._highlights.remove(e)}_getStoreItemsFromSelectionParams(e){const t=[];return(e=e instanceof Array?e:[e]).forEach(i=>{let r=i instanceof wr?i:null;const s=r?r.getObjectId():i;if(typeof s=="number"||typeof s=="string"){if(!r){const o=this.store.getItemByObjectId(s);o&&(r=o.feature)}t.push({objectId:s,feature:r})}}),t}_onHighlightIdsChange(e){const{highlightEnabled:t}=this,{added:i,removed:r}=e;t&&(i.forEach(s=>this._highlight(s)),r.forEach(s=>this._unhighlight(s)))}_resetColumns(){this.columns.items.forEach(e=>e.destroy()),this.columns.removeAll()}};v([_({readOnly:!0})],yi.prototype,"activeFilters",void 0),v([_({readOnly:!0})],yi.prototype,"activeSortOrders",null),v([_()],yi.prototype,"attachmentsEnabled",null),v([_()],yi.prototype,"autoRefreshEnabled",void 0),v([_()],yi.prototype,"cellClassNameGenerator",void 0),v([_({readOnly:!0})],yi.prototype,"columns",void 0),v([_()],yi.prototype,"dataProvider",void 0),v([_()],yi.prototype,"editingEnabled",void 0),v([_()],yi.prototype,"fieldConfigs",void 0),v([_()],yi.prototype,"filterGeometry",null),v([_({readOnly:!0})],yi.prototype,"grid",void 0),v([_()],yi.prototype,"hiddenFields",null),v([_()],yi.prototype,"highlightEnabled",void 0),v([_()],yi.prototype,"highlightOnRowSelectEnabled",null),v([_({readOnly:!0})],yi.prototype,"itemIdPath",void 0),v([_()],yi.prototype,"layer",null),v([_()],yi.prototype,"layerView",null),v([_()],yi.prototype,"messages",null),v([_(),ui("esri/t9n/common")],yi.prototype,"messagesCommon",void 0),v([_(),ui("esri/widgets/support/t9n/uriUtils")],yi.prototype,"messagesURIUtils",void 0),v([_()],yi.prototype,"relatedRecordsEnabled",void 0),v([_({readOnly:!0})],yi.prototype,"state",null),v([_({readOnly:!0,type:YQ})],yi.prototype,"store",void 0),v([_()],yi.prototype,"tableTemplate",void 0),v([_()],yi.prototype,"timeExtent",null),v([_()],yi.prototype,"view",void 0),v([_()],yi.prototype,"highlightIds",null),yi=v([K("esri.widgets.FeatureTable.FeatureTableViewModel")],yi);const eOe=yi,Az={header:!0,menu:!0,menuItems:{clearSelection:!0,refreshData:!0,toggleColumns:!0,selectedRecordsShowAllToggle:!0,selectedRecordsShowSelectedToggle:!0,zoomToSelection:!0,deleteSelection:!0},selectionColumn:!0,columnMenus:!0},jh="esri-feature-table",Z0=`${jh}__prompt`,qr={base:jh,header:`${jh}__header`,title:`${jh}__title`,content:`${jh}__content`,loader:`${jh}__loader`,loaderContainer:`${jh}__loader-container`,menuContainer:`${jh}__menu`,menuIcon:"esri-icon-handle-horizontal",menuItemGroupOpenedIcon:"esri-icon-down",menuItemGroupClosedIcon:"esri-icon-right",checkmarkIcon:"esri-icon-check-mark",promptContainer:Z0,promptHeader:`${Z0}__header`,promptHeading:`${Z0}__header__heading`,promptMessage:`${Z0}__message`,promptDivider:`${Z0}__divider`,promptActions:`${Z0}__actions`,widget:"esri-widget"},$z=Ie.getLogger("esri.widgets.FeatureTable");let Ht=class extends ar(ki){constructor(e,t){super(e,t),this._prompt=null,this.menu=null,this.menuConfig=null,this.viewModel=new eOe,this.visibleElements={...Az},this._showDeletePrompt=this._showDeletePrompt.bind(this),this._onDeleteSelectionClick=this._onDeleteSelectionClick.bind(this)}initialize(){var i,r,s;this.handles.add([$i(()=>this.viewModel.columns,"change",()=>this._syncMenuConfig()),$i(()=>this.viewModel.activeFilters,"change",()=>this._syncMenuConfig()),$i(()=>this.highlightIds,"change",o=>{this._syncMenuConfig(),this._onSelectionChange(o)}),ge(()=>[this.viewModel.store.querying,this.viewModel.store.syncing,this.editingEnabled],()=>this.scheduleRender()),ge(()=>[this.menuConfig,this.editingEnabled],()=>this._syncMenuConfig()),ge(()=>this.messages,()=>{var o;this.menu.label=(o=this.messages)==null?void 0:o.options,this._syncMenuConfig()})]),this._set("menu",new CX({label:(i=this.messages)==null?void 0:i.options,iconClass:qr.menuIcon,...this.menuConfig}));const{attachmentsEnabled:e,relatedRecordsEnabled:t}=this;(s=(r=this.viewModel)==null?void 0:r.store)==null||s.set({attachmentsEnabled:e,relatedRecordsEnabled:t})}loadDependencies(){return Promise.all([pe(()=>import("./calcite-scrim.c6d15d7d.js"),["assets/calcite-scrim.c6d15d7d.js","assets/scrim.02266be6.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/loader.9c78e3db.js","assets/guid.994bd1dc.js"]),pe(()=>import("./calcite-button.a765f9c1.js"),["assets/calcite-button.a765f9c1.js","assets/form.af49867d.js","assets/interactive.5c805e74.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/icon.48bdede2.js","assets/loader.9c78e3db.js","assets/guid.994bd1dc.js"]),pe(()=>import("./calcite-icon.5b76e0a1.js"),["assets/calcite-icon.5b76e0a1.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"])])}destroy(){var e;this._prompt=null,this.handles.removeAll(),(e=this.menu)==null||e.destroy()}get activeFilters(){return this.viewModel.activeFilters}get activeSortOrders(){return this.viewModel.activeSortOrders}get attachmentsEnabled(){return this.viewModel.attachmentsEnabled}set attachmentsEnabled(e){this.viewModel.attachmentsEnabled=e}get autoRefreshEnabled(){return this.viewModel.autoRefreshEnabled}set autoRefreshEnabled(e){this.viewModel.autoRefreshEnabled=e}get columnReorderingEnabled(){return this.viewModel.columnReorderingEnabled}set columnReorderingEnabled(e){this.viewModel.columnReorderingEnabled=e}get columns(){return this.viewModel.columns}get editingEnabled(){return this.viewModel.editingEnabled}set editingEnabled(e){this.viewModel.editingEnabled=e}get fieldConfigs(){return this.viewModel.fieldConfigs}set fieldConfigs(e){this.viewModel.fieldConfigs=e}get filterGeometry(){return this.viewModel.filterGeometry}set filterGeometry(e){this.viewModel.filterGeometry=e}get grid(){return this.viewModel.grid}get hiddenFields(){return this.viewModel.hiddenFields}set hiddenFields(e){this.viewModel.hiddenFields=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get highlightIds(){return this.viewModel.highlightIds}set highlightIds(e){this.viewModel.highlightIds=e}get highlightOnRowSelectEnabled(){return this.viewModel.highlightEnabled}set highlightOnRowSelectEnabled(e){this.viewModel.highlightEnabled=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get messages(){return this.viewModel.messages}set messages(e){this.viewModel.messages=e}get messagesCommon(){return this.viewModel.messagesCommon}set messagesCommon(e){this.viewModel.messagesCommon=e}get messagesURIUtils(){return this.viewModel.messagesURIUtils}set messagesURIUtils(e){this.viewModel.messagesURIUtils=e}get multiSortEnabled(){return this.viewModel.multiSortEnabled}set multiSortEnabled(e){this.viewModel.multiSortEnabled=e}get pageSize(){return this.viewModel.pageSize}set pageSize(e){this.viewModel.pageSize=e}get relatedRecordsEnabled(){return this.viewModel.relatedRecordsEnabled}set relatedRecordsEnabled(e){this.viewModel.relatedRecordsEnabled=e}get state(){return this.viewModel.state}get tableTemplate(){return this.viewModel.tableTemplate}set tableTemplate(e){this.viewModel.tableTemplate=e}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(e){this.viewModel.timeExtent=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){var i;const t={...Az,...e};return(i=this.grid)==null||i.set("visibleElements",{...this.grid.visibleElements,selectionColumn:t.selectionColumn,columnMenus:t.columnMenus}),t}clearHighlights(){return mP($z,"`FeatureTable.clearHighlights` is deprecated in favor of FeatureTable.highlightIds'",{replacement:"FeatureTable.highlightIds",version:"4.25",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-FeatureTable.html#highlightIds"}),this.viewModel.clearHighlights()}clearSelection(){return mP($z,"`FeatureTable.clearSelection` is deprecated in favor of FeatureTable.highlightIds'",{replacement:"FeatureTable.highlightIds",version:"4.25",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-FeatureTable.html#highlightIds"}),this.viewModel.clearSelection()}clearSelectionFilter(){return this.viewModel.clearSelectionFilter()}deleteSelection(e){return this.highlightIds.length?e?(this._showDeletePrompt(),this.scheduleRender(),Promise.resolve()):this.viewModel.deleteSelection():Promise.resolve()}deselectRows(e){return this.viewModel.deselectRows(e)}filterBySelection(){return this.viewModel.filterBySelection()}findColumn(e){return this.viewModel.findColumn(e)}hideColumn(e){var t;(t=this.grid)==null||t.hideColumn(e),this._syncMenuConfig()}refresh(){return this.viewModel.refresh()}showAllColumns(){return this.viewModel.showAllColumns()}showColumn(e){var t;(t=this.grid)==null||t.showColumn(e),this._syncMenuConfig()}sortColumn(e,t){return this.viewModel.sortColumn(e,t)}selectRows(e){return this.viewModel.selectRows(e)}scrollToIndex(e){return this.viewModel.scrollToIndex(e)}zoomToSelection(){return this.viewModel.zoomToSelection()}render(){var i;const{_prompt:e}=this,t=U(e)?J("calcite-scrim",null,this.renderPrompt(e)):null;return J("div",{bind:this,class:this.classes(qr.base,qr.widget)},this.visibleElements.header?this._renderHeader():null,J("div",{class:qr.content},this.state!=="disabled"&&((i=this.grid)==null?void 0:i.render())),t)}renderPrompt({title:e,message:t,context:i,actions:r}){const s=!!r.secondary,o=J("calcite-button",{appearance:"solid",kind:i==="danger"?"danger":"brand",width:s?"half":"full",onclick:r.primary.action,key:"prompt-primary-button"},r.primary.label),c=s?J("calcite-button",{appearance:"outline",kind:i==="danger"?"danger":"brand",width:"half",onclick:r.secondary.action,key:"prompt-secondary-button"},r.secondary.label):null;return J("div",{class:`${qr.promptContainer}--${i}`},J("div",{class:qr.promptHeader},J("calcite-icon",{icon:"exclamation-mark-triangle"}),J(sl,{class:qr.promptHeading,level:2},e)),J("div",{class:qr.promptMessage},t),J("div",{class:qr.promptDivider}),J("div",{class:qr.promptActions},c,o))}_renderHeader(){return J("div",{key:"header",class:qr.header},this._renderLoader(),this._renderTitle(),this.visibleElements.menu?this._renderMenu():null)}_renderTitle(){return J("div",{class:qr.title,key:"title"},this._getTitle())}_getTitle(){const{grid:e,highlightIds:t,layer:i,messages:r,viewModel:{size:s}}=this;return e&&i?es(r.header,{title:i.title,count:s,selected:t.length||0}):""}_renderLoader(){const{state:e,store:t}=this.viewModel,i=e==="loading"||t.syncing||t.querying;return J("div",{class:qr.loaderContainer},i?J("div",{class:qr.loader,key:"loader"}):null)}_renderMenu(){return J("div",{class:qr.menuContainer},this.menu.render())}_onSelectionChange(e){const{added:t,removed:i}=e,r=t.map(o=>this.viewModel.store.getLocalItemByKey(o)||{objectId:o,feature:null,attachments:null,relatedRecords:null}),s=i.map(o=>this.viewModel.store.getLocalItemByKey(o)||{objectId:o,feature:null,attachments:null,relatedRecords:null});this.emit("selection-change",{added:r,removed:s})}_syncMenuConfig(){var e;(e=this.menu)==null||e.set({...this.menuConfig,items:this._getMenuItems()})}_getMenuItems(){var r;const e=(r=this.menuConfig)==null?void 0:r.items,t=this._getDefaultMenuItems(),i=[];return t!=null&&t.length&&i.push(...t),e!=null&&e.length&&i.push(...e),i}_getDefaultMenuItems(){var c,u,g,b;const{highlightIds:e,messages:t,viewModel:i,visibleElements:r}=this,{menuItems:s}=r,o=[];if(s!=null&&s.refreshData&&o.push(new Hl({selectionEnabled:!1,label:t==null?void 0:t.refreshData,clickFunction:()=>this.refresh()})),e.length){const S=this._getSelectionFilter();if(s!=null&&s.clearSelection&&o.push(new Hl({selectionEnabled:!1,label:t==null?void 0:t.clearSelection,clickFunction:()=>{var E;return(E=this.highlightIds)==null?void 0:E.removeAll()}})),(s==null?void 0:s.zoomToSelection)&&this.view&&o.push(new Hl({selectionEnabled:!1,label:t==null?void 0:t.zoomToSelection,clickFunction:()=>this.viewModel.zoomToSelection()})),(s==null?void 0:s.selectedRecordsShowSelectedToggle)&&(!S||e.length!==S.objectIds.length)){const E=t.showSelected,A=new Hl({selectionEnabled:!1,label:E,clickFunction:()=>{this.filterBySelection(),A.set("label",E)}});o.push(A)}(s==null?void 0:s.deleteSelection)&&this.editingEnabled&&((g=(u=(c=this.layer)==null?void 0:c.capabilities)==null?void 0:u.operations)==null?void 0:g.supportsDelete)&&o.push(new Hl({selectionEnabled:!1,label:t.deleteSelection,clickFunction:this._showDeletePrompt}))}if((s==null?void 0:s.selectedRecordsShowAllToggle)&&this._hasSelectionFilter()){const S=t.showAllRecords,E=new Hl({selectionEnabled:!1,label:S,clickFunction:()=>{this.clearSelectionFilter(),E.set("label",S)}});o.push(E)}return s!=null&&s.toggleColumns&&o.push(new Hl({iconClass:qr.menuItemGroupClosedIcon,label:t==null?void 0:t.toggleColumns,clickFunction:this._toggleMenuItemSelectedIcon,items:(b=i==null?void 0:i.columns)==null?void 0:b.items.map(({header:S,hidden:E,path:A})=>new Hl({label:S||A,selected:!E,selectionEnabled:!0,iconClass:qr.checkmarkIcon,clickFunction:()=>this._toggleColumnFromMenuItem(A)}))})),o.length?o:null}_toggleMenuItemSelectedIcon({item:e}){e==null||e.set("iconClass",e!=null&&e.selected?qr.menuItemGroupOpenedIcon:qr.menuItemGroupClosedIcon)}_toggleColumnFromMenuItem(e){var r;const{grid:t,viewModel:i}=this;(r=i.findColumn(e))!=null&&r.hidden?t.showColumn(e):t.hideColumn(e)}_showDeletePrompt(){const{messages:e,messagesCommon:t}=this,i=this.highlightIds.length||0,r=es(e.deleteSelectionCount,{count:i});this.menu.open=!1,this._prompt={title:r,message:e.deleteRecordsRemoved,context:"danger",actions:{primary:{label:t.delete,action:this._onDeleteSelectionClick},secondary:{label:e.keepRecords,action:()=>this._prompt=null}}}}async _onDeleteSelectionClick(){await this.viewModel.deleteSelection(),this._prompt=null}_getSelectionFilter(){var e;return(e=this.viewModel.activeFilters)==null?void 0:e.find(t=>t.type==="selection")}_hasSelectionFilter(){return!!this._getSelectionFilter()}};v([_({readOnly:!0})],Ht.prototype,"activeFilters",null),v([_({readOnly:!0})],Ht.prototype,"activeSortOrders",null),v([_()],Ht.prototype,"attachmentsEnabled",null),v([_()],Ht.prototype,"autoRefreshEnabled",null),v([_()],Ht.prototype,"columnReorderingEnabled",null),v([_({readOnly:!0})],Ht.prototype,"columns",null),v([_()],Ht.prototype,"editingEnabled",null),v([_()],Ht.prototype,"fieldConfigs",null),v([_()],Ht.prototype,"filterGeometry",null),v([_({readOnly:!0})],Ht.prototype,"grid",null),v([_()],Ht.prototype,"hiddenFields",null),v([_()],Ht.prototype,"highlightEnabled",null),v([_()],Ht.prototype,"highlightIds",null),v([_()],Ht.prototype,"highlightOnRowSelectEnabled",null),v([_()],Ht.prototype,"label",null),v([_()],Ht.prototype,"layer",null),v([_(),ui("esri/widgets/FeatureTable/t9n/FeatureTable")],Ht.prototype,"messages",null),v([_(),ui("esri/t9n/common")],Ht.prototype,"messagesCommon",null),v([_(),ui("esri/widgets/support/t9n/uriUtils")],Ht.prototype,"messagesURIUtils",null),v([_({readOnly:!0})],Ht.prototype,"menu",void 0),v([_()],Ht.prototype,"menuConfig",void 0),v([_()],Ht.prototype,"multiSortEnabled",null),v([_()],Ht.prototype,"pageSize",null),v([_()],Ht.prototype,"relatedRecordsEnabled",null),v([_({readOnly:!0})],Ht.prototype,"state",null),v([_()],Ht.prototype,"tableTemplate",null),v([_()],Ht.prototype,"timeExtent",null),v([_()],Ht.prototype,"view",null),v([_()],Ht.prototype,"viewModel",void 0),v([_()],Ht.prototype,"visibleElements",void 0),v([_t("visibleElements")],Ht.prototype,"castVisibleElements",null),Ht=v([K("esri.widgets.FeatureTable")],Ht);const tOe=Ht,nc="esri-feature-form",C2=`${nc}__date`,Il=`${nc}__group`,Go=`${nc}__input`,Lt={base:nc,form:`${nc}__form`,formHeader:`${nc}__form-header`,label:`${nc}__label`,inputFieldWrapper:`${Go}-wrapper`,inputFieldLoader:`${Go}-loader`,inputField:`${Go}`,inputDate:`${Go}--date`,inputTime:`${Go}--time`,inputRadioGroup:`${Go}--radio-group`,inputRadio:`${Go}--radio`,inputRadioLabel:`${Go}--radio-label`,inputDisabled:`${Go}--disabled`,inputSwitch:`${Go}--switch`,inputInvalid:`${Go}--invalid`,inputIconInvalid:`${Go}-icon--invalid`,errorMessage:`${nc}__field-error-message`,description:`${nc}__description-text`,dateInputPart:`${C2}-input-part`,loneDateInputPart:`${C2}-input-part--lone`,dateInputContainer:`${C2}-input-container`,dateFormatHint:`${C2}-format-hint`,group:Il,groupLabel:`${Il}-label`,groupHeader:`${Il}-header`,groupHeading:`${Il}-header`,groupTitle:`${Il}-title`,groupDescription:`${Il}-description`,groupToggleIcon:`${Il}-toggle-icon`,groupCollapsed:`${Il}--collapsed`,groupSequential:`${Il}--sequential`,groupActive:`${Il}--active`,collapseIcon:"esri-icon-up",errorIcon:"esri-icon-notice-triangle",expandIcon:"esri-icon-down",widget:"esri-widget",panel:"esri-widget--panel",input:"esri-input",select:"esri-select"};let Qp=class extends Re{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.codedValue=null}};v([_()],Qp.prototype,"objectType",void 0),v([_()],Qp.prototype,"maxValue",void 0),v([_()],Qp.prototype,"minValue",void 0),v([_()],Qp.prototype,"codedValue",void 0),Qp=v([K("esri.layers.support.ContingentValue")],Qp);const hs=Qp;let ef=class extends Re{constructor(e){super(e),this.isRetired=!1}};v([_()],ef.prototype,"id",void 0),v([_()],ef.prototype,"isRetired",void 0),v([_()],ef.prototype,"subtype",void 0),v([_()],ef.prototype,"values",void 0),ef=v([K("esri.layers.support.Contingency")],ef);const kz=ef;let Cv=class extends Re{constructor(e){super(e)}};v([_()],Cv.prototype,"fieldGroup",void 0),v([_()],Cv.prototype,"type",void 0),Cv=v([K("esri.layers.support.ContingencyConstraintViolation")],Cv);const Oz=Cv;let Av=class extends Re{constructor(e){super(e)}};v([_()],Av.prototype,"contingentValuesAllGroups",void 0),v([_()],Av.prototype,"contingentValuesByFieldGroup",void 0),Av=v([K("esri.layers.support.ContingentValuesResult")],Av);const iOe=Av;let tf=class extends Re{constructor(e){super(e),this.fields=null,this.isEditingRestrictive=!1}};v([_()],tf.prototype,"name",void 0),v([_()],tf.prototype,"fields",void 0),v([_()],tf.prototype,"isEditingRestrictive",void 0),v([_()],tf.prototype,"contingencies",void 0),tf=v([K("esri.layers.support.FieldGroup")],tf);const q$=tf;let Zu=class extends $e{constructor(){super(...arguments),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const t={};for(const i of Object.keys(e))t[i]=Q5(e[i]);return t}writeDomains(e,t){var r;if(!e)return;const i={};for(const s of Object.keys(e))e[s]&&(i[s]=(r=e[s])==null?void 0:r.toJSON());t.domains=i}};v([_({type:Number,json:{write:!0}})],Zu.prototype,"code",void 0),v([_({type:Object,json:{write:!0}})],Zu.prototype,"defaultValues",void 0),v([_({json:{write:!0}})],Zu.prototype,"domains",void 0),v([Ne("domains")],Zu.prototype,"readDomains",null),v([qe("domains")],Zu.prototype,"writeDomains",null),v([_({type:String,json:{write:!0}})],Zu.prototype,"name",void 0),Zu=v([K("esri.layers.support.Subtype")],Zu);const Pz=Zu;var zh;let Vh=zh=class extends cg(ru){constructor(e){super(e),this.request=mi,this.fieldGroups=null,this.fieldGroupDefinitions=null}initialize(){}get subtypeFieldName(){const{layer:e}=this;return e.type==="subtype-group"?e.subtypeField:e.typeIdField}static async createLoadedLayerContingentValuesCache(e){await e.load();const t=e.sourceJSON;if(e.layerId===void 0)return null;const i=t.hasContingentValuesDefinition;if(i)return new zh({layer:e}).load();if(i===void 0){const r=_c(e.url);if(ae(r))return null;const s=r.url.path;if((await zh._staticFetchEnterpriseFeatureRoot(s)).supportsQueryDataElements){const o=e.layerId.toString(),c=await zh._staticFetchEnterpriseFieldGroup(s,o);if(c){const u=c.map(g=>({name:g.name,isEditingRestrictive:g.isEditingRestrictive,fields:g.fieldNames.names}));return new zh({layer:e,fieldGroupDefinitions:u}).load()}}}return null}async load(e){const t=this.layer.load(e).then(()=>this._initializeContingentValues(this.fieldGroupDefinitions,e));return this.addResolvingPromise(t),this}validateContingencyConstraints(e,t){const i=Object.keys(e),r=[],s=[];for(const o of this.fieldGroups){const c=o.isEditingRestrictive?"error":"warning";if(t&&!o.fields.some(S=>t.includes(S)))continue;if(!o.fields.every(S=>i.includes(S))){s.push(new Oz({fieldGroup:o,type:c}));continue}let u=!1;const g=e[this.subtypeFieldName],b=o.contingencies.filter(S=>!(!S.isRetired&&S.subtype)||S.subtype.code===g);for(const S of b){let E=!0;for(const A in S.values){const O=S.values[A];if(O.objectType!=="any"){if(O.objectType==="null"){if(e[A]!=null){E=!1;break}}else if(O.objectType==="code"){if(e[A]!==O.codedValue.code){E=!1;break}}else if(O.objectType==="range"){const L=e[A];if(L<O.minValue||L>O.maxValue){E=!1;break}}}}if(E){u=!0;break}}u||r.push(new Oz({fieldGroup:o,type:c}))}return{invalid:r,incomplete:s}}getContingentValues(e,t,i=!1){const r=e[this.subtypeFieldName],s=r!=null,o={};let c=[];const u=this.fieldGroups.filter(g=>g.fields.includes(t));c.push(new hs({objectType:"any"}));for(const g of u){let b=[];const S=g.contingencies.filter(O=>!(O.isRetired||O.subtype&&s&&O.subtype.code!==r));let E=!1;const A={};for(const O of S){let L,N=!0;for(const z in O.values){const q=O.values[z];if(t!==z){if(e[z]!==void 0&&q.objectType!=="any"){if(q.objectType==="null")e[z]!==null&&(N=!1);else if(q.objectType==="code")e[z]!==q.codedValue.code&&(N=!1);else if(q.objectType==="range"){const Z=e[z];(Z<q.minValue||Z>q.maxValue)&&(N=!1)}}}else L=q,E=E||q.objectType==="range"}if(L&&N){if(L.objectType==="any"){b.length=0,b.push(L);break}const z=this._generateKey(L);A[z]||b.push(L),A[z]=!0}}E&&(b=this._joinRange(b)),o[g.name]=b,c=i?this._filterIntersection(c,b):[]}return u.length===1&&i&&(c=[]),new iOe({contingentValuesAllGroups:c,contingentValuesByFieldGroup:o})}_generateKey(e){switch(e.objectType){case"any":return"@any@";case"null":return"@null@";case"code":return e.codedValue.name+e.codedValue.code.toString();case"range":return e.minValue.toString()+"-"+e.maxValue.toString()}}_joinRange(e){let t,i;e.sort((s,o)=>s.objectType==="null"?-1:o.objectType==="null"?1:s.minValue-o.minValue);const r=[];for(const s of e)s.objectType!=="null"?t!=null&&i!=null?i<s.minValue?(r.push(new hs({objectType:"range",minValue:t,maxValue:i})),t=s.minValue,i=s.maxValue):i<s.maxValue&&(i=s.maxValue):(t=s.minValue,i=s.maxValue):r.push(s);return r.push(new hs({objectType:"range",minValue:t,maxValue:i})),r}_filterIntersection(e,t){var s,o;if(e.length===0||t.length===0)return[];if(e[0].objectType==="any")return t;if(t[0].objectType==="any")return e;const i=e[0].objectType==="range"||((s=e[1])==null?void 0:s.objectType)==="range",r=t[0].objectType==="range"||((o=t[1])==null?void 0:o.objectType)==="range";return i||r?this._intersectRanges(e,t):this._intersectValues(e,t)}_intersectRanges(e,t){const i=[];let r,s=0;for(const o of e)for(;s<t.length;s++){const c=t[s];if(o.objectType==="null"&&c.objectType==="null")i.push(new hs({objectType:"null"}));else{if(o.objectType==="null")break;if(c.objectType==="null")continue}if(o.maxValue<c.minValue)break;if(o.maxValue===c.minValue){i.push(new hs({objectType:"range",minValue:o.maxValue,maxValue:c.minValue}));break}if(!(o.minValue>c.maxValue))if(o.minValue!==c.maxValue){if(r=o.minValue>c.minValue?o.minValue:c.minValue,o.maxValue<c.maxValue){i.push(new hs({objectType:"range",minValue:r,maxValue:o.maxValue}));break}i.push(new hs({objectType:"range",minValue:r,maxValue:c.maxValue}))}else i.push(new hs({objectType:"range",minValue:o.minValue,maxValue:c.maxValue}))}return i}_intersectValues(e,t){const i=[];for(const r of e)t.some(s=>{if(r.objectType===s.objectType)switch(r.objectType){case"any":case"null":return!0;case"code":return r.codedValue.code===s.codedValue.code&&r.codedValue.name===s.codedValue.name}return!1})&&i.push(r);return i}static async _staticFetchEnterpriseFeatureRoot(e,t){return mi(e,{responseType:"json",query:{f:"json"},...t}).then(i=>i.data)}static async _staticFetchEnterpriseFieldGroup(e,t,i){return mi(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...i}).then(r=>{var s;return(s=r.data.layerDataElements)==null?void 0:s[0].dataElement.fieldGroups})}async _initializeContingentValues(e,t){const i=e||await this._fetchFieldGroupDefs(t);if(i.length===0)return void(this.fieldGroups=[]);const r=await this._fetchContingentValues(i,t);this.fieldGroups=r}async _fetchFieldGroupDefs(e){if(this.layer.layerId===void 0)return[];const t=this.layer.sourceJSON,i=this.layer.layerId.toString(),r=_c(this.layer.url).url.path;return t.hasContingentValuesDefinition?(await this._fetchAGOLFieldGroup(r,i,e)).map(s=>({name:s.name,isEditingRestrictive:s.restrictive,fields:s.fields.map(o=>this.layer.fieldsIndex.normalizeFieldName(o))})):t.hasContingentValuesDefinition!==void 0?[]:this._fetchEnterpriseFeatureRoot(r,e).then(async s=>s.supportsQueryDataElements?(await this._fetchEnterpriseFieldGroup(r,i,e)).map(o=>({name:o.name,isEditingRestrictive:o.isEditingRestrictive,fields:o.fieldNames.names.map(c=>this.layer.fieldsIndex.normalizeFieldName(c))})):[])}async _fetchAGOLFieldGroup(e,t,i){return mi(`${e}/${t}/fieldgroups`,{responseType:"json",query:{f:"json"},...i}).then(r=>r.data.fieldGroups)}async _fetchEnterpriseFieldGroup(e,t,i){return zh._staticFetchEnterpriseFieldGroup(e,t,i)}async _fetchEnterpriseFeatureRoot(e,t){return zh._staticFetchEnterpriseFeatureRoot(e,t)}async _fetchContingentValues(e,t){if(this.layer.layerId===void 0)return[];const i=this.layer.sourceJSON,r=this.layer.layerId.toString(),s=_c(this.layer.url).url.path;if(i.hasContingentValuesDefinition){const c=await this._fetchAGOLContingentValues(s,r,t);return this._constructFieldGroupsAGOL(e,c)}const o=await this._fetchEnterpriseContingentValues(s,r,t);return this._constructFieldGroupsEnterprise(e,o)}_constructFieldGroupsAGOL(e,t){return e.map(i=>{const r=t.contingentValuesDefinition.fieldGroups.find(s=>s.name===i.name);if(r){let s=[];return s=t.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(i,t,r.subTypes):this._parseAGOLFieldGroup(i,t,r.contingentValues),new q$({name:i.name,isEditingRestrictive:i.isEditingRestrictive,fields:i.fields,contingencies:s})}return null}).filter(U)}_parseAGOLFieldGroupSubtype(e,t,i){let r=[];return i==null||i.forEach(s=>{const o=this._getSubtypeAGOL(s.name);r=r.concat(this._parseAGOLFieldGroup(e,t,s.contingentValues,o))}),r}_parseAGOLFieldGroup(e,t,i,r=null){const s=[];for(const o of i!=null?i:[]){const c=this._parseAGOLContingency(o,e,t,r);s.push(c)}return s}_parseAGOLContingency(e,t,i,r){var u;const s=e.id,o=!!e.retired&&e.retired===1,c={};for(let g=0,b=0;g<t.fields.length;g++){const S=t.fields[g],E=i.typeCodes[e.types[g]];if(E==="Code"){let A=e.values[b];b++;const O=this._getDomain(r,S);if(((u=this.layer.getField(S))==null?void 0:u.type)==="string"){const z=i.stringDicts.find(q=>q.domain===O.name);z&&(A=z.entries[A])}const L=O.codedValues.find(z=>z.code===A),N=new hs({codedValue:L,objectType:"code"});c[S]=N}else if(E==="Range"){const A=e.values[b];b++;const O=A.range[0],L=A.range[1],N=new hs({minValue:O,maxValue:L,objectType:"range"});c[S]=N}else if(E==="Any"){const A=new hs({objectType:"any"});c[S]=A}else{const A=new hs({objectType:"null"});c[S]=A}}return new kz({id:s,isRetired:o,subtype:r,values:c})}_constructFieldGroupsEnterprise(e,t){const i=t.fieldGroups;return e.map(r=>{const s=i.find(o=>o.name===r.name);if(s){const o=s.contingencies.map(c=>{const u=c.id,g=c.isRetired||!1,b=this._getSubtypeEnterprise(c.subtypeCode),S={};for(let E=0;E<r.fields.length;E++){const A=r.fields[E];let O=c.values[E];if(typeof O=="number"||typeof O=="string"){const L=this._getDomain(b,A),N=this.layer.getField(A);(N==null?void 0:N.type)==="string"?O=t.stringDictionary[O]:(N==null?void 0:N.type)==="date"&&(O=new Date(`${O}+00:00`).getTime());const z=L.codedValues.find(Z=>Z.code===O),q=new hs({codedValue:z,objectType:"code"});S[A]=q}else if(typeof O=="object"){const L=O.minValue,N=O.maxValue,z=new hs({minValue:L,maxValue:N,objectType:"range"});S[A]=z}else if(O){const L=new hs({objectType:"any"});S[A]=L}else{const L=new hs({objectType:"null"});S[A]=L}}return new kz({id:u,isRetired:g,subtype:b,values:S})});return new q$({name:r.name,isEditingRestrictive:r.isEditingRestrictive,fields:r.fields,contingencies:o})}return null}).filter(U)}async _fetchEnterpriseContingentValues(e,t,i){return mi(`${e}/queryContingentValues`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...i}).then(r=>{var s;return(s=r.data.contingentValueSets)==null?void 0:s[0]})}async _fetchAGOLContingentValues(e,t,i){return mi(`${e}/${t}/contingentValues`,{responseType:"json",query:{f:"json"},...i}).then(r=>r.data)}_getSubtypeEnterprise(e){const t=this.layer.sourceJSON;let i;if(t.subtypes){const r=t.subtypes.find(s=>s.code===e);i=Pz.fromJSON(r)}return i||null}_getSubtypeAGOL(e){const t=this.layer.sourceJSON;let i;if(t.subtypes){const r=t.subtypes.find(s=>s.name===e);i=Pz.fromJSON(r)}return i||null}_getDomain(e,t){var r;const i=e?(r=e.domains)==null?void 0:r[t]:this.layer.getFieldDomain(t);return(i==null?void 0:i.type)==="inherited"?this.layer.getFieldDomain(t):i}};v([_({constructOnly:!0})],Vh.prototype,"layer",void 0),v([_({constructOnly:!0})],Vh.prototype,"request",void 0),v([_({type:[q$]})],Vh.prototype,"fieldGroups",void 0),v([_({constructOnly:!0})],Vh.prototype,"fieldGroupDefinitions",void 0),v([_()],Vh.prototype,"subtypeFieldName",null),Vh=zh=v([K("esri.layers.support.LayerContingentValuesCache")],Vh);const rOe=Vh;var St;(function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.UnexpectedToken="UnexpectedToken",e.Unrecognised="Unrecognised",e.UnrecognisedType="UnrecognisedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FuncionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference"})(St||(St={}));const KQ={[St.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[St.LogicError]:"Logic error - {reason}",[St.NeverReach]:"Encountered unreachable logic",[St.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[St.ModuleAccessorMustBeString]:"Module accessor must be a string",[St.ModuleExportNotFound]:"Module has no export with provided identifier",[St.ModulesNotSupported]:"Current profile does not support modules",[St.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[St.FuncionNotFound]:"Function not found",[St.FieldNotFound]:"Key not found - {key}",[St.CircularModules]:"Circular module dependencies are not allowed",[St.Cancelled]:"Execution cancelled",[St.UnsupportedHashType]:"Type not supported in hash function",[St.IllegalResult]:"Value is not a supported return type",[St.PortalRequired]:"Portal is required",[St.InvalidParameter]:"Invalid parameter",[St.WrongNumberOfParameters]:"Call with wrong number of parameters",[St.Unrecognised]:"Unrecognised code structure",[St.UnrecognisedType]:"Unrecognised type",[St.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[St.BooleanConditionRequired]:"Conditions must use booleans",[St.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[St.NoFunctionInArray]:"Arrays cannot contain functions.",[St.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[St.KeyAccessorMustBeString]:"Accessor must be a string",[St.KeyMustBeString]:"Object keys must be a string",[St.Immutable]:"Object is immutable",[St.InvalidParameter]:"Invalid parameter",[St.UnexpectedToken]:"Unexpected token",[St.MemberOfNull]:"Cannot access property of null object",[St.MaximumCallDepth]:"Exceeded maximum function depth",[St.OutOfBounds]:"Out of bounds",[St.InvalidIdentifier]:"Identifier not recognised",[St.FuncionNotFound]:"Function not found",[St.CallNonFunction]:"Expression is not a function",[St.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[St.AssignModuleFunction]:"Cannot assign function to module variable",[St.UnsupportedUnaryOperator]:"Unsupported unary operator",[St.UnsupportedOperator]:"Unsupported operator",[St.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[St.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&"};class sOe extends Error{constructor(...t){super(...t)}}class US extends sOe{constructor(t,i){super(B8(i)+t.message,{cause:t}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,US),i&&i.loc&&(this.loc=i.loc)}}class ZQ extends Error{constructor(t,i,r,s){super("Execution error - "+B8(r)+Fg(KQ[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,ZQ),r&&r.loc&&(this.loc=r.loc)}}function B8(e){var t,i;return e&&e.loc?`Line : ${(t=e.loc.start)==null?void 0:t.line}, ${(i=e.loc.start)==null?void 0:i.column}: `:""}class XQ extends Error{constructor(t,i,r,s){super("Compilation error - "+B8(r)+Fg(KQ[i],s)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,XQ),r&&r.loc&&(this.loc=r.loc)}}class QQ extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,QQ)}}function Fg(e,t){try{if(!t)return e;for(const i in t){let r=t[i];r||(r=""),e=e.replace("{"+i+"}",t[i])}}catch{}return e}function sVe(e,t,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&t&&t.loc?new US(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,t&&t.loc?new US(i,{cause:i}):i)}var qS;(function(e){e.UnrecognisedUri="UnrecognisedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"})(qS||(qS={}));const nOe={[qS.UnrecognisedUri]:"Unrecognised uri - {uri}",[qS.UnsupportedUriProtocol]:"Unrecognised uri protocol"};class eee extends Error{constructor(t,i){super(Fg(nOe[t],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,eee)}}class sd{}var BS;sd.instance=new gl("Etc/UTC"),function(e){e.TimeZoneNotRecognised="TimeZoneNotRecognised"}(BS||(BS={}));const oOe={[BS.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};class H8 extends Error{constructor(t,i){super(Fg(oOe[t],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,H8)}}class gr{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,i=1,r=1,s=0,o=0,c=0,u=0,g){if(isNaN(t)||isNaN(i)||isNaN(r)||isNaN(s)||isNaN(o)||isNaN(c)||isNaN(u))return null;let b=0;const S=Ke.local(t,i).daysInMonth;r<1&&(b=r-1,r=1),r>S&&(b=r-S,r=S);let E=0;i>12?(E=i-12,i=12):i<1&&(E=i-1,i=1);let A=0;o>59?(A=o-59,o=59):o<0&&(A=o,o=0);let O=0;c>59?(O=c-59,c=59):c<0&&(O=c,c=0);let L=0;u>999?(L=u-999,u=999):u<0&&(L=u,u=0);let N=Ke.fromObject({day:r,year:t,month:i,hour:s,minute:o,second:c,millisecond:u},{zone:A2(g)});return E!==0&&(N=N.plus({months:E})),b!==0&&(N=N.plus({days:b})),A!==0&&(N=N.plus({minutes:A})),O!==0&&(N=N.plus({seconds:O})),L!==0&&(N=N.plus({milliseconds:L})),new gr(N)}static get systemTimeZoneCanonicalName(){var t;return(t=Intl.DateTimeFormat().resolvedOptions().timeZone)!=null?t:"system"}static arcadeDateAndZoneToArcadeDate(t,i){const r=A2(i);return t.isUnknownTimeZone||r===sd.instance?gr.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,r):new gr(t._date.setZone(i))}static dateJSToArcadeDate(t){return new gr(Ke.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,i="system"){return new gr(Ke.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new gr(Ke.fromMillis(t,{zone:sd.instance}))}static unknownDateJSToArcadeDate(t){return new gr(Ke.fromMillis(t.getTime(),{zone:sd.instance}))}static epochToArcadeDate(t,i="system"){return new gr(Ke.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new gr(t)}changeTimeZone(t){const i=A2(t);return gr.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(t,i){const r=A2(i);return t.zone===sd.instance||r===sd.instance?gr.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,r):new gr(t.setZone(r))}static nowToArcadeDate(t){return new gr(Ke.fromJSDate(new Date,{zone:t}))}static nowUTCToArcadeDate(){return new gr(Ke.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===gr.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===sd.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"utc":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new gr(this._date.plus(t))}diff(t,i="milliseconds"){return this._date.diff(t._date,i)[i]}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toFormat(t,i){return this._date.toFormat(t,i)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new gr(this._date.toUTC())}toLocal(){return new gr(this._date.toLocal())}toString(){return this.toISOString(!0)}}function A2(e){if(e instanceof Tg)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"utc";if(e.toLowerCase()==="unknown")return sd.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=Es.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const t=gl.create(e);if(!t.isValid)throw new H8(BS.TimeZoneNotRecognised);return t}class aOe{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}let fb=null;function lOe(e,t,i,r={}){const s=t.elementType,o="value",c=s.type==="array"?[{name:o,type:s.type,elementType:s.elementType}]:s.type==="dictionary"?[{name:o,type:s.type,properties:s.properties}]:[{name:o,type:s.type}];return new aOe(e.map(u=>{const g={};return W8(g,c,{[o]:u},i,r),g[o]}))}function uOe(e,t,i={}){const r=e instanceof t9?new p9({source:e.features,geometryType:e.geometryType,fields:e.fields,spatialReference:e.spatialReference}):e;return t.constructFeatureSet(r,i.spatialReference,null,!0,i.lruCache,i.interceptor)}function cOe(e,t,i={}){const{spatialReference:r,interceptor:s,lruCache:o}=i;return typeof e=="string"?t.createFeatureSetCollectionFromService(e,r,o,s):t.createFeatureSetCollectionFromMap(e,r,o,s)}function hOe(e,t,i,r={}){const s={};return W8(s,t.properties,e,i,r),new fb.Dictionary(s)}function W8(e,t,i,r,s={}){var c,u;const o={};for(const g of Object.keys(i))o[g.toLowerCase()]=i[g];for(const g of t){const b=g.name.toLowerCase();if(s.variablesPreProcessed)e[b]=o[b];else switch(g.type){case"array":{const S=o[b];e[b]=lOe(S,g,r,s);break}case"feature":{const S=o[b];e[b]=S==null?null:fb.Feature.createFromGraphic(S,s==null?void 0:s.timeReference);break}case"featureSet":{const S=o[b];e[b]=r?uOe(S,r,s):null;break}case"featureSetCollection":{const S=o[b];e[b]=r?cOe(S,r,s):null;break}case"dictionary":{const S=o[b];e[b]=hOe(S,g,r,s);break}case"date":{const S=o[b];e[b]=S?S instanceof gr?S:(c=s==null?void 0:s.timeReference)!=null&&c.timeZone?gr.dateJSAndZoneToArcadeDate(S,(u=s==null?void 0:s.timeReference)==null?void 0:u.timeZone):gr.dateJSToArcadeDate(S):null;break}case"geometry":case"boolean":case"text":case"number":e[b]=o[b]}}}function tee(e,t){for(const i of e)t.push(i),i.type==="dictionary"&&tee(i.properties,t);return t}function Fz(e,t,i,r,s){const{spatialReference:o,interceptor:c,lruCache:u,console:g,abortSignal:b,timeReference:S,services:E={portal:Ts.getDefault()}}=i,A={vars:{},spatialReference:o,interceptor:c,timeReference:S,lrucache:u,useAsync:s,services:E,console:g,abortSignal:b};return t&&W8(A.vars,e.variables,t,r,i),A}function HS(e,t){switch(t.getArcadeType(e)){case"number":case"text":case"boolean":case"point":case"polygon":case"polyline":case"multipoint":case"extent":return e;case"date":return e.toJSDate();case"feature":{const i=(e.type,e),r="geometry"in i?i.geometry():null,s="readAttributes"in i?i.readAttributes():i.attributes;return new wr({geometry:r,attributes:s})}case"dictionary":{const i=e,r=i.attributes,s={};for(const o of Object.keys(r))s[o]=HS(i.field(o),t);return s}case"array":return("toArray"in e?e.toArray():e).map(i=>HS(i,t))}return e}const Lz={variables:[{name:"$feature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"}]},Rz={variables:[{name:"$feature",type:"feature"},{name:"$aggregatedFeatures",type:"featureSet"}]},Nz=new Map([["form-constraint",{variables:[{name:"$feature",type:"feature"}]}],["feature-z",{variables:[{name:"$feature",type:"feature"}]}],["field-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$datastore",type:"featureSetCollection"}]}],["form-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$originalFeature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$featureSet",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},{name:"$editContext",type:"dictionary",properties:[{name:"editType",type:"text"}]}]}],["labeling",{variables:[{name:"$feature",type:"feature"}]}],["popup",Lz],["popup-element",Lz],["feature-reduction-popup",Rz],["feature-reduction-popup-element",Rz],["visualization",{variables:[{name:"$feature",type:"feature"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"}]}]}]]);function dOe(e){const t=Nz.get(e);if(!t){const i=Array.from(Nz.keys()).map(r=>`'${r}'`).join(", ");throw new de("createArcadeProfile:invalid-profile-name",`Invalid profile name '${e}'. You must specify one of the following values: ${i}`)}return ve(t)}async function pOe(e,t,i={}){fb||(fb=await pl());const{arcade:r,arcadeUtils:s}=fb,{loadScriptDependencies:o,referencesMember:c,scriptIsAsync:u}=r,g=tee(t.variables,[]),b=g.filter(ee=>ee.type==="featureSet"||ee.type==="featureSetCollection").map(ee=>ee.name.toLowerCase()),S=r.parseScript(e,b);if(!S)throw new de("arcade:invalid-script","Unable to create SyntaxTree");const E=s.extractFieldNames(S),A=r.scriptTouchesGeometry(S),O=g.map(ee=>ee.name.toLowerCase()).filter(ee=>c(S,ee)),L=u(S,b);await o(S,L,b);const N={vars:{},spatialReference:null,useAsync:L};for(const ee of O)N.vars[ee]="any";const{lruCache:z}=i,q=r.compileScript(S,N),Z=r.featureSetUtils();return{execute:(ee,ie={})=>{if(L)throw new de("arcade:invalid-execution-mode","Cannot execute the script in synchronous mode");const ne=q(Fz(t,ee,{lruCache:z,...ie},Z,L));return ie.rawOutput?ne:HS(ne,s)},executeAsync:async(ee,ie={})=>{const ne=await q(Fz(t,ee,{lruCache:z,...ie},Z,L));return ie.rawOutput?ne:HS(ne,s)},isAsync:L,variablesUsed:O,fieldsUsed:E,geometryUsed:A,syntaxTree:S}}var iee;const fOe=Symbol("FormExpressionArcadeExecutor");let bn=class extends Re{constructor(e){super(e),this[iee]=!0,this._lastEvaluatedValue=null,this._abortController=new AbortController,this._stale=!1,this._updatingTracking=new Jf,this._executeAsyncDebounced=o5(async(t,i,r)=>{const s=await this.executor.executeAsync(t,{...i,abortSignal:r});return r.aborted?this._lastEvaluatedValue:(this._lastEvaluatedValue=s,this._stale=!1,s)})}get isAsync(){return this.executor.isAsync}get fieldsUsed(){return this.executor.fieldsUsed}get syntaxTree(){return this.executor.syntaxTree}get updating(){return this._updatingTracking.updating}get stale(){return this._stale}get geometryUsed(){return this.executor.geometryUsed}get variablesUsed(){return this.executor.variablesUsed}get lastEvaluatedValue(){return this._lastEvaluatedValue}abort(){this._abortController.abort()}execute(e,t){this._abortController=new AbortController;const i=this.executor.execute(e,{...t,abortSignal:this._abortController.signal});return this._lastEvaluatedValue=i,i}async executeAsync(e,t){return this._abortController=new AbortController,this._updatingTracking.addPromise(this._executeAsyncDebounced(e,t!=null?t:{},this._abortController.signal))}markStale(){this._stale=!0}reset(){this.abort(),this._lastEvaluatedValue=null,this._stale=!1}};iee=fOe,v([_()],bn.prototype,"_lastEvaluatedValue",void 0),v([_()],bn.prototype,"_stale",void 0),v([_()],bn.prototype,"_updatingTracking",void 0),v([_({constructOnly:!0})],bn.prototype,"executor",void 0),v([_()],bn.prototype,"isAsync",null),v([_()],bn.prototype,"fieldsUsed",null),v([_()],bn.prototype,"syntaxTree",null),v([_()],bn.prototype,"updating",null),v([_()],bn.prototype,"stale",null),v([_()],bn.prototype,"geometryUsed",null),v([_()],bn.prototype,"variablesUsed",null),v([_()],bn.prototype,"lastEvaluatedValue",null),bn=v([K("esri.widgets.FeatureForm.FormExpressionArcadeExecutor")],bn);const mOe=async(e,t)=>{const i=dOe("form-calculation"),r=await pOe(e,i,{});return t!=null&&t.fieldsIndex&&(r.fieldsUsed=S5(t.fieldsIndex,r.fieldsUsed)),new bn({executor:r})},v4="#JSAPI_FORM_EXPRESSIONS_MANAGER_GEOMETRY",yOe="esri.widgets.FeatureForm.FormExpressionsManager";let Gh=class extends Re{constructor(e){super(e),this._fieldReferencesLookup=new Map,this._fieldsAffectedLookup=new Map,this._latestFieldValues={...e.feature.attributes}}initialize(){this._dependencyGraph=this._buildDependencyGraph()}get _baseContext(){const{editType:e,layer:t,map:i,originalFeature:r,spatialReference:s}=this.arcadeContextInfo,o=(t==null?void 0:t.type)==="feature"?t:(t==null?void 0:t.type)==="scene"&&U(t.associatedLayer)?t.associatedLayer:void 0;return[{$originalfeature:r,$editcontext:{editType:e},$layer:o,$featureset:o,$datastore:t==null?void 0:t.url,$map:i},{spatialReference:s}]}set feature(e){this._latestFieldValues={...e==null?void 0:e.attributes},this._set("feature",e)}evaluateAll(){return this._evaluate(this.executors)}evaluateExpressions(e){return this._evaluate(e)}evaluateInvalidated(e){const{_fieldReferencesLookup:t,_latestFieldValues:i,feature:r}=this,s=new Set;for(const o of e)if(i[o]=r.getAttribute(o),t.has(o))for(const c of t.get(o))s.add(c);return this._evaluate([...s])}async evaluateInvalidatedByGeometry(){if(this._fieldReferencesLookup.has(v4))return this._evaluate([...this._fieldReferencesLookup.get(v4)])}resetExecutors(){for(const e of this.executors)e.reset()}_buildDependencyGraph(){const{_fieldReferencesLookup:e,_fieldsAffectedLookup:t,executors:i}=this,r=new Map(this.inputFields.map(o=>[o.name,o])),s=new Map(i.map(o=>[o,new Array]));for(const o of i){for(const c of o.fieldsUsed){qm(e,c,()=>new Set).add(o);const u=r.get(c),{valueExpressionExecutor:g,editableExpressionExecutor:b}=u;U(g)&&g!==o&&(s.get(g).push(o),qm(t,g,()=>new Set).add(u)),U(b)&&b!==o&&(s.get(b).push(o),qm(t,b,()=>new Set).add(u))}o.geometryUsed&&qm(e,v4,()=>new Set).add(o)}return s}async _evaluate(e){const t=new Map,{_dependencyGraph:i,_fieldsAffectedLookup:r,_latestFieldValues:s}=this;for(const c of e)ree(c,t,i);for(const[c,{resolver:u,dependencyPromises:g}]of t)Promise.all(g).then(async()=>{const[b,S]=this._makeContext(s);return c.executeAsync(b,S)}).then(()=>{if(r.has(c))for(const b of r.get(c))this._latestFieldValues[b.name]=b.value;u.resolve()},b=>{!b||ro(b)||Dz(b)||c.markStale(),u.reject(b)});const o=(await Promise.allSettled(Array.from(t.values(),({resolver:c})=>c.promise))).filter(c=>c.status==="rejected"&&!(ro(c.reason)||Dz(c.reason)));if(o.length>0)throw new AggregateError(o,"One or more expression executions failed")}_makeContext(e){const[t,i]=this._baseContext,r=this.feature.clone();return r.attributes=e,[{...t,$feature:r},i]}};v([_()],Gh.prototype,"_baseContext",null),v([_()],Gh.prototype,"feature",null),v([_()],Gh.prototype,"executors",void 0),v([_()],Gh.prototype,"inputFields",void 0),v([_()],Gh.prototype,"arcadeContextInfo",void 0),Gh=v([K(yOe)],Gh);const ree=(e,t,i)=>{if(t.has(e))return;const r=aG();t.set(e,{resolver:r,dependencyPromises:[]}),e.abort();const s=i.get(e);for(const o of s)ree(o,t,i),t.get(o).dependencyPromises.push(r.promise)},Dz=e=>e&&typeof e=="object"&&"message"in e&&e.message==="Cancelled";let Un=class extends ar(Re){constructor(e){super(e),this._expressionTrackingHandles=new Map,this.visibilityExpressionExecutor=null,this.feature=null,this.groupElement=null}initialize(){this.addHandles([ge(()=>[this.visible,this.inputFields],([e])=>{const{inputFields:t}=this,i=!!e&&void 0;for(const r of t)r.required=i},{initial:!0,equals:(e,t)=>t[0]===e[0]&&t[1]===e[1]})])}destroy(){for(const e of this._expressionTrackingHandles.values())e.remove()}get visibilityExpression(){var e;return(e=this.groupElement)==null?void 0:e.visibilityExpression}set visibilityExpression(e){tl(this.groupElement,t=>{t.visibilityExpression=e})}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return U(e)?!!e.lastEvaluatedValue:null}get description(){var e;return(e=this.groupElement)==null?void 0:e.description}set description(e){tl(this.groupElement,t=>{t.description=e})}get inputFields(){return this._get("inputFields")}set inputFields(e){this.handles.removeAll(),e&&this.handles.add(e.map(t=>ge(()=>t.visible,()=>this._dirtyEvaluatedVisibilityExpression()))),this._set("inputFields",e)}get label(){var e;return(e=this.groupElement)==null?void 0:e.label}set label(e){tl(this.groupElement,t=>{t.label=e})}get state(){return U(this.groupElement)&&this.groupElement.initialState||"expanded"}set state(e){this._overrideIfSome("state",e)}get visible(){return this.evaluatedVisibilityExpression!==!1&&this.inputFields&&this.inputFields.some(e=>e.visible)}_dirtyEvaluatedVisibilityExpression(){const{groupElement:e}=this;U(e)&&e.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};v([_()],Un.prototype,"visibilityExpression",null),v([_()],Un.prototype,"visibilityExpressionExecutor",void 0),v([_()],Un.prototype,"evaluatedVisibilityExpression",null),v([_()],Un.prototype,"description",null),v([_()],Un.prototype,"feature",void 0),v([_()],Un.prototype,"groupElement",void 0),v([_()],Un.prototype,"initialFeature",void 0),v([_()],Un.prototype,"inputFields",null),v([_()],Un.prototype,"label",null),v([_()],Un.prototype,"state",null),v([_()],Un.prototype,"visible",null),Un=v([K("esri.widgets.FeatureForm.InputFieldGroup")],Un);const gOe=Un,b4=new wr({attributes:{}}),vOe=["editableExpression","requiredExpression","valueExpression","visibilityExpression"],bOe=["visibilityExpression"],wOe="#JSAPI_CONTINGENT_VALUE_EMPTY_HASH",X0="#JSAPI_CONTINGENT_VALUE_ANY_HASH",_Oe="#JSAPI_CONTINGENT_VALUE_NULL_HASH";let Pi=class extends ar(Iw(ss.EventedAccessor)){constructor(e){super(e),this._expressionExecutorLookup=new Map,this._expressionLookup=new Map,this._expressionsManager=null,this._contingentValuesCache=null,this._featureClone=b4.clone(),this._initialFeature=b4.clone(),this.arcadeEditType="NA",this.contingencyConstraintViolations=new Map,this.inputFields=[],this.messages=null,this.strict=!1,this._isSupportedElement=this._isSupportedElement.bind(this)}initialize(){const e=async()=>{const s=await py("esri/widgets/FeatureForm/t9n/FeatureForm");this.messages=s;for(const o of this.allInputFields)o.messages=s};e();const t=ge(()=>{var s;return[this.layer,(s=this.layer)==null?void 0:s.loaded,this.formTemplate]},([s,o])=>{U(s)&&(o?this._updateInputFields():s.load().catch(()=>Ie.getLogger(this.declaredClass).error("Failed to load layer",s.loadError)))},{equals:([s,o,c],[u,g,b])=>s===u&&o===g&&c===b,initial:!0}),i=ge(()=>this._arcadeContextInfo,s=>{U(this._expressionsManager)&&(this._expressionsManager.arcadeContextInfo=s)}),r=ge(()=>this.layer,s=>{const o=(s==null?void 0:s.type)==="subtype-sublayer"?s.parent:(s==null?void 0:s.type)==="feature"?s:null;o&&this.addResolvingPromise(rOe.createLoadedLayerContingentValuesCache(o).then(c=>{this._contingentValuesCache=c,this.notifyChange("fieldsWithContingentValues")}))},{initial:!0});this.handles.add([m5(e),t,i,r])}destroy(){this.feature=null,this.layer=null,this._contingentValuesCache=ti(this._contingentValuesCache)}get _arcadeContextInfo(){const{_initialFeature:e,arcadeEditType:t,layer:i,spatialReference:r,view:s}=this;return{layer:r7(i)?i:null,originalFeature:e,editType:t,spatialReference:r,map:s==null?void 0:s.map}}get updating(){return this.updatingHandles.updating}get allInputFields(){return jz(this.inputFields)}get _layerFieldsByName(){return new Map(this.layer.fields.map(e=>[e.name,e]))}get feature(){return this._get("feature")}set feature(e){this._featureClone=e?e.clone():b4.clone(),this._initialFeature=this._featureClone.clone(),this._resetInputFieldValues(this._featureClone),this.contingencyConstraintViolations.clear(),U(this._expressionsManager)&&(this._expressionsManager.resetExecutors(),this._expressionsManager.feature=this._featureClone,this.updatingHandles.addPromise(this._expressionsManager.evaluateAll().finally(()=>this._afterExpressionsEvaluated()))),this._set("feature",e)}get fieldsWithContingentValues(){if(ae(this._contingentValuesCache))return new Set;const e=this._contingentValuesCache.fieldGroups.flatMap(t=>t.fields);return new Set(e)}get formTemplate(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null}set formTemplate(e){e===void 0?this._clearOverride("formTemplate"):this._override("formTemplate",e)}get formDescription(){const{formTemplate:e,layer:t}=this;return!ae(e)&&e.description&&t?QD(e.description,this.getValues(),t.fieldsIndex):null}get formTitle(){const{formTemplate:e,layer:t}=this;return!ae(e)&&e.title&&t?QD(e.title,this.getValues(),t.fieldsIndex):null}get joinedContingentValues(){return this._joinContingentValues()}get layer(){var e;return((e=this.feature)==null?void 0:e.sourceLayer)&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:null}set layer(e){this._override("layer",e)}get spatialReference(){var e,t;return(t=(e=this.layer)==null?void 0:e.spatialReference)!=null?t:null}set spatialReference(e){this._override("spatialReference",e)}get state(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}get submittable(){return!!this.valid||this.allInputFields.filter(e=>!e.valid).every(({submittable:e})=>e)}get valid(){const e=this.allInputFields;return e.length>0&&e.every(({valid:t})=>t)}findField(e){return this.allInputFields.find(t=>t.name===e)}getValue(e){var s;const{_featureClone:t,layer:i}=this,r=!!(i!=null&&i.getField(e));return(s=t.getAttribute(e))!=null?s:r?null:void 0}setValue(e,t){const{_featureClone:i,strict:r}=this,s=this.findField(e);t=t===""?null:t,s&&i.getAttribute(e)!==t&&(s.value=t,r&&!s.valid||(this._afterValueChange(s),U(this._expressionsManager)&&this.updatingHandles.addPromise(this._expressionsManager.evaluateInvalidated([s.name]).finally(()=>this._afterExpressionsEvaluated()))))}getValues(){return{...this._featureClone.attributes}}submit(){const e=this.allInputFields,t=new Set(e.filter(s=>s.valid).map(({name:s})=>s)),i=e.filter(s=>!s.valid).map(({name:s})=>s),r=this.getValues();if(this.validateContingencyConstraints(r,{includeIncompleteViolations:!0}).length>0)for(const[s,o]of this.contingencyConstraintViolations.entries())o.type==="error"&&(t.delete(s),i.push(s));this.emit("submit",{valid:[...t],invalid:i,values:r})}validateContingencyConstraints(e,t){const{_contingentValuesCache:i}=this,r=new Map;if(this.contingencyConstraintViolations=r,ae(i))return[];const{invalid:s,incomplete:o}=i.validateContingencyConstraints(e),c=[...s,...t!=null&&t.includeIncompleteViolations?o:[]];for(const u of c)for(const g of u.fieldGroup.fields)r.set(g,u);return c}notifyFeatureGeometryChanged(){const{_expressionsManager:e,feature:t,_featureClone:i}=this;i.geometry=t.geometry,U(e)&&this.updatingHandles.addPromise(e.evaluateInvalidatedByGeometry().finally(()=>this._afterExpressionsEvaluated()))}_emitChangeEvent({name:e,valid:t,value:i}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:e,value:i,valid:t})}_updateInputFields(){const{_featureClone:e,_initialFeature:t,arcadeEditType:i,formTemplate:r,inputFields:s,messages:o,layer:c}=this,u={arcadeEditType:i,feature:e,initialFeature:t,layer:c,messages:o},g=s.slice(),b=U(r)&&r.elements.length>0?this._updateInputFieldsFromElements(g,r.elements,u):this._updateInputFieldsFromLayerFields(g,c==null?void 0:c.fields,u);this.inputFields=b}_updateInputFieldsFromElements(e,t,i){const r=new Map;for(const c of e)if(_d(c)){_4(r,c.groupElement,c);for(const u of c.inputFields)_4(r,u.fieldElement,u)}else _4(r,c.fieldElement,c);const s=new Map,o=this._updateInputFieldsRecursive({existingInputFieldsByElement:r,updatedElements:t.filter(this._isSupportedElement),sharedInitializationProperties:i,group:null,newExpressionExecutorPromises:s});this.updatingHandles.addPromise(Promise.all(Array.from(s.values())).then(()=>{const c=Array.from(this._expressionExecutorLookup.values()),u=jz(o);return this._createExpressionsManager(c,u),this._expressionsManager.evaluateAll().finally(()=>this._afterExpressionsEvaluated())}));for(const[c,u]of r.entries())r.delete(c),u.destroy();return o}_updateInputFieldsRecursive(e){const{existingInputFieldsByElement:t,updatedElements:i,sharedInitializationProperties:r,group:s,newExpressionExecutorPromises:o}=e,c=[];for(const u of i){const g=t.has(u),b=g?t.get(u):w4(u)?this._makeInputFieldGroupFromGroupElement(u,r):this._makeInputFieldFromFieldElement(u,r,s);if(c.push(b),g)if(t.delete(u),_d(b)){const{feature:S}=r;b.set({feature:S})}else b.set(r);else this._assignExpressionExecutors(b,u,o);if(w4(u)){const S=u.elements.filter(E=>this._isSupportedElement(E));b.inputFields=this._updateInputFieldsRecursive({existingInputFieldsByElement:t,updatedElements:S,sharedInitializationProperties:r,group:b,newExpressionExecutorPromises:o})}}return c}_updateInputFieldsFromLayerFields(e,t,i){var S,E;if(!Array.isArray(t))return Ie.getLogger(this.declaredClass).warn(this.declaredClass,"No attribute fields found."),[];const r=new Map;for(const A of e)if(_d(A)){for(const O of A.inputFields)O.destroy();A.inputFields.length=0,A.destroy()}else U(A.fieldElement)?A.destroy():r.set(A.field,A);const s=[],{arcadeEditType:o,feature:c,initialFeature:u,layer:g,messages:b}=i;for(const A of t){const O=(E=r.get(A))!=null?E:new m$({arcadeEditType:o,field:A,feature:c,initialFeature:u,layer:g,messages:b,value:(S=c.getAttribute(A.name))!=null?S:null});s.push(O),r.delete(A)}for(const[A,O]of r.entries())r.delete(A),O.destroy();return s}_resetInputFieldValues(e){for(const t of this.allInputFields)t.value=e.getAttribute(t.name)}_makeInputFieldFromFieldElement(e,t,i=null){var g;const{arcadeEditType:r,feature:s,initialFeature:o,layer:c,messages:u}=t;return new m$({arcadeEditType:r,fieldElement:e,field:this._layerFieldsByName.get(e.fieldName),value:(g=s.getAttribute(e.fieldName))!=null?g:null,feature:s,initialFeature:o,layer:c,group:i,messages:u})}_makeInputFieldGroupFromGroupElement(e,t){const{feature:i,initialFeature:r}=t;return new gOe({groupElement:e,inputFields:[],feature:i,initialFeature:r})}_assignExpressionExecutors(e,t,i){var o;const r=w4(t)?bOe:vOe,s=[];for(const c of r){const u=t[c],{_expressionExecutorLookup:g}=this;if(U(u)&&u!==""){const b=`${c}Executor`,S=(o=this._expressionLookup.get(u))!=null?o:this._addToExpressionLookup(u);if(g.has(S))e[b]=g.get(S);else if(i.has(S)){const E=i.get(S).then(A=>(e[b]=A,A));i.set(S,E)}else{const E=mOe(S,this.layer).then(A=>(e[b]=A,g.set(S,A),A));i.set(S,E)}}}return s}_createExpressionsManager(e,t){const{_arcadeContextInfo:i,_featureClone:r}=this;this._expressionsManager=new Gh({executors:e,feature:r,arcadeContextInfo:i,inputFields:t})}_afterValueChange(e){var b;const{name:t,value:i}=e,{_featureClone:r,formTemplate:s,layer:o}=this;if(!o)return;const c=r.getAttribute(t);r.setAttribute(t,i);const{typeFieldName:u,types:g}=f$(o);if(t===u&&i!==c){if(o.type==="subtype-sublayer"){const E=(b=o.parent)==null?void 0:b.findSublayerForFeature(r);r.sourceLayer=this.feature.sourceLayer=E}const S=new Set;for(const E of g)if(E.domains&&typeof E.domains=="object")for(const A of Object.keys(E.domains))S.add(A);for(const E of S){const A=this.findField(E);A&&A.notifyChange("domain")}}if(U(s)){const{description:S,title:E}=s;E&&z4(E,t)&&this.notifyChange("formTitle"),S&&z4(S,t)&&this.notifyChange("formDescription")}this._emitChangeEvent(e)}_afterExpressionsEvaluated(){const{_featureClone:e}=this;for(const t of this.allInputFields)t.value!==e.getAttribute(t.name)&&this._afterValueChange(t)}_addToExpressionLookup(e){var s,o;const{_expressionLookup:t,formTemplate:i}=this,r=(o=(s=U(i)&&U(i.expressionInfos)?Object.values(i.expressionInfos).find(c=>c.name===e):null)==null?void 0:s.expression)!=null?o:e;return t.set(e,r),e!==r&&t.set(r,r),r}_isSupportedElement(e){return e.type==="field"||e.type==="group"||(Ie.getLogger(this.declaredClass).warn("form-info::unsupported-element-type","Only element types 'field' and 'group' are supported",`Element ${e.label} has unsupported type '${e.type}'`),!1)}_joinContingentValues(){const e=this._contingentValuesCache;if(ae(e))return[];const{typeFieldName:t}=f$(this.layer),i=t?this.getValue(t):null,r=[];for(const c of e.fieldGroups){const{contingencies:u,fields:g,name:b}=c,S=[];for(const E of u)E.isRetired||U(E.subtype)&&E.subtype.code!==i||S.push({values:E.values});S.length>0&&r.push({name:b,fields:g,contingencies:S})}const[s,o]=this._generateJoinPlan(r);return[...s.flatMap(c=>this._joinFieldGroupContingencies(c)),...o.flatMap(c=>c.contingencies)]}_generateJoinPlan(e){const t=new Map,i=[],r=new Set;for(const g of e)for(const b of g.fields)if(t.has(b)){const S=t.get(b),E=g,A=[S.name,E.name].sort().join("|");if(r.has(A))continue;i.push([S,E]),r.add(A),t.set(b,E)}else t.set(b,g);const s=new Set(i.flat()),o=new Set(e);for(const g of s)o.delete(g);const c=new Map,u=new Map;for(const g of new Set(i.flat())){const b=Symbol(g.name);c.set(b,new Set([g])),u.set(g,b)}for(const[g,b]of i){const S=u.get(g),E=u.get(b);if(S===E)continue;const A=c.get(S),O=c.get(E);for(const L of O)A.add(L),u.set(L,S);c.delete(E)}return[[...c.values()].map(g=>[...g]),[...o]]}_joinFieldGroupContingencies(e){const t=e.slice(),i=t.shift();let r=t.shift(),s=this._generateJoinKey(i.fields,r.fields),o=new Set([...i.fields,...r.fields]),c=new Map;for(const g of i.contingencies){const[b]=this._hashContingency(g,s.codedValueFields,!0);c.has(b)?c.get(b).push(g):c.set(b,[g])}for(;t.length>0;){const g=new Map,b=t.shift(),S=this._generateJoinKey(o,b.fields);for(const E of r.contingencies){const[A,O]=this._hashContingency(E,s.codedValueFields),L=O?this._findMatchingContingenciesWithAnyHashMask(c,A):c.get(A);if(c.has(X0)&&L.push(...this._findMatchingContingenciesContainingAny(E,c.get(X0),s.codedValueFields)),!ae(L))for(const N of L){const z=s.rangeFields.length>0?this._joinContingenciesWithRangeDomains(N,E,s.rangeFields):this._joinContingencies(N,E);if(ae(z))break;const[q]=this._hashContingency(z,S.codedValueFields,!0);g.has(q)?g.get(q).push(z):g.set(q,[z])}}c=g,r=b,s=S,o=new Set([...o,...r.fields])}const u=[];for(const g of r.contingencies){const[b,S]=this._hashContingency(g,s.codedValueFields),E=S?this._findMatchingContingenciesWithAnyHashMask(c,b):c.get(b);if(c.has(X0)&&E.push(...this._findMatchingContingenciesContainingAny(g,c.get(X0),s.codedValueFields)),!ae(E))for(const A of E){const O=s.rangeFields.length>0?this._joinContingenciesWithRangeDomains(A,g,s.rangeFields):this._joinContingencies(A,g);U(O)&&u.push(O)}}return u}_joinContingencies(e,t){const i={values:{...e.values,...t.values}};for(const[r,s]of Object.entries(i.values))s.objectType==="any"&&U(e.values[r])&&(i.values[r]=e.values[r]);return i}_joinContingenciesWithRangeDomains(e,t,i){const r=this._joinContingencies(e,t);for(const s of i){const o=e.values[s],c=t.values[s],{leftIsNull:u,rightIsNull:g,bothAreNull:b,leftIsAny:S,rightIsAny:E,bothAreAny:A,leftIsRange:O,rightIsRange:L}=this._compareObjectTypes(o.objectType,c.objectType);if(b||A)continue;if(u&&E||g&&S){r.values[s]=new hs({objectType:"null"});continue}if(u&&L||g&&O)return null;S?(o.minValue=-1/0,o.maxValue=1/0):E&&(c.minValue=-1/0,c.maxValue=1/0);const N=Math.max(o.minValue,c.minValue),z=Math.min(o.maxValue,c.maxValue);if(N>z)return null;r.values[s]=new hs({objectType:"range",minValue:N,maxValue:z})}return r}_findMatchingContingenciesContainingAny(e,t,i){return t.filter(r=>i.every(s=>{var u,g;const o=r.values[s],c=e.values[s];return o.objectType==="any"||c.objectType==="any"||((u=o.codedValue)==null?void 0:u.code)===((g=c.codedValue)==null?void 0:g.code)}))}_findMatchingContingenciesWithAnyHashMask(e,t){const i=RegExp(`${t}$`),r=[];for(const[s,o]of e){if(s===X0)break;i.test(s)&&r.push(...o)}return r}_generateJoinKey(e,t){const i=Array.isArray(e)?new Set(e):e,r=Array.isArray(t)?new Set(t):t,s=i.size<r.size?i:r,o=s===i?r:i,c=new Set,u=new Set;for(const g of s)if(o.has(g)){const b=this.layer.getFieldDomain(g,{feature:this.feature});if(ae(b))continue;switch(b.type){case"coded-value":c.add(g);break;case"range":u.add(g)}}return{codedValueFields:[...c],rangeFields:[...u]}}_hashContingency(e,t,i=!1){var o;if(t.length<1)return[wOe,!1];const r=[];let s=!1;for(const c of t){const u=e.values[c];if(u.objectType==="any"){if(i)return[X0,!0];s=!0,r.push(`${c}:.*`)}else u.objectType==="null"?r.push(`${c}:${_Oe}`):r.push(`${c}:${(o=u.codedValue)==null?void 0:o.code}`)}return[r.sort().join("&"),s]}_compareObjectTypes(e,t){return{leftIsNull:e==="null",rightIsNull:t==="null",bothAreNull:e==="null"&&t==="null",leftIsAny:e==="any",rightIsAny:t==="any",bothAreAny:e==="any"&&t==="any",leftIsRange:e==="range",rightIsRange:t==="range"}}};v([_()],Pi.prototype,"_featureClone",void 0),v([_()],Pi.prototype,"_arcadeContextInfo",null),v([_()],Pi.prototype,"updating",null),v([_({readOnly:!0})],Pi.prototype,"allInputFields",null),v([_()],Pi.prototype,"_layerFieldsByName",null),v([_()],Pi.prototype,"arcadeEditType",void 0),v([_()],Pi.prototype,"contingencyConstraintViolations",void 0),v([_()],Pi.prototype,"feature",null),v([_()],Pi.prototype,"fieldsWithContingentValues",null),v([_({type:VJ})],Pi.prototype,"formTemplate",null),v([_()],Pi.prototype,"formDescription",null),v([_()],Pi.prototype,"formTitle",null),v([_()],Pi.prototype,"inputFields",void 0),v([_()],Pi.prototype,"joinedContingentValues",null),v([_()],Pi.prototype,"layer",null),v([_()],Pi.prototype,"messages",void 0),v([_()],Pi.prototype,"spatialReference",null),v([_()],Pi.prototype,"state",null),v([_()],Pi.prototype,"strict",void 0),v([_()],Pi.prototype,"submittable",null),v([_()],Pi.prototype,"valid",null),v([_()],Pi.prototype,"view",void 0),v([_()],Pi.prototype,"getValues",null),v([_()],Pi.prototype,"submit",null),Pi=v([K("esri.widgets.FeatureForm.FeatureFormViewModel")],Pi);const w4=e=>e.type==="group",jz=e=>e.reduce((t,i)=>_d(i)?[...t,...i.inputFields]:[...t,i],[]),_4=(e,t,i)=>{U(t)&&e.set(t,i)},see=Pi,zz="TT",_1="data-field-name",Vz="latn",x4=e=>"valueAsDate"in e;let Ws=class extends ki{constructor(e,t){super(e,t),this._dateInputFieldMap=new Map,this._activeInputName="",this._activeNumberFieldEdit=null,this._fieldFocusNeeded=!1,this._fieldToInitialIncompatibleDomainValue=new Map,this._switchFieldsWithInitialIncompatibleValue=new Set,this._userUpdatedInputFieldNames=new Set,this.disabled=!1,this.groupDisplay="all",this.headingLevel=2,this.messages=null,this.messagesTemplates=null,this.viewModel=new see,this._handleInputInput=i=>{this._commitInputValue(i.currentTarget)},this._handleFormKeyDown=this._handleFormKeyDown.bind(this),this._handleInputBlur=this._handleInputBlur.bind(this),this._handleInputFocus=this._handleInputFocus.bind(this),this._handleNumberInputMouseDown=this._handleNumberInputMouseDown.bind(this),this._handleInputKeyDown=this._handleInputKeyDown.bind(this),this._handleOptionChange=this._handleOptionChange.bind(this),this._handleGroupClick=this._handleGroupClick.bind(this),this._handleSubmit=this._handleSubmit.bind(this),this._afterInputCreateOrUpdate=this._afterInputCreateOrUpdate.bind(this),this._afterDateInputCreateOrUpdate=this._afterDateInputCreateOrUpdate.bind(this)}initialize(){this.addHandles([ge(()=>this.feature,()=>{const e=this._getFocusableInput("forward");this._activeInputName=(e==null?void 0:e.name)||"",this._userUpdatedInputFieldNames.clear(),this._fieldToInitialIncompatibleDomainValue.clear(),this._switchFieldsWithInitialIncompatibleValue.clear(),this._dateInputFieldMap.clear(),this._fieldFocusNeeded=!0}),this.on("submit",e=>{if(e.invalid.length>0){const[t]=e.invalid;e.invalid.forEach(i=>this._userUpdatedInputFieldNames.add(i)),this._activeInputName=t,this._fieldFocusNeeded=!0,this.scheduleRender()}})])}loadDependencies(){return Promise.all([pe(()=>import("./calcite-combobox.91eff9c9.js"),["assets/calcite-combobox.91eff9c9.js","assets/filter2.32839055.js","assets/debounce.43d64738.js","assets/openCloseComponent.1beecb6a.js","assets/form.af49867d.js","assets/guid.994bd1dc.js","assets/interactive.5c805e74.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/utils2.f85ee700.js","assets/conditionalSlot.25fc4c17.js","assets/icon.48bdede2.js"]),pe(()=>import("./calcite-combobox-item.b11fce2d.js"),["assets/calcite-combobox-item.b11fce2d.js","assets/conditionalSlot.25fc4c17.js","assets/observers.6e054a3b.js","assets/guid.994bd1dc.js","assets/interactive.5c805e74.js","assets/utils2.f85ee700.js","assets/icon.48bdede2.js"]),pe(()=>import("./calcite-combobox-item-group.ef06551b.js"),["assets/calcite-combobox-item-group.ef06551b.js","assets/guid.994bd1dc.js","assets/utils2.f85ee700.js"]),pe(()=>import("./calcite-input-message.97ae5c9c.js"),["assets/calcite-input-message.97ae5c9c.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"]),pe(()=>import("./calcite-progress.fb2e229d.js"),["assets/calcite-progress.fb2e229d.js","assets/progress.60118725.js"]),pe(()=>import("./calcite-switch.345529f0.js"),["assets/calcite-switch.345529f0.js","assets/form.af49867d.js","assets/interactive.5c805e74.js","assets/key.e212d876.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js"]),pe(()=>import("./calcite-input-date-picker.feeffa3d.js"),["assets/calcite-input-date-picker.feeffa3d.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/openCloseComponent.1beecb6a.js","assets/debounce.43d64738.js","assets/form.af49867d.js","assets/interactive.5c805e74.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js","assets/Heading.91bac1c4.js","assets/icon.48bdede2.js","assets/input.6359813e.js","assets/progress.60118725.js"]),pe(()=>import("./calcite-input-time-picker.2259f1c1.js"),["assets/calcite-input-time-picker.2259f1c1.js","assets/form.af49867d.js","assets/guid.994bd1dc.js","assets/interactive.5c805e74.js","assets/key.e212d876.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/observers.6e054a3b.js","assets/icon.48bdede2.js","assets/action.1ad673c5.js","assets/loader.9c78e3db.js","assets/input.6359813e.js","assets/progress.60118725.js","assets/popover.12329f5f.js","assets/openCloseComponent.1beecb6a.js","assets/debounce.43d64738.js","assets/Heading.91bac1c4.js"])])}get feature(){return this.viewModel.feature}set feature(e){this.viewModel.feature=e}get formTemplate(){return this.viewModel.formTemplate}set formTemplate(e){this.viewModel.formTemplate=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(e){this.viewModel.spatialReference=e}get strict(){return this.viewModel.strict}set strict(e){this.viewModel.strict=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}getValues(){return this.viewModel.getValues()}submit(){return this.viewModel.submit()}render(){const{state:e}=this.viewModel;return J("div",{class:this.classes(Lt.base,Lt.widget,Lt.panel)},e==="ready"?this.renderForm():null)}renderForm(){const e=this.viewModel,t=U(e.formTitle)&&J(sl,{key:"title",level:this.headingLevel},e.formTitle),i=U(e.formDescription)&&J("p",{class:Lt.description,key:"description"},e.formDescription),r=t||i?J("div",{class:Lt.formHeader},t,i):null;return J("form",{class:Lt.form,novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},r,this.renderFields())}renderFields(){const{viewModel:{inputFields:e}}=this;return e.filter(t=>t.visible).map((t,i)=>_d(t)?this.renderGroup(t,i):this.renderLabeledField(t))}renderGroup(e,t){const{formTemplate:i,disabled:r}=this,{description:s,inputFields:o,label:c,state:u}=e,g=o.filter(Z=>Z.visible),b=this.viewModel.findField(this._activeInputName),S=!(!b||b.group!==e),E=`${this.id}_group_${t}`,A=`${this.id}_group-label_${t}`,O=`${this.id}_group-description_${t}`,L=s?J("p",{class:this.classes(Lt.groupDescription,Lt.description),id:O},s):null,N=this.groupDisplay==="sequential",z=N?S:u==="expanded",q=z?Lt.collapseIcon:Lt.expandIcon;return J("fieldset",{"aria-expanded":z.toString(),"aria-labelledby":A,"aria-describedby":s?O:"",class:this.classes(Lt.group,N?Lt.groupSequential:null,z?null:Lt.groupCollapsed,S?Lt.groupActive:null,r?Lt.inputDisabled:null),disabled:r,"data-group":e,id:E,key:t,onclick:this._handleGroupClick},J("button",{role:N?"presentation":void 0,class:Lt.groupHeader,type:"button",tabIndex:N?-1:0},J("div",{class:Lt.groupTitle},J(sl,{class:Lt.groupLabel,id:A,level:U(i)&&i.title?K1(this.headingLevel):this.headingLevel},c),L),N?null:J("span",{class:this.classes(q,Lt.groupToggleIcon)})),g.map(Z=>this.renderLabeledField(Z)))}_getFocusableInput(e,t){const i=this.viewModel.allInputFields,r=e==="forward"?i:i.slice().reverse();let s;if(t)if(_d(t))s=r.indexOf(t.inputFields[0]);else{let o;if(this._isInputFieldInGroup(t)&&t.group.state==="collapsed"){const{inputFields:c}=t.group;o=e==="forward"?c[c.length-1]:c[0]}else o=t;s=r.indexOf(o)+1}else s=0;for(let o=s;o<r.length;o++){const c=r[o];if(c.visible)return c}return null}renderLabeledField(e){const{feature:t,label:i,layer:r,type:s}=e;return J("label",{key:`${r.id}-${t.uid}-${e.name}`,class:Lt.label},[i,s!=="unsupported"?this.renderInputField(e):this.renderUnsupportedField(e),this.renderAuxiliaryText(e)])}renderInputField(e){const{domain:t,name:i,type:r,updating:s,value:o}=e,c=this.getCommonInputProps(e);if((t==null?void 0:t.type)==="coded-value"){if(ec(e.fieldElement,"switch")){const{fieldElement:g}=e;if(!(this._switchFieldsWithInitialIncompatibleValue.has(i)||o==null||g.input.onValue!==o&&g.input.offValue!==o))return this.renderSwitchInputField(e,c);this._switchFieldsWithInitialIncompatibleValue.add(i)}return e.inputType==="radio-buttons"?this.renderRadioButtonsInputField(e,t.codedValues.map(({code:g,name:b})=>({value:g,name:b})),c):this.renderSelectInputField(e,this._getFieldValueOptions(i,t),c)}if(e.inputType==="datetime-picker"||r==="date")return this.renderDateInputField(e,c);const u=r==="number"?J("input",{type:"number",...c,value:U(this._activeNumberFieldEdit)&&this._activeNumberFieldEdit.fieldName===e.name?this._activeNumberFieldEdit.value:`${c.value}`}):e.inputType==="text-area"?J("textarea",{...c}):J("input",{type:"text",...c});return s?J("div",{class:Lt.inputFieldWrapper},u,J("div",{class:Lt.inputFieldLoader},J("calcite-progress",{type:"indeterminate"}))):u}renderDateInputField(e,t){var z,q;const{includeTime:i,label:r,name:s,valid:o,value:c}=e,{readOnly:u,required:g}=t,{date:b,time:S}=this._formatValueForDateInputs(c),E=U(t.max)?this._formatValueForDateInputs(t.max):void 0,A=U(t.min)?this._formatValueForDateInputs(t.min):void 0,O=(z=E==null?void 0:E.date)!=null?z:void 0,L=(q=A==null?void 0:A.date)!=null?q:void 0,N={afterCreate:this._afterDateInputCreate,afterUpdate:this._afterDateInputCreateOrUpdate,"aria-invalid":!o,label:r,numberingSystem:Vz,overlayPositioning:"fixed",readOnly:u,required:g,tabIndex:0,[_1]:s};return J("div",{key:`${t.key}-date-time-container`,class:Lt.dateInputContainer},J("calcite-input-date-picker",{bind:this,...N,class:this.classes(t.class,Lt.inputDate),"data-date-part":"date",key:`${t.key}-date-input`,valueAsDate:b!=null?b:void 0,maxAsDate:O,minAsDate:L,onCalciteInputDatePickerChange:Z=>this._commitDateChanges(Z.target),onblur:Z=>this._commitDateChanges(Z.target,!0)}),i?J("calcite-input-time-picker",{bind:this,...N,class:this.classes(t.class,Lt.inputTime),"data-date-part":"time",key:`${t.key}-time-input`,value:S!=null?S:void 0,step:1,onCalciteInputTimePickerChange:Z=>this._commitDateChanges(Z.target),onfocus:Z=>{Z.target.calciteTimePickerEl&&(Z.target.calciteTimePickerEl.showSecond=!0)},onblur:Z=>this._commitDateChanges(Z.target,!0)}):null)}renderUnsupportedField(e){const t=this.getCommonInputProps(e);return J("input",{afterCreate:t.afterCreate,afterUpdate:t.afterUpdate,class:this.classes(Lt.input,Lt.inputField,Lt.inputDisabled),onfocus:t.onfocus,readOnly:!0,tabIndex:t.tabIndex,type:"text",value:t.value,[_1]:t[_1]})}renderSelectInputField(e,t,i){const{value:r}=e,{messages:s,messagesTemplates:o}=this,c=t.map(E=>E.map(A=>J("calcite-combobox-item",{value:`${A.value}`,textLabel:A.name,key:`#${A.value}`,selected:r===A.value}))),[u,g]=c;this._registerIncompatibleValue(r,t.flat(),e,E=>{g.unshift(J("calcite-combobox-item",{value:`${E}`,textLabel:`${E}`,key:"incompatible-option",readOnly:!0}))});const b=g.length>0?[J("calcite-combobox-item-group",{key:"recommended",label:s.recommended},u),J("calcite-combobox-item-group",{key:"other",label:o.other},g)]:u,S=ae(e.fieldElement)||ec(e.fieldElement,"combo-box")&&e.fieldElement.input.showNoValueOption;if(!e.required&&S){const E="",A=ec(e.fieldElement,"combo-box")&&e.fieldElement.input.noValueOptionLabel||this.messages.empty;b.unshift(J("calcite-combobox-item",{value:E,textLabel:this.messages.empty,key:"empty-option"},A))}return J("calcite-combobox",{...i,selectionMode:"single",disabled:i.readOnly,allowCustomValues:!1,onCalciteComboboxChange:E=>this._handleOptionChange(E.target)},b)}_registerIncompatibleValue(e,t,i,r){const s=this._fieldToInitialIncompatibleDomainValue,o=s.has(i.name);(o||e!=null&&e!==""&&!t.some(c=>c.value===e))&&(o||s.set(i.name,e),r==null||r(e))}renderRadioButtonsInputField(e,t,i){const{value:r}=e,s=t.map(c=>this.renderRadioButton({key:c.name,label:c.name,name:e.name,value:c.value,selected:c.value===r,props:i}));this._registerIncompatibleValue(r,t,e);const o=ae(e.fieldElement)||ec(e.fieldElement,"radio-buttons")&&e.fieldElement.input.showNoValueOption;if(!e.required&&o){const c="",u=ec(e.fieldElement,"radio-buttons")&&e.fieldElement.input.noValueOptionLabel||this.messages.empty,g=r===c||r===null;s.unshift(this.renderRadioButton({key:"empty-option",label:u,name:e.name,value:c,selected:g,props:i}))}return J("div",{key:`${i.key}-radio`,class:Lt.inputRadioGroup},s)}renderSwitchInputField(e,t){const{value:i}=e,r=!!ec(e.fieldElement,"switch")&&i===e.fieldElement.input.onValue;return J("calcite-switch",{...t,class:Lt.inputSwitch,onCalciteSwitchChange:s=>this._commitInputValue(s.target),checked:r,disabled:t.readOnly})}renderRadioButton({key:e,name:t,value:i,selected:r,label:s,props:o}){return J("label",{key:e,class:Lt.inputRadioLabel},J("input",{...o,class:Lt.inputRadio,name:t,type:"radio",value:i,checked:r,disabled:o.readOnly,onchange:c=>this._commitInputValue(c.target)}),s)}renderAuxiliaryText(e){const t=this._userUpdatedInputFieldNames.has(e.name)&&!e.valid?e.errorMessage:U(this.viewModel.contingencyConstraintViolations.get(e.name))?this.messages.validationErrors.valuesIncompatible:U(e.valueExpressionExecutor)&&e.valueExpressionExecutor.stale?this.messages.valueExpressionError:null;return U(t)?J("calcite-input-message",{status:"invalid",icon:!0},t):e.description?J("div",{key:"description",class:Lt.description},e.description):null}getCommonInputProps(e){const{disabled:t,groupDisplay:i}=this,{editable:r,group:s,hint:o,label:c,maxLength:u,minLength:g,name:b,required:S,type:E,valid:A,value:O}=e,L=this._userUpdatedInputFieldNames.has(b),N=!r||t,z=i==="all"&&U(s)&&s.state==="collapsed";return{afterCreate:this._afterInputCreateOrUpdate,afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":A?"false":"true",class:this.classes(Lt.input,Lt.inputField,N?Lt.inputDisabled:null,L&&!A?Lt.inputInvalid:null),key:b,label:c,minlength:g>-1?`${g}`:"",maxlength:u>-1?`${u}`:"",...this._getNumberFieldConstraints(e),readOnly:N,value:O==null?"":`${O}`,[_1]:b,onfocus:this._handleInputFocus,oninput:this._handleInputInput,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:E==="number"?this._handleNumberInputMouseDown:null,placeholder:E==="number"||E==="text"?o:"",required:S,tabIndex:z?-1:0}}_isInputFieldInGroup(e){return!_d(e)&&U(e.group)}_handleNumberInputMouseDown({target:e}){e.focus(),this.scheduleRender()}_getFieldValueOptions(e,t){const i=t.codedValues.map(({code:s,name:o})=>({value:s,name:o})),r=this.viewModel.fieldsWithContingentValues.has(e)?this._getContingentValueOptions(e):[];if(r.length>0){const s=new Set(r.map(o=>o.value));return[r,i.filter(o=>!s.has(o.value))]}return[i,[]]}_getContingentValueOptions(e){const t={};for(const s of this.viewModel.allInputFields){const{name:o,value:c}=s;!ae(c)&&o!==e&&this.viewModel.fieldsWithContingentValues.has(o)&&(t[o]=c)}const i=this.viewModel.joinedContingentValues.slice(),r=new Map;for(const s of i){const o=s.values[e];if(ae(o)||o.objectType!=="code"&&o.objectType!=="null")continue;const{code:c,name:u}=o.codedValue&&o.objectType!=="null"?o.codedValue:{code:"",name:this.messages.empty};r.has(c)||Object.entries(t).every(([g,b])=>!s.values.hasOwnProperty(g)||this._valueIsValidContingentValue(b,s.values[g]))&&r.set(c,{name:u,value:c})}return[...r.values()]}_getInputFieldFromInput(e){return this.viewModel.findField(e.getAttribute(_1))}_getNumberFieldConstraints(e){const t=c7(e.domain)||Mq(e.field);return t&&t.max!==Number.MAX_VALUE&&t.min!==Number.MIN_VALUE?t:{min:null,max:null}}async _afterDateInputCreate(e){!x4(e)&&U(e.value)&&"setValue"in e&&e.setValue({value:e.value,origin:"external"}),this._afterDateInputCreateOrUpdate(e)}_afterDateInputCreateOrUpdate(e){const{name:t}=this._getInputFieldFromInput(e),i=this._dateInputFieldMap.get(t),r=x4(e);U(i)?r?i.date=e:i.time=e:this._dateInputFieldMap.set(t,{[r?"date":"time"]:e}),this._afterInputCreateOrUpdate(e)}_afterInputCreateOrUpdate(e){const{viewModel:t}=this,i=this._getInputFieldFromInput(e),r=t.findField(this._activeInputName),s=this._fieldToInitialIncompatibleDomainValue.get(i.name)===i.value;this._fieldFocusNeeded&&r===i&&(i.inputType!=="radio-buttons"||s||e.checked)&&(this._fieldFocusNeeded=!1,this._isInputFieldInGroup(i)&&(i.group.state="expanded"),e.focus())}_handleInputFocus(e){const t=e.target,i=this._getInputFieldFromInput(t);this._activeInputName=i.name,this._isNumberInputField(i)&&(this._activeNumberFieldEdit={fieldName:i.name,input:t,value:t.value})}_isNumberInputField({domain:e,inputType:t="text-box",type:i}){return i==="number"&&t==="text-box"&&(!e||e.type!=="coded-value")}_handleInputBlur(e){const t=e.target,i=this._getInputFieldFromInput(t);i.type==="number"&&U(this._activeNumberFieldEdit)&&(this._activeNumberFieldEdit.input.value=`${i.value}`,this._activeNumberFieldEdit=null),this._commitInputValue(t),this.scheduleRender()}_commitDateChanges(e,t=!1){const{name:i}=this._getInputFieldFromInput(e);if(!this._dateInputFieldMap.has(i))return;const r=this._dateInputFieldMap.get(i);if(!r||!r.date)return;const s=this._getFieldValueFromDateInput(e),o=this._getFieldValueFromDateInputs(r.date,r.time);this.viewModel.getValue(i)!==o&&(s!==null&&o!==null?this._updateFieldValue(i,o):t&&this._updateFieldValue(i,null))}_commitInputValue(e){const t=this._getInputFieldFromInput(e);U(this._activeNumberFieldEdit)&&this._isNumberInputField(t)&&(this._activeNumberFieldEdit.value=e.value),this._updateFieldValue(t.name,this._parseValue(e))}_handleInputKeyDown(e){const{key:t,altKey:i,ctrlKey:r,metaKey:s}=e,o=this._getInputFieldFromInput(e.target);if(t==="Enter")this._isInputFieldInGroup(o)&&o.group.state==="collapsed"&&(o.group.state="expanded");else{const{type:c}=o.field,u=c==="single"||c==="double";if((c==="integer"||c==="small-integer"||u)&&!i&&!r&&!s&&t.length===1){const g=Number(t),b=["-","+"],S=["e","."],E=u?[...b,...S]:b;isNaN(g)&&!E.includes(t)&&e.preventDefault()}}}_updateFieldValue(e,t){if(this.viewModel.setValue(e,t),this._userUpdatedInputFieldNames.add(e),this.viewModel.fieldsWithContingentValues.has(e)){const i=Object.fromEntries(Object.entries(this.getValues()).filter(([r,s])=>U(s)));this.viewModel.validateContingencyConstraints(i)}}_parseValue(e){const t=this._getInputFieldFromInput(e),i=e.value;if(ec(t.fieldElement,"switch")&&e.tagName!=="CALCITE-COMBOBOX")return e.checked?t.fieldElement.input.onValue:t.fieldElement.input.offValue;if(t.inputType==="radio-buttons"&&e.type==="radio"&&!e.checked)return t.value;const{type:r}=t;return r==="number"?i?parseFloat(i):null:i}_handleOptionChange(e){this._commitInputValue(e),this.scheduleRender()}_handleGroupClick(e){var o;const t=e.currentTarget["data-group"],i=t.state==="expanded",r=this.groupDisplay==="sequential",s=`.${Lt.groupHeader}`;if(!(i&&!e.target.closest(s))){if(this._activeInputName=((o=this._getFocusableInput("forward",t))==null?void 0:o.name)||"",r){const c=e.target.closest(s);if(i&&!c)return;this.viewModel.inputFields.forEach(u=>{_d(u)&&u!==t&&(u.state="collapsed")})}t.state=i?"collapsed":"expanded",this._fieldFocusNeeded=r,this.scheduleRender()}}_handleSubmit(e){e.preventDefault()}_handleFormKeyDown(e){e.key==="Enter"&&this.viewModel.submit()}_getDefaultLocaleOptions(){return{locale:Dr(),numberingSystem:Vz}}_getFieldValueFromDateInputs(e,t){const i=this._getDateTimeFromInput(e),r=this._getDateTimeFromInput(t);if(!i&&!r)return null;const s=this._getInputFieldFromInput(e),o=this._getNumberFieldConstraints(s),c=Date.now(),u=U(o.max)&&o.max<c?o.max:c,g=Ke.fromMillis(u,this._getDefaultLocaleOptions()),b=i||g,{year:S,month:E,day:A}=b,{hour:O,minute:L,second:N}=r||g,z=b.set({year:S,month:E,day:A,hour:O,minute:L,second:N});return z.isValid?z.toMillis():null}_getDateTimeFromInput(e){if(!e)return null;let t=null;if(x4(e)){const i=e.valueAsDate;if(!i||Array.isArray(i))return null;t=Ke.fromJSDate(i)}else{if(!e.value)return null;t=Ke.fromFormat(e.value,zz,this._getDefaultLocaleOptions())}return t!=null?t:null}_getFieldValueFromDateInput(e){return this._dateTimeToFieldValue(this._getDateTimeFromInput(e))}_dateTimeToFieldValue(e){return e!=null&&e.isValid?e.toMillis():null}_dateTimeFromFieldValue(e){return e===null?null:Ke.fromMillis(e,this._getDefaultLocaleOptions())}_formatValueForDateInputs(e){if(e==null||isNaN(e))return{date:null,time:null};const t=this._dateTimeFromFieldValue(e);return t?{date:t.toJSDate(),time:t.toFormat(zz,this._getDefaultLocaleOptions())}:{date:null,time:null}}_valueIsValidContingentValue(e,t){var i;switch(t.objectType){case"any":return!0;case"null":return e==null;case"code":return e===((i=t.codedValue)==null?void 0:i.code);case"range":return U(e)&&U(t.minValue)&&U(t.maxValue)&&e>=t.minValue&&e<=t.maxValue;default:return t.objectType,!1}}};v([_()],Ws.prototype,"disabled",void 0),v([_()],Ws.prototype,"feature",null),v([_()],Ws.prototype,"formTemplate",null),v([_()],Ws.prototype,"groupDisplay",void 0),v([_()],Ws.prototype,"headingLevel",void 0),v([_()],Ws.prototype,"label",null),v([_()],Ws.prototype,"layer",null),v([_(),ui("esri/widgets/FeatureForm/t9n/FeatureForm")],Ws.prototype,"messages",void 0),v([_(),ui("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],Ws.prototype,"messagesTemplates",void 0),v([_()],Ws.prototype,"spatialReference",null),v([_()],Ws.prototype,"strict",null),v([_()],Ws.prototype,"view",null),v([_(),G5(["value-change","submit"])],Ws.prototype,"viewModel",void 0),Ws=v([K("esri.widgets.FeatureForm")],Ws);const xOe=Ws;var B$;const SOe="esri.widgets.FeatureTemplates.TemplateItem";let Xu=B$=class extends ar(Re){constructor(e){super(e),this._activeFetchInfo={id:null,request:null},this.layer=null,this.template=null,this.thumbnail=null}initialize(){this.handles.add(ge(()=>{const{layer:e}=this;return[e&&"renderer"in e?e.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null,this._activeFetchInfo.request=null,this._set("thumbnail",null)},rt))}get description(){var e;return(e=this.template)==null?void 0:e.description}set description(e){this.template&&(this.template.description=e)}get label(){var e;return(e=this.template)==null?void 0:e.name}set label(e){this.template&&(this.template.name=e)}get id(){var e,t;return`${(e=this.label)!=null?e:""}\u2013${(t=this.layer)==null?void 0:t.id}`}clone(){const e=U(this.thumbnail)?this.thumbnail.cloneNode(!0):null,t=new B$({layer:this.layer,template:this.template});return t._set("thumbnail",e),t}static async fetchThumbnail(e,t){var s,o,c;const i=await IOe(e,t);if(ae(i))return null;const r={maxSize:36};return((s=e.renderer)==null?void 0:s.type)==="dictionary"&&(r.fieldMap=(o=e.renderer.fieldMap)!=null?o:void 0,r.feature={attributes:(c=t.prototype.attributes)!=null?c:{}}),await rZ(i,r)}};async function IOe(e,t){const{renderer:i}=e;if(i){const r=new wr({attributes:t.prototype.attributes}),s=await i.getSymbolAsync(r);if(s)return s}return EOe(e)}async function EOe(e){const{geometryType:t}=e,i=t==="point"||t==="multipoint"?await pe(()=>Promise.resolve().then(function(){return Zpe}),void 0):t==="polyline"?await pe(()=>Promise.resolve().then(function(){return ape}),void 0):t==="polygon"||t==="mesh"||t==="multipatch"?await pe(()=>Promise.resolve().then(function(){return Kpe}),void 0):null;return i?new i.default:null}v([_()],Xu.prototype,"description",null),v([_()],Xu.prototype,"label",null),v([_()],Xu.prototype,"layer",void 0),v([_()],Xu.prototype,"template",void 0),v([_({readOnly:!0})],Xu.prototype,"thumbnail",void 0),v([_()],Xu.prototype,"id",null),Xu=B$=v([K(SOe)],Xu);const H$=Xu;let Vm=class extends Gd(Re){constructor(e){super(e),this.items=null,this.label=null}get id(){return this.label}findByTemplate(e){return this.items.find(t=>t.template===e)}};v([_()],Vm.prototype,"items",void 0),v([_()],Vm.prototype,"label",void 0),v([_()],Vm.prototype,"id",null),Vm=v([K("esri.widgets.FeatureTemplates.TemplateItemGroup")],Vm);const MOe=Vm;var $v;const TOe=({layer:e})=>{var t;return{key:e,label:(t=e.title)!=null?t:""}},COe=({layer:e})=>{var t;return{key:e.geometryType,label:(t=e.geometryType)!=null?t:""}};let wn=$v=class extends ar(ss.EventedAccessor){constructor(e){super(e),this._itemPool=new Po(H$),this._groupPool=new Po(MOe),this.filterFunction=null,this.selectedItem=null}initialize(){this._get("groupBy")||(this.groupBy="layer")}set groupBy(e){if(this._set("groupBy",e),typeof e!="function")switch(e){case"layer":this._groupByFunction=TOe;break;case"geometry":this._groupByFunction=COe;break;default:this._groupByFunction=null}else this._groupByFunction=t=>this._ensureGroupByObject(e(t))}set layers(e){const t="layers";if(this.handles.remove(t),e){const i=()=>this.notifyChange("state");this.handles.add(e.map(r=>ts(()=>r.loadStatus,i)),t)}this._set("layers",e)}get layers(){return this._get("layers")}get state(){const{layers:e}=this;return e&&e.length!==0?e.some(t=>t.loadStatus==="loading"||t.loadStatus==="not-loaded")?"loading":"ready":"disabled"}get _featureTemplatesByLayer(){if(!this.layers)return new Map;const e=[];for(const t of this.layers)if(t.type==="subtype-group")for(const i of t.sublayers){const r=Gz(i);e.push([i,r])}else e.push([t,Gz(t)]);return new Map(e)}get numberOfFeatureTemplates(){return Array.from(this._featureTemplatesByLayer.values()).reduce((e,t)=>e+t.length,0)}get items(){var o,c,u;if(this.numberOfFeatureTemplates===0)return this._releasePreviousItems(),[];const e=this._featureTemplatesByLayer,t=[],i=U(this.filterFunction)?this.filterFunction:$v._nullFilterFunction;for(const[g,b]of e)if(g.loaded||g.type==="subtype-sublayer"&&((o=g.parent)==null?void 0:o.loaded)){const S=(c=Tn(g))==null?void 0:c.operations;if((S==null?void 0:S.supportsEditing)&&(S==null?void 0:S.supportsAdd))for(const E of b)t.push({layer:g,template:E,matchesFilter:i({label:E.name})})}if(ae(this._groupByFunction)){const g=t.filter(({matchesFilter:b})=>b).map(({template:b,layer:S})=>this._createItem(b,S));return this._releasePreviousItems(),g}const r=new Map;for(const g of t){const{template:b,layer:S}=g,E=this._groupByFunction({template:b,layer:S}),{key:A,label:O}=U(E.key)?E:$v.nullGroupBy;r.has(A)||r.set(A,{label:O,templateItemInfos:[]}),(u=r.get(A))==null||u.templateItemInfos.push(g)}const s=[];for(const g of r.values()){const{label:b,templateItemInfos:S}=g,E=S.filter(({matchesFilter:O})=>O),A=i({label:b})?S:S.length>0?E:[];if(A.length>0){const O=A.map(({template:L,layer:N})=>this._createItem(L,N));s.push(this._createGroup(b,O))}}return s.length===1&&s[0].label===$v.nullGroupBy.label?(this._releasePreviousItems(),s[0].items):(this._releasePreviousItems(),s)}refresh(){this.notifyChange("items")}select(e,t=!0){var s;const i=this.selectedItem,r=(e==null?void 0:e.clone())||null;this._set("selectedItem",r),t&&this.emit("select",{item:r,oldItem:i,template:(s=r==null?void 0:r.template)!=null?s:null})}_createItem(e,t){const i=this._itemPool.acquire();return i.set({template:e,layer:t}),i}_createGroup(e,t){const i=this._groupPool.acquire();return i.set("label",e),i.items=t,i}_releasePreviousItems(){this._destroyItems(this._get("items"))}_destroyItems(e){!e||(e[0]instanceof H$?e.forEach(t=>this._destroyItem(t)):e.forEach(t=>this._destroyGroup(t)))}_destroyGroup(e){e.items.forEach(t=>this._destroyItem(t)),e.items.length=0,this._groupPool.release(e)}_destroyItem(e){e.layer=null,e.template=null,this._itemPool.release(e)}_ensureGroupByObject(e){return typeof e=="string"?{key:e,label:e}:e}};wn.nullGroupBy={key:Symbol(),label:"Other\u200B"},wn._nullFilterFunction=e=>!0,v([_()],wn.prototype,"_groupByFunction",void 0),v([_()],wn.prototype,"filterFunction",void 0),v([_()],wn.prototype,"groupBy",null),v([_()],wn.prototype,"layers",null),v([_()],wn.prototype,"state",null),v([_({readOnly:!0})],wn.prototype,"_featureTemplatesByLayer",null),v([_({readOnly:!0})],wn.prototype,"numberOfFeatureTemplates",null),v([_({readOnly:!0})],wn.prototype,"items",null),v([_({readOnly:!0})],wn.prototype,"selectedItem",void 0),v([_()],wn.prototype,"select",null),wn=$v=v([K("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],wn);const Gz=e=>[..."templates"in e&&Array.isArray(e.templates)?e.templates:[],..."types"in e&&Array.isArray(e.types)?e.types.flatMap(t=>t.templates):[]],W$=wn,_s="esri-item-list",Ad={base:_s,list:`${_s}__list`,group:`${_s}__group`,scroller:`${_s}__scroller`,groupHeader:`${_s}__group__header`,item:`${_s}__list-item`,itemSelected:`${_s}__list-item--selected`,itemContainer:`${_s}__list-item-container`,itemLabel:`${_s}__list-item-label`,itemIcon:`${_s}__list-item-icon`,noMatchesMessage:`${_s}__no-matches-message`,noItemsMessage:`${_s}__no-items-message`,filterContainer:`${_s}__filter-container`,filterContainerSticky:`${_s}__filter-container--sticky`,filterPlaceholder:`${_s}__filter-placeholder`,filterInput:`${_s}__filter-input`,filterPlaceholderText:`${_s}__filter-placeholder-text`,searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"},nee=4;function oee(e){var z;const{filterEnabled:t=!0,filterText:i="",headingLevel:r=nee,id:s,identify:o,items:c,messages:u,onFilterChange:g,onItemMouseEnter:b,onItemMouseLeave:S,onItemSelect:E,renderIcon:A,selectedItem:O,selectionMode:L="none"}=e,N=(z=e.enableListScroll)!=null?z:!0;return J("div",{key:s},J("calcite-list",{selectionMode:L,selectionAppearance:"border"},t?kOe({filterText:i,messages:u,onFilterChange:g,id:s}):null,$Oe({enableListScroll:N,identify:o,items:c,selectedItem:O,messages:u,filterText:i,headingLevel:r,renderIcon:A,onItemMouseLeave:S,onItemMouseEnter:b,onItemSelect:E})))}function AOe(e){return!!e.items}function $Oe(e){const{headingLevel:t,identify:i,items:r,renderIcon:s,filterText:o,onItemMouseLeave:c,onItemMouseEnter:u,onItemSelect:g,selectedItem:b}=e,S=e.enableListScroll?Ad.scroller:void 0;return r.length===0?J("div",{class:Ad.noMatchesMessage,key:"no-matches"},e.messages.noMatches):J("div",{class:S,key:"item-container"},r.map(E=>AOe(E)?OOe({group:E,filterText:o,headingLevel:t,identify:i,onItemMouseLeave:c,onItemMouseEnter:u,onItemSelect:g,renderIcon:s,selectedItem:b}):aee({item:E,identify:i,grouped:!0,onItemMouseLeave:c,onItemMouseEnter:u,onItemSelect:g,renderIcon:s,filterText:o,selectedItem:b})))}function kOe(e){const{messages:t,filterText:i,enableListScroll:r}=e;return J("div",{key:"filter",class:r?void 0:Ad.filterContainerSticky},J("calcite-input",{onCalciteInputInput:s=>{const o=s.currentTarget;e.onFilterChange&&e.onFilterChange(o.value)},placeholder:t.filterPlaceholder,value:i,type:"search"}))}function aee({grouped:e,identify:t,item:i,onItemMouseEnter:r,onItemMouseLeave:s,onItemSelect:o,renderIcon:c,selectedItem:u}){var S;const g=Uz(i,t),b=g===Uz(u,t);return J("calcite-list-item",{"aria-level":e?"2":"",class:V7(Ad.item,b?Ad.itemSelected:""),"data-item":i,key:g,label:(S=i.label)!=null?S:void 0,selected:b,tabIndex:0,onCalciteListItemSelect:E=>o==null?void 0:o($2(E)),onmouseenter:E=>r==null?void 0:r($2(E)),onkeydown:E=>Nf(E.key)&&(o==null?void 0:o($2(E))),onmouseleave:E=>s==null?void 0:s($2(E))},J("div",{class:Ad.itemIcon,slot:"content-start"},c==null?void 0:c({item:i})))}function Uz(e,t){return e?`${(t==null?void 0:t(e))||e.id}__${e.label}`:""}function $2(e){return e.currentTarget["data-item"]}function OOe(e){var s;const{group:t,headingLevel:i=nee,...r}=e;return J("div",{class:Ad.group,key:(s=t.label)!=null?s:void 0},J(sl,{level:i,class:Ad.groupHeader},t.label),t.items.map(o=>aee({...r,item:o,grouped:!0})))}const qz="esri-feature-templates",S4={base:qz,loader:`${qz}__loader`,widget:"esri-widget"};function POe(e){return"items"in e}function FOe(e){return e.length>0&&POe(e[0])}function LOe(e){return e.id}const Bz={filter:!0};let _n=class extends ar(ki){constructor(e,t){super(e,t),this._iconIntersectionObserver=new IntersectionObserver((i,r)=>{i.forEach(async s=>{if(s.isIntersecting){const o=s.target;if(o["data-has-icon"])return void r.unobserve(o);const c=o["data-item"],{layer:u,template:g}=c;o["data-has-icon"]=!0;const b=await H$.fetchThumbnail(u,g).catch(()=>(o["data-has-icon"]=!1,null));if(ae(b))return;o.appendChild(b)}})}),this.enableListScroll=!0,this.filterText="",this.headingLevel=4,this.messages=null,this.viewModel=new W$,this.visibleElements={...Bz},this.renderItemIcon=this.renderItemIcon.bind(this),this._afterItemCreateOrUpdate=this._afterItemCreateOrUpdate.bind(this),this._afterItemRemoved=this._afterItemRemoved.bind(this)}initialize(){const e=({label:t})=>!this.filterText||!!(t!=null&&t.toLowerCase().includes(this.filterText.toLowerCase()));this.addHandles(ge(()=>this.viewModel,(t,i)=>{t&&!t.filterFunction&&(this.filterFunction=e),i&&i!==t&&i.filterFunction===e&&(i.filterFunction=null)},rt))}destroy(){var e;(e=this._iconIntersectionObserver)==null||e.disconnect(),this._iconIntersectionObserver=null}loadDependencies(){return Promise.all([pe(()=>import("./calcite-input.3dc5a20f.js"),["assets/calcite-input.3dc5a20f.js","assets/input.6359813e.js","assets/form.af49867d.js","assets/interactive.5c805e74.js","assets/key.e212d876.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/observers.6e054a3b.js","assets/icon.48bdede2.js","assets/progress.60118725.js"]),pe(()=>import("./calcite-list-item.38b02e4c.js"),["assets/calcite-list-item.38b02e4c.js","assets/interactive.5c805e74.js","assets/utils3.7dad9d25.js","assets/loadable.bbce2443.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"])])}get filterFunction(){return this.viewModel.filterFunction}set filterFunction(e){this.viewModel.filterFunction=e}get groupBy(){return this.viewModel.groupBy}set groupBy(e){this.viewModel.groupBy=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}get selectedItem(){return this.viewModel.selectedItem}castVisibleElements(e){return{...Bz,...e}}select(e,t){return this.viewModel.select(e,t)}render(){const{enableListScroll:e,filterText:t,headingLevel:i,messages:r,viewModel:{items:s,numberOfFeatureTemplates:o,selectedItem:c,state:u}}=this,g=this.visibleElements.filter&&o>1;if(FOe(s)){const b=s.find(S=>S.label===W$.nullGroupBy.label);b&&(b.label=r.other)}return J("div",{class:this.classes(S4.base,S4.widget),"aria-label":r.widgetLabel},u==="loading"?this.renderLoader():u==="ready"?J(oee,{id:this.id,identify:LOe,filterText:t,items:s,headingLevel:i,selectionMode:"single",messages:{filterPlaceholder:r.filterPlaceholder,noItems:r.noItems,noMatches:r.noMatches},filterEnabled:g,onItemSelect:b=>this.viewModel.select(b),onFilterChange:b=>{this.filterText=b,this.viewModel.refresh()},renderIcon:this.renderItemIcon,selectedItem:c!=null?c:void 0,enableListScroll:e}):null)}renderItemIcon({item:e}){return J("span",{key:"icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":e,"data-has-icon":!1})}renderLoader(){return J("div",{class:S4.loader,key:"loader"})}_afterItemCreateOrUpdate(e){var t;(t=this._iconIntersectionObserver)==null||t.observe(e)}_afterItemRemoved(e){var t;(t=this._iconIntersectionObserver)==null||t.unobserve(e)}};v([_()],_n.prototype,"enableListScroll",void 0),v([_()],_n.prototype,"filterFunction",null),v([_()],_n.prototype,"filterText",void 0),v([_()],_n.prototype,"groupBy",null),v([_()],_n.prototype,"headingLevel",void 0),v([_()],_n.prototype,"label",null),v([_()],_n.prototype,"layers",null),v([_(),ui("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],_n.prototype,"messages",void 0),v([_({readOnly:!0})],_n.prototype,"selectedItem",null),v([_(),G5("select")],_n.prototype,"viewModel",void 0),v([_()],_n.prototype,"visibleElements",void 0),v([_t("visibleElements")],_n.prototype,"castVisibleElements",null),_n=v([K("esri.widgets.FeatureTemplates")],_n);const ROe=_n;function My(e,t,i){_w(e,"`"+t+"` is deprecated, because it instantiates the deprecated class 'esri.widgets.Editor.CreateWorkflow'",{replacement:i,version:"4.23",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Editor-CreateFeaturesWorkflow.html"})}function lee(e,t){switch(e){case"point":case"multipoint":return"point";case"polyline":return(U(t)&&t.type==="polyline"&&t.paths.length?t.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex";case"polygon":{const i=U(t)&&t.type==="polygon"&&t.rings.length?t.rings[0].length:0;return i<3?"polylineZeroVertices":i<4?"polygonOneVertex":"polygonTwoVertices"}default:return}}let rf=class extends Re{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};v([_({constructOnly:!0})],rf.prototype,"layer",void 0),v([_()],rf.prototype,"enabled",void 0),v([_()],rf.prototype,"updating",void 0),v([_()],rf.prototype,"availability",void 0),rf=v([K("esri.views.interactive.snapping.FeatureSnappingLayerSource")],rf);const J8=rf;let kv=class extends Re{constructor(e){super(e),this.creationInfo=null,this.viewModel=null}};v([_()],kv.prototype,"creationInfo",void 0),v([_()],kv.prototype,"viewModel",void 0),kv=v([K("esri.widgets.Editor.CreateFeaturesWorkflowData")],kv);let Js=class extends ar(ss.EventedAccessor){constructor(e){super(e),this._indexHistory=[],this._lastStepIndex=-1,this._stepIndex=-1,this._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"},this.data=void 0,this.started=!1,this.steps=[],this.type=null}get hasNextStep(){const{steps:e}=this;return!!(e&&this._stepIndex<e.filter(t=>!t.parent).length-1)}get hasPreviousStep(){return this._stepIndex>0}get reliesOnOwnerAdminPrivileges(){return!1}get shouldShowAttachments(){return!1}get shouldAllowAttachmentEditing(){return!1}get stepId(){const{steps:e}=this,t=e&&e[this._stepIndex];return t&&t.id}get helpMessage(){}async cancel(e={force:!0}){return e.force!==!1?this._cancel():new Promise((t,i)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel().then(t)},deny:()=>i(new de("workflow:cancel-denied","Request to cancel workflow was denied."))}})})}async commit(){this.handles.remove(this._handleKeys.beforeCommit),await this.onCommit(this.data),this.handles.remove(this._handleKeys.afterCommit),this.emit("commit"),this.started&&await this.reset()}async go(e){const{steps:t}=this,i=t.findIndex(r=>r.id===e);this._indexHistory.push(this._stepIndex),await this._go(i)}async next(){this._indexHistory.push(this._stepIndex),await this._go(this._stepIndex+1)}async previous(e={cancelCurrentStep:!1}){await this._go(this._indexHistory.pop(),e.cancelCurrentStep)}async reset(){await this._cancel(!1),await this.start()}async start(){this._set("started",!0);const e=this._stepIndex===-1?0:this._stepIndex;await this._go(e)}async _cancel(e=!0){this.started&&(this._set("started",!1),await this.steps[this._stepIndex].tearDown({cancelled:!0}),this.data&&this.data.viewModel.sketchViewModel.layer.removeAll()),this.handles.remove([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]),this._resetIndexing(e),e&&this.emit("cancel")}async _go(e=-1,t=!1){if(!(e<=-1||e>=this.steps.length)){if(!this.started)return this._stepIndex=e,void this._notifyStepProps();this._lastStepIndex>-1&&await this.steps[this._lastStepIndex].tearDown({cancelled:t}),await this.steps[e].setUp(),this._lastStepIndex=e,this._stepIndex=e,this._notifyStepProps()}}_resetIndexing(e=!0){this._stepIndex=-1,this._lastStepIndex=-1,this._indexHistory.length=0,e&&this._notifyStepProps()}_notifyStepProps(){this.notifyChange("stepId"),this.notifyChange("hasPreviousStep"),this.notifyChange("hasNextStep")}};v([_()],Js.prototype,"data",void 0),v([_()],Js.prototype,"hasNextStep",null),v([_()],Js.prototype,"hasPreviousStep",null),v([_()],Js.prototype,"onCommit",void 0),v([_()],Js.prototype,"reliesOnOwnerAdminPrivileges",null),v([_()],Js.prototype,"shouldShowAttachments",null),v([_()],Js.prototype,"shouldAllowAttachmentEditing",null),v([_()],Js.prototype,"started",void 0),v([_({readOnly:!0})],Js.prototype,"stepId",null),v([_()],Js.prototype,"steps",void 0),v([_({readOnly:!0})],Js.prototype,"type",void 0),v([_()],Js.prototype,"helpMessage",null),v([_()],Js.prototype,"commit",null),Js=v([K("esri.widgets.Editor.Workflow")],Js);const Y8=Js;function I4(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function NOe(e){let t=0,i=0;for(let r=0;r<e.length;r++){const s=e[r].size;typeof s=="number"&&(t+=s,i++)}return t/i}function Hz(e,t){return typeof e=="number"?e:e&&e.stops&&e.stops.length?NOe(e.stops):t}function DOe(e,t){if(!t)return e;const i=t.filter(c=>c.type==="size").map(c=>{const{maxSize:u,minSize:g}=c;return(Hz(u,e)+Hz(g,e))/2});let r=0;const s=i.length;if(s===0)return e;for(let c=0;c<s;c++)r+=i[c];const o=Math.floor(r/s);return Math.max(o,e)}function uee(e){var s;const t=e&&e.renderer,i=(e&&e.event&&e.event.pointerType)==="touch"?9:6;if(!t)return i;const r="visualVariables"in t?DOe(i,t.visualVariables):i;if(t.type==="simple")return I4(r,t.symbol);if(t.type==="unique-value"){let o=r;return(s=t.uniqueValueInfos)==null||s.forEach(c=>{o=I4(o,c.symbol)}),o}if(t.type==="class-breaks"){let o=r;return t.classBreakInfos.forEach(c=>{o=I4(o,c.symbol)}),o}return t.type==="dot-density"||t.type,r}let sf=class extends ss.EventedAccessor{constructor(e){super(e),this.tracking=!1,this.displaying=!1,this.isDraped=!1}};v([_({constructOnly:!0})],sf.prototype,"graphic",void 0),v([_()],sf.prototype,"tracking",void 0),v([_()],sf.prototype,"displaying",void 0),v([_()],sf.prototype,"isDraped",void 0),sf=v([K("esri.views.3d.layers.graphics.GraphicState")],sf);function cee(e,t,i,r=new vi){var S;let s=0;if(i.type==="2d")s=t*((S=i.resolution)!=null?S:0);else if(i.type==="3d"){const E=i.overlayPixelSizeInMapUnits(e),A=i.basemapSpatialReference;s=U(A)&&!A.equals(i.spatialReference)?Od(A)/Od(i.spatialReference):t*E}const o=e.x-s,c=e.y-s,u=e.x+s,g=e.y+s,{spatialReference:b}=i;return r.xmin=Math.min(o,u),r.ymin=Math.min(c,g),r.xmax=Math.max(o,u),r.ymax=Math.max(c,g),r.spatialReference=b,r}function nVe(e,t,i){const r=i.toMap(e);return ae(r)?!1:cee(r,uee(),i,jOe).intersects(t)}const jOe=new vi;async function zOe(e,t){var c;if(e.type==="2d")return e.hitTest(t);const i=await e.hitTest(t);if(i.results.length===0)return i;const r=i.results[0],s=((c=r.distance)!=null?c:0)*(1+VOe),o=i.results.findIndex(u=>{var g;return((g=u.distance)!=null?g:0)>s});return o!==-1&&(i.results=i.results.slice(0,o)),i}const VOe=.05;function hee(e){return U(e)&&e.type==="graphic"}function GOe(e){var t;return(t=e.find(hee))!=null?t:null}function dee(e){return e.filter(hee)}function F9(e){const t=e.sourceLayer;if(!t||t.type!=="feature"||!WOe(t.renderer))return{rotation:null,size:null};let i=null,r=null;const s=t.renderer.getVisualVariablesForType("rotation").filter(c=>(!c.axis||c.axis==="heading")&&c.field&&!c.valueExpression&&U(wk(c,e)));s.length===1&&(i=UOe(s[0],t));const o=t.renderer.getVisualVariablesForType("size").filter(c=>c.field&&!c.useSymbolValue&&!c.valueExpression&&oJ(c)===Rr.RealWorldSize&&U(Hw(c,e)));return o.length===1&&(r=HOe(o[0],t)),{rotation:i,size:r}}function UOe(e,t){var u;const i=(e.axis||"heading")==="heading"&&e.rotationType==="arithmetic"?-1:1,r=e.field,s=t.fields&&t.fields.filter(g=>g.name===r),o=s&&s.length===1?s[0].type:"double",c={initial:0,current:0};return{field:r,fieldType:o,getDefault:()=>Promise.resolve(0),getValue:g=>(c.current=c.initial-i*g,J$((c.current+360)%360,o)),initValue:g=>{c.initial=g!=null?g:c.current,c.current=0},isUpdatingInteractively:!1,rotationType:(u=e.rotationType)!=null?u:"geographic"}}function qOe(e,t){switch(t){case"width":return e[0];case"depth":return e[1];case"height":return e[2];default:return e[2]||e[1]||e[0]}}async function BOe(e,t,i){if(ae(t))return 0;const{symbol:r}=dJ(t);if(ae(r)||r.type==="web-style"||r.type==="cim")return 0;const s=r.symbolLayers.getItemAt(0);if(!s)return 0;switch(s.type){case"icon":{const{computeIconLayerResourceSize:o}=await pe(()=>import("./symbolLayerUtils.88ffaa5f.js"),[]);return s.size||Math.min(lh.icon,(await o(s,lh.icon))[0])||lh.icon}case"text":return s.size||lh.text;case"line":return s.size||lh.line;case"object":{const{computeObjectLayerResourceSize:o}=await pe(()=>import("./symbolLayerUtils.88ffaa5f.js"),[]);return qOe(await o(s,e.scale/lh.viewScaleSizeFactor),i)}case"path":return(s.width!=null?s.width:s.height)||e.scale/lh.viewScaleSizeFactor;case"extrude":return s.size||e.scale/lh.viewScaleSizeFactor;default:return 0}}function HOe(e,t){var b;const i=e.field,r=e.axis,s=t.fields&&t.fields.filter(S=>S.name===i),o=s&&s.length===1?s[0].type:"double",c={updating:!1,initial:0,current:0},u=(b=Bw[e.valueUnit])!=null?b:1;let g;return g=e.valueRepresentation==="area"?S=>(S*u/2)**2*Math.PI:e.valueRepresentation==="radius"||e.valueRepresentation==="distance"?S=>S*u/2:S=>S*u,{field:i,fieldType:o,getDefault:async(S,E)=>J$(g(await BOe(E,S,r)),o),getValue:(S,E)=>(c.initial||(c.initial=E.pixelSizeAt(E.center)),c.current=c.initial*S,J$(c.current,o)),initValue:S=>{c.initial=S!=null?S:c.current,c.current=0},isUpdatingInteractively:!1,displayUnit:nPe(e.valueUnit),axis:e.axis}}function J$(e,t){switch(t){case"small-integer":case"integer":case"long":return Math.round(e);case"double":case"single":return e;default:return 0}}function WOe(e){switch(e==null?void 0:e.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":case"pie-chart":return!0;default:return!1}}async function b0(e,t){const i=await vS(e,{useSourceLayer:!0,ignoreGraphicSymbol:!0,webStyleCache:t}),r=AJ(e.symbol,i);U(r)&&(e.symbol=i)}function JOe(e){if(!e)throw new Error("no geometry type");if(e==="mesh"||e==="multipatch")throw new Error("Mesh and Multipatch not supported");return e}async function YOe(e,t,i,r){await Y$(e,t,r);const s=e.on("create",async o=>{if(o.state==="cancel")return Y$(e,t,r);if(o.state==="complete"){const c=o.graphic;c.sourceLayer||(c.sourceLayer=t.layer),c.attributes||(c.attributes={...t.template.prototype.attributes}),await b0(c,r),i(c)}});return{remove:()=>{s.remove(),e.cancel()}}}async function Y$(e,t,i){const r=t.layer,s={...t.template.prototype.attributes};await KOe(e,r,s,i);const o={graphicProperties:{attributes:s,sourceLayer:r},hasZ:r.capabilities.data.supportsZ};return e.layer.elevationInfo=r.elevationInfo,e.create(JOe(r.geometryType),o)}async function KOe(e,t,i,r){const s=new wr({sourceLayer:t,attributes:i}),{rotation:o,size:c}=F9(s);let u=await vS(s,{useSourceLayer:!0,webStyleCache:r}),g=!1;for(const b of[c,o])ae(b)||i[b.field]==null&&(i[b.field]=await b.getDefault(u,e.view),g=!0);switch(g&&(u=await vS(s,{useSourceLayer:!0,webStyleCache:r})),u==null?void 0:u.type){case"simple-fill":case"polygon-3d":e.polygonSymbol=u;break;case"simple-line":case"line-3d":e.polylineSymbol=u;break;case"simple-marker":case"picture-marker":case"point-3d":case"cim":e.pointSymbol=u}pee(e.tooltipOptions,c,o)}function pee(e,t,i){var r;U(t)||U(i)?e.visualVariables={size:U(t)?{unit:t.displayUnit,axis:t.axis,valueType:t.fieldType}:null,rotation:U(i)?{valueType:i.fieldType,rotationType:(r=i.rotationType)!=null?r:"geographic"}:null}:e.visualVariables=null}function K8(e,t){return e?e.find(i=>i.layer===t):void 0}async function ZOe(e,t,i,r){if(e.length===0)return[];const{updatable:s,graphicsByLayer:o}=await i.async(async()=>{const{results:c}=await i0(zOe(t,i),r),u=new Map,g=S=>{const E=S.layer,A=u.get(E);if(!A){const O=new Array;return u.set(E,O),O}return A};dee(c).forEach(({graphic:S})=>g(S).push(S));const b=e.filter(({supports:S,layer:E})=>S.includes("update")&&u.has(E));return b.length!==0&&i.stopPropagation(),{updatable:b,graphicsByLayer:u}});return i0(Ms(s.map(async({layer:c})=>{const{objectIdField:u}=c,g="displayField"in c?c.displayField:null,b=[u];g!=null&&c.fieldsIndex.has(g)&&b.push(g);const S=o.get(c);if(S.some(E=>b.some(A=>!(A in E.attributes)))){const E=c.createQuery();return E.outFields=b,E.returnGeometry=!1,E.objectIds=S.map(A=>A.getObjectId()),c.queryFeatures(E,{signal:r}).then(({features:A})=>A)}return S})),r)}async function XOe(e,t,i,r){if(e.length===0)return[];let s=null;const o=await i.async(async()=>{const{results:c}=await i0(t.hitTest(i),r);if(c.length===0)return[];const u=new Set;s=dee(c),s.forEach(({graphic:b})=>b&&u.add(b.layer));const g=e.items.filter(({layer:b,supports:S,attachmentsOnUpdateEnabled:E})=>u.has(b)&&(S.includes("update")||S.includes("delete")||E));return g.length>0&&i.stopPropagation(),g});return i0(Ms(o.map(({layer:c})=>{const u=c.objectIdField,g="displayField"in c?c.displayField:null,b=[u];g!=null&&c.fieldsIndex.has(g)&&b.push(g);const S=c.createQuery();S.outFields=b,S.returnGeometry=!1;const E="renderer"in c?uee({renderer:c.renderer,event:i}):0;return S.geometry=cee(i.mapPoint,E,t),S.outSpatialReference=t.spatialReference,c.queryFeatures(S,{signal:r}).then(({features:A})=>(s==null||s.forEach(({graphic:O})=>{O.layer!==c||A.some(L=>L.getObjectId()===O.getObjectId())||A.push(O)}),A))})),r)}async function QOe(e,t,i,r){switch(t.type){case"3d":return ZOe(e,t,i,r);case"2d":return XOe(e,t,i,r)}}async function ePe(e,t,i){const{sourceLayer:r}=e,s=r.createQuery();return s.objectIds=[e.getAttribute(r.objectIdField)],s.outFields=["*"],s.outSpatialReference=t.spatialReference,s.returnM=r.capabilities.data.supportsM,s.returnZ=r.capabilities.data.supportsZ,(await r.queryFeatures(s,{signal:i})).features[0]}async function dw(e,t,i,r,s){let o=!1;const{rotation:c,size:u}=r;[c,u].forEach(async b=>{if(ae(b))return;const S=t.attributes[b.field];if(U(S))b.initValue(S);else{const E=await b.getDefault(t.symbol,e.view);b.initValue(E),t.setAttribute(b.field,E),o=!0}}),o&&await b0(t,s);const g={multipleSelectionEnabled:!1};return i.geometryType==="point"&&(g.enableRotation=U(c),g.enableScaling=U(u)),pee(e.tooltipOptions,u,c),e.layer.elevationInfo=i.elevationInfo,e.update(t,g)}function tPe(e){return!U(e)||e.type!=="rotate-start"&&e.type!=="rotate"&&e.type!=="rotate-stop"?null:e}function iPe(e){return!U(e)||e.type!=="scale-start"&&e.type!=="scale"&&e.type!=="scale-stop"?null:e}async function Z8(e,t,i,r,s){var b;if(!U(t.geometry)||((b=t.geometry)==null?void 0:b.type)!=="point")return;const o=r.rotation,c=tPe(i.toolEventInfo);if(U(o)&&U(c))if(c.type==="rotate-stop")o.isUpdatingInteractively=!1,o.initValue();else{o.isUpdatingInteractively=!0;const{field:S,getValue:E}=o;t.attributes[S]=E(c.angle,e)}const u=r.size,g=iPe(i.toolEventInfo);if(U(u)&&U(g))if(g.type==="scale-stop")u.isUpdatingInteractively=!1,u.initValue();else{u.isUpdatingInteractively=!0;const{field:S,getValue:E}=u;t.attributes[S]=E(g.xScale,e)}await b0(t,s)}async function rPe(e,t,i,r,s,o){const c=e.clone();await b0(c,o),r.map.add(i.layer),i.layer.add(c);const u=e.sourceLayer,g=WS(r,u),b=()=>{const ee=e.layer,ie=e.attributes[ee.objectIdField];return g.then(ne=>{var oe;return(oe=ne.setVisibility)==null?void 0:oe.call(ne,ie,!1)},()=>{}),{remove(){g.then(ne=>{var oe;return(oe=ne.setVisibility)==null?void 0:oe.call(ne,ie,!0)},()=>{})}}};let S=null,E=null;if(r.type==="3d"){const ee=new sf({graphic:c});S=lg([r.trackGraphicState(ee),ge(()=>ee.displaying,ie=>{E=ie?b():Ti(E)},rt)])}else E=b();await dw(i,c,u,t,o);let A=null;g.then(ee=>A=ee,()=>{});const O=t.size,L=t.rotation,N=ge(()=>e.attributes,async ee=>{let ie=!1;for(const ne in ee){const oe=ee[ne];oe!==c.attributes[ne]&&(c.setAttribute(ne,oe),U(O)&&!O.isUpdatingInteractively&&O.field===ne&&O.initValue(oe),U(L)&&!L.isUpdatingInteractively&&L.field===ne&&L.initValue(oe),(ae(A)||A.requiredFields.includes(ne))&&(ie=!0))}ie&&await b0(c,o)}),z=i.on("update",async ee=>{const ie=ee.graphics[0];if(ee.state==="complete")return dw(i,ie,u,t,o);await Z8(r,ie,ee,t,o),s(ie.clone(),ee)}),q=i.on(["undo","redo"],async ee=>{s(ee.graphics[0].clone(),ee)}),Z=()=>{};return{interactive:{remove(){q.remove(),z.remove(),i.cancel(),N&&N.remove(),this.remove=Z}},visual:{remove(){Ti(E),WS(r,u).then(ee=>In(()=>!ee.updating)).then(()=>{Ti(S),i.layer.remove(c),this.remove=Z})}}}}const lh={icon:$o(24),text:$o(12),line:$o(1),viewScaleSizeFactor:100};function X8(e,t,i){let r=!1;return e.filter(s=>!!r||(r=s===t,r)).map(s=>i[s]())}function sPe(e){if(e.length!==1)return null;const t=e[0];if("items"in t){const i=t;return i.items.length===1?i.items[0]:null}return t}function fee(e,t){if(e.viewModel.refreshCreationTemplates(),t[0].id==="awaiting-feature-creation-info"){const i=sPe(e.viewModel.featureTemplatesViewModel.items);U(i)&&(e.creationInfo=i,t.shift())}return t}function nPe(e){switch(e){case"unknown":case"decimal-degrees":return null;default:return e}}function mee(e){e.set({abilities:{editing:!0,operations:{add:!0,update:!0,delete:!0}},filesEnabled:!0,mode:"view"})}function yee(e){var c,u;const{creationInfo:{layer:t},viewModel:i}=e,r=i.editableItems.find(g=>g.layer===t);if(r)return r.attachmentsOnCreateEnabled;const s=(c=t.capabilities)==null?void 0:c.data,o=(u=i.layerInfos)==null?void 0:u.find(g=>g.layer===t);return!(!(s&&"supportsAttachment"in s&&s.supportsAttachment)||o&&(o.allowAttachments===!1||o.attachmentsOnUpdateEnabled===!1))}const gee=e=>/-stop/.test(e)||/vertex-/.test(e),WS=(e,t)=>{const i=t.type==="subtype-sublayer"?t.parent:t;return e.whenLayerView(i)};var K$;const E4=Symbol();let nf=K$=class extends Y8{constructor(e){super(e),this.type="create-features",this.createFeatureState="create-new",this._featureFormHandle=null,this._visualVariableAttributes={rotation:null,size:null},this._attachmentFileInfos=new Map,this._highlightHandles=new Map,this._preventDefaultActionOnCancel=!1,this._lastActiveGraphics=[]}get numPendingFeatures(){return this.data.viewModel.sketchViewModel.layer.graphics.length}get pendingFeatures(){return this.data.viewModel.sketchViewModel.layer.graphics}get reliesOnOwnerAdminPrivileges(){var r,s;const{layer:e}=this.data.creationInfo,t=(r=e.capabilities)==null?void 0:r.operations.supportsAdd,i=(s=Tn(e))==null?void 0:s.operations.supportsAdd;return y5(e)&&!e.editingEnabled||!!i&&!t}get shouldShowAttachments(){return!!(this.data&&this.data.creationInfo&&this.data.viewModel)&&yee(this.data)}get shouldAllowAttachmentEditing(){return this.shouldShowAttachments}get helpMessage(){var i;if(this.stepId!=="creating-features")return;const{creationInfo:e,viewModel:t}=this.data;return lee(e.layer.geometryType,(i=t.sketchViewModel.createGraphic)==null?void 0:i.geometry)}async updatePendingFeature(e,t){return this._preventDefaultActionOnCancel=!0,this.data.viewModel.sketchViewModel.cancel(),ny(this._lastActiveGraphics,e),this._startUpdating(e,t)}static create(e,t,i,r,s){const o=new K$({data:new kv({creationInfo:t,viewModel:e}),onCommit:async c=>{const u=c.viewModel.sketchViewModel.layer.graphics.toArray(),g=c.creationInfo.layer,b=g.capabilities.editing.supportsGlobalId&&"globalIdField"in g,S=o._attachmentFileInfos;if(S.size===0)return void await r(g,{addFeatures:u});if(b){const O=o._getAttachmentEditsWithGlobalIds(u,g,S),L="addAttachments"in O?{globalIdUsed:!0}:void 0;return void await r(g,O,L)}const{addFeatureResults:E}=await r(g,{addFeatures:u}),A=o._getAddAttachmentsData(u,E,g,S);await s(g,A)}});return o._set("steps",this._createWorkflowSteps(o,i)),o}_fadeExistingFeatures(e){if("effect"in e){const i=e.effect;return e.effect="saturate(0.6) opacity(0.8)",Mo(()=>e.effect=i)}const t=e.opacity;return e.opacity=.7,Mo(()=>e.opacity=t)}_highlight(e){const t=this.data.viewModel.view;(t==null?void 0:t.type)==="3d"&&this._highlightHandles.set(e,t.highlight(e))}_removeHighlight(e){Ti(this._highlightHandles.get(e)),this._highlightHandles.delete(e)}async _startCreating(e){return this.createFeatureState="create-new",Y$(this.data.viewModel.sketchViewModel,this.data.creationInfo,e)}async _startUpdating(e,t){var b;const{featureFormViewModel:i,layerInfos:r,sketchViewModel:s,view:o}=this.data.viewModel;if(!o)return;const c=this.data.creationInfo.layer,u=(b=K8(r,c))==null?void 0:b.formTemplate,g=o.spatialReference;return i.set({arcadeEditType:"INSERT",feature:e,formTemplate:u,spatialReference:g,view:o}),Ti(this._featureFormHandle),this._featureFormHandle=lg([i.on("value-change",async()=>{e.attributes=i.getValues(),await b0(e,t)}),s.on(["update","undo","redo"],S=>{(S.type==="undo"||S.type==="redo"||S.type==="update"&&U(S.toolEventInfo)&&gee(S.toolEventInfo.type))&&i.notifyFeatureGeometryChanged()})]),this._removeHighlight(e),this.createFeatureState="update-pending",this._visualVariableAttributes=F9(e),dw(s,e,c,this._visualVariableAttributes,t)}static _createWorkflowSteps(e,t="awaiting-feature-creation-info"){const{data:i,handles:r}=e;let s=null,o=!0;const c=new Map,u=X8(["awaiting-feature-creation-info","creating-features","adding-attachment","editing-attachment"],t,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){i.creationInfo=null,r.add(i.viewModel.featureTemplatesViewModel.on("select",({item:g})=>{var b;g&&(i.creationInfo=g,(b=i.viewModel.activeWorkflow)==null||b.next())}),this.id)},async tearDown(){r.remove(this.id)}}),"creating-features":()=>({id:"creating-features",async setUp(){if(r.has(this.id))return;const g=i.viewModel.view;if(!g)return;const b=i.viewModel.sketchViewModel;o=b.updateOnGraphicClick,b.updateOnGraphicClick=!1,e._lastActiveGraphics=[],e._featureFormHandle=Ti(e._featureFormHandle),e._visualVariableAttributes={rotation:null,size:null},mee(i.viewModel.attachmentsViewModel);const S=g.type==="2d"?e._fadeExistingFeatures(i.creationInfo.layer):null,E=b.on("create",async ee=>{if(ee.state==="cancel"){if(e._preventDefaultActionOnCancel)return void(e._preventDefaultActionOnCancel=!1);if(e._lastActiveGraphics.length<1)return e._startCreating(c);const ie=e._lastActiveGraphics.pop();return e._startUpdating(ie,c)}if(ee.state==="complete"&&ee.graphic)return e._startUpdating(ee.graphic,c)}),A=b.on("update",async ee=>{var oe,me;const ie=ee.graphics[0];if(ee.state==="complete"){if(ie!==s&&(e._lastActiveGraphics.push(ie),e._highlight(ie)),s=null,i.viewModel.attachmentsViewModel.mode!=="add"&&i.viewModel.attachmentsViewModel.mode!=="edit"||((oe=i.viewModel.activeWorkflow)==null||oe.previous()),ee.aborted&&e._preventDefaultActionOnCancel)return void(e._preventDefaultActionOnCancel=!1);const fe=g.cursor;return g.cursor="progress",r.add([Mo(()=>g.cursor=fe),g.on("click",Ce=>Ce.preventDefault())],E4),In(()=>!i.viewModel.featureFormViewModel.updating).then(()=>{r.remove(E4),e._startCreating(c)})}if(ee.state==="start"){e._removeHighlight(ie);const fe=i.viewModel.attachmentsViewModel;fe.mode!=="add"&&fe.mode!=="edit"||((me=i.viewModel.activeWorkflow)==null||me.previous()),fe.fileInfos.removeAll(),fe.graphic=ie,fe.mode="view",(e._attachmentFileInfos.get(ie)||[]).forEach(({file:Ce,form:_e})=>fe.addFile(Ce,_e))}await Z8(g,ie,ee,e._visualVariableAttributes,c);const ne=ie.attributes;if(U(e._visualVariableAttributes.rotation)){const{field:fe}=e._visualVariableAttributes.rotation;i.viewModel.featureFormViewModel.setValue(fe,ne[fe])}if(U(e._visualVariableAttributes.size)){const{field:fe}=e._visualVariableAttributes.size;i.viewModel.featureFormViewModel.setValue(fe,ne[fe])}}),O=b.on("delete",async ee=>{const ie=ee.graphics[0];ny(e._lastActiveGraphics,ie),s=ie});let L=null;const N=ge(()=>{var ie;const ee=b.snappingOptions.featureSources.find(ne=>ne.layer===i.creationInfo.layer);return{hasFeatureLayerSource:!!ee,enabled:(ie=ee==null?void 0:ee.enabled)!=null?ie:!1}},({hasFeatureLayerSource:ee,enabled:ie})=>{const ne=b.snappingOptions.featureSources;ee?(ae(L)&&(L=new J8({layer:b.layer,enabled:ie}),ne.add(L)),L.enabled=ie):(U(L)&&ne.remove(L),L=ti(L))},Mn),z=g.on("immediate-click",async ee=>{const{results:ie}=await g.hitTest(ee,{include:b.layer}),ne=ie.find(oe=>oe.type==="graphic");if(ne){const oe=ne.graphic;if(b.activeTool==="transform"||b.activeTool==="reshape"){if(b.updateGraphics.getItemAt(0)===oe)return;await e.updatePendingFeature(oe,c)}}}),q=ge(()=>i.viewModel.attachmentsViewModel.mode,ee=>{ee==="add"&&i.viewModel.activeWorkflow.go("adding-attachment"),ee==="edit"&&i.viewModel.activeWorkflow.go("editing-attachment")});await e._startCreating(c);const Z={remove:()=>{Ti(e._featureFormHandle),E.remove(),A.remove(),O.remove(),N.remove(),U(L)&&b.snappingOptions.featureSources.remove(L),L=ti(L),b.cancel(),z.remove(),q.remove(),Ti(S)}};r.add(Z,this.id)},async tearDown(g){g.cancelled&&(i.viewModel.sketchViewModel.layer.removeAll(),r.remove([this.id,E4]),i.viewModel.attachmentsViewModel.fileInfos.removeAll(),e._attachmentFileInfos.clear(),i.viewModel.sketchViewModel.updateOnGraphicClick=o)}}),"adding-attachment":()=>({id:"adding-attachment",parent:"creating-features",async setUp(){},async tearDown(){const{graphic:g,fileInfos:b}=i.viewModel.attachmentsViewModel;e._attachmentFileInfos.set(g,b.toArray()),i.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"creating-features",async setUp(){},async tearDown(){const{graphic:g,fileInfos:b}=i.viewModel.attachmentsViewModel;e._attachmentFileInfos.set(g,b.toArray()),i.viewModel.attachmentsViewModel.mode="view"}})});return fee(i,u)}_getAddAttachmentsData(e,t,i,r){const s=[];return t.forEach((o,c)=>{if(!o.error){const u=e[c],g=r.get(u)||[];u.attributes[i.objectIdField]=o.objectId,g.forEach(({form:b})=>s.push({feature:u,attachment:b}))}}),s}_getAttachmentEditsWithGlobalIds(e,t,i){const r=[],s=t.globalIdField;return e.forEach((o,c)=>{const u=i.get(o)||[];let g=o.attributes[s];ae(g)&&(g=JT(),e[c].attributes[s]=g),u.forEach(({file:b})=>r.push({feature:o,attachment:{globalId:JT(),data:b}}))}),r.length?{addFeatures:e,addAttachments:r}:{addFeatures:e}}};v([_()],nf.prototype,"reliesOnOwnerAdminPrivileges",null),v([_()],nf.prototype,"shouldShowAttachments",null),v([_()],nf.prototype,"shouldAllowAttachmentEditing",null),v([_()],nf.prototype,"helpMessage",null),nf=K$=v([K("esri.widgets.Editor.CreateFeaturesWorkflow")],nf);const oPe=nf;let Gm=class extends Re{constructor(e){super(e),this.creationInfo=null,this.edits=null,this.viewModel=null}};v([_()],Gm.prototype,"creationInfo",void 0),v([_()],Gm.prototype,"edits",void 0),v([_()],Gm.prototype,"viewModel",void 0),Gm=v([K("esri.widgets.Editor.CreateWorkflowData")],Gm);const aPe=Gm;function k2(e){return ae(e)?null:JSON.stringify(e)}let nd=class extends ar(Re){constructor(e){super(e),this._baselineAttributesJSON=null,this._baselineGeometryJSON=null,this.feature=null}get attributesModified(){const{_baselineAttributesJSON:e,feature:t}=this;return!(!t||e===k2(t.attributes))}get geometryModified(){const{_baselineGeometryJSON:e,feature:t}=this;return!(!t||e===k2(t.geometry))}get modified(){return this.attributesModified||this.geometryModified}trackChanges(){this.feature&&(this._baselineAttributesJSON=k2(this.feature.attributes),this._baselineGeometryJSON=k2(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))}updateAttributes(e){const{feature:t}=this;t&&(t.attributes=e,this.notifyChange("attributesModified"))}updateGeometry(e){const{feature:t}=this;t&&(t.geometry=e,this.notifyChange("geometryModified"))}};v([_()],nd.prototype,"attributesModified",null),v([_()],nd.prototype,"feature",void 0),v([_()],nd.prototype,"geometryModified",null),v([_()],nd.prototype,"modified",null),nd=v([K("esri.widgets.Editor.Edits")],nd);var Z$;let of=Z$=class extends Y8{constructor(e){super(e),this.type="create"}get shouldShowAttachments(){return!!(this.data&&this.data.creationInfo&&this.data.viewModel)&&yee(this.data)}get shouldAllowAttachmentEditing(){return this.shouldShowAttachments}get helpMessage(){var i;if(this.stepId!=="editing-new-feature")return;const{creationInfo:e,viewModel:t}=this.data;return lee(e.layer.geometryType,(i=t.sketchViewModel.createGraphic)==null?void 0:i.geometry)}get reliesOnOwnerAdminPrivileges(){var r,s;const{layer:e}=this.data.creationInfo,t=(r=e.capabilities)==null?void 0:r.operations.supportsAdd,i=(s=Tn(e))==null?void 0:s.operations.supportsAdd;return y5(e)&&!e.editingEnabled||!!i&&!t}static create(e,t,i){const r=new Z$({data:new aPe({edits:new nd,viewModel:e}),onCommit:async s=>{await i(s.creationInfo.layer,{addFeatures:[s.edits.feature]})}});return r._set("steps",this._createWorkflowSteps(r,t)),r}static _createWorkflowSteps(e,t="awaiting-feature-creation-info"){const{data:i,handles:r}=e,s=new Map,o=X8(["awaiting-feature-creation-info","awaiting-feature-to-create","editing-new-feature","adding-attachment","editing-attachment"],t,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){i.creationInfo=null,i.edits.feature=null,i.viewModel.featureTemplatesViewModel.select(null),r.add(i.viewModel.featureTemplatesViewModel.on("select",({item:c})=>{var u;c&&(i.creationInfo=c,(u=i.viewModel.activeWorkflow)==null||u.next())}),this.id)},async tearDown(){r.remove(this.id)}}),"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",async setUp(){r.add(await YOe(i.viewModel.sketchViewModel,i.creationInfo,c=>{var u;i.edits.feature=c,(u=i.viewModel.activeWorkflow)==null||u.next()},s),this.id)},async tearDown(){r.remove(this.id)}}),"editing-new-feature":()=>({id:"editing-new-feature",async setUp(){var L;const c=i.edits.feature,u=c.sourceLayer,g=i.viewModel,b=g.sketchViewModel,S=(L=K8(g.layerInfos,u))==null?void 0:L.formTemplate,{spatialReference:E}=g.view;g.featureFormViewModel.set({arcadeEditType:"INSERT",feature:c,formTemplate:S,spatialReference:E}),b.allowDeleteKey=!1,mee(g.attachmentsViewModel);const A=F9(c);await dw(b,c,u,A,s);const O=b.on("update",async N=>{const z=N.graphics[0];if(N.state==="complete")return dw(b,z,u,A,s);await Z8(b.view,z,N,A,s);const q=z.attributes;if(U(A.rotation)){const{field:Z}=A.rotation;g.featureFormViewModel.setValue(Z,q[Z])}if(U(A.size)){const{field:Z}=A.size;g.featureFormViewModel.setValue(Z,q[Z])}});r.add([i.viewModel.featureFormViewModel.on("value-change",async()=>{i.edits.updateAttributes(i.viewModel.featureFormViewModel.getValues()),c.attributes=i.edits.feature.attributes,b.view.type==="3d"&&await b0(c,s)}),O,ge(()=>i.viewModel.attachmentsViewModel.mode,N=>{N==="add"&&i.viewModel.activeWorkflow.go("adding-attachment"),N==="edit"&&i.viewModel.activeWorkflow.go("editing-attachment")})],this.id)},async tearDown(c){c.cancelled&&i.viewModel.sketchViewModel.layer.removeAll(),r.remove(this.id)}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-new-feature",async setUp(){},async tearDown(){i.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-new-feature",async setUp(){},async tearDown(){i.viewModel.attachmentsViewModel.mode="view"}})});return fee(i,o)}};v([_()],of.prototype,"shouldShowAttachments",null),v([_()],of.prototype,"shouldAllowAttachmentEditing",null),v([_()],of.prototype,"helpMessage",null),v([_()],of.prototype,"reliesOnOwnerAdminPrivileges",null),of=Z$=v([K("esri.widgets.Editor.CreateWorkflow")],of);const lPe=of;let af=class extends Re{constructor(e){super(e),this.candidates=null,this.editableItem=null,this.edits=null,this.viewModel=null}};v([_()],af.prototype,"candidates",void 0),v([_()],af.prototype,"editableItem",void 0),v([_()],af.prototype,"edits",void 0),v([_()],af.prototype,"viewModel",void 0),af=v([K("esri.widgets.Editor.UpdateWorkflowData")],af);const uPe=af;var X$;const Wz="candidate-highlight";let lf=X$=class extends Y8{constructor(e){super(e),this.type="update"}get shouldShowAttachments(){var e;return!!((e=this.data)!=null&&e.editableItem.attachmentsOnUpdateEnabled)}get shouldAllowAttachmentEditing(){var e;return!!((e=this.data)!=null&&e.editableItem.supports.includes("update"))}get helpMessage(){return this.stepId==="awaiting-feature-to-update"?"select":void 0}get reliesOnOwnerAdminPrivileges(){var r,s;const{layer:e}=this.data.editableItem,t=(r=e.capabilities)==null?void 0:r.operations.supportsUpdate,i=(s=Tn(e))==null?void 0:s.operations.supportsUpdate;return y5(e)&&!e.editingEnabled||!!i&&!t}static create(e,t,i){const r=new X$({data:new uPe({edits:new nd,viewModel:e}),onCommit:async s=>{const o=s.edits.feature;if(!o)return;const c=o.sourceLayer,u=o.clone();if(!s.edits.attributesModified){const g=c.objectIdField;u.attributes={[g]:o.getAttribute(g)}}s.edits.geometryModified||(u.geometry=null),await i(c,{updateFeatures:[u]})}});return r._set("steps",this._createWorkflowSteps(r,t)),r}highlight(e){const t=this.data.viewModel.view;if(!t||!e)return;const i=e&&t.allLayerViews.items.find(({layer:r})=>r===e.layer||e.layer.type==="subtype-sublayer"&&e.layer.parent===r);wS(i)&&this.handles.add(i.highlight(e),Wz)}unhighlight(){this.handles.remove(Wz)}static _createWorkflowSteps(e,t="awaiting-feature-to-update"){const{data:i,handles:r}=e,s=new Map;return X8(["awaiting-feature-to-update","awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],t,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",async setUp(){const{spinnerViewModel:o}=i.viewModel,c=i.viewModel.view;let u=null;r.add({remove(){u&&(u.abort(),u=null)}},this.id),i.edits.feature=null;const g=c.on("immediate-click",b=>{o.location=b.mapPoint,o.visible=!0,u==null||u.abort();const{editableItems:S}=i.viewModel;u=new AbortController,new Promise((E,A)=>{To(u==null?void 0:u.signal,()=>A(Ri())),E(QOe(S,c,b,u==null?void 0:u.signal))}).then(E=>{if(or(u),i.candidates=E.reduce((O,L)=>L.error?O:[...O,...L.value],[]),i.viewModel.spinnerViewModel.visible=i.candidates.length===1,i.candidates.length===0)return;const A=i.viewModel.activeWorkflow;if(i.candidates.length===1){const O=i.candidates[0];i.edits.feature=O,A.go("editing-existing-feature").catch(()=>{}).then(()=>i.viewModel.spinnerViewModel.visible=!1)}else A.next()})});c.focus(),r.add(g,this.id)},async tearDown(){r.remove(this.id)}}),"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",async setUp(){const{edits:o}=i;o.feature=null,r.add(ge(()=>o.feature,c=>{e.unhighlight(),e.highlight(c)}),this.id)},async tearDown(){e.unhighlight(),r.remove(this.id)}}),"editing-existing-feature":()=>({id:"editing-existing-feature",async setUp(){var Ce;if(r.has("editing-existing-feature"))return;const o=i.edits.feature,c=i.viewModel.view,{attachmentsViewModel:u,editableItems:g,featureFormViewModel:b,layerInfos:S,sketchViewModel:E}=i.viewModel;i.editableItem=g.find(_e=>_e.layer===o.layer);const A=new AbortController;r.add({remove:()=>A.abort()},this.id);const O=WS(c,o.layer),L=ePe(o,c,A.signal),N=await O,z=await L;if(Fo(A))return;i.edits.updateGeometry(z.geometry),i.edits.updateAttributes(z.attributes),i.edits.trackChanges();const q=i.editableItem.supports,Z=q.includes("create"),ee=q.includes("update");u.set({abilities:{editing:!0,operations:{add:Z||ee,update:ee,delete:ee}},graphic:z,filesEnabled:!1,mode:"view"});const ie=z.sourceLayer,ne=(Ce=K8(S,ie))==null?void 0:Ce.formTemplate,oe=c.spatialReference;b.set({arcadeEditType:"UPDATE",feature:z,formTemplate:ne,spatialReference:oe,view:c});const me=cPe(N)?N.createInteractiveEditSession(o):null,fe=[b.on("value-change",_e=>{i.edits.updateAttributes(b.getValues()),z.attributes=i.edits.feature.attributes,me&&me.setAttribute(_e.fieldName,_e.value)}),ge(()=>u.mode,_e=>{_e==="add"&&i.viewModel.activeWorkflow.go("adding-attachment"),_e==="edit"&&i.viewModel.activeWorkflow.go("editing-attachment")})];if(me&&(fe.push(Mo(()=>me.rollback())),r.add(Mo(()=>me.commit()),e._handleKeys.afterCommit)),i.editableItem.geometryUpdatesEnabled){E.allowDeleteKey=!1;const _e=F9(z),{interactive:Ae,visual:Oe}=await rPe(z,_e,E,c,({geometry:je,attributes:De},nt)=>{if(U(_e.rotation)){const{field:mt}=_e.rotation;b.setValue(mt,De[mt])}if(U(_e.size)){const{field:mt}=_e.size;b.setValue(mt,De[mt])}i.edits.updateAttributes(De),i.edits.updateGeometry(je),b.feature.geometry=je,(nt.type==="undo"||nt.type==="redo"||nt.type==="update"&&U(nt.toolEventInfo)&&gee(nt.toolEventInfo.type))&&b.notifyFeatureGeometryChanged()},s);fe.push(Ae,Oe),r.add(Ae,e._handleKeys.beforeCommit),r.add(Oe,e._handleKeys.afterCommit)}else e.highlight(z);r.add(fe,this.id)},async tearDown({cancelled:o}){o&&(e.unhighlight(),r.remove(this.id))}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){i.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){i.viewModel.attachmentsViewModel.mode="view"}})})}};function cPe(e){return"createInteractiveEditSession"in e}v([_()],lf.prototype,"shouldShowAttachments",null),v([_()],lf.prototype,"shouldAllowAttachmentEditing",null),v([_()],lf.prototype,"helpMessage",null),v([_()],lf.prototype,"reliesOnOwnerAdminPrivileges",null),lf=X$=v([K("esri.widgets.Editor.UpdateWorkflow")],lf);const hPe=lf;function M4(e){switch(e){case fi.SUPPORTED:break;case fi.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case fi.GEOMETRY_MISSING:return"no geometry";case fi.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case fi.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case fi.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var fi;(function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(fi||(fi={}));function vee(e){return e?Ir:gPe}function dPe(e,t){return ae(t)||!t.mode?vee(e).mode:t.mode}function pPe(e,t){return U(t)?t:vee(e)}function bee(e,t){return dPe(!!U(e)&&e.hasZ,t)}function oVe(e,t){return pPe(!!U(e)&&!!e.hasZ,t)}function L9(e){const t=eO(e);return bee(e.geometry,t)}function aVe(e){const t=eO(e),i=bee(e.geometry,t);return{mode:i,offset:U(t)&&i!=="on-the-ground"?Qs(t.offset,0)*n3e(Qs(t.unit,"meters")):0}}function Q8(e){if(L9(e)==="on-the-ground")return!1;const t=eO(e),i=U(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!i||i==="0")}function eO(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function lVe(e,t,i){if(ae(i)||!i.mode)return;const r=e.hasZ?e.z:0,s=U(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return r-s;case"on-the-ground":return 0;case"relative-to-ground":return r-(Qs(t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"ground"),0)+s);case"relative-to-scene":return r-(Qs(t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"scene"),0)+s)}}function fPe(e,t,i,r=null){return _ee(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,r)}function wee(e,t,i,r,s=null){return _ee(e,t[0],t[1],t.length>2?t[2]:0,i,r,s)}function _ee(e,t,i,r,s,o,c=null){if(ae(o))return;const u=U(c)?c.mode:"absolute-height";if(u==="on-the-ground")return 0;const{absoluteZ:g}=mPe(t,i,r,s,e,o);return yPe(g,t,i,r,s,e,c,u)}function mPe(e,t,i,r,s,o){const c=U(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return{absoluteZ:i+c,elevation:0};case"on-the-ground":{const u=Qs(s.elevationProvider.getElevation(e,t,0,r,"ground"),0);return{absoluteZ:u,elevation:u}}case"relative-to-ground":{const u=Qs(s.elevationProvider.getElevation(e,t,i,r,"ground"),0);return{absoluteZ:i+u+c,elevation:u}}case"relative-to-scene":{const u=Qs(s.elevationProvider.getElevation(e,t,i,r,"scene"),0);return{absoluteZ:i+u+c,elevation:u}}}}function yPe(e,t,i,r,s,o,c,u){const g=U(c)&&U(c.offset)?c.offset:0;switch(u){case"absolute-height":return e-g;case"relative-to-ground":return e-(Qs(o.elevationProvider.getElevation(t,i,r,s,"ground"),0)+g);case"relative-to-scene":return e-(Qs(o.elevationProvider.getElevation(t,i,r,s,"scene"),0)+g)}}function uVe(e,t){if(ae(t))return!1;const{mode:i}=t;return U(i)&&(e==="scene"&&i==="relative-to-scene"||e==="ground"&&i!=="absolute-height")}const Ir={mode:"absolute-height",offset:0},gPe={mode:"on-the-ground",offset:null};function vPe(e){var t;if(((t=e.layer)==null?void 0:t.type)!=="graphics")return fi.GRAPHICS_LAYER_MISSING;if(ae(e.geometry))return fi.GEOMETRY_MISSING;switch(e.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return fi.GEOMETRY_TYPE_UNSUPPORTED}return L9(e)!=="on-the-ground"&&Q8(e)?fi.ELEVATION_MODE_UNSUPPORTED:fi.SUPPORTED}function xee(e){if(!e)return null;if(d5(e)&&e.wkid){const t=I0e[e.wkid];if(t)return t}if(e.wkt){const t=bPe(e.wkt);if(t)return t}return null}function bPe(e){const t=x0e.exec(e);if(!t||t.length!==2)return null;const i=t[1].split(",");if(!i||i.length<3)return null;const r=parseFloat(i[1]),s=parseFloat(i[2]);return isNaN(r)||isNaN(s)?null:{a:r,f:s===0?0:1/s}}function R9(e){const t=xee(e!=null?e:wt.WGS84);if(wPe(t))return t;const i=t.a*(1-t.f);return Object.assign(t,{b:i,eSq:1-(i/t.a)**2,radius:(2*t.a+i)/3,densificationRatio:1e4/((2*t.a+i)/3)})}function wPe(e){return e!=null&&"b"in e&&"eSq"in e&&"radius"in e}function O2(e,t,i){const{a:r,eSq:s}=R9(i),o=Math.sqrt(s),c=Math.sin(t[1]*Wn),u=r*t[0]*Wn;let g;return s>0?g=r*((1-s)*(c/(1-s*(c*c))-1/(2*o)*Math.log((1-o*c)/(1+o*c))))*.5:g=r*c,e[0]=u,e[1]=g,e}function tO(e){return xee(e)!==null}function cVe(e,t="square-meters"){if(e.some(c=>!tO(c.spatialReference)))throw new de("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let c=0;c<e.length;c++){const u=e[c],g=u.spatialReference,{radius:b,densificationRatio:S}=R9(g),E=b*S;i.push(_Pe(u,E))}const r=[],s=[0,0],o=[0,0];for(let c=0;c<i.length;c++){const{rings:u,spatialReference:g}=i[c];let b=0;for(let S=0;S<u.length;S++){const E=u[S];O2(s,E[0],g),O2(o,E[E.length-1],g);let A=o[0]*s[1]-s[0]*o[1];for(let O=0;O<E.length-1;O++)O2(s,E[O+1],g),O2(o,E[O],g),A+=o[0]*s[1]-s[0]*o[1];b+=A}b=ei(b,"square-meters",t),r.push(b/-2)}return r}function hVe(e,t="meters"){if(!e)throw new de("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(r=>!tO(r.spatialReference)))throw new de("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let r=0;r<e.length;r++){const s=e[r],{spatialReference:o}=s,c=s.type==="polyline"?s.paths:s.rings;let u=0;for(let g=0;g<c.length;g++){const b=c[g];let S=0;for(let E=1;E<b.length;E++){const A=b[E-1][0],O=b[E][0],L=b[E-1][1],N=b[E][1];if(L!==N||A!==O){const z=new See;Iee(z,[A,L],[O,N],o),S+=z.distance}}u+=S}u=ei(u,"meters",t),i.push(u)}return i}function _Pe(e,t){if(e.type!=="polyline"&&e.type!=="polygon")throw new de("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=e;if(!tO(i))throw new de("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r=e.type==="polyline"?e.paths:e.rings,s=[],o=[0,0],c=new See;for(const u of r){const g=[];s.push(g),g.push([u[0][0],u[0][1]]);let b,S,E=u[0][0],A=u[0][1];for(let O=0;O<u.length-1;O++){if(b=u[O+1][0],S=u[O+1][1],E===b&&A===S)continue;const L=[E,A];Iee(c,[E,A],[b,S],i);const{azimuth:N,distance:z}=c,q=z/t;if(q>1){for(let Z=1;Z<=q-1;Z++)rx(o,L,N,Z*t,i),g.push(o.slice(0));rx(o,L,N,(z+Math.floor(q-1)*t)/2,i),g.push(o.slice(0))}rx(o,L,N,z,i),g.push(o.slice(0)),E=o[0],A=o[1]}}return e.type==="polyline"?new Eo({paths:s,spatialReference:i}):new Qn({rings:s,spatialReference:i})}class See{constructor(t=0,i,r){this.distance=t,this.azimuth=i,this.reverseAzimuth=r}}function rx(e,t,i,r,s){const o=t[0],c=t[1],u=o*Wn,g=c*Wn,b=(i!=null?i:0)*Wn,{a:S,b:E,f:A}=R9(s),O=Math.sin(b),L=Math.cos(b),N=(1-A)*Math.tan(g),z=1/Math.sqrt(1+N*N),q=N*z,Z=Math.atan2(N,L),ee=z*O,ie=ee*ee,ne=1-ie,oe=ne*(S*S-E*E)/(E*E),me=1+oe/16384*(4096+oe*(oe*(320-175*oe)-768)),fe=oe/1024*(256+oe*(oe*(74-47*oe)-128));let Ce,_e,Ae,Oe,je=r/(E*me),De=2*Math.PI;for(;Math.abs(je-De)>1e-12;)Ae=Math.cos(2*Z+je),Ce=Math.sin(je),_e=Math.cos(je),Oe=fe*Ce*(Ae+fe/4*(_e*(2*Ae*Ae-1)-fe/6*Ae*(4*Ce*Ce-3)*(4*Ae*Ae-3))),De=je,je=r/(E*me)+Oe;const nt=q*Ce-z*_e*L,mt=Math.atan2(q*_e+z*Ce*L,(1-A)*Math.sqrt(ie+nt*nt)),ct=Math.atan2(Ce*O,z*_e-q*Ce*L),dt=A/16*ne*(4+A*(4-3*ne)),Nt=mt/Wn,Mr=(u+(ct-(1-dt)*A*ee*(je+dt*Ce*(Ae+dt*_e*(2*Ae*Ae-1)))))/Wn;return e[0]=Mr,e[1]=Nt,e}function Iee(e,t,i,r){const s=t[0]*Wn,o=t[1]*Wn,c=i[0]*Wn,u=i[1]*Wn,{a:g,b,f:S,radius:E}=R9(r),A=c-s,O=Math.atan((1-S)*Math.tan(o)),L=Math.atan((1-S)*Math.tan(u)),N=Math.sin(O),z=Math.cos(O),q=Math.sin(L),Z=Math.cos(L);let ee,ie,ne,oe,me,fe,Ce,_e,Ae,Oe,je=1e3,De=A;do{if(Ce=Math.sin(De),_e=Math.cos(De),ne=Math.sqrt(Z*Ce*(Z*Ce)+(z*q-N*Z*_e)*(z*q-N*Z*_e)),ne===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;me=N*q+z*Z*_e,fe=Math.atan2(ne,me),Ae=z*Z*Ce/ne,ie=1-Ae*Ae,oe=me-2*N*q/ie,isNaN(oe)&&(oe=0),Oe=S/16*ie*(4+S*(4-3*ie)),ee=De,De=A+(1-Oe)*S*Ae*(fe+Oe*ne*(oe+Oe*me*(2*oe*oe-1)))}while(Math.abs(De-ee)>1e-12&&--je>0);if(je===0){const Mr=E,nn=Math.acos(Math.sin(o)*Math.sin(u)+Math.cos(o)*Math.cos(u)*Math.cos(c-s))*Mr,ks=c-s,oo=Math.sin(ks)*Math.cos(u),$n=Math.cos(o)*Math.sin(u)-Math.sin(o)*Math.cos(u)*Math.cos(ks),Os=Math.atan2(oo,$n);return e.azimuth=Os/Wn,e.distance=nn,e.reverseAzimuth=void 0,e}const nt=ie*(g*g-b*b)/(b*b),mt=nt/1024*(256+nt*(nt*(74-47*nt)-128)),ct=b*(1+nt/16384*(4096+nt*(nt*(320-175*nt)-768)))*(fe-mt*ne*(oe+mt/4*(me*(2*oe*oe-1)-mt/6*oe*(4*ne*ne-3)*(4*oe*oe-3)))),dt=Math.atan2(Z*Math.sin(De),z*q-N*Z*Math.cos(De)),Nt=Math.atan2(z*Math.sin(De),z*q*Math.cos(De)-N*Z);return e.azimuth=dt/Wn,e.distance=ct,e.reverseAzimuth=Nt/Wn,e}var Q$;let Uh=Q$=class extends Qn{constructor(...e){super(...e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){let i;if(e&&e.center)i=e;else{if(e&&e.rings)return super.normalizeCtorArgs(e,t);i={center:e}}return{...super.normalizeCtorArgs(),...i,...t}}initialize(){var c;const e=this.center,t=this.numberOfPoints;if(this.hasZ=(c=e==null?void 0:e.hasZ)!=null?c:!1,this.rings.length!==0||!e)return;const i=ei(this.radius,this.radiusUnit,"meters"),r=e.spatialReference;let s,o="geographic";if(r.isWebMercator?o="webMercator":((r.wkid&&X[r.wkid])!=null||r.wkt&&r.wkt.indexOf("PROJCS")===0)&&(o="projected"),this.geodesic){let u;switch(o){case"webMercator":u=Tf(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":u=e}s=this._createGeodesicCircle(u,i,t),o==="webMercator"&&(s=gc(s))}else{let u;o==="webMercator"||o==="projected"?u=i/this._convert2Meters(1,e.spatialReference):o==="geographic"&&(u=lU(i,"meters",H6(e.spatialReference).radius)),s=this._createPlanarCircle(e,u,t)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:i,radiusUnit:r,geodesic:s}=this;return new Q$({center:e==null?void 0:e.clone(),numberOfPoints:t,radius:i,radiusUnit:r,geodesic:s})}_createGeodesicCircle(e,t,i){let r=0;const s=[];for(;r<360;){const o=[0,0],c=[e.x,e.y];rx(o,c,r,t),this.hasZ&&o.push(e.z),s.push(o),r+=360/i}return s.push(s[0]),new Qn(s)}_createPlanarCircle(e,t,i){const r=[],s=2*Math.PI/i;for(let o=0;o<i;++o){const c=s*o,u=[e.x+Math.cos(-c)*t,e.y+Math.sin(-c)*t];this.hasZ&&u.push(e.z),r.push(u)}return r.push(r[0]),new Qn({spatialReference:e.spatialReference,rings:[r]})}_convert2Meters(e,t){let i;if(t.wkid&&X[t.wkid]!=null)i=X.values[X[t.wkid]];else{const r=t.wkt,s=r.lastIndexOf(",")+1,o=r.lastIndexOf("]]");i=parseFloat(r.substring(s,o))}return e*i}};v([_({type:pt})],Uh.prototype,"center",void 0),v([_()],Uh.prototype,"geodesic",void 0),v([_()],Uh.prototype,"numberOfPoints",void 0),v([_()],Uh.prototype,"radius",void 0),v([_()],Uh.prototype,"radiusUnit",void 0),Uh=Q$=v([K("esri.geometry.Circle")],Uh);const xPe=Uh;function P2(e){return Eee(e).result}function dVe(e){return Eee(e).geometry}function Eee(e){var t;return((t=e.layer)==null?void 0:t.type)!=="graphics"?{result:fi.GRAPHICS_LAYER_MISSING,geometry:null}:ae(e.geometry)?{result:fi.GEOMETRY_MISSING,geometry:null}:L9(e)!=="on-the-ground"&&Q8(e)?{result:fi.ELEVATION_MODE_UNSUPPORTED,geometry:null}:e.geometry.type!=="point"&&e.geometry.type!=="polyline"&&(e.geometry.type!=="polygon"||e.geometry instanceof xPe)?{result:fi.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:fi.SUPPORTED,geometry:e.geometry}}function SPe(e){var i;if(((i=e.layer)==null?void 0:i.type)!=="graphics")return fi.GRAPHICS_LAYER_MISSING;if(ae(e.geometry))return fi.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return fi.SUPPORTED;default:return fi.GEOMETRY_TYPE_UNSUPPORTED}const t=U(e.symbol)&&e.symbol.type==="point-3d"&&e.symbol.symbolLayers;return t&&t.length>0&&t.some(r=>r.type==="object")?L9(e)!=="on-the-ground"&&Q8(e)?fi.ELEVATION_MODE_UNSUPPORTED:fi.SUPPORTED:fi.SYMBOL_TYPE_UNSUPPORTED}function Jz(e,t,i){if(!t||!e||!e.map)return;const{map:r}=e,s=r.layers.find(o=>o===t);s||r.add(t,i),s&&i!=null&&r.layers.reorder(s,i)}function pVe(e,t){return e.allLayerViews.find(i=>{const r=i.layer;return r===t||"sublayers"in r&&U(r.sublayers)&&r.sublayers.includes(t)})}const Ar={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},Yz={toggle:"Control"};let sx=class extends Re{constructor(e){super(e),this.enabled=!1}};v([_({type:Boolean,nonNullable:!0})],sx.prototype,"enabled",void 0),sx=v([K("esri.views.interactive.sketch.SketchLabelOptions")],sx);const Mee=sx;let mb=class extends Re{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};v([_({type:String,nonNullable:!0})],mb.prototype,"mode",void 0),mb=v([K("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],mb);let qn=class extends Re{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0,this.helpMessage=!1}toJSON(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}};v([_({type:Boolean,nonNullable:!0})],qn.prototype,"distance",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"elevation",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"size",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"scale",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"rotation",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"orientation",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"totalLength",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"area",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"radius",void 0),v([_({type:Boolean,nonNullable:!0})],qn.prototype,"helpMessage",void 0),qn=v([K("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],qn);let uf=class extends Re{constructor(e){super(e),this.enabled=!1,this.elevation=new mb,this.visibleElements=new qn,this.visualVariables=null}toJSON(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}};v([_({type:Boolean,nonNullable:!0})],uf.prototype,"enabled",void 0),v([_({type:mb,nonNullable:!0})],uf.prototype,"elevation",void 0),v([_({type:qn,nonNullable:!0})],uf.prototype,"visibleElements",void 0),v([_()],uf.prototype,"visualVariables",void 0),uf=v([K("esri.widgets.Sketch.SketchTooltipOptions")],uf);const Tee=uf;let ol=class extends $e{constructor(){super(...arguments),this.enabled=!0}};v([_({type:Boolean})],ol.prototype,"enabled",void 0),ol=v([K("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],ol);let Gi=class extends $e{constructor(e){super(e),this.lineSnapper=new ol,this.parallelLineSnapper=new ol,this.rightAngleSnapper=new ol,this.rightAngleTriangleSnapper=new ol,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThreshold=.1,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new Je([255,127,0]),this.orangeTransparent=new Je([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};v([_({type:ol,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Gi.prototype,"lineSnapper",void 0),v([_({type:ol,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Gi.prototype,"parallelLineSnapper",void 0),v([_({type:ol,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Gi.prototype,"rightAngleSnapper",void 0),v([_({type:ol,constructOnly:!0,nonNullable:!0,json:{write:!0}})],Gi.prototype,"rightAngleTriangleSnapper",void 0),v([_({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Gi.prototype,"shortLineThreshold",void 0),v([_({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],Gi.prototype,"distance",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Gi.prototype,"pointThreshold",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Gi.prototype,"intersectionParallelLineThreshold",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Gi.prototype,"parallelLineThreshold",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Gi.prototype,"verticalLineThreshold",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Gi.prototype,"touchSensitivityMultiplier",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],Gi.prototype,"pointOnLineThreshold",void 0),v([_({type:Je,nonNullable:!0})],Gi.prototype,"orange",void 0),v([_({type:Je,nonNullable:!0})],Gi.prototype,"orangeTransparent",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Gi.prototype,"lineHintWidthReference",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Gi.prototype,"lineHintWidthTarget",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],Gi.prototype,"lineHintFadedExtensions",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],Gi.prototype,"parallelLineHintWidth",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],Gi.prototype,"parallelLineHintLength",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Gi.prototype,"parallelLineHintOffset",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],Gi.prototype,"rightAngleHintSize",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],Gi.prototype,"rightAngleHintOutlineSize",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],Gi.prototype,"satisfiesConstraintScreenThreshold",void 0),Gi=v([K("esri.views.interactive.snapping.Settings.Defaults")],Gi);const Tc=new Gi;var ys;(function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"})(ys||(ys={}));const Lg=(e,t,i)=>[t,i],ya=(e,t,i)=>[t,i,e[2]],Rg=(e,t,i)=>[t,i,e[2],e[3]];function Kz(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:U(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function pw({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function fw({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function iO(e,t,i){const r=[];let s,o,c,u;for(let g=0;g<i.length;g++){const b=i[g];g>0?(c=pw(e,b[0]),u=fw(e,b[1]),c===s&&u===o||(r.push(t(b,c-s,u-o)),s=c,o=u)):(s=pw(e,b[0]),o=fw(e,b[1]),r.push(t(b,s,o)))}return r.length>0?r:null}function IPe(e,t,i,r){return iO(e,i?r?Rg:ya:r?ya:Lg,t)}function EPe(e,t,i,r){const s=[],o=i?r?Rg:ya:r?ya:Lg;for(let c=0;c<t.length;c++){const u=iO(e,o,t[c]);u&&u.length>=3&&s.push(u)}return s.length?s:null}function MPe(e,t,i,r){const s=[],o=i?r?Rg:ya:r?ya:Lg;for(let c=0;c<t.length;c++){const u=iO(e,o,t[c]);u&&u.length>=2&&s.push(u)}return s.length?s:null}function Cee({scale:e,translate:t},i){return i*e[0]+t[0]}function Aee({scale:e,translate:t},i){return t[1]-i*e[1]}function $ee(e,t,i){const r=new Array(i.length);if(!i.length)return r;const[s,o]=e.scale;let c=Cee(e,i[0][0]),u=Aee(e,i[0][1]);r[0]=t(i[0],c,u);for(let g=1;g<i.length;g++){const b=i[g];c+=b[0]*s,u-=b[1]*o,r[g]=t(b,c,u)}return r}function kee(e,t,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=$ee(e,t,i[s]);return r}function TPe(e,t,i,r){return $ee(e,i?r?Rg:ya:r?ya:Lg,t)}function CPe(e,t,i,r){return kee(e,i?r?Rg:ya:r?ya:Lg,t)}function APe(e,t,i,r){return kee(e,i?r?Rg:ya:r?ya:Lg,t)}function $Pe(e,t,i,r,s){return t.xmin=pw(e,i.xmin),t.ymin=fw(e,i.ymin),t.xmax=pw(e,i.xmax),t.ymax=fw(e,i.ymax),t!==i&&(r&&(t.zmin=i.zmin,t.zmax=i.zmax),s&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}function kPe(e,t,i,r,s){var o;return t.points=(o=IPe(e,i.points,r,s))!=null?o:[],t}function OPe(e,t,i,r,s){return t.x=pw(e,i.x),t.y=fw(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m)),t}function PPe(e,t,i,r,s){const o=EPe(e,i.rings,r,s);return o?(t.rings=o,t):null}function FPe(e,t,i,r,s){const o=MPe(e,i.paths,r,s);return o?(t.paths=o,t):null}function fVe(e,t){return e&&t?_5(t)?OPe(e,{},t,!1,!1):Tw(t)?FPe(e,{},t,!1,!1):vc(t)?PPe(e,{},t,!1,!1):w5(t)?kPe(e,{},t,!1,!1):Mw(t)?$Pe(e,{},t,!1,!1):null:null}function mVe(e,t,i,r,s){return U(i)&&(t.points=TPe(e,i.points,r,s)),t}function yVe(e,t,i,r,s){return ae(i)||(t.x=Cee(e,i.x),t.y=Aee(e,i.y),t!==i&&(r&&(t.z=i.z),s&&(t.m=i.m))),t}function gVe(e,t,i,r,s){return U(i)&&(t.rings=APe(e,i.rings,r,s)),t}function vVe(e,t,i,r,s){return U(i)&&(t.paths=CPe(e,i.paths,r,s)),t}function LPe(e,t){const i=Oee[e.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(t.length<i.minParams||t.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return i.evaluate(t)}function RPe(e,t){const i=Oee[e.toLowerCase()];return i!=null&&t>=i.minParams&&t<=i.maxParams}const Oee={min:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.min.apply(Math,e[0])},max:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.max.apply(Math,e[0])},avg:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Pee(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:NPe(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sqrt(Zz(e[0]))},count:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Zz(e[0])}};function Pee(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}function NPe(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t}function Zz(e){const t=Pee(e),i=e.length;let r=0;for(const s of e)r+=(s-t)**2;return i>1?r/(i-1):0}var ps;(function(e){e.InvalidFunctionParameters="InvalidFunctionParameters",e.UnsupportedSqlFunction="UnsupportedSqlFunction",e.UnsupportedOperator="UnsupportedOperator",e.UnsupportedSyntax="UnsupportedSyntax",e.UnsupportedIsRhs="UnsupportedIsRhs",e.UnsupportedIsLhs="UnsupportedIsLhs",e.InvalidDataType="InvalidDataType",e.CannotCastValue="CannotCastValue",e.MissingStatisticParameters="MissingStatisticParameters"})(ps||(ps={}));const DPe={[ps.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[ps.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[ps.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[ps.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[ps.UnsupportedOperator]:"Unsupported operator - {operator}",[ps.UnsupportedSyntax]:"Unsupported syntax - {node}",[ps.UnsupportedSqlFunction]:"Sql function not found = {function}",[ps.InvalidDataType]:"Invalid sql data type",[ps.CannotCastValue]:"Cannot cast value to the required data type"};class oc extends Error{constructor(t,i){super(Fg(DPe[t],i)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,oc)}}var Wa;(function(e){e.NeverReach="NeverReach",e.NotImplemented="NotImplemented",e.Cancelled="Cancelled",e.InvalidStatResponse="InvalidStatResponse",e.InvalidRequest="InvalidRequest",e.RequestFailed="RequestFailed",e.MissingFeatures="MissingFeatures",e.AggregationFieldNotFound="AggregationFieldNotFound",e.DataElementsNotFound="DataElementsNotFound"})(Wa||(Wa={}));const jPe={[Wa.Cancelled]:"Cancelled",[Wa.InvalidStatResponse]:"Invalid statistics response from service",[Wa.InvalidRequest]:"Invalid request",[Wa.RequestFailed]:"Request failed - {reason}",[Wa.MissingFeatures]:"Missing features",[Wa.AggregationFieldNotFound]:"Aggregation field not found",[Wa.DataElementsNotFound]:"Data elements not found on service",[Wa.NeverReach]:"Encountered unreachable logic",[Wa.NotImplemented]:"Not implemented"};class Fee extends Error{constructor(t,i){super(Fg(jPe[t],i)),this.declaredRootClass="esri.arcade.featureset.support.featureseterror",Error.captureStackTrace&&Error.captureStackTrace(this,Fee)}}class Qr{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(t){if(t.precision!==null||t.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static _parseSecondsComponent(t,i){if(i.includes(".")){const r=i.split(".");t.second=parseFloat(r[0]),t.millis=parseInt(r[1],10)}else t.second=parseFloat(i)}static createFromMilliseconds(t){const i=new Qr;return i.second=t/1e3,i}static createFromValueAndQualifer(t,i,r){let s=null;const o=new Qr;if(o.op=r==="-"?"-":"+",i.type==="interval-period"){Qr._fixDefaults(i);const c=new RegExp("^[0-9]{1,}$");if(i.period==="year"||i.period==="month")throw new Error("Year-Month Intervals not supported");if(i.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(t))throw new Error("Illegal Interval");Qr._parseSecondsComponent(o,t)}else{if(!c.test(t))throw new Error("Illegal Interval");o[i.period]=parseFloat(t)}}else{if(Qr._fixDefaults(i.start),Qr._fixDefaults(i.end),i.start.period==="year"||i.start.period==="month")throw new Error("Year-Month Intervals not supported");if(i.end.period==="year"||i.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(i.start.period){case"day":switch(i.end.period){case"hour":if(s=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");o[i.start.period]=parseFloat(t.split(" ")[0]),o[i.end.period]=parseFloat(t.split(" ")[1]);break;case"minute":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");{o[i.start.period]=parseFloat(t.split(" ")[0]);const c=t.split(" ")[1].split(":");o.hour=parseFloat(c[0]),o.minute=parseFloat(c[1])}break;case"second":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{o[i.start.period]=parseFloat(t.split(" ")[0]);const c=t.split(" ")[1].split(":");o.hour=parseFloat(c[0]),o.minute=parseFloat(c[1]),Qr._parseSecondsComponent(o,c[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(i.end.period){case"minute":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!s.test(t))throw new Error("Illegal Interval");o.hour=parseFloat(t.split(":")[0]),o.minute=parseFloat(t.split(":")[1]);break;case"second":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{const c=t.split(":");o.hour=parseFloat(c[0]),o.minute=parseFloat(c[1]),Qr._parseSecondsComponent(o,c[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(i.end.period!=="second")throw new Error("Invalid Interval.");if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(t))throw new Error("Illegal Interval");{const c=t.split(":");o.minute=parseFloat(c[0]),Qr._parseSecondsComponent(o,c[1])}break;default:throw new Error("Invalid Interval.")}}return o}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function rO(e,t){const i=Lee[e.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(t.length<i.minParams||t.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${e.toUpperCase()}`);return i.evaluate(t)}function zPe(e,t){const i=Lee[e.toLowerCase()];return i!=null&&t>=i.minParams&&t<=i.maxParams}function VPe(e){return typeof e=="string"||e instanceof String}function GPe(e){return e instanceof Date}function Xz(e){const t=new Date(e.getTime());return t.setHours(0,0,0,0),t}function Qz(e,t){if(GPe(e))return t?Xz(e):e;if(VPe(e)){const i=Ke.fromSQL(e);if(i.isValid)return t?Xz(i.toJSDate()):i.toJSDate()}throw new oc(ps.CannotCastValue)}const Lee={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(t==null)return null;if(t instanceof Date)switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(e.length===2){const[t,i]=e;return t==null||i==null?null:t.toString().substring(i-1)}if(e.length===3){const[t,i,r]=e;return t==null||i==null||r==null?null:r<=0?"":t.toString().substring(i-1,i+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>e==null||t==null?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=e.length===3,i=t?e[1]:" ",r=t?e[2]:e[1];if(i==null||r==null)return null;const s=`(${toe(i)})`;switch(e[0]){case"BOTH":return r.replace(new RegExp(`^${s}*|${s}*$`,"g"),"");case"LEADING":return r.replace(new RegExp(`^${s}*`,"g"),"");case"TRAILING":return r.replace(new RegExp(`${s}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0]>0?1:e[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>e[0]==null||e[1]==null?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],i=e.length===2?10**e[1]:1;return t==null?null:Math.round(t*i)/i}},truncate:{minParams:1,maxParams:2,evaluate:e=>e[0]==null?null:e.length===1?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>typeof e[0]=="string"||e[0]instanceof String?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let i=0;i<e.length;i++){if(e[i]==null)return null;t+=e[i].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(const t of e)if(t!==null)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>e[0]==null?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:e=>{const t=e[0],i=e[1];return(t instanceof Date?t.valueOf():t)===(i instanceof Date?i.valueOf():i)?null:t}},cast:{minParams:2,maxParams:2,evaluate:e=>{const t=e[0],i=e[1];if(t===null)return null;switch(i.type){case"integer":{const r=parseInt(t,10);if(isNaN(r))throw new oc(ps.CannotCastValue);return r}case"smallint":{const r=parseInt(t,10);if(isNaN(r))throw new oc(ps.CannotCastValue);if(r>32767||r<-32767)throw new oc(ps.CannotCastValue);return r}case"float":case"real":{const r=parseFloat(t);if(isNaN(r))throw new oc(ps.CannotCastValue);return r}case"date":return Qz(t,!0);case"timestamp":return Qz(t,!1);case"varchar":{const r=t.toString();if(r.length>i.size)throw new oc(ps.CannotCastValue);return r}default:throw new oc(ps.InvalidDataType)}}}};var eV,tV,e6={};tV=function(){function e(s,o){function c(){this.constructor=s}c.prototype=o.prototype,s.prototype=new c}function t(s,o,c,u){var g=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(g,t.prototype),g.expected=o,g.found=c,g.location=u,g.name="SyntaxError",g}function i(s,o,c){return c=c||" ",s.length>o?s:(o-=s.length,s+(c+=c.repeat(o)).slice(0,o))}function r(s,o){var c,u={},g=(o=o!==void 0?o:{}).grammarSource,b={start:IO},S=IO,E="!",A="=",O=">=",L=">",N="<=",z="<>",q="<",Z="!=",ee="+",ie="-",ne="||",oe="*",me="/",fe="@",Ce="'",_e="N'",Ae="''",Oe=".",je="null",De="true",nt="false",mt="in",ct="is",dt="like",Nt="escape",Mr="not",nn="and",ks="or",oo="between",$n="from",Os="for",wa="substring",_a="extract",ao="trim",fu="position",Yd="timestamp",mu="date",Kd="leading",yu="trailing",Zd="both",Xd="cast",zc="as",Wi="integer",Q="smallint",Tr="float",kn="real",Et="varchar",Ci="to",Ps="interval",Fs="year",Ls="month",on="day",Rs="hour",gu="minute",xa="second",Le="case",wl="end",p="when",P="then",x="else",d=",",l="(",n=")",a="`",h=/^[A-Za-z_\x80-\uFFFF]/,f=/^[A-Za-z0-9_]/,m=/^[A-Za-z0-9_.\x80-\uFFFF]/,y=/^[^']/,w=/^[0-9]/,I=/^[eE]/,M=/^[+\-]/,T=/^[ \t\n\r]/,$=/^[^`]/,F=Xe("!",!1),R=Xe("=",!1),j=Xe(">=",!1),H=Xe(">",!1),W=Xe("<=",!1),V=Xe("<>",!1),Y=Xe("<",!1),se=Xe("!=",!1),re=Xe("+",!1),he=Xe("-",!1),ue=Xe("||",!1),we=Xe("*",!1),Te=Xe("/",!1),Ee=vu([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1),He=vu([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Pe=vu([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1),lt=Xe("@",!1),et=Xe("'",!1),Ve=Xe("N'",!1),Zt=Xe("''",!1),Ji=vu(["'"],!0,!1),ci=Xe(".",!1),Pt=vu([["0","9"]],!1,!1),Ft=vu(["e","E"],!1,!1),vt=vu(["+","-"],!1,!1),bi=Xe("NULL",!0),ft=Xe("TRUE",!0),an=Xe("FALSE",!0),Mt=Xe("IN",!0),Gr=Xe("IS",!0),zt=Xe("LIKE",!0),Vc=Xe("ESCAPE",!0),Gc=Xe("NOT",!0),Uc=Xe("AND",!0),os=Xe("OR",!0),q9=Xe("BETWEEN",!0),B9=Xe("FROM",!0),le=Xe("FOR",!0),Me=Xe("SUBSTRING",!0),Fe=Xe("EXTRACT",!0),xt=Xe("TRIM",!0),Ur=Xe("POSITION",!0),Yi=Xe("TIMESTAMP",!0),On=Xe("DATE",!0),$0=Xe("LEADING",!0),Cte=Xe("TRAILING",!0),Ate=Xe("BOTH",!0),$te=Xe("CAST",!0),kte=Xe("AS",!0),Ote=Xe("INTEGER",!0),Pte=Xe("SMALLINT",!0),Fte=Xe("FLOAT",!0),Lte=Xe("REAL",!0),Rte=Xe("VARCHAR",!0),Nte=Xe("TO",!0),Dte=Xe("INTERVAL",!0),jte=Xe("YEAR",!0),zte=Xe("MONTH",!0),Vte=Xe("DAY",!0),Gte=Xe("HOUR",!0),Ute=Xe("MINUTE",!0),qte=Xe("SECOND",!0),Bte=Xe("CASE",!0),Hte=Xe("END",!0),Wte=Xe("WHEN",!0),Jte=Xe("THEN",!0),Yte=Xe("ELSE",!0),Kte=Xe(",",!1),Zte=Xe("(",!1),Xte=Xe(")",!1),Qte=vu([" ","	",`
`,"\r"],!1,!1),bO=Xe("`",!1),wO=vu(["`"],!0,!1),eie=function(k){return k},tie=function(k,G){var B={type:"expression-list"},te=_ne(k,G);return B.value=te,B},iie=function(k,G){return Vg(k,G)},rie=function(k,G){return Vg(k,G)},sie=function(k){return bne("NOT",k)},nie=function(k,G){return G==""||G==null||G==null?k:G.type=="arithmetic"?Vg(k,G.tail):eP(G.op,k,G.right,G.escape)},oie=function(k){return{type:"arithmetic",tail:k}},aie=function(k,G){return{op:k+"NOT",right:G}},lie=function(k,G){return{op:k,right:G}},uie=function(k,G,B){return{op:"NOT"+k,right:{type:"expression-list",value:[G,B]}}},cie=function(k,G,B){return{op:k,right:{type:"expression-list",value:[G,B]}}},hie=function(k){return k[0]+" "+k[2]},die=function(k){return k[0]+" "+k[2]},pie=function(k,G,B){return{op:k,right:G,escape:B.value}},fie=function(k,G){return{op:k,right:G,escape:""}},mie=function(k,G){return{op:k,right:G}},yie=function(k){return{op:k,right:{type:"expression-list",value:[]}}},gie=function(k,G){return{op:k,right:G}},vie=function(k,G){return Vg(k,G)},bie=function(k,G){return Vg(k,G)},wie=function(k){return k.paren=!0,k},_ie=function(k){return/^CURRENT_DATE$/i.test(k)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(k)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:k}},xie=function(k){return k},Sie=function(k,G){return k+G.join("")},Iie=function(k,G){return k+G.join("")},Eie=function(k){return{type:"parameter",value:k[1]}},Mie=function(k,G){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:k},G]}}},Tie=function(k,G,B){return{type:"function",name:"substring",args:{type:"expression-list",value:B?[k,G,B[2]]:[k,G]}}},Cie=function(k,G){return{type:"function",name:"cast",args:{type:"expression-list",value:[k,G]}}},Aie=function(){return{type:"data-type",value:{type:"integer"}}},$ie=function(){return{type:"data-type",value:{type:"smallint"}}},kie=function(){return{type:"data-type",value:{type:"float"}}},Oie=function(){return{type:"data-type",value:{type:"real"}}},Pie=function(){return{type:"data-type",value:{type:"date"}}},Fie=function(){return{type:"data-type",value:{type:"timestamp"}}},Lie=function(k){return{type:"data-type",value:{type:"varchar",size:parseInt(k)}}},Rie=function(k,G,B){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:k!=null?k:"BOTH"},G,B]}}},Nie=function(k,G){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:k!=null?k:"BOTH"},G]}}},Die=function(k,G){return{type:"function",name:"position",args:{type:"expression-list",value:[k,G]}}},jie=function(k,G){return{type:"function",name:k,args:G||{type:"expression-list",value:[]}}},zie=function(k){return{type:"timestamp",value:k.value}},Vie=function(k,G,B){return{type:"interval",value:G,qualifier:B,op:k}},Gie=function(k,G){return{type:"interval",value:k,qualifier:G,op:""}},Uie=function(k,G){return{type:"interval-qualifier",start:k,end:G}},qie=function(k,G){return{type:"interval-period",period:k.value,precision:G,secondary:null}},Bie=function(k){return{type:"interval-period",period:k.value,precision:null,secondary:null}},Hie=function(k){return{type:"interval-period",period:k.value,precision:null,secondary:null}},Wie=function(k,G){return{type:"interval-period",period:"second",precision:k,secondary:G}},Jie=function(k){return{type:"interval-period",period:"second",precision:k,secondary:null}},Yie=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Kie=function(k,G){return{type:"interval-period",period:k.value,precision:G,secondary:null}},Zie=function(k){return{type:"interval-period",period:k.value,precision:null,secondary:null}},Xie=function(k,G){return{type:"interval-period",period:"second",precision:k,secondary:G}},Qie=function(k){return{type:"interval-period",period:"second",precision:k,secondary:null}},ere=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},tre=function(){return{type:"string",value:"day"}},ire=function(){return{type:"string",value:"hour"}},rre=function(){return{type:"string",value:"minute"}},sre=function(){return{type:"string",value:"month"}},nre=function(){return{type:"string",value:"year"}},ore=function(k){return parseFloat(k)},are=function(k){return parseFloat(k)},lre=function(k){return{type:"date",value:k.value}},ure=function(){return{type:"null",value:null}},cre=function(){return{type:"boolean",value:!0}},hre=function(){return{type:"boolean",value:!1}},_O=function(){return"'"},dre=function(k){return{type:"string",value:k.join("")}},pre=function(k,G){return{type:"case-expression",format:"simple",operand:k,clauses:G,else:null}},fre=function(k,G,B){return{type:"case-expression",format:"simple",operand:k,clauses:G,else:B.value}},mre=function(k){return{type:"case-expression",format:"searched",clauses:k,else:null}},yre=function(k,G){return{type:"case-expression",format:"searched",clauses:k,else:G.value}},gre=function(k,G){return{type:"when-clause",operand:k,value:G}},vre=function(k,G){return{type:"when-clause",operand:k,value:G}},bre=function(k){return{type:"else-clause",value:k}},wre=function(k){return{type:"number",value:k}},_re=function(k,G,B){return parseFloat(k+G+B)},xre=function(k,G){return parseFloat(k+G)},Sre=function(k,G){return parseFloat(k+G)},Ire=function(k){return parseFloat(k)},Ere=function(k,G){return k[0]+G},Mre=function(k){return"."+(k!=null?k:"")},Tre=function(k,G){return k+G},Cre=function(k){return k.join("")},Are=function(k,G){return"e"+(G===null?"":G)},$re=function(){return"IN"},kre=function(){return"IS"},Ore=function(){return"LIKE"},Pre=function(){return"ESCAPE"},Fre=function(){return"NOT"},Lre=function(){return"AND"},Rre=function(){return"OR"},Nre=function(){return"BETWEEN"},Dre=function(){return"FROM"},jre=function(){return"FOR"},zre=function(){return"SUBSTRING"},Vre=function(){return"EXTRACT"},Gre=function(){return"TRIM"},Ure=function(){return"POSITION"},qre=function(){return"TIMESTAMP"},Bre=function(){return"DATE"},Hre=function(){return"LEADING"},Wre=function(){return"TRAILING"},Jre=function(){return"BOTH"},Yre=function(){return"CAST"},Kre=function(){return"AS"},Zre=function(){return"INTEGER"},Xre=function(){return"SMALLINT"},Qre=function(){return"FLOAT"},ese=function(){return"REAL"},tse=function(){return"VARCHAR"},ise=function(){return"TO"},rse=function(){return"INTERVAL"},sse=function(){return"YEAR"},nse=function(){return"MONTH"},ose=function(){return"DAY"},ase=function(){return"HOUR"},lse=function(){return"MINUTE"},use=function(){return"SECOND"},cse=function(){return"CASE"},hse=function(){return"END"},dse=function(){return"WHEN"},pse=function(){return"THEN"},fse=function(){return"ELSE"},mse=function(k){return k},yse=function(k){return k.join("")},D=0,a_=[{line:1,column:1}],_l=0,H9=[],be=0;if("startRule"in o){if(!(o.startRule in b))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');S=b[o.startRule]}function Xe(k,G){return{type:"literal",text:k,ignoreCase:G}}function vu(k,G,B){return{type:"class",parts:k,inverted:G,ignoreCase:B}}function gse(){return{type:"end"}}function xO(k){var G,B=a_[k];if(B)return B;for(G=k-1;!a_[G];)G--;for(B={line:(B=a_[G]).line,column:B.column};G<k;)s.charCodeAt(G)===10?(B.line++,B.column=1):B.column++,G++;return a_[k]=B,B}function SO(k,G){var B=xO(k),te=xO(G);return{source:g,start:{offset:k,line:B.line,column:B.column},end:{offset:G,line:te.line,column:te.column}}}function Ge(k){D<_l||(D>_l&&(_l=D,H9=[]),H9.push(k))}function vse(k,G,B){return new t(t.buildMessage(k,G),k,G,B)}function IO(){var k,G;return k=D,xe(),(G=dr())!==u?(xe(),k=eie(G)):(D=k,k=u),k}function EO(){var k,G,B,te,We,Vt,Oi,tr;if(k=D,(G=dr())!==u){for(B=[],te=D,We=xe(),(Vt=g_())!==u?(Oi=xe(),(tr=dr())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);te!==u;)B.push(te),te=D,We=xe(),(Vt=g_())!==u?(Oi=xe(),(tr=dr())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);k=tie(G,B)}else D=k,k=u;return k}function dr(){var k,G,B,te,We,Vt,Oi,tr;if(k=D,(G=W9())!==u){for(B=[],te=D,We=xe(),(Vt=zO())!==u?(Oi=xe(),(tr=W9())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);te!==u;)B.push(te),te=D,We=xe(),(Vt=zO())!==u?(Oi=xe(),(tr=W9())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);k=iie(G,B)}else D=k,k=u;return k}function W9(){var k,G,B,te,We,Vt,Oi,tr;if(k=D,(G=l_())!==u){for(B=[],te=D,We=xe(),(Vt=f_())!==u?(Oi=xe(),(tr=l_())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);te!==u;)B.push(te),te=D,We=xe(),(Vt=f_())!==u?(Oi=xe(),(tr=l_())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);k=rie(G,B)}else D=k,k=u;return k}function l_(){var k,G,B,te,We;return k=D,(G=zg())===u&&(G=D,s.charCodeAt(D)===33?(B=E,D++):(B=u,be===0&&Ge(F)),B!==u?(te=D,be++,s.charCodeAt(D)===61?(We=A,D++):(We=u,be===0&&Ge(R)),be--,We===u?te=void 0:(D=te,te=u),te!==u?G=B=[B,te]:(D=G,G=u)):(D=G,G=u)),G!==u?(B=xe(),(te=l_())!==u?k=sie(te):(D=k,k=u)):(D=k,k=u),k===u&&(k=bse()),k}function bse(){var k,G,B;return k=D,(G=bu())!==u?(xe(),(B=wse())===u&&(B=null),k=nie(G,B)):(D=k,k=u),k}function wse(){var k;return(k=_se())===u&&(k=Ese())===u&&(k=Sse())===u&&(k=xse())===u&&(k=Ise()),k}function _se(){var k,G,B,te,We,Vt;if(k=[],G=D,B=xe(),(te=MO())!==u?(We=xe(),(Vt=bu())!==u?G=B=[B,te,We,Vt]:(D=G,G=u)):(D=G,G=u),G!==u)for(;G!==u;)k.push(G),G=D,B=xe(),(te=MO())!==u?(We=xe(),(Vt=bu())!==u?G=B=[B,te,We,Vt]:(D=G,G=u)):(D=G,G=u);else k=u;return k!==u&&(k=oie(k)),k}function MO(){var k;return s.substr(D,2)===O?(k=O,D+=2):(k=u,be===0&&Ge(j)),k===u&&(s.charCodeAt(D)===62?(k=L,D++):(k=u,be===0&&Ge(H)),k===u&&(s.substr(D,2)===N?(k=N,D+=2):(k=u,be===0&&Ge(W)),k===u&&(s.substr(D,2)===z?(k=z,D+=2):(k=u,be===0&&Ge(V)),k===u&&(s.charCodeAt(D)===60?(k=q,D++):(k=u,be===0&&Ge(Y)),k===u&&(s.charCodeAt(D)===61?(k=A,D++):(k=u,be===0&&Ge(R)),k===u&&(s.substr(D,2)===Z?(k=Z,D+=2):(k=u,be===0&&Ge(se)))))))),k}function xse(){var k,G,B,te;return k=D,(G=DO())!==u?(xe(),(B=zg())!==u?(xe(),(te=bu())!==u?k=aie(G,te):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=DO())!==u?(xe(),(B=bu())!==u?k=lie(G,B):(D=k,k=u)):(D=k,k=u)),k}function Sse(){var k,G,B,te,We,Vt;return k=D,(G=zg())!==u?(xe(),(B=VO())!==u?(xe(),(te=bu())!==u?(xe(),(We=f_())!==u?(xe(),(Vt=bu())!==u?k=uie(B,te,Vt):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=VO())!==u?(xe(),(B=bu())!==u?(xe(),(te=f_())!==u?(xe(),(We=bu())!==u?k=cie(G,B,We):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)),k}function TO(){var k,G,B,te,We;return k=D,G=D,(B=zg())!==u?(te=xe(),(We=jO())!==u?G=B=[B,te,We]:(D=G,G=u)):(D=G,G=u),G!==u&&(G=hie(G)),(k=G)===u&&(k=jO()),k}function J9(){var k,G,B,te,We;return k=D,G=D,(B=zg())!==u?(te=xe(),(We=eI())!==u?G=B=[B,te,We]:(D=G,G=u)):(D=G,G=u),G!==u&&(G=die(G)),(k=G)===u&&(k=eI()),k}function Ise(){var k,G,B,te;return k=D,(G=TO())!==u?(xe(),(B=k0())!==u?(xe(),tne()!==u?(xe(),(te=Q9())!==u?k=pie(G,B,te):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=TO())!==u?(xe(),(B=k0())!==u?k=fie(G,B):(D=k,k=u)):(D=k,k=u)),k}function Ese(){var k,G,B,te;return k=D,(G=J9())!==u?(xe(),(B=vs())!==u?(xe(),(te=EO())!==u?(xe(),bs()!==u?k=mie(G,te):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=J9())!==u?(xe(),(B=vs())!==u?(xe(),(te=bs())!==u?k=yie(G):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=J9())!==u?(xe(),(B=X9())!==u?k=gie(G,B):(D=k,k=u)):(D=k,k=u))),k}function bu(){var k,G,B,te,We,Vt,Oi,tr;if(k=D,(G=Y9())!==u){for(B=[],te=D,We=xe(),(Vt=CO())!==u?(Oi=xe(),(tr=Y9())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);te!==u;)B.push(te),te=D,We=xe(),(Vt=CO())!==u?(Oi=xe(),(tr=Y9())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);k=vie(G,B)}else D=k,k=u;return k}function CO(){var k;return s.charCodeAt(D)===43?(k=ee,D++):(k=u,be===0&&Ge(re)),k===u&&(s.charCodeAt(D)===45?(k=ie,D++):(k=u,be===0&&Ge(he)),k===u&&(s.substr(D,2)===ne?(k=ne,D+=2):(k=u,be===0&&Ge(ue)))),k}function Y9(){var k,G,B,te,We,Vt,Oi,tr;if(k=D,(G=K9())!==u){for(B=[],te=D,We=xe(),(Vt=AO())!==u?(Oi=xe(),(tr=K9())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);te!==u;)B.push(te),te=D,We=xe(),(Vt=AO())!==u?(Oi=xe(),(tr=K9())!==u?te=We=[We,Vt,Oi,tr]:(D=te,te=u)):(D=te,te=u);k=bie(G,B)}else D=k,k=u;return k}function AO(){var k;return s.charCodeAt(D)===42?(k=oe,D++):(k=u,be===0&&Ge(we)),k===u&&(s.charCodeAt(D)===47?(k=me,D++):(k=u,be===0&&Ge(Te))),k}function K9(){var k,G;return(k=Nse())===u&&(k=Ase())===u&&(k=$se())===u&&(k=Pse())===u&&(k=Fse())===u&&(k=kse())===u&&(k=Lse())===u&&(k=Hse())===u&&(k=Mse())===u&&(k=X9())===u&&(k=D,vs()!==u?(xe(),(G=dr())!==u?(xe(),bs()!==u?k=wie(G):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)),k}function Mse(){var k;return(k=Tse())!==u&&(k=_ie(k)),k}function Tse(){var k;return(k=Cse())!==u&&(k=xie(k)),k}function Cse(){var k,G,B,te;if(k=D,(G=Z9())!==u){for(B=[],te=kO();te!==u;)B.push(te),te=kO();k=Sie(G,B)}else D=k,k=u;return k}function $O(){var k,G,B,te;if(k=D,(G=Z9())!==u){for(B=[],te=bt();te!==u;)B.push(te),te=bt();k=Iie(G,B)}else D=k,k=u;return k}function Z9(){var k;return h.test(s.charAt(D))?(k=s.charAt(D),D++):(k=u,be===0&&Ge(Ee)),k}function bt(){var k;return f.test(s.charAt(D))?(k=s.charAt(D),D++):(k=u,be===0&&Ge(He)),k}function kO(){var k;return m.test(s.charAt(D))?(k=s.charAt(D),D++):(k=u,be===0&&Ge(Pe)),k}function X9(){var k,G,B;return k=D,s.charCodeAt(D)===64?(G=fe,D++):(G=u,be===0&&Ge(lt)),G!==u&&(B=$O())!==u?k=G=[G,B]:(D=k,k=u),k!==u&&(k=Eie(k)),k}function Ase(){var k,G,B;return k=D,sne()!==u?(xe(),vs()!==u?(xe(),(G=Rse())!==u?(xe(),tI()!==u?(xe(),(B=dr())!==u?(xe(),bs()!==u?k=Mie(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k}function $se(){var k,G,B,te,We,Vt,Oi;return k=D,rne()!==u?(xe(),vs()!==u?(xe(),(G=dr())!==u?(xe(),tI()!==u?(xe(),(B=dr())!==u?(xe(),te=D,(We=ine())!==u?(Vt=xe(),(Oi=dr())!==u?te=We=[We,Vt,Oi,xe()]:(D=te,te=u)):(D=te,te=u),te===u&&(te=null),(We=bs())!==u?k=Tie(G,B,te):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k}function kse(){var k,G,B;return k=D,une()!==u?(xe(),vs()!==u?(xe(),(G=dr())!==u?(xe(),cne()!==u?(xe(),(B=Ose())!==u?(xe(),bs()!==u?k=Cie(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k}function Ose(){var k,G,B;return k=D,(G=hne())!==u&&(G=Aie()),(k=G)===u&&(k=D,(G=dne())!==u&&(G=$ie()),(k=G)===u&&(k=D,(G=pne())!==u&&(G=kie()),(k=G)===u&&(k=D,(G=fne())!==u&&(G=Oie()),(k=G)===u&&(k=D,(G=qO())!==u&&(G=Pie()),(k=G)===u&&(k=D,(G=UO())!==u&&(G=Fie()),(k=G)===u&&(k=D,(G=mne())!==u?(xe(),vs()!==u?(xe(),(B=Qd())!==u?(xe(),bs()!==u?k=Lie(B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u))))))),k}function Pse(){var k,G,B,te;return k=D,GO()!==u?(xe(),vs()!==u?(xe(),(G=OO())===u&&(G=null),xe(),(B=dr())!==u?(xe(),tI()!==u?(xe(),(te=dr())!==u?(xe(),bs()!==u?k=Rie(G,B,te):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,GO()!==u?(xe(),vs()!==u?(xe(),(G=OO())===u&&(G=null),xe(),(B=dr())!==u?(xe(),bs()!==u?k=Nie(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)),k}function OO(){var k;return(k=one())===u&&(k=ane())===u&&(k=lne()),k}function Fse(){var k,G,B;return k=D,nne()!==u?(xe(),vs()!==u?(xe(),(G=dr())!==u?(xe(),eI()!==u?(xe(),(B=dr())!==u?(xe(),bs()!==u?k=Die(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k}function Lse(){var k,G,B;return k=D,(G=vne())!==u?(xe(),vs()!==u?(xe(),(B=EO())===u&&(B=null),xe(),bs()!==u?k=jie(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k}function Rse(){var k;return(k=HO())===u&&(k=WO())===u&&(k=JO())===u&&(k=YO())===u&&(k=KO())===u&&(k=ep()),k}function Nse(){var k;return(k=Q9())===u&&(k=Yse())===u&&(k=Bse())===u&&(k=qse())===u&&(k=Use())===u&&(k=Dse())===u&&(k=jse()),k}function Dse(){var k,G;return k=D,UO()!==u?(xe(),(G=k0())!==u?k=zie(G):(D=k,k=u)):(D=k,k=u),k}function jse(){var k,G,B,te;return k=D,BO()!==u?(xe(),s.charCodeAt(D)===45?(G=ie,D++):(G=u,be===0&&Ge(he)),G===u&&(s.charCodeAt(D)===43?(G=ee,D++):(G=u,be===0&&Ge(re))),G!==u?(xe(),(B=k0())!==u?(xe(),(te=PO())!==u?k=Vie(G,B,te):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,BO()!==u?(xe(),(G=k0())!==u?(xe(),(B=PO())!==u?k=Gie(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)),k}function PO(){var k,G,B;return k=D,(G=zse())!==u?(xe(),yne()!==u?(xe(),(B=Vse())!==u?k=Uie(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=Gse()),k}function zse(){var k,G,B;return k=D,(G=jg())!==u?(xe(),vs()!==u?(xe(),(B=c_())!==u?(xe(),bs()!==u?k=qie(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=jg())!==u&&(G=Bie(G)),k=G),k}function Vse(){var k,G,B,te;return k=D,(G=jg())!==u&&(G=Hie(G)),(k=G)===u&&(k=D,(G=ep())!==u?(xe(),vs()!==u?(xe(),(B=c_())!==u?(xe(),g_()!==u?(xe(),(te=u_())!==u?(xe(),bs()!==u?k=Wie(B,te):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=ep())!==u?(xe(),vs()!==u?(xe(),(B=c_())!==u?(xe(),bs()!==u?k=Jie(B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=ep())!==u&&(G=Yie()),k=G))),k}function Gse(){var k,G,B,te;return k=D,(G=jg())!==u?(xe(),vs()!==u?(xe(),(B=u_())!==u?(xe(),bs()!==u?k=Kie(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=jg())!==u&&(G=Zie(G)),(k=G)===u&&(k=D,(G=ep())!==u?(xe(),vs()!==u?(xe(),(B=c_())!==u?(xe(),g_()!==u?(xe(),(te=u_())!==u?(xe(),bs()!==u?k=Xie(B,te):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=ep())!==u?(xe(),vs()!==u?(xe(),(B=u_())!==u?(xe(),bs()!==u?k=Qie(B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k===u&&(k=D,(G=ep())!==u&&(G=ere()),k=G)))),k}function jg(){var k,G;return k=D,(G=JO())!==u&&(G=tre()),(k=G)===u&&(k=D,(G=YO())!==u&&(G=ire()),(k=G)===u&&(k=D,(G=KO())!==u&&(G=rre()),(k=G)===u&&(k=D,(G=WO())!==u&&(G=sre()),(k=G)===u&&(k=D,(G=HO())!==u&&(G=nre()),k=G)))),k}function u_(){var k;return(k=Qd())!==u&&(k=ore(k)),k}function c_(){var k;return(k=Qd())!==u&&(k=are(k)),k}function Use(){var k,G;return k=D,qO()!==u?(xe(),(G=k0())!==u?k=lre(G):(D=k,k=u)):(D=k,k=u),k}function qse(){var k;return(k=Xse())!==u&&(k=ure()),k}function Bse(){var k,G;return k=D,(G=Qse())!==u&&(G=cre()),(k=G)===u&&(k=D,(G=ene())!==u&&(G=hre()),k=G),k}function k0(){var k;return(k=Q9())===u&&(k=X9()),k}function Q9(){var k,G,B,te,We;if(k=D,s.charCodeAt(D)===39?(G=Ce,D++):(G=u,be===0&&Ge(et)),G===u&&(s.substr(D,2)===_e?(G=_e,D+=2):(G=u,be===0&&Ge(Ve))),G!==u){for(B=[],te=D,s.substr(D,2)===Ae?(We=Ae,D+=2):(We=u,be===0&&Ge(Zt)),We!==u&&(We=_O()),(te=We)===u&&(y.test(s.charAt(D))?(te=s.charAt(D),D++):(te=u,be===0&&Ge(Ji)));te!==u;)B.push(te),te=D,s.substr(D,2)===Ae?(We=Ae,D+=2):(We=u,be===0&&Ge(Zt)),We!==u&&(We=_O()),(te=We)===u&&(y.test(s.charAt(D))?(te=s.charAt(D),D++):(te=u,be===0&&Ge(Ji)));s.charCodeAt(D)===39?(te=Ce,D++):(te=u,be===0&&Ge(et)),te!==u?k=dre(B):(D=k,k=u)}else D=k,k=u;return k}function Hse(){var k;return(k=Wse())===u&&(k=Jse()),k}function Wse(){var k,G,B,te,We;if(k=D,m_()!==u)if(xe(),(G=dr())!==u){for(xe(),B=[],te=d_();te!==u;)B.push(te),te=d_();te=xe(),(We=y_())!==u?k=pre(G,B):(D=k,k=u)}else D=k,k=u;else D=k,k=u;if(k===u)if(k=D,m_()!==u)if(xe(),(G=dr())!==u){for(xe(),B=[],te=d_();te!==u;)B.push(te),te=d_();te=xe(),(We=FO())!==u?(xe(),y_()!==u?k=fre(G,B,We):(D=k,k=u)):(D=k,k=u)}else D=k,k=u;else D=k,k=u;return k}function Jse(){var k,G,B,te;if(k=D,m_()!==u){for(xe(),G=[],B=h_();B!==u;)G.push(B),B=h_();B=xe(),(te=y_())!==u?k=mre(G):(D=k,k=u)}else D=k,k=u;if(k===u)if(k=D,m_()!==u){for(xe(),G=[],B=h_();B!==u;)G.push(B),B=h_();B=xe(),(te=FO())!==u?(xe(),y_()!==u?k=yre(G,te):(D=k,k=u)):(D=k,k=u)}else D=k,k=u;return k}function h_(){var k,G,B;return k=D,ZO()!==u?(xe(),(G=dr())!==u?(xe(),XO()!==u?(xe(),(B=dr())!==u?k=gre(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k}function d_(){var k,G,B;return k=D,ZO()!==u?(xe(),(G=dr())!==u?(xe(),XO()!==u?(xe(),(B=dr())!==u?k=vre(G,B):(D=k,k=u)):(D=k,k=u)):(D=k,k=u)):(D=k,k=u),k}function FO(){var k,G;return k=D,gne()!==u?(xe(),(G=dr())!==u?k=bre(G):(D=k,k=u)):(D=k,k=u),k}function Yse(){var k,G,B,te;return k=D,(G=Kse())!==u?(B=D,be++,te=Z9(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=wre(G):(D=k,k=u)):(D=k,k=u),k}function Kse(){var k,G,B,te;return k=D,(G=p_())!==u&&(B=LO())!==u&&(te=RO())!==u?k=_re(G,B,te):(D=k,k=u),k===u&&(k=D,(G=p_())!==u&&(B=LO())!==u?k=xre(G,B):(D=k,k=u),k===u&&(k=D,(G=p_())!==u&&(B=RO())!==u?k=Sre(G,B):(D=k,k=u),k===u&&(k=D,(G=p_())!==u&&(G=Ire(G)),k=G))),k}function p_(){var k,G,B;return(k=Qd())===u&&(k=D,s.charCodeAt(D)===45?(G=ie,D++):(G=u,be===0&&Ge(he)),G===u&&(s.charCodeAt(D)===43?(G=ee,D++):(G=u,be===0&&Ge(re))),G!==u&&(B=Qd())!==u?k=Ere(G,B):(D=k,k=u)),k}function LO(){var k,G,B;return k=D,s.charCodeAt(D)===46?(G=Oe,D++):(G=u,be===0&&Ge(ci)),G!==u?((B=Qd())===u&&(B=null),k=Mre(B)):(D=k,k=u),k}function RO(){var k,G,B;return k=D,(G=Zse())!==u&&(B=Qd())!==u?k=Tre(G,B):(D=k,k=u),k}function Qd(){var k,G;if(k=[],(G=NO())!==u)for(;G!==u;)k.push(G),G=NO();else k=u;return k!==u&&(k=Cre(k)),k}function NO(){var k;return w.test(s.charAt(D))?(k=s.charAt(D),D++):(k=u,be===0&&Ge(Pt)),k}function Zse(){var k,G,B;return k=D,I.test(s.charAt(D))?(G=s.charAt(D),D++):(G=u,be===0&&Ge(Ft)),G!==u?(M.test(s.charAt(D))?(B=s.charAt(D),D++):(B=u,be===0&&Ge(vt)),B===u&&(B=null),k=Are(G,B)):(D=k,k=u),k}function Xse(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===je?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(bi)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=G=[G,B]:(D=k,k=u)):(D=k,k=u),k}function Qse(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===De?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(ft)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=G=[G,B]:(D=k,k=u)):(D=k,k=u),k}function ene(){var k,G,B,te;return k=D,s.substr(D,5).toLowerCase()===nt?(G=s.substr(D,5),D+=5):(G=u,be===0&&Ge(an)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=G=[G,B]:(D=k,k=u)):(D=k,k=u),k}function eI(){var k,G,B,te;return k=D,s.substr(D,2).toLowerCase()===mt?(G=s.substr(D,2),D+=2):(G=u,be===0&&Ge(Mt)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=$re():(D=k,k=u)):(D=k,k=u),k}function DO(){var k,G,B,te;return k=D,s.substr(D,2).toLowerCase()===ct?(G=s.substr(D,2),D+=2):(G=u,be===0&&Ge(Gr)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=kre():(D=k,k=u)):(D=k,k=u),k}function jO(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===dt?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(zt)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Ore():(D=k,k=u)):(D=k,k=u),k}function tne(){var k,G,B,te;return k=D,s.substr(D,6).toLowerCase()===Nt?(G=s.substr(D,6),D+=6):(G=u,be===0&&Ge(Vc)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Pre():(D=k,k=u)):(D=k,k=u),k}function zg(){var k,G,B,te;return k=D,s.substr(D,3).toLowerCase()===Mr?(G=s.substr(D,3),D+=3):(G=u,be===0&&Ge(Gc)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Fre():(D=k,k=u)):(D=k,k=u),k}function f_(){var k,G,B,te;return k=D,s.substr(D,3).toLowerCase()===nn?(G=s.substr(D,3),D+=3):(G=u,be===0&&Ge(Uc)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Lre():(D=k,k=u)):(D=k,k=u),k}function zO(){var k,G,B,te;return k=D,s.substr(D,2).toLowerCase()===ks?(G=s.substr(D,2),D+=2):(G=u,be===0&&Ge(os)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Rre():(D=k,k=u)):(D=k,k=u),k}function VO(){var k,G,B,te;return k=D,s.substr(D,7).toLowerCase()===oo?(G=s.substr(D,7),D+=7):(G=u,be===0&&Ge(q9)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Nre():(D=k,k=u)):(D=k,k=u),k}function tI(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===$n?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(B9)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Dre():(D=k,k=u)):(D=k,k=u),k}function ine(){var k,G,B,te;return k=D,s.substr(D,3).toLowerCase()===Os?(G=s.substr(D,3),D+=3):(G=u,be===0&&Ge(le)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=jre():(D=k,k=u)):(D=k,k=u),k}function rne(){var k,G,B,te;return k=D,s.substr(D,9).toLowerCase()===wa?(G=s.substr(D,9),D+=9):(G=u,be===0&&Ge(Me)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=zre():(D=k,k=u)):(D=k,k=u),k}function sne(){var k,G,B,te;return k=D,s.substr(D,7).toLowerCase()===_a?(G=s.substr(D,7),D+=7):(G=u,be===0&&Ge(Fe)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Vre():(D=k,k=u)):(D=k,k=u),k}function GO(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===ao?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(xt)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Gre():(D=k,k=u)):(D=k,k=u),k}function nne(){var k,G,B,te;return k=D,s.substr(D,8).toLowerCase()===fu?(G=s.substr(D,8),D+=8):(G=u,be===0&&Ge(Ur)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Ure():(D=k,k=u)):(D=k,k=u),k}function UO(){var k,G,B,te;return k=D,s.substr(D,9).toLowerCase()===Yd?(G=s.substr(D,9),D+=9):(G=u,be===0&&Ge(Yi)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=qre():(D=k,k=u)):(D=k,k=u),k}function qO(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===mu?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(On)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Bre():(D=k,k=u)):(D=k,k=u),k}function one(){var k,G,B,te;return k=D,s.substr(D,7).toLowerCase()===Kd?(G=s.substr(D,7),D+=7):(G=u,be===0&&Ge($0)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Hre():(D=k,k=u)):(D=k,k=u),k}function ane(){var k,G,B,te;return k=D,s.substr(D,8).toLowerCase()===yu?(G=s.substr(D,8),D+=8):(G=u,be===0&&Ge(Cte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Wre():(D=k,k=u)):(D=k,k=u),k}function lne(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===Zd?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(Ate)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Jre():(D=k,k=u)):(D=k,k=u),k}function une(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===Xd?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge($te)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Yre():(D=k,k=u)):(D=k,k=u),k}function cne(){var k,G,B,te;return k=D,s.substr(D,2).toLowerCase()===zc?(G=s.substr(D,2),D+=2):(G=u,be===0&&Ge(kte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Kre():(D=k,k=u)):(D=k,k=u),k}function hne(){var k,G,B,te;return k=D,s.substr(D,7).toLowerCase()===Wi?(G=s.substr(D,7),D+=7):(G=u,be===0&&Ge(Ote)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Zre():(D=k,k=u)):(D=k,k=u),k}function dne(){var k,G,B,te;return k=D,s.substr(D,8).toLowerCase()===Q?(G=s.substr(D,8),D+=8):(G=u,be===0&&Ge(Pte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Xre():(D=k,k=u)):(D=k,k=u),k}function pne(){var k,G,B,te;return k=D,s.substr(D,5).toLowerCase()===Tr?(G=s.substr(D,5),D+=5):(G=u,be===0&&Ge(Fte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=Qre():(D=k,k=u)):(D=k,k=u),k}function fne(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===kn?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(Lte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=ese():(D=k,k=u)):(D=k,k=u),k}function mne(){var k,G,B,te;return k=D,s.substr(D,7).toLowerCase()===Et?(G=s.substr(D,7),D+=7):(G=u,be===0&&Ge(Rte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=tse():(D=k,k=u)):(D=k,k=u),k}function yne(){var k,G,B,te;return k=D,s.substr(D,2).toLowerCase()===Ci?(G=s.substr(D,2),D+=2):(G=u,be===0&&Ge(Nte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=ise():(D=k,k=u)):(D=k,k=u),k}function BO(){var k,G,B,te;return k=D,s.substr(D,8).toLowerCase()===Ps?(G=s.substr(D,8),D+=8):(G=u,be===0&&Ge(Dte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=rse():(D=k,k=u)):(D=k,k=u),k}function HO(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===Fs?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(jte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=sse():(D=k,k=u)):(D=k,k=u),k}function WO(){var k,G,B,te;return k=D,s.substr(D,5).toLowerCase()===Ls?(G=s.substr(D,5),D+=5):(G=u,be===0&&Ge(zte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=nse():(D=k,k=u)):(D=k,k=u),k}function JO(){var k,G,B,te;return k=D,s.substr(D,3).toLowerCase()===on?(G=s.substr(D,3),D+=3):(G=u,be===0&&Ge(Vte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=ose():(D=k,k=u)):(D=k,k=u),k}function YO(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===Rs?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(Gte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=ase():(D=k,k=u)):(D=k,k=u),k}function KO(){var k,G,B,te;return k=D,s.substr(D,6).toLowerCase()===gu?(G=s.substr(D,6),D+=6):(G=u,be===0&&Ge(Ute)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=lse():(D=k,k=u)):(D=k,k=u),k}function ep(){var k,G,B,te;return k=D,s.substr(D,6).toLowerCase()===xa?(G=s.substr(D,6),D+=6):(G=u,be===0&&Ge(qte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=use():(D=k,k=u)):(D=k,k=u),k}function m_(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===Le?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(Bte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=cse():(D=k,k=u)):(D=k,k=u),k}function y_(){var k,G,B,te;return k=D,s.substr(D,3).toLowerCase()===wl?(G=s.substr(D,3),D+=3):(G=u,be===0&&Ge(Hte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=hse():(D=k,k=u)):(D=k,k=u),k}function ZO(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===p?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(Wte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=dse():(D=k,k=u)):(D=k,k=u),k}function XO(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===P?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(Jte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=pse():(D=k,k=u)):(D=k,k=u),k}function gne(){var k,G,B,te;return k=D,s.substr(D,4).toLowerCase()===x?(G=s.substr(D,4),D+=4):(G=u,be===0&&Ge(Yte)),G!==u?(B=D,be++,te=bt(),be--,te===u?B=void 0:(D=B,B=u),B!==u?k=fse():(D=k,k=u)):(D=k,k=u),k}function g_(){var k;return s.charCodeAt(D)===44?(k=d,D++):(k=u,be===0&&Ge(Kte)),k}function vs(){var k;return s.charCodeAt(D)===40?(k=l,D++):(k=u,be===0&&Ge(Zte)),k}function bs(){var k;return s.charCodeAt(D)===41?(k=n,D++):(k=u,be===0&&Ge(Xte)),k}function xe(){var k,G;for(k=[],G=QO();G!==u;)k.push(G),G=QO();return k}function QO(){var k;return T.test(s.charAt(D))?(k=s.charAt(D),D++):(k=u,be===0&&Ge(Qte)),k}function vne(){var k,G,B,te;if(k=D,(G=$O())!==u&&(G=mse(G)),(k=G)===u)if(k=D,s.charCodeAt(D)===96?(G=a,D++):(G=u,be===0&&Ge(bO)),G!==u){if(B=[],$.test(s.charAt(D))?(te=s.charAt(D),D++):(te=u,be===0&&Ge(wO)),te!==u)for(;te!==u;)B.push(te),$.test(s.charAt(D))?(te=s.charAt(D),D++):(te=u,be===0&&Ge(wO));else B=u;B!==u?(s.charCodeAt(D)===96?(te=a,D++):(te=u,be===0&&Ge(bO)),te!==u?k=yse(B):(D=k,k=u)):(D=k,k=u)}else D=k,k=u;return k}function bne(k,G){return{type:"unary-expression",operator:k,expr:G}}function eP(k,G,B,te){var We={type:"binary-expression",operator:k,left:G,right:B};return te!==void 0&&(We.escape=te),We}function wne(k,G){for(var B=[k],te=0;te<G.length;te++)B.push(G[te][3]);return B}function _ne(k,G,B){return wne(k,G)}function Vg(k,G){for(var B=k,te=0;te<G.length;te++)B=eP(G[te][1],B,G[te][3]);return B}if((c=S())!==u&&D===s.length)return c;throw c!==u&&D<s.length&&Ge(gse()),vse(H9,_l<s.length?s.charAt(_l):null,_l<s.length?SO(_l,_l+1):SO(_l,_l))}return e(t,Error),t.prototype.format=function(s){var o="Error: "+this.message;if(this.location){var c,u=null;for(c=0;c<s.length;c++)if(s[c].source===this.location.source){u=s[c].text.split(/\r\n|\n|\r/g);break}var g=this.location.start,b=this.location.source+":"+g.line+":"+g.column;if(u){var S=this.location.end,E=i("",g.line.toString().length," "),A=u[g.line-1],O=(g.line===S.line?S.column:A.length+1)-g.column||1;o+=`
 --> `+b+`
`+E+` |
`+g.line+" | "+A+`
`+E+" | "+i("",g.column-1," ")+i("",O,"^")}else o+=`
 at `+b}return o},t.buildMessage=function(s,o){var c={literal:function(O){return'"'+g(O.text)+'"'},class:function(O){var L=O.parts.map(function(N){return Array.isArray(N)?b(N[0])+"-"+b(N[1]):b(N)});return"["+(O.inverted?"^":"")+L.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(O){return O.description}};function u(O){return O.charCodeAt(0).toString(16).toUpperCase()}function g(O){return O.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+u(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+u(L)})}function b(O){return O.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+u(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+u(L)})}function S(O){return c[O.type](O)}function E(O){var L,N,z=O.map(S);if(z.sort(),z.length>0){for(L=1,N=1;L<z.length;L++)z[L-1]!==z[L]&&(z[N]=z[L],N++);z.length=N}switch(z.length){case 1:return z[0];case 2:return z[0]+" or "+z[1];default:return z.slice(0,-1).join(", ")+", or "+z[z.length-1]}}function A(O){return O?'"'+g(O)+'"':"end of input"}return"Expected "+E(s)+" but "+A(o)+" found."},{SyntaxError:t,parse:r}},(eV={get exports(){return e6},set exports(e){e6=e}}).exports&&(eV.exports=tV());class UPe{static parse(t){return e6.parse(t)}}const Ree=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,qPe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,BPe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,HPe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,WPe=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,JPe=new Set(["current_timestamp","current_date","current_time"]);function pp(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}function x1(e,t,i="0",r="0",s="0",o="0",c="",u="0",g="0"){if(c==="+"||c==="-"){const b=`${pp(parseInt(e,10),4)}-${pp(parseInt(t,10),2)}-${pp(parseInt(i,10),2)}`;let S="";parseFloat(o)<10&&(S="0");const E=`${pp(parseInt(r,10),2)}:${pp(parseInt(s,10),2)}:${S+parseFloat(o).toString()}`,A=`${c}${pp(parseInt(u,10),2)}:${pp(parseInt(g,10),2)}`;return new Date(b+"T"+E+A)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(i,10),parseInt(r,10),parseInt(s,10),parseFloat(o))}class YPe{static makeBool(t){return Nee(t)}static featureValue(t,i,r,s){return Gee(t,i,r,s)}static equalsNull(t){return t===null}static applyLike(t,i,r){return s6(t,i,r)}static ensureArray(t){return i6(t)}static applyIn(t,i){return r6(t,i)}static currentDate(){const t=new Date;return t.setHours(0,0,0,0),t}static makeSqlInterval(t,i,r){return Qr.createFromValueAndQualifer(t,i,r)}static convertInterval(t){return t instanceof Qr?t.valueInMilliseconds():t}static currentTimestamp(){return new Date}static compare(t,i,r){return zee(t,i,r)}static calculate(t,i,r){return Vee(t,i,r)}static makeComparable(t){return ac(t)}static evaluateFunction(t,i){return rO(t,i)}static lookup(t,i){const r=i[t];return r===void 0?null:r}static between(t,i){return t==null||i[0]==null||i[1]==null?null:t>=i[0]&&t<=i[1]}static notbetween(t,i){return t==null||i[0]==null||i[1]==null?null:t<i[0]||t>i[1]}static ternaryNot(t){return nx(t)}static ternaryAnd(t,i){return Dee(t,i)}static ternaryOr(t,i){return jee(t,i)}}class N9{constructor(t,i){this.fieldsIndex=i,this._datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=UPe.parse(t);const{isStandardized:r,isAggregate:s,referencedFieldNames:o}=this._extractExpressionInfo(i);this._referencedFieldNames=o,this.isStandardized=r,this.isAggregate=s}static create(t,i){return new N9(t,i)}get fieldNames(){return this._referencedFieldNames}testSet(t,i=cf){const r={};for(const s of this.fieldNames)r[s]=t.map(o=>i.getAttribute(o,s));return!!this._evaluateNode(this.parseTree,{attributes:r},cf)}calculateValue(t,i=cf){const r=this._evaluateNode(this.parseTree,t,i);return r instanceof Qr?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(t,i=cf){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(t,this.parameters,i,this._datefields):Se("esri-csp-restrictions")?this.calculateValue(t,i):(this._compileMe(),this.parseTree._compiledVersion(t,this.parameters,i,this._datefields))}testFeature(t,i=cf){return!!this._evaluateNode(this.parseTree,t,i)}testFeatureCompiled(t,i=cf){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(t,this.parameters,i,this._datefields):Se("esri-csp-restrictions")?this.testFeature(t,i):(this._compileMe(),!!this.parseTree._compiledVersion(t,this.parameters,i,this._datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,t=>{t.type==="current-time"?this._hasDateFunctions=!0:t.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||JPe.has(t.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const t=new Set;return this._visitAll(this.parseTree,i=>{i.type==="function"&&t.add(i.name.toLowerCase())}),Array.from(t)}getExpressions(){const t=new Map;return this._visitAll(this.parseTree,i=>{if(i.type==="function"){const r=i.name.toLowerCase(),s=i.args.value[0];if(s.type==="column-reference"){const o=s.column,c=`${r}-${o}`;t.has(c)||t.set(c,{aggregateType:r,field:o})}}}),[...t.values()]}getVariables(){const t=new Set;return this._visitAll(this.parseTree,i=>{i.type==="parameter"&&t.add(i.value.toLowerCase())}),Array.from(t)}_compileMe(){const t="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",t).bind(YPe)}_extractExpressionInfo(t){const i=[],r=new Set;let s=!0,o=!0;return this._visitAll(this.parseTree,c=>{var u;switch(c.type){case"column-reference":{const g=t==null?void 0:t.get(c.column);let b,S;g?b=S=(u=g.name)!=null?u:"":(S=c.column,b=S.toLowerCase()),g&&g.name&&(g.type==="date"||g.type==="esriFieldTypeDate")&&(this._datefields[g.name]=1),r.has(b)||(r.add(b),i.push(S)),c.column=S;break}case"function":{const{name:g,args:b}=c,S=b.value.length;s&&(s=zPe(g,S)),o&&(o=RPe(g,S));break}}}),{referencedFieldNames:Array.from(i),isStandardized:s,isAggregate:o}}_visitAll(t,i){if(t!=null)switch(i(t),t.type){case"when-clause":this._visitAll(t.operand,i),this._visitAll(t.value,i);break;case"case-expression":for(const r of t.clauses)this._visitAll(r,i);t.format==="simple"&&this._visitAll(t.operand,i),t.else!==null&&this._visitAll(t.else,i);break;case"expression-list":for(const r of t.value)this._visitAll(r,i);break;case"unary-expression":this._visitAll(t.expr,i);break;case"binary-expression":this._visitAll(t.left,i),this._visitAll(t.right,i);break;case"function":this._visitAll(t.args,i)}}evaluateNodeToJavaScript(t){switch(t.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(t.value)+", "+JSON.stringify(t.qualifier)+","+JSON.stringify(t.op)+")";case"case-expression":{let i="";if(t.format==="simple"){const r="this.makeComparable("+this.evaluateNodeToJavaScript(t.operand)+")";i="( ";for(let s=0;s<t.clauses.length;s++)i+=" ("+r+" === this.makeComparable("+this.evaluateNodeToJavaScript(t.clauses[s].operand)+")) ? ("+this.evaluateNodeToJavaScript(t.clauses[s].value)+") : ";t.else!==null?i+=this.evaluateNodeToJavaScript(t.else):i+="null",i+=" )"}else{i="( ";for(let r=0;r<t.clauses.length;r++)i+=" this.makeBool("+this.evaluateNodeToJavaScript(t.clauses[r].operand)+")===true ? ("+this.evaluateNodeToJavaScript(t.clauses[r].value)+") : ";t.else!==null?i+=this.evaluateNodeToJavaScript(t.else):i+="null",i+=" )"}return i}case"parameter":return"this.lookup("+JSON.stringify(t.value.toLowerCase())+",lookups)";case"expression-list":{let i="[";for(const r of t.value)i!=="["&&(i+=","),i+=this.evaluateNodeToJavaScript(r);return i+="]",i}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(t.expr)+")";case"binary-expression":switch(t.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+" )";case"IS":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")";case"ISNOT":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(t.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(t.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(t.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+","+JSON.stringify(t.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(t.operator)+","+this.evaluateNodeToJavaScript(t.left)+","+this.evaluateNodeToJavaScript(t.right)+")"}throw new Error("Not Supported Operator "+t.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(t.value);case"date":return"(new Date("+iV(t.value).getTime().toString()+"))";case"timestamp":return"(new Date("+t6(t.value).getTime().toString()+"))";case"current-time":return t.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(t.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(t.name)+","+this.evaluateNodeToJavaScript(t.args)+")"}throw new Error("Unsupported sql syntax "+t.type)}_evaluateNode(t,i,r){switch(t.type){case"interval":{const s=this._evaluateNode(t.value,i,r);return Qr.createFromValueAndQualifer(s,t.qualifier,t.op)}case"case-expression":if(t.format==="simple"){const s=ac(this._evaluateNode(t.operand,i,r));for(let o=0;o<t.clauses.length;o++)if(s===ac(this._evaluateNode(t.clauses[o].operand,i,r)))return this._evaluateNode(t.clauses[o].value,i,r);if(t.else!==null)return this._evaluateNode(t.else,i,r)}else{for(let s=0;s<t.clauses.length;s++)if(Nee(this._evaluateNode(t.clauses[s].operand,i,r)))return this._evaluateNode(t.clauses[s].value,i,r);if(t.else!==null)return this._evaluateNode(t.else,i,r)}return null;case"parameter":return this.parameters[t.value.toLowerCase()];case"expression-list":{const s=[];for(const o of t.value)s.push(this._evaluateNode(o,i,r));return s}case"unary-expression":return nx(this._evaluateNode(t.expr,i,r));case"binary-expression":switch(t.operator){case"AND":return Dee(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"OR":return jee(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"IS":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(t.left,i,r)===null;case"ISNOT":if(t.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(t.left,i,r)!==null;case"IN":{const s=i6(this._evaluateNode(t.right,i,r));return r6(this._evaluateNode(t.left,i,r),s)}case"NOT IN":{const s=i6(this._evaluateNode(t.right,i,r));return nx(r6(this._evaluateNode(t.left,i,r),s))}case"BETWEEN":{const s=this._evaluateNode(t.left,i,r),o=this._evaluateNode(t.right,i,r);return s==null||o[0]==null||o[1]==null?null:s>=ac(o[0])&&s<=ac(o[1])}case"NOTBETWEEN":{const s=this._evaluateNode(t.left,i,r),o=this._evaluateNode(t.right,i,r);return s==null||o[0]==null||o[1]==null?null:s<ac(o[0])||s>ac(o[1])}case"LIKE":return s6(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r),t.escape);case"NOT LIKE":return nx(s6(this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r),t.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return zee(t.operator,this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r));case"-":case"+":case"*":case"/":case"||":return Vee(t.operator,this._evaluateNode(t.left,i,r),this._evaluateNode(t.right,i,r))}case"null":case"boolean":case"string":case"number":return t.value;case"date":return iV(t.value);case"timestamp":return t6(t.value);case"current-time":{const s=new Date;return t.mode==="date"&&s.setHours(0,0,0,0),s}case"column-reference":return Gee(i,t.column,this._datefields,r);case"data-type":return t.value;case"function":{const s=this._evaluateNode(t.args,i,r);return this.isAggregate?LPe(t.name,s):rO(t.name,s)}}throw new Error("Unsupported sql syntax "+t.type)}}function t6(e){let t=qPe.exec(e);if(t!==null){const[,i,r,s,o,c,u]=t;return x1(i,r,s,o,c,u)}if(t=BPe.exec(e),t!==null){const[,i,r,s,o,c,u,g,b,S]=t;return x1(i,r,s,o,c,u,g,b,S)}if(t=HPe.exec(e),t!==null){const[,i,r,s,o,c,u,g,b]=t;return x1(i,r,s,o,c,"0",u,g,b)}if(t=WPe.exec(e),t!==null){const[,i,r,s,o,c]=t;return x1(i,r,s,o,c)}if(t=Ree.exec(e),t!==null){const[,i,r,s]=t;return x1(i,r,s)}throw new Error("SQL Invalid Timestamp")}function iV(e){const t=Ree.exec(e);if(t===null)try{return t6(e)}catch{throw new Error("SQL Invalid Date")}const[,i,r,s]=t;return new Date(parseInt(i,10),parseInt(r,10)-1,parseInt(s,10))}function Nee(e){return e===!0}function i6(e){return Array.isArray(e)?e:[e]}function nx(e){return e!==null?e!==!0:null}function Dee(e,t){return e!=null&&t!=null?e===!0&&t===!0:e!==!1&&t!==!1&&null}function jee(e,t){return e!=null&&t!=null?e===!0||t===!0:e===!0||t===!0||null}function r6(e,t){if(e==null)return null;let i=!1;for(const r of t)if(r==null)i=null;else if(e===r){i=!0;break}return i}const rV="-[]/{}()*+?.\\^$|";var xf;function KPe(e,t){const i=t;let r="",s=xf.Normal;for(let o=0;o<e.length;o++){const c=e.charAt(o);switch(s){case xf.Normal:c===i?s=xf.Escaped:rV.includes(c)?r+="\\"+c:r+=c==="%"?".*":c==="_"?".":c;break;case xf.Escaped:rV.includes(c)?r+="\\"+c:r+=c,s=xf.Normal}}return new RegExp("^"+r+"$","m")}function s6(e,t,i){return e==null?null:KPe(t,i).test(e)}function ac(e){return e instanceof Date?e.valueOf():e}function zee(e,t,i){if(t==null||i==null)return null;const r=ac(t),s=ac(i);switch(e){case"<>":return r!==s;case"=":return r===s;case">":return r>s;case"<":return r<s;case">=":return r>=s;case"<=":return r<=s}}function Vee(e,t,i){if(e==="||")return rO("concat",[t,i]);if(t instanceof Qr)if(i instanceof Date)switch(e){case"+":return new Date(t.valueInMilliseconds()+i.getTime());case"-":return t.valueInMilliseconds()-i.getTime();case"*":return t.valueInMilliseconds()*i.getTime();case"/":return t.valueInMilliseconds()/i.getTime()}else if(i instanceof Qr)switch(e){case"+":return Qr.createFromMilliseconds(t.valueInMilliseconds()+i.valueInMilliseconds());case"-":return Qr.createFromMilliseconds(t.valueInMilliseconds()-i.valueInMilliseconds());case"*":return t.valueInMilliseconds()*i.valueInMilliseconds();case"/":return t.valueInMilliseconds()/i.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(i instanceof Qr)if(t instanceof Date)switch(e){case"+":return new Date(i.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-i.valueInMilliseconds());case"*":return t.getTime()*i.valueInMilliseconds();case"/":return t.getTime()/i.valueInMilliseconds()}else i=i.valueInMilliseconds();else if(t instanceof Date&&typeof i=="number")switch(i=24*i*60*60*1e3,t=t.getTime(),e){case"+":return new Date(t+i);case"-":return new Date(t-i);case"*":return new Date(t*i);case"/":return new Date(t/i)}else if(i instanceof Date&&typeof t=="number")switch(t=24*t*60*60*1e3,i=i.getTime(),e){case"+":return new Date(t+i);case"-":return new Date(t-i);case"*":return new Date(t*i);case"/":return new Date(t/i)}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i}}function ZPe(e){return e&&typeof e.attributes=="object"}function Gee(e,t,i,r){const s=r.getAttribute(e,t);return s!=null&&i[t]===1?new Date(s):s}(function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"})(xf||(xf={}));const cf={getAttribute:(e,t)=>(ZPe(e)?e.attributes:e)[t]};var Uee=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:N9,defaultAttributeAdapter:cf},Symbol.toStringTag,{value:"Module"}));class XPe{constructor(t,i){this._cache=new oC(t),this._invalidCache=new oC(i)}get(t,i){const r=`${i.uid}:${t}`,s=this._cache.get(r);if(s)return s;if(this._invalidCache.get(r)!==void 0)return null;try{const o=N9.create(t,i);return this._cache.put(r,o),o}catch{return this._invalidCache.put(r,null),null}}}const sO=new XPe(50,500),$d="feature-store:unsupported-query",qee=" as ",QPe=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function bVe(e,t){if(!t)return!0;const i=sO.get(t,e);if(!i)throw new de($d,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new de($d,"where clause is not standard",{where:t});return nO(e,i.fieldNames,"where clause contains missing fields"),!0}function wVe(e,t,i){if(!t)return!0;const r=sO.get(t,e);if(!r)throw new de($d,"invalid SQL expression",{having:t});if(!r.isAggregate)throw new de($d,"having does not contain a valid aggregate function",{having:t});const s=r.fieldNames;if(nO(e,s,"having contains missing fields"),!r.getExpressions().every(o=>{var b;const{aggregateType:c,field:u}=o,g=(b=e.get(u))==null?void 0:b.name;return i.some(S=>{var L;const{onStatisticField:E,statisticType:A}=S;return((L=e.get(E))==null?void 0:L.name)===g&&A.toLowerCase().trim()===c})}))throw new de($d,"expressions in having should also exist in outStatistics",{having:t});return!0}function Ov(e,t){return e?sO.get(e,t):null}function nO(e,t,i,r=!0){const s=[];for(const o of t)if(o!=="*"&&!e.has(o))if(r){const c=Bee(o);try{const u=Ov(c,e);if(!u)throw new de($d,"invalid SQL expression",{where:c});if(!u.isStandardized)throw new de($d,"expression is not standard",{clause:u});nO(e,u.fieldNames,"expression contains missing fields")}catch(u){const g=u&&u.details;if(g&&(g.clause||g.where))throw u;g&&g.missingFields?s.push(...g.missingFields):s.push(o)}}else s.push(o);if(s.length)throw new de($d,i,{missingFields:s})}function Bee(e){return e.split(qee)[0]}function eFe(e){return e.split(qee)[1]}function _Ve(e,t){const i=t.get(e);return!!i&&!QPe.has(i.type)}const sV=new It({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),nV=new It({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let Ba=class extends $e{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};v([Qe({classBreaksDef:"class-breaks-definition"})],Ba.prototype,"type",void 0),v([_({json:{write:!0}})],Ba.prototype,"breakCount",void 0),v([_({json:{write:!0}})],Ba.prototype,"classificationField",void 0),v([_({type:String,json:{read:sV.read,write:sV.write}})],Ba.prototype,"classificationMethod",void 0),v([_({json:{write:!0}})],Ba.prototype,"normalizationField",void 0),v([_({json:{read:nV.read,write:nV.write}})],Ba.prototype,"normalizationType",void 0),v([_({value:null,json:{write:!0}})],Ba.prototype,"standardDeviationInterval",null),v([_({value:null,json:{write:!0}})],Ba.prototype,"definedInterval",null),Ba=v([K("esri.rest.support.ClassBreaksDefinition")],Ba);const tFe=Ba,iFe=Ie.getLogger("esri.rest.support.generateRendererUtils");function Q0(e,t){return Number(e.toFixed(t))}function rFe(e){const{normalizationTotal:t}=e;return{classBreaks:sFe(e),normalizationTotal:t}}function sFe(e){var S;const t=e.definition,{classificationMethod:i,normalizationType:r,definedInterval:s}=t,o=(S=t.breakCount)!=null?S:1,c=[];let u=e.values;if(u.length===0)return[];u=u.sort((E,A)=>E-A);const g=u[0],b=u[u.length-1];if(i==="equal-interval")if(u.length>=o){const E=(b-g)/o;let A=g;for(let O=1;O<o;O++){const L=Q0(g+O*E,6);c.push({minValue:A,maxValue:L,label:Pn(A,L,r)}),A=L}c.push({minValue:A,maxValue:b,label:Pn(A,b,r)})}else u.forEach(E=>{c.push({minValue:E,maxValue:E,label:Pn(E,E,r)})});else if(i==="natural-breaks"){const E=nFe(u),A=e.valueFrequency||E.valueFrequency,O=oFe(E.uniqueValues,A,o);let L=g;for(let N=1;N<o;N++)if(E.uniqueValues.length>N){const z=Q0(E.uniqueValues[O[N]],6);c.push({minValue:L,maxValue:z,label:Pn(L,z,r)}),L=z}c.push({minValue:L,maxValue:b,label:Pn(L,b,r)})}else if(i==="quantile")if(u.length>=o&&g!==b){let E=g,A=Math.ceil(u.length/o),O=0;for(let L=1;L<o;L++){let N=A+O-1;N>u.length&&(N=u.length-1),N<0&&(N=0),c.push({minValue:E,maxValue:u[N],label:Pn(E,u[N],r)}),E=u[N],O+=A,A=Math.ceil((u.length-O)/(o-L))}c.push({minValue:E,maxValue:b,label:Pn(E,b,r)})}else{let E=-1;for(let A=0;A<u.length;A++){const O=u[A];O!==E&&(E=O,c.push({minValue:E,maxValue:O,label:Pn(E,O,r)}),E=O)}}else if(i==="standard-deviation"){const E=uFe(u),A=cFe(u,E);if(A===0)c.push({minValue:u[0],maxValue:u[0],label:Pn(u[0],u[0],r)});else{const O=lFe(g,b,o,E,A)*A;let L=0,N=g;for(let q=o;q>=1;q--){const Z=Q0(E-(q-.5)*O,6);c.push({minValue:N,maxValue:Z,label:Pn(N,Z,r)}),N=Z,L++}let z=Q0(E+.5*O,6);c.push({minValue:N,maxValue:z,label:Pn(N,z,r)}),N=z,L++;for(let q=1;q<=o;q++)z=L===2*o?b:Q0(E+(q+.5)*O,6),c.push({minValue:N,maxValue:z,label:Pn(N,z,r)}),N=z,L++}}else if(i==="defined-interval"){if(!s)return c;const E=u[0],A=u[u.length-1],O=Math.ceil((A-E)/s);let L=E;for(let N=1;N<O;N++){const z=Q0(E+N*s,6);c.push({minValue:L,maxValue:z,label:Pn(L,z,r)}),L=z}c.push({minValue:L,maxValue:A,label:Pn(L,A,r)})}return c}function Pn(e,t,i){let r=null;return r=e===t?i&&i==="percent-of-total"?e+"%":e.toString():i&&i==="percent-of-total"?e+"% - "+t+"%":e+" - "+t,r}function nFe(e){const t=[],i=[];let r=Number.MIN_VALUE,s=1,o=-1;for(let c=0;c<e.length;c++){const u=e[c];u===r?(s++,i[o]=s):u!==null&&(t.push(u),r=u,s=1,i.push(s),o++)}return{uniqueValues:t,valueFrequency:i}}function oFe(e,t,i){const r=e.length,s=[];i>r&&(i=r);for(let c=0;c<i;c++)s.push(Math.round(c*r/i-1));s.push(r-1);let o=oV(s,e,t,i);return aFe(o.mean,o.sdcm,s,e,t,i)&&(o=oV(s,e,t,i)),s}function oV(e,t,i,r){let s=[],o=[],c=[],u=0;const g=[],b=[];for(let O=0;O<r;O++){const L=iy(O,e,t,i);g.push(L.sbMean),b.push(L.sbSdcm),u+=b[O]}let S,E=u,A=!0;for(;A||u<E;){A=!1,s=[];for(let O=0;O<r;O++)s.push(e[O]);for(let O=0;O<r;O++)for(let L=e[O]+1;L<=e[O+1];L++)if(S=t[L],O>0&&L!==e[O+1]&&Math.abs(S-g[O])>Math.abs(S-g[O-1]))e[O]=L;else if(O<r-1&&e[O]!==L-1&&Math.abs(S-g[O])>Math.abs(S-g[O+1])){e[O+1]=L-1;break}E=u,u=0,o=[],c=[];for(let O=0;O<r;O++){o.push(g[O]),c.push(b[O]);const L=iy(O,e,t,i);g[O]=L.sbMean,b[O]=L.sbSdcm,u+=b[O]}}if(u>E){for(let O=0;O<r;O++)e[O]=s[O],g[O]=o[O],b[O]=c[O];u=E}return{mean:g,sdcm:b}}function aFe(e,t,i,r,s,o){let c=0,u=0,g=0,b=0,S=!0;for(let E=0;E<2&&S;E++){E===0&&(S=!1);for(let A=0;A<o-1;A++)for(;i[A+1]+1!==i[A+2];){i[A+1]=i[A+1]+1;const O=iy(A,i,r,s);g=O.sbMean,c=O.sbSdcm;const L=iy(A+1,i,r,s);if(b=L.sbMean,u=L.sbSdcm,!(c+u<t[A]+t[A+1])){i[A+1]=i[A+1]-1;break}t[A]=c,t[A+1]=u,e[A]=g,e[A+1]=b,S=!0}for(let A=o-1;A>0;A--)for(;i[A]!==i[A-1]+1;){i[A]=i[A]-1;const O=iy(A-1,i,r,s);g=O.sbMean,c=O.sbSdcm;const L=iy(A,i,r,s);if(b=L.sbMean,u=L.sbSdcm,!(c+u<t[A-1]+t[A])){i[A]=i[A]+1;break}t[A-1]=c,t[A]=u,e[A-1]=g,e[A]=b,S=!0}}return S}function lFe(e,t,i,r,s){let o=Math.max(r-e,t-r)/s/i;return o=o>=1?1:o>=.5?.5:.25,o}function uFe(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/=e.length,t}function cFe(e,t){let i=0;for(let r=0;r<e.length;r++){const s=e[r];i+=(s-t)*(s-t)}return i/=e.length,Math.sqrt(i)}function iy(e,t,i,r){let s=0,o=0;for(let g=t[e]+1;g<=t[e+1];g++){const b=r[g];s+=i[g]*b,o+=b}o<=0&&iFe.warn("Exception in Natural Breaks calculation");const c=s/o;let u=0;for(let g=t[e]+1;g<=t[e+1];g++)u+=r[g]*(i[g]-c)**2;return{sbMean:c,sbSdcm:u}}const hFe="<Null>",dFe="equal-interval",pFe=1,fFe=5,mFe=10,yFe=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,aV=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),gFe=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function cd(e){return e==null||typeof e=="string"&&!e?hFe:e}function Hee(e){const t=e.normalizationField!=null||e.normalizationType!=null,i=e.minValue!=null||e.maxValue!=null,r=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!i&&!r}function lV(e){const t=e.returnDistinct?[...new Set(e.values)]:e.values,i=t.filter(s=>s!=null).length,r={count:i};return e.supportsNullCount&&(r.nullcount=t.length-i),e.percentileParams&&(r.median=oO(t,e.percentileParams)),r}function n6(e){const{values:t,useSampleStdDev:i,supportsNullCount:r}=e;let s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,c=null,u=null,g=null,b=null,S=0;const E=e.minValue==null?-1/0:e.minValue,A=e.maxValue==null?1/0:e.maxValue;for(const L of t)Number.isFinite(L)?L>=E&&L<=A&&(c=c===null?L:c+L,s=Math.min(s,L),o=Math.max(o,L),S++):typeof L=="string"&&S++;if(S&&c!=null){u=c/S;let L=0;for(const N of t)Number.isFinite(N)&&N>=E&&N<=A&&(L+=(N-u)**2);b=i?S>1?L/(S-1):0:S>0?L/S:0,g=Math.sqrt(b)}else s=null,o=null;const O={avg:u,count:S,max:o,min:s,stddev:g,sum:c,variance:b};return r&&(O.nullcount=t.length-S),e.percentileParams&&(O.median=oO(t,e.percentileParams)),O}function oO(e,t){const{fieldType:i,value:r,orderBy:s,isDiscrete:o}=t,c=Wee(i,s==="desc");if((e=[...e].filter(O=>O!=null).sort((O,L)=>c(O,L))).length===0)return null;if(r<=0)return e[0];if(r>=1)return e[e.length-1];const u=(e.length-1)*r,g=Math.floor(u),b=g+1,S=u%1,E=e[g],A=e[b];return b>=e.length||o||typeof E=="string"||typeof A=="string"?E:E*(1-S)+A*S}function Wee(e,t){const i=t?1:-1,r=vFe(t),s=uV(t);if(!(!!e&&["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...aV].includes(e)))return(o,c)=>typeof o=="number"&&typeof c=="number"?r(o,c):typeof o=="string"&&typeof c=="string"?s(o,c):i;if(e==="esriFieldTypeDate")return(o,c)=>{const u=new Date(o).getTime(),g=new Date(c).getTime();return isNaN(u)||isNaN(g)?i:r(u,g)};if(aV.has(e))return(o,c)=>r(o,c);if(e==="esriFieldTypeString")return(o,c)=>s(o,c);if(e==="esriFieldTypeGUID"||e==="esriFieldTypeGlobalID"){const o=uV(t);return(c,u)=>o(cV(c),cV(u))}return t?(o,c)=>1:(o,c)=>-1}function JS(e,t,i){if(i){if(e==null)return t==null?0:1;if(t==null)return-1}else{if(e==null)return t==null?0:-1;if(t==null)return 1}return null}function uV(e){return e?(t,i)=>{const r=JS(t,i,!0);return r!=null?r:(t=t.toUpperCase())>(i=i.toUpperCase())?-1:t<i?1:0}:(t,i)=>{const r=JS(t,i,!1);return r!=null?r:(t=t.toUpperCase())<(i=i.toUpperCase())?-1:t>i?1:0}}function vFe(e){return e?(t,i)=>{const r=JS(t,i,!0);return r!=null?r:i-t}:(t,i)=>{const r=JS(t,i,!1);return r!=null?r:t-i}}function cV(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function bFe(e,t){let i;for(i in e)gFe.includes(i)&&(Number.isFinite(e[i])||(e[i]=null));return t&&["avg","stddev","variance"].forEach(r=>{e[r]!=null&&(e[r]=Math.ceil(e[r]))}),e}function wFe(e){const t={};for(let i of e)(i==null||typeof i=="string"&&i.trim()==="")&&(i=null),t[i]==null?t[i]={count:1,data:i}:t[i].count++;return{count:t}}function T4(e){return(e==null?void 0:e.type)!=="coded-value"?[]:e.codedValues.map(t=>t.code)}function _Fe(e,t,i,r){const s=e.count,o=[];if(i&&t){const c=[],u=T4(t[0]);for(const g of u)if(t[1]){const b=T4(t[1]);for(const S of b)if(t[2]){const E=T4(t[2]);for(const A of E)c.push(`${cd(g)}${r}${cd(S)}${r}${cd(A)}`)}else c.push(`${cd(g)}${r}${cd(S)}`)}else c.push(g);for(const g of c)s.hasOwnProperty(g)||(s[g]={data:g,count:0})}for(const c in s){const u=s[c];o.push({value:u.data,count:u.count,label:u.label})}return{uniqueValueInfos:o}}function xFe(e,t,i,r){let s=null;switch(t){case"log":e!==0&&(s=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(r)&&r!==0&&(s=e/r*100);break;case"field":Number.isFinite(i)&&i!==0&&(s=e/i);break;case"natural-log":e>0&&(s=Math.log(e));break;case"square-root":e>0&&(s=e**.5)}return s}function Jee(e,t){const i=IFe({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||fFe});return e=SFe(e,t.minValue,t.maxValue),rFe({definition:i,values:e,normalizationTotal:t.normalizationTotal})}function SFe(e,t,i){const r=t!=null?t:-1/0,s=i!=null?i:1/0;return e.filter(o=>Number.isFinite(o)&&o>=r&&o<=s)}function IFe(e){const{breakCount:t,field:i,normalizationField:r,normalizationType:s}=e,o=e.classificationMethod||dFe,c=o==="standard-deviation"?e.standardDeviationInterval||pFe:void 0;return new tFe({breakCount:t,classificationField:i,classificationMethod:o,normalizationField:s==="field"?r:void 0,normalizationType:s,standardDeviationInterval:c})}function EFe(e,t){let i=e.classBreaks;const r=i.length,s=i[0].minValue,o=i[r-1].maxValue,c=t==="standard-deviation",u=yFe;return i=i.map(g=>{var E,A;const b=g.label,S={minValue:g.minValue,maxValue:g.maxValue,label:b};if(c&&b){const O=(A=(E=b.match(u))==null?void 0:E.map(L=>+L.trim()))!=null?A:[];O.length===2?(S.minStdDev=O[0],S.maxStdDev=O[1],O[0]<0&&O[1]>0&&(S.hasAvg=!0)):O.length===1&&(b.includes("<")?(S.minStdDev=null,S.maxStdDev=O[0]):b.includes(">")&&(S.minStdDev=O[0],S.maxStdDev=null))}return S}),{minValue:s,maxValue:o,classBreakInfos:i,normalizationTotal:e.normalizationTotal}}function MFe(e,t){var u,g;const i=TFe(e,t),r=i.intervals,s=(u=i.min)!=null?u:0,o=(g=i.max)!=null?g:0,c=r.map((b,S)=>({minValue:r[S][0],maxValue:r[S][1],count:0}));for(const b of e)if(b!=null&&b>=s&&b<=o){const S=CFe(r,b);S>-1&&c[S].count++}return{bins:c,minValue:s,maxValue:o,normalizationTotal:t.normalizationTotal}}function TFe(e,t){var L,N;const{field:i,classificationMethod:r,standardDeviationInterval:s,normalizationType:o,normalizationField:c,normalizationTotal:u,minValue:g,maxValue:b}=t,S=t.numBins||mFe;let E=null,A=null,O=null;if((!r||r==="equal-interval")&&!o){if(g!=null&&b!=null)E=g,A=b;else{const z=n6({values:e,minValue:g,maxValue:b,useSampleStdDev:!o,supportsNullCount:Hee({normalizationType:o,normalizationField:c,minValue:g,maxValue:b})});E=(L=z.min)!=null?L:null,A=(N=z.max)!=null?N:null}O=AFe(E!=null?E:0,A!=null?A:0,S)}else{const{classBreaks:z}=Jee(e,{field:i,normalizationType:o,normalizationField:c,normalizationTotal:u,classificationMethod:r,standardDeviationInterval:s,minValue:g,maxValue:b,numClasses:S});E=z[0].minValue,A=z[z.length-1].maxValue,O=z.map(q=>[q.minValue,q.maxValue])}return{min:E,max:A,intervals:O}}function CFe(e,t){let i=-1;for(let r=e.length-1;r>=0;r--)if(t>=e[r][0]){i=r;break}return i}function AFe(e,t,i){const r=(t-e)/i,s=[];let o,c=e;for(let u=1;u<=i;u++)o=c+r,o=Number(o.toFixed(16)),s.push([c,u===i?t:o]),c=o;return s}class F2{constructor(t,i,r){var o;this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=(o=t.returnDistinctValues)!=null?o:!1,this.fieldsIndex=r,this.featureAdapter=i;const s=t.outFields;if(s&&!s.includes("*")){this.outFields=s;let c=0;for(const u of s){const g=Bee(u),b=this.fieldsIndex.get(g),S=b?null:Ov(g,r),E=b?b.name:eFe(u)||"FIELD_EXP_"+c++;this._fieldDataCache.set(u,{alias:E,clause:S})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(i=>this.getAttributes(i)),this._returnDistinctMap.size):t.length}getAttributes(t){const i=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(i)}getFieldValue(t,i,r){var c;const s=r?r.name:i;let o=null;return this._fieldDataCache.has(s)?o=(c=this._fieldDataCache.get(s))==null?void 0:c.clause:r||(o=Ov(i,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:o})),r?this.featureAdapter.getAttribute(t,s):o==null?void 0:o.calculateValue(t,this.featureAdapter)}getDataValue(t,i){const r=i.normalizationType,s=i.normalizationTotal;let o=i.field&&this.getFieldValue(t,i.field,this.fieldsIndex.get(i.field));if(i.field2&&(o=`${cd(o)}${i.fieldDelimiter}${cd(this.getFieldValue(t,i.field2,this.fieldsIndex.get(i.field2)))}`,i.field3&&(o=`${o}${i.fieldDelimiter}${cd(this.getFieldValue(t,i.field3,this.fieldsIndex.get(i.field3)))}`)),r&&Number.isFinite(o)){const c=r==="field"&&i.normalizationField?this.getFieldValue(t,i.normalizationField,this.fieldsIndex.get(i.normalizationField)):null;o=xFe(o,r,c,s)}return o}getExpressionValue(t,i,r,s){const o={attributes:this.featureAdapter.getAttributes(t),layer:{fields:this.fieldsIndex.fields}},c=s.createExecContext(o,r);return s.executeFunction(i,c)}getExpressionValues(t,i,r,s){const o={fields:this.fieldsIndex.fields};return t.map(c=>{const u={attributes:this.featureAdapter.getAttributes(c),layer:o},g=s.createExecContext(u,r);return s.executeFunction(i,g)})}validateItem(t,i){var r,s,o;return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:Ov(i,this.fieldsIndex)}),(o=(s=(r=this._fieldDataCache.get(i))==null?void 0:r.clause)==null?void 0:s.testFeature(t,this.featureAdapter))!=null?o:!1}validateItems(t,i){var r,s,o;return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:Ov(i,this.fieldsIndex)}),(o=(s=(r=this._fieldDataCache.get(i))==null?void 0:r.clause)==null?void 0:s.testSet(t,this.featureAdapter))!=null?o:!1}_processAttributesForOutFields(t){const i=this.outFields;if(!i||!i.length)return this.featureAdapter.getAttributes(t);const r={};for(const s of i){const{alias:o,clause:c}=this._fieldDataCache.get(s);r[o]=c?c.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,o)}return r}_processAttributesForDistinctValues(t){if(ae(t)||!this.returnDistinctValues)return t;const i=this.outFields,r=[];if(i)for(const c of i){const{alias:u}=this._fieldDataCache.get(c);r.push(t[u])}else for(const c in t)r.push(t[c]);const s=`${(i||["*"]).join(",")}=${r.join(",")}`;let o=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++o),o>1?null:t}}const Yee={convertToGEGeometry:$Fe,exportPoint:OFe,exportPolygon:FFe,exportPolyline:RFe,exportMultipoint:DFe,exportExtent:zFe};function $Fe(e,t){return t==null?null:e.convertJSONToGeometry(t)}class kFe{constructor(t,i,r){this.x=t,this.y=i,this.spatialReference=r,this.z=void 0,this.m=void 0}}function OFe(e,t,i){const r=new kFe(e.getPointX(t),e.getPointY(t),i),s=e.hasZ(t),o=e.hasM(t);return s&&(r.z=e.getPointZ(t)),o&&(r.m=e.getPointM(t)),r}class PFe{constructor(t,i,r,s){this.rings=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function FFe(e,t,i){return new PFe(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class LFe{constructor(t,i,r,s){this.paths=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function RFe(e,t,i){return new LFe(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}class NFe{constructor(t,i,r,s){this.points=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}}function DFe(e,t,i){return new NFe(e.exportPoints(t),i,e.hasZ(t),e.hasM(t))}class jFe{constructor(t,i,r,s,o){this.xmin=t,this.ymin=i,this.xmax=r,this.ymax=s,this.spatialReference=o,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function zFe(e,t,i){const r=e.hasZ(t),s=e.hasM(t),o=new jFe(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),i);if(r){const c=e.getZExtent(t);o.zmin=c.vmin,o.zmax=c.vmax}if(s){const c=e.getMExtent(t);o.mmin=c.vmin,o.mmax=c.vmax}return o}const C4=[0,0];function Kee(e,t){if(!t)return null;if("x"in t){const i={x:0,y:0};return[i.x,i.y]=e(t.x,t.y,C4),t.z!=null&&(i.z=t.z),t.m!=null&&(i.m=t.m),i}if("xmin"in t){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=e(t.xmin,t.ymin,C4),[i.xmax,i.ymax]=e(t.xmax,t.ymax,C4),t.hasZ&&(i.zmin=t.zmin,i.zmax=t.zmax,i.hasZ=!0),t.hasM&&(i.mmin=t.mmin,i.mmax=t.mmax,i.hasM=!0),i}return"rings"in t?{rings:hV(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:hV(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:Zee(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function hV(e,t){const i=[];for(const r of e)i.push(Zee(r,t));return i}function Zee(e,t){const i=[];for(const r of e){const s=t(r[0],r[1],[0,0]);i.push(s),r.length>2&&s.push(r[2]),r.length>3&&s.push(r[3])}return i}async function Xee(e,t){if(!e||!t)return;const i=Array.isArray(e)?e.map(r=>U(r.geometry)?r.geometry.spatialReference:null).filter(U):[e];await R7(i.map(r=>({source:r,dest:t})))}const Qee=Kee.bind(null,Mf),ete=Kee.bind(null,hy);function YS(e,t,i,r){if(!e||(i||(i=t,t=e.spatialReference),!Sr(t)||!Sr(i)||Hi(t,i)))return e;if(cy(t,i)){const s=nu(i)?Qee(e):ete(e);return s.spatialReference=i,s}return Vx(Yee,[e],t,i,null,r)[0]}class VFe{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,i,r){if(!t||!t.length||!i||!r||Hi(i,r))return t;const s={geometries:t,inSpatialReference:i,outSpatialReference:r,resolve:null};return this._jobs.push(s),new Promise(o=>{s.resolve=o,this._timer===null&&(this._timer=setTimeout(this._process,10))})}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:i,inSpatialReference:r,outSpatialReference:s,resolve:o}=t;cy(r,s)?nu(s)?o(i.map(Qee)):o(i.map(ete)):o(Vx(Yee,i,r,s,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const GFe=new VFe;function xVe(e,t,i){return GFe.push(e,t,i)}function UFe(e,t,i){return{objectId:e,target:t,distance:i,type:"vertex"}}function qFe(e,t,i,r,s,o=!1){return{objectId:e,target:t,distance:i,type:"edge",start:r,end:s,draped:o}}const BFe=new It({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),dV=Object.freeze({}),pV=new gs,HFe=new gs,o6=new gs,Tu={esriGeometryPoint:AC,esriGeometryPolyline:fk,esriGeometryPolygon:mk,esriGeometryMultipoint:pk};function fV(e,t,i,r=e.hasZ,s=e.hasM){if(ae(t))return null;const o=e.hasZ&&r,c=e.hasM&&s;if(i){const u=Wb(o6,t,e.hasZ,e.hasM,"esriGeometryPoint",i,r,s);return AC(u,o,c)}return AC(t,o,c)}function A4(e,t,i,r,s,o,c=t,u=i){var E,A,O,L,N,z;const g=t&&c,b=i&&u,S=U(r)?"coords"in r?r:r.geometry:null;if(ae(S))return null;if(s){let q=zwe(HFe,S,t,i,e,s,c,u);return o&&(q=Wb(o6,q,g,b,e,o)),(A=(E=Tu[e])==null?void 0:E.call(Tu,q,g,b))!=null?A:null}if(o){const q=Wb(o6,S,t,i,e,o,c,u);return(L=(O=Tu[e])==null?void 0:O.call(Tu,q,g,b))!=null?L:null}return Gwe(pV,S,t,i,c,u),(z=(N=Tu[e])==null?void 0:N.call(Tu,pV,g,b))!=null?z:null}async function SVe(e,t,i){const{outFields:r,orderByFields:s,groupByFieldsForStatistics:o,outStatistics:c}=e;if(r)for(let u=0;u<r.length;u++)r[u]=r[u].trim();if(s)for(let u=0;u<s.length;u++)s[u]=s[u].trim();if(o)for(let u=0;u<o.length;u++)o[u]=o[u].trim();if(c)for(let u=0;u<c.length;u++)c[u].onStatisticField&&(c[u].onStatisticField=c[u].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),WFe(e,t,i)}async function WFe(e,t,i){var o;if(!e)return null;let{where:r}=e;if(e.where=r=r&&r.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let s=await YFe(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:c}=e.geometry;s=xM(s),s.spatialReference=c}if(s){await Xee(s.spatialReference,i),s=JFe(s,i);const c=(await ak(kc(s)))[0];if(ae(c))throw dV;const u="quantizationParameters"in e&&((o=e.quantizationParameters)==null?void 0:o.tolerance)||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,g=u&&tte(s,i)?{densificationStep:8*u}:void 0,b=c.toJSON(),S=await YS(b,b.spatialReference,i,g);if(!S)throw dV;S.spatialReference=i,e.geometry=S}return e}function tte(e,t){if(!e)return!1;const i=e.spatialReference;return(Mw(e)||vc(e)||Tw(e))&&!Hi(i,t)&&!uu(i,t)}function JFe(e,t){const i=e.spatialReference;return tte(e,t)&&Mw(e)?{spatialReference:i,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function YFe(e){const{distance:t,units:i}=e,r=e.geometry;if(t==null||"vertexAttributes"in r)return r;const s=r.spatialReference,o=i?BFe.fromJSON(i):dg(s),c=s&&(d5(s)||nu(s))?r:await Xee(s,lM).then(()=>YS(r,lM));return(await KFe())(c.spatialReference,c,t,o)}async function KFe(){return(await pe(()=>import("./geometryEngineJSON.ba8b71fe.js"),["assets/geometryEngineJSON.ba8b71fe.js","assets/geometryEngineJSON.365eabb9.js"])).geodesicBuffer}function $4(e){return e&&ite in e?JSON.parse(JSON.stringify(e,ZFe)):e}const ite="_geVersion",ZFe=(e,t)=>e!==ite?t:void 0;class IVe{constructor(t,i,r){this.items=t,this.query=i,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.fieldsIndex=r.fieldsIndex,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.featureAdapter=r.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const t=new F2(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:i,having:r,outStatistics:s}=this.query;if(!(i==null?void 0:i.length))return 1;const c=new Map,u=new Map,g=new Set;for(const b of s){const{statisticType:S}=b,E=S!=="exceedslimit"?b.onStatisticField:void 0;if(!u.has(E)){const O=[];for(const L of i){const N=this._getAttributeValues(t,L,c);O.push(N)}u.set(E,this._calculateUniqueValues(O,t.returnDistinctValues))}const A=u.get(E);for(const O in A){const{data:L,items:N}=A[O],z=L.join(",");r&&!t.validateItems(N,r)||g.add(z)}}return g.size}async createQueryResponse(){let t;if(this.query.outStatistics?t=this.query.outStatistics.some(i=>i.statisticType==="exceedslimit")?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):t=this._createFeatureQueryResponse(this.query),this.query.returnQueryGeometry){const i=this.query.geometry;Sr(this.query.outSR)&&!Hi(i.spatialReference,this.query.outSR)?t.queryGeometry=$4({spatialReference:this.query.outSR,...YS(i,i.spatialReference,this.query.outSR)}):t.queryGeometry=$4({spatialReference:this.query.outSR,...i})}return t}createSnappingResponse(t,i){const r=this.featureAdapter,s=mV(this.hasZ,this.hasM),{point:o,mode:c}=t,u=typeof t.distance=="number"?t.distance:t.distance.x,g=typeof t.distance=="number"?t.distance:t.distance.y,b={candidates:[]},S=this.geometryType==="esriGeometryPolygon",E=this._getPointCreator(c,this.spatialReference,i),A=new yV(null,0),O=new yV(null,0),L={x:0,y:0,z:0};for(const N of this.items){const z=r.getGeometry(N);if(ae(z))continue;const{coords:q,lengths:Z}=z;if(A.coords=q,O.coords=q,t.types&ng.EDGE){let ee=0;for(let ie=0;ie<Z.length;ie++){const ne=Z[ie];for(let oe=0;oe<ne;oe++,ee+=s){const me=A;if(me.coordsIndex=ee,oe!==ne-1){const fe=O;fe.coordsIndex=ee+s;const Ce=L;XFe(L,o,me,fe);const _e=(o.x-Ce.x)/u,Ae=(o.y-Ce.y)/g,Oe=_e*_e+Ae*Ae;Oe<=1&&b.candidates.push(qFe(r.getObjectId(N),E(Ce),Math.sqrt(Oe),E(me),E(fe)))}}}}if(t.types&ng.VERTEX){const ee=S?q.length-s:q.length;for(let ie=0;ie<ee;ie+=s){const ne=A;ne.coordsIndex=ie;const oe=(o.x-ne.x)/u,me=(o.y-ne.y)/g,fe=oe*oe+me*me;fe<=1&&b.candidates.push(UFe(r.getObjectId(N),E(ne),Math.sqrt(fe)))}}}return b.candidates.sort((N,z)=>N.distance-z.distance),b}_getPointCreator(t,i,r){const s=U(r)&&!Hi(i,r)?u=>YS(u,i,r):u=>u,{hasZ:o}=this,c=0;return t==="3d"?o?({x:u,y:g,z:b})=>s({x:u,y:g,z:b}):({x:u,y:g})=>s({x:u,y:g,z:c}):({x:u,y:g})=>s({x:u,y:g})}async createSummaryStatisticsResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:o,normalizationTotal:c,minValue:u,maxValue:g,scale:b}=t,S=this.fieldsIndex.isDateField(i),E=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:o,normalizationTotal:c,scale:b}),A=Hee({normalizationType:o,normalizationField:s,minValue:u,maxValue:g}),O=this.fieldsIndex.get(i),L={value:.5,fieldType:O==null?void 0:O.type},N=Ab(O)?lV({values:E,supportsNullCount:A,percentileParams:L}):n6({values:E,minValue:u,maxValue:g,useSampleStdDev:!o,supportsNullCount:A,percentileParams:L});return bFe(N,S)}async createUniqueValuesResponse(t){const{field:i,valueExpression:r,domains:s,returnAllCodedValues:o,scale:c}=t,u=await this._getDataValues({field:i,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:r,scale:c}),g=wFe(u);return _Fe(g,s,o,t.fieldDelimiter)}async createClassBreaksResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:o,normalizationTotal:c,classificationMethod:u,standardDeviationInterval:g,minValue:b,maxValue:S,numClasses:E,scale:A}=t,O=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:o,normalizationTotal:c,scale:A}),L=Jee(O,{field:i,normalizationField:s,normalizationType:o,normalizationTotal:c,classificationMethod:u,standardDeviationInterval:g,minValue:b,maxValue:S,numClasses:E});return EFe(L,u)}async createHistogramResponse(t){const{field:i,valueExpression:r,normalizationField:s,normalizationType:o,normalizationTotal:c,classificationMethod:u,standardDeviationInterval:g,minValue:b,maxValue:S,numBins:E,scale:A}=t,O=await this._getDataValues({field:i,valueExpression:r,normalizationField:s,normalizationType:o,normalizationTotal:c,scale:A});return MFe(O,{field:i,normalizationField:s,normalizationType:o,normalizationTotal:c,classificationMethod:u,standardDeviationInterval:g,minValue:b,maxValue:S,numBins:E})}_sortFeatures(t,i,r){if(t.length>1&&i&&i.length)for(const s of i.reverse()){const o=s.split(" "),c=o[0],u=this.fieldsIndex.get(c),g=!!o[1]&&o[1].toLowerCase()==="desc",b=Wee(u==null?void 0:u.type,g);t.sort((S,E)=>{const A=r(S,c,u),O=r(E,c,u);return b(A,O)})}}_createFeatureQueryResponse(t){const i=this.items,{geometryType:r,hasM:s,hasZ:o,objectIdField:c,spatialReference:u}=this,{outFields:g,outSR:b,quantizationParameters:S,resultRecordCount:E,resultOffset:A,returnZ:O,returnM:L}=t,N=E!=null&&i.length>(A||0)+E,z=g&&(g.includes("*")?[...this.fieldsIndex.fields]:g.map(q=>this.fieldsIndex.get(q)));return{exceededTransferLimit:N,features:this._createFeatures(t,i),fields:z,geometryType:r,hasM:s&&L,hasZ:o&&O,objectIdFieldName:c,spatialReference:$4(b||u),transform:S&&Kz(S)||null}}_createFeatures(t,i){var ne;const r=new F2(t,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:o}=this,{orderByFields:c,quantizationParameters:u,returnGeometry:g,returnCentroid:b,maxAllowableOffset:S,resultOffset:E,resultRecordCount:A,returnZ:O=!1,returnM:L=!1}=t,N=o&&O,z=s&&L;let q=[],Z=0;const ee=[...i];if(this._sortFeatures(ee,c,(oe,me,fe)=>r.getFieldValue(oe,me,fe)),g||b){const oe=(ne=Kz(u))!=null?ne:void 0;if(g&&!b)for(const me of ee)q[Z++]={attributes:r.getAttributes(me),geometry:A4(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(me),S,oe,N,z)};else if(!g&&b)for(const me of ee)q[Z++]={attributes:r.getAttributes(me),centroid:fV(this,this.featureAdapter.getCentroid(me,this),oe)};else for(const me of ee)q[Z++]={attributes:r.getAttributes(me),centroid:fV(this,this.featureAdapter.getCentroid(me,this),oe),geometry:A4(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(me),S,oe,N,z)}}else for(const oe of ee){const me=r.getAttributes(oe);me&&(q[Z++]={attributes:me})}const ie=E||0;if(A!=null){const oe=ie+A;q=q.slice(ie,Math.min(q.length,oe))}return q}_createExceedsLimitQueryResponse(t){var c;let i=!1,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;for(const u of(c=t.outStatistics)!=null?c:[])if(u.statisticType==="exceedslimit"){r=u.maxPointCount!=null?u.maxPointCount:Number.POSITIVE_INFINITY,s=u.maxRecordCount!=null?u.maxRecordCount:Number.POSITIVE_INFINITY,o=u.maxVertexCount!=null?u.maxVertexCount:Number.POSITIVE_INFINITY;break}if(this.geometryType==="esriGeometryPoint")i=this.items.length>r;else if(this.items.length>s)i=!0;else{const u=mV(this.hasZ,this.hasM),g=this.featureAdapter;i=this.items.reduce((b,S)=>{const E=g.getGeometry(S);return b+(U(E)&&E.coords.length||0)},0)/u>o}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(i)}}]}}async _createStatisticsQueryResponse(t){const i={attributes:{}},r=[],s=new Map,o=new Map,c=new Map,u=new Map,g=new F2(t,this.featureAdapter,this.fieldsIndex),b=t.outStatistics,{groupByFieldsForStatistics:S,having:E,orderByFields:A}=t,O=S&&S.length,L=!!O,N=L?S[0]:null,z=L&&!this.fieldsIndex.get(N);for(const Z of b!=null?b:[]){const{outStatisticFieldName:ee,statisticType:ie}=Z,ne=Z,oe=ie!=="exceedslimit"?Z.onStatisticField:void 0,me=ie==="percentile_disc"||ie==="percentile_cont",fe=ie==="EnvelopeAggregate"||ie==="CentroidAggregate"||ie==="ConvexHullAggregate",Ce=L&&O===1&&(oe===N||z)&&ie==="count";if(L){if(!c.has(oe)){const Ae=[];for(const Oe of S){const je=this._getAttributeValues(g,Oe,s);Ae.push(je)}c.set(oe,this._calculateUniqueValues(Ae,!fe&&g.returnDistinctValues))}const _e=c.get(oe);for(const Ae in _e){const{count:Oe,data:je,items:De,itemPositions:nt}=_e[Ae],mt=je.join(",");if(!E||g.validateItems(De,E)){const ct=u.get(mt)||{attributes:{}};if(fe){ct.aggregateGeometries||(ct.aggregateGeometries={});const{aggregateGeometries:Nt,outStatisticFieldName:Mr}=await this._getAggregateGeometry(ne,De);ct.aggregateGeometries[Mr]=Nt}else{let Nt=null;if(Ce)Nt=Oe;else{const Mr=this._getAttributeValues(g,oe,s),nn=nt.map(ks=>Mr[ks]);Nt=me&&"statisticParameters"in ne?this._getPercentileValue(ne,nn):this._getStatisticValue(ne,nn,null,g.returnDistinctValues)}ct.attributes[ee]=Nt}let dt=0;S.forEach((Nt,Mr)=>ct.attributes[this.fieldsIndex.get(Nt)?Nt:"EXPR_"+ ++dt]=je[Mr]),u.set(mt,ct)}}}else if(fe){i.aggregateGeometries||(i.aggregateGeometries={});const{aggregateGeometries:_e,outStatisticFieldName:Ae}=await this._getAggregateGeometry(ne,this.items);i.aggregateGeometries[Ae]=_e}else{const _e=this._getAttributeValues(g,oe,s);i.attributes[ee]=me&&"statisticParameters"in ne?this._getPercentileValue(ne,_e):this._getStatisticValue(ne,_e,o,g.returnDistinctValues)}r.push({name:ee,alias:ee,type:"esriFieldTypeDouble"})}const q=L?Array.from(u.values()):[i];return this._sortFeatures(q,A,(Z,ee)=>Z.attributes[ee]),{fields:r,features:q}}async _getAggregateGeometry(t,i){const r=await pe(()=>import("./geometryEngineJSON.ba8b71fe.js"),["assets/geometryEngineJSON.ba8b71fe.js","assets/geometryEngineJSON.365eabb9.js"]),{statisticType:s,outStatisticFieldName:o}=t,{featureAdapter:c,spatialReference:u,geometryType:g,hasZ:b,hasM:S}=this,E=i.map(L=>A4(g,b,S,c.getGeometry(L))),A=r.convexHull(u,E,!0)[0],O={aggregateGeometries:null,outStatisticFieldName:null};if(s==="EnvelopeAggregate"){const L=A?l7(A):xM(r.union(u,E));O.aggregateGeometries={...L,spatialReference:u},O.outStatisticFieldName=o||"extent"}else if(s==="CentroidAggregate"){const L=A?rq(A):Nhe(xM(r.union(u,E)));O.aggregateGeometries={x:L[0],y:L[1],spatialReference:u},O.outStatisticFieldName=o||"centroid"}else s==="ConvexHullAggregate"&&(O.aggregateGeometries=A,O.outStatisticFieldName=o||"convexHull");return O}_getStatisticValue(t,i,r,s){const{onStatisticField:o,statisticType:c}=t;let u=null;return u=r!=null&&r.has(o)?r.get(o):Ab(this.fieldsIndex.get(o))?lV({values:i,returnDistinct:s}):n6({values:s?[...new Set(i)]:i,minValue:null,maxValue:null,useSampleStdDev:!0}),r&&r.set(o,u),u[c==="var"?"variance":c]}_getPercentileValue(t,i){const{onStatisticField:r,statisticParameters:s,statisticType:o}=t,{value:c,orderBy:u}=s,g=this.fieldsIndex.get(r);return oO(i,{value:c,orderBy:u,fieldType:g==null?void 0:g.type,isDiscrete:o==="percentile_disc"})}_getAttributeValues(t,i,r){if(r.has(i))return r.get(i);const s=this.fieldsIndex.get(i),o=this.items.map(c=>t.getFieldValue(c,i,s));return r.set(i,o),o}_getAttributeDataValues(t,i){return this.items.map(r=>t.getDataValue(r,{field:i.field,field2:i.field2,field3:i.field3,fieldDelimiter:i.fieldDelimiter,normalizationField:i.normalizationField,normalizationType:i.normalizationType,normalizationTotal:i.normalizationTotal}))}async _getAttributeExpressionValues(t,i,r){const{arcadeUtils:s}=await pl(),o=s.createFunction(i),c=r&&s.getViewInfo(r);return t.getExpressionValues(this.items,o,c,s)}_calculateUniqueValues(t,i){const r={},s=this.items,o=s.length;for(let c=0;c<o;c++){const u=s[c],g=[];for(const S of t)g.push(S[c]);const b=g.join(",");r[b]==null?r[b]={count:1,data:g,items:[u],itemPositions:[c]}:(i||r[b].count++,r[b].items.push(u),r[b].itemPositions.push(c))}return r}async _getDataValues(t){const i=new F2(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:r,field:s,normalizationField:o,normalizationType:c,normalizationTotal:u,scale:g}=t,b=r?{viewingMode:"map",scale:g,spatialReference:this.query.outSR||this.spatialReference}:null;return r?this._getAttributeExpressionValues(i,r,b):this._getAttributeDataValues(i,{field:s,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,normalizationField:o,normalizationType:c,normalizationTotal:u})}}function XFe(e,t,i,r){const s=r.x-i.x,o=r.y-i.y,c=s*s+o*o,u=(t.x-i.x)*s+(t.y-i.y)*o,g=Math.min(1,Math.max(0,u/c));e.x=i.x+s*g,e.y=i.y+o*g}function mV(e,t){return e?t?4:3:t?3:2}var ng;(function(e){e[e.NONE=0]="NONE",e[e.EDGE=1]="EDGE",e[e.VERTEX=2]="VERTEX"})(ng||(ng={}));class yV{constructor(t,i){this.coords=t,this.coordsIndex=i}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}class EVe{constructor(t,i,r){this.uid=t,this.geometry=i,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null}}function MVe(e){return U(e.geometry)}class TVe{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function t0(e,t,i,r){return{x:e,y:t,z:i,hasZ:i!=null,hasM:!1,spatialReference:r,type:"point"}}function CVe(e){if(ae(e))return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const i of e.paths)t+=i.length;return t}case"polygon":{let t=0;for(const i of e.rings)t+=i.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function AVe(e,t){switch(xpe(t),e.type==="mesh"&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let i=0;i<e.paths.length;i++)SI(t,e.paths[i],!!e.hasZ);break;case"polygon":for(let i=0;i<e.rings.length;i++)SI(t,e.rings[i],!!e.hasZ);break;case"multipoint":SI(t,e.points,!!e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,e.zmin!=null&&(t[2]=e.zmin),e.zmax!=null&&(t[5]=e.zmax)}}function $Ve(e,t){switch(vpe(t),e.type==="mesh"&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let i=0;i<e.paths.length;i++)xI(t,e.paths[i]);break;case"polygon":for(let i=0;i<e.rings.length;i++)xI(t,e.rings[i]);break;case"multipoint":xI(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function kVe(e,t){return e.objectId!=null?e.objectId:e.attributes&&t?e.attributes[t]:null}function OVe(e){return e}function rte(e){return Ac(e)}function PVe(e,t,i){return Xn(e,t,i)}function qi(e,t,i){return ae(e)?null:Pv(i.coordinateHelper.vectorToDehydratedPoint(e,QFe),t,i)}function Pv(e,t,i){var o,c;if(ae(e))return null;if(ae(t))return Xn(e.x,e.y,(o=e.z)!=null?o:0);if(t.type==="2d")return Xn(e.x,e.y,0);const{elevationInfo:r}=i,s=(c=fPe(t,e,r,Ir))!=null?c:0;return Xn(e.x,e.y,s)}function gV(e,t,{z:i,m:r,spatialReference:s,elevationInfo:o}){var g;if(i==null&&r==null){const b=t0(e[0],e[1],void 0,s);return r!=null&&(b.m=r,b.hasM=!0),b}if(ae(t)||t.type==="2d"){const b=t0(e[0],e[1],i,s);return r!=null&&(b.m=r,b.hasM=!0),b}const c=(g=wee(t,e,s,Ir,o))!=null?g:0,u=t0(e[0],e[1],c,s);return r!=null&&(u.m=r,u.hasM=!0),u}function FVe(e,t){return t0(e[0],e[1],e[2],t)}const QFe=t0(0,0,0,null);function k4(e,t){return e[0]*t[1]-e[1]*t[0]}function eLe(e,t,i){const r=Wd(i,t)/jd(i);return Og(e,i,r)}function O4(e,t,i,r,s=i){return jr(Ty,r,i),jr(a6,t,s),eLe(KS,a6,Ty),e8(e,s,KS)}function tLe(e,t,i,r){jr(Ty,t,i);const s=r/Wy(Ty);return xc(e,i,Ty,s)}function LVe(e,t){const i=e.start,r=e.end,s=t.start,o=t.end,c=jr(Ty,r,i),u=jr(rLe,o,s),g=k4(c,u);if(Math.abs(g)<=iLe)return[];const b=jr(a6,i,s),S=k4(u,b)/g,E=k4(c,b)/g;if(S>=0){if(E>=0||t.type===zr.LINE)return[xc(KS,i,c,S)]}else if(e.type===zr.LINE&&(E>=0||t.type===zr.LINE))return[xc(KS,i,c,S)];return[]}var zr;(function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"})(zr||(zr={}));const iLe=1e-6,Ty=Yt(),rLe=Yt(),a6=Yt(),KS=Yt();function l6({start:e,end:t,type:i},r,s){const o=[],c=jr(T0,t,e),u=jr(Ng,e,r),g=jd(c),b=2*Wd(c,u),S=b*b-4*g*(jd(u)-s*s);if(S===0){const E=-b/(2*g);(i===dl.PLANE||E>=0)&&o.push(xc(Yt(),e,c,E))}else if(S>0){const E=Math.sqrt(S),A=(-b+E)/(2*g);(i===dl.PLANE||A>=0)&&o.push(xc(Yt(),e,c,A));const O=(-b-E)/(2*g);(i===dl.PLANE||O>=0)&&o.push(xc(Yt(),e,c,O))}return o}function u6(e,t){const i=e.start,r=e.end,s=jr(T0,r,i),o=$c(Ng,-s[1],s[0],0),c=t.start,u=t.end,g=Io(lO,u,c),b=oa(g,o),S=$c(ate,i[0],i[1],0),E=Io(lte,S,c),A=oa(E,o);if(Math.abs(b)<al)return[];const O=Id(ute,c,g,A/b);if(t.type===zr.RAY){const L=Io(XS,O,c);if(oa(L,g)<-al)return[]}if(e.type===dl.HALF_PLANE){const L=w9(XS,O,i);if(Wd(L,s)<-al)return[]}return[Ac(O)]}function c6(e,t){return h6(ZS(uO,t[2],e),t)}function ste(e,t){const r=ote(ZS(uO,0,e),ZS(oLe,0,t)),s=[];for(const o of r)s.push(MZ(o));return s}function nte(e,t){return aO(e,ZS(uO,e[2],t))}function sLe(e,t,i){const r=jr(T0,e,t),s=i/Wy(r),o=xc(Jt(),t,r,s);return o[2]=e[2],o}function aO(e,{start:t,end:i,type:r}){const s=Io(T0,e,t),o=Io(Ng,i,t),c=oa(s,o)/oa(o,o);return Id(Jt(),t,o,r===zr.RAY?Math.max(c,0):c)}function vV({start:e,end:t,type:i},r,s){const o=[],c=v5(T0,t,e),u=jr(Ng,e,r),g=jd(c),b=2*Wd(c,u),S=b*b-4*g*(jd(u)-s*s);if(S===0){const E=-b/(2*g);(i===zr.LINE||E>=0)&&o.push(Id(Jt(),e,c,E))}else if(S>0){const E=Math.sqrt(S),A=(-b+E)/(2*g);(i===zr.LINE||A>=0)&&o.push(Id(Jt(),e,c,A));const O=(-b-E)/(2*g);(i===zr.LINE||O>=0)&&o.push(Id(Jt(),e,c,O))}return o}function ote(e,t){const i=e.start,r=e.end,s=t.start,o=t.end,c=Io(T0,r,i),u=Io(Ng,o,s),g=Io(lO,s,i),b=kx(ate,c,u),S=oa(g,b);if(!fy(S,0,al))return[];const E=Ox(b);if(fy(E,0,al))return[];const A=kx(lte,g,u),O=oa(A,b)/E,L=Id(ute,i,c,O);if(e.type===zr.RAY){const N=Io(XS,L,i);if(oa(c,N)<-al)return[]}if(t.type===zr.RAY){const N=Io(XS,L,s);if(oa(u,N)<-al)return[]}return[Ac(L)]}function h6({start:e,end:t,type:i},r){const s=Io(T0,r,e),o=Io(Ng,t,e),c=kx(lO,o,s);if(Ox(c)/Ox(o)<al)switch(i){case zr.LINE:return[Ac(r)];case zr.RAY:return oa(o,s)<-al?[]:[Ac(r)]}return[]}function bV(e,t,i){return fy(vl(i,e),t*t,al)?[Ac(i)]:[]}function ZS(e,t,{start:i,end:r,type:s}){return $c(e.start,i[0],i[1],t),$c(e.end,r[0],r[1],t),e.type=nLe[s],e}var dl;(function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"})(dl||(dl={}));const nLe={[dl.PLANE]:zr.LINE,[dl.HALF_PLANE]:zr.RAY},al=1e-6,T0=Jt(),Ng=Jt(),lO=Jt(),ate=Jt(),lte=Jt(),ute=Jt(),XS=Jt(),uO={start:Jt(),end:Jt(),type:zr.LINE},oLe={start:Jt(),end:Jt(),type:zr.LINE};class C0{intersect(t){return cLe(this,t)}}class aLe extends C0{constructor(t){super(),this.point=t}equals(t){return ry(t)&&Nr(this.point,t.point)}closestTo(){return rte(this.point)}}class cte extends C0{constructor(t,i,r){super(),this.start=t,this.end=i,this.type=r,this.lineLike={start:this.start,end:this.end,type:this.type}}equals(t){return Sf(t)&&this.type===t.type&&Nr(this.start,t.start)&&Nr(this.end,t.end)}closestTo(t){const i=aO(t,this.lineLike);return i}}class lLe extends cte{constructor(t,i){super(t,i,zr.LINE)}}class D9 extends C0{constructor(t,i,r){super(),this.intersection=t,this.first=i,this.second=r}equals(t){return t instanceof D9&&this.first.equals(t.first)&&this.second.equals(t.second)}closestTo(){return rte(this.intersection)}}class yb extends C0{constructor(t,i,r){super(),this.basePoint=t,this.first=i,this.second=r}equals(t){return t instanceof yb&&this.first.equals(t.first)&&this.second.equals(t.second)}closestTo(t){const i=this.basePoint;return Xn(i[0],i[1],t[2])}}class hte extends C0{constructor(t,i){super(),this.center=t,this.radius=i}equals(t){return sy(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}closestTo(t){const i=sLe(t,this.center,this.radius);return i}}class cO extends C0{constructor(t,i,r){super(),this.start=t,this.end=i,this.type=r,this.planeLike={start:t,end:i,type:r}}equals(t){return If(t)&&this.type===t.type&&Nr(this.start,t.start)&&Nr(this.end,t.end)}closestTo(t){return nte(t,this.planeLike)}closestEndTo(t){const{start:i,end:r}=this;return Math.sign(Wd(jr(dLe,r,i),jr(pLe,t,i)))>0?r:i}}class dte extends cO{constructor(t,i){super(t,i,dl.HALF_PLANE)}}class pte extends cO{constructor(t,i){super(t,i,dl.PLANE)}}class fte extends C0{constructor(t,i,r){super(),this.start=t,this.end=i,this.getZ=r,this.planeLike={start:t,end:i,type:dl.HALF_PLANE}}equals(t){return Ef(t)&&Nr(this.start,t.start)&&Nr(this.end,t.end)&&this.getZ===t.getZ}closestTo(t){return uLe(this,t)}addIfOnTheGround(t,i){for(const r of i){const s=Qs(this.getZ(r[0],r[1],r[2]),0);Math.abs(r[2]-s)<al&&(r[2]=s,t.push(r))}}}function uLe(e,t){var r;const i=nte(t,e.planeLike);return i[2]=(r=e.getZ(t[0],t[1],t[2]))!=null?r:mte,i}function cLe(e,t){let i=[];if(ry(e)){const{point:r}=e;Sf(t)?i=h6(t.lineLike,r):sy(t)?i=bV(t.center,t.radius,r):If(t)?i=c6(t.planeLike,r):Ef(t)&&(i=S1(t,e))}else if(Sf(e)){const{lineLike:r}=e;ry(t)?i=h6(r,t.point):Sf(t)?i=ote(r,t.lineLike):sy(t)?i=vV(r,t.center,t.radius):If(t)?i=u6(t.planeLike,r):Ef(t)&&(i=S1(t,e))}else if(sy(e)){const{center:r,radius:s}=e;if(Sf(t))i=vV(t.lineLike,r,s);else if(ry(t))i=bV(r,s,t.point);else{if(If(t))return l6(t.planeLike,r,s).map(o=>new yb(o,e,t));Ef(t)&&(i=S1(t,e))}}else if(If(e)){const{planeLike:r}=e;if(If(t))return ste(r,t.planeLike).map(s=>new yb(s,e,t));if(ry(t))i=c6(r,t.point);else if(Sf(t))i=u6(r,t.lineLike);else{if(sy(t))return l6(r,t.center,t.radius).map(s=>new yb(s,e,t));Ef(t)&&(i=S1(t,e))}}else Ef(e)&&(i=S1(e,t));return hLe(i,e,t)}function S1(e,t){var o;const{planeLike:i,getZ:r}=e,s=[];if(ry(t))e.addIfOnTheGround(s,c6(i,t.point));else if(Sf(t))e.addIfOnTheGround(s,u6(i,t.lineLike));else if(sy(t))for(const[c,u]of l6(i,t.center,t.radius)){const g=r(c,u,0);U(g)&&s.push(Xn(c,u,g))}else if(If(t)||Ef(t))for(const[c,u]of ste(i,t.planeLike)){const g=(o=r(c,u,0))!=null?o:mte;s.push(Xn(c,u,g))}return s}function hLe(e,t,i){return e.map(r=>new D9(r,t,i))}function ry(e){return e instanceof aLe}function Sf(e){return e instanceof cte}function sy(e){return e instanceof hte}function If(e){return e instanceof cO}function Ef(e){return e instanceof fte}const dLe=Yt(),pLe=Yt(),mte=0;function A0(e,t){const i=e.x-t.x,r=e.y-t.y;return i*i+r*r}function fLe(e,t){return Math.sqrt(A0(e,t))}function hO(e,t){t.sort((i,r)=>Ib(i.targetPoint,e)-Ib(r.targetPoint,e))}var ga;function RVe({point:e,distance:t,types:i,coordinateHelper:{spatialReference:r}},s,o){return{point:t0(e[0],e[1],e[2],r.toJSON()),mode:s,distance:t,types:i,query:U(o)?o.toJSON():{where:"1=1"}}}function QS(e,t,i){return{left:qi(e.leftVertex.pos,t,i),right:qi(e.rightVertex.pos,t,i)}}function NVe(e){return e.createQuery()}function mLe(e,t=()=>{}){const i=ge(()=>({view:e.view,snappingOptions:e.snappingOptions}),({view:r,snappingOptions:s})=>{const o="snapping-toggle",c=Ai.TOOL;if(e.removeHandles(o),r&&U(s)){const u=[r.on("key-down",g=>{g.key!==Yz.toggle||g.repeat||(s.enabledToggled=!0,t())},c),r.on("key-up",g=>{g.key===Yz.toggle&&(s.enabledToggled=!1,t())},c),r.on("pointer-move",g=>{const b=g.native.ctrlKey;s.enabledToggled!==b&&(s.enabledToggled=b,t())},c)];e.addHandles(u,o)}},Mn);e.addHandles(i)}(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(ga||(ga={}));class Dg{constructor(t,i,r,s){this.targetPoint=t,this.constraint=i,this.isDraped=r,this.domain=s}}class dO extends Dg{constructor({targetPoint:t,objectId:i,constraint:r,isDraped:s}){super(t,r,s,ys.FEATURE),this.objectId=i}}class j9{constructor(t,i){this.isDraped=t,this.domain=i}}class va extends j9{constructor(t,i,r,s,o=ys.ALL,c=!0,u=!0){super(s,o),this.type=t,this.lineStart=i,this.lineEnd=r,this.fadeLeft=c,this.fadeRight=u}equals(t){return t instanceof va&&this.type===t.type&&Nr(this.lineStart,t.lineStart)&&Nr(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return i7(this.lineStart,this.lineEnd)}}class yLe extends dO{constructor(t){super({...t,isDraped:!0,constraint:new fte(t.edgeStart,t.edgeEnd,t.getGroundElevation)})}get hints(){return[new va(ga.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}class gLe extends dO{constructor(t){super({...t,constraint:new lLe(t.edgeStart,t.edgeEnd)})}get hints(){return[new va(ga.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}class z9 extends j9{constructor(t,i,r,s,o=ys.ALL){super(s,o),this.previousVertex=t,this.centerVertex=i,this.nextVertex=r}equals(t){return t instanceof z9&&Nr(this.previousVertex,t.previousVertex)&&Nr(this.centerVertex,t.centerVertex)&&Nr(this.nextVertex,t.nextVertex)}}class yte extends Dg{constructor({targetPoint:t,constraint:i,previousVertex:r,otherVertex:s,otherVertexType:o,objectId:c,isDraped:u}){super(t,i,u,ys.SELF),this.previousVertex=r,this.otherVertex=s,this.otherVertexType=o,this.objectId=c}get hints(){const t=this.previousVertex,i=this.otherVertexType===og.CENTER?this.otherVertex:this.targetPoint,r=this.otherVertexType===og.CENTER?this.targetPoint:this.otherVertex;return[new va(ga.TARGET,i,r,this.isDraped,this.domain),new va(ga.REFERENCE,t,i,this.isDraped,this.domain),new z9(this.previousVertex,i,r,this.isDraped,this.domain)]}}var og;(function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"})(og||(og={}));function vLe(e,t,i,r,s=Jt()){const o=Sb(d6,e);return o[2]=wee(r,o,t,i)||0,r.renderCoordsHelper.toRenderCoords(o,t,s),s}function en(e,t,i,r){return r.type==="2d"?(L2.x=e[0],L2.y=e[1],L2.spatialReference=t,r.toScreen(L2)):(vLe(e,t,i,r,d6),r.state.camera.projectToScreen(d6,P4),Xs(P4[0],P4[1]))}const L2=t0(0,0,0,null),d6=Jt(),P4=Qde();let qh=class extends zy{get updating(){return xw(this.snappingSources,({snappingSource:e})=>e.updating)||this.updatingHandles.updating}get snappingSources(){const e=this._get("snappingSources")||new Map,t=new Map;if(U(this.options)&&U(this.options.featureSources))for(const i of this.options.featureSources.items){const r=i.layer.uid,s=e.get(r);if(s){e.delete(r),t.set(r,s);continue}if(!i.layer.loaded){this.updatingHandles.addPromise(i.layer.load());continue}const o=this._createSourceInfo(i);U(o)&&t.set(r,o)}for(const[,i]of e)i.destroy();return t}constructor(e){super(e),this.options=null,this._domain=ys.FEATURE,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),au),U(this.view)&&this.handles.add([this.view.on("layerview-create",e=>this._updateLayerView(e.layer,e.layerView)),this.view.on("layerview-destroy",e=>this._updateLayerView(e.layer,null))])}_updateLayerView(e,t){for(const[,i]of this.snappingSources)i.snappingSource.layerSource.layer===e&&(i.layerView=t)}destroy(){this._set("options",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,t,i,r){var g,b;if(!(t&this._domain)||ae(this.options)||!this.options.effectiveFeatureEnabled)return[];const s=[],o=this._computeScreenSizeDistanceParameters(e,i),c={distance:o,mode:(b=(g=this.view)==null?void 0:g.type)!=null?b:"2d",point:e,coordinateHelper:i.coordinateHelper,types:this._types};for(const[,{snappingSource:S,layerView:E}]of this.snappingSources)!S.layerSource.enabled||U(E)&&E.suspended||s.push(S.fetchCandidates(c,r).then(A=>A.filter(O=>!this._candidateIsExcluded(S,O,i.excludeFeature))));const u=(await oG(s)).flat();return this._addRightAngleCandidates(u,e,o,i),or(r),hO(e,u),u}_addRightAngleCandidates(e,t,i,r){var S,E,A,O,L,N,z,q;const s=U(r.vertexHandle)?(E=(S=r.vertexHandle.rightEdge)==null?void 0:S.rightVertex)==null?void 0:E.pos:U(r.editGeometryOperations)&&r.editGeometryOperations.data.type==="polygon"?(O=(A=r.editGeometryOperations.data.components[0])==null?void 0:A.getFirstVertex())==null?void 0:O.pos:null,o=U(r.vertexHandle)?(N=(L=r.vertexHandle.leftEdge)==null?void 0:L.leftVertex)==null?void 0:N.pos:U(r.editGeometryOperations)?(q=(z=r.editGeometryOperations.data.components[0])==null?void 0:z.getLastVertex())==null?void 0:q.pos:null,{view:c}=this,u=qi(s,c,r),g=qi(o,c,r),b=e.length;for(let Z=0;Z<b;Z++)this._addRightAngleCandidate(e[Z],g,t,i,e),this._addRightAngleCandidate(e[Z],u,t,i,e)}_addRightAngleCandidate(e,t,i,r,s){if(ae(t)||!wLe(e))return;const o=e.constraint.closestTo(t),c=(o[0]-i[0])/r.x,u=(o[1]-i[1])/r.y,{start:g,end:b}=e.constraint;if(c*c+u*u<=1){const S=new yte({targetPoint:o,otherVertex:t,otherVertexType:og.NEXT,previousVertex:vl(o,g)>vl(o,b)?g:b,constraint:new dte(t,o),objectId:e.objectId,isDraped:e.isDraped});s.push(S)}}_computeScreenSizeDistanceParameters(e,t){let i=U(this.options)?this.options.distance*(t.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return ae(this.view)?{x:i,y:i,z:i,distance:i}:this.view.type==="2d"?(i*=this.view.resolution,{x:i,y:i,z:i,distance:i}):this._computeScreenSizeDistanceParameters3D(e,i,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,i,r){const{spatialReference:s}=r;i.renderCoordsHelper.toRenderCoords(e,s,wV);const o=i.state.camera.computeScreenPixelSizeAt(wV),c=o*i.renderCoordsHelper.unitInMeters/i.mapCoordsHelper.unitInMeters,u=t*c,g=en(e,s,Ir,i),b=g?F4(g,e,c,0,0,i,r):0,S=g?F4(g,e,0,c,0,i,r):0,E=g?F4(g,e,0,0,c,i,r):0;return{x:b===0?0:u/b,y:S===0?0:u/S,z:E===0?0:u/E,distance:o*t}}get _types(){return ng.EDGE|ng.VERTEX}_candidateIsExcluded(e,t,i){if(ae(i))return!1;const r=this._getCandidateObjectId(t);if(ae(r))return!1;const s=e.layerSource.layer;return s.type==="graphics"?i.uid===r:i.sourceLayer===s&&!(!i.attributes||!("objectIdField"in s))&&i.attributes[s.objectIdField]===r}_getCandidateObjectId(e){return e instanceof dO?e.objectId:null}_createSourceInfo(e){const t=this._createFeatureSnappingSourceType(e);if(ae(t))return null;if("loading"in t)return this.updatingHandles.addPromise(t.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const i=U(this.view)?this.view.allLayerViews.find(r=>r.layer===e.layer):null;return new bLe(t.source,i)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}_createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;if(ae(t)||t.type!=="3d")return null;const i=this._getSourceModule("scene");return U(i.module)?{source:new i.module.SceneLayerSnappingSource({layerSource:e,view:t})}:{loading:i.loader}}_createFeatureSnappingSourceFeatureLayer(e){var t;switch((t=e.layer.source)==null?void 0:t.type){case"feature-layer":case"oriented-imagery":{const i=this._getSourceModule("featureService");return U(i.module)?{source:new i.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:i.loader}}case"memory":case"csv":case"geojson":case"wfs":{if(e.layer.geometryType==="mesh")return null;const i=this._getSourceModule("featureCollection");return U(i.module)?{source:new i.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:i.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const t=this._getSourceModule("graphics");return U(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_createFeatureSnappingSourceMapNotesLayer(e){const t=this._getSourceModule("notes");return U(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:()=>U(e.layer.sublayers)?e.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}_getSourceModule(e){const t=this._sourceModules[e];if(ae(t.loader)){const i=this._loadSourceModule(e).then(r=>{t.module=r});return t.loader=i,{module:t.module,loader:i}}return{module:t.module,loader:t.loader}}_loadSourceModule(e){const t=this.updatingHandles;switch(e){case"featureService":return t.addPromise(pe(()=>import("./FeatureServiceSnappingSource.40569fc5.js"),["assets/FeatureServiceSnappingSource.40569fc5.js","assets/boundedPlane.91a64206.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/lineSegment.1a0fd96e.js","assets/plane.a0a08b54.js","assets/queryEngineUtils.fa9048f7.js","assets/VertexSnappingCandidate.73be13fb.js","assets/PointSnappingHint.08747e02.js","assets/WorkerHandle.bbb1002a.js"]));case"featureCollection":return t.addPromise(pe(()=>import("./FeatureCollectionSnappingSource.bd2cbc40.js"),["assets/FeatureCollectionSnappingSource.bd2cbc40.js","assets/queryEngineUtils.fa9048f7.js","assets/VertexSnappingCandidate.73be13fb.js","assets/PointSnappingHint.08747e02.js","assets/symbologySnappingCandidates.07698129.js"]));case"graphics":case"notes":return t.addPromise(pe(()=>import("./GraphicsSnappingSource.f17b8ad9.js"),["assets/GraphicsSnappingSource.f17b8ad9.js","assets/normalizeUtilsSync.95f750ca.js","assets/FeatureStore.aafd7daf.js","assets/BoundsStore.befb01b6.js","assets/PooledRBush.1ba01569.js","assets/optimizedFeatureQueryEngineAdapter.16a5f108.js","assets/centroid.193a93e9.js","assets/QueryEngine.f60a9c1b.js","assets/QueryEngineCapabilities.ea616409.js","assets/timeSupport.5c76f69a.js","assets/queryEngineUtils.fa9048f7.js","assets/VertexSnappingCandidate.73be13fb.js","assets/PointSnappingHint.08747e02.js","assets/symbologySnappingCandidates.07698129.js"]));case"scene":return t.addPromise(pe(()=>import("./SceneLayerSnappingSource.c228d8d9.js"),["assets/SceneLayerSnappingSource.c228d8d9.js","assets/WorkerHandle.bbb1002a.js","assets/workerHelper.aeb45d59.js","assets/BufferView.32a50625.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/edgeProcessing.44ee33a6.js","assets/deduplicate.97d7ef01.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/glUtil.9de5d1d0.js","assets/enums.3c1fa5b5.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/VertexSnappingCandidate.73be13fb.js","assets/PointSnappingHint.08747e02.js"]))}}};v([_({constructOnly:!0})],qh.prototype,"spatialReference",void 0),v([_({constructOnly:!0})],qh.prototype,"view",void 0),v([_()],qh.prototype,"options",void 0),v([_({readOnly:!0})],qh.prototype,"updating",null),v([_({readOnly:!0})],qh.prototype,"snappingSources",null),qh=v([K("esri.views.interactive.snapping.FeatureSnappingEngine")],qh);class bLe{constructor(t,i){this.snappingSource=t,this.layerView=i,this.handles=new Vr;const r=this.snappingSource.layerSource.layer;if("refresh"in r){const s=r;this.handles.add(s.on("refresh",()=>t.refresh()))}this.handles.add([ge(()=>t.updating,s=>t.layerSource.updating=s,Mn),ge(()=>t.availability,s=>t.layerSource.availability=s,Mn)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}function wLe(e){return(e instanceof gLe||e instanceof yLe)&&!_Le(e)}function _Le({constraint:{start:e,end:t}}){const i=Ib(e,t),r=vl(e,t);return i<Ro()||r/i<SLe}function F4(e,t,i,r,s,o,{spatialReference:c}){const u=Sb(xLe,t);u[0]+=i,u[1]+=r,u[2]+=s;const g=en(u,c,Ir,o);return g?fLe(g,e):1/0}const wV=Jt(),xLe=Jt(),SLe=1e-4;class V9{constructor(t,i){this.view=t,this.options=i,this.squaredShortLineThreshold=Tc.shortLineThreshold*Tc.shortLineThreshold}snap(t,i){return U(i.vertexHandle)?i.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(t,i):this.snapNewVertex(t,i)}edgeExceedsShortLineThreshold(t,i){return this.exceedsShortLineThreshold(qi(t.leftVertex.pos,this.view,i),qi(t.rightVertex.pos,this.view,i),i)}exceedsShortLineThreshold(t,i,{spatialReference:r}){return this.squaredShortLineThreshold===0||A0(en(i,r,Ir,this.view),en(t,r,Ir,this.view))>this.squaredShortLineThreshold}isVertical(t,i){return vl(t,i)<Tc.verticalLineThreshold}squaredProximityThreshold(t){return t==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:t,touchSensitivityMultiplier:i}=this.options,r=t*i;return r*r}}class ILe extends Dg{constructor({lineStart:t,lineEnd:i,targetPoint:r,isDraped:s}){super(r,new pte(t,i),s,ys.SELF),this._referenceLineHint=new va(ga.REFERENCE_EXTENSION,t,i,s,this.domain)}get hints(){return[this._referenceLineHint,new va(ga.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}class ELe extends V9{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.edges.length,o=[];if(s<1)return o;const{spatialReference:c}=i,u=en(t,c,Ir,this.view),{view:g}=this,b=r.edges[s-1];let S=b;do{if(this.edgeExceedsShortLineThreshold(S,i)){const E=QS(S,g,i);this._processCandidateProposal(E.left,E.right,t,u,i,o)}S=S.leftVertex.leftEdge}while(S&&S!==b);return o}snapExistingVertex(t,i){const r=[],s=i.vertexHandle,o=s.component;if(o.edges.length<2)return r;const{view:c}=this,{spatialReference:u}=i,g=en(t,u,Ir,c),b=s.leftEdge,S=s.rightEdge;b&&S&&this.edgeExceedsShortLineThreshold(b,i)&&this.edgeExceedsShortLineThreshold(S,i)&&this._processCandidateProposal(qi(b.leftVertex.pos,c,i),qi(S.rightVertex.pos,c,i),t,g,i,r);const E=o.edges[0];let A=E;do{if(A!==s.leftEdge&&A!==s.rightEdge&&this.edgeExceedsShortLineThreshold(A,i)){const O=QS(A,c,i);this._processCandidateProposal(O.left,O.right,t,g,i,r)}A=A.rightVertex.rightEdge}while(A&&A!==E);return r}_processCandidateProposal(t,i,r,s,o,c){var S;const{spatialReference:u,pointer:g}=o,b=aO(r,{start:t,end:i,type:zr.LINE});A0(s,en(b,u,Ir,this.view))<this.squaredProximityThreshold(g)&&c.push(new ILe({lineStart:t,lineEnd:i,targetPoint:b,isDraped:((S=o.elevationInfo)==null?void 0:S.mode)==="on-the-ground"}))}}class pO extends j9{constructor(t,i,r,s=ys.ALL){super(r,s),this.lineStart=t,this.lineEnd=i}equals(t){return t instanceof pO&&Nr(this.lineStart,t.lineStart)&&Nr(this.lineEnd,t.lineEnd)}}class MLe extends Dg{constructor({referenceLine:t,lineStart:i,targetPoint:r,isDraped:s}){const o=Ac(i),{left:c,right:u}=t;v5(o,NU(o,o,u),c),super(r,new pte(i,o),s,ys.SELF),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new va(ga.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new pO(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(t=>new va(ga.REFERENCE,t.edge.left,t.edge.right,this.isDraped,this.domain,t.fadeLeft,t.fadeRight))]}addReferenceLine(t){const i={edge:t,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(r=>{Nr(t.right,r.edge.left)&&(r.fadeLeft=!1,i.fadeRight=!1),Nr(t.right,r.edge.right)&&(r.fadeRight=!1,i.fadeRight=!1),Nr(t.left,r.edge.right)&&(r.fadeRight=!1,i.fadeLeft=!1),Nr(t.left,r.edge.left)&&(r.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}}class TLe extends V9{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.edges.length,o=r.vertices.length,c=[];if(s<2)return c;const{view:u}=this,g=en(t,i.spatialReference,Ir,u),b=qi(r.vertices[o-1].pos,u,i),S=qi(r.vertices[0].pos,u,i),E=r.edges[s-1];let A=E;do{if(this.edgeExceedsShortLineThreshold(A,i)){const O=QS(A,u,i);this._checkEdgeForParallelLines(O,b,t,g,i,c),this._checkEdgeForParallelLines(O,S,t,g,i,c)}A=A.leftVertex.leftEdge}while(A&&A!==E);return c}snapExistingVertex(t,i){const r=[],s=i.vertexHandle,o=s.component;if(o.edges.length<3)return r;const{view:c}=this,u=en(t,i.spatialReference,Ir,c),g=s.leftEdge,b=s.rightEdge,S=o.vertices[0],E=qi(S.pos,c,i),A=o.vertices.length,O=o.vertices[A-1],L=qi(O.pos,c,i),N=o.edges[0];let z=N;do{if(z!==g&&z!==b&&this.edgeExceedsShortLineThreshold(z,i)){const q=QS(z,c,i);g&&this._checkEdgeForParallelLines(q,qi(g.leftVertex.pos,c,i),t,u,i,r),b&&this._checkEdgeForParallelLines(q,qi(b.rightVertex.pos,c,i),t,u,i,r),s===S?this._checkEdgeForParallelLines(q,L,t,u,i,r):s===O&&this._checkEdgeForParallelLines(q,E,t,u,i,r)}z=z.rightVertex.rightEdge}while(z&&z!==N);return r}_checkEdgeForParallelLines(t,i,r,s,o,c){var A;const u=t.left,g=t.right;if(O4(fp,i,u,g),vl(fp,i)<Tc.parallelLineThreshold)return;O4(fp,r,u,g,i);const{spatialReference:b,pointer:S}=o,E=Xn(fp[0],fp[1],r[2]);if(A0(s,en(E,b,Ir,this.view))<this.squaredProximityThreshold(S)){if(this.isVertical(E,i)||this.isVertical(u,g)||this._parallelToPreviousCandidate(t,c))return;c.push(new MLe({referenceLine:t,lineStart:i,targetPoint:E,isDraped:((A=o.elevationInfo)==null?void 0:A.mode)==="on-the-ground"}))}}_parallelToPreviousCandidate(t,i){const r=t.left,s=t.right;for(const o of i)if(O4(fp,s,o.constraint.start,o.constraint.end,r),vl(fp,s)<Tc.parallelLineThreshold)return o.addReferenceLine(t),!0;return!1}}const fp=Yt();class CLe extends V9{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=r.vertices.length,o=[];if(s<2)return o;const{view:c}=this,u=en(t,i.spatialReference,Ir,c),g=r.vertices[s-1];if(this.edgeExceedsShortLineThreshold(g.leftEdge,i)){const S=qi(g.pos,c,i),E=qi(g.leftEdge.leftVertex.pos,c,i);this._checkForSnappingCandidate(o,E,S,t,u,i)}const b=r.vertices[0];if(this.edgeExceedsShortLineThreshold(b.rightEdge,i)){const S=qi(b.pos,c,i),E=qi(b.rightEdge.rightVertex.pos,c,i);this._checkForSnappingCandidate(o,E,S,t,u,i)}return o}snapExistingVertex(t,i){const r=[],s=i.vertexHandle;if(s.component.vertices.length<3)return r;const{view:o}=this,c=en(t,i.spatialReference,Ir,o),u=s.leftEdge,g=s.rightEdge;if(u&&u.leftVertex.leftEdge){const b=u.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(b,i)){const S=qi(b.rightVertex.pos,o,i),E=qi(b.leftVertex.pos,o,i);this._checkForSnappingCandidate(r,E,S,t,c,i)}}if(g&&g.rightVertex.rightEdge){const b=g.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(b,i)){const S=qi(b.leftVertex.pos,o,i),E=qi(b.rightVertex.pos,o,i);this._checkForSnappingCandidate(r,E,S,t,c,i)}}return r}_checkForSnappingCandidate(t,i,r,s,o,c){var A;const{spatialReference:u,pointer:g}=c;jr(R2,r,i);const b=$c(ALe,R2[1],-R2[0],0),S=Wd(b,jr(R2,s,r))/jd(b),E=xc(Ac(s),r,b,S);if(A0(o,en(E,u,Ir,this.view))<this.squaredProximityThreshold(g)){if(this.isVertical(E,r)||this.isVertical(r,i))return;const O=Id(Jt(),r,b,Math.sign(S));t.push(new yte({targetPoint:E,constraint:new dte(r,O),previousVertex:i,otherVertex:r,otherVertexType:og.CENTER,isDraped:((A=c.elevationInfo)==null?void 0:A.mode)==="on-the-ground"}))}}}const R2=Yt(),ALe=Jt();class $Le extends Dg{constructor({targetPoint:t,point1:i,point2:r,isDraped:s}){super(t,new hte(GU(Jt(),i,r,.5),.5*M0(i,r)),s,ys.SELF),this._p1=i,this._p2=r}get hints(){return[new va(ga.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new va(ga.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new z9(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}class kLe extends V9{snapNewVertex(t,i){const r=i.editGeometryOperations.data.components[0],s=[],o=r.vertices.length;if(i.editGeometryOperations.data.type!=="polygon"||o<2)return s;const{view:c}=this,u=r.vertices[0],g=r.vertices[o-1],b=qi(u.pos,c,i),S=qi(g.pos,c,i);return this._processCandidateProposal(b,S,t,i,s),s}snapExistingVertex(t,i){const r=[],s=i.vertexHandle,o=s.component;if(o.edges.length<2||i.editGeometryOperations.data.type==="polyline"&&(s.index===0||s.index===o.vertices.length-1))return r;const{view:c}=this,u=qi(s.leftEdge.leftVertex.pos,c,i),g=qi(s.rightEdge.rightVertex.pos,c,i);return this._processCandidateProposal(u,g,t,i,r),r}_processCandidateProposal(t,i,r,s,o){var O;if(!this.exceedsShortLineThreshold(t,i,s))return;const c=EZ(OLe,t,i,.5),u=.5*M0(t,i),g=Jt();tLe(g,r,c,u),g[2]=r[2];const b=g,{spatialReference:S,pointer:E}=s,A=en(r,S,Ir,this.view);if(A0(A,en(b,S,Ir,this.view))<this.squaredProximityThreshold(E)){if(this.isVertical(t,b)||this.isVertical(b,i))return;o.push(new $Le({targetPoint:b,point1:t,point2:i,isDraped:((O=s.elevationInfo)==null?void 0:O.mode)==="on-the-ground"}))}}}const OLe=Yt();let Um=class extends Re{constructor(e){super(e),this.updating=!1,this._snappers=new Be,this._domain=ys.SELF}initialize(){this._snappers.push(new TLe(this.view,this.options),new ELe(this.view,this.options),new CLe(this.view,this.options),new kLe(this.view,this.options))}set options(e){this._set("options",e);for(const t of this._snappers)t.options=e}async fetchCandidates(e,t,i){if(!(t&this._domain&&this.options.effectiveSelfEnabled))return[];const r=[];for(const s of this._snappers.items)for(const o of s.snap(e,i))r.push(o);return hO(e,r),r}};v([_({readOnly:!0})],Um.prototype,"updating",void 0),v([_({constructOnly:!0})],Um.prototype,"view",void 0),v([_()],Um.prototype,"options",null),Um=v([K("esri.views.interactive.snapping.SelfSnappingEngine")],Um);function PLe(e,t){return[new Um({view:e,options:t}),new qh({view:e,options:t,spatialReference:e.spatialReference})]}let bo=class extends Re{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new Be,this.distance=Tc.distance,this.touchSensitivityMultiplier=Tc.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};v([_()],bo.prototype,"enabled",void 0),v([_()],bo.prototype,"enabledToggled",void 0),v([_()],bo.prototype,"selfEnabled",void 0),v([_()],bo.prototype,"featureEnabled",void 0),v([_({type:Be.ofType(J8)})],bo.prototype,"featureSources",void 0),v([_()],bo.prototype,"distance",void 0),v([_()],bo.prototype,"touchSensitivityMultiplier",void 0),v([_({readOnly:!0})],bo.prototype,"effectiveEnabled",null),v([_({readOnly:!0})],bo.prototype,"effectiveSelfEnabled",null),v([_({readOnly:!0})],bo.prototype,"effectiveFeatureEnabled",null),bo=v([K("esri.views.interactive.snapping.SnappingOptions")],bo);const fO=bo;class mO extends j9{constructor(t,i,r=ys.ALL){super(i,r),this.intersectionPoint=t}equals(t){return t instanceof mO&&Nr(this.intersectionPoint,t.intersectionPoint)}}class N2 extends Dg{constructor(t,i,r,s){super(t,new D9(t,i.constraint,r.constraint),s,ys.ALL),this.first=i,this.second=r}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new mO(this.targetPoint,this.isDraped,this.domain)]}}let Ha=class extends ss.EventedMixin(zy){constructor(e){super(e),this.options=new fO,this.snappingEnginesFactory=PLe,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=ic.MAIN}initialize(){this.handles.add([ge(()=>{const{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:i,distance:r}},()=>{this.doneSnapping(),this.emit("changed")},au),ge(()=>this.options,e=>{for(const t of this._engines)t.options=e},au),ge(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:t})=>this._recreateEngines(e,t),Mn)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,t){if(this._destroyEngines(),!e)return;const{view:i,options:r}=this;this._engines=t(i,r)}_destroyEngines(){for(const e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}get _squaredSatisfiesConstraintThreshold(){return Tc.satisfiesConstraintScreenThreshold*Tc.satisfiesConstraintScreenThreshold}async snap(e){return FLe(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:t,context:i}=e;this._removeVisualization();const r=this._currentMainCandidate;if(ae(r))return t;const s=this._selectUpdateInput(e);if(ae(s))return t;const{spatialReference:o}=i,c=lu(s,o);if(ae(c))return t;const{view:u}=this,{elevationInfo:g,visualizer:b}=i,S=[],E=Pv(c,u,i),A=r.constraint.closestTo(E);if(!this._arePointsWithinScreenThreshold(E,A,i))return this._resetSnappingState(),t;r.targetPoint=A,S.push(...r.hints);for(const O of this._currentOtherActiveCandidates)O.targetPoint=A,S.push(...O.hints);return U(b)&&this.handles.add(b.draw(S,{spatialReference:o,elevationInfo:LLe(i),view:u,selfSnappingZ:i.selfSnappingZ}),D2),gV(A,u,{z:t.z,m:t.m,spatialReference:t.spatialReference,elevationInfo:g})}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:t}){switch(this._currentSnappedType){case ic.MAIN:return e;case ic.SCENE:return t}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=ic.MAIN}_removeVisualization(){this.handles.remove(D2)}async _snapSinglePoint({point:e,context:t,signal:i}){const{view:r}=this,s=Pv(e,r,t),o=await this._fetchCandidates(s,ys.ALL,t,i);return this._createSnapResult(s,ic.MAIN,o,r,t,{z:e.z,m:e.m,spatialReference:e.spatialReference,elevationInfo:t.elevationInfo},i)}async _snapMultiPoint({point:e,scenePoint:t,context:i,signal:r}){var A,O;const{view:s}=this,{coordinateHelper:o,spatialReference:c}=i;await R7(t.spatialReference,c);const u=lu(t,c),g=Pv(u,s,i),b=await this._fetchCandidates(g,ys.FEATURE,i,r);if(b.length>0){const L=await this._fetchCandidates(g,ys.SELF,i,r);return this._createSnapResult(g,ic.SCENE,[...b,...L],s,i,{z:u.z,m:u.m,spatialReference:u.spatialReference,elevationInfo:i.elevationInfo},r)}const S=Pv(e,s,i),E=await this._fetchCandidates(S,ys.SELF,i,r);return this._createSnapResult(S,ic.MAIN,E,s,i,{z:o.hasZ()&&e.hasZ?(A=e.z)!=null?A:0:void 0,m:o.hasM()&&e.hasM?(O=e.m)!=null?O:0:void 0,spatialReference:e.spatialReference,elevationInfo:i.elevationInfo},r)}async _fetchCandidates(e,t,i,r){return(await Promise.all(this._engines.map(s=>s.fetchCandidates(e,t,i,r)))).flat()}_createSnapResult(e,t,i,r,s,o,c){return{get valid(){return!Fo(c)},apply:()=>{const{spatialReference:u}=s,{snappedPoint:g,hints:b}=this._processCandidates(e,t,i,s);return this._removeVisualization(),U(s.visualizer)&&this.handles.add(s.visualizer.draw(b,{spatialReference:u,elevationInfo:Ir,view:r,selfSnappingZ:s.selfSnappingZ}),D2),gV(g,r,o)}}}_processCandidates(e,t,i,r){if(i.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),hO(e,i);const s=this._currentMainCandidate;if(U(s)){const o=this._findOldConstraintInNewCandidates(s,i);if(o>=0){if(!(i[o]instanceof N2))return this._intersectWithOtherCandidates(o,i,e,t,r);if(this._arePointsWithinScreenThreshold(e,s.targetPoint,r))return this._updateSnappingCandidate(s,t,i,r)}}return this._intersectWithOtherCandidates(0,i,e,t,r)}_findOldConstraintInNewCandidates(e,t){return e instanceof N2?this._findOldCandidateIndex(t,e.first)>=0&&this._findOldCandidateIndex(t,e.second)>=0?0:-1:this._findOldCandidateIndex(t,e)}_intersectWithOtherCandidates(e,t,i,r,s){const{coordinateHelper:o}=s,c=t[e],u=[];for(let g=0;g<t.length;++g){if(g===e)continue;const b=t[g];for(const S of c.constraint.intersect(b.constraint)){const E=S.closestTo(c.targetPoint);u.push([new N2(E,c,b,b.isDraped),this._squaredScreenDistance(i,E,o)])}}return u.length>0&&(u.sort((g,b)=>g[1]-b[1]),u[0][1]<this._squaredPointProximityThreshold(s.pointer))?this._updateSnappingCandidate(u[0][0],r,t,s):this._updateSnappingCandidate(c,r,t,s)}_updateSnappingCandidate(e,t,i,r){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;const s=this._currentMainCandidate.targetPoint,o=[];o.push(...e.hints);for(const c of i){if(e instanceof N2){if(c.constraint.equals(e.first.constraint)||c.constraint.equals(e.second.constraint))continue}else if(c.constraint.equals(e.constraint))continue;const u=c.constraint.closestTo(s);this._squaredScreenDistance(u,s,r.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(c.targetPoint=s,this._currentOtherActiveCandidates.push(c),o.push(...c.hints))}return{snappedPoint:s,hints:o}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}_arePointsWithinScreenThreshold(e,t,i){return this._squaredScreenDistance(e,t,i.coordinateHelper)<this._squaredPointProximityThreshold(i.pointer)}_squaredScreenDistance(e,t,i){return A0(this._toScreen(e,i),this._toScreen(t,i))}_toScreen(e,t){return en(e,t.spatialReference,Ir,this.view)}_findOldCandidateIndex(e,t){let i=-1;for(let r=0;r<e.length;++r)if(t.constraint.equals(e[r].constraint)){i=r;break}return i}get test(){return{visualizationsActive:this.handles.has(D2),engines:this._engines}}};var ic;v([_({constructOnly:!0})],Ha.prototype,"view",void 0),v([_()],Ha.prototype,"options",void 0),v([_({readOnly:!0})],Ha.prototype,"updating",null),v([_()],Ha.prototype,"snappingEnginesFactory",void 0),v([_()],Ha.prototype,"_engines",void 0),v([_()],Ha.prototype,"_squaredMouseProximityTreshold",null),v([_()],Ha.prototype,"_squaredTouchProximityThreshold",null),v([_()],Ha.prototype,"_squaredSatisfiesConstraintThreshold",null),Ha=v([K("esri.views.interactive.snapping.SnappingManager")],Ha),function(e){e[e.MAIN=0]="MAIN",e[e.SCENE=1]="SCENE"}(ic||(ic={}));const D2="visualization-handle";function FLe(e){return U(e.scenePoint)}function LLe({coordinateHelper:e,elevationInfo:t}){return e.hasZ()?Ir:t}let Ss=class extends ss.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var e;(e=this.activeComponent)==null||e.reset()}refreshComponent(){const e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};v([_()],Ss.prototype,"activeComponent",void 0),v([_()],Ss.prototype,"cancelled",void 0),v([_()],Ss.prototype,"history",void 0),v([_()],Ss.prototype,"tool",null),v([_()],Ss.prototype,"type",void 0),v([_()],Ss.prototype,"canUndo",null),v([_()],Ss.prototype,"canRedo",null),v([_()],Ss.prototype,"onEnd",void 0),v([_()],Ss.prototype,"undo",null),v([_()],Ss.prototype,"redo",null),v([_()],Ss.prototype,"toggleTool",void 0),v([_()],Ss.prototype,"addToSelection",void 0),v([_()],Ss.prototype,"removeFromSelection",void 0),Ss=v([K("esri.widgets.Sketch.support.OperationHandle")],Ss);let ox=class extends Ss{};v([_()],ox.prototype,"activeComponent",void 0),ox=v([K("esri.widgets.Sketch.support.CreateOperationHandle")],ox);let lc=class extends Ss{};v([_()],lc.prototype,"activeComponent",void 0),lc=v([K("esri.widgets.Sketch.support.UpdateOperationHandle")],lc);const _V={defaultZ:0},j2={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};let Si=class extends ss.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._handles=new Vr,this._internalGraphicsLayer=new I9({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandles=new Vr,this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new Mee,this.layer=null,this.pointSymbol=new ca({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new fl({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new sn({color:[130,130,130,1],width:2}),this._snappingManager=null,this.tooltipOptions=new Tee,this.updateGraphics=new Be,this.updateOnGraphicClick=!0,this.updatePointSymbol=new ca({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new fl({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new sn({color:[12,207,255],width:2}),this.vertexSymbol=new ca({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=_V,this.defaultUpdateOptions=j2,this.snappingOptions=new fO}initialize(){this._handles.add([$i(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.layers},"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),$i(()=>{var e;return(e=this.layer)==null?void 0:e.graphics},"change",e=>{if(U(this._operationHandle))for(const t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())}),ge(()=>{var e,t;return(t=(e=this.layer)==null?void 0:e.elevationInfo)!=null?t:null},e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},Mn),ge(()=>this.view,e=>{ti(this._snappingManager),e&&(this._snappingManager=new Ha({view:e,options:this.snappingOptions}),e.type==="2d"?pe(()=>import("./editingTools.13d8dd7c.js"),["assets/editingTools.13d8dd7c.js","assets/SnappingVisualizer2D.c09f9200.js","assets/enums.9a5c29c3.js","assets/settings.933c471e.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/earcut.a219bf29.js","assets/plane.a0a08b54.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/triangle.1c8f4155.js","assets/lineSegment.1a0fd96e.js","assets/editPlaneUtils.dd1c9a66.js","assets/quat.eb7bbc3a.js","assets/hydratedFeatures.b4cbc12d.js","assets/GraphicManipulator.5182c2a7.js","assets/boundedPlane.91a64206.js","assets/colorUtils.9d159c9e.js"]):e.type==="3d"&&(pe(()=>import("./editingTools.3f1da471.js").then(function(t){return t.e}),["assets/editingTools.3f1da471.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/vec4f32.c3d64d30.js","assets/Octree.449e609a.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/plane.a0a08b54.js","assets/Util.3efb1a6b.js","assets/lineSegment.1a0fd96e.js","assets/NativeLineMaterial.6f545af4.js","assets/vec3f32.4d8dc001.js","assets/Attribute.98e6fe67.js","assets/VertexColor.glsl.e3d82815.js","assets/requestImageUtils.828b299e.js","assets/OrderIndependentTransparency.43c6e481.js","assets/enums.3c1fa5b5.js","assets/basicInterfaces.f8f3b23b.js","assets/Texture.d66dc1cb.js","assets/VertexArrayObject.ad007c8f.js","assets/triangle.1c8f4155.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/doublePrecisionUtils.d6c628ce.js","assets/quat.eb7bbc3a.js","assets/BufferView.32a50625.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/triangulationUtils.2ec0b7a6.js","assets/earcut.a219bf29.js","assets/deduplicate.97d7ef01.js","assets/hydratedFeatures.b4cbc12d.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/NestedMap.2ac03b78.js","assets/floatRGBA.7b501bd7.js","assets/boundedPlane.91a64206.js","assets/glUtil.9de5d1d0.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/editPlaneUtils.dd1c9a66.js","assets/GraphicManipulator.5182c2a7.js","assets/TranslateTooltipInfos.33287c88.js","assets/axisAngleDegrees.fa497b47.js","assets/persistable.bfebf5ba.js","assets/multiOriginJSONSupportUtils.6105c957.js","assets/resourceExtension.8c0303d1.js","assets/ExtentTooltipInfos.e2302c0a.js"]),pe(()=>import("./GraphicsLayerView3D.4bfa9544.js").then(function(t){return t.G}),["assets/GraphicsLayerView3D.4bfa9544.js","assets/NativeLineMaterial.6f545af4.js","assets/vec3f32.4d8dc001.js","assets/plane.a0a08b54.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/Attribute.98e6fe67.js","assets/VertexColor.glsl.e3d82815.js","assets/requestImageUtils.828b299e.js","assets/OrderIndependentTransparency.43c6e481.js","assets/enums.3c1fa5b5.js","assets/basicInterfaces.f8f3b23b.js","assets/Texture.d66dc1cb.js","assets/VertexArrayObject.ad007c8f.js","assets/Util.3efb1a6b.js","assets/triangle.1c8f4155.js","assets/lineSegment.1a0fd96e.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/doublePrecisionUtils.d6c628ce.js","assets/quat.eb7bbc3a.js","assets/BufferView.32a50625.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/triangulationUtils.2ec0b7a6.js","assets/earcut.a219bf29.js","assets/deduplicate.97d7ef01.js","assets/hydratedFeatures.b4cbc12d.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/NestedMap.2ac03b78.js","assets/Octree.449e609a.js","assets/floatRGBA.7b501bd7.js","assets/boundedPlane.91a64206.js","assets/glUtil.9de5d1d0.js","assets/rendererConversion.c11b1f8c.js","assets/optimizedFeatureQueryEngineAdapter.16a5f108.js","assets/centroid.193a93e9.js","assets/edgeUtils.3b578833.js","assets/vec33.e7ec8171.js","assets/objectResourceUtils.6a0ae4ea.js","assets/DefaultMaterial_COLOR_GAMMA.e47429cc.js","assets/Version.3df17f25.js","assets/resourceUtils.41b277ed.js","assets/symbolColorUtils.aa5ba02e.js","assets/callExpressionWithFeature.565c4416.js","assets/MeshComponent.b7ef4eab.js","assets/imageUtils.da66a66b.js","assets/projection.a57c6cde.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/PooledRBush.1ba01569.js","assets/geometryServiceUtils.f8ebf652.js","assets/LayerView.cc5af741.js"])))},Mn),ge(()=>{var e;return(e=this.view)==null?void 0:e.spatialReference},(e,t)=>{e&&t&&!e.equals(t)&&this.cancel()})]),mLe(this)}destroy(){this.cancel(),this._handles=ti(this._handles),this._viewHandles=ti(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=ti(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?"move":"transform"}get updating(){return this._numUpdating>0||U(this._snappingManager)&&this._snappingManager.updating}get activeTool(){var e,t;return(t=(e=this._operationHandle)==null?void 0:e.tool)!=null?t:null}get activeComponent(){var e,t;return(t=(e=this._operationHandle)==null?void 0:e.activeComponent)!=null?t:null}get createGraphic(){return!U(this.activeComponent)||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",{..._V,...e})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",{...j2,...e,reshapeOptions:{...j2.reshapeOptions,...e==null?void 0:e.reshapeOptions}})}set snappingOptions(e){U(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}get state(){var i;const e=!(!((i=this.view)!=null&&i.ready)||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get view(){return this._get("view")}set view(e){const t=this._get("view");if(t){const{container:r,map:s}=t;r&&(t.cursor=null),s&&s.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}const i="view-ready";this._handles.remove(i),e&&this._handles.add(ts(()=>e.ready,r=>{this._viewHandles.removeAll(),r&&this._viewHandles.add(this._generateViewHandles(e))},Mn),i),this._set("view",e)}cancel(){this._moduleLoaderAbortController=fc(this._moduleLoaderAbortController),this._viewReadyAbortController=fc(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:e,updateGraphics:t}=this;if(e==="active"&&t.length){const{activeTool:i,layer:r}=this,s=t.toArray();r.removeMany(s),this.cancel(),this._emitDeleteEvent({graphics:s,tool:i})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const e=this.updateGraphics.map(t=>t.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}async create(e,t){this.cancel(),await this._waitViewReady();const{view:i,layer:r}=this;if(!i||this.state==="disabled")throw r||this._logMissingLayer(),Ri();if(U(i.activeTool)&&(i.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");Jz(i,this._internalGraphicsLayer);const s=await this._setupCreateOperation(e,t);if(ae(s)||this.destroyed)return void i.map.remove(this._internalGraphicsLayer);const o=()=>{if(s===this._operationHandle){const c=this.createGraphic,u=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),s.cancelled||c==null||r.add(c),this.emit("create",{graphic:c,state:u?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};s.on("complete",o),this._operationHandle=s,i.ready&&i.focus()}async update(e,t){this.cancel(),await this._waitViewReady();const{layer:i,view:r,state:s}=this;if(!r||s==="disabled")throw i||this._logMissingLayer(),Ri();U(r.activeTool)&&(r.activeTool=null);const o=Array.isArray(e)?e:[e];if(e==null||!o||!o.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(o.some(u=>u.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!ae(u.geometry)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const c=await this._setupUpdateOperation(o,t);this.destroyed||ae(c)||$r(c)||(Jz(r,this._internalGraphicsLayer),this._setUpdateOperationHandle(c,t),this.emit("update",{graphics:o,state:"start",aborted:!1,tool:c.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(e){const t=this.view;if(t){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(const i of e)U(i.geometry)&&i.geometry.type!=="mesh"&&!Hi(i.geometry.spatialReference,t.spatialReference)&&(uu(i.geometry.spatialReference,t.spatialReference)||Rd()||await Nd(),i.geometry=lu(i.geometry,t.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var e;this.canUndo()&&((e=this._operationHandle)==null||e.undo())}redo(){var e;this.canRedo()&&((e=this._operationHandle)==null||e.redo())}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(e){const t=this.view;if(!t)return this._logMissingView(),null;if(t.type==="2d"){const s=[];t.map.allLayers.forEach(c=>{c.type!=="vector-tile"&&c.type!=="imagery"||s.push(c)});const o=await t.hitTest(e,{exclude:s});return GOe(o.results)}const i=[t.map.ground];t.map.allLayers.forEach(s=>{s.type==="integrated-mesh"&&i.push(s)});const r=await t.hitTest(e,{exclude:i});if(r.results.length>0){const s=r.results[0];if(U(s)&&s.type==="graphic"&&s.graphic&&(!r.ground.mapPoint||t.map.ground.opacity<1||r.ground.distance-Qs(s.distance,0)>-Math.min(3*r.ground.distance,t.viewingMode==="global"?H6(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return s}return null}_generateViewHandles(e){return[e.on("immediate-click",async t=>{var o;const i=this.state==="active"&&((o=this._operationHandle)==null?void 0:o.type)==="create";if(this.state==="disabled"||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const r=await t.async(()=>this._getFirstHit(ta(t)));let s=null;if(U(r)){const c=r.graphic;this.updateGraphics.includes(c)||c.layer===this.layer?(t.stopPropagation(),s=c):e.type!=="2d"||this._isComponentGraphic(c)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();U(s)&&!this.updateGraphics.includes(s)&&await this.update([s],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},Ai.WIDGET)]}async _setupCreateOperation(e,t){const i=this.view;if(!i)return this._logMissingView(),null;const r={hasZ:i.type==="3d",...this.defaultCreateOptions,...t},s=await this._setupDrawGraphicTool(e,i,r);return ae(s)?null:(i.tools.add(s),i.activeTool=s,this._setupCreateOperationHandle(s))}async _setupDrawGraphicTool(e,t,i){if(e==="multipoint"&&t.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!t)return this._logMissingView(),null;const r=e!=="rectangle",s=e!=="rectangle",o={view:t,mode:e==="rectangle"||e==="circle"?"hybrid":"click",...i,snapToScene:!1,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),snappingManager:this._snappingManager,forceUniformSize:s,centered:r};return t.type==="2d"?this._makeDrawGraphicTool2D(o):this._makeDrawGraphicTool3D(o)}async _makeDrawGraphicTool2D(e){const t=await this._requireModule(pe(()=>import("./editingTools.13d8dd7c.js"),["assets/editingTools.13d8dd7c.js","assets/SnappingVisualizer2D.c09f9200.js","assets/enums.9a5c29c3.js","assets/settings.933c471e.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/earcut.a219bf29.js","assets/plane.a0a08b54.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/triangle.1c8f4155.js","assets/lineSegment.1a0fd96e.js","assets/editPlaneUtils.dd1c9a66.js","assets/quat.eb7bbc3a.js","assets/hydratedFeatures.b4cbc12d.js","assets/GraphicManipulator.5182c2a7.js","assets/boundedPlane.91a64206.js","assets/colorUtils.9d159c9e.js"]));return $r(t)||this.destroyed?null:new t.module.DrawGraphicTool2D({...e,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:NLe(e.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions})}async _makeDrawGraphicTool3D(e){const t=await this._requireModule(pe(()=>import("./editingTools.3f1da471.js").then(function(r){return r.e}),["assets/editingTools.3f1da471.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/vec4f32.c3d64d30.js","assets/Octree.449e609a.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/plane.a0a08b54.js","assets/Util.3efb1a6b.js","assets/lineSegment.1a0fd96e.js","assets/NativeLineMaterial.6f545af4.js","assets/vec3f32.4d8dc001.js","assets/Attribute.98e6fe67.js","assets/VertexColor.glsl.e3d82815.js","assets/requestImageUtils.828b299e.js","assets/OrderIndependentTransparency.43c6e481.js","assets/enums.3c1fa5b5.js","assets/basicInterfaces.f8f3b23b.js","assets/Texture.d66dc1cb.js","assets/VertexArrayObject.ad007c8f.js","assets/triangle.1c8f4155.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/doublePrecisionUtils.d6c628ce.js","assets/quat.eb7bbc3a.js","assets/BufferView.32a50625.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/triangulationUtils.2ec0b7a6.js","assets/earcut.a219bf29.js","assets/deduplicate.97d7ef01.js","assets/hydratedFeatures.b4cbc12d.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/NestedMap.2ac03b78.js","assets/floatRGBA.7b501bd7.js","assets/boundedPlane.91a64206.js","assets/glUtil.9de5d1d0.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/editPlaneUtils.dd1c9a66.js","assets/GraphicManipulator.5182c2a7.js","assets/TranslateTooltipInfos.33287c88.js","assets/axisAngleDegrees.fa497b47.js","assets/persistable.bfebf5ba.js","assets/multiOriginJSONSupportUtils.6105c957.js","assets/resourceExtension.8c0303d1.js","assets/ExtentTooltipInfos.e2302c0a.js"]));if($r(t)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new t.module.DrawGraphicTool3D({...e,elevationInfo:i,snapToScene:!U(i)||i.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})}_setupCreateOperationHandle(e){const t=this.view;if(!t)return this._logMissingView(),null;let i=null;const r=e.forceUniformSize,s=e.centered,o=[t.on("key-down",u=>{if(u.key===Ar.pan)u.stopPropagation(),u.repeat||(e.enabled=!1);else if(u.key===Ar.complete)u.stopPropagation(),e.completeCreateOperation();else if(u.key!==Ar.vertexAdd||u.repeat)u.key===Ar.undo?(u.stopPropagation(),c.undo()):u.key===Ar.redo?(u.stopPropagation(),c.redo()):u.key!==Ar.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||u.repeat?u.key===Ar.center&&(u.repeat||(e.centered=!s,u.stopPropagation())):(e.forceUniformSize=!r,u.stopPropagation());else{const g=e.drawOperation.geometryType;g!=="polyline"&&g!=="polygon"&&g!=="multipoint"||(u.stopPropagation(),e.drawOperation.commitStagedVertex())}},Ai.WIDGET),t.on("key-up",u=>{u.key===Ar.pan?e.enabled=!0:u.key!==Ar.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?u.key===Ar.center&&(e.centered=s,u.stopPropagation()):(e.forceUniformSize=r,u.stopPropagation())},Ai.WIDGET),e.on("vertex-add",u=>{switch(i=ae(i)?"start":"active",u.operation){case"apply":this.emit("create",{graphic:e.graphic,state:i,tool:this.activeTool,toolEventInfo:u,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",u=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:u.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",u=>{switch(u.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:u,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",u=>{this._set("createGraphic",u.graphic),i="complete",u.aborted?c&&c.cancel():c&&c.complete()}),ge(()=>this._getGraphicSymbolFromTool(e.geometryType),u=>{e.graphicSymbol=u})],c=new ox({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{var u;o.forEach(g=>g.remove()),o.length=0,(u=t.tools)==null||u.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return c}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol}}async _setupUpdateOperation(e,t){const{layer:i,view:r}=this;if(!r)return this._logMissingView(),null;const s={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...t,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...t==null?void 0:t.reshapeOptions}};let o=s.tool;for(const c of e)i.remove(c),i.add(c);if(r.type==="3d"){if(e.length===0)return null;switch(o){case"move":return this._setupMove3DOperation(e,s,r,o);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const c=P2(e[0]);return c===fi.SUPPORTED?this._setupReshape3DOperation(e[0],s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${M4(c)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(e,s,r)}}switch(o){case"move":return this._setupMove2DOperation(e,s,r);case"reshape":{if(e.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const c=P2(e[0]);return c===fi.SUPPORTED?this._setupTransformOrReshape2DOperation(e,o,s,r):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${M4(c)}).`),null)}case"transform":if(e.length===1){const c=Cy(e[0].geometry,"type");c!=="point"&&c!=="multipoint"||(o="reshape")}return this._setupTransformOrReshape2DOperation(e,o,s,r)}}async _setupMove3DOperation(e,t,i,r,s=!1){for(const b of e){const S=vPe(b);if(S!==fi.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${M4(S)}).`),null}const o=await this._requireModule(pe(()=>import("./editingTools.3f1da471.js").then(function(b){return b.e}),["assets/editingTools.3f1da471.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/vec4f32.c3d64d30.js","assets/Octree.449e609a.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/plane.a0a08b54.js","assets/Util.3efb1a6b.js","assets/lineSegment.1a0fd96e.js","assets/NativeLineMaterial.6f545af4.js","assets/vec3f32.4d8dc001.js","assets/Attribute.98e6fe67.js","assets/VertexColor.glsl.e3d82815.js","assets/requestImageUtils.828b299e.js","assets/OrderIndependentTransparency.43c6e481.js","assets/enums.3c1fa5b5.js","assets/basicInterfaces.f8f3b23b.js","assets/Texture.d66dc1cb.js","assets/VertexArrayObject.ad007c8f.js","assets/triangle.1c8f4155.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/doublePrecisionUtils.d6c628ce.js","assets/quat.eb7bbc3a.js","assets/BufferView.32a50625.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/triangulationUtils.2ec0b7a6.js","assets/earcut.a219bf29.js","assets/deduplicate.97d7ef01.js","assets/hydratedFeatures.b4cbc12d.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/NestedMap.2ac03b78.js","assets/floatRGBA.7b501bd7.js","assets/boundedPlane.91a64206.js","assets/glUtil.9de5d1d0.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/editPlaneUtils.dd1c9a66.js","assets/GraphicManipulator.5182c2a7.js","assets/TranslateTooltipInfos.33287c88.js","assets/axisAngleDegrees.fa497b47.js","assets/persistable.bfebf5ba.js","assets/multiOriginJSONSupportUtils.6105c957.js","assets/resourceExtension.8c0303d1.js","assets/ExtentTooltipInfos.e2302c0a.js"]));if($r(o))return o;const c=new o.module.GraphicMoveTool({view:i,enableZ:t.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});i.tools.add(c),c.graphics.addMany(e),s||this.updateGraphics.addMany(e);const u=[],g=new lc({activeComponent:c,tool:r,type:"update",onEnd:()=>{var b;u.forEach(S=>S.remove()),u.length=0,(b=i.tools)==null||b.remove(c),c.destroyed||c.destroy()},undo:()=>{z2(g,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{V2(g,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:b=>{this.updateGraphics.push(b),c.graphics.push(b),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[b],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:b=>{const S=this.updateGraphics.indexOf(b);g.history.undo.forEach(E=>E.updates.splice(S,1)),g.history.redo.forEach(E=>E.updates.splice(S,1)),this.updateGraphics.remove(b),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[b],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?c.graphics.remove(b):g.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1||r!=="transform")return;const b=this.updateGraphics.getItemAt(0);if(P2(b)!==fi.SUPPORTED)return;const S=await this._setupReshape3DOperation(b,t,i,!0);$r(S)||(g.onEnd(),g.destroy(),this._setUpdateOperationHandle(S,t))}});return u.push(...this._getHandlesForComponent(g,t),i.on("immediate-click",b=>this._getCommonUpdateOperationClickHandlers(g,b,t),Ai.WIDGET),i.on("key-down",b=>{this._getCommonUpdateOperationKeyDownHandlers(g,b)},Ai.WIDGET)),g}_setupGraphicTransform3DOperation(e,t,i,r=!1){if(e.length===1&&SPe(e[0])===fi.SUPPORTED){const s=e[0],o=s.geometry;if(U(o)&&(o.type==="point"||o.type==="mesh"))return this._setupPointTransform3DOperation(s,t,i);if(U(o)&&(o.type==="polygon"||o.type==="polyline"))return this._setupPolyTransform3DOperation(s,t,i,r)}return this._setupMove3DOperation(e,t,i,"transform",r)}async _setupPointTransform3DOperation(e,t,i){const r="transform",{enableRotation:s,enableScaling:o,enableZ:c}=t,u=await this._requireModule(pe(()=>import("./editingTools.3f1da471.js").then(function(E){return E.e}),["assets/editingTools.3f1da471.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/vec4f32.c3d64d30.js","assets/Octree.449e609a.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/plane.a0a08b54.js","assets/Util.3efb1a6b.js","assets/lineSegment.1a0fd96e.js","assets/NativeLineMaterial.6f545af4.js","assets/vec3f32.4d8dc001.js","assets/Attribute.98e6fe67.js","assets/VertexColor.glsl.e3d82815.js","assets/requestImageUtils.828b299e.js","assets/OrderIndependentTransparency.43c6e481.js","assets/enums.3c1fa5b5.js","assets/basicInterfaces.f8f3b23b.js","assets/Texture.d66dc1cb.js","assets/VertexArrayObject.ad007c8f.js","assets/triangle.1c8f4155.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/doublePrecisionUtils.d6c628ce.js","assets/quat.eb7bbc3a.js","assets/BufferView.32a50625.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/triangulationUtils.2ec0b7a6.js","assets/earcut.a219bf29.js","assets/deduplicate.97d7ef01.js","assets/hydratedFeatures.b4cbc12d.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/NestedMap.2ac03b78.js","assets/floatRGBA.7b501bd7.js","assets/boundedPlane.91a64206.js","assets/glUtil.9de5d1d0.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/editPlaneUtils.dd1c9a66.js","assets/GraphicManipulator.5182c2a7.js","assets/TranslateTooltipInfos.33287c88.js","assets/axisAngleDegrees.fa497b47.js","assets/persistable.bfebf5ba.js","assets/multiOriginJSONSupportUtils.6105c957.js","assets/resourceExtension.8c0303d1.js","assets/ExtentTooltipInfos.e2302c0a.js"]));if($r(u))return u;const g=new u.module.GraphicTransformTool({graphic:e,view:i,enableRotation:s,enableScaling:o,enableZ:c,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});i.tools.add(g),this.updateGraphics.add(e);const b=[],S=new lc({activeComponent:g,tool:r,type:"update",onEnd:()=>{var E;b.forEach(A=>A.remove()),b.length=0,(E=i.tools)==null||E.remove(g),g.destroyed||g.destroy()},undo:()=>{z2(S,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},redo:()=>{V2(S,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async E=>{this.updateGraphics.add(E),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[E],removed:[],type:"selection-change"},type:"update"});const A=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);$r(A)||(S.onEnd(),S.destroy(),this._setUpdateOperationHandle(A,t))},removeFromSelection:E=>{this.updateGraphics.remove(E),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[E],type:"selection-change"},type:"update"}),S.complete()},toggleTool:()=>{}});return b.push(...this._getHandlesForComponent(S,t),i.on("immediate-click",E=>this._getCommonUpdateOperationClickHandlers(S,E,t),Ai.WIDGET),i.on("key-down",E=>{this._getCommonUpdateOperationKeyDownHandlers(S,E)},Ai.WIDGET)),S}async _setupPolyTransform3DOperation(e,t,i,r=!1){const s="transform",{enableRotation:o,enableScaling:c,enableZ:u,preserveAspectRatio:g}=t,b=await this._requireModule(pe(()=>import("./editingTools.3f1da471.js").then(function(O){return O.e}),["assets/editingTools.3f1da471.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/vec4f32.c3d64d30.js","assets/Octree.449e609a.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/plane.a0a08b54.js","assets/Util.3efb1a6b.js","assets/lineSegment.1a0fd96e.js","assets/NativeLineMaterial.6f545af4.js","assets/vec3f32.4d8dc001.js","assets/Attribute.98e6fe67.js","assets/VertexColor.glsl.e3d82815.js","assets/requestImageUtils.828b299e.js","assets/OrderIndependentTransparency.43c6e481.js","assets/enums.3c1fa5b5.js","assets/basicInterfaces.f8f3b23b.js","assets/Texture.d66dc1cb.js","assets/VertexArrayObject.ad007c8f.js","assets/triangle.1c8f4155.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/doublePrecisionUtils.d6c628ce.js","assets/quat.eb7bbc3a.js","assets/BufferView.32a50625.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/triangulationUtils.2ec0b7a6.js","assets/earcut.a219bf29.js","assets/deduplicate.97d7ef01.js","assets/hydratedFeatures.b4cbc12d.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/NestedMap.2ac03b78.js","assets/floatRGBA.7b501bd7.js","assets/boundedPlane.91a64206.js","assets/glUtil.9de5d1d0.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/editPlaneUtils.dd1c9a66.js","assets/GraphicManipulator.5182c2a7.js","assets/TranslateTooltipInfos.33287c88.js","assets/axisAngleDegrees.fa497b47.js","assets/persistable.bfebf5ba.js","assets/multiOriginJSONSupportUtils.6105c957.js","assets/resourceExtension.8c0303d1.js","assets/ExtentTooltipInfos.e2302c0a.js"]));if($r(b))return b;const S=new b.module.ExtentTransformTool({graphic:e,view:i,enableRotation:o,enableScaling:c,enableZ:u,preserveAspectRatio:g,tooltipOptions:this.tooltipOptions});i.tools.add(S),r||this.updateGraphics.add(e);const E=[],A=new lc({activeComponent:S,tool:s,type:"update",onEnd:()=>{var O;E.forEach(L=>L.remove()),E.length=0,(O=i.tools)==null||O.remove(S),S.destroyed||S.destroy()},canUndo:()=>S.canUndo,undo:()=>{S.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>S.canRedo,redo:()=>{S.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async O=>{this.updateGraphics.add(O),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[O],removed:[],type:"selection-change"},type:"update"});const L=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);$r(L)||(A.onEnd(),A.destroy(),this._setUpdateOperationHandle(L,t))},removeFromSelection:O=>{this.updateGraphics.remove(O),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[O],type:"selection-change"},type:"update"}),A.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1)return;const O=this.updateGraphics.getItemAt(0);if(P2(O)!==fi.SUPPORTED)return;const L=await this._setupReshape3DOperation(O,t,i,!0);$r(L)||(A.onEnd(),A.destroy(),this._setUpdateOperationHandle(L,t))}});return E.push(...this._getHandlesForComponent(A,t),i.on("immediate-click",O=>this._getCommonUpdateOperationClickHandlers(A,O,t),Ai.WIDGET),i.on("key-down",O=>this._getCommonUpdateOperationKeyDownHandlers(A,O),Ai.WIDGET),i.on("key-down",O=>{O.key!==Ar.constraint||O.repeat||(S.preserveAspectRatio=!S.preserveAspectRatio,O.stopPropagation())},Ai.WIDGET),i.on("key-up",O=>{O.key===Ar.constraint&&(S.preserveAspectRatio=!S.preserveAspectRatio,O.stopPropagation())},Ai.WIDGET)),A}async _setupMove2DOperation(e,t,i){const r="move";this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=await this._getGraphicMover(e,t,i);if($r(s))return s;const o=new lc({activeComponent:s,tool:r,type:"update",onEnd:()=>{var b;this._displayDefaultCursor(),g.forEach(S=>S.remove()),u.forEach(S=>S.remove()),g=[],u=[],s.destroy(),(b=this._internalGraphicsLayer)==null||b.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const b=this.updateGraphics.toArray();z2(o,b),o.refreshComponent(),this._emitUndoEvent({graphics:b,tool:r})},redo:()=>{const b=this.updateGraphics.toArray();V2(o,b),o.refreshComponent(),this._emitRedoEvent({graphics:b,tool:r})},addToSelection:async b=>{await this._updateSpatialReference(b),this.updateGraphics.push(b),s.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[b],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:b=>{const S=this.updateGraphics.indexOf(b);o.history.undo.forEach(A=>A.updates.splice(S,1)),o.history.redo.forEach(A=>A.updates.splice(S,1)),this.updateGraphics.remove(b);const E=this.updateGraphics.toArray();this.emit("update",{graphics:E,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[b],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?s.graphics=E:o.complete()}});let c=!1,u=[i.on("immediate-click",b=>this._getCommonUpdateOperationClickHandlers(o,b,t),Ai.WIDGET),i.on("key-down",b=>{this._getCommonUpdateOperationKeyDownHandlers(o,b),b.key!==Ar.constraint||b.repeat||(c=!0,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},Ai.WIDGET),i.on("key-up",b=>{b.key===Ar.constraint&&c&&(c=!1,s.enableMoveAllGraphics=!s.enableMoveAllGraphics)},Ai.WIDGET)],g=this._getHandlesForComponent(o,t);return o}async _setupReshape3DOperation(e,t,i,r=!1){const s="reshape",o=await this._requireModule(pe(()=>import("./editingTools.3f1da471.js").then(function(S){return S.e}),["assets/editingTools.3f1da471.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/vec4f32.c3d64d30.js","assets/Octree.449e609a.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/plane.a0a08b54.js","assets/Util.3efb1a6b.js","assets/lineSegment.1a0fd96e.js","assets/NativeLineMaterial.6f545af4.js","assets/vec3f32.4d8dc001.js","assets/Attribute.98e6fe67.js","assets/VertexColor.glsl.e3d82815.js","assets/requestImageUtils.828b299e.js","assets/OrderIndependentTransparency.43c6e481.js","assets/enums.3c1fa5b5.js","assets/basicInterfaces.f8f3b23b.js","assets/Texture.d66dc1cb.js","assets/VertexArrayObject.ad007c8f.js","assets/triangle.1c8f4155.js","assets/Indices.27b9c798.js","assets/VertexAttribute.34e3daf1.js","assets/doublePrecisionUtils.d6c628ce.js","assets/quat.eb7bbc3a.js","assets/BufferView.32a50625.js","assets/VertexElementDescriptor.5da9dfe9.js","assets/triangulationUtils.2ec0b7a6.js","assets/earcut.a219bf29.js","assets/deduplicate.97d7ef01.js","assets/hydratedFeatures.b4cbc12d.js","assets/InterleavedLayout.a42ad5fa.js","assets/types.bf551170.js","assets/NestedMap.2ac03b78.js","assets/floatRGBA.7b501bd7.js","assets/boundedPlane.91a64206.js","assets/glUtil.9de5d1d0.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/editPlaneUtils.dd1c9a66.js","assets/GraphicManipulator.5182c2a7.js","assets/TranslateTooltipInfos.33287c88.js","assets/axisAngleDegrees.fa497b47.js","assets/persistable.bfebf5ba.js","assets/multiOriginJSONSupportUtils.6105c957.js","assets/resourceExtension.8c0303d1.js","assets/ExtentTooltipInfos.e2302c0a.js"]));if($r(o))return o;const c=t.reshapeOptions,u=new o.module.GraphicReshapeTool({view:i,graphic:e,enableZVertex:t.enableZ&&(c==null?void 0:c.vertexOperation)==="move",enableZShape:t.enableZ&&(c==null?void 0:c.shapeOperation)==="move",enableMoveGraphic:(c==null?void 0:c.shapeOperation)==="move"||(c==null?void 0:c.shapeOperation)==="move-xy",enableMidpoints:(c==null?void 0:c.edgeOperation)==="split",enableEdgeOffset:(c==null?void 0:c.edgeOperation)==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});i.tools.add(u),r||this.updateGraphics.add(e);const g=[],b=new lc({activeComponent:u,tool:s,type:"update",onEnd:()=>{var S;g.forEach(E=>E.remove()),g.length=0,(S=i.tools)==null||S.remove(u),u.destroyed||u.destroy()},canUndo:()=>u.canUndo,undo:()=>{u.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s})},canRedo:()=>u.canRedo,redo:()=>{u.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s})},addToSelection:async S=>{this.updateGraphics.add(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[S],removed:[],type:"selection-change"},type:"update"});const E=await this._setupMove3DOperation(this.updateGraphics.toArray(),t,i,"transform",!0);$r(E)||(b.onEnd(),b.destroy(),this._setUpdateOperationHandle(E,t))},removeFromSelection:S=>{this.updateGraphics.remove(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[S],type:"selection-change"},type:"update"}),b.complete()},toggleTool:async()=>{if(t.toggleToolOnClick===!1)return;const S=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,i,!0);$r(S)||(b.onEnd(),b.destroy(),this._setUpdateOperationHandle(S,t))}});return g.push(...this._getHandlesForComponent(b,t),i.on("immediate-click",S=>this._getCommonUpdateOperationClickHandlers(b,S,t),Ai.WIDGET),i.on("key-down",S=>{this._getCommonUpdateOperationKeyDownHandlers(b,S)},Ai.WIDGET)),b}async _setupTransformOrReshape2DOperation(e,t,i,r){this.updateGraphics.addMany(e),await this._updateSpatialReference(e);const s=t==="transform"?await this._getBox(e,i,r):await this._getReshape(e,i,r);if($r(s))return s;const o=new lc({activeComponent:s,type:"update",onEnd:()=>{u.forEach(g=>g.remove()),c.forEach(g=>g.remove()),u=[],c=[],o.activeComponent&&!o.activeComponent.destroyed&&o.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{z2(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},redo:()=>{V2(o,this.updateGraphics.toArray()),o.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o.tool})},addToSelection:async g=>{let b=o.activeComponent;if((b==null?void 0:b.type)==="reshape"){const S=[...this.updateGraphics,g];this.updateGraphics.removeAll();const E=await this._setupMove2DOperation(S,i,r);if($r(E))return;o.onEnd(),o.destroy(),this._setUpdateOperationHandle(E,i)}else this.updateGraphics.add(g),b.graphics=this.updateGraphics.toArray(),b.refresh(),o.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[g],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async g=>{const b=this.updateGraphics.indexOf(g);o.history.undo.forEach(E=>E.updates.splice(b,1)),o.history.redo.forEach(E=>E.updates.splice(b,1)),this.updateGraphics.remove(g);const S=this.updateGraphics.toArray();if(S.length===0)o.complete();else{const E=S[0].geometry;S.length!==1||!U(E)||E.type!=="point"&&E.type!=="multipoint"?o.activeComponent.graphics=S:o.toggleTool()}this.emit("update",{graphics:S,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[g],type:"selection-change"},type:"update"})},toggleTool:async()=>{var E;if(this.updateGraphics.length>1)return;const g=this.updateGraphics.getItemAt(0),b=g.geometry;if(U(b)&&(o.tool==="reshape"&&(b.type==="point"||b.type==="multipoint")||o.tool==="transform"&&b.type==="extent"))return;let S=null;o.tool==="transform"?S=await this._getReshape([g],i,r):o.tool==="reshape"&&(S=await this._getBox([g],i,r)),$r(S)||((E=o.activeComponent)==null||E.destroy(),o.activeComponent=S,o.activeComponent&&(u.forEach(A=>A.remove()),u=this._getHandlesForComponent(o,i)))}});let c=[r.on("immediate-click",g=>this._getCommonUpdateOperationClickHandlers(o,g,i),Ai.WIDGET),r.on("key-down",g=>{if(this._getCommonUpdateOperationKeyDownHandlers(o,g),g.key===Ar.constraint&&!g.repeat&&o){const b=o.activeComponent;b&&b.type==="box"&&(b.preserveAspectRatio=!b.preserveAspectRatio)}},Ai.WIDGET),r.on("key-up",g=>{if(g.key===Ar.constraint&&o){const b=o.activeComponent;b&&b.type==="box"&&(b.preserveAspectRatio=!b.preserveAspectRatio)}},Ai.WIDGET)],u=this._getHandlesForComponent(o,i);return o}async _getGraphicMover(e,t,i){const{enableMoveAllGraphics:r}=t,s=await this._requireModule(pe(()=>import("./GraphicMover.f8f4b2f9.js").then(function(o){return o.G}),["assets/GraphicMover.f8f4b2f9.js","assets/GraphicManipulator.5182c2a7.js"]));return $r(s)?s:new s.module.default({enableMoveAllGraphics:r,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:e,view:i,callbacks:{onGraphicMoveStart:({dx:o,dy:c,graphic:u})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:c,mover:u,type:"move-start"},type:"update"})},onGraphicMove:({dx:o,dy:c,graphic:u})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:c,mover:u,type:"move"},type:"update"}),onGraphicMoveStop:({dx:o,dy:c,graphic:u})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:o,dy:c,mover:u,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(e,t,i){const{enableRotation:r,enableScaling:s,preserveAspectRatio:o}=t,c=await this._requireModule(pe(()=>import("./Box.4a5c41cc.js"),["assets/Box.4a5c41cc.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/GraphicManipulator.5182c2a7.js","assets/GraphicMover.f8f4b2f9.js","assets/settings.933c471e.js","assets/ExtentTooltipInfos.e2302c0a.js","assets/TranslateTooltipInfos.33287c88.js"]));return $r(c)?c:new c.module.default({graphics:e,enableRotation:r,enableScaling:s,preserveAspectRatio:o,layer:this._internalGraphicsLayer,view:i,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"}),onMove:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"}),onMoveStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"}),onScaleStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"}),onScale:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"}),onScaleStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"}),onRotateStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"}),onRotate:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"}),onRotateStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...u},type:"update"})}})}async _getReshape(e,t,i){var c,u;const r=((c=t.reshapeOptions)==null?void 0:c.edgeOperation)==="split",s=((u=t.reshapeOptions)==null?void 0:u.shapeOperation)==="move",o=await this._requireModule(pe(()=>import("./Reshape.0ac898db.js"),["assets/Reshape.0ac898db.js","assets/automaticLengthMeasurementUtils.06e82903.js","assets/spatialReferenceEllipsoidUtils.7f3e3256.js","assets/SnappingVisualizer2D.c09f9200.js","assets/enums.9a5c29c3.js","assets/settings.933c471e.js","assets/SnappingContext.023005d4.js","assets/PointSnappingHint.08747e02.js","assets/earcut.a219bf29.js","assets/plane.a0a08b54.js","assets/sphere.67ec4acb.js","assets/mat3f64.9180efcb.js","assets/mat4f64.9070f685.js","assets/quatf64.1dc83f1c.js","assets/triangle.1c8f4155.js","assets/lineSegment.1a0fd96e.js","assets/GraphicManipulator.5182c2a7.js","assets/GraphicMover.f8f4b2f9.js","assets/TranslateTooltipInfos.33287c88.js"]));return $r(o)?o:new o.module.default({enableMidpoints:r,enableMovement:s,graphic:e[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:i,callbacks:{onReshapeStart:g=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...g},type:"update"}),onReshape:g=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...g},type:"update"}),onReshapeStop:({mover:g,type:b})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:g,type:b},type:"update"}),onMoveStart:({dx:g,dy:b,mover:S,type:E})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:g,dy:b,mover:S,type:E},type:"update"}),onMove:({dx:g,dy:b,mover:S,type:E})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:g,dy:b,mover:S,type:E},type:"update"}),onMoveStop:({dx:g,dy:b,mover:S,type:E})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:g,dy:b,mover:S,type:E},type:"update"}),onVertexAdd:({added:g,type:b,vertices:S})=>{const E=g.map(A=>XP(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:E,vertices:S,type:b},type:"update"})},onVertexRemove:({removed:g,type:b,vertices:S})=>{const E=g.map(A=>XP(A.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:E,vertices:S,type:b},type:"update"})}}})}_getHandlesForComponent(e,t){const i=e.activeComponent;if(!i)return[];switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:r,viewEvent:s})=>{var o;(o=s.native)!=null&&o.shiftKey&&(s.stopPropagation(),e.removeFromSelection(r))}),i.on("graphic-move-start",r=>e.addToHistory(Cu(r.allGraphics)))];case"box":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(Cu(r.graphics))),i.on("rotate-start",r=>e.addToHistory(Cu(r.graphics))),i.on("scale-start",r=>e.addToHistory(Cu(r.graphics)))];case"reshape":return[i.on("graphic-click",r=>this._onTransformOrReshape2DGraphicClick(e,t,r)),i.on("move-start",r=>e.addToHistory(Cu([r.mover]))),i.on("reshape-start",r=>e.addToHistory(Cu([r.graphic]))),i.on("vertex-add",r=>e.addToHistory(Cu([r.oldGraphic]))),i.on("vertex-remove",r=>e.addToHistory(Cu([r.oldGraphic])))];case"move-3d":return[i.on("graphic-move-start",r=>{e.addToHistory(Cu(r.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move-start"},type:"update"})}),i.on("graphic-move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r.dx,dy:r.dy,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move"},type:"update"})}),i.on("graphic-move-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:r.allGraphics.length>0?r.allGraphics[0]:null,type:"move-stop"},type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];case"transform-3d":return[i.on("record-undo",({record:r})=>{e.addToHistory({updates:[r]})}),i.on("graphic-translate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-start"},type:"update"})}),i.on("graphic-translate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move-stop"},type:"update"})}),i.on("graphic-rotate-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate-start"},type:"update"})}),i.on("graphic-rotate-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate-stop"},type:"update"})}),i.on("graphic-scale-start",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-start"},type:"update"})}),i.on("graphic-scale-stop",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale-stop"},type:"update"})}),i.on("graphic-translate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,dx:r.dxScreen,dy:r.dyScreen,type:"move"},type:"update"})}),i.on("graphic-rotate",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,angle:r.angle,type:"rotate"},type:"update"})}),i.on("graphic-scale",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:r.graphic,xScale:r.xScale,yScale:r.yScale,type:"scale"},type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})];case"reshape-3d":return[i.on("reshape",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("move",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("vertex-add",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("vertex-remove",r=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:r,type:"update"})}),i.on("immediate-click",r=>{r.shiftKey?this._toggleSelection([r.graphic],e,t):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,t,i){var o;const{graphic:r,viewEvent:s}=i;return((o=s.native)==null?void 0:o.shiftKey)&&r.layer===this.layer?(s.stopPropagation(),e.removeFromSelection(r)):t.toggleToolOnClick?(s.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){var s;this._operationHandle=e;const i=(s=this.view)==null?void 0:s.map;this._disablePopup(t);const r=()=>{if(e===this._operationHandle){const o=this.updateGraphics.toArray(),c=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:c,toolEventInfo:null,type:"update"})}};e.on("complete",r)}async _getCommonUpdateOperationClickHandlers(e,t,i){const r=ta(t),s=await t.async(()=>this._getFirstHit(r));if(ae(s))return void e.complete();if(t.native.shiftKey&&this._toggleSelection([s.graphic],e,i))return void t.stopPropagation();this.updateGraphics.includes(s.graphic)?t.stopPropagation():e.complete()}_toggleSelection(e,t,i){const r=!!i.multipleSelectionEnabled;return e.some(s=>s!=null&&!(!r||s.layer!==this.layer)&&(this.updateGraphics.includes(s)?t.removeFromSelection(s):t.addToSelection(s),!0))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;const i=t.key;i===Ar.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):i===Ar.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):i===Ar.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&Ar.delete.includes(i)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||this._operationHandle.type!=="update")return;const t=this.activeComponent,i=this.updateGraphics.toArray();ae(t)||t.type==="reshape-3d"||(t.type!=="reshape"||i.length===1&&Cy(i[0].geometry,"type")==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){var e,t;this._internalGraphicsLayer&&((t=(e=this.view)==null?void 0:e.map)==null||t.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=ti(this._internalGraphicsLayer))}_isComponentGraphic(e){const{activeComponent:t}=this;return!(!e||ae(t))&&(e.attributes&&e.attributes.esriSketchTool||t.type==="draw-2d"&&t.graphic===e||(t.type==="box"||t.type==="reshape")&&t.isUIGraphic(e))}_displayPointerCursor(){this.view&&this.view.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view&&this.view.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,t,i){Ie.getLogger(this.declaredClass).error(new de(e,t,i))}async _requireModule(e){const t=new AbortController;this._moduleLoaderAbortController=t;const i=await e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(e){this.emit("undo",{...e,type:"undo"})}_emitRedoEvent(e){this.emit("redo",{...e,type:"redo"})}_emitDeleteEvent(e){this.emit("delete",{...e,type:"delete"})}get test(){return{operationHandle:this._operationHandle,defaultUpdateOptions:j2}}wait(){return In(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){var t,i,r;return((t=this.view)==null?void 0:t.type)!=="3d"||this.updateOnGraphicClick||((r=(i=e)==null?void 0:i.toggleToolOnClick)!=null?r:!1)}_disablePopup(e){var i;if(!this._disablePopupEnabled(e))return;const t=(i=this.view)==null?void 0:i.popup;t&&ae(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=t.autoOpenEnabled,t.autoOpenEnabled=!1)}_restorePopup(e){var i;if(!this._disablePopupEnabled(e))return;const t=(i=this.view)==null?void 0:i.popup;t&&U(this._originalAutoOpenEnabled)&&(t.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}async _waitViewReady(){const e=this.view;e?(fc(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await i0(In(()=>e==null?void 0:e.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",xV("view"))}_logMissingLayer(){this._logError(RLe,xV("layer"))}};v([_()],Si.prototype,"updating",null),v([_()],Si.prototype,"_operationHandle",void 0),v([_({readOnly:!0})],Si.prototype,"activeTool",null),v([_()],Si.prototype,"activeFillSymbol",void 0),v([_()],Si.prototype,"activeLineSymbol",void 0),v([_()],Si.prototype,"activeVertexSymbol",void 0),v([_()],Si.prototype,"allowDeleteKey",void 0),v([_({readOnly:!0})],Si.prototype,"createGraphic",null),v([_()],Si.prototype,"defaultCreateOptions",null),v([_()],Si.prototype,"defaultUpdateOptions",null),v([_({type:Mee,nonNullable:!0})],Si.prototype,"labelOptions",void 0),v([_()],Si.prototype,"layer",void 0),v([_({types:Hn})],Si.prototype,"pointSymbol",void 0),v([_({types:Hn})],Si.prototype,"polygonSymbol",void 0),v([_({types:Hn})],Si.prototype,"polylineSymbol",void 0),v([_({type:fO,nonNullable:!0})],Si.prototype,"snappingOptions",null),v([_()],Si.prototype,"_snappingManager",void 0),v([_({readOnly:!0})],Si.prototype,"state",null),v([_({type:Tee,nonNullable:!0})],Si.prototype,"tooltipOptions",void 0),v([_({readOnly:!0})],Si.prototype,"updateGraphics",void 0),v([_()],Si.prototype,"updateOnGraphicClick",void 0),v([_({types:Hn})],Si.prototype,"updatePointSymbol",void 0),v([_({types:Hn})],Si.prototype,"updatePolygonSymbol",void 0),v([_({types:Hn})],Si.prototype,"updatePolylineSymbol",void 0),v([_({types:Hn})],Si.prototype,"vertexSymbol",void 0),v([_({value:null})],Si.prototype,"view",null),Si=v([K("esri.widgets.Sketch.SketchViewModel")],Si);const RLe="sketch:missing-property",xV=e=>`Property '${e}' is missing on SketchViewModel.`;function NLe(e){return e==="polygon"||e==="rectangle"||e==="circle"}function z2(e,t){gte("undo",e.history.undo,e.history.redo,t)}function V2(e,t){gte("redo",e.history.redo,e.history.undo,t)}function gte(e,t,i,r){const s=t.pop();if(!s)return;const o=s.updates,c=[];r.forEach((u,g)=>{const b=o[g];b!=null&&("geometry"in b&&U(b.geometry)&&(c.push({geometry:u.geometry}),u.geometry=b.geometry),"symbol"in b&&U(b.symbol)&&(c.push({symbol:u.symbol}),u.symbol=b.symbol),"undo"in b&&(c.push(b),b[e](u)))}),i.push({updates:c})}function Cu(e){return{updates:e.map(t=>({geometry:t.geometry}))}}function $r(e){return"requireError"in e&&e.requireError==="aborted"}const DLe=Si,vte="esri.widgets.Editor.EditorViewModel",Fv=Ie.getLogger(vte),bte=["create","create-features","update"];function Au(e,t,i){Fv.error(new de(e,t,i))}function jLe(e,t){return e?e.find(i=>i.layer===t):void 0}let oi=class extends ar(ss.EventedAccessor){constructor(e){super(e),this._sketchGraphicsLayer=new I9({listMode:"hide",internal:!0}),this._updateEditableItemsTask=null,this.activeWorkflow=null,this._activityQueue=[],this.editableItems=new Be,this.failures=[],this.attachmentsViewModel=new z5({abilities:{editing:!0}}),this.featureFormViewModel=new see,this.featureTemplatesViewModel=new W$,this.sketchViewModel=new DLe({layer:this._sketchGraphicsLayer}),this.spinnerViewModel=new Hk,this.pageStack=[],this.showDiscardPrompt=()=>Promise.resolve(),this._candidateCommitted=!1,this.back=async()=>{const t=this.activeWorkflow;if(t&&this.canGoBack){if(this.hasPendingEdits)try{await this.showDiscardPrompt()}catch{return}t.hasPreviousStep?await t.previous({cancelCurrentStep:!0}):await this.cancelWorkflow({force:!0})}},this.save=()=>{var i;const{featureFormViewModel:t}=this;t.submit(),!t.submittable||t.validateContingencyConstraints(t.getValues(),{includeIncompleteViolations:!0}).length>0||((i=this.activeWorkflow)==null||i.commit())},this.selectFeature=(t,i=!1)=>{const r=this.activeWorkflow;this._candidateCommitted||(r==null?void 0:r.type)!=="update"||(r.data.edits.feature=t,i&&(r.next(),this._candidateCommitted=!0))}}initialize(){this.handles.add([ge(()=>{var r,s,o;const e=(s=(r=this.view)==null?void 0:r.map)==null?void 0:s.editableLayers.filter(({parent:c,visible:u})=>c&&"visible"in c?u&&c.visible:u),t=(o=this.view)==null?void 0:o.allLayerViews,i=t==null?void 0:t.filter(c=>!!(e!=null&&e.includes(c.layer))&&!c.suspended);return[e,i,this.layerInfos,this.allowedWorkflows]},()=>this._updateEditableItems(),rt),$i(()=>this.activeWorkflow,"cancel",()=>this.emit("workflow-cancel")),$i(()=>this.activeWorkflow,"commit",()=>this.emit("workflow-commit")),ts(()=>{var e;return(e=this.view)==null?void 0:e.map},e=>{e.add(this._sketchGraphicsLayer)},rt),ge(()=>this.editableItems.toArray(),()=>{const{activeWorkflow:e}=this;if(this.refreshCreationTemplates(),!e)return;const{stepId:t}=e;e.type!=="create"?e.type==="update"&&(t==="awaiting-feature-to-update"&&!this.canUpdate||t==="awaiting-update-feature-candidate"&&!e.data.candidates.some(i=>{const r=this.editableItems.find(s=>s.layer===i.layer);return r&&r.supports.includes("update")}))&&this._cancelWorkflow():t!=="awaiting-feature-creation-info"||this.canCreate||this._cancelWorkflow()}),ge(()=>this.page,(e,t)=>{const i=this.pageStack.slice(),r=i.indexOf(e);r===-1&&t?i.push(t):i.splice(r),this.pageStack=i}),ts(()=>this.state==="awaiting-update-feature-candidate",()=>this._candidateCommitted=!1)])}destroy(){this._cancelWorkflow().then(()=>{var e;(e=this.view)!=null&&e.map&&this.view.map.remove(this._sketchGraphicsLayer),this.view=null}),this._updateEditableItemsTask=fc(this._updateEditableItemsTask)}get allowedWorkflows(){return this._get("allowedWorkflows")}set allowedWorkflows(e){e&&e.length!==0||(e=[...bte]),this._set("allowedWorkflows",e)}get canCreate(){return this.editableItems.some(e=>e.supports.includes("create"))}get canUpdate(){return this.editableItems.some(e=>e.supports.includes("update")||e.supports.includes("delete")||e.attachmentsOnUpdateEnabled)}get labelOptions(){return this.sketchViewModel.labelOptions}set labelOptions(e){this.sketchViewModel.labelOptions=e}set layerInfos(e){e==null||e.some(t=>("allowAttachments"in t&&_w(Fv,"Property: layerInfo.allowAttachments",{replacement:"layerInfo.attachmentsOnCreateEnabled or layerInfo.attachmentsOnUpdateEnabled",version:"4.26"}),!0)),this._set("layerInfos",e)}get snappingOptions(){return this.sketchViewModel.snappingOptions}set snappingOptions(e){this.sketchViewModel.snappingOptions=e}get state(){if(!this.get("view.ready")||this.editableItems.length===0)return"disabled";const e=this.attachmentsViewModel.mode;if(e==="add")return"adding-attachment";if(e==="edit")return"editing-attachment";const{activeWorkflow:t}=this;return t?t.stepId:"ready"}get syncing(){return this._activityQueue.length>0}get updating(){return this.updatingHandles.updating}get tooltipOptions(){return this.sketchViewModel.tooltipOptions}set tooltipOptions(e){this.sketchViewModel.tooltipOptions=e}set view(e){this.sketchViewModel.view=e,this.spinnerViewModel.view=e,this._set("view",e)}get page(){const{activeWorkflow:e,state:t}=this;return t==="awaiting-feature-to-update"||t==="awaiting-feature-to-create"||(e==null?void 0:e.type)==="create-features"&&e.pendingFeatures.length===0?"ready":t!=null?t:"disabled"}get selectedTemplateItem(){const{activeWorkflow:e}=this;if((e==null?void 0:e.type)==="create-features"&&e.pendingFeatures.length===0){const{template:t}=e.data.creationInfo;for(const i of this.featureTemplatesViewModel.items)if("findByTemplate"in i){const r=i.findByTemplate(t);if(r)return r}else if(i.template===t)return i}}get featureFormDisabled(){var t;const{activeWorkflow:e}=this;return(e==null?void 0:e.type)==="update"&&((t=e==null?void 0:e.data.editableItem)==null?void 0:t.attributeUpdatesEnabled)===!1}get canGoBack(){return U(this.activeWorkflow)&&!this.syncing}get shouldShowDeleteButton(){const{activeWorkflow:e}=this;return!!e&&e.type==="update"&&e.data.editableItem.supports.includes("delete")}get hasPendingEdits(){const{activeWorkflow:e}=this;return!!e&&(e.type==="create"||e.type==="create-features"&&e.numPendingFeatures>0||e.stepId==="editing-existing-feature"&&e.data.edits.modified)}async startCreateWorkflowAtFeatureTypeSelection(){if(My(Fv,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),await In(()=>!this.updating),!this.canCreate)return void Au("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const e=this._createCreateWorkflow();await e.start(),this._set("activeWorkflow",e)}async startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.startCreateFeaturesWorkflow()}async startCreateWorkflowAtFeatureCreation(e){if(My(Fv,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),await In(()=>!this.updating),!this.canCreate)return void Au("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const t=this._createCreateWorkflow("awaiting-feature-to-create");t.data.creationInfo=e,await t.start(),this._set("activeWorkflow",t)}async startCreateFeaturesWorkflowAtFeatureCreation(e){return this.startCreateFeaturesWorkflow(e,"creating-features")}async startCreateFeaturesWorkflow(e,t="awaiting-feature-creation-info"){if(await In(()=>!this.updating),!this.canCreate)throw new de("editing:unsupported-workflow","Creating features is unsupported or disabled.");await this._cancelWorkflow();const i=this._createCreateFeaturesWorkflow(e,t);await i.start(),this._set("activeWorkflow",i)}async startCreateWorkflowAtFeatureEdit(e){if(My(Fv,"startCreateWorkflowAtFeatureEdit"),await In(()=>!this.updating),!this.canCreate)return void Au("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const t=this._createCreateWorkflow("editing-new-feature");t.data.edits.feature=e,await t.start(),this._set("activeWorkflow",t)}async startUpdateWorkflowAtFeatureSelection(){if(await In(()=>!this.updating),!this.canUpdate)return void Au("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const e=this._createUpdateWorkflow();await e.start(),this._set("activeWorkflow",e)}async startUpdateWorkflowAtMultipleFeatureSelection(e){if(await In(()=>!this.updating),!this.canUpdate)return void Au("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const t=this._createUpdateWorkflow("awaiting-update-feature-candidate");t.data.candidates=e,await t.start(),this._set("activeWorkflow",t)}async startUpdateWorkflowAtFeatureEdit(e){if(await In(()=>!this.updating),!this.canUpdate)return void Au("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const t=this._createUpdateWorkflow("editing-existing-feature");t.data.edits.feature=e,await t.start(),this._set("activeWorkflow",t)}async deleteFeatureFromWorkflow(){const{activeWorkflow:e}=this;e&&e.type==="update"?(await this._delete(e.data.edits.feature),await e.reset()):Au("editing:unsupported-workflow","Deleting requires an active update workflow.")}async cancelWorkflow(e){return this._cancelWorkflow({warn:!0,...e})}findEditableItemForLayer(e){const t=e.type==="subtype-sublayer"?e.parent:e;return this.editableItems.find(i=>i.layer===t)}refreshCreationTemplates(){const e=[];for(const{layer:t,supports:i}of this.editableItems)t.loaded&&i.includes("create")&&e.push(t);this.featureTemplatesViewModel.layers=e}async _updateEditableItems(){fc(this._updateEditableItemsTask);const e=$6(async t=>{var b,S,E;const i=(b=this.view)==null?void 0:b.allLayerViews,r=(E=(S=this.view)==null?void 0:S.map)==null?void 0:E.editableLayers;if(!i||!r)return;const s=new Set(r),o=r==null?void 0:r.filter(A=>{var L;const O=(L=Tn(A))==null?void 0:L.operations;return!(!A.visible||!(O!=null&&O.supportsAdd)||(O==null?void 0:O.supportsQuery))}),c=i.filter(A=>s.has(A.layer)),u=[];for(const A of c.reverse()){const{layer:O,suspended:L}=A;O.type==="subtype-group"?(await O.loadAll(),u.push(...O.sublayers.slice().reverse().map(N=>this._makeEditableItemForLayer(N,L)))):u.push(this._makeEditableItemForLayer(O,L))}for(const A of o.reverse())A.type==="subtype-group"?(await A.loadAll(),u.push(...A.sublayers.map(O=>this._makeEditableItemForLayer(O,!1)))):u.push(this._makeEditableItemForLayer(A,!1));if(t.aborted)return;const g=this.editableItems;this.editableItems=new Be(u),g.destroy()});this.updatingHandles.addPromise(e.promise),this._updateEditableItemsTask=e}async _cancelWorkflow(e){const t=this.activeWorkflow;if(!t)return void(e&&e.warn&&Au("editing:no-active-workflow","There is no active workflow to cancel."));if(!e||e.force!==!1)return this.emit("workflow-cancel"),this._set("activeWorkflow",null),void await t.cancel(e);await t.cancel(e),this._set("activeWorkflow",null)}_createCreateFeaturesWorkflow(e,t){return oPe.create(this,e,t,(i,r,s)=>this._applyEdits(i,r,s),(i,r)=>this._addAttachments(i,r))}_createCreateWorkflow(e){return lPe.create(this,e,(t,i,r)=>this._applyEdits(t,i,r))}_createUpdateWorkflow(e){return hPe.create(this,e,(t,i)=>this._applyEdits(t,i))}async _delete(e){const t=e==null?void 0:e.sourceLayer;t&&"applyEdits"in t&&await this._applyEdits(t,{deleteFeatures:[e]})}_addAttachments(e,t){const i=[];return t==null||t.forEach(r=>i.push(this._addAttachment(e,r.feature,r.attachment))),Promise.all(i)}async _addAttachment(e,t,i){let r=null;if(e.type==="geojson"||e.type==="scene"||e.type==="oriented-imagery")throw new de("editor:attachments-not-supported","Adding attachments is not supported for this layer type");return await this._queueOperation(async()=>{var s,o;return r=(o=await((s=e.addAttachment)==null?void 0:s.call(e,t,i).catch(c=>{throw(c==null?void 0:c.error)||c})))!=null?o:null,r}),r}async _applyEdits(e,t,i){let r=null;const s=e.url?await Z6(e.url):null,o={returnServiceEditsOption:(!s||!sM(s))&&!RegExp("/hosted/","i").test(e.url)?"original-and-current-features":void 0,...i};return await this._queueOperation(async()=>{var c;if((c=Tn(e))!=null&&c.operations.supportsQuery){const u=await WS(this.view,e);return r=await e.applyEdits(t,o),await In(()=>!u.updating),r}return r=await e.applyEdits(t,o),r}),r}_queueOperation(e){this._activityQueue.push(e),this.notifyChange("syncing");const t=(i,r)=>{const s=r.indexOf(i);s>-1&&r.splice(s,1)};return e().then(i=>{if("error"in i&&i.error)throw i.error;if("addFeatureResults"in i){const{addFeatureResults:r,deleteFeatureResults:s,updateFeatureResults:o}=i,c=r.find(u=>!!u.error)||o.find(u=>!!u.error)||s.find(u=>!!u.error);if(c)throw c.error}return i}).catch(i=>{Au("editing:operation-error","An error occurred.",{error:i});const r={error:i,retry:()=>(t(r,this.failures),this._queueOperation(e)),cancel:()=>{t(r,this.failures)}};this._set("failures",[...this.failures,r])}).then(()=>{t(e,this._activityQueue),this.notifyChange("syncing")})}_makeEditableItemForLayer(e,t=!0){var z,q;const i=Tn(e),r=i==null?void 0:i.operations,s=jLe(this.layerInfos,e),o=this.allowedWorkflows,c=o.includes("create")||o.includes("create-features"),u=o.includes("update"),g=Z=>!s||s.enabled!==!1&&s[Z]!==!1,b=c&&!!(r!=null&&r.supportsAdd)&&g("addEnabled"),S=u&&!!(r!=null&&r.supportsUpdate)&&g("updateEnabled"),E=u&&!!(r!=null&&r.supportsDelete)&&g("deleteEnabled"),A=[];t||(b&&A.push("create"),S&&A.push("update"),E&&A.push("delete"));const O=S&&(!s||s.attributeUpdatesEnabled!==!1),L=S&&!!((z=i==null?void 0:i.editing)!=null&&z.supportsGeometryUpdate)&&(!s||s.geometryUpdatesEnabled!==!1),N=!(!((q=i==null?void 0:i.data)!=null&&q.supportsAttachment)||s&&s.allowAttachments===!1);return{layer:e,supports:A,attributeUpdatesEnabled:O,geometryUpdatesEnabled:L,hasAttachments:N,attachmentsOnCreateEnabled:N&&c&&(!s||s.attachmentsOnCreateEnabled!==!1),attachmentsOnUpdateEnabled:N&&(!s||s.attachmentsOnUpdateEnabled!==!1)}}};v([_({readOnly:!0})],oi.prototype,"activeWorkflow",void 0),v([_({readOnly:!0})],oi.prototype,"_activityQueue",void 0),v([_({value:[...bte]})],oi.prototype,"allowedWorkflows",null),v([_({readOnly:!0})],oi.prototype,"canCreate",null),v([_({readOnly:!0})],oi.prototype,"canUpdate",null),v([_()],oi.prototype,"editableItems",void 0),v([_({readOnly:!0})],oi.prototype,"failures",void 0),v([_()],oi.prototype,"attachmentsViewModel",void 0),v([_()],oi.prototype,"featureFormViewModel",void 0),v([_()],oi.prototype,"featureTemplatesViewModel",void 0),v([_()],oi.prototype,"labelOptions",null),v([_()],oi.prototype,"layerInfos",null),v([_()],oi.prototype,"sketchViewModel",void 0),v([_()],oi.prototype,"snappingOptions",null),v([_()],oi.prototype,"spinnerViewModel",void 0),v([_()],oi.prototype,"state",null),v([_({readOnly:!0})],oi.prototype,"syncing",null),v([_()],oi.prototype,"updating",null),v([_()],oi.prototype,"tooltipOptions",null),v([_()],oi.prototype,"view",null),v([_()],oi.prototype,"pageStack",void 0),v([_()],oi.prototype,"showDiscardPrompt",void 0),v([_()],oi.prototype,"_candidateCommitted",void 0),v([_()],oi.prototype,"page",null),v([_()],oi.prototype,"selectedTemplateItem",null),v([_()],oi.prototype,"featureFormDisabled",null),v([_()],oi.prototype,"canGoBack",null),v([_()],oi.prototype,"shouldShowDeleteButton",null),v([_()],oi.prototype,"hasPendingEdits",null),oi=v([K(vte)],oi);const zLe=oi,wte={hide:"hide",hideChildren:"hide-children"};function e5(e){if(e)return e.listMode!=null?e.listMode:void 0}function VLe(e){if(e)return e.minScale!=null?e.minScale:void 0}function GLe(e){if(e)return e.maxScale!=null?e.maxScale:void 0}function ULe(e){if(!e)return"inherited";const t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof t=="boolean")return t?"independent":"inherited";const i=e.get("capabilities.exportMap.supportsSublayerVisibility");return typeof i=="boolean"?i?"independent":"inherited":e.visibilityMode!=null?e.visibilityMode:"independent"}function _te(e){if(e&&(!("type"in e)||e.type!=="wmts")&&e.listMode!==wte.hideChildren)return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function yO(e){return e5(e)!==wte.hide}function qLe(e,t){if(!e||isNaN(t))return!1;const i=VLe(e),r=GLe(e),s=!isNaN(i)&&i>0&&t>i,o=!isNaN(r)&&r>0&&t<r;return s||o}function SV(e){const t=e==null?void 0:e.layer;return t&&"layers"in t?t.layers:null}function BLe(e){const t=HLe(e)?e:null,i=e==null?void 0:e.parent,r=(i==null?void 0:i.type)==="map-image"&&t.source,s="";return r&&i?{layer:i,title:s,sublayerIds:[r.mapLayerId]}:{layer:e,title:s}}function HLe(e){return!!(e!=null&&e.layer)}var p6;let Bh=p6=class extends fg{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new p6({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};v([_()],Bh.prototype,"displayValueEnabled",void 0),v([_()],Bh.prototype,"max",void 0),v([_()],Bh.prototype,"min",void 0),v([_()],Bh.prototype,"step",void 0),v([_()],Bh.prototype,"value",void 0),Bh=p6=v([K("esri.support.Action.ActionSlider")],Bh);const WLe=Bh,xte="esri-layer-list-panel",I1=`${xte}__content`,$u={base:xte,content:I1,contentLegend:`${I1}--legend`,contentString:`${I1}--string`,contentElement:`${I1}--html-element`,contentWidget:`${I1}--widget`},JLe="legends";let Qo=class extends Gd(ki){constructor(e,t){super(e,t),this._legend=null,this._handles=new Vr,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles(ge(()=>this.content,e=>this._createLegend(e),rt))}destroy(){const{_legend:e}=this;e&&e.destroy(),this._legend=null}get className(){const{image:e}=this,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""}set className(e){this._override("className",e)}get disabled(){var r;const{listItem:e,_legend:t,content:i}=this;return!e||!(Array.isArray(i)&&i.length>1)&&!!t&&(!((r=t.activeLayerInfos)!=null&&r.length)||!e.visibleAtCurrentScale)}set disabled(e){this._overrideIfSome("disabled",e)}get title(){const e=this._getFirstWidget();return this._get("title")||e?e.label:""}set title(e){this._override("title",e)}render(){return J("div",{class:$u.base},this._renderContents())}_renderContent(e){const{_legend:t,disabled:i}=this;return!e||i?null:e==="legend"&&t?J("div",{class:this.classes($u.content,$u.contentLegend),key:t},t.render()):typeof e=="string"?J("div",{class:this.classes($u.content,$u.contentString),key:e,innerHTML:e}):sS(e)?J("div",{class:this.classes($u.content,$u.contentWidget),key:e},e.render()):e instanceof HTMLElement?J("div",{class:this.classes($u.content,$u.contentElement),key:e,bind:e,afterCreate:this._attachToNode}):null}_renderContents(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._renderContent(t)):this._renderContent(e)}_getLegendOptions(){const{listItem:e}=this;if(!e)return{};const{layer:t,view:i}=e;return t&&i?{view:i,layerInfos:[BLe(t)]}:{}}_createLegend(e){this._hasLegend(e)&&!this._legend&&pe(()=>import("./Legend.63e6f96d.js"),["assets/Legend.63e6f96d.js","assets/EffectView.ab0cb7da.js","assets/ExportImageParameters.351e008e.js","assets/floorFilterUtils.4de71259.js","assets/sublayerUtils.81ed8bc5.js","assets/pixelRangeUtils.eec66021.js","assets/rendererConversion.c11b1f8c.js"]).then(({default:t})=>{const{_handles:i,listItem:r}=this,s=new t(this._getLegendOptions());this._legend=s,this.notifyChange("className"),this.notifyChange("title");const o=ge(()=>{var c,u;return[r==null?void 0:r.view,r==null?void 0:r.layer,(c=r==null?void 0:r.layer)==null?void 0:c.source,(u=r==null?void 0:r.layer)==null?void 0:u.parent]},()=>this._updateLegend(s),rt);i.add(o,JLe),this.scheduleRender()})}_hasLegend(e){const t="legend";return e===t||!!Array.isArray(e)&&e.includes(t)}_attachToNode(e){e.appendChild(this)}_updateLegend(e){e.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(e){return e==="legend"?this._legend:sS(e)?e:null}_getFirstWidget(){const{content:e}=this;if(Array.isArray(e)){let t=null;return e.some(i=>{const r=this._getWidget(i);return r&&(t=r),!!r}),t}return this._getWidget(e)}};v([_()],Qo.prototype,"_legend",void 0),v([_()],Qo.prototype,"className",null),v([_()],Qo.prototype,"content",void 0),v([_()],Qo.prototype,"disabled",null),v([_()],Qo.prototype,"image",void 0),v([_()],Qo.prototype,"listItem",void 0),v([_()],Qo.prototype,"title",null),v([_()],Qo.prototype,"open",void 0),v([_()],Qo.prototype,"visible",void 0),Qo=v([K("esri.widgets.LayerList.ListItemPanel")],Qo);const Ste=Qo;var Lv;const YLe=Be.ofType({key:"type",defaultKeyValue:"button",base:fg,typeMap:{button:x0,toggle:v7,slider:WLe}}),Ite=Be.ofType(YLe),G2="layer",L4="child-list-mode",KLe="hide",ZLe="esri.widgets.LayerList.ListItem";let Fi=Lv=class extends Gd(ar(Re)){constructor(e){super(e),this.actionsSections=new Ite,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Be.ofType(Lv)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null}initialize(){if(this.handles.add([ge(()=>this.layer,e=>this._watchLayerProperties(e),rt),ge(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),rt),ge(()=>this.view,e=>this._updateChildrenView(e),rt),ge(()=>this.panel,e=>this._setListItemOnPanel(e),rt),ge(()=>[this.layer,this.view],()=>this._getLayerView(),rt)]),typeof this.listItemCreatedFunction=="function"){const e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.view=null}get connectionStatus(){const{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){var e;return(e=this.layer)==null?void 0:e.loadError}get incompatible(){const{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}castPanel(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Ste(e):null}get title(){const e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){var i;const{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&((i=e.publishingInfo)==null?void 0:i.status)==="publishing"}get updating(){const{layerView:e,connectionStatus:t,layer:i,publishing:r}=this;return!r&&!t&&(e?e.updating:(i==null?void 0:i.loadStatus)==="loading"||!1)}get visible(){var e;return(e=this.layer)==null?void 0:e.visible}set visible(e){const t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return!qLe(this.layer,this.get("view.scale"))}get visibilityMode(){return ULe(this.layer)}clone(){return new Lv({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){const t=this.children;t&&t.forEach(i=>i.checkPublishStatusEnabled=e)}_updateChildrenView(e){const t=this.children;t&&t.forEach(i=>i.view=e)}_addChildren(e){if(this.handles.remove(L4),this.children.removeAll(),!e)return;e.forEach(i=>{this.handles.add(ge(()=>i.listMode,()=>this._addChildren(e)),L4)});const t=e.filter(i=>e5(i)!==KLe);this.children.addMany(this._makeChildren(t))}_watchSublayerChanges(e){e&&this.handles.add(e.on("change",()=>{this._addChildren(e)}),G2)}_initializeChildLayers(e){this._addChildren(e),this._watchSublayerChanges(e)}_makeChildren(e){return e.map(t=>yO(t)?new Lv({layer:t,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(U).reverse()}_watchLayerProperties(e){if(!this.handles||(this.handles.remove(G2),this.handles.remove(L4),!e))return;if(this.handles.add(ge(()=>e.listMode,()=>this._watchLayerProperties(e)),G2),e5(e)==="hide-children")return void this.children.removeAll();const t=_te(e);t&&this.handles.add(ge(()=>e[t],()=>{e.hasOwnProperty(t)&&this._initializeChildLayers(e[t])},rt),G2)}async _getLayerView(){const{layer:e,view:t}=this;if(e&&t)try{const i=await t.whenLayerView(e);if(i.layer!==this.layer)return;this._set("layerView",i)}catch{}}};v([_({type:Ite})],Fi.prototype,"actionsSections",void 0),v([_()],Fi.prototype,"actionsOpen",void 0),v([_()],Fi.prototype,"checkPublishStatusEnabled",void 0),v([_({type:Be})],Fi.prototype,"children",void 0),v([_()],Fi.prototype,"childrenSortable",void 0),v([_({readOnly:!0})],Fi.prototype,"connectionStatus",null),v([_({readOnly:!0})],Fi.prototype,"error",null),v([_()],Fi.prototype,"hidden",void 0),v([_({readOnly:!0})],Fi.prototype,"incompatible",null),v([_()],Fi.prototype,"layer",void 0),v([_({readOnly:!0})],Fi.prototype,"layerView",void 0),v([_()],Fi.prototype,"listItemCreatedFunction",void 0),v([_()],Fi.prototype,"open",void 0),v([_({type:Ste})],Fi.prototype,"panel",void 0),v([_t("panel")],Fi.prototype,"castPanel",null),v([_()],Fi.prototype,"parent",void 0),v([_()],Fi.prototype,"sortable",void 0),v([_()],Fi.prototype,"title",null),v([_({readOnly:!0})],Fi.prototype,"publishing",null),v([_({readOnly:!0})],Fi.prototype,"updating",null),v([_()],Fi.prototype,"view",void 0),v([_()],Fi.prototype,"visible",null),v([_({readOnly:!0})],Fi.prototype,"visibleAtCurrentScale",null),v([_({readOnly:!0})],Fi.prototype,"visibilityMode",null),Fi=Lv=v([K(ZLe)],Fi);const gO=Fi,ho={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode",children:"children"},XLe="hide",Ete=Be.ofType(gO);let Hh=class extends ss.EventedAccessor{constructor(e){super(e),this._handles=new Vr,this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.operationalItems=new Ete,this.view=null}initialize(){this._handles.add([ge(()=>{var e;return[this.view,(e=this.view)==null?void 0:e.ready]},()=>this._viewHandles(),rt),ge(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],ho.view)}destroy(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}get state(){const e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,r){var A,O;const s=e==null?void 0:e.layer;if(!s)return;const o=(O=(A=this.view)==null?void 0:A.map)==null?void 0:O.layers,c=t?SV(t):o,u=i?SV(i):o;if(!c||!u)return;const{operationalItems:g}=this,b=(t==null?void 0:t.children)||g,S=(i==null?void 0:i.children)||g,E=u.length-r;e.parent=i||null,b.includes(e)&&b.remove(e),c.includes(s)&&c.remove(s),S.includes(e)||S.add(e,E),u.includes(s)||u.add(s,E)}_createLayerViewHandles(e){const{_handles:t}=this;t.remove(ho.layerViews),this._compileList(),e&&t.add(e.on("change",()=>this._compileList()),ho.layerViews)}_createMapLayerHandles(e){const{_handles:t}=this;t.remove(ho.mapLayers),this._compileList(),e&&t.add(e.on("change",()=>this._compileList()),ho.mapLayers)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:r}=this;return new gO({checkPublishStatusEnabled:r,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){const{_handles:e,operationalItems:t}=this;t.forEach(i=>{e.remove(`${ho.children}-${i.uid}`)}),t.removeAll()}_getViewableLayers(e){if(e)return e.filter(t=>e5(t)!==XLe)}_watchLayersListMode(e){const{_handles:t}=this;t.remove(ho.layerListMode),e&&e.forEach(i=>{"listMode"in i&&t.add(ge(()=>i.listMode,()=>this._compileList()),ho.layerListMode)})}_compileList(){const e=this.get("view.map.layers");this._watchLayersListMode(e);const t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach(i=>{t.find(r=>r.layer===i)||t.add(this._createListItem(i))})}_removeItems(e){const{_handles:t,operationalItems:i}=this,r=[];i.forEach(s=>{s&&e&&e.includes(s.layer)||(t.remove(`${ho.children}-${s.uid}`),r.push(s))}),i.removeMany(r)}_sortItems(e){const{operationalItems:t}=this;t.sort((i,r)=>{const s=e.indexOf(i.layer),o=e.indexOf(r.layer);return s>o?-1:s<o?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{_handles:e,view:t}=this;e.remove([ho.mapLayers,ho.layerViews,ho.viewLayers]),this._compileList(),t&&t.ready&&e.add([ge(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.allLayers},i=>this._createMapLayerHandles(i),rt),ge(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},i=>this._createLayerViewHandles(i),rt)],ho.viewLayers)}};v([_()],Hh.prototype,"checkPublishStatusEnabled",void 0),v([_()],Hh.prototype,"listItemCreatedFunction",void 0),v([_({type:Ete})],Hh.prototype,"operationalItems",void 0),v([_({readOnly:!0})],Hh.prototype,"state",null),v([_()],Hh.prototype,"view",void 0),Hh=v([K("esri.widgets.LayerList.LayerListViewModel")],Hh);const QLe=Hh,vO=e=>eRe(e)||tRe(e),eRe=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":return!0;default:return!1}},tRe=e=>{const t=_te(e);if(t!=null&&e.hasOwnProperty(t)&&U(e[t])){for(const i of e[t])if(vO(i))return!0}return!1};var f6;let Wh=f6=class extends gO{constructor(e){super(e),this.children=new Be,this.parent=null}get enabled(){return!!U(this.featureSource)&&this.featureSource.enabled}get featureSource(){const{layer:e,getFeatureSnappingSources:t}=this;return t().find(i=>i.layer===e)}_initializeChildLayers(e){if(!e)return;const t=e.filter(vO);super._initializeChildLayers(t)}_makeChildren(e){return e.map(t=>yO(t)?new f6({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(U).reverse()}};v([_()],Wh.prototype,"children",void 0),v([_()],Wh.prototype,"enabled",null),v([_({constructOnly:!0})],Wh.prototype,"getFeatureSnappingSources",void 0),v([_()],Wh.prototype,"featureSource",null),v([_()],Wh.prototype,"parent",void 0),Wh=f6=v([K("esri.widgets.support.SnappingControls.SnappingListItem")],Wh);let Rv=class extends QLe{constructor(){super(...arguments),this.featureSnappingSources=new Be}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}_compileList(){const e=this.get("view.map.layers");if(!e)return;const t=e.filter(vO);this._watchLayersListMode(t);const i=this._getViewableLayers(t);i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(e){return new Wh({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};v([_()],Rv.prototype,"featureSnappingSources",void 0),v([_()],Rv.prototype,"operationalItems",void 0),Rv=v([K("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Rv);const iRe="esri.widgets.support.SnappingControls.SnappingControlsViewModel";let hf=class extends ar(Re){constructor(e){super(e),this.layerListViewModel=new Rv,this.snappingOptions=null,this.view=null}initialize(){this.handles.add([ge(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},rt),ge(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:t})=>{e.featureSnappingSources=t},rt)])}get state(){return this.get("snappingOptions")?"ready":"disabled"}enableSnappingForLayer(e){var t;((t=this._findSnappingSourceForLayer(e))!=null?t:this._makeSnappingSourceForLayer(e)).enabled=!0}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)yO(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){var r;const t=(r=this.layerListViewModel.operationalItemsFlat.find(s=>s.layer.id===e))==null?void 0:r.layer;if(!t)throw new de("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);const i=new J8({layer:t});return this.snappingOptions.featureSources.add(i),i}};v([_({constructOnly:!0})],hf.prototype,"layerListViewModel",void 0),v([_()],hf.prototype,"snappingOptions",void 0),v([_()],hf.prototype,"state",null),v([_()],hf.prototype,"view",void 0),hf=v([K(iRe)],hf);const rRe=hf,IV={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0},Uo="esri-snapping-controls",po={base:Uo,container:`${Uo}__container`,panel:`${Uo}__panel`,item:`${Uo}__item`,toggleBlock:`${Uo}__toggle-block`,layerListBlock:`${Uo}__layer-list-block`,layerList:`${Uo}__layer-list`,layerListFilter:`${Uo}__layer-list__filter`,layerListItem:`${Uo}__layer-list__item`,layerListItemCheckbox:`${Uo}__layer-list__item__checkbox`,layerListItemLabel:`${Uo}__layer-list__item__label`,nestedContainer:`${Uo}__nested-container`,disabled:"esri-disabled",esriWidget:"esri-widget",widgetIcon:"esri-icon-vertex-gps"};let wo=class extends ki{constructor(e,t){super((()=>{const{view:i,viewModel:r,snappingOptions:s,...o}=e;return o})(),t),this._layerListFilter=null,this.iconClass=po.widgetIcon,this.layerListOpen=!0,this.messages=null,this.visibleElements={...IV},this._defaultViewModel=null,e!=null&&e.viewModel?this.viewModel=e.viewModel:(this._defaultViewModel=new rRe({snappingOptions:e.snappingOptions,view:e.view}),this.viewModel=this._defaultViewModel)}destroy(){this._defaultViewModel=ti(this._defaultViewModel)}loadDependencies(){return Promise.all([pe(()=>import("./calcite-accordion.5128ad93.js"),[]),pe(()=>import("./calcite-accordion-item.142b4090.js"),["assets/calcite-accordion-item.142b4090.js","assets/conditionalSlot.25fc4c17.js","assets/observers.6e054a3b.js","assets/icon.48bdede2.js"]),pe(()=>import("./calcite-block.64ffc3f2.js"),["assets/calcite-block.64ffc3f2.js","assets/conditionalSlot.25fc4c17.js","assets/observers.6e054a3b.js","assets/guid.994bd1dc.js","assets/interactive.5c805e74.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/Heading.91bac1c4.js","assets/action.1ad673c5.js","assets/loadable.bbce2443.js","assets/icon.48bdede2.js","assets/loader.9c78e3db.js","assets/action-menu.2be79bdb.js","assets/popover.12329f5f.js","assets/openCloseComponent.1beecb6a.js","assets/debounce.43d64738.js","assets/scrim.02266be6.js"]),pe(()=>import("./calcite-checkbox.85fce333.js"),["assets/calcite-checkbox.85fce333.js","assets/form.af49867d.js","assets/guid.994bd1dc.js","assets/interactive.5c805e74.js","assets/key.e212d876.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js"]),pe(()=>import("./calcite-input.3dc5a20f.js"),["assets/calcite-input.3dc5a20f.js","assets/input.6359813e.js","assets/form.af49867d.js","assets/interactive.5c805e74.js","assets/key.e212d876.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/observers.6e054a3b.js","assets/icon.48bdede2.js","assets/progress.60118725.js"]),pe(()=>import("./calcite-label.0af641e4.js"),["assets/calcite-label.0af641e4.js","assets/label2.c96a7d11.js"]),pe(()=>import("./calcite-list.727a3e11.js"),["assets/calcite-list.727a3e11.js","assets/interactive.5c805e74.js","assets/observers.6e054a3b.js","assets/utils3.7dad9d25.js","assets/loadable.bbce2443.js","assets/filter2.32839055.js","assets/debounce.43d64738.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/icon.48bdede2.js","assets/input.6359813e.js","assets/form.af49867d.js","assets/label2.c96a7d11.js","assets/progress.60118725.js","assets/loader.9c78e3db.js","assets/guid.994bd1dc.js","assets/scrim.02266be6.js"]),pe(()=>import("./calcite-list-item.38b02e4c.js"),["assets/calcite-list-item.38b02e4c.js","assets/interactive.5c805e74.js","assets/utils3.7dad9d25.js","assets/loadable.bbce2443.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"]),pe(()=>import("./calcite-panel.85ab84cf.js"),["assets/calcite-panel.85ab84cf.js","assets/panel.6ae1f692.js","assets/interactive.5c805e74.js","assets/loadable.bbce2443.js","assets/observers.6e054a3b.js","assets/action-menu.2be79bdb.js","assets/guid.994bd1dc.js","assets/key.e212d876.js","assets/action.1ad673c5.js","assets/t9n.ad8f40d0.js","assets/icon.48bdede2.js","assets/loader.9c78e3db.js","assets/popover.12329f5f.js","assets/openCloseComponent.1beecb6a.js","assets/debounce.43d64738.js","assets/Heading.91bac1c4.js","assets/scrim.02266be6.js"]),pe(()=>import("./calcite-switch.345529f0.js"),["assets/calcite-switch.345529f0.js","assets/form.af49867d.js","assets/interactive.5c805e74.js","assets/key.e212d876.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js"])])}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&((ae(this._defaultViewModel)||this._defaultViewModel!==e)&&(this._defaultViewModel=ti(this._defaultViewModel)),this._set("viewModel",e))}castVisibleElements(e){return{...IV,...e}}render(){const{label:e,visibleElements:{header:t}}=this;return J("div",{"aria-label":e,class:this.classes(po.base,po.esriWidget)},J("div",{class:po.container},t?this.renderHeaderView():this.renderContent()))}renderHeaderView(){return J("calcite-panel",{heading:this.label,class:po.panel},this.renderContent())}renderContent(){return[this.renderToggles(),this.renderLayerList()]}renderToggles(){const{visibleElements:{enabledToggle:e,selfEnabledToggle:t,featureEnabledToggle:i}}=this;return e||t||i?J("calcite-block",{class:po.toggleBlock,key:"toggle-block",heading:"",open:!0},this.renderEnabledToggle(),J("div",{class:po.nestedContainer},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle())):null}renderEnabledToggle(){if(!this.visibleElements.enabledToggle)return null;const{messages:{enableSnapping:e},viewModel:{snappingOptions:{enabled:t,enabledToggled:i}}}=this;return J("calcite-label",{layout:"inline-space-between"},e,J("calcite-switch",{checked:t,disabled:i,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}renderSelfEnabledToggle(){if(!this.visibleElements.selfEnabledToggle)return null;const{messages:{geometryGuides:e},viewModel:{snappingOptions:{enabled:t,selfEnabled:i,enabledToggled:r}}}=this;return J("calcite-label",{layout:"inline-space-between",key:"self-enabled-toggle"},e,J("calcite-switch",{checked:i,disabled:r||!t,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}renderFeatureEnabledToggle(){if(!this.visibleElements.featureEnabledToggle)return null;const{messages:{featureToFeature:e},viewModel:{snappingOptions:{enabled:t,featureEnabled:i,enabledToggled:r}}}=this;return J("calcite-label",{layout:"inline-space-between",key:"feature-enabled-toggle"},e,J("calcite-switch",{checked:i,disabled:r||!t,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e}=this,t=({target:{value:r}})=>this._layerListFilter=r===""?null:new RegExp(r,"i"),i=this.viewModel.layerListViewModel.operationalItems.length>9?J("calcite-input",{class:po.layerListFilter,clearable:!0,placeholder:e==null?void 0:e.searchLayers,onCalciteInputInput:t}):null;return J("calcite-block",{key:"list-block",heading:e.snappingLayers,class:po.layerListBlock,collapsible:!0,open:this.layerListOpen,onCalciteBlockToggle:r=>this.layerListOpen=r.target.open},i,J("calcite-list",{class:po.layerList},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems,this._layerListFilter)))}renderLayerListItemCollection(e,t){return e.map(i=>{if(!t||this._itemTitleMatchesFilter(i,t))return i.children.length>0?this.renderLayerListItemGroup(i):this.renderLayerListItem(i);const r=i.children.filter(s=>this._itemTitleMatchesFilter(s,t));return r.length>0?this.renderLayerListItemGroup(i,r):null}).toArray().filter(U)}renderLayerListItem(e){const{messages:{untitledLayer:t}}=this,i=e.title||t,r=e.enabled,s=J("calcite-checkbox",{value:e.layer.id,checked:r,bind:this,onCalciteCheckboxChange:c=>this._handleLayerListItemChange(c.target)}),o=()=>{const c=!s.properties.checked;this._handleLayerListItemChange({checked:c,value:s.properties.value})};return J("calcite-list-item",{key:`${this.id}-list-item-${e.uid}`,onCalciteListItemSelect:o},J("calcite-label",{class:po.layerListItem,slot:"content-start",tabIndex:-1,layout:"inline"},J("div",{class:po.layerListItemCheckbox},s),J("div",{class:po.layerListItemLabel},i)))}renderLayerListItemGroup(e,t){const i=e.title||this.messages.untitledLayer,r=e.title&&e.title!==""?e.title:Bf(),s=!!t,o=t!=null?t:e.children;return J("calcite-list-item",{key:r},J("calcite-accordion",{iconPosition:"start",appearance:"transparent",afterCreate:c=>{c.append(...Array.from(c.children).map(u=>(u.remove(),u)))}},J("calcite-accordion-item",{expanded:s,heading:i,key:e.uid},J("calcite-list",null,[...this.renderLayerListItemCollection(o)]))))}_enableSnappingSwitchChange(e){this.snappingOptions.enabled=e.target.checked}_featureEnabledSwitchChange(e){this.snappingOptions.featureEnabled=e.target.checked}_itemTitleMatchesFilter(e,t){return t!=null&&t.test(e.title)}_selfEnabledSwitchChange(e){this.snappingOptions.selfEnabled=e.target.checked}async _handleLayerListItemChange(e){e.checked?this.viewModel.enableSnappingForLayer(e.value):this.viewModel.disableSnappingForLayer(e.value)}};v([_()],wo.prototype,"_layerListFilter",void 0),v([_()],wo.prototype,"iconClass",void 0),v([_()],wo.prototype,"label",null),v([_()],wo.prototype,"layerListOpen",void 0),v([_(),ui("esri/widgets/support/SnappingControls/t9n/SnappingControls")],wo.prototype,"messages",void 0),v([_()],wo.prototype,"snappingOptions",null),v([_()],wo.prototype,"view",null),v([_()],wo.prototype,"viewModel",null),v([_()],wo.prototype,"visibleElements",void 0),v([_t("visibleElements")],wo.prototype,"castVisibleElements",null),wo=v([K("esri.widgets.support.SnappingControls")],wo);const sRe=wo,EV={base:"esri-sketch-tooltip-controls",esriWidget:"esri-widget",widgetIcon:"esri-icon-gear"};let Jh=class extends ki{constructor(e){super(e),this.viewModel=null,this.iconClass=EV.widgetIcon,this._onEnabledChange=t=>{const i=t.target;this.tooltipOptions.enabled=i.checked}}loadDependencies(){return Promise.all([pe(()=>import("./calcite-block.64ffc3f2.js"),["assets/calcite-block.64ffc3f2.js","assets/conditionalSlot.25fc4c17.js","assets/observers.6e054a3b.js","assets/guid.994bd1dc.js","assets/interactive.5c805e74.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/Heading.91bac1c4.js","assets/action.1ad673c5.js","assets/loadable.bbce2443.js","assets/icon.48bdede2.js","assets/loader.9c78e3db.js","assets/action-menu.2be79bdb.js","assets/popover.12329f5f.js","assets/openCloseComponent.1beecb6a.js","assets/debounce.43d64738.js","assets/scrim.02266be6.js"]),pe(()=>import("./calcite-label.0af641e4.js"),["assets/calcite-label.0af641e4.js","assets/label2.c96a7d11.js"]),pe(()=>import("./calcite-switch.345529f0.js"),["assets/calcite-switch.345529f0.js","assets/form.af49867d.js","assets/interactive.5c805e74.js","assets/key.e212d876.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js"])])}render(){var e;return J("div",{class:EV.base},J("calcite-block",{heading:"",open:!0},J("calcite-label",{layout:"inline-space-between"},(e=this.messages)==null?void 0:e.enabledToggle,J("calcite-switch",{checked:this.tooltipOptions.enabled,onCalciteSwitchChange:this._onEnabledChange}))))}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}};v([_()],Jh.prototype,"viewModel",void 0),v([_()],Jh.prototype,"iconClass",void 0),v([_()],Jh.prototype,"label",null),v([_(),ui("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],Jh.prototype,"messages",void 0),v([_()],Jh.prototype,"tooltipOptions",void 0),Jh=v([K("esri.widgets.Editor.components.SketchTooltipControls")],Jh);const ea="esri-editor",em=`${ea}__panel`,tm=`${ea}__prompt`,wi={base:`${ea} esri-widget esri-widget--panel`,message:`${ea}__message`,actions:`${ea}__actions`,helpMessage:`${ea}__help-message`,progressBar:`${ea}__progress-bar`,panelToolbar:`${em}-toolbar`,panelContent:`${em}-content`,panelContentMessage:`${em}-content__message`,panelContentSection:`${em}-content__section`,panelContentSectionGroup:`${em}-content__section__group`,panelContentScrimContainer:`${em}-content__scrim-container`,settingsContainer:`${ea}__settings`,updateFeaturesActionButtons:`${ea}__update-features-action-buttons`,updateFeaturesActionButtonsButton:`${ea}__update-features-action-buttons--button`,featureTemplatesContainer:`${ea}__feature-templates-container`,ownerAdminNotice:`${ea}__owner-admin-notice`,promptContainer:tm,promptHeader:`${tm}__header`,promptHeading:`${tm}__header__heading`,promptMessage:`${tm}__message`,promptDivider:`${tm}__divider`,promptActions:`${tm}__actions`,warningIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-edit"},R4={undoRedoButtons:!1,snappingControls:!0,snappingControlsElements:{header:!1,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0},sketchTooltipControls:!0};function nRe(e){e.focus()}const Mte="esri.widgets.Editor",N4=Ie.getLogger(Mte);let Ut=class extends ar(ki){constructor(e,t){super(e,t),this._featureForm=new xOe,this._attachments=new fW({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}}),this._featureTemplates=new ROe({enableListScroll:!1}),this._filterText="",this._prompt=null,this._spinner=new CK,this.useDeprecatedCreateWorkflow=!1,this.headingLevel=4,this.iconClass=wi.widgetIcon,this.messages=null,this.messagesCommon=null,this.messagesTemplates=null,this.supportingWidgetDefaults=null,this.viewModel=new zLe,this.visibleElements={...R4},this.EditorPanel=({handleBack:i,heading:r,headingLevel:s,key:o},...c)=>{const{messagesCommon:u,viewModel:g,visibleElements:b}=this,S=g.sketchViewModel,E=g.syncing||this._attachments.submitting;return J("calcite-flow-item",{closable:!1,heading:r,headingLevel:s,key:o,loading:E,onCalciteFlowItemBack:i!=null?i:void 0},J("div",{key:"panel-toolbar",class:wi.panelToolbar},this._renderSettings(),b.undoRedoButtons&&[J("calcite-button",{key:"undo-button",label:u.undo,appearance:"transparent",kind:"neutral",alignment:"center",iconStart:"undo",scale:"l",disabled:!S.canUndo(),onclick:S.undo.bind(S)},u.undo),J("calcite-button",{key:"redo-button",label:u.redo,appearance:"transparent",kind:"neutral",alignment:"center",iconStart:"redo",scale:"l",disabled:!S.canRedo(),onclick:S.redo.bind(S)},u.redo)]),...c)},this._showDiscardWarning=()=>{var o;const{messages:i}=this,r=((o=this.activeWorkflow)==null?void 0:o.type)==="create",s=tu();return this._prompt={title:i[r?"cancelAddTitle":"cancelEditTitle"],message:i[r?"cancelAddWarningMessage":"cancelEditWarningMessage"],context:"danger",actions:{primary:{label:i[r?"discardFeature":"discardEdits"],action:()=>{s.resolve(),this._clearPrompt()}},secondary:{label:i[r?"continueAdding":"continueEditing"],action:()=>{s.reject(),this._clearPrompt()}}}},s.promise},this._onAttachmentDeleteConfirm=async()=>{const i=this._attachments,{activeWorkflow:r}=this.viewModel;r&&(r.type==="create-features"?i.deleteFile():(await i.deleteAttachment(i.viewModel.activeAttachmentInfo),this._clearPrompt()),await r.previous(),this._clearPrompt())},this._onAttachmentsError=i=>{this._prompt={title:this.messages.errorWarningTitle,message:i.message,context:"warning",actions:{primary:{label:this.messagesCommon.form.ok,action:this._clearPrompt}}}},this._clearPrompt=()=>{this._prompt=null},this._onBack=this._onBack.bind(this),this._onSave=this._onSave.bind(this),this._onDelete=this._onDelete.bind(this),this._onToggleUpdateWorkflow=this._onToggleUpdateWorkflow.bind(this),this._onAttachmentAdd=this._onAttachmentAdd.bind(this),this._onAttachmentUpdate=this._onAttachmentUpdate.bind(this),this._onAttachmentDelete=this._onAttachmentDelete.bind(this)}initialize(){const e=()=>this.scheduleRender();this.addHandles([ge(()=>K1(this.headingLevel),t=>{this._featureForm.headingLevel=t,this._featureTemplates.headingLevel=t},rt),$i(()=>this.viewModel.featureTemplatesViewModel,"select",async({item:t,oldItem:i})=>{this.viewModel.activeWorkflow&&await this.viewModel.cancelWorkflow(),t&&t.id!==(i==null?void 0:i.id)&&(this.useDeprecatedCreateWorkflow?this.startCreateWorkflowAtFeatureCreation(t):this.startCreateFeaturesWorkflowAtFeatureCreation(t))}),ge(()=>this.viewModel.selectedTemplateItem,t=>this._featureTemplates.select(t,!1)),$i(()=>this.viewModel.activeWorkflow,"cancel-request",({controller:t})=>{const{messages:i,messagesCommon:r}=this;this._prompt={title:i.cancelRequestTitle,message:i.cancelRequestWarningMessage,context:"danger",actions:{primary:{label:r.form.yes,action:()=>{t.allow(),this._clearPrompt()}},secondary:{label:r.form.no,action:()=>{t.deny(),this._clearPrompt()}}}}}),ge(()=>this.viewModel,t=>{var i,r,s,o;this._featureForm.viewModel=(i=t==null?void 0:t.featureFormViewModel)!=null?i:null,this._attachments.viewModel=(r=t==null?void 0:t.attachmentsViewModel)!=null?r:null,this._featureTemplates.viewModel=(s=t==null?void 0:t.featureTemplatesViewModel)!=null?s:null,this._spinner.viewModel=(o=t==null?void 0:t.spinnerViewModel)!=null?o:null,t.showDiscardPrompt=this._showDiscardWarning},rt),ge(()=>this.view,(t,i)=>{const r=`editor-${this.id}-spinner`;i==null||i.ui.remove(this._spinner,r),t==null||t.ui.add(this._spinner,{key:r,position:"manual"})},rt),$i(()=>{var t;return(t=this.viewModel)==null?void 0:t.sketchViewModel},"create",e),ts(()=>this.supportingWidgetDefaults,t=>{this._featureForm.set(t.featureForm),this._attachments.set(t.attachments),this._featureTemplates.set(t.featureTemplates),this.viewModel.sketchViewModel.set(t.sketch)},rt),ts(()=>{var t;return(t=this._attachments)==null?void 0:t.error},t=>this._onAttachmentsError(t)),ts(()=>{var t;return(t=this.viewModel)==null?void 0:t.failures},t=>{const{messages:i}=this,[{error:r,retry:s,cancel:o}]=t;this._prompt={title:i.errorWarningTitle,message:es(i.errorWarningMessageTemplate,{errorMessage:r.message}),context:"warning",actions:{primary:{label:i.retry,action:()=>{s(),this._clearPrompt()}},secondary:{label:i.ignore,action:()=>{o(),this._clearPrompt()}}}}}),ge(()=>{var t;return(t=this.viewModel)==null?void 0:t.state},t=>{switch(t){case"awaiting-feature-to-update":case"ready":case"disabled":this._filterText="",this._featureTemplates.filterText=""}}),ge(()=>{var t,i;return[(t=this._attachments)==null?void 0:t.selectedFile,(i=this._attachments)==null?void 0:i.submitting]},e),ge(()=>this.viewModel.featureFormDisabled,t=>this._featureForm.disabled=t),$i(()=>this.view,"key-down",t=>{t.key==="Escape"&&this.viewModel.back()})])}destroy(){this._attachments.destroy(),this._featureForm.destroy(),this._featureTemplates.destroy()}loadDependencies(){return Promise.all([pe(()=>import("./calcite-accordion-item.142b4090.js"),["assets/calcite-accordion-item.142b4090.js","assets/conditionalSlot.25fc4c17.js","assets/observers.6e054a3b.js","assets/icon.48bdede2.js"]),pe(()=>import("./calcite-accordion.5128ad93.js"),[]),pe(()=>import("./calcite-button.a765f9c1.js"),["assets/calcite-button.a765f9c1.js","assets/form.af49867d.js","assets/interactive.5c805e74.js","assets/label2.c96a7d11.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/icon.48bdede2.js","assets/loader.9c78e3db.js","assets/guid.994bd1dc.js"]),pe(()=>import("./calcite-flow-item.27e1b766.js"),["assets/calcite-flow-item.27e1b766.js","assets/interactive.5c805e74.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/panel.6ae1f692.js","assets/action-menu.2be79bdb.js","assets/guid.994bd1dc.js","assets/action.1ad673c5.js","assets/icon.48bdede2.js","assets/loader.9c78e3db.js","assets/popover.12329f5f.js","assets/openCloseComponent.1beecb6a.js","assets/debounce.43d64738.js","assets/Heading.91bac1c4.js","assets/scrim.02266be6.js","assets/tooltip.c949aa56.js"]),pe(()=>import("./calcite-flow.0283cc12.js"),["assets/calcite-flow.0283cc12.js","assets/observers.6e054a3b.js"]),pe(()=>import("./calcite-icon.5b76e0a1.js"),["assets/calcite-icon.5b76e0a1.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"]),pe(()=>import("./calcite-list-item.38b02e4c.js"),["assets/calcite-list-item.38b02e4c.js","assets/interactive.5c805e74.js","assets/utils3.7dad9d25.js","assets/loadable.bbce2443.js","assets/icon.48bdede2.js","assets/observers.6e054a3b.js"]),pe(()=>import("./calcite-list.727a3e11.js"),["assets/calcite-list.727a3e11.js","assets/interactive.5c805e74.js","assets/observers.6e054a3b.js","assets/utils3.7dad9d25.js","assets/loadable.bbce2443.js","assets/filter2.32839055.js","assets/debounce.43d64738.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/icon.48bdede2.js","assets/input.6359813e.js","assets/form.af49867d.js","assets/label2.c96a7d11.js","assets/progress.60118725.js","assets/loader.9c78e3db.js","assets/guid.994bd1dc.js","assets/scrim.02266be6.js"]),pe(()=>import("./calcite-notice.76697bda.js"),["assets/calcite-notice.76697bda.js","assets/conditionalSlot.25fc4c17.js","assets/observers.6e054a3b.js","assets/loadable.bbce2443.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/icon.48bdede2.js"]),pe(()=>import("./calcite-scrim.c6d15d7d.js"),["assets/calcite-scrim.c6d15d7d.js","assets/scrim.02266be6.js","assets/t9n.ad8f40d0.js","assets/key.e212d876.js","assets/observers.6e054a3b.js","assets/loader.9c78e3db.js","assets/guid.994bd1dc.js"])])}get _deleteButtonCommonInfo(){return{appearance:"outline",kind:"danger",type:"primary"}}get activeWorkflow(){return this.viewModel.activeWorkflow}get allowedWorkflows(){return this.viewModel.allowedWorkflows}set allowedWorkflows(e){this.viewModel.allowedWorkflows=e}get label(){var e,t;return(t=(e=this.messages)==null?void 0:e.widgetLabel)!=null?t:""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...R4,...e,snappingControlsElements:{...R4.snappingControlsElements,...e==null?void 0:e.snappingControlsElements}}}startCreateWorkflowAtFeatureTypeSelection(){return My(N4,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),this.viewModel.startCreateWorkflowAtFeatureTypeSelection()}startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()}startCreateWorkflowAtFeatureCreation(e){return My(N4,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),this.viewModel.startCreateWorkflowAtFeatureCreation(e)}startCreateFeaturesWorkflowAtFeatureCreation(e){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(e)}startCreateWorkflowAtFeatureEdit(e){return My(N4,"startCreateWorkflowAtFeatureEdit"),this.viewModel.startCreateWorkflowAtFeatureEdit(e)}startUpdateWorkflowAtFeatureSelection(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()}startUpdateWorkflowAtMultipleFeatureSelection(e){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(e)}startUpdateWorkflowAtFeatureEdit(e){return this.viewModel.startUpdateWorkflowAtFeatureEdit(e)}deleteFeatureFromWorkflow(){return this.viewModel.deleteFeatureFromWorkflow()}cancelWorkflow(e){return this.viewModel.cancelWorkflow(e)}render(){const{viewModel:e}=this;if(!e)return J("div",{class:wi.base});const{state:t}=e;return J("div",{class:wi.base},J("calcite-flow",null,e.pageStack.map(i=>this._renderPage(i,t)),this._renderPage(e.page,t)),this._renderPrompt())}_renderPage(e,t){switch(e){case"disabled":break;case"ready":return this._renderLanding(t);case"awaiting-feature-creation-info":return this._renderTemplates(t);case"creating-features":case"editing-new-feature":case"editing-existing-feature":return this._renderAttributeEditing(t);case"awaiting-update-feature-candidate":return this._renderFeatureList(t);case"adding-attachment":return this._renderAttachmentAdding(t);case"editing-attachment":return this._renderAttachmentEditing(t)}return J("div",null)}_renderTemplates(e){const{EditorPanel:t,headingLevel:i,messages:r,_onBack:s}=this;return J(t,{active:this._isPanelActive(e),key:"templates-panel",handleBack:s,heading:r.selectTemplate,headingLevel:i},J("div",{class:wi.panelContent},this._featureTemplates.render()))}_renderAttributeEditing(e){const{activeWorkflow:t,EditorPanel:i,messages:r,messagesCommon:s,headingLevel:o,_onBack:c,viewModel:u}=this;if(!t)return null;const g=t.type,b=u.featureFormViewModel,S=g==="update"&&!t.data.edits.modified||u.syncing||b.updating,E=g==="update"?r.editFeature:r.createFeatures,A=g==="update"?s.update:s.create,O=g==="create-features"&&t.createFeatureState==="create-new",L=g==="create-features"?t.numPendingFeatures:0,N=L>1?es(r.createFeaturesTemplate,{numFeatures:L}):A,z=t.shouldShowAttachments,q=b.inputFields.every(Z=>!Z.visible)&&!z?this._renderMessage(es(r.clickToFinishTemplate,{button:A})):J("div",{key:"panel-content-section",class:wi.panelContentSection},this._renderOwnerAdminNoticeIfApplicable(t),J("div",{class:wi.panelContentSectionGroup},this._featureForm.render(),z&&J("div",{key:"attachments"},J(sl,{level:K1(o)},r.attachments),this._attachments.render())));return J(i,{active:this._isPanelActive(e),key:"attribute-editing-panel",heading:E,headingLevel:o,handleBack:c},J("div",{key:"panel-content",class:this.classes(wi.panelContent,{[wi.panelContentScrimContainer]:O})},q,O&&J("calcite-scrim",null)),this._renderFooterActions([{clickHandler:this._onSave,disabled:S,label:N,type:"primary"},u.shouldShowDeleteButton?{...this._deleteButtonCommonInfo,clickHandler:this._onDelete,disabled:u.syncing,label:s.delete}:null]))}_renderOwnerAdminNoticeIfApplicable(e){if(e!=null&&e.reliesOnOwnerAdminPrivileges)return J("calcite-notice",{open:!0,kind:"info",scale:"s",class:wi.ownerAdminNotice},J("div",{slot:"message"},this.messages.ownerAdminNotice))}_renderAttachmentAdding(e){const{_attachments:t,EditorPanel:i,_onBack:r,headingLevel:s,messages:o,messagesCommon:c}=this;return J(i,{active:this._isPanelActive(e),key:"attachment-adding-panel",heading:o.addAttachment,headingLevel:s,handleBack:r},J("div",{class:wi.panelContent},t.render()),this._renderFooterActions([{label:t.submitting?c.cancel:c.add,disabled:t.submitting||!t.selectedFile,type:"primary",clickHandler:this._onAttachmentAdd}]))}_renderAttachmentEditing(e){const{_attachments:t,EditorPanel:i,_onBack:r,activeWorkflow:s,headingLevel:o,messages:c,messagesCommon:u}=this;return s?J(i,{active:this._isPanelActive(e),key:"attachment-editing-panel",heading:c.editAttachment,headingLevel:o,handleBack:r},J("div",{class:wi.panelContent},t.render()),s.shouldAllowAttachmentEditing?this._renderFooterActions([{label:u.update,disabled:t.submitting||!t.selectedFile,type:"primary",clickHandler:this._onAttachmentUpdate},{...this._deleteButtonCommonInfo,clickHandler:this._onAttachmentDelete,disabled:t.submitting,label:u.delete}]):void 0):null}_renderMessage(e){return J("div",{key:"panel-content-message",class:wi.panelContentMessage},e)}_renderFooterActions(e){return J("div",{key:"footer-actions",slot:"footer",class:wi.actions},e.filter(U).map(({type:t,disabled:i,class:r,clickHandler:s,label:o,...c},u)=>J("calcite-button",{key:`action-${u}`,slot:"footer-actions",class:r,disabled:i!=null?i:!1,onclick:s,width:"full",...c},o)))}_renderPrompt(){const e=this._prompt;if(!e)return null;const{title:t,message:i,context:r,actions:s}=e,o=s.secondary;let c;switch(r){case"danger":c="danger";break;case"info":c="brand";break;default:c="neutral"}const u=J("calcite-button",{afterCreate:nRe,appearance:"solid",key:"prompt-primary-button",kind:c,onclick:s.primary.action,scale:"m",width:o?"half":"full"},s.primary.label),g=o&&J("calcite-button",{appearance:"outline",key:"prompt-secondary-button",kind:c,onclick:o.action,scale:"m",width:"half"},o.label);return J("calcite-scrim",null,J("div",{class:`${wi.promptContainer}--${r}`},J("div",{class:wi.promptHeader},J("calcite-icon",{icon:"exclamation-mark-triangle"}),J(sl,{class:wi.promptHeading,level:this.headingLevel},t)),J("div",{class:wi.promptMessage},i),J("div",{class:wi.promptDivider}),J("div",{class:wi.promptActions},g,u)))}_renderLanding(e){const{EditorPanel:t,headingLevel:i,messages:r,viewModel:s}=this,{canUpdate:o}=s,c=this._featureTemplates.viewModel.numberOfFeatureTemplates,u=!o&&c===0;return J(t,{active:this._isPanelActive(e),key:"landing-panel",heading:r.widgetLabel,headingLevel:i},J("div",{class:wi.panelContent},o&&J("div",{key:"edit-actions",class:wi.panelContentSection},this._renderUpdateActions(e)),c>0&&J("div",{key:"create-actions",class:wi.panelContentSection},this._renderCreateActions()),u&&J("div",{key:"no-content",class:wi.panelContentMessage},r.noEditableLayers)),this._renderFooterHelpMessages())}_renderFooterHelpMessages(){var o;const{activeWorkflow:e,messages:t,view:i}=this,r=e==null?void 0:e.helpMessage,s=r?(o=t[(i==null?void 0:i.type)==="3d"?"helpMessages3d":"helpMessages2d"])==null?void 0:o[r]:null;return s?J("div",{key:"footer-actions",slot:"footer",class:wi.helpMessage},s):null}_renderUpdateActions(e){const{messages:t,messagesCommon:i}=this;return J("div",{key:"update-actions"},J(sl,{level:K1(this.headingLevel)},t.editFeatures),J("calcite-list",{selectionMode:"single",selectionAppearance:"border"},J("calcite-list-item",{selected:e==="awaiting-feature-to-update",label:i.select,onCalciteListItemSelect:this._onToggleUpdateWorkflow},J("calcite-icon",{icon:"cursor",slot:"content-start"}))))}_renderCreateActions(){const{_featureTemplates:e,headingLevel:t,messages:i}=this;return J("div",{key:"create-actions"},J(sl,{level:K1(t)},i.createFeatures),J("div",{key:"templates",class:wi.featureTemplatesContainer},e.render()))}_renderFeatureList(e){const{EditorPanel:t,_onBack:i,headingLevel:r,messages:s,messagesTemplates:o,viewModel:{activeWorkflow:c,editableItems:u}}=this;if((c==null?void 0:c.type)!=="update")return null;const g=c.data.candidates,b=es(s.multipleFeaturesTemplate,{total:g.length}),S=new Map;let E=0;g.map(L=>({label:this._getLabel(L),id:L.attributes[L.layer.objectIdField],data:L})).filter(L=>{const{label:N,data:z}=L,q=this._filterText.toLowerCase(),{title:Z}=z.layer,ee=u.find(oe=>oe.layer===z.layer);if(!ee)return null;const{attachmentsOnUpdateEnabled:ie,supports:ne}=ee;return(ne.includes("update")||ne.includes("delete")||ie)&&(!q||(N==null?void 0:N.toLowerCase().includes(q))||(Z==null?void 0:Z.toLowerCase().includes(q)))}).filter(U).forEach(L=>{var z,q;E++;const N=L.data.layer;S.has(N)?(z=S.get(N))==null||z.items.push(L):S.set(N,{id:`${N.id}`,label:(q=N.title)!=null?q:"",items:[L]})});const A=u.toArray().map(({layer:L})=>S.get(L)).filter(U),O=E>10||this._filterText.length>0;return J(t,{active:this._isPanelActive(e),key:"feature-list",heading:b,headingLevel:r,handleBack:i},J("div",{class:wi.panelContent},J("div",{class:wi.panelContentSection},oee({id:this.id,enableListScroll:!1,filterEnabled:O,filterText:this._filterText,items:A,messages:{filterPlaceholder:o.filterPlaceholder,noItems:o.noItems,noMatches:o.noMatches},onItemMouseEnter:L=>this.viewModel.selectFeature(L.data),onItemMouseLeave:()=>this.viewModel.selectFeature(null),onItemSelect:L=>this.viewModel.selectFeature(L.data,!0),onFilterChange:L=>this._filterText=L}))))}_isPanelActive(e){return this.viewModel.state===e}_renderSettings(){var r;const e=this.visibleElements,t=e.snappingControls,i=e.sketchTooltipControls;return t||i?J("calcite-accordion",{class:wi.settingsContainer,appearance:"transparent"},J("calcite-accordion-item",{heading:(r=this.messagesCommon)==null?void 0:r.settings,iconStart:"gear"},i&&J(Jh,{tooltipOptions:this.tooltipOptions}),t&&J(sRe,{snappingOptions:this.snappingOptions,view:this.view,visibleElements:e.snappingControlsElements,afterCreate:s=>s.layerListOpen=!1}))):null}_getLabel(e){const t=e.layer;if(!t)return null;const{objectIdField:i}=t,{attributes:r}=e,s=xq(t);return s&&r[s]&&`${r[s]}`||es(this.messages.untitledFeatureTemplate,{id:r[i]})}_onSave(){this.viewModel.save()}_onDelete(){const{messages:e,messagesCommon:t}=this;this._prompt={title:e.deleteWarningTitle,message:e.deleteWarningMessage,context:"danger",actions:{primary:{label:t.delete,action:()=>{this.deleteFeatureFromWorkflow(),this._clearPrompt()}},secondary:{label:e.keepFeature,action:this._clearPrompt}}}}async _onToggleUpdateWorkflow(){const{viewModel:e}=this;e.canUpdate&&(e.activeWorkflow&&e.state==="awaiting-feature-to-update"?await e.cancelWorkflow():await e.startUpdateWorkflowAtFeatureSelection())}async _onBack(e){return e==null||e.stopPropagation(),this.viewModel.back()}_onAttachmentAdd(){const{activeWorkflow:e}=this.viewModel;e&&(e.type==="create-features"?(this._attachments.addFile(),e.previous()):this._attachments.addAttachment().then(()=>e.previous()))}_onAttachmentUpdate(){const{activeWorkflow:e}=this.viewModel;e&&(e.type==="create-features"?(this._attachments.updateFile(),e.previous()):this._attachments.updateAttachment().then(()=>e.previous()))}_onAttachmentDelete(){const{messages:e,messagesCommon:t}=this;this._prompt={title:e.deleteAttachmentWarningTitle,message:e.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:t.delete,action:this._onAttachmentDeleteConfirm},secondary:{label:e.keepAttachment,action:this._clearPrompt}}}}};v([_()],Ut.prototype,"_featureForm",void 0),v([_()],Ut.prototype,"_attachments",void 0),v([_()],Ut.prototype,"_featureTemplates",void 0),v([_()],Ut.prototype,"_filterText",void 0),v([_()],Ut.prototype,"_prompt",void 0),v([_()],Ut.prototype,"_spinner",void 0),v([_()],Ut.prototype,"_deleteButtonCommonInfo",null),v([_({readOnly:!0})],Ut.prototype,"activeWorkflow",null),v([_()],Ut.prototype,"allowedWorkflows",null),v([_()],Ut.prototype,"useDeprecatedCreateWorkflow",void 0),v([_()],Ut.prototype,"headingLevel",void 0),v([_()],Ut.prototype,"iconClass",void 0),v([_()],Ut.prototype,"label",null),v([_()],Ut.prototype,"labelOptions",null),v([_()],Ut.prototype,"layerInfos",null),v([_(),ui("esri/widgets/Editor/t9n/Editor")],Ut.prototype,"messages",void 0),v([_(),ui("esri/t9n/common")],Ut.prototype,"messagesCommon",void 0),v([_(),ui("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],Ut.prototype,"messagesTemplates",void 0),v([_()],Ut.prototype,"snappingOptions",null),v([_()],Ut.prototype,"tooltipOptions",null),v([_()],Ut.prototype,"supportingWidgetDefaults",void 0),v([_()],Ut.prototype,"view",null),v([_(),G5(["workflow-cancel","workflow-commit"])],Ut.prototype,"viewModel",void 0),v([_()],Ut.prototype,"visibleElements",void 0),v([_t("visibleElements")],Ut.prototype,"castVisibleElements",null),v([vr()],Ut.prototype,"_onSave",null),v([vr()],Ut.prototype,"_onDelete",null),v([vr()],Ut.prototype,"_onToggleUpdateWorkflow",null),v([vr()],Ut.prototype,"_onBack",null),v([vr()],Ut.prototype,"_onAttachmentAdd",null),v([vr()],Ut.prototype,"_onAttachmentUpdate",null),v([vr()],Ut.prototype,"_onAttachmentDelete",null),Ut=v([K(Mte)],Ut);const oRe=Ut;var MV;jt.assetsPath="./assets";jt.apiKey="AAPK4cf070f48d9447b2af48df14234fb1c1iQX7jgpsU_O_g6eHZ7JOvND6f5_H5aiAembWWExxH_7g1-pPgwzqDxd8MJe2N5JZ";const G9=new vq({basemap:"arcgis-dark-gray"}),aRe=new I9,ag=new I9,mw=new kCe({map:G9,center:[-97.305923,37.679377],zoom:9,container:"viewDiv"}),lRe={title:"API Test",content:"<b>ID:</b> {ObjectID}<br><b>Location:</b> {place_name}<br>"},U9=new p9({url:"https://services8.arcgis.com/TrLhDuWxkcSkFAjt/arcgis/rest/services/api_test/FeatureServer/0",outFields:["*"],popupTemplate:lRe});G9.add(aRe);G9.add(ag);G9.add(U9);document.getElementById("bufferBtn").addEventListener("click",uRe);function uRe(){var t=document.getElementById("dropdown").value;const i={type:"simple-fill",color:[227,139,79,.25],style:"solid",outline:{color:[255,255,255,255],width:1}};U9.queryFeatures().then(r=>{r.features.map(s=>{const o=c8(s.geometry,t,"nautical-miles");ag.removeAll();var c=new wr({geometry:o,symbol:i});ag.add(c)})})}new tOe({view:mw,autoRefreshEnabled:!0,layer:U9,container:"tableDiv",editingEnabled:!0,hiddenFields:["OBJECTID"]});document.getElementById("clearBtn").addEventListener("click",()=>{ag.removeAll()});const TV=new oRe({view:mw}),Tte=document.getElementById("checkboxId");Tte.onchange=()=>{cRe()};function cRe(){Tte.checked?mw.ui.add(TV,"top-right"):mw.ui.remove(TV)}const hRe=document.getElementById("bufferCkbk");mw.on("click",e=>{if(hRe.checked){MV=e.mapPoint;var t=document.getElementById("dropdown").value;const r={type:"simple-fill",color:[227,139,79,.25],style:"solid",outline:{color:[255,255,255,255],width:1}};U9.queryFeatures().then(s=>{s.features.map(o=>{const c=c8(MV,t,"nautical-miles");ag.removeAll();var u=new wr({geometry:c,symbol:r});ag.add(u)})})}});export{HZ as $,eX as A,Ay as B,hc as C,aG as D,Ti as E,tVe as F,Vr as G,ti as H,fc as I,ge as J,rt as K,so as L,n$ as M,$6 as N,qRe as O,q4 as P,Yf as Q,To as R,Ri as S,ORe as T,mi as U,ZZ as V,ro as W,jt as X,ds as Y,lNe as Z,pe as _,U as a,Fze as a$,ss as a0,Rr as a1,Bw as a2,ar as a3,gy as a4,v as a5,_ as a6,K as a7,Re as a8,Ai as a9,OPe as aA,KNe as aB,fVe as aC,JW as aD,zwe as aE,Wb as aF,fk as aG,SS as aH,Yje as aI,ZNe as aJ,zNe as aK,SNe as aL,Gd as aM,sCe as aN,mpe as aO,ype as aP,wt as aQ,Jl as aR,eu as aS,Tw as aT,Mw as aU,Xee as aV,YS as aW,bNe as aX,_5 as aY,w5 as aZ,Pze as a_,Xs as aa,t7 as ab,zU as ac,Zl as ad,pt as ae,ts as af,_9 as ag,Qde as ah,Xn as ai,LZ as aj,e8 as ak,RZ as al,Yt as am,G4e as an,Zze as ao,Q4e as ap,Xb as aq,Xze as ar,ua as as,Oc as at,Qn as au,x5 as av,sze as aw,gs as ax,vc as ay,rq as az,Rne as b,kJ as b$,Oze as b0,fs as b1,tl as b2,Qs as b3,n5 as b4,ve as b5,Xa as b6,iq as b7,n7 as b8,Dhe as b9,nS as bA,Nje as bB,MNe as bC,Bve as bD,Hve as bE,Je as bF,Aje as bG,$je as bH,UNe as bI,y6 as bJ,xW as bK,Cje as bL,IL as bM,Wve as bN,Eje as bO,Sje as bP,Cw as bQ,nu as bR,z_ as bS,RW as bT,Fhe as bU,jf as bV,Yn as bW,pze as bX,oze as bY,Bt as bZ,Zk as b_,$he as ba,dM as bb,sq as bc,yNe as bd,xNe as be,Jy as bf,yS as bg,VK as bh,vf as bi,vIe as bj,Yl as bk,Hy as bl,e_ as bm,fpe as bn,Dje as bo,$o as bp,Fje as bq,Pje as br,Lje as bs,Rje as bt,xL as bu,SL as bv,kje as bw,Oje as bx,Po as by,Tje as bz,xRe as c,wr as c$,g2e as c0,Ik as c1,OJ as c2,Ts as c3,is as c4,Fd as c5,y2e as c6,eEe as c7,DN as c8,f5e as c9,bve as cA,wve as cB,mVe as cC,vVe as cD,gVe as cE,yVe as cF,GZ as cG,wIe as cH,E1 as cI,Dt as cJ,yze as cK,It as cL,Od as cM,Rx as cN,Mje as cO,w0 as cP,R6 as cQ,mSe as cR,ru as cS,o5 as cT,N2e as cU,qt as cV,vi as cW,pu as cX,HJ as cY,n0 as cZ,tn as c_,m5e as ca,y5e as cb,Fo as cc,z_e as cd,AJ as ce,E2e as cf,zze as cg,Lze as ch,F5e as ci,Dwe as cj,kc as ck,gr as cl,ZW as cm,lze as cn,nze as co,Zbe as cp,dze as cq,UL as cr,yRe as cs,gRe as ct,r9e as cu,UZ as cv,n8 as cw,Nwe as cx,KW as cy,bW as cz,wRe as d,lu as d$,c5e as d0,h5e as d1,d5e as d2,LW as d3,tze as d4,Xl as d5,RB as d6,Xje as d7,Za as d8,Mwe as d9,sje as dA,zDe as dB,ZDe as dC,ije as dD,BDe as dE,VDe as dF,tje as dG,UDe as dH,oje as dI,eje as dJ,$ge as dK,Cge as dL,HDe as dM,WDe as dN,JDe as dO,nje as dP,rje as dQ,c9e as dR,Be as dS,B5e as dT,sNe as dU,Tb as dV,Sze as dW,GNe as dX,Yq as dY,p5 as dZ,R7 as d_,t9 as da,i0 as db,eze as dc,Qje as dd,K6 as de,Rze as df,_Re as dg,p9 as dh,Ms as di,Gv as dj,_c as dk,Dze as dl,Nze as dm,jze as dn,nNe as dp,GDe as dq,qDe as dr,yH as ds,QDe as dt,kge as du,jDe as dv,$ye as dw,DDe as dx,XDe as dy,KDe as dz,Fne as e,zy as e$,VNe as e0,tme as e1,u5 as e2,Ew as e3,Eo as e4,gpe as e5,Xf as e6,XMe as e7,Qze as e8,eVe as e9,Sx as eA,qf as eB,Pfe as eC,Yy as eD,e3e as eE,Q2e as eF,Cze as eG,TNe as eH,ONe as eI,CNe as eJ,$Ne as eK,ANe as eL,kNe as eM,Cb as eN,Ao as eO,Fde as eP,Tn as eQ,hK as eR,dK as eS,R5e as eT,In as eU,ime as eV,$w as eW,xze as eX,Gy as eY,PG as eZ,au as e_,cee as ea,Hi as eb,$e as ec,Vd as ed,s0 as ee,QZ as ef,Mn as eg,$i as eh,Iw as ei,_0 as ej,_6 as ek,Ne as el,qe as em,eF as en,ak as eo,jbe as ep,Jje as eq,ca as er,qm as es,uee as et,pl as eu,JRe as ev,vde as ew,S5 as ex,gMe as ey,Ot as ez,Se as f,JT as f$,ghe as f0,_t as f1,Rd as f2,Nd as f3,uu as f4,NT as f5,Qi as f6,RT as f7,jT as f8,zx as f9,h2e as fA,qze as fB,Qw as fC,Uze as fD,wf as fE,ui as fF,ki as fG,J as fH,es as fI,gd as fJ,Mo as fK,sS as fL,jV as fM,$y as fN,uy as fO,zRe as fP,Bae as fQ,ll as fR,c5 as fS,gw as fT,na as fU,eNe as fV,q2e as fW,URe as fX,Eze as fY,Z2e as fZ,y5 as f_,k0e as fa,L4e as fb,Z4e as fc,RRe as fd,yU as fe,UG as ff,wb as fg,uI as fh,x7 as fi,uF as fj,INe as fk,tDe as fl,bDe as fm,_U as fn,Eue as fo,TDe as fp,$ce as fq,dMe as fr,fMe as fs,Mb as ft,$s as fu,Ni as fv,Hn as fw,Qe as fx,lg as fy,RMe as fz,de as g,Dr as g$,YDe as g0,Y2e as g1,z5e as g2,H5e as g3,LJ as g4,mRe as g5,Jw as g6,u3e as g7,SRe as g8,Qx as g9,lM as gA,$4 as gB,gDe as gC,hze as gD,_W as gE,xje as gF,dV as gG,IVe as gH,ng as gI,_pe as gJ,lZ as gK,SVe as gL,Sr as gM,NV as gN,D4 as gO,Ov as gP,xVe as gQ,A4 as gR,nO as gS,bVe as gT,wVe as gU,_Ve as gV,vpe as gW,xue as gX,Aue as gY,f5 as gZ,rNe as g_,FRe as ga,Uf as gb,ny as gc,Cy as gd,BRe as ge,Ile as gf,cd as gg,xFe as gh,bze as gi,n2e as gj,Hee as gk,lV as gl,n6 as gm,bFe as gn,wFe as go,_Fe as gp,Jee as gq,EFe as gr,MFe as gs,$t as gt,Yee as gu,hde as gv,_de as gw,Mf as gx,Vx as gy,cu as gz,fRe as h,Jf as h$,toe as h0,bRe as h1,LTe as h2,IRe as h3,i7 as h4,Sb as h5,oa as h6,hNe as h7,Dce as h8,kx as h9,cMe as hA,iNe as hB,HRe as hC,PMe as hD,Ro as hE,qce as hF,Hce as hG,Xce as hH,rhe as hI,KU as hJ,JU as hK,YU as hL,ihe as hM,lhe as hN,uhe as hO,Uce as hP,g5 as hQ,ZU as hR,NRe as hS,yw as hT,Zje as hU,uze as hV,gwe as hW,aje as hX,lje as hY,HNe as hZ,tu as h_,v5 as ha,vM as hb,NU as hc,Bce as hd,oNe as he,TRe as hf,e0e as hg,TB as hh,Ace as hi,NDe as hj,CB as hk,Pc as hl,m0e as hm,Nr as hn,f0e as ho,Ac as hp,IMe as hq,jfe as hr,ky as hs,ei as ht,Tle as hu,QG as hv,eU as hw,Cle as hx,G6 as hy,q6 as hz,aNe as i,Zhe as i$,ZJ as i0,n3e as i1,Lbe as i2,rze as i3,rl as i4,Cde as i5,FNe as i6,Ab as i7,PNe as i8,dNe as i9,MRe as iA,kce as iB,gi as iC,_y as iD,ove as iE,md as iF,Yk as iG,p_e as iH,f_e as iI,WP as iJ,Id as iK,VU as iL,Ib as iM,px as iN,F4e as iO,ace as iP,J_e as iQ,n9 as iR,Eg as iS,Bfe as iT,pNe as iU,nhe as iV,GU as iW,CRe as iX,cle as iY,D6 as iZ,Jne as i_,TVe as ia,ok as ib,mNe as ic,EVe as id,Bf as ie,fwe as ig,lwe as ih,PL as ii,vwe as ij,Kz as ik,cze as il,ffe as im,wze as io,oG as ip,WI as iq,JI as ir,ize as is,Bi as it,Kje as iu,vRe as iv,zTe as iw,Spe as ix,aze as iy,e9 as iz,dRe as j,pO as j$,En as j0,Lc as j1,aOe as j2,ZQ as j3,St as j4,A2 as j5,Ke as j6,tq as j7,BG as j8,XQ as j9,wNe as jA,rAe as jB,Lhe as jC,JCe as jD,xPe as jE,Zb as jF,Mee as jG,Tee as jH,lee as jI,fPe as jJ,lVe as jK,pRe as jL,Ct as jM,KA as jN,pPe as jO,mLe as jP,Ine as jQ,t0 as jR,Fce as jS,lce as jT,M4e as jU,Wd as jV,p4e as jW,f4e as jX,Og as jY,mO as jZ,va as j_,QQ as ja,eee as jb,qS as jc,sVe as jd,bd as je,oC as jf,lDe as jg,wDe as jh,_De as ji,kw as jj,I9 as jk,zje as jl,xS as jm,mEe as jn,e$ as jo,jr as jp,fl as jq,ta as jr,GOe as js,N4e as jt,sn as ju,Tc as jv,IZ as jw,Cd as jx,l4e as jy,Kk as jz,or as k,sDe as k$,z9 as k0,ZRe as k1,FDe as k2,cVe as k3,xAe as k4,$De as k5,EZ as k6,M0 as k7,P4e as k8,E4e as k9,Zn as kA,d5 as kB,tO as kC,KRe as kD,YRe as kE,Iee as kF,SAe as kG,LDe as kH,hVe as kI,ADe as kJ,See as kK,Nne as kL,Dne as kM,XP as kN,Fy as kO,L9 as kP,kze as kQ,jNe as kR,vl as kS,nVe as kT,PDe as kU,j9 as kV,py as kW,bee as kX,vLe as kY,Dfe as kZ,DNe as k_,oce as ka,Nce as kb,W_e as kc,Ice as kd,LVe as ke,zr as kf,_4e as kg,Rc as kh,uM as ki,bje as kj,wje as kk,wg as kl,j5 as km,uje as kn,cje as ko,hje as kp,dje as kq,gje as kr,pje as ks,fje as kt,mje as ku,yje as kv,vje as kw,XRe as kx,Lo as ky,V7 as kz,b6 as l,K_e as l$,AB as l0,Ffe as l1,$Re as l2,FVe as l3,gPe as l4,Ir as l5,ga as l6,PVe as l7,ys as l8,xpe as l9,vPe as lA,fi as lB,_Ne as lC,obe as lD,Cne as lE,nD as lF,dVe as lG,P2 as lH,zfe as lI,EDe as lJ,Sne as lK,_B as lL,ra as lM,i0e as lN,Ufe as lO,g0e as lP,XNe as lQ,_7 as lR,r0e as lS,I4e as lT,WU as lU,Io as lV,Ox as lW,Gce as lX,uNe as lY,a0e as lZ,Y_e as l_,aDe as la,dDe as lb,sf as lc,dPe as ld,NNe as le,aD as lf,LNe as lg,KV as lh,RNe as li,CDe as lj,YNe as lk,oD as ll,Bd as lm,H6 as ln,D7 as lo,VB as lp,jw as lq,R4e as lr,aVe as ls,ARe as lt,pDe as lu,Jfe as lv,qfe as lw,Vce as lx,Vfe as ly,Bze as lz,W3 as m,$Ve as m$,SZ as m0,hce as m1,PRe as m2,Xh as m3,VI as m4,xw as m5,ERe as m6,Coe as m7,xhe as m8,o0e as m9,Lpe as mA,Rpe as mB,xDe as mC,i4e as mD,Kze as mE,oVe as mF,k_e as mG,Af as mH,g5e as mI,C5 as mJ,v5e as mK,Dw as mL,b5e as mM,A5 as mN,Lw as mO,sK as mP,rpe as mQ,$ze as mR,kVe as mS,vDe as mT,hDe as mU,Mne as mV,Gpe as mW,uDe as mX,IDe as mY,SDe as mZ,Ipe as m_,vNe as ma,gNe as mb,H_e as mc,RU as md,Gfe as me,Ow as mf,Pw as mg,Fw as mh,Mze as mi,V0e as mj,$4e as mk,h5 as ml,kne as mm,Jle as mn,fDe as mo,mDe as mp,q5 as mq,SMe as mr,y0e as ms,_G as mt,t5 as mu,E7 as mv,Rw as mw,Lb as mx,dd as my,Co as mz,Jt as n,g9 as n$,RDe as n0,CVe as n1,Nae as n2,nDe as n3,BNe as n4,yDe as n5,UFe as n6,qFe as n7,cDe as n8,Lfe as n9,qNe as nA,JNe as nB,WNe as nC,Yze as nD,Er as nE,Gbe as nF,i1 as nG,VMe as nH,GMe as nI,NMe as nJ,Kge as nK,jU as nL,h0 as nM,ole as nN,Hfe as nO,pVe as nP,wS as nQ,Jz as nR,MDe as nS,Ohe as nT,Ar as nU,_be as nV,rs as nW,Vje as nX,sk as nY,qA as nZ,Gze as n_,iDe as na,abe as nb,Dpe as nc,ODe as nd,rDe as ne,pMe as nf,oDe as ng,DU as nh,v4e as ni,Wy as nj,MZ as nk,S7 as nl,cNe as nm,dJ as nn,fEe as no,JA as np,LRe as nq,J_ as nr,AVe as ns,IF as nt,MVe as nu,T5 as nv,gg as nw,S0 as nx,Ww as ny,ug as nz,iVe as o,DW as o$,ibe as o0,jje as o1,Hm as o2,Yve as o3,Ije as o4,mg as o5,Kh as o6,bS as o7,uVe as o8,zEe as o9,rve as oA,xbe as oB,Sbe as oC,Jze as oD,tNe as oE,$be as oF,Hje as oG,nC as oH,Hze as oI,Wze as oJ,Obe as oK,Wje as oL,Mbe as oM,qje as oN,rZ as oO,__e as oP,nF as oQ,Cbe as oR,m5 as oS,WT as oT,vr as oU,sl as oV,K1 as oW,WIe as oX,WFe as oY,j6 as oZ,L6 as o_,yLe as oa,gLe as ob,OVe as oc,dO as od,aLe as oe,NVe as of,RVe as og,hO as oh,Uje as oi,HK as oj,WK as ok,jIe as ol,BK as om,UIe as on,qIe as oo,BIe as op,$W as oq,Ei as or,s9 as os,_je as ot,Gje as ou,Bje as ov,Ld as ow,rS as ox,vW as oy,Ebe as oz,$c as p,sJ as p$,Vy as p0,jRe as p1,n1e as p2,V_ as p3,IC as p4,WJ as p5,gK as p6,Q5e as p7,Tze as p8,gR as p9,rF as pA,wq as pB,Ak as pC,h9 as pD,wN as pE,c3e as pF,EA as pG,o9 as pH,l3e as pI,Gk as pJ,wK as pK,_b as pL,no as pM,$5 as pN,rde as pO,ide as pP,The as pQ,BP as pR,rn as pS,Ble as pT,qle as pU,QRe as pV,HI as pW,Qoe as pX,u9e as pY,Sg as pZ,bk as p_,p9e as pa,_2e as pb,Ck as pc,s9e as pd,Cn as pe,Vae as pf,Vq as pg,V2e as ph,zG as pi,Aze as pj,h3e as pk,p3e as pl,B2e as pm,Tk as pn,W2e as po,J2e as pp,Pne as pq,Lne as pr,cg as ps,iF as pt,$0e as pu,U5e as pv,K2e as pw,D5e as px,t3e as py,t9e as pz,vMe as q,mce as q$,bbe as q0,O_e as q1,wbe as q2,wk as q3,gJ as q4,aS as q5,eJ as q6,Xv as q7,H2e as q8,kDe as q9,zd as qA,O5 as qB,kSe as qC,VJ as qD,Nc as qE,KSe as qF,FSe as qG,LSe as qH,bSe as qI,wSe as qJ,_Se as qK,xSe as qL,SSe as qM,ISe as qN,ESe as qO,MSe as qP,TSe as qQ,CSe as qR,ASe as qS,$Se as qT,Pz as qU,bK as qV,One as qW,ul as qX,DRe as qY,sM as qZ,tB as q_,kRe as qa,eDe as qb,By as qc,tK as qd,w6 as qe,ym as qf,eS as qg,NSe as qh,cx as qi,QNe as qj,lF as qk,u7 as ql,VRe as qm,su as qn,pa as qo,jq as qp,JG as qq,tP as qr,Yb as qs,X2e as qt,_ze as qu,Md as qv,hN as qw,Eb as qx,m3e as qy,f3e as qz,xr as r,d3e as r0,Ize as r1,kae as r2,yP as r3,X as r4,WRe as r5,vze as r6,gze as r7,Vk as r8,ENe as r9,nr as ra,iK as rb,pg as rc,N9 as rd,Fee as re,Wa as rf,oc as rg,ps as rh,cK as ri,R0 as rj,VW as rk,GRe as rl,fNe as rm,uue as rn,fze as ro,r9 as rp,mze as rq,Vze as rr,rVe as rs,Uee as rt,Ie as s,ae as t,yMe as u,Ene as v,qZ as w,t_ as x,e7 as y,Is as z};
