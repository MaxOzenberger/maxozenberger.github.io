import{iN as q,g9 as N,iO as U,iP as D,iQ as G,hp as v,n as _,h5 as M,ha as m,h9 as b,hb as w,h6 as h,hc as y,ac as $,ab as f,h7 as O,iR as H,hF as J,iS as E,s as W,t as tt,h4 as et,iT as it,hi as st,iL as rt,iU as L,p as Y,iM as nt}from"./index.3255d2a5.js";import{n as ot}from"./mat3f64.9180efcb.js";import{n as ct}from"./mat4f64.9070f685.js";import{n as ut}from"./quatf64.1dc83f1c.js";class at{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&q(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*Z);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,Z));e++)this._items.push(this._allocator())}}const Z=1024;class o{constructor(e,i,s){this._itemByteSize=e,this._itemCreate=i,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(s/this._itemByteSize)}get(){this._itemsPtr===0&&q(()=>this._reset());const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const i=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let s=0;s<this._itemsPerBuffer;++s)this._items.push(this._itemCreate(i,s*this._itemByteSize));this._buffers.push(i)}return this._items[this._itemsPtr++]}_reset(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=l){return new o(16,U,e)}static createVec3f64(e=l){return new o(24,D,e)}static createVec4f64(e=l){return new o(32,G,e)}static createMat3f64(e=l){return new o(72,ot,e)}static createMat4f64(e=l){return new o(128,ct,e)}static createQuatf64(e=l){return new o(32,ut,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const l=4*N.KILOBYTES,Lt=o.createVec2f64(),u=o.createVec3f64(),Yt=o.createVec4f64();o.createMat3f64();const ht=o.createMat4f64(),Zt=o.createQuatf64();var p;(function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"})(p||(p={}));function B(t){return t?j(v(t.origin),v(t.direction)):j(_(),_())}function j(t,e){return{origin:t,direction:e}}function jt(t,e){const i=gt.get();return i.origin=t,i.direction=e,i}function qt(t,e=B()){return ft(t.origin,t.direction,e)}function Et(t,e,i=B()){return M(i.origin,t),m(i.direction,e,t),i}function ft(t,e,i=B()){return M(i.origin,t),M(i.direction,e),i}function Qt(t,e){const i=b(u.get(),w(u.get(),t.direction),m(u.get(),e,t.origin));return h(i,i)}function mt(t,e,i){const s=h(t.direction,m(i,e,t.origin));return y(i,t.origin,$(i,t.direction,s)),i}const gt=new at(()=>B());function Xt(t,e,i){const s=h(t,e)/h(t,t);return $(i,t,s)}function It(t,e){return h(t,e)/f(t)}function _t(t,e){const i=h(t,e)/(f(t)*f(e));return-O(i)}function kt(t,e,i){w(d,t),w(R,e);const s=h(d,R),r=O(s),n=b(d,d,R);return h(n,i)<0?2*Math.PI-r:r}const d=_(),R=_();function C(){return H()}function Q(t,e=C()){return J(e,t)}function lt(t,e){return E(t[0],t[1],t[2],e)}function pt(t){return t}function $t(t){t[0]=t[1]=t[2]=t[3]=0}function Pt(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t}function S(t){return t[3]}function dt(t){return t}function Mt(t,e,i,s){return E(t,e,i,s)}function bt(t,e,i){return t!==i&&M(i,t),i[3]=t[3]+e,i}function wt(t,e,i){return W.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t===i?i:Q(t,i)}function z(t,e,i){if(tt(e))return!1;const{origin:s,direction:r}=e,n=yt;n[0]=s[0]-t[0],n[1]=s[1]-t[1],n[2]=s[2]-t[2];const c=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];if(c===0)return!1;const a=2*(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]),P=a*a-4*c*(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]-t[3]*t[3]);if(P<0)return!1;const T=Math.sqrt(P);let g=(-a-T)/(2*c);const A=(-a+T)/(2*c);return(g<0||A<g&&A>0)&&(g=A),!(g<0)&&(i&&(i[0]=s[0]+r[0]*g,i[1]=s[1]+r[1]*g,i[2]=s[2]+r[2]*g),!0)}const yt=_();function Bt(t,e){return z(t,e,null)}function St(t,e,i){if(z(t,e,i))return i;const s=X(t,e,u.get());return y(i,e.origin,$(u.get(),e.direction,et(e.origin,s)/f(e.direction))),i}function X(t,e,i){const s=u.get(),r=ht.get();b(s,e.origin,e.direction);const n=S(t);b(i,s,e.origin),$(i,i,1/f(i)*n);const c=k(t,e.origin),a=_t(e.origin,i);return it(r,a+c,s),st(i,i,r),i}function zt(t,e,i){return z(t,e,i)?i:(mt(e,t,i),I(t,i,i))}function I(t,e,i){const s=m(u.get(),e,t),r=$(u.get(),s,t[3]/f(s));return y(i,r,t)}function At(t,e){const i=m(u.get(),e,t),s=rt(i),r=t[3]*t[3];return Math.sqrt(Math.abs(s-r))}function k(t,e){const i=m(u.get(),e,t),s=f(i),r=S(t),n=r+Math.abs(r-s);return O(r/n)}const V=_();function F(t,e,i,s){const r=m(V,e,t);switch(i){case p.X:{const n=L(r,V)[2];return Y(s,-Math.sin(n),Math.cos(n),0)}case p.Y:{const n=L(r,V),c=n[1],a=n[2],P=Math.sin(c);return Y(s,-P*Math.cos(a),-P*Math.sin(a),Math.cos(c))}case p.Z:return w(s,r);default:return}}function K(t,e){const i=m(x,e,t);return f(i)-t[3]}function Rt(t,e,i,s){const r=K(t,e),n=F(t,e,p.Z,x),c=$(x,n,i-r);return y(s,e,c)}function Vt(t,e){const i=nt(t,e),s=S(t);return i<=s*s}const x=_(),xt=C();Object.freeze(Object.defineProperty({__proto__:null,altitudeAt:K,angleToSilhouette:k,axisAt:F,clear:$t,closestPoint:zt,closestPointOnSilhouette:X,containsPoint:Vt,copy:Q,create:C,distanceToSilhouette:At,elevate:bt,fromCenterAndRadius:lt,fromRadius:Pt,fromValues:Mt,getCenter:dt,getRadius:S,intersectRay:z,intersectRayClosestSilhouette:St,intersectsRay:Bt,projectPoint:I,setAltitudeAt:Rt,setExtent:wt,tmpSphere:xt,wrap:pt},Symbol.toStringTag,{value:"Module"}));export{$t as C,Mt as E,Vt as N,C as R,S as T,Bt as V,Q as _,qt as a,It as b,u as c,B as d,_t as e,ht as f,Qt as g,Et as h,Xt as i,kt as j,dt as k,p as n,Zt as o,jt as p,Yt as r,at as s,Lt as t,pt as w};
